System.register([],(function(e,t){"use strict";return{execute:function(){var n=document.createElement("style");function r(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}n.textContent="html.ios{--ion-default-font: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", \"Roboto\", sans-serif}html.md{--ion-default-font: \"Roboto\", \"Helvetica Neue\", sans-serif}html{--ion-font-family: var(--ion-default-font)}body{background:var(--ion-background-color)}body.backdrop-no-scroll{overflow:hidden}html.ios ion-modal.modal-card ion-header ion-toolbar:first-of-type,html.ios ion-modal.modal-sheet ion-header ion-toolbar:first-of-type,html.ios ion-modal ion-footer ion-toolbar:first-of-type{padding-top:6px}html.ios ion-modal.modal-card ion-header ion-toolbar:last-of-type,html.ios ion-modal.modal-sheet ion-header ion-toolbar:last-of-type{padding-bottom:6px}html.ios ion-modal ion-toolbar{padding-right:calc(var(--ion-safe-area-right) + 8px);padding-left:calc(var(--ion-safe-area-left) + 8px)}@media screen and (min-width: 768px){html.ios ion-modal.modal-card:first-of-type{--backdrop-opacity: .18}}ion-modal.modal-default.show-modal~ion-modal.modal-default{--backdrop-opacity: 0;--box-shadow: none}html.ios ion-modal.modal-card .ion-page{border-top-left-radius:var(--border-radius)}.ion-color-primary{--ion-color-base: var(--ion-color-primary, #3880ff) !important;--ion-color-base-rgb: var(--ion-color-primary-rgb, 56, 128, 255) !important;--ion-color-contrast: var(--ion-color-primary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-primary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-primary-shade, #3171e0) !important;--ion-color-tint: var(--ion-color-primary-tint, #4c8dff) !important}.ion-color-secondary{--ion-color-base: var(--ion-color-secondary, #3dc2ff) !important;--ion-color-base-rgb: var(--ion-color-secondary-rgb, 61, 194, 255) !important;--ion-color-contrast: var(--ion-color-secondary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-secondary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-secondary-shade, #36abe0) !important;--ion-color-tint: var(--ion-color-secondary-tint, #50c8ff) !important}.ion-color-tertiary{--ion-color-base: var(--ion-color-tertiary, #5260ff) !important;--ion-color-base-rgb: var(--ion-color-tertiary-rgb, 82, 96, 255) !important;--ion-color-contrast: var(--ion-color-tertiary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-tertiary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-tertiary-shade, #4854e0) !important;--ion-color-tint: var(--ion-color-tertiary-tint, #6370ff) !important}.ion-color-success{--ion-color-base: var(--ion-color-success, #2dd36f) !important;--ion-color-base-rgb: var(--ion-color-success-rgb, 45, 211, 111) !important;--ion-color-contrast: var(--ion-color-success-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-success-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-success-shade, #28ba62) !important;--ion-color-tint: var(--ion-color-success-tint, #42d77d) !important}.ion-color-warning{--ion-color-base: var(--ion-color-warning, #ffc409) !important;--ion-color-base-rgb: var(--ion-color-warning-rgb, 255, 196, 9) !important;--ion-color-contrast: var(--ion-color-warning-contrast, #000) !important;--ion-color-contrast-rgb: var(--ion-color-warning-contrast-rgb, 0, 0, 0) !important;--ion-color-shade: var(--ion-color-warning-shade, #e0ac08) !important;--ion-color-tint: var(--ion-color-warning-tint, #ffca22) !important}.ion-color-danger{--ion-color-base: var(--ion-color-danger, #eb445a) !important;--ion-color-base-rgb: var(--ion-color-danger-rgb, 235, 68, 90) !important;--ion-color-contrast: var(--ion-color-danger-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-danger-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-danger-shade, #cf3c4f) !important;--ion-color-tint: var(--ion-color-danger-tint, #ed576b) !important}.ion-color-light{--ion-color-base: var(--ion-color-light, #f4f5f8) !important;--ion-color-base-rgb: var(--ion-color-light-rgb, 244, 245, 248) !important;--ion-color-contrast: var(--ion-color-light-contrast, #000) !important;--ion-color-contrast-rgb: var(--ion-color-light-contrast-rgb, 0, 0, 0) !important;--ion-color-shade: var(--ion-color-light-shade, #d7d8da) !important;--ion-color-tint: var(--ion-color-light-tint, #f5f6f9) !important}.ion-color-medium{--ion-color-base: var(--ion-color-medium, #92949c) !important;--ion-color-base-rgb: var(--ion-color-medium-rgb, 146, 148, 156) !important;--ion-color-contrast: var(--ion-color-medium-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-medium-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-medium-shade, #808289) !important;--ion-color-tint: var(--ion-color-medium-tint, #9d9fa6) !important}.ion-color-dark{--ion-color-base: var(--ion-color-dark, #222428) !important;--ion-color-base-rgb: var(--ion-color-dark-rgb, 34, 36, 40) !important;--ion-color-contrast: var(--ion-color-dark-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-dark-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-dark-shade, #1e2023) !important;--ion-color-tint: var(--ion-color-dark-tint, #383a3e) !important}.ion-page{left:0;right:0;top:0;bottom:0;display:flex;position:absolute;flex-direction:column;justify-content:space-between;contain:layout size style;overflow:hidden;z-index:0}ion-modal>.ion-page{position:relative;contain:layout style;height:100%}.split-pane-visible>.ion-page.split-pane-main{position:relative}ion-route,ion-route-redirect,ion-router,ion-select-option,ion-nav-controller,ion-menu-controller,ion-action-sheet-controller,ion-alert-controller,ion-loading-controller,ion-modal-controller,ion-picker-controller,ion-popover-controller,ion-toast-controller,.ion-page-hidden{display:none!important}.ion-page-invisible{opacity:0}.can-go-back>ion-header ion-back-button{display:block}html.plt-ios.plt-hybrid,html.plt-ios.plt-pwa{--ion-statusbar-padding: 20px}@supports (padding-top: 20px){html{--ion-safe-area-top: var(--ion-statusbar-padding)}}@supports (padding-top: constant(safe-area-inset-top)){html{--ion-safe-area-top: constant(safe-area-inset-top);--ion-safe-area-bottom: constant(safe-area-inset-bottom);--ion-safe-area-left: constant(safe-area-inset-left);--ion-safe-area-right: constant(safe-area-inset-right)}}@supports (padding-top: env(safe-area-inset-top)){html{--ion-safe-area-top: env(safe-area-inset-top);--ion-safe-area-bottom: env(safe-area-inset-bottom);--ion-safe-area-left: env(safe-area-inset-left);--ion-safe-area-right: env(safe-area-inset-right)}}ion-card.ion-color .ion-inherit-color,ion-card-header.ion-color .ion-inherit-color{color:inherit}.menu-content{transform:translateZ(0)}.menu-content-open{cursor:pointer;touch-action:manipulation;pointer-events:none}.ios .menu-content-reveal{box-shadow:-8px 0 42px rgba(0,0,0,.08)}[dir=rtl].ios .menu-content-reveal{box-shadow:8px 0 42px rgba(0,0,0,.08)}.md .menu-content-reveal,.md .menu-content-push{box-shadow:4px 0 16px rgba(0,0,0,.18)}ion-accordion-group.accordion-group-expand-inset>ion-accordion:first-of-type{border-top-left-radius:8px;border-top-right-radius:8px}ion-accordion-group.accordion-group-expand-inset>ion-accordion:last-of-type{border-bottom-left-radius:8px;border-bottom-right-radius:8px}ion-accordion-group>ion-accordion:last-of-type ion-item[slot=header]{--border-width: 0px}ion-accordion.accordion-animated>[slot=header] .ion-accordion-toggle-icon{transition:.3s transform cubic-bezier(.25,.8,.5,1)}@media (prefers-reduced-motion: reduce){ion-accordion .ion-accordion-toggle-icon{transition:none!important}}ion-accordion.accordion-expanding>[slot=header] .ion-accordion-toggle-icon,ion-accordion.accordion-expanded>[slot=header] .ion-accordion-toggle-icon{transform:rotate(180deg)}ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-previous ion-item[slot=header]{--border-width: 0px;--inner-border-width: 0px}ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-expanding:first-of-type,ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-expanded:first-of-type{margin-top:0}ion-input input::-webkit-date-and-time-value{text-align:start}.ion-datetime-button-overlay{--width: fit-content;--height: fit-content}.ion-datetime-button-overlay ion-datetime.datetime-grid{width:320px;min-height:320px}audio,canvas,progress,video{vertical-align:baseline}audio:not([controls]){display:none;height:0}b,strong{font-weight:700}img{max-width:100%}hr{height:1px;border-width:0;box-sizing:content-box}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}label,input,select,textarea{font-family:inherit;line-height:normal}textarea{overflow:auto;height:auto;font:inherit;color:inherit}textarea::placeholder{padding-left:2px}form,input,optgroup,select{margin:0;font:inherit;color:inherit}html input[type=button],input[type=reset],input[type=submit]{cursor:pointer;-webkit-appearance:button}a,a div,a span,a ion-icon,a ion-label,button,button div,button span,button ion-icon,button ion-label,.ion-tappable,[tappable],[tappable] div,[tappable] span,[tappable] ion-icon,[tappable] ion-label,input,textarea{touch-action:manipulation}a ion-label,button ion-label{pointer-events:none}button{padding:0;border:0;border-radius:0;font-family:inherit;font-style:inherit;font-variant:inherit;line-height:1;text-transform:none;cursor:pointer;-webkit-appearance:button}[tappable]{cursor:pointer}a[disabled],button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}*{box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}html{width:100%;height:100%;text-size-adjust:100%}html:not(.hydrated) body{display:none}html.ion-ce body{display:block}html.plt-pwa{height:100vh}body{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin:0;padding:0;position:fixed;width:100%;max-width:100%;height:100%;max-height:100%;transform:translateZ(0);text-rendering:optimizeLegibility;overflow:hidden;touch-action:manipulation;-webkit-user-drag:none;-ms-content-zooming:none;word-wrap:break-word;overscroll-behavior-y:none;text-size-adjust:none}html{font-family:var(--ion-font-family)}a{background-color:transparent;color:var(--ion-color-primary, #3880ff)}h1,h2,h3,h4,h5,h6{margin-top:16px;margin-bottom:10px;font-weight:500;line-height:1.2}h1{margin-top:20px;font-size:26px}h2{margin-top:18px;font-size:24px}h3{font-size:22px}h4{font-size:20px}h5{font-size:18px}h6{font-size:16px}small{font-size:75%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}.ion-no-padding{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;padding:0}.ion-padding{--padding-start: var(--ion-padding, 16px);--padding-end: var(--ion-padding, 16px);--padding-top: var(--ion-padding, 16px);--padding-bottom: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-top{--padding-top: var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px)}.ion-padding-start{--padding-start: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px)}.ion-padding-end{--padding-end: var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px)}.ion-padding-bottom{--padding-bottom: var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-vertical{--padding-top: var(--ion-padding, 16px);--padding-bottom: var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-horizontal{--padding-start: var(--ion-padding, 16px);--padding-end: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px)}.ion-no-margin{--margin-start: 0;--margin-end: 0;--margin-top: 0;--margin-bottom: 0;margin:0}.ion-margin{--margin-start: var(--ion-margin, 16px);--margin-end: var(--ion-margin, 16px);--margin-top: var(--ion-margin, 16px);--margin-bottom: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-top{--margin-top: var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px)}.ion-margin-start{--margin-start: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px)}.ion-margin-end{--margin-end: var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px)}.ion-margin-bottom{--margin-bottom: var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-vertical{--margin-top: var(--ion-margin, 16px);--margin-bottom: var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-horizontal{--margin-start: var(--ion-margin, 16px);--margin-end: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px)}.ion-float-left{float:left!important}.ion-float-right{float:right!important}.ion-float-start{float:left!important}:host-context([dir=rtl]) .ion-float-start{float:right!important}[dir=rtl] .ion-float-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-start:dir(rtl){float:right!important}}.ion-float-end{float:right!important}:host-context([dir=rtl]) .ion-float-end{float:left!important}[dir=rtl] .ion-float-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-end:dir(rtl){float:left!important}}@media (min-width: 576px){.ion-float-sm-left{float:left!important}.ion-float-sm-right{float:right!important}.ion-float-sm-start{float:left!important}:host-context([dir=rtl]) .ion-float-sm-start{float:right!important}[dir=rtl] .ion-float-sm-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-sm-start:dir(rtl){float:right!important}}.ion-float-sm-end{float:right!important}:host-context([dir=rtl]) .ion-float-sm-end{float:left!important}[dir=rtl] .ion-float-sm-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-sm-end:dir(rtl){float:left!important}}}@media (min-width: 768px){.ion-float-md-left{float:left!important}.ion-float-md-right{float:right!important}.ion-float-md-start{float:left!important}:host-context([dir=rtl]) .ion-float-md-start{float:right!important}[dir=rtl] .ion-float-md-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-md-start:dir(rtl){float:right!important}}.ion-float-md-end{float:right!important}:host-context([dir=rtl]) .ion-float-md-end{float:left!important}[dir=rtl] .ion-float-md-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-md-end:dir(rtl){float:left!important}}}@media (min-width: 992px){.ion-float-lg-left{float:left!important}.ion-float-lg-right{float:right!important}.ion-float-lg-start{float:left!important}:host-context([dir=rtl]) .ion-float-lg-start{float:right!important}[dir=rtl] .ion-float-lg-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-lg-start:dir(rtl){float:right!important}}.ion-float-lg-end{float:right!important}:host-context([dir=rtl]) .ion-float-lg-end{float:left!important}[dir=rtl] .ion-float-lg-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-lg-end:dir(rtl){float:left!important}}}@media (min-width: 1200px){.ion-float-xl-left{float:left!important}.ion-float-xl-right{float:right!important}.ion-float-xl-start{float:left!important}:host-context([dir=rtl]) .ion-float-xl-start{float:right!important}[dir=rtl] .ion-float-xl-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-xl-start:dir(rtl){float:right!important}}.ion-float-xl-end{float:right!important}:host-context([dir=rtl]) .ion-float-xl-end{float:left!important}[dir=rtl] .ion-float-xl-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-xl-end:dir(rtl){float:left!important}}}.ion-text-center{text-align:center!important}.ion-text-justify{text-align:justify!important}.ion-text-start{text-align:start!important}.ion-text-end{text-align:end!important}.ion-text-left{text-align:left!important}.ion-text-right{text-align:right!important}.ion-text-nowrap{white-space:nowrap!important}.ion-text-wrap{white-space:normal!important}@media (min-width: 576px){.ion-text-sm-center{text-align:center!important}.ion-text-sm-justify{text-align:justify!important}.ion-text-sm-start{text-align:start!important}.ion-text-sm-end{text-align:end!important}.ion-text-sm-left{text-align:left!important}.ion-text-sm-right{text-align:right!important}.ion-text-sm-nowrap{white-space:nowrap!important}.ion-text-sm-wrap{white-space:normal!important}}@media (min-width: 768px){.ion-text-md-center{text-align:center!important}.ion-text-md-justify{text-align:justify!important}.ion-text-md-start{text-align:start!important}.ion-text-md-end{text-align:end!important}.ion-text-md-left{text-align:left!important}.ion-text-md-right{text-align:right!important}.ion-text-md-nowrap{white-space:nowrap!important}.ion-text-md-wrap{white-space:normal!important}}@media (min-width: 992px){.ion-text-lg-center{text-align:center!important}.ion-text-lg-justify{text-align:justify!important}.ion-text-lg-start{text-align:start!important}.ion-text-lg-end{text-align:end!important}.ion-text-lg-left{text-align:left!important}.ion-text-lg-right{text-align:right!important}.ion-text-lg-nowrap{white-space:nowrap!important}.ion-text-lg-wrap{white-space:normal!important}}@media (min-width: 1200px){.ion-text-xl-center{text-align:center!important}.ion-text-xl-justify{text-align:justify!important}.ion-text-xl-start{text-align:start!important}.ion-text-xl-end{text-align:end!important}.ion-text-xl-left{text-align:left!important}.ion-text-xl-right{text-align:right!important}.ion-text-xl-nowrap{white-space:nowrap!important}.ion-text-xl-wrap{white-space:normal!important}}.ion-text-uppercase{text-transform:uppercase!important}.ion-text-lowercase{text-transform:lowercase!important}.ion-text-capitalize{text-transform:capitalize!important}@media (min-width: 576px){.ion-text-sm-uppercase{text-transform:uppercase!important}.ion-text-sm-lowercase{text-transform:lowercase!important}.ion-text-sm-capitalize{text-transform:capitalize!important}}@media (min-width: 768px){.ion-text-md-uppercase{text-transform:uppercase!important}.ion-text-md-lowercase{text-transform:lowercase!important}.ion-text-md-capitalize{text-transform:capitalize!important}}@media (min-width: 992px){.ion-text-lg-uppercase{text-transform:uppercase!important}.ion-text-lg-lowercase{text-transform:lowercase!important}.ion-text-lg-capitalize{text-transform:capitalize!important}}@media (min-width: 1200px){.ion-text-xl-uppercase{text-transform:uppercase!important}.ion-text-xl-lowercase{text-transform:lowercase!important}.ion-text-xl-capitalize{text-transform:capitalize!important}}.ion-align-self-start{align-self:flex-start!important}.ion-align-self-end{align-self:flex-end!important}.ion-align-self-center{align-self:center!important}.ion-align-self-stretch{align-self:stretch!important}.ion-align-self-baseline{align-self:baseline!important}.ion-align-self-auto{align-self:auto!important}.ion-wrap{flex-wrap:wrap!important}.ion-nowrap{flex-wrap:nowrap!important}.ion-wrap-reverse{flex-wrap:wrap-reverse!important}.ion-justify-content-start{justify-content:flex-start!important}.ion-justify-content-center{justify-content:center!important}.ion-justify-content-end{justify-content:flex-end!important}.ion-justify-content-around{justify-content:space-around!important}.ion-justify-content-between{justify-content:space-between!important}.ion-justify-content-evenly{justify-content:space-evenly!important}.ion-align-items-start{align-items:flex-start!important}.ion-align-items-center{align-items:center!important}.ion-align-items-end{align-items:flex-end!important}.ion-align-items-stretch{align-items:stretch!important}.ion-align-items-baseline{align-items:baseline!important}.ion-hide,.ion-hide-up,.ion-hide-down{display:none!important}@media (min-width: 576px){.ion-hide-sm-up{display:none!important}}@media (max-width: 575.98px){.ion-hide-sm-down{display:none!important}}@media (min-width: 768px){.ion-hide-md-up{display:none!important}}@media (max-width: 767.98px){.ion-hide-md-down{display:none!important}}@media (min-width: 992px){.ion-hide-lg-up{display:none!important}}@media (max-width: 991.98px){.ion-hide-lg-down{display:none!important}}@media (min-width: 1200px){.ion-hide-xl-up{display:none!important}}@media (max-width: 1199.98px){.ion-hide-xl-down{display:none!important}}.mapboxgl-map{-webkit-tap-highlight-color:rgb(0 0 0/0);font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative}.mapboxgl-canvas{left:0;position:absolute;top:0}.mapboxgl-map:-webkit-full-screen{height:100%;width:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-webkit-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.mapboxgl-ctrl-top-left{left:0;top:0}.mapboxgl-ctrl-top-right{right:0;top:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{bottom:0;right:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{float:left;margin:10px 0 0 10px}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{float:right;margin:10px 10px 0 0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{float:left;margin:0 0 10px 10px}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{float:right;margin:0 10px 10px 0}.mapboxgl-ctrl-group{background:#fff;border-radius:4px}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;overflow:hidden;padding:0;width:29px}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl-group button:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:only-child{border-radius:inherit}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath id='south' d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath id='south' d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000' viewBox='0 0 29 29'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath id='south' d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' fill='%23f00'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' fill='%23f00'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle id='dot' cx='10' cy='10' r='2'/%3E%3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' fill='%23f00'/%3E%3C/svg%3E\")}}@keyframes mapboxgl-spin{0%{transform:rotate(0)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd' viewBox='0 0 88 23'%3E%3Cdefs%3E%3Cpath id='logo' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='text' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='clip'%3E%3Crect x='0' y='0' width='100%25' height='100%25' fill='white'/%3E%3Cuse xlink:href='%23logo'/%3E%3Cuse xlink:href='%23text'/%3E%3C/mask%3E%3Cg id='outline' opacity='0.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23clip)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23text' mask='url(%23clip)'/%3E%3C/g%3E%3Cg id='fill' opacity='0.9' fill='%23fff'%3E%3Cuse xlink:href='%23logo'/%3E%3Cuse xlink:href='%23text'/%3E%3C/g%3E%3C/svg%3E\");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd' viewBox='0 0 88 23'%3E%3Cdefs%3E%3Cpath id='logo' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='text' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='clip'%3E%3Crect x='0' y='0' width='100%25' height='100%25' fill='white'/%3E%3Cuse xlink:href='%23logo'/%3E%3Cuse xlink:href='%23text'/%3E%3C/mask%3E%3Cg id='outline' opacity='1' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23clip)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23text' mask='url(%23clip)'/%3E%3C/g%3E%3Cg id='fill' opacity='1' fill='%23fff'%3E%3Cuse xlink:href='%23logo'/%3E%3Cuse xlink:href='%23text'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd' viewBox='0 0 88 23'%3E%3Cdefs%3E%3Cpath id='logo' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='text' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='clip'%3E%3Crect x='0' y='0' width='100%25' height='100%25' fill='white'/%3E%3Cuse xlink:href='%23logo'/%3E%3Cuse xlink:href='%23text'/%3E%3C/mask%3E%3Cg id='outline' opacity='1' stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23clip)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23text' mask='url(%23clip)'/%3E%3C/g%3E%3Cg id='fill' opacity='1' fill='%23000'%3E%3Cuse xlink:href='%23logo'/%3E%3Cuse xlink:href='%23text'/%3E%3C/g%3E%3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{background-color:rgba(255,255,255,.5);margin:0;padding:0 5px}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{background-color:#fff;border-radius:12px;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{background-color:rgba(255,255,255,.5);background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{right:0;top:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{left:0;top:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:rgba(255,255,255,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px;white-space:nowrap}.mapboxgl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.mapboxgl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto;position:relative}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{left:0;opacity:1;position:absolute;top:0;transition:opacity .2s;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.mapboxgl-user-location-dot:before{animation:mapboxgl-user-location-dot-pulse 2s infinite;content:\"\";position:absolute}.mapboxgl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading{height:0;width:0}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:after,.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:before{border-bottom:7.5px solid #4aa1eb;content:\"\";position:absolute}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:before{border-left:7.5px solid transparent;transform:translateY(-28px) skewY(-20deg)}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:after{border-right:7.5px solid transparent;transform:translate(7.5px,-28px) skewY(20deg)}@keyframes mapboxgl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);border-radius:100%;height:1px;width:1px}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}@media print{.mapbox-improve-map{display:none}}.mapboxgl-scroll-zoom-blocker,.mapboxgl-touch-pan-blocker{align-items:center;background:rgba(0,0,0,.7);color:#fff;display:flex;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;height:100%;justify-content:center;left:0;opacity:0;pointer-events:none;position:absolute;text-align:center;top:0;transition:opacity .75s ease-in-out;transition-delay:1s;width:100%}.mapboxgl-scroll-zoom-blocker-show,.mapboxgl-touch-pan-blocker-show{opacity:1;transition:opacity .1s ease-in-out}.mapboxgl-canvas-container.mapboxgl-touch-pan-blocker-override.mapboxgl-scrollable-page,.mapboxgl-canvas-container.mapboxgl-touch-pan-blocker-override.mapboxgl-scrollable-page .mapboxgl-canvas{touch-action:pan-x pan-y}:root{--ion-color-primary: #f4900c;--ion-color-primary-rgb: 244, 144, 12;--ion-color-primary-contrast: #000000;--ion-color-primary-contrast-rgb: 0, 0, 0;--ion-color-primary-shade: #d77f0b;--ion-color-primary-tint: #f59b24;--ion-color-secondary: #3dc2ff;--ion-color-secondary-rgb: 61, 194, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #5260ff;--ion-color-tertiary-rgb: 82, 96, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45, 211, 111;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 255, 255, 255;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255, 196, 9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235, 68, 90;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-dark: #222428;--ion-color-dark-rgb: 34, 36, 40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255, 255, 255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146, 148, 156;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255, 255, 255;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244, 245, 248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0, 0, 0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9}@media (prefers-color-scheme: dark){body{--ion-color-primary: #f4900c;--ion-color-primary-rgb: 244, 144, 12;--ion-color-secondary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 0, 0, 0;--ion-color-primary-shade: #d77f0b;--ion-color-primary-tint: #f59b24;--ion-color-secondary: #50c8ff;--ion-color-secondary-rgb: 80,200,255;--ion-color-primary-contrast: #000000;--ion-color-secondary-contrast-rgb: 255,255,255;--ion-color-secondary-shade: #46b0e0;--ion-color-secondary-tint: #62ceff;--ion-color-tertiary: #6a64ff;--ion-color-tertiary-rgb: 106,100,255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #5d58e0;--ion-color-tertiary-tint: #7974ff;--ion-color-success: #2fdf75;--ion-color-success-rgb: 47,223,117;--ion-color-success-contrast: #000000;--ion-color-success-contrast-rgb: 0,0,0;--ion-color-success-shade: #29c467;--ion-color-success-tint: #44e283;--ion-color-warning: #ffd534;--ion-color-warning-rgb: 255,213,52;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0,0,0;--ion-color-warning-shade: #e0bb2e;--ion-color-warning-tint: #ffd948;--ion-color-danger: #ff4961;--ion-color-danger-rgb: 255,73,97;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255,255,255;--ion-color-danger-shade: #e04055;--ion-color-danger-tint: #ff5b71;--ion-color-dark: #f4f5f8;--ion-color-dark-rgb: 244,245,248;--ion-color-dark-contrast: #000000;--ion-color-dark-contrast-rgb: 0,0,0;--ion-color-dark-shade: #d7d8da;--ion-color-dark-tint: #f5f6f9;--ion-color-medium: #989aa2;--ion-color-medium-rgb: 152,154,162;--ion-color-medium-contrast: #000000;--ion-color-medium-contrast-rgb: 0,0,0;--ion-color-medium-shade: #86888f;--ion-color-medium-tint: #a2a4ab;--ion-color-light: #222428;--ion-color-light-rgb: 34,36,40;--ion-color-light-contrast: #ffffff;--ion-color-light-contrast-rgb: 255,255,255;--ion-color-light-shade: #1e2023;--ion-color-light-tint: #383a3e}.ios body{--ion-background-color: #000000;--ion-background-color-rgb: 0,0,0;--ion-text-color: #ffffff;--ion-text-color-rgb: 255,255,255;--ion-color-step-50: #0d0d0d;--ion-color-step-100: #1a1a1a;--ion-color-step-150: #262626;--ion-color-step-200: #333333;--ion-color-step-250: #404040;--ion-color-step-300: #4d4d4d;--ion-color-step-350: #595959;--ion-color-step-400: #666666;--ion-color-step-450: #737373;--ion-color-step-500: #808080;--ion-color-step-550: #8c8c8c;--ion-color-step-600: #999999;--ion-color-step-650: #a6a6a6;--ion-color-step-700: #b3b3b3;--ion-color-step-750: #bfbfbf;--ion-color-step-800: #cccccc;--ion-color-step-850: #d9d9d9;--ion-color-step-900: #e6e6e6;--ion-color-step-950: #f2f2f2;--ion-item-background: #000000;--ion-card-background: #1c1c1d}.ios ion-modal{--ion-background-color: var(--ion-color-step-100);--ion-toolbar-background: var(--ion-color-step-150);--ion-toolbar-border-color: var(--ion-color-step-250)}.md body{--ion-background-color: #121212;--ion-background-color-rgb: 18,18,18;--ion-text-color: #ffffff;--ion-text-color-rgb: 255,255,255;--ion-border-color: #222222;--ion-color-step-50: #1e1e1e;--ion-color-step-100: #2a2a2a;--ion-color-step-150: #363636;--ion-color-step-200: #414141;--ion-color-step-250: #4d4d4d;--ion-color-step-300: #595959;--ion-color-step-350: #656565;--ion-color-step-400: #717171;--ion-color-step-450: #7d7d7d;--ion-color-step-500: #898989;--ion-color-step-550: #949494;--ion-color-step-600: #a0a0a0;--ion-color-step-650: #acacac;--ion-color-step-700: #b8b8b8;--ion-color-step-750: #c4c4c4;--ion-color-step-800: #d0d0d0;--ion-color-step-850: #dbdbdb;--ion-color-step-900: #e7e7e7;--ion-color-step-950: #f3f3f3;--ion-item-background: #1e1e1e;--ion-toolbar-background: #1f1f1f;--ion-tab-bar-background: #1f1f1f;--ion-card-background: #1e1e1e}.mapboxgl-popup-content{background-color:#000}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip,.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip,.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{border-bottom-color:#000}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip,.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip,.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{border-top-color:#000}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{border-right-color:#000}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{border-left-color:#000}}.ToolIcon__lock,.App-toolbar__divider,.App-toolbar-content button[aria-label=Edit],.App-toolbar-content button[aria-label=Duplicate],label[title=\"Diamond  D or 3\"],label[title=\"Line  L or 6\"],label[title=Library]{display:none!important}\n",document.head.appendChild(n),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var o={exports:{}},a={},s={exports:{}},l={},c=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.iterator,w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,k={};function E(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||w}function S(){}function C(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||w}E.prototype.isReactComponent={},E.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},E.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=E.prototype;var T=C.prototype=new S;T.constructor=C,_(T,E.prototype),T.isPureReactComponent=!0;var M=Array.isArray,I=Object.prototype.hasOwnProperty,O={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)I.call(t,r)&&!A.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:c,type:e,key:o,ref:a,props:i,_owner:O.current}}function D(e){return"object"==typeof e&&null!==e&&e.$$typeof===c}var L=/\/+/g;function R(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function z(e,t,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case c:case u:a=!0}}if(a)return i=i(a=e),e=""===r?"."+R(a,0):r,M(i)?(n="",null!=e&&(n=e.replace(L,"$&/")+"/"),z(i,t,n,"",(function(e){return e}))):null!=i&&(D(i)&&(i=function(e,t){return{$$typeof:c,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(L,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=""===r?".":r+":",M(e))for(var s=0;s<e.length;s++){var l=r+R(o=e[s],s);a+=z(o,t,n,l,i)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=x&&e[x]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),s=0;!(o=e.next()).done;)a+=z(o=o.value,t,n,l=r+R(o,s++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function j(e,t,n){if(null==e)return e;var r=[],i=0;return z(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var B={current:null},F={transition:null},V={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:F,ReactCurrentOwner:O};l.Children={map:j,forEach:function(e,t,n){j(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return j(e,(function(){t++})),t},toArray:function(e){return j(e,(function(e){return e}))||[]},only:function(e){if(!D(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},l.Component=E,l.Fragment=d,l.Profiler=p,l.PureComponent=C,l.StrictMode=h,l.Suspense=v,l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,l.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=_({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=O.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)I.call(t,l)&&!A.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==s?s[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:c,type:e.type,key:i,ref:o,props:r,_owner:a}},l.createContext=function(e){return(e={$$typeof:m,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:f,_context:e},e.Consumer=e},l.createElement=P,l.createFactory=function(e){var t=P.bind(null,e);return t.type=e,t},l.createRef=function(){return{current:null}},l.forwardRef=function(e){return{$$typeof:g,render:e}},l.isValidElement=D,l.lazy=function(e){return{$$typeof:b,_payload:{_status:-1,_result:e},_init:N}},l.memo=function(e,t){return{$$typeof:y,type:e,compare:void 0===t?null:t}},l.startTransition=function(e){var t=F.transition;F.transition={};try{e()}finally{F.transition=t}},l.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},l.useCallback=function(e,t){return B.current.useCallback(e,t)},l.useContext=function(e){return B.current.useContext(e)},l.useDebugValue=function(){},l.useDeferredValue=function(e){return B.current.useDeferredValue(e)},l.useEffect=function(e,t){return B.current.useEffect(e,t)},l.useId=function(){return B.current.useId()},l.useImperativeHandle=function(e,t,n){return B.current.useImperativeHandle(e,t,n)},l.useInsertionEffect=function(e,t){return B.current.useInsertionEffect(e,t)},l.useLayoutEffect=function(e,t){return B.current.useLayoutEffect(e,t)},l.useMemo=function(e,t){return B.current.useMemo(e,t)},l.useReducer=function(e,t,n){return B.current.useReducer(e,t,n)},l.useRef=function(e){return B.current.useRef(e)},l.useState=function(e){return B.current.useState(e)},l.useSyncExternalStore=function(e,t,n){return B.current.useSyncExternalStore(e,t,n)},l.useTransition=function(){return B.current.useTransition()},l.version="18.2.0",s.exports=l;var U=s.exports;const $=i(U);
/**
             * @license React
             * react-jsx-runtime.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */var Z=U,H=Symbol.for("react.element"),W=Symbol.for("react.fragment"),q=Object.prototype.hasOwnProperty,G=Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K={key:!0,ref:!0,__self:!0,__source:!0};function Y(e,t,n){var r,i={},o=null,a=null;for(r in void 0!==n&&(o=""+n),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(a=t.ref),t)q.call(t,r)&&!K.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:H,type:e,key:o,ref:a,props:i,_owner:G.current}}a.Fragment=W,a.jsx=Y,a.jsxs=Y,o.exports=a;var X=o.exports;const J=X.jsx,Q=X.jsxs;var ee={exports:{}},te={},ne={exports:{}},re={};
/**
             * @license React
             * scheduler.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,d=null,h=3,p=!1,f=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function x(e){if(m=!1,b(e),!f)if(null!==n(l))f=!0,P(w);else{var t=n(c);null!==t&&D(x,t.startTime-e)}}function w(t,i){f=!1,m&&(m=!1,v(S),S=-1),p=!0;var o=h;try{for(b(i),d=n(l);null!==d&&(!(d.expirationTime>i)||t&&!M());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var s=a(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof s?d.callback=s:d===n(l)&&r(l),b(i)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var g=n(c);null!==g&&D(x,g.startTime-i),u=!1}return u}finally{d=null,h=o,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,k=!1,E=null,S=-1,C=5,T=-1;function M(){return!(e.unstable_now()-T<C)}function I(){if(null!==E){var t=e.unstable_now();T=t;var n=!0;try{n=E(!0,t)}finally{n?_():(k=!1,E=null)}}else k=!1}if("function"==typeof y)_=function(){y(I)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,A=O.port2;O.port1.onmessage=I,_=function(){A.postMessage(null)}}else _=function(){g(I,0)};function P(e){E=e,k||(k=!0,_())}function D(t,n){S=g((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,P(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,i,o){var a=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(r.sortIndex=o,t(c,r),null===n(l)&&r===n(c)&&(m?(v(S),S=-1):m=!0,D(x,o-a))):(r.sortIndex=s,t(l,r),f||p||(f=!0,P(w))),r},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(re),ne.exports=re;var ie=ne.exports,oe=U,ae=ie;
/**
             * @license React
             * react-dom.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var le=new Set,ce={};function ue(e,t){de(e,t),de(e+"Capture",t)}function de(e,t){for(ce[e]=t,e=0;e<t.length;e++)le.add(t[e])}var he=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),pe=Object.prototype.hasOwnProperty,fe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,me={},ge={};function ve(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){ye[e]=new ve(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];ye[t]=new ve(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ye[e]=new ve(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ye[e]=new ve(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){ye[e]=new ve(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ye[e]=new ve(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){ye[e]=new ve(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){ye[e]=new ve(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){ye[e]=new ve(e,5,!1,e.toLowerCase(),null,!1,!1)}));var be=/[\-:]([a-z])/g;function xe(e){return e[1].toUpperCase()}function we(e,t,n,r){var i=ye.hasOwnProperty(t)?ye[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!pe.call(ge,e)||!pe.call(me,e)&&(fe.test(e)?ge[e]=!0:(me[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(be,xe);ye[t]=new ve(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(be,xe);ye[t]=new ve(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(be,xe);ye[t]=new ve(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){ye[e]=new ve(e,1,!1,e.toLowerCase(),null,!1,!1)})),ye.xlinkHref=new ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){ye[e]=new ve(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _e=oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ke=Symbol.for("react.element"),Ee=Symbol.for("react.portal"),Se=Symbol.for("react.fragment"),Ce=Symbol.for("react.strict_mode"),Te=Symbol.for("react.profiler"),Me=Symbol.for("react.provider"),Ie=Symbol.for("react.context"),Oe=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),De=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),ze=Symbol.iterator;function je(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=ze&&e[ze]||e["@@iterator"])?e:null}var Ne,Be=Object.assign;function Fe(e){if(void 0===Ne)try{throw Error()}catch(VA){var t=VA.stack.trim().match(/\n( *(at )?)/);Ne=t&&t[1]||""}return"\n"+Ne+e}var Ve=!1;function Ue(e,t){if(!e||Ve)return"";Ve=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(GA){var r=GA}Reflect.construct(e,[],t)}else{try{t.call()}catch(GA){r=GA}e.call(t.prototype)}else{try{throw Error()}catch(GA){r=GA}e()}}catch(GA){if(GA&&r&&"string"==typeof GA.stack){for(var i=GA.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{Ve=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Fe(e):""}function $e(e){switch(e.tag){case 5:return Fe(e.type);case 16:return Fe("Lazy");case 13:return Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 2:case 15:return e=Ue(e.type,!1);case 11:return e=Ue(e.type.render,!1);case 1:return e=Ue(e.type,!0);default:return""}}function Ze(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Se:return"Fragment";case Ee:return"Portal";case Te:return"Profiler";case Ce:return"StrictMode";case Ae:return"Suspense";case Pe:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Ie:return(e.displayName||"Context")+".Consumer";case Me:return(e._context.displayName||"Context")+".Provider";case Oe:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case De:return null!==(t=e.displayName||null)?t:Ze(e.type)||"Memo";case Le:t=e._payload,e=e._init;try{return Ze(e(t))}catch(VA){}}return null}function He(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ze(t);case 8:return t===Ce?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function We(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function qe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ge(e){e._valueTracker||(e._valueTracker=function(e){var t=qe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ke(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qe(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ye(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(FA){return e.body}}function Xe(e,t){var n=t.checked;return Be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Je(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=We(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Qe(e,t){null!=(t=t.checked)&&we(e,"checked",t,!1)}function et(e,t){Qe(e,t);var n=We(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?nt(e,t.type,n):t.hasOwnProperty("defaultValue")&&nt(e,t.type,We(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function tt(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function nt(e,t,n){"number"===t&&Ye(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var rt=Array.isArray;function it(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+We(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ot(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(se(91));return Be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function at(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(se(92));if(rt(n)){if(1<n.length)throw Error(se(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:We(n)}}function st(e,t){var n=We(t.value),r=We(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function lt(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ct(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ct(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var dt,ht=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((dt=dt||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=dt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function pt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mt=["Webkit","ms","Moz","O"];function gt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ft.hasOwnProperty(e)&&ft[e]?(""+t).trim():t+"px"}function vt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=gt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ft).forEach((function(e){mt.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ft[t]=ft[e]}))}));var yt=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bt(e,t){if(t){if(yt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(se(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(se(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(se(62))}}function xt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=null;function _t(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var kt=null,Et=null,St=null;function Ct(e){if(e=wo(e)){if("function"!=typeof kt)throw Error(se(280));var t=e.stateNode;t&&(t=ko(t),kt(e.stateNode,e.type,t))}}function Tt(e){Et?St?St.push(e):St=[e]:Et=e}function Mt(){if(Et){var e=Et,t=St;if(St=Et=null,Ct(e),t)for(e=0;e<t.length;e++)Ct(t[e])}}function It(e,t){return e(t)}function Ot(){}var At=!1;function Pt(e,t,n){if(At)return e(t,n);At=!0;try{return It(e,t,n)}finally{At=!1,(null!==Et||null!==St)&&(Ot(),Mt())}}function Dt(e,t){var n=e.stateNode;if(null===n)return null;var r=ko(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(se(231,t,typeof n));return n}var Lt=!1;if(he)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch(eH){Lt=!1}function zt(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(KA){this.onError(KA)}}var jt=!1,Nt=null,Bt=!1,Ft=null,Vt={onError:function(e){jt=!0,Nt=e}};function Ut(e,t,n,r,i,o,a,s,l){jt=!1,Nt=null,zt.apply(Vt,arguments)}function $t(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Zt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ht(e){if($t(e)!==e)throw Error(se(188))}function Wt(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=$t(e)))throw Error(se(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ht(i),e;if(o===r)return Ht(i),t;o=o.sibling}throw Error(se(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(3!==n.tag)throw Error(se(188));return n.stateNode.current===n?e:t}(e),null!==e?qt(e):null}function qt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qt(e);if(null!==t)return t;e=e.sibling}return null}var Gt=ae.unstable_scheduleCallback,Kt=ae.unstable_cancelCallback,Yt=ae.unstable_shouldYield,Xt=ae.unstable_requestPaint,Jt=ae.unstable_now,Qt=ae.unstable_getCurrentPriorityLevel,en=ae.unstable_ImmediatePriority,tn=ae.unstable_UserBlockingPriority,nn=ae.unstable_NormalPriority,rn=ae.unstable_LowPriority,on=ae.unstable_IdlePriority,an=null,sn=null,ln=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(cn(e)/un|0)|0},cn=Math.log,un=Math.LN2,dn=64,hn=4194304;function pn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fn(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=pn(s):0!=(o&=a)&&(r=pn(o))}else 0!=(a=n&~i)?r=pn(a):0!==o&&(r=pn(o));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!=(4194240&o)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ln(t)),r|=e[n],t&=~i;return r}function mn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gn(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vn(){var e=dn;return 0==(4194240&(dn<<=1))&&(dn=64),e}function yn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bn(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ln(t)]=n}function xn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ln(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wn=0;function _n(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var kn,En,Sn,Cn,Tn,Mn=!1,In=[],On=null,An=null,Pn=null,Dn=new Map,Ln=new Map,Rn=[],zn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jn(e,t){switch(e){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":Dn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ln.delete(t.pointerId)}}function Nn(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&null!==(t=wo(t))&&En(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bn(e){var t=xo(e.target);if(null!==t){var n=$t(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Zt(n)))return e.blockedOn=t,void Tn(e.priority,(function(){Sn(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Fn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wo(n))&&En(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);wt=r,n.target.dispatchEvent(r),wt=null,t.shift()}return!0}function Vn(e,t,n){Fn(e)&&n.delete(t)}function Un(){Mn=!1,null!==On&&Fn(On)&&(On=null),null!==An&&Fn(An)&&(An=null),null!==Pn&&Fn(Pn)&&(Pn=null),Dn.forEach(Vn),Ln.forEach(Vn)}function $n(e,t){e.blockedOn===t&&(e.blockedOn=null,Mn||(Mn=!0,ae.unstable_scheduleCallback(ae.unstable_NormalPriority,Un)))}function Zn(e){function t(t){return $n(t,e)}if(0<In.length){$n(In[0],e);for(var n=1;n<In.length;n++){var r=In[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==On&&$n(On,e),null!==An&&$n(An,e),null!==Pn&&$n(Pn,e),Dn.forEach(t),Ln.forEach(t),n=0;n<Rn.length;n++)(r=Rn[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rn.length&&null===(n=Rn[0]).blockedOn;)Bn(n),null===n.blockedOn&&Rn.shift()}var Hn=_e.ReactCurrentBatchConfig,Wn=!0;function qn(e,t,n,r){var i=wn,o=Hn.transition;Hn.transition=null;try{wn=1,Kn(e,t,n,r)}finally{wn=i,Hn.transition=o}}function Gn(e,t,n,r){var i=wn,o=Hn.transition;Hn.transition=null;try{wn=4,Kn(e,t,n,r)}finally{wn=i,Hn.transition=o}}function Kn(e,t,n,r){if(Wn){var i=Xn(e,t,n,r);if(null===i)Hi(e,t,r,Yn,n),jn(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return On=Nn(On,e,t,n,r,i),!0;case"dragenter":return An=Nn(An,e,t,n,r,i),!0;case"mouseover":return Pn=Nn(Pn,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Dn.set(o,Nn(Dn.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ln.set(o,Nn(Ln.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jn(e,r),4&t&&-1<zn.indexOf(e)){for(;null!==i;){var o=wo(i);if(null!==o&&kn(o),null===(o=Xn(e,t,n,r))&&Hi(e,t,r,Yn,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hi(e,t,r,null,n)}}var Yn=null;function Xn(e,t,n,r){if(Yn=null,null!==(e=xo(e=_t(r))))if(null===(t=$t(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Zt(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yn=e,null}function Jn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qt()){case en:return 1;case tn:return 4;case nn:case rn:return 16;case on:return 536870912;default:return 16}default:return 16}}var Qn=null,er=null,tr=null;function nr(){if(tr)return tr;var e,t,n=er,r=n.length,i="value"in Qn?Qn.value:Qn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return tr=i.slice(e,1<t?1-t:void 0)}function rr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ir(){return!0}function or(){return!1}function ar(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?ir:or,this.isPropagationStopped=or,this}return Be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ir)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ir)},persist:function(){},isPersistent:ir}),t}var sr,lr,cr,ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dr=ar(ur),hr=Be({},ur,{view:0,detail:0}),pr=ar(hr),fr=Be({},hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cr&&(cr&&"mousemove"===e.type?(sr=e.screenX-cr.screenX,lr=e.screenY-cr.screenY):lr=sr=0,cr=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:lr}}),mr=ar(fr),gr=ar(Be({},fr,{dataTransfer:0})),vr=ar(Be({},hr,{relatedTarget:0})),yr=ar(Be({},ur,{animationName:0,elapsedTime:0,pseudoElement:0})),br=Be({},ur,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xr=ar(br),wr=ar(Be({},ur,{data:0})),_r={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Er={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Er[e])&&!!t[e]}function Cr(){return Sr}var Tr=Be({},hr,{key:function(e){if(e.key){var t=_r[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cr,charCode:function(e){return"keypress"===e.type?rr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Mr=ar(Tr),Ir=ar(Be({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Or=ar(Be({},hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cr})),Ar=ar(Be({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pr=Be({},fr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dr=ar(Pr),Lr=[9,13,27,32],Rr=he&&"CompositionEvent"in window,zr=null;he&&"documentMode"in document&&(zr=document.documentMode);var jr=he&&"TextEvent"in window&&!zr,Nr=he&&(!Rr||zr&&8<zr&&11>=zr),Br=String.fromCharCode(32),Fr=!1;function Vr(e,t){switch(e){case"keyup":return-1!==Lr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var $r=!1,Zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Zr[e.type]:"textarea"===t}function Wr(e,t,n,r){Tt(r),0<(t=qi(t,"onChange")).length&&(n=new dr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qr=null,Gr=null;function Kr(e){Bi(e,0)}function Yr(e){if(Ke(_o(e)))return e}function Xr(e,t){if("change"===e)return t}var Jr=!1;if(he){var Qr;if(he){var ei="oninput"in document;if(!ei){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),ei="function"==typeof ti.oninput}Qr=ei}else Qr=!1;Jr=Qr&&(!document.documentMode||9<document.documentMode)}function ni(){qr&&(qr.detachEvent("onpropertychange",ri),Gr=qr=null)}function ri(e){if("value"===e.propertyName&&Yr(Gr)){var t=[];Wr(t,Gr,e,_t(e)),Pt(Kr,t)}}function ii(e,t,n){"focusin"===e?(ni(),Gr=n,(qr=t).attachEvent("onpropertychange",ri)):"focusout"===e&&ni()}function oi(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yr(Gr)}function ai(e,t){if("click"===e)return Yr(t)}function si(e,t){if("input"===e||"change"===e)return Yr(t)}var li="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ci(e,t){if(li(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!pe.call(t,i)||!li(e[i],t[i]))return!1}return!0}function ui(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function di(e,t){var n,r=ui(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ui(r)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pi(){for(var e=window,t=Ye();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(UA){n=!1}if(!n)break;t=Ye((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mi(e){var t=pi(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==r&&fi(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=di(n,o);var a=di(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=he&&"documentMode"in document&&11>=document.documentMode,vi=null,yi=null,bi=null,xi=!1;function wi(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xi||null==vi||vi!==Ye(r)||(r="selectionStart"in(r=vi)&&fi(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},bi&&ci(bi,r)||(bi=r,0<(r=qi(yi,"onSelect")).length&&(t=new dr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vi)))}function _i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ki={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},Ei={},Si={};function Ci(e){if(Ei[e])return Ei[e];if(!ki[e])return e;var t,n=ki[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return Ei[e]=n[t];return e}he&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);var Ti=Ci("animationend"),Mi=Ci("animationiteration"),Ii=Ci("animationstart"),Oi=Ci("transitionend"),Ai=new Map,Pi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(e,t){Ai.set(e,t),ue(t,[e])}for(var Li=0;Li<Pi.length;Li++){var Ri=Pi[Li];Di(Ri.toLowerCase(),"on"+(Ri[0].toUpperCase()+Ri.slice(1)))}Di(Ti,"onAnimationEnd"),Di(Mi,"onAnimationIteration"),Di(Ii,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(Oi,"onTransitionEnd"),de("onMouseEnter",["mouseout","mouseover"]),de("onMouseLeave",["mouseout","mouseover"]),de("onPointerEnter",["pointerout","pointerover"]),de("onPointerLeave",["pointerout","pointerover"]),ue("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ue("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ue("onBeforeInput",["compositionend","keypress","textInput","paste"]),ue("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ue("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ue("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ji=new Set("cancel close invalid load scroll toggle".split(" ").concat(zi));function Ni(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,s,l){if(Ut.apply(this,arguments),jt){if(!jt)throw Error(se(198));var c=Nt;jt=!1,Nt=null,Bt||(Bt=!0,Ft=c)}}(r,t,void 0,e),e.currentTarget=null}function Bi(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Ni(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Ni(i,s,c),o=l}}}if(Bt)throw e=Ft,Bt=!1,Ft=null,e}function Fi(e,t){var n=t[vo];void 0===n&&(n=t[vo]=new Set);var r=e+"__bubble";n.has(r)||(Zi(t,e,2,!1),n.add(r))}function Vi(e,t,n){var r=0;t&&(r|=4),Zi(n,e,r,t)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function $i(e){if(!e[Ui]){e[Ui]=!0,le.forEach((function(t){"selectionchange"!==t&&(ji.has(t)||Vi(t,!1,e),Vi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ui]||(t[Ui]=!0,Vi("selectionchange",!1,t))}}function Zi(e,t,n,r){switch(Jn(t)){case 1:var i=qn;break;case 4:i=Gn;break;default:i=Kn}n=i.bind(null,t,n,e),i=void 0,!Lt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hi(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=xo(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Pt((function(){var r=o,i=_t(n),a=[];e:{var s=Ai.get(e);if(void 0!==s){var l=dr,c=e;switch(e){case"keypress":if(0===rr(n))break e;case"keydown":case"keyup":l=Mr;break;case"focusin":c="focus",l=vr;break;case"focusout":c="blur",l=vr;break;case"beforeblur":case"afterblur":l=vr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Or;break;case Ti:case Mi:case Ii:l=yr;break;case Oi:l=Ar;break;case"scroll":l=pr;break;case"wheel":l=Dr;break;case"copy":case"cut":case"paste":l=xr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ir}var u=0!=(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&null!=(m=Dt(f,h))&&u.push(Wi(f,m,p))),d)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===wt||!(c=n.relatedTarget||n.fromElement)||!xo(c)&&!c[go])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xo(c):null)&&(c!==(d=$t(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mr,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Ir,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:_o(l),p=null==c?s:_o(c),(s=new u(m,f+"leave",l,n,i)).target=d,s.relatedTarget=p,m=null,xo(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Gi(p))f++;for(p=0,m=h;m;m=Gi(m))p++;for(;0<f-p;)u=Gi(u),f--;for(;0<p-f;)h=Gi(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gi(u),h=Gi(h)}u=null}else u=null;null!==l&&Ki(a,s,l,u,!1),null!==c&&null!==d&&Ki(a,d,c,u,!0)}if("select"===(l=(s=r?_o(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Xr;else if(Hr(s))if(Jr)g=si;else{g=oi;var v=ii}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ai);switch(g&&(g=g(e,r))?Wr(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&nt(s,"number",s.value)),v=r?_o(r):window,e){case"focusin":(Hr(v)||"true"===v.contentEditable)&&(vi=v,yi=r,bi=null);break;case"focusout":bi=yi=vi=null;break;case"mousedown":xi=!0;break;case"contextmenu":case"mouseup":case"dragend":xi=!1,wi(a,n,i);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":wi(a,n,i)}var y;if(Rr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else $r?Vr(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Nr&&"ko"!==n.locale&&($r||"onCompositionStart"!==b?"onCompositionEnd"===b&&$r&&(y=nr()):(er="value"in(Qn=i)?Qn.value:Qn.textContent,$r=!0)),0<(v=qi(r,b)).length&&(b=new wr(b,e,null,n,i),a.push({event:b,listeners:v}),(y||null!==(y=Ur(n)))&&(b.data=y))),(y=jr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Fr=!0,Br);case"textInput":return(e=t.data)===Br&&Fr?null:e;default:return null}}(e,n):function(e,t){if($r)return"compositionend"===e||!Rr&&Vr(e,t)?(e=nr(),tr=er=Qn=null,$r=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nr&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=qi(r,"onBeforeInput")).length&&(i=new wr("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y)}Bi(a,t)}))}function Wi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Dt(e,n))&&r.unshift(Wi(e,o,i)),null!=(o=Dt(e,t))&&r.push(Wi(e,o,i))),e=e.return}return r}function Gi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ki(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Dt(n,o))&&a.unshift(Wi(n,l,s)):i||null!=(l=Dt(n,o))&&a.push(Wi(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yi=/\r\n?/g,Xi=/\u0000|\uFFFD/g;function Ji(e){return("string"==typeof e?e:""+e).replace(Yi,"\n").replace(Xi,"")}function Qi(e,t,n){if(t=Ji(t),Ji(e)!==t&&n)throw Error(se(425))}function eo(){}var to=null,no=null;function ro(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var io="function"==typeof setTimeout?setTimeout:void 0,oo="function"==typeof clearTimeout?clearTimeout:void 0,ao="function"==typeof Promise?Promise:void 0,so="function"==typeof queueMicrotask?queueMicrotask:void 0!==ao?function(e){return ao.resolve(null).then(e).catch(lo)}:io;function lo(e){setTimeout((function(){throw e}))}function co(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Zn(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Zn(t)}function uo(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ho(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var po=Math.random().toString(36).slice(2),fo="__reactFiber$"+po,mo="__reactProps$"+po,go="__reactContainer$"+po,vo="__reactEvents$"+po,yo="__reactListeners$"+po,bo="__reactHandles$"+po;function xo(e){var t=e[fo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[go]||n[fo]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ho(e);null!==e;){if(n=e[fo])return n;e=ho(e)}return t}n=(e=n).parentNode}return null}function wo(e){return!(e=e[fo]||e[go])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _o(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(se(33))}function ko(e){return e[mo]||null}var Eo=[],So=-1;function Co(e){return{current:e}}function To(e){0>So||(e.current=Eo[So],Eo[So]=null,So--)}function Mo(e,t){So++,Eo[So]=e.current,e.current=t}var Io={},Oo=Co(Io),Ao=Co(!1),Po=Io;function Do(e,t){var n=e.type.contextTypes;if(!n)return Io;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Lo(e){return null!=(e=e.childContextTypes)}function Ro(){To(Ao),To(Oo)}function zo(e,t,n){if(Oo.current!==Io)throw Error(se(168));Mo(Oo,t),Mo(Ao,n)}function jo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(se(108,He(e)||"Unknown",i));return Be({},n,r)}function No(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Io,Po=Oo.current,Mo(Oo,e),Mo(Ao,Ao.current),!0}function Bo(e,t,n){var r=e.stateNode;if(!r)throw Error(se(169));n?(e=jo(e,t,Po),r.__reactInternalMemoizedMergedChildContext=e,To(Ao),To(Oo),Mo(Oo,e)):To(Ao),Mo(Ao,n)}var Fo=null,Vo=!1,Uo=!1;function $o(e){null===Fo?Fo=[e]:Fo.push(e)}function Zo(){if(!Uo&&null!==Fo){Uo=!0;var e=0,t=wn;try{var n=Fo;for(wn=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fo=null,Vo=!1}catch($A){throw null!==Fo&&(Fo=Fo.slice(e+1)),Gt(en,Zo),$A}finally{wn=t,Uo=!1}}return null}var Ho=[],Wo=0,qo=null,Go=0,Ko=[],Yo=0,Xo=null,Jo=1,Qo="";function ea(e,t){Ho[Wo++]=Go,Ho[Wo++]=qo,qo=e,Go=t}function ta(e,t,n){Ko[Yo++]=Jo,Ko[Yo++]=Qo,Ko[Yo++]=Xo,Xo=e;var r=Jo;e=Qo;var i=32-ln(r)-1;r&=~(1<<i),n+=1;var o=32-ln(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Jo=1<<32-ln(t)+i|n<<i|r,Qo=o+e}else Jo=1<<o|n<<i|r,Qo=e}function na(e){null!==e.return&&(ea(e,1),ta(e,1,0))}function ra(e){for(;e===qo;)qo=Ho[--Wo],Ho[Wo]=null,Go=Ho[--Wo],Ho[Wo]=null;for(;e===Xo;)Xo=Ko[--Yo],Ko[Yo]=null,Qo=Ko[--Yo],Ko[Yo]=null,Jo=Ko[--Yo],Ko[Yo]=null}var ia=null,oa=null,aa=!1,sa=null;function la(e,t){var n=Lu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ca(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ia=e,oa=uo(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ia=e,oa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xo?{id:Jo,overflow:Qo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ia=e,oa=null,!0);default:return!1}}function ua(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function da(e){if(aa){var t=oa;if(t){var n=t;if(!ca(e,t)){if(ua(e))throw Error(se(418));t=uo(n.nextSibling);var r=ia;t&&ca(e,t)?la(r,n):(e.flags=-4097&e.flags|2,aa=!1,ia=e)}}else{if(ua(e))throw Error(se(418));e.flags=-4097&e.flags|2,aa=!1,ia=e}}}function ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ia=e}function pa(e){if(e!==ia)return!1;if(!aa)return ha(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ro(e.type,e.memoizedProps)),t&&(t=oa)){if(ua(e))throw fa(),Error(se(418));for(;t;)la(e,t),t=uo(t.nextSibling)}if(ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oa=uo(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oa=null}}else oa=ia?uo(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=oa;e;)e=uo(e.nextSibling)}function ma(){oa=ia=null,aa=!1}function ga(e){null===sa?sa=[e]:sa.push(e)}var va=_e.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=Be({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ba=Co(null),xa=null,wa=null,_a=null;function ka(){_a=wa=xa=null}function Ea(e){var t=ba.current;To(ba),e._currentValue=t}function Sa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ca(e,t){xa=e,_a=wa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(_l=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===wa){if(null===xa)throw Error(se(308));wa=e,xa.dependencies={lanes:0,firstContext:e}}else wa=wa.next=e;return t}var Ma=null;function Ia(e){null===Ma?Ma=[e]:Ma.push(e)}function Oa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function La(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function za(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&Ac)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function ja(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xn(e,n)}}function Na(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ba(e,t,n,r){var i=e.updateQueue;Pa=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l)}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(h="function"==typeof(f=m.payload)?f.call(p,d,h):f))break e;d=Be({},d,h);break e;case 2:Pa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Bc|=a,e.lanes=a,e.memoizedState=d}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(se(191,i));i.call(r)}}}var Va=(new oe.Component).refs;function Ua(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Be({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var $a={isMounted:function(e){return!!(e=e._reactInternals)&&$t(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ru(),i=iu(e),o=Ra(r,i);o.payload=t,null!=n&&(o.callback=n),null!==(t=za(e,o,i))&&(ou(t,e,i,r),ja(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ru(),i=iu(e),o=Ra(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=za(e,o,i))&&(ou(t,e,i,r),ja(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ru(),r=iu(e),i=Ra(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=za(e,i,r))&&(ou(t,e,r,n),ja(t,e,r))}};function Za(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&ci(n,r)&&ci(i,o))}function Ha(e,t,n){var r=!1,i=Io,o=t.contextType;return"object"==typeof o&&null!==o?o=Ta(o):(i=Lo(t)?Po:Oo.current,o=(r=null!=(r=t.contextTypes))?Do(e,i):Io),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=$a,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wa(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&$a.enqueueReplaceState(t,t.state,null)}function qa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Da(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=Ta(o):(o=Lo(t)?Po:Oo.current,i.context=Do(e,o)),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(Ua(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&$a.enqueueReplaceState(i,i.state,null),Ba(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(se(284));if(!n._owner)throw Error(se(290,e))}return e}function Ka(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ya(e){return(0,e._init)(e._payload)}function Xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=zu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===Se?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===Le&&Ya(o)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=ju(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,o){return null===t||7!==t.tag?((t=Nu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Fu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ke:return(n=ju(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case Ee:return(t=Vu(t,e.mode,n)).return=e,t;case Le:return d(e,(0,t._init)(t._payload),n)}if(rt(t)||je(t))return(t=Nu(t,e.mode,n,null)).return=e,t;Ka(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ke:return n.key===i?l(e,t,n,r):null;case Ee:return n.key===i?c(e,t,n,r):null;case Le:return h(e,t,(i=n._init)(n._payload),r)}if(rt(n)||je(n))return null!==i?null:u(e,t,n,r,null);Ka(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ke:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case Ee:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case Le:return p(e,t,n,(0,r._init)(r._payload),i)}if(rt(r)||je(r))return u(t,e=e.get(n)||null,r,i,null);Ka(t,r)}return null}function f(i,a,s,l){for(var c=null,u=null,f=a,m=a=0,g=null;null!==f&&m<s.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=h(i,f,s[m],l);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(i,f),a=o(v,a,m),null===u?c=v:u.sibling=v,u=v,f=g}if(m===s.length)return n(i,f),aa&&ea(i,m),c;if(null===f){for(;m<s.length;m++)null!==(f=d(i,s[m],l))&&(a=o(f,a,m),null===u?c=f:u.sibling=f,u=f);return aa&&ea(i,m),c}for(f=r(i,f);m<s.length;m++)null!==(g=p(f,i,m,s[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&f.forEach((function(e){return t(i,e)})),aa&&ea(i,m),c}function m(i,a,s,l){var c=je(s);if("function"!=typeof c)throw Error(se(150));if(null==(s=c.call(s)))throw Error(se(151));for(var u=c=null,f=a,m=a=0,g=null,v=s.next();null!==f&&!v.done;m++,v=s.next()){f.index>m?(g=f,f=null):g=f.sibling;var y=h(i,f,v.value,l);if(null===y){null===f&&(f=g);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,m),null===u?c=y:u.sibling=y,u=y,f=g}if(v.done)return n(i,f),aa&&ea(i,m),c;if(null===f){for(;!v.done;m++,v=s.next())null!==(v=d(i,v.value,l))&&(a=o(v,a,m),null===u?c=v:u.sibling=v,u=v);return aa&&ea(i,m),c}for(f=r(i,f);!v.done;m++,v=s.next())null!==(v=p(f,i,m,v.value,l))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),a=o(v,a,m),null===u?c=v:u.sibling=v,u=v);return e&&f.forEach((function(e){return t(i,e)})),aa&&ea(i,m),c}return function e(r,o,s,l){if("object"==typeof s&&null!==s&&s.type===Se&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case ke:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===Se){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===Le&&Ya(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Ga(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===Se?((o=Nu(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=ju(s.type,s.key,s.props,null,r.mode,l)).ref=Ga(r,o,s),l.return=r,r=l)}return a(r);case Ee:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Vu(s,r.mode,l)).return=r,r=o}return a(r);case Le:return e(r,o,(u=s._init)(s._payload),l)}if(rt(s))return f(r,o,s,l);if(je(s))return m(r,o,s,l);Ka(r,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Fu(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Ja=Xa(!0),Qa=Xa(!1),es={},ts=Co(es),ns=Co(es),rs=Co(es);function is(e){if(e===es)throw Error(se(174));return e}function as(e,t){switch(Mo(rs,t),Mo(ns,e),Mo(ts,es),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ut(null,"");break;default:t=ut(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}To(ts),Mo(ts,t)}function ss(){To(ts),To(ns),To(rs)}function ls(e){is(rs.current);var t=is(ts.current),n=ut(t,e.type);t!==n&&(Mo(ns,e),Mo(ts,n))}function cs(e){ns.current===e&&(To(ts),To(ns))}var us=Co(0);function ds(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hs=[];function ps(){for(var e=0;e<hs.length;e++)hs[e]._workInProgressVersionPrimary=null;hs.length=0}var fs=_e.ReactCurrentDispatcher,ms=_e.ReactCurrentBatchConfig,gs=0,vs=null,ys=null,bs=null,xs=!1,ws=!1,_s=0,ks=0;function Es(){throw Error(se(321))}function Ss(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!li(e[n],t[n]))return!1;return!0}function Cs(e,t,n,r,i,o){if(gs=o,vs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fs.current=null===e||null===e.memoizedState?cl:ul,e=n(r,i),ws){o=0;do{if(ws=!1,_s=0,25<=o)throw Error(se(301));o+=1,bs=ys=null,t.updateQueue=null,fs.current=dl,e=n(r,i)}while(ws)}if(fs.current=ll,t=null!==ys&&null!==ys.next,gs=0,bs=ys=vs=null,xs=!1,t)throw Error(se(300));return e}function Ts(){var e=0!==_s;return _s=0,e}function Ms(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bs?vs.memoizedState=bs=e:bs=bs.next=e,bs}function Is(){if(null===ys){var e=vs.alternate;e=null!==e?e.memoizedState:null}else e=ys.next;var t=null===bs?vs.memoizedState:bs.next;if(null!==t)bs=t,ys=e;else{if(null===e)throw Error(se(310));e={memoizedState:(ys=e).memoizedState,baseState:ys.baseState,baseQueue:ys.baseQueue,queue:ys.queue,next:null},null===bs?vs.memoizedState=bs=e:bs=bs.next=e}return bs}function Os(e,t){return"function"==typeof t?t(e):t}function As(e){var t=Is(),n=t.queue;if(null===n)throw Error(se(311));n.lastRenderedReducer=e;var r=ys,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=a=null,l=null,c=o;do{var u=c.lane;if((gs&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(s=l=d,a=r):l=l.next=d,vs.lanes|=u,Bc|=u}c=c.next}while(null!==c&&c!==o);null===l?a=r:l.next=s,li(r,t.memoizedState)||(_l=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vs.lanes|=o,Bc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ps(e){var t=Is(),n=t.queue;if(null===n)throw Error(se(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);li(o,t.memoizedState)||(_l=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ds(){}function Ls(e,t){var n=vs,r=Is(),i=t(),o=!li(r.memoizedState,i);if(o&&(r.memoizedState=i,_l=!0),r=r.queue,Ws(js.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==bs&&1&bs.memoizedState.tag){if(n.flags|=2048,Vs(9,zs.bind(null,n,r,i,t),void 0,null),null===Pc)throw Error(se(349));0!=(30&gs)||Rs(n,t,i)}return i}function Rs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vs.updateQueue)?(t={lastEffect:null,stores:null},vs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function zs(e,t,n,r){t.value=n,t.getSnapshot=r,Ns(t)&&Bs(e)}function js(e,t,n){return n((function(){Ns(t)&&Bs(e)}))}function Ns(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!li(e,n)}catch(UA){return!0}}function Bs(e){var t=Aa(e,1);null!==t&&ou(t,e,1,-1)}function Fs(e){var t=Ms();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:e},t.queue=e,e=e.dispatch=il.bind(null,vs,e),[t.memoizedState,e]}function Vs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vs.updateQueue)?(t={lastEffect:null,stores:null},vs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Us(){return Is().memoizedState}function $s(e,t,n,r){var i=Ms();vs.flags|=e,i.memoizedState=Vs(1|t,n,void 0,void 0===r?null:r)}function Zs(e,t,n,r){var i=Is();r=void 0===r?null:r;var o=void 0;if(null!==ys){var a=ys.memoizedState;if(o=a.destroy,null!==r&&Ss(r,a.deps))return void(i.memoizedState=Vs(t,n,o,r))}vs.flags|=e,i.memoizedState=Vs(1|t,n,o,r)}function Hs(e,t){return $s(8390656,8,e,t)}function Ws(e,t){return Zs(2048,8,e,t)}function qs(e,t){return Zs(4,2,e,t)}function Gs(e,t){return Zs(4,4,e,t)}function Ks(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ys(e,t,n){return n=null!=n?n.concat([e]):null,Zs(4,4,Ks.bind(null,t,e),n)}function Xs(){}function Js(e,t){var n=Is();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ss(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qs(e,t){var n=Is();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ss(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function el(e,t,n){return 0==(21&gs)?(e.baseState&&(e.baseState=!1,_l=!0),e.memoizedState=n):(li(n,t)||(n=vn(),vs.lanes|=n,Bc|=n,e.baseState=!0),t)}function tl(e,t){var n=wn;wn=0!==n&&4>n?n:4,e(!0);var r=ms.transition;ms.transition={};try{e(!1),t()}finally{wn=n,ms.transition=r}}function nl(){return Is().memoizedState}function rl(e,t,n){var r=iu(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ol(e)?al(t,n):null!==(n=Oa(e,t,n,r))&&(ou(n,e,r,ru()),sl(n,t,r))}function il(e,t,n){var r=iu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ol(e))al(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,li(s,a)){var l=t.interleaved;return null===l?(i.next=i,Ia(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(GA){}null!==(n=Oa(e,t,i,r))&&(ou(n,e,r,i=ru()),sl(n,t,r))}}function ol(e){var t=e.alternate;return e===vs||null!==t&&t===vs}function al(e,t){ws=xs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sl(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xn(e,n)}}var ll={readContext:Ta,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useInsertionEffect:Es,useLayoutEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useMutableSource:Es,useSyncExternalStore:Es,useId:Es,unstable_isNewReconciler:!1},cl={readContext:Ta,useCallback:function(e,t){return Ms().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:Hs,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,$s(4194308,4,Ks.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $s(4194308,4,e,t)},useInsertionEffect:function(e,t){return $s(4,2,e,t)},useMemo:function(e,t){var n=Ms();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ms();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=rl.bind(null,vs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ms().memoizedState=e},useState:Fs,useDebugValue:Xs,useDeferredValue:function(e){return Ms().memoizedState=e},useTransition:function(){var e=Fs(!1),t=e[0];return e=tl.bind(null,e[1]),Ms().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vs,i=Ms();if(aa){if(void 0===n)throw Error(se(407));n=n()}else{if(n=t(),null===Pc)throw Error(se(349));0!=(30&gs)||Rs(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Hs(js.bind(null,r,o,e),[e]),r.flags|=2048,Vs(9,zs.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ms(),t=Pc.identifierPrefix;if(aa){var n=Qo;t=":"+t+"R"+(n=(Jo&~(1<<32-ln(Jo)-1)).toString(32)+n),0<(n=_s++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ks++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ul={readContext:Ta,useCallback:Js,useContext:Ta,useEffect:Ws,useImperativeHandle:Ys,useInsertionEffect:qs,useLayoutEffect:Gs,useMemo:Qs,useReducer:As,useRef:Us,useState:function(){return As(Os)},useDebugValue:Xs,useDeferredValue:function(e){return el(Is(),ys.memoizedState,e)},useTransition:function(){return[As(Os)[0],Is().memoizedState]},useMutableSource:Ds,useSyncExternalStore:Ls,useId:nl,unstable_isNewReconciler:!1},dl={readContext:Ta,useCallback:Js,useContext:Ta,useEffect:Ws,useImperativeHandle:Ys,useInsertionEffect:qs,useLayoutEffect:Gs,useMemo:Qs,useReducer:Ps,useRef:Us,useState:function(){return Ps(Os)},useDebugValue:Xs,useDeferredValue:function(e){var t=Is();return null===ys?t.memoizedState=e:el(t,ys.memoizedState,e)},useTransition:function(){return[Ps(Os)[0],Is().memoizedState]},useMutableSource:Ds,useSyncExternalStore:Ls,useId:nl,unstable_isNewReconciler:!1};function hl(e,t){try{var n="",r=t;do{n+=$e(r),r=r.return}while(r);var i=n}catch(ZA){i="\nError generating stack: "+ZA.message+"\n"+ZA.stack}return{value:e,source:t,stack:i,digest:null}}function pl(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fl(e,t){try{console.error(t.value)}catch(VA){setTimeout((function(){throw VA}))}}var ml="function"==typeof WeakMap?WeakMap:Map;function gl(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qc||(qc=!0,Gc=r),fl(0,t)},n}function vl(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fl(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){fl(0,t),"function"!=typeof r&&(null===Kc?Kc=new Set([this]):Kc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ml;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Mu.bind(null,e,t,n),t.then(e,e))}function bl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xl(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,za(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wl=_e.ReactCurrentOwner,_l=!1;function kl(e,t,n,r){t.child=null===e?Qa(t,null,n,r):Ja(t,e.child,n,r)}function El(e,t,n,r,i){n=n.render;var o=t.ref;return Ca(t,i),r=Cs(e,t,n,r,o,i),n=Ts(),null===e||_l?(aa&&n&&na(t),t.flags|=1,kl(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ql(e,t,i))}function Sl(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||Ru(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ju(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Cl(e,t,o,r,i))}if(o=e.child,0==(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ci)(a,r)&&e.ref===t.ref)return ql(e,t,i)}return t.flags|=1,(e=zu(o,r)).ref=t.ref,e.return=t,t.child=e}function Cl(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ci(o,r)&&e.ref===t.ref){if(_l=!1,t.pendingProps=r=o,0==(e.lanes&i))return t.lanes=e.lanes,ql(e,t,i);0!=(131072&e.flags)&&(_l=!0)}}return Il(e,t,n,r,i)}function Tl(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mo(zc,Rc),Rc|=n;else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mo(zc,Rc),Rc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Mo(zc,Rc),Rc|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Mo(zc,Rc),Rc|=r;return kl(e,t,i,n),t.child}function Ml(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Il(e,t,n,r,i){var o=Lo(n)?Po:Oo.current;return o=Do(t,o),Ca(t,i),n=Cs(e,t,n,r,o,i),r=Ts(),null===e||_l?(aa&&r&&na(t),t.flags|=1,kl(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ql(e,t,i))}function Ol(e,t,n,r,i){if(Lo(n)){var o=!0;No(t)}else o=!1;if(Ca(t,i),null===t.stateNode)Wl(e,t),Ha(t,n,r),qa(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;c="object"==typeof c&&null!==c?Ta(c):Do(t,c=Lo(n)?Po:Oo.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==c)&&Wa(t,a,r,c),Pa=!1;var h=t.memoizedState;a.state=h,Ba(t,r,a,i),l=t.memoizedState,s!==r||h!==l||Ao.current||Pa?("function"==typeof u&&(Ua(t,n,u,r),l=t.memoizedState),(s=Pa||Za(t,n,s,r,h,l,c))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,La(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ya(t.type,s),a.props=c,d=t.pendingProps,h=a.context,l="object"==typeof(l=n.contextType)&&null!==l?Ta(l):Do(t,l=Lo(n)?Po:Oo.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==d||h!==l)&&Wa(t,a,r,l),Pa=!1,h=t.memoizedState,a.state=h,Ba(t,r,a,i);var f=t.memoizedState;s!==d||h!==f||Ao.current||Pa?("function"==typeof p&&(Ua(t,n,p,r),f=t.memoizedState),(c=Pa||Za(t,n,c,r,h,f,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Al(e,t,n,r,o,i)}function Al(e,t,n,r,i,o){Ml(e,t);var a=0!=(128&t.flags);if(!r&&!a)return i&&Bo(t,n,!1),ql(e,t,o);r=t.stateNode,wl.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ja(t,e.child,null,o),t.child=Ja(t,null,s,o)):kl(e,t,s,o),t.memoizedState=r.state,i&&Bo(t,n,!0),t.child}function Pl(e){var t=e.stateNode;t.pendingContext?zo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&zo(0,t.context,!1),as(e,t.containerInfo)}function Dl(e,t,n,r,i){return ma(),ga(i),t.flags|=256,kl(e,t,n,r),t.child}var Ll,Rl,zl,jl,Nl={dehydrated:null,treeContext:null,retryLane:0};function Bl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fl(e,t,n){var r,i=t.pendingProps,o=us.current,a=!1,s=0!=(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Mo(us,1&o),null===e)return da(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,a?(i=t.mode,a=t.child,s={mode:"hidden",children:s},0==(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=s):a=Bu(s,i,0,null),e=Nu(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Bl(n),t.memoizedState=Nl,e):Vl(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ul(e,t,a,r=pl(Error(se(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Bu({mode:"visible",children:r.children},i,0,null),(o=Nu(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!=(1&t.mode)&&Ja(t,e.child,null,a),t.child.memoizedState=Bl(a),t.memoizedState=Nl,o);if(0==(1&t.mode))return Ul(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Ul(e,t,a,r=pl(o=Error(se(419)),r,void 0))}if(s=0!=(a&e.childLanes),_l||s){if(null!==(r=Pc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),ou(r,e,i,-1))}return yu(),Ul(e,t,a,r=pl(Error(se(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ou.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,oa=uo(i.nextSibling),ia=t,aa=!0,sa=null,null!==e&&(Ko[Yo++]=Jo,Ko[Yo++]=Qo,Ko[Yo++]=Xo,Jo=e.id,Qo=e.overflow,Xo=t),(t=Vl(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(a){a=i.fallback,s=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0==(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=zu(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=zu(r,a):(a=Nu(a,s,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,s=null===(s=e.child.memoizedState)?Bl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=Nl,i}return e=(a=e.child).sibling,i=zu(a,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vl(e,t){return(t=Bu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ul(e,t,n,r){return null!==r&&ga(r),Ja(t,e.child,null,n),(e=Vl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $l(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Sa(e.return,t,n)}function Zl(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Hl(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(kl(e,t,r.children,n),0!=(2&(r=us.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$l(e,n,t);else if(19===e.tag)$l(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Mo(us,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ds(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Zl(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ds(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Zl(t,!0,n,null,o);break;case"together":Zl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wl(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ql(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bc|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(se(153));if(null!==t.child){for(n=zu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gl(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Kl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yl(e,t,n){var r=t.pendingProps;switch(ra(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kl(t),null;case 1:case 17:return Lo(t.type)&&Ro(),Kl(t),null;case 3:return r=t.stateNode,ss(),To(Ao),To(Oo),ps(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(pa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==sa&&(cu(sa),sa=null))),Rl(e,t),Kl(t),null;case 5:cs(t);var i=is(rs.current);if(n=t.type,null!==e&&null!=t.stateNode)zl(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(se(166));return Kl(t),null}if(e=is(ts.current),pa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fo]=t,r[mo]=o,e=0!=(1&t.mode),n){case"dialog":Fi("cancel",r),Fi("close",r);break;case"iframe":case"object":case"embed":Fi("load",r);break;case"video":case"audio":for(i=0;i<zi.length;i++)Fi(zi[i],r);break;case"source":Fi("error",r);break;case"img":case"image":case"link":Fi("error",r),Fi("load",r);break;case"details":Fi("toggle",r);break;case"input":Je(r,o),Fi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fi("invalid",r);break;case"textarea":at(r,o),Fi("invalid",r)}for(var a in bt(n,o),i=null,o)if(o.hasOwnProperty(a)){var s=o[a];"children"===a?"string"==typeof s?r.textContent!==s&&(!0!==o.suppressHydrationWarning&&Qi(r.textContent,s,e),i=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(!0!==o.suppressHydrationWarning&&Qi(r.textContent,s,e),i=["children",""+s]):ce.hasOwnProperty(a)&&null!=s&&"onScroll"===a&&Fi("scroll",r)}switch(n){case"input":Ge(r),tt(r,o,!0);break;case"textarea":Ge(r),lt(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=eo)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{a=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ct(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[fo]=t,e[mo]=r,Ll(e,t,!1,!1),t.stateNode=e;e:{switch(a=xt(n,r),n){case"dialog":Fi("cancel",e),Fi("close",e),i=r;break;case"iframe":case"object":case"embed":Fi("load",e),i=r;break;case"video":case"audio":for(i=0;i<zi.length;i++)Fi(zi[i],e);i=r;break;case"source":Fi("error",e),i=r;break;case"img":case"image":case"link":Fi("error",e),Fi("load",e),i=r;break;case"details":Fi("toggle",e),i=r;break;case"input":Je(e,r),i=Xe(e,r),Fi("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Be({},r,{value:void 0}),Fi("invalid",e);break;case"textarea":at(e,r),i=ot(e,r),Fi("invalid",e)}for(o in bt(n,i),s=i)if(s.hasOwnProperty(o)){var l=s[o];"style"===o?vt(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&ht(e,l):"children"===o?"string"==typeof l?("textarea"!==n||""!==l)&&pt(e,l):"number"==typeof l&&pt(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(ce.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Fi("scroll",e):null!=l&&we(e,o,l,a))}switch(n){case"input":Ge(e),tt(e,r,!1);break;case"textarea":Ge(e),lt(e);break;case"option":null!=r.value&&e.setAttribute("value",""+We(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?it(e,!!r.multiple,o,!1):null!=r.defaultValue&&it(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=eo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Kl(t),null;case 6:if(e&&null!=t.stateNode)jl(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(se(166));if(n=is(rs.current),is(ts.current),pa(t)){if(r=t.stateNode,n=t.memoizedProps,r[fo]=t,(o=r.nodeValue!==n)&&null!==(e=ia))switch(e.tag){case 3:Qi(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qi(r.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fo]=t,t.stateNode=r}return Kl(t),null;case 13:if(To(us),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==oa&&0!=(1&t.mode)&&0==(128&t.flags))fa(),ma(),t.flags|=98560,o=!1;else if(o=pa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(se(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(se(317));o[fo]=t}else ma(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Kl(t),o=!1}else null!==sa&&(cu(sa),sa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&us.current)?0===jc&&(jc=3):yu())),null!==t.updateQueue&&(t.flags|=4),Kl(t),null);case 4:return ss(),Rl(e,t),null===e&&$i(t.stateNode.containerInfo),Kl(t),null;case 10:return Ea(t.type._context),Kl(t),null;case 19:if(To(us),null===(o=t.memoizedState))return Kl(t),null;if(r=0!=(128&t.flags),null===(a=o.rendering))if(r)Gl(o,!1);else{if(0!==jc||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=ds(e))){for(t.flags|=128,Gl(o,!1),null!==(r=a.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Mo(us,1&us.current|2),t.child}e=e.sibling}null!==o.tail&&Jt()>Hc&&(t.flags|=128,r=!0,Gl(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ds(a))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gl(o,!0),null===o.tail&&"hidden"===o.tailMode&&!a.alternate&&!aa)return Kl(t),null}else 2*Jt()-o.renderingStartTime>Hc&&1073741824!==n&&(t.flags|=128,r=!0,Gl(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=o.last)?n.sibling=a:t.child=a,o.last=a)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Jt(),t.sibling=null,n=us.current,Mo(us,r?1&n|2:1&n),t):(Kl(t),null);case 22:case 23:return fu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Rc)&&(Kl(t),6&t.subtreeFlags&&(t.flags|=8192)):Kl(t),null;case 24:case 25:return null}throw Error(se(156,t.tag))}function Xl(e,t){switch(ra(t),t.tag){case 1:return Lo(t.type)&&Ro(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ss(),To(Ao),To(Oo),ps(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return cs(t),null;case 13:if(To(us),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(se(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return To(us),null;case 4:return ss(),null;case 10:return Ea(t.type._context),null;case 22:case 23:return fu(),null;default:return null}}Ll=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rl=function(){},zl=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,is(ts.current);var o,a=null;switch(n){case"input":i=Xe(e,i),r=Xe(e,r),a=[];break;case"select":i=Be({},i,{value:void 0}),r=Be({},r,{value:void 0}),a=[];break;case"textarea":i=ot(e,i),r=ot(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=eo)}for(c in bt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var s=i[c];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(ce.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(s=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(null!=l||null!=s))if("style"===c)if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(ce.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Fi("scroll",e),a||s===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},jl=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jl=!1,Ql=!1,ec="function"==typeof WeakSet?WeakSet:Set,tc=null;function nc(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(UA){Tu(e,t,UA)}else n.current=null}function rc(e,t,n){try{n()}catch(UA){Tu(e,t,UA)}}var ic=!1;function oc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&rc(t,n,o)}i=i.next}while(i!==r)}}function ac(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function lc(e){var t=e.alternate;null!==t&&(e.alternate=null,lc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[fo],delete t[mo],delete t[vo],delete t[yo],delete t[bo]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cc(e){return 5===e.tag||3===e.tag||4===e.tag}function uc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||cc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function dc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=eo));else if(4!==r&&null!==(e=e.child))for(dc(e,t,n),e=e.sibling;null!==e;)dc(e,t,n),e=e.sibling}function hc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(hc(e,t,n),e=e.sibling;null!==e;)hc(e,t,n),e=e.sibling}var pc=null,fc=!1;function mc(e,t,n){for(n=n.child;null!==n;)gc(e,t,n),n=n.sibling}function gc(e,t,n){if(sn&&"function"==typeof sn.onCommitFiberUnmount)try{sn.onCommitFiberUnmount(an,n)}catch(WA){}switch(n.tag){case 5:Ql||nc(n,t);case 6:var r=pc,i=fc;pc=null,mc(e,t,n),fc=i,null!==(pc=r)&&(fc?(e=pc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):pc.removeChild(n.stateNode));break;case 18:null!==pc&&(fc?(e=pc,n=n.stateNode,8===e.nodeType?co(e.parentNode,n):1===e.nodeType&&co(e,n),Zn(e)):co(pc,n.stateNode));break;case 4:r=pc,i=fc,pc=n.stateNode.containerInfo,fc=!0,mc(e,t,n),pc=r,fc=i;break;case 0:case 11:case 14:case 15:if(!Ql&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!=(2&o)||0!=(4&o))&&rc(n,t,a),i=i.next}while(i!==r)}mc(e,t,n);break;case 1:if(!Ql&&(nc(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(WA){Tu(n,t,WA)}mc(e,t,n);break;case 21:mc(e,t,n);break;case 22:1&n.mode?(Ql=(r=Ql)||null!==n.memoizedState,mc(e,t,n),Ql=r):mc(e,t,n);break;default:mc(e,t,n)}}function vc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ec),t.forEach((function(t){var r=Au.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function yc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;null!==s;){switch(s.tag){case 5:pc=s.stateNode,fc=!1;break e;case 3:case 4:pc=s.stateNode.containerInfo,fc=!0;break e}s=s.return}if(null===pc)throw Error(se(160));gc(o,a,i),pc=null,fc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(GA){Tu(i,t,GA)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)bc(t,e),t=t.sibling}function bc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yc(t,e),xc(e),4&r){try{oc(3,e,e.return),ac(3,e)}catch(QA){Tu(e,e.return,QA)}try{oc(5,e,e.return)}catch(QA){Tu(e,e.return,QA)}}break;case 1:yc(t,e),xc(e),512&r&&null!==n&&nc(n,n.return);break;case 5:if(yc(t,e),xc(e),512&r&&null!==n&&nc(n,n.return),32&e.flags){var i=e.stateNode;try{pt(i,"")}catch(QA){Tu(e,e.return,QA)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===s&&"radio"===o.type&&null!=o.name&&Qe(i,o),xt(s,a);var c=xt(s,o);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];"style"===u?vt(i,d):"dangerouslySetInnerHTML"===u?ht(i,d):"children"===u?pt(i,d):we(i,u,d,c)}switch(s){case"input":et(i,o);break;case"textarea":st(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?it(i,!!o.multiple,p,!1):h!==!!o.multiple&&(null!=o.defaultValue?it(i,!!o.multiple,o.defaultValue,!0):it(i,!!o.multiple,o.multiple?[]:"",!1))}i[mo]=o}catch(QA){Tu(e,e.return,QA)}}break;case 6:if(yc(t,e),xc(e),4&r){if(null===e.stateNode)throw Error(se(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(QA){Tu(e,e.return,QA)}}break;case 3:if(yc(t,e),xc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Zn(t.containerInfo)}catch(QA){Tu(e,e.return,QA)}break;case 4:default:yc(t,e),xc(e);break;case 13:yc(t,e),xc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Zc=Jt())),4&r&&vc(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Ql=(c=Ql)||u,yc(t,e),Ql=c):yc(t,e),xc(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&0!=(1&e.mode))for(tc=e,u=e.child;null!==u;){for(d=tc=u;null!==tc;){switch(p=(h=tc).child,h.tag){case 0:case 11:case 14:case 15:oc(4,h,h.return);break;case 1:nc(h,h.return);var f=h.stateNode;if("function"==typeof f.componentWillUnmount){r=h,n=h.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(QA){Tu(r,n,QA)}}break;case 5:nc(h,h.return);break;case 22:if(null!==h.memoizedState){Ec(d);continue}}null!==p?(p.return=h,tc=p):Ec(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{i=d.stateNode,c?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=d.stateNode,a=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,s.style.display=gt("display",a))}catch(QA){Tu(e,e.return,QA)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(QA){Tu(e,e.return,QA)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yc(t,e),xc(e),4&r&&vc(e);case 21:}}function xc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(cc(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pt(i,""),r.flags&=-33),hc(e,uc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;dc(e,uc(e),o);break;default:throw Error(se(161))}}catch(qA){Tu(e,e.return,qA)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wc(e,t,n){tc=e,_c(e)}function _c(e,t,n){for(var r=0!=(1&e.mode);null!==tc;){var i=tc,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Jl;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ql;s=Jl;var c=Ql;if(Jl=a,(Ql=l)&&!c)for(tc=i;null!==tc;)l=(a=tc).child,22===a.tag&&null!==a.memoizedState?Sc(i):null!==l?(l.return=a,tc=l):Sc(i);for(;null!==o;)tc=o,_c(o),o=o.sibling;tc=i,Jl=s,Ql=c}kc(e)}else 0!=(8772&i.subtreeFlags)&&null!==o?(o.return=i,tc=o):kc(e)}}function kc(e){for(;null!==tc;){var t=tc;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ql||ac(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ql)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,a,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Zn(d)}}}break;default:throw Error(se(163))}Ql||512&t.flags&&sc(t)}catch(wA){Tu(t,t.return,wA)}}if(t===e){tc=null;break}if(null!==(n=t.sibling)){n.return=t.return,tc=n;break}tc=t.return}}function Ec(e){for(;null!==tc;){var t=tc;if(t===e){tc=null;break}var n=t.sibling;if(null!==n){n.return=t.return,tc=n;break}tc=t.return}}function Sc(e){for(;null!==tc;){var t=tc;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ac(4,t)}catch(qA){Tu(t,n,qA)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(qA){Tu(t,i,qA)}}var o=t.return;try{sc(t)}catch(qA){Tu(t,o,qA)}break;case 5:var a=t.return;try{sc(t)}catch(qA){Tu(t,a,qA)}}}catch(qA){Tu(t,t.return,qA)}if(t===e){tc=null;break}var s=t.sibling;if(null!==s){s.return=t.return,tc=s;break}tc=t.return}}var Cc,Tc=Math.ceil,Mc=_e.ReactCurrentDispatcher,Ic=_e.ReactCurrentOwner,Oc=_e.ReactCurrentBatchConfig,Ac=0,Pc=null,Dc=null,Lc=0,Rc=0,zc=Co(0),jc=0,Nc=null,Bc=0,Fc=0,Vc=0,Uc=null,$c=null,Zc=0,Hc=1/0,Wc=null,qc=!1,Gc=null,Kc=null,Yc=!1,Xc=null,Jc=0,Qc=0,eu=null,tu=-1,nu=0;function ru(){return 0!=(6&Ac)?Jt():-1!==tu?tu:tu=Jt()}function iu(e){return 0==(1&e.mode)?1:0!=(2&Ac)&&0!==Lc?Lc&-Lc:null!==va.transition?(0===nu&&(nu=vn()),nu):0!==(e=wn)?e:e=void 0===(e=window.event)?16:Jn(e.type)}function ou(e,t,n,r){if(50<Qc)throw Qc=0,eu=null,Error(se(185));bn(e,n,r),0!=(2&Ac)&&e===Pc||(e===Pc&&(0==(2&Ac)&&(Fc|=n),4===jc&&uu(e,Lc)),au(e,r),1===n&&0===Ac&&0==(1&t.mode)&&(Hc=Jt()+500,Vo&&Zo()))}function au(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-ln(o),s=1<<a,l=i[a];-1===l?0!=(s&n)&&0==(s&r)||(i[a]=mn(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=fn(e,e===Pc?Lc:0);if(0===r)null!==n&&Kt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Kt(n),1===t)0===e.tag?function(e){Vo=!0,$o(e)}(du.bind(null,e)):$o(du.bind(null,e)),so((function(){0==(6&Ac)&&Zo()})),n=null;else{switch(_n(r)){case 1:n=en;break;case 4:n=tn;break;case 16:default:n=nn;break;case 536870912:n=on}n=Pu(n,su.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function su(e,t){if(tu=-1,nu=0,0!=(6&Ac))throw Error(se(327));var n=e.callbackNode;if(Su()&&e.callbackNode!==n)return null;var r=fn(e,e===Pc?Lc:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=bu(e,r);else{t=r;var i=Ac;Ac|=2;var o=vu();for(Pc===e&&Lc===t||(Wc=null,Hc=Jt()+500,mu(e,t));;)try{wu();break}catch(WA){gu(e,WA)}ka(),Mc.current=o,Ac=i,null!==Dc?t=0:(Pc=null,Lc=0,t=jc)}if(0!==t){if(2===t&&0!==(i=gn(e))&&(r=i,t=lu(e,i)),1===t)throw n=Nc,mu(e,0),uu(e,r),au(e,Jt()),n;if(6===t)uu(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!li(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=bu(e,r))&&0!==(o=gn(e))&&(r=o,t=lu(e,o)),1===t))throw n=Nc,mu(e,0),uu(e,r),au(e,Jt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(se(345));case 2:case 5:Eu(e,$c,Wc);break;case 3:if(uu(e,r),(130023424&r)===r&&10<(t=Zc+500-Jt())){if(0!==fn(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ru(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=io(Eu.bind(null,e,$c,Wc),t);break}Eu(e,$c,Wc);break;case 4:if(uu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ln(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Jt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tc(r/1960))-r)){e.timeoutHandle=io(Eu.bind(null,e,$c,Wc),r);break}Eu(e,$c,Wc);break;default:throw Error(se(329))}}}return au(e,Jt()),e.callbackNode===n?su.bind(null,e):null}function lu(e,t){var n=Uc;return e.current.memoizedState.isDehydrated&&(mu(e,t).flags|=256),2!==(e=bu(e,t))&&(t=$c,$c=n,null!==t&&cu(t)),e}function cu(e){null===$c?$c=e:$c.push.apply($c,e)}function uu(e,t){for(t&=~Vc,t&=~Fc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ln(t),r=1<<n;e[n]=-1,t&=~r}}function du(e){if(0!=(6&Ac))throw Error(se(327));Su();var t=fn(e,0);if(0==(1&t))return au(e,Jt()),null;var n=bu(e,t);if(0!==e.tag&&2===n){var r=gn(e);0!==r&&(t=r,n=lu(e,r))}if(1===n)throw n=Nc,mu(e,0),uu(e,t),au(e,Jt()),n;if(6===n)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Eu(e,$c,Wc),au(e,Jt()),null}function hu(e,t){var n=Ac;Ac|=1;try{return e(t)}finally{0===(Ac=n)&&(Hc=Jt()+500,Vo&&Zo())}}function pu(e){null!==Xc&&0===Xc.tag&&0==(6&Ac)&&Su();var t=Ac;Ac|=1;var n=Oc.transition,r=wn;try{if(Oc.transition=null,wn=1,e)return e()}finally{wn=r,Oc.transition=n,0==(6&(Ac=t))&&Zo()}}function fu(){Rc=zc.current,To(zc)}function mu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Dc)for(n=Dc.return;null!==n;){var r=n;switch(ra(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ro();break;case 3:ss(),To(Ao),To(Oo),ps();break;case 5:cs(r);break;case 4:ss();break;case 13:case 19:To(us);break;case 10:Ea(r.type._context);break;case 22:case 23:fu()}n=n.return}if(Pc=e,Dc=e=zu(e.current,null),Lc=Rc=t,jc=0,Nc=null,Vc=Fc=Bc=0,$c=Uc=null,null!==Ma){for(t=0;t<Ma.length;t++)if(null!==(r=(n=Ma[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Ma=null}return e}function gu(e,t){for(;;){var n=Dc;try{if(ka(),fs.current=ll,xs){for(var r=vs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}xs=!1}if(gs=0,bs=ys=vs=null,ws=!1,_s=0,Ic.current=null,null===n||null===n.return){jc=1,Nc=t,Dc=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Lc,s.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=s,d=u.tag;if(0==(1&u.mode)&&(0===d||11===d||15===d)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=bl(a);if(null!==p){p.flags&=-257,xl(p,a,s,0,t),1&p.mode&&yl(o,c,t),l=c;var f=(t=p).updateQueue;if(null===f){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}if(0==(1&t)){yl(o,c,t),yu();break e}l=Error(se(426))}else if(aa&&1&s.mode){var g=bl(a);if(null!==g){0==(65536&g.flags)&&(g.flags|=256),xl(g,a,s,0,t),ga(hl(l,s));break e}}o=l=hl(l,s),4!==jc&&(jc=2),null===Uc?Uc=[o]:Uc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Na(o,gl(0,l,t));break e;case 1:s=l;var v=o.type,y=o.stateNode;if(0==(128&o.flags)&&("function"==typeof v.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===Kc||!Kc.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,Na(o,vl(o,s,t));break e}}o=o.return}while(null!==o)}ku(n)}catch(b){t=b,Dc===n&&null!==n&&(Dc=n=n.return);continue}break}}function vu(){var e=Mc.current;return Mc.current=ll,null===e?ll:e}function yu(){0!==jc&&3!==jc&&2!==jc||(jc=4),null===Pc||0==(268435455&Bc)&&0==(268435455&Fc)||uu(Pc,Lc)}function bu(e,t){var n=Ac;Ac|=2;var r=vu();for(Pc===e&&Lc===t||(Wc=null,mu(e,t));;)try{xu();break}catch($A){gu(e,$A)}if(ka(),Ac=n,Mc.current=r,null!==Dc)throw Error(se(261));return Pc=null,Lc=0,jc}function xu(){for(;null!==Dc;)_u(Dc)}function wu(){for(;null!==Dc&&!Yt();)_u(Dc)}function _u(e){var t=Cc(e.alternate,e,Rc);e.memoizedProps=e.pendingProps,null===t?ku(e):Dc=t,Ic.current=null}function ku(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Yl(n,t,Rc)))return void(Dc=n)}else{if(null!==(n=Xl(n,t)))return n.flags&=32767,void(Dc=n);if(null===e)return jc=6,void(Dc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dc=t);Dc=t=e}while(null!==t);0===jc&&(jc=5)}function Eu(e,t,n){var r=wn,i=Oc.transition;try{Oc.transition=null,wn=1,function(e,t,n,r){do{Su()}while(null!==Xc);if(0!=(6&Ac))throw Error(se(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ln(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,o),e===Pc&&(Dc=Pc=null,Lc=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Yc||(Yc=!0,Pu(nn,(function(){return Su(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=Oc.transition,Oc.transition=null;var a=wn;wn=1;var s=Ac;Ac|=4,Ic.current=null,function(e,t){if(to=Wn,fi(e=pi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var a=0,s=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(s=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===i&&(s=a),h===o&&++u===r&&(l=a),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===s||-1===l?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(no={focusedElem:e,selectionRange:n},Wn=!1,tc=t;null!==tc;)if(e=(t=tc).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,tc=e;else for(;null!==tc;){t=tc;try{var f=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,g=f.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ya(t.type,m),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(se(163))}}catch(x){Tu(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,tc=e;break}tc=t.return}f=ic,ic=!1}(e,n),bc(n,e),mi(no),Wn=!!to,no=to=null,e.current=n,wc(n),Xt(),Ac=s,wn=a,Oc.transition=o}else e.current=n;if(Yc&&(Yc=!1,Xc=e,Jc=i),0===(o=e.pendingLanes)&&(Kc=null),function(e){if(sn&&"function"==typeof sn.onCommitFiberRoot)try{sn.onCommitFiberRoot(an,e,void 0,128==(128&e.current.flags))}catch(t){}}(n.stateNode),au(e,Jt()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qc)throw qc=!1,e=Gc,Gc=null,e;0!=(1&Jc)&&0!==e.tag&&Su(),0!=(1&(o=e.pendingLanes))?e===eu?Qc++:(Qc=0,eu=e):Qc=0,Zo()}(e,t,n,r)}finally{Oc.transition=i,wn=r}return null}function Su(){if(null!==Xc){var e=_n(Jc),t=Oc.transition,n=wn;try{if(Oc.transition=null,wn=16>e?16:e,null===Xc)var r=!1;else{if(e=Xc,Xc=null,Jc=0,0!=(6&Ac))throw Error(se(331));var i=Ac;for(Ac|=4,tc=e.current;null!==tc;){var o=tc,a=o.child;if(0!=(16&tc.flags)){var s=o.deletions;if(null!==s){for(var l=0;l<s.length;l++){var c=s[l];for(tc=c;null!==tc;){var u=tc;switch(u.tag){case 0:case 11:case 15:oc(8,u,o)}var d=u.child;if(null!==d)d.return=u,tc=d;else for(;null!==tc;){var h=(u=tc).sibling,p=u.return;if(lc(u),u===c){tc=null;break}if(null!==h){h.return=p,tc=h;break}tc=p}}}var f=o.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}tc=o}}if(0!=(2064&o.subtreeFlags)&&null!==a)a.return=o,tc=a;else e:for(;null!==tc;){if(0!=(2048&(o=tc).flags))switch(o.tag){case 0:case 11:case 15:oc(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,tc=v;break e}tc=o.return}}var y=e.current;for(tc=y;null!==tc;){var b=(a=tc).child;if(0!=(2064&a.subtreeFlags)&&null!==b)b.return=a,tc=b;else e:for(a=y;null!==tc;){if(0!=(2048&(s=tc).flags))try{switch(s.tag){case 0:case 11:case 15:ac(9,s)}}catch(w){Tu(s,s.return,w)}if(s===a){tc=null;break e}var x=s.sibling;if(null!==x){x.return=s.return,tc=x;break e}tc=s.return}}if(Ac=i,Zo(),sn&&"function"==typeof sn.onPostCommitFiberRoot)try{sn.onPostCommitFiberRoot(an,e)}catch(w){}r=!0}return r}finally{wn=n,Oc.transition=t}}return!1}function Cu(e,t,n){e=za(e,t=gl(0,t=hl(n,t),1),1),t=ru(),null!==e&&(bn(e,1,t),au(e,t))}function Tu(e,t,n){if(3===e.tag)Cu(e,e,n);else for(;null!==t;){if(3===t.tag){Cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Kc||!Kc.has(r))){t=za(t,e=vl(t,e=hl(n,e),1),1),e=ru(),null!==t&&(bn(t,1,e),au(t,e));break}}t=t.return}}function Mu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ru(),e.pingedLanes|=e.suspendedLanes&n,Pc===e&&(Lc&n)===n&&(4===jc||3===jc&&(130023424&Lc)===Lc&&500>Jt()-Zc?mu(e,0):Vc|=n),au(e,t)}function Iu(e,t){0===t&&(0==(1&e.mode)?t=1:(t=hn,0==(130023424&(hn<<=1))&&(hn=4194304)));var n=ru();null!==(e=Aa(e,t))&&(bn(e,t,n),au(e,n))}function Ou(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Iu(e,n)}function Au(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(se(314))}null!==r&&r.delete(t),Iu(e,n)}function Pu(e,t){return Gt(e,t)}function Du(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lu(e,t,n,r){return new Du(e,t,n,r)}function Ru(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zu(e,t){var n=e.alternate;return null===n?((n=Lu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ju(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Ru(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Se:return Nu(n.children,i,o,t);case Ce:a=8,i|=8;break;case Te:return(e=Lu(12,n,t,2|i)).elementType=Te,e.lanes=o,e;case Ae:return(e=Lu(13,n,t,i)).elementType=Ae,e.lanes=o,e;case Pe:return(e=Lu(19,n,t,i)).elementType=Pe,e.lanes=o,e;case Re:return Bu(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Me:a=10;break e;case Ie:a=9;break e;case Oe:a=11;break e;case De:a=14;break e;case Le:a=16,r=null;break e}throw Error(se(130,null==e?e:typeof e,""))}return(t=Lu(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Nu(e,t,n,r){return(e=Lu(7,e,r,t)).lanes=n,e}function Bu(e,t,n,r){return(e=Lu(22,e,r,t)).elementType=Re,e.lanes=n,e.stateNode={isHidden:!1},e}function Fu(e,t,n){return(e=Lu(6,e,null,t)).lanes=n,e}function Vu(e,t,n){return(t=Lu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yn(0),this.expirationTimes=yn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yn(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $u(e,t,n,r,i,o,a,s,l){return e=new Uu(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Lu(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(o),e}function Zu(e){if(!e)return Io;e:{if($t(e=e._reactInternals)!==e||1!==e.tag)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(se(171))}if(1===e.tag){var n=e.type;if(Lo(n))return jo(e,n,t)}return t}function Hu(e,t,n,r,i,o,a,s,l){return(e=$u(n,r,!0,e,0,o,0,s,l)).context=Zu(null),n=e.current,(o=Ra(r=ru(),i=iu(n))).callback=null!=t?t:null,za(n,o,i),e.current.lanes=i,bn(e,i,r),au(e,r),e}function Wu(e,t,n,r){var i=t.current,o=ru(),a=iu(i);return n=Zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=za(i,t,a))&&(ou(e,i,a,o),ja(e,i,a)),a}function qu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ku(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}Cc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ao.current)_l=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return _l=!1,function(e,t,n){switch(t.tag){case 3:Pl(t),ma();break;case 5:ls(t);break;case 1:Lo(t.type)&&No(t);break;case 4:as(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Mo(ba,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Mo(us,1&us.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Fl(e,t,n):(Mo(us,1&us.current),null!==(e=ql(e,t,n))?e.sibling:null);Mo(us,1&us.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return Hl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Mo(us,us.current),r)break;return null;case 22:case 23:return t.lanes=0,Tl(e,t,n)}return ql(e,t,n)}(e,t,n);_l=0!=(131072&e.flags)}else _l=!1,aa&&0!=(1048576&t.flags)&&ta(t,Go,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wl(e,t),e=t.pendingProps;var i=Do(t,Oo.current);Ca(t,n),i=Cs(null,t,r,e,i,n);var o=Ts();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lo(r)?(o=!0,No(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=$a,t.stateNode=i,i._reactInternals=t,qa(t,r,e,n),t=Al(null,t,r,!0,o,n)):(t.tag=0,aa&&o&&na(t),kl(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wl(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Ru(e)?1:0;if(null!=e){if((e=e.$$typeof)===Oe)return 11;if(e===De)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Il(null,t,r,e,n);break e;case 1:t=Ol(null,t,r,e,n);break e;case 11:t=El(null,t,r,e,n);break e;case 14:t=Sl(null,t,r,ya(r.type,e),n);break e}throw Error(se(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Il(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ol(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Pl(t),null===e)throw Error(se(387));r=t.pendingProps,i=(o=t.memoizedState).element,La(e,t),Ba(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Dl(e,t,r,n,i=hl(Error(se(423)),t));break e}if(r!==i){t=Dl(e,t,r,n,i=hl(Error(se(424)),t));break e}for(oa=uo(t.stateNode.containerInfo.firstChild),ia=t,aa=!0,sa=null,n=Qa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ma(),r===i){t=ql(e,t,n);break e}kl(e,t,r,n)}t=t.child}return t;case 5:return ls(t),null===e&&da(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ro(r,i)?a=null:null!==o&&ro(r,o)&&(t.flags|=32),Ml(e,t),kl(e,t,a,n),t.child;case 6:return null===e&&da(t),null;case 13:return Fl(e,t,n);case 4:return as(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):kl(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,El(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return kl(e,t,t.pendingProps,n),t.child;case 8:case 12:return kl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Mo(ba,r._currentValue),r._currentValue=a,null!==o)if(li(o.value,a)){if(o.children===i.children&&!Ao.current){t=ql(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){a=o.child;for(var l=s.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Ra(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Sa(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(se(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),Sa(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}kl(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ca(t,n),r=r(i=Ta(i)),t.flags|=1,kl(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),Sl(e,t,r,i=ya(r.type,i),n);case 15:return Cl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Wl(e,t),t.tag=1,Lo(r)?(e=!0,No(t)):e=!1,Ca(t,n),Ha(t,r,i),qa(t,r,i,n),Al(null,t,r,!0,e,n);case 19:return Hl(e,t,n);case 22:return Tl(e,t,n)}throw Error(se(156,t.tag))};var Yu="function"==typeof reportError?reportError:function(e){console.error(e)};function Xu(e){this._internalRoot=e}function Ju(e){this._internalRoot=e}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ed(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function td(){}function nd(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"==typeof i){var s=i;i=function(){var e=qu(a);s.call(e)}}Wu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"==typeof r){var o=r;r=function(){var e=qu(a);o.call(e)}}var a=Hu(t,r,e,0,null,!1,0,"",td);return e._reactRootContainer=a,e[go]=a.current,$i(8===e.nodeType?e.parentNode:e),pu(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var s=r;r=function(){var e=qu(l);s.call(e)}}var l=$u(e,0,!1,null,0,!1,0,"",td);return e._reactRootContainer=l,e[go]=l.current,$i(8===e.nodeType?e.parentNode:e),pu((function(){Wu(t,l,n,r)})),l}(n,t,e,i,r);return qu(a)}Ju.prototype.render=Xu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(se(409));Wu(e,t,null,null)},Ju.prototype.unmount=Xu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;pu((function(){Wu(null,e,null,null)})),t[go]=null}},Ju.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cn();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rn.length&&0!==t&&t<Rn[n].priority;n++);Rn.splice(n,0,e),0===n&&Bn(e)}},kn=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=pn(t.pendingLanes);0!==n&&(xn(t,1|n),au(t,Jt()),0==(6&Ac)&&(Hc=Jt()+500,Zo()))}break;case 13:pu((function(){var t=Aa(e,1);if(null!==t){var n=ru();ou(t,e,1,n)}})),Ku(e,1)}},En=function(e){if(13===e.tag){var t=Aa(e,134217728);null!==t&&ou(t,e,134217728,ru()),Ku(e,134217728)}},Sn=function(e){if(13===e.tag){var t=iu(e),n=Aa(e,t);null!==n&&ou(n,e,t,ru()),Ku(e,t)}},Cn=function(){return wn},Tn=function(e,t){var n=wn;try{return wn=e,t()}finally{wn=n}},kt=function(e,t,n){switch(t){case"input":if(et(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ko(r);if(!i)throw Error(se(90));Ke(r),et(r,i)}}}break;case"textarea":st(e,n);break;case"select":null!=(t=n.value)&&it(e,!!n.multiple,t,!1)}},It=hu,Ot=pu;var rd={usingClientEntryPoint:!1,Events:[wo,_o,ko,Tt,Mt,hu]},id={findFiberByHostInstance:xo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},od={bundleType:id.bundleType,version:id.version,rendererPackageName:id.rendererPackageName,rendererConfig:id.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_e.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Wt(e))?null:e.stateNode},findFiberByHostInstance:id.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{an=ad.inject(od),sn=ad}catch(eH){}}te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rd,te.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(t))throw Error(se(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ee,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},te.createRoot=function(e,t){if(!Qu(e))throw Error(se(299));var n=!1,r="",i=Yu;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=$u(e,1,!1,null,0,n,0,r,i),e[go]=t.current,$i(8===e.nodeType?e.parentNode:e),new Xu(t)},te.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(se(188));throw e=Object.keys(e).join(","),Error(se(268,e))}return e=null===(e=Wt(t))?null:e.stateNode},te.flushSync=function(e){return pu(e)},te.hydrate=function(e,t,n){if(!ed(t))throw Error(se(200));return nd(null,e,t,!0,n)},te.hydrateRoot=function(e,t,n){if(!Qu(e))throw Error(se(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Yu;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Hu(t,null,e,1,null!=n?n:null,i,0,o,a),e[go]=t.current,$i(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ju(t)},te.render=function(e,t,n){if(!ed(t))throw Error(se(200));return nd(null,e,t,!1,n)},te.unmountComponentAtNode=function(e){if(!ed(e))throw Error(se(40));return!!e._reactRootContainer&&(pu((function(){nd(null,null,e,!1,(function(){e._reactRootContainer=null,e[go]=null}))})),!0)},te.unstable_batchedUpdates=hu,te.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ed(n))throw Error(se(200));if(null==e||void 0===e._reactInternals)throw Error(se(38));return nd(e,t,n,!1,r)},te.version="18.2.0-next-9e3b772b8-20220608",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),ee.exports=te;var sd=ee.exports;const ld=i(sd);var cd,ud=sd;function dd(e,t){return dd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dd(e,t)}function hd(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,dd(e,t)}cd=ud.createRoot,ud.hydrateRoot;var pd={exports:{}};function fd(){}function md(){}md.resetWarningCache=fd,pd.exports=function(){function e(e,t,n,r,i,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:md,resetWarningCache:fd};return n.PropTypes=n,n}();const gd=i(pd.exports);function vd(){return vd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vd.apply(this,arguments)}function yd(e){return"/"===e.charAt(0)}function bd(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function xd(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}function wd(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every((function(e,n){return wd(e,t[n])}));if("object"==typeof e||"object"==typeof t){var n=xd(e),r=xd(t);return n!==e||r!==t?wd(n,r):Object.keys(Object.assign({},e,t)).every((function(n){return wd(e[n],t[n])}))}return!1}var _d=!0,kd="Invariant failed";function Ed(e,t){if(!e){if(_d)throw new Error(kd);var n="function"==typeof t?t():t,r=n?"".concat(kd,": ").concat(n):kd;throw new Error(r)}}function Sd(e){return"/"===e.charAt(0)?e:"/"+e}function Cd(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function Td(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function Md(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function Id(e,t,n,r){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=vd({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch($A){throw $A instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):$A}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&yd(e),a=t&&yd(t),s=o||a;if(e&&yd(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];n="."===l||".."===l||""===l}else n=!1;for(var c=0,u=i.length;u>=0;u--){var d=i[u];"."===d?bd(i,u):".."===d?(bd(i,u),c++):c&&(bd(i,u),c--)}if(!s)for(;c--;c)i.unshift("..");!s||""===i[0]||i[0]&&yd(i[0])||i.unshift("");var h=i.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h}(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function Od(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&wd(e.state,t.state)}function Ad(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var Pd=!("undefined"==typeof window||!window.document||!window.document.createElement);function Dd(e,t){t(window.confirm(e))}var Ld="popstate",Rd="hashchange";function zd(){try{return window.history.state||{}}catch($A){return{}}}function jd(e){void 0===e&&(e={}),Pd||Ed(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,o=i.forceRefresh,a=void 0!==o&&o,s=i.getUserConfirmation,l=void 0===s?Dd:s,c=i.keyLength,u=void 0===c?6:c,d=e.basename?Td(Sd(e.basename)):"";function h(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return d&&(o=Cd(o,d)),Id(o,r,n)}function p(){return Math.random().toString(36).substr(2,u)}var f=Ad();function m(e){vd(T,e),T.length=t.length,f.notifyListeners(T.location,T.action)}function g(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||b(h(e.state))}function v(){b(h(zd()))}var y=!1;function b(e){y?(y=!1,m()):f.confirmTransitionTo(e,"POP",l,(function(t){t?m({action:"POP",location:e}):function(e){var t=T.location,n=w.indexOf(t.key);-1===n&&(n=0);var r=w.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(y=!0,k(i))}(e)}))}var x=h(zd()),w=[x.key];function _(e){return d+Md(e)}function k(e){t.go(e)}var E=0;function S(e){1===(E+=e)&&1===e?(window.addEventListener(Ld,g),r&&window.addEventListener(Rd,v)):0===E&&(window.removeEventListener(Ld,g),r&&window.removeEventListener(Rd,v))}var C=!1,T={length:t.length,action:"POP",location:x,createHref:_,push:function(e,r){var i="PUSH",o=Id(e,r,p(),T.location);f.confirmTransitionTo(o,i,l,(function(e){if(e){var r=_(o),s=o.key,l=o.state;if(n)if(t.pushState({key:s,state:l},null,r),a)window.location.href=r;else{var c=w.indexOf(T.location.key),u=w.slice(0,c+1);u.push(o.key),w=u,m({action:i,location:o})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",o=Id(e,r,p(),T.location);f.confirmTransitionTo(o,i,l,(function(e){if(e){var r=_(o),s=o.key,l=o.state;if(n)if(t.replaceState({key:s,state:l},null,r),a)window.location.replace(r);else{var c=w.indexOf(T.location.key);-1!==c&&(w[c]=o.key),m({action:i,location:o})}else window.location.replace(r)}}))},go:k,goBack:function(){k(-1)},goForward:function(){k(1)},block:function(e){void 0===e&&(e=!1);var t=f.setPrompt(e);return C||(S(1),C=!0),function(){return C&&(C=!1,S(-1)),t()}},listen:function(e){var t=f.appendListener(e);return S(1),function(){S(-1),t()}}};return T}var Nd={exports:{}},Bd=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};Nd.exports=Kd,Nd.exports.parse=Vd,Nd.exports.compile=function(e,t){return $d(Vd(e,t),t)},Nd.exports.tokensToFunction=$d,Nd.exports.tokensToRegExp=Gd;var Fd=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Vd(e,t){for(var n,r=[],i=0,o=0,a="",s=t&&t.delimiter||"/";null!=(n=Fd.exec(e));){var l=n[0],c=n[1],u=n.index;if(a+=e.slice(o,u),o=u+l.length,c)a+=c[1];else{var d=e[o],h=n[2],p=n[3],f=n[4],m=n[5],g=n[6],v=n[7];a&&(r.push(a),a="");var y=null!=h&&null!=d&&d!==h,b="+"===g||"*"===g,x="?"===g||"*"===g,w=n[2]||s,_=f||m;r.push({name:p||i++,prefix:h||"",delimiter:w,optional:x,repeat:b,partial:y,asterisk:!!v,pattern:_?Hd(_):v?".*":"[^"+Zd(w)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function Ud(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function $d(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",qd(t)));return function(t,r){for(var i="",o=t||{},a=(r||{}).pretty?Ud:encodeURIComponent,s=0;s<e.length;s++){var l=e[s];if("string"!=typeof l){var c,u=o[l.name];if(null==u){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(Bd(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<u.length;d++){if(c=a(u[d]),!n[s].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");i+=(0===d?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?encodeURI(u).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):a(u),!n[s].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');i+=l.prefix+c}}else i+=l}return i}}function Zd(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Hd(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Wd(e,t){return e.keys=t,e}function qd(e){return e&&e.sensitive?"":"i"}function Gd(e,t,n){Bd(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,i=!1!==n.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"==typeof s)o+=Zd(s);else{var l=Zd(s.prefix),c="(?:"+s.pattern+")";t.push(s),s.repeat&&(c+="(?:"+l+c+")*"),o+=c=s.optional?s.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var u=Zd(n.delimiter||"/"),d=o.slice(-u.length)===u;return r||(o=(d?o.slice(0,-u.length):o)+"(?:"+u+"(?=$))?"),o+=i?"$":r&&d?"":"(?="+u+"|$)",Wd(new RegExp("^"+o,qd(n)),t)}function Kd(e,t,n){return Bd(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Wd(e,t)}(e,t):Bd(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(Kd(e[i],t,n).source);return Wd(new RegExp("(?:"+r.join("|")+")",qd(n)),t)}(e,t,n):function(e,t,n){return Gd(Vd(e,n),t,n)}(e,t,n)}const Yd=i(Nd.exports);var Xd={exports:{}},Jd={},Qd="function"==typeof Symbol&&Symbol.for,eh=Qd?Symbol.for("react.element"):60103,th=Qd?Symbol.for("react.portal"):60106,nh=Qd?Symbol.for("react.fragment"):60107,rh=Qd?Symbol.for("react.strict_mode"):60108,ih=Qd?Symbol.for("react.profiler"):60114,oh=Qd?Symbol.for("react.provider"):60109,ah=Qd?Symbol.for("react.context"):60110,sh=Qd?Symbol.for("react.async_mode"):60111,lh=Qd?Symbol.for("react.concurrent_mode"):60111,ch=Qd?Symbol.for("react.forward_ref"):60112,uh=Qd?Symbol.for("react.suspense"):60113,dh=Qd?Symbol.for("react.suspense_list"):60120,hh=Qd?Symbol.for("react.memo"):60115,ph=Qd?Symbol.for("react.lazy"):60116,fh=Qd?Symbol.for("react.block"):60121,mh=Qd?Symbol.for("react.fundamental"):60117,gh=Qd?Symbol.for("react.responder"):60118,vh=Qd?Symbol.for("react.scope"):60119;function yh(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case eh:switch(e=e.type){case sh:case lh:case nh:case ih:case rh:case uh:return e;default:switch(e=e&&e.$$typeof){case ah:case ch:case ph:case hh:case oh:return e;default:return t}}case th:return t}}}function bh(e){return yh(e)===lh}function xh(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}Jd.AsyncMode=sh,Jd.ConcurrentMode=lh,Jd.ContextConsumer=ah,Jd.ContextProvider=oh,Jd.Element=eh,Jd.ForwardRef=ch,Jd.Fragment=nh,Jd.Lazy=ph,Jd.Memo=hh,Jd.Portal=th,Jd.Profiler=ih,Jd.StrictMode=rh,Jd.Suspense=uh,Jd.isAsyncMode=function(e){return bh(e)||yh(e)===sh},Jd.isConcurrentMode=bh,Jd.isContextConsumer=function(e){return yh(e)===ah},Jd.isContextProvider=function(e){return yh(e)===oh},Jd.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===eh},Jd.isForwardRef=function(e){return yh(e)===ch},Jd.isFragment=function(e){return yh(e)===nh},Jd.isLazy=function(e){return yh(e)===ph},Jd.isMemo=function(e){return yh(e)===hh},Jd.isPortal=function(e){return yh(e)===th},Jd.isProfiler=function(e){return yh(e)===ih},Jd.isStrictMode=function(e){return yh(e)===rh},Jd.isSuspense=function(e){return yh(e)===uh},Jd.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===nh||e===lh||e===ih||e===rh||e===uh||e===dh||"object"==typeof e&&null!==e&&(e.$$typeof===ph||e.$$typeof===hh||e.$$typeof===oh||e.$$typeof===ah||e.$$typeof===ch||e.$$typeof===mh||e.$$typeof===gh||e.$$typeof===vh||e.$$typeof===fh)},Jd.typeOf=yh,Xd.exports=Jd;var wh=Xd.exports,_h={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},kh={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Eh={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Sh={};function Ch(e){return wh.isMemo(e)?Eh:Sh[e.$$typeof]||_h}Sh[wh.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Sh[wh.Memo]=Eh;var Th=Object.defineProperty,Mh=Object.getOwnPropertyNames,Ih=Object.getOwnPropertySymbols,Oh=Object.getOwnPropertyDescriptor,Ah=Object.getPrototypeOf,Ph=Object.prototype,Dh=function e(t,n,r){if("string"!=typeof n){if(Ph){var i=Ah(n);i&&i!==Ph&&e(t,i,r)}var o=Mh(n);Ih&&(o=o.concat(Ih(n)));for(var a=Ch(t),s=Ch(n),l=0;l<o.length;++l){var c=o[l];if(!(kh[c]||r&&r[c]||s&&s[c]||a&&a[c])){var u=Oh(n,c);try{Th(t,c,u)}catch($A){}}}}return t};const Lh=i(Dh);var Rh=1073741823,zh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},jh=$.createContext||function(e,t){var n,r,i,o="__create-react-context-"+(zh[i="__global_unique_id__"]=(zh[i]||0)+1)+"__",a=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}hd(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,i)?(n="function"==typeof t?t(r,i):Rh,0!=(n|=0)&&this.emitter.set(e.value,n)):n=0}},r.render=function(){return this.props.children},n}($.Component);a.childContextTypes=((n={})[o]=gd.object.isRequired,n);var s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}hd(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?Rh:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?Rh:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}($.Component);return s.contextTypes=((r={})[o]=gd.object,r),{Provider:a,Consumer:s}},Nh=function(e){var t=jh();return t.displayName=e,t},Bh=Nh("Router-History"),Fh=Nh("Router"),Vh=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}hd(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return $.createElement(Fh.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},$.createElement(Bh.Provider,{children:this.props.children||null,value:this.props.history}))},t}($.Component);$.Component;var Uh=function(e){function t(){return e.apply(this,arguments)||this}hd(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}($.Component),$h={},Zh=1e4,Hh=0;function Wh(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if($h[e])return $h[e];var t=Yd.compile(e);return Hh<Zh&&($h[e]=t,Hh++),t}(e)(t,{pretty:!0})}function qh(e){var t=e.computedMatch,n=e.to,r=e.push,i=void 0!==r&&r;return $.createElement(Fh.Consumer,null,(function(e){e||Ed(!1);var r=e.history,o=e.staticContext,a=i?r.push:r.replace,s=Id(t?"string"==typeof n?Wh(n,t.params):vd({},n,{pathname:Wh(n.pathname,t.params)}):n);return o?(a(s),null):$.createElement(Uh,{onMount:function(){a(s)},onUpdate:function(e,t){var n=Id(t.to);Od(n,vd({},s,{key:n.key}))||a(s)},to:n})}))}var Gh={},Kh=1e4,Yh=0;function Xh(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,l=n.sensitive,c=void 0!==l&&l;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=Gh[n]||(Gh[n]={});if(r[e])return r[e];var i=[],o={regexp:Yd(e,i,t),keys:i};return Yh<Kh&&(r[e]=o,Yh++),o}(n,{end:o,strict:s,sensitive:c}),i=r.regexp,a=r.keys,l=i.exec(e);if(!l)return null;var u=l[0],d=l.slice(1),h=e===u;return o&&!h?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:h,params:a.reduce((function(e,t,n){return e[t.name]=d[n],e}),{})}}),null)}var Jh=function(e){function t(){return e.apply(this,arguments)||this}return hd(t,e),t.prototype.render=function(){var e=this;return $.createElement(Fh.Consumer,null,(function(t){t||Ed(!1);var n=e.props.location||t.location,r=vd({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?Xh(n.pathname,e.props):t.match}),i=e.props,o=i.children,a=i.component,s=i.render;return Array.isArray(o)&&function(e){return 0===$.Children.count(e)}(o)&&(o=null),$.createElement(Fh.Provider,{value:r},r.match?o?"function"==typeof o?o(r):o:a?$.createElement(a,r):s?s(r):null:"function"==typeof o?o(r):null)}))},t}($.Component);$.Component,$.Component,$.useContext;const Qh=function(e,t,n){return e()},ep=!0,tp=!0,np=!0,rp=!1,ip=!1;let op,ap,sp,lp=!1,cp=!1,up=!1,dp=!1,hp=null,pp=!1;const fp=!0,mp="http://www.w3.org/1999/xlink",gp={},vp=e=>"object"==(e=typeof e)||"function"===e,yp=(e,t,...n)=>{let r=null,i=null,o=null,a=!1,s=!1;const l=[],c=t=>{for(let n=0;n<t.length;n++)r=t[n],Array.isArray(r)?c(r):null!=r&&"boolean"!=typeof r&&((a="function"!=typeof e&&!vp(r))&&(r=String(r)),a&&s?l[l.length-1].$text$+=r:l.push(a?bp(null,r):r),s=a)};if(c(n),t){t.key&&(i=t.key),t.name&&(o=t.name);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,l,wp);const u=bp(e,null);return u.$attrs$=t,l.length>0&&(u.$children$=l),u.$key$=i,u.$name$=o,u},bp=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return n},xp={},wp={forEach:(e,t)=>e.map(_p).forEach(t),map:(e,t)=>e.map(_p).map(t).map(kp)},_p=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),kp=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),yp(e.vtag,t,...e.vchildren||[])}const t=bp(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Ep=(e,t,n)=>{const r=e;return{emit:e=>Sp(r,t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e})}},Sp=(e,t,n)=>{const r=_f.ce(t,n);return e.dispatchEvent(r),r},Cp=new WeakMap,Tp=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,i=(t.$tagName$,()=>{}),o=((e,t,n,r)=>{var i;let o=Mp(t,n);const a=vf.get(o);if(e=11===e.nodeType?e:xf,a)if("string"==typeof a){e=e.head||e;let t,n=Cp.get(e);if(n||Cp.set(e,n=new Set),!n.has(o)){{t=xf.createElement("style"),t.innerHTML=a;const n=null!==(i=_f.$nonce$)&&void 0!==i?i:function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===n?void 0:n.getAttribute("content"))&&void 0!==r?r:void 0}(xf);null!=n&&t.setAttribute("nonce",n),e.insertBefore(t,e.querySelector("link"))}n&&n.add(o)}}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,a]);return o})(n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$);10&r&&(n["s-sc"]=o,n.classList.add(o+"-h"),2&r&&n.classList.add(o+"-s")),i()},Mp=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),Ip=(e,t,n,r,i,o)=>{if(n!==r){let a=mf(e,t),s=t.toLowerCase();if("class"===t){const t=e.classList,i=Ap(n),o=Ap(r);t.remove(...i.filter((e=>e&&!o.includes(e)))),t.add(...o.filter((e=>e&&!i.includes(e))))}else if("style"===t){for(const t in n)r&&null!=r[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in r)n&&r[t]===n[t]||(t.includes("-")?e.style.setProperty(t,r[t]):e.style[t]=r[t])}else if("key"===t);else if("ref"===t)r&&r(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=vp(r);if((a||l&&null!==r)&&!i)try{if(e.tagName.includes("-"))e[t]=r;else{const i=null==r?"":r;"list"===t?a=!1:null!=n&&e[t]==i||(e[t]=i)}}catch($A){}let c=!1;s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,c=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(mp,t):e.removeAttribute(t)):(!a||4&o||i)&&!l&&(r=!0===r?"":r,c?e.setAttributeNS(mp,t,r):e.setAttribute(t,r))}else t="-"===t[2]?t.slice(3):mf(bf,s)?s.slice(2):s[2]+t.slice(3),n&&_f.rel(e,t,n,!1),r&&_f.ael(e,t,r,!1)}},Op=/\s/,Ap=e=>e?e.split(Op):[],Pp=(e,t,n,r)=>{const i=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||gp,a=t.$attrs$||gp;for(r in o)r in a||Ip(i,r,o[r],void 0,n,t.$flags$);for(r in a)Ip(i,r,o[r],a[r],n,t.$flags$)},Dp=(e,t,n,r)=>{const i=t.$children$[n];let o,a,s,l=0;if(lp||(up=!0,"slot"===i.$tag$&&(op&&r.classList.add(op+"-s"),i.$flags$|=i.$children$?2:1)),null!==i.$text$)o=i.$elm$=xf.createTextNode(i.$text$);else if(1&i.$flags$)o=i.$elm$=xf.createTextNode("");else{if(dp||(dp="svg"===i.$tag$),o=i.$elm$=xf.createElementNS(dp?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&i.$flags$?"slot-fb":i.$tag$),dp&&"foreignObject"===i.$tag$&&(dp=!1),Pp(null,i,dp),(e=>null!=e)(op)&&o["s-si"]!==op&&o.classList.add(o["s-si"]=op),i.$children$)for(l=0;l<i.$children$.length;++l)a=Dp(e,i,l,o),a&&o.appendChild(a);"svg"===i.$tag$?dp=!1:"foreignObject"===o.tagName&&(dp=!0)}return o["s-hn"]=sp,3&i.$flags$&&(o["s-sr"]=!0,o["s-cr"]=ap,o["s-sn"]=i.$name$||"",s=e&&e.$children$&&e.$children$[n],s&&s.$tag$===i.$tag$&&e.$elm$&&Lp(e.$elm$,!1)),o},Lp=(e,t)=>{_f.$flags$|=1;const n=e.childNodes;for(let r=n.length-1;r>=0;r--){const e=n[r];e["s-hn"]!==sp&&e["s-ol"]&&(Bp(e).insertBefore(e,Np(e)),e["s-ol"].remove(),e["s-ol"]=void 0,up=!0),t&&Lp(e,t)}_f.$flags$&=-2},Rp=(e,t,n,r,i,o)=>{let a,s=e["s-cr"]&&e["s-cr"].parentNode||e;for(s.shadowRoot&&s.tagName===sp&&(s=s.shadowRoot);i<=o;++i)r[i]&&(a=Dp(null,n,i,e),a&&(r[i].$elm$=a,s.insertBefore(a,Np(t))))},zp=(e,t,n)=>{for(let r=t;r<=n;++r){const t=e[r];if(t){const e=t.$elm$;Hp(t),e&&(cp=!0,e["s-ol"]?e["s-ol"].remove():Lp(e,!0),e.remove())}}},jp=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),Np=e=>e&&e["s-ol"]||e,Bp=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Fp=(e,t)=>{const n=t.$elm$=e.$elm$,r=e.$children$,i=t.$children$,o=t.$tag$,a=t.$text$;let s;null===a?(dp="svg"===o||"foreignObject"!==o&&dp,"slot"===o||Pp(e,t,dp),null!==r&&null!==i?((e,t,n,r)=>{let i,o,a=0,s=0,l=0,c=0,u=t.length-1,d=t[0],h=t[u],p=r.length-1,f=r[0],m=r[p];for(;a<=u&&s<=p;)if(null==d)d=t[++a];else if(null==h)h=t[--u];else if(null==f)f=r[++s];else if(null==m)m=r[--p];else if(jp(d,f))Fp(d,f),d=t[++a],f=r[++s];else if(jp(h,m))Fp(h,m),h=t[--u],m=r[--p];else if(jp(d,m))"slot"!==d.$tag$&&"slot"!==m.$tag$||Lp(d.$elm$.parentNode,!1),Fp(d,m),e.insertBefore(d.$elm$,h.$elm$.nextSibling),d=t[++a],m=r[--p];else if(jp(h,f))"slot"!==d.$tag$&&"slot"!==m.$tag$||Lp(h.$elm$.parentNode,!1),Fp(h,f),e.insertBefore(h.$elm$,d.$elm$),h=t[--u],f=r[++s];else{for(l=-1,c=a;c<=u;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===f.$key$){l=c;break}l>=0?(o=t[l],o.$tag$!==f.$tag$?i=Dp(t&&t[s],n,l,e):(Fp(o,f),t[l]=void 0,i=o.$elm$),f=r[++s]):(i=Dp(t&&t[s],n,s,e),f=r[++s]),i&&Bp(d.$elm$).insertBefore(i,Np(d.$elm$))}a>u?Rp(e,null==r[p+1]?null:r[p+1].$elm$,n,r,s,p):s>p&&zp(t,a,u)})(n,r,t,i):null!==i?(null!==e.$text$&&(n.textContent=""),Rp(n,null,t,i,0,i.length-1)):null!==r&&zp(r,0,r.length-1),dp&&"svg"===o&&(dp=!1)):(s=n["s-cr"])?s.parentNode.textContent=a:e.$text$!==a&&(n.data=a)},Vp=e=>{const t=e.childNodes;let n,r,i,o,a,s;for(r=0,i=t.length;r<i;r++)if(n=t[r],1===n.nodeType){if(n["s-sr"])for(a=n["s-sn"],n.hidden=!1,o=0;o<i;o++)if(s=t[o].nodeType,t[o]["s-hn"]!==n["s-hn"]||""!==a){if(1===s&&a===t[o].getAttribute("slot")){n.hidden=!0;break}}else if(1===s||3===s&&""!==t[o].textContent.trim()){n.hidden=!0;break}Vp(n)}},Up=[],$p=e=>{let t,n,r,i,o,a,s=0;const l=e.childNodes,c=l.length;for(;s<c;s++){if(t=l[s],t["s-sr"]&&(n=t["s-cr"])&&n.parentNode)for(r=n.parentNode.childNodes,i=t["s-sn"],a=r.length-1;a>=0;a--)n=r[a],n["s-cn"]||n["s-nr"]||n["s-hn"]===t["s-hn"]||(Zp(n,i)?(o=Up.find((e=>e.$nodeToRelocate$===n)),cp=!0,n["s-sn"]=n["s-sn"]||i,o?o.$slotRefNode$=t:Up.push({$slotRefNode$:t,$nodeToRelocate$:n}),n["s-sr"]&&Up.map((e=>{Zp(e.$nodeToRelocate$,n["s-sn"])&&(o=Up.find((e=>e.$nodeToRelocate$===n)),o&&!e.$slotRefNode$&&(e.$slotRefNode$=o.$slotRefNode$))}))):Up.some((e=>e.$nodeToRelocate$===n))||Up.push({$nodeToRelocate$:n}));1===t.nodeType&&$p(t)}},Zp=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,Hp=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Hp)},Wp=(e,t)=>{const n=e.$hostElement$,r=e.$cmpMeta$,i=e.$vnode$||bp(null,null),o=(a=t)&&a.$tag$===xp?t:yp(null,null,t);var a;if(sp=n.tagName,r.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},r.$attrsToReflect$.map((([e,t])=>o.$attrs$[t]=n[e]))),o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=i.$elm$=n.shadowRoot||n,op=n["s-sc"],ap=n["s-cr"],lp=0!=(1&r.$flags$),cp=!1,Fp(i,o),_f.$flags$|=1,up){let e,t,n,r,i,a;$p(o.$elm$);let s=0;for(;s<Up.length;s++)e=Up[s],t=e.$nodeToRelocate$,t["s-ol"]||(n=xf.createTextNode(""),n["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=n,t));for(s=0;s<Up.length;s++)if(e=Up[s],t=e.$nodeToRelocate$,e.$slotRefNode$){for(r=e.$slotRefNode$.parentNode,i=e.$slotRefNode$.nextSibling,n=t["s-ol"];n=n.previousSibling;)if(a=n["s-nr"],a&&a["s-sn"]===t["s-sn"]&&r===a.parentNode&&(a=a.nextSibling,!a||!a["s-nr"])){i=a;break}(!i&&r!==t.parentNode||t.nextSibling!==i)&&t!==i&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),r.insertBefore(t,i))}else 1===t.nodeType&&(t.hidden=!0)}cp&&Vp(o.$elm$),_f.$flags$&=-2,Up.length=0},qp=(e,t)=>(e.$flags$|=16,e.$ancestorComponent$,Pf((()=>Gp(e,t)))),Gp=(e,t)=>{const n=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{}),i=n;let o;return o=tf(i,t?"componentWillLoad":"componentWillUpdate"),o=Kp(o,(()=>tf(i,"componentWillRender"))),r(),Kp(o,(()=>Xp(e,i,t)))},Kp=(e,t)=>Yp(e)?e.then(t):t(),Yp=e=>e instanceof Promise||e&&e.then&&"function"==typeof e.then,Xp=async(e,t,n)=>{const r=e.$hostElement$,i=(e.$cmpMeta$.$tagName$,()=>{});r["s-rc"],n&&Tp(e);const o=(e.$cmpMeta$.$tagName$,()=>{});Jp(e,t,r),o(),i(),Qp(e)},Jp=(e,t,n)=>{try{hp=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(ep||tp)&&(np||tp)&&(rp||Wp(e,t))}catch($A){gf($A,e.$hostElement$)}return hp=null,null},Qp=e=>{e.$cmpMeta$.$tagName$;const t=()=>{},n=e.$hostElement$;e.$ancestorComponent$,tf(n,"componentDidRender"),64&e.$flags$?(tf(n,"componentDidUpdate"),t()):(e.$flags$|=64,tf(n,"componentDidLoad"),t())},ef=e=>{{const t=pf(e),n=t.$hostElement$.isConnected;return n&&2==(18&t.$flags$)&&qp(t,!1),n}},tf=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch($A){gf($A)}},nf=(e,t,n,r)=>{const i=pf(e),o=e,a=i.$instanceValues$.get(t),s=i.$flags$,l=o;var c,u;c=n,u=r.$members$[t][0],n=null==c||vp(c)?c:4&u?"false"!==c&&(""===c||!!c):2&u?parseFloat(c):1&u?String(c):c;const d=Number.isNaN(a)&&Number.isNaN(n);if(n!==a&&!d){if(i.$instanceValues$.set(t,n),r.$watchers$&&128&s){const e=r.$watchers$[t];e&&e.map((e=>{try{l[e](n,a,t)}catch($A){gf($A,o)}}))}if(2==(18&s)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(n,a,t))return;qp(i,!1)}}},rf=(e,t,n)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const n=Object.entries(t.$members$),r=e.prototype;n.map((([e,[n]])=>{(31&n||32&n)&&Object.defineProperty(r,e,{get(){return t=e,pf(this).$instanceValues$.get(t);var t},set(n){nf(this,e,n,t)},configurable:!0,enumerable:!0})}));{const i=new Map;r.attributeChangedCallback=function(e,t,n){_f.jmp((()=>{const t=i.get(e);if(this.hasOwnProperty(t))n=this[t],delete this[t];else if(r.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==n)return;this[t]=(null!==n||"boolean"!=typeof this[t])&&n}))},e.observedAttributes=n.filter((([e,t])=>15&t[0])).map((([e,n])=>{const r=n[1]||e;return i.set(r,e),512&n[0]&&t.$attrsToReflect$.push([e,r]),r}))}}return e},of=async(e,t,n,r,i)=>{if(0==(32&t.$flags$)&&(t.$flags$|=32,i=e.constructor,customElements.whenDefined(n.$tagName$).then((()=>t.$flags$|=128)),i.style)){let r=i.style;"string"!=typeof r&&(r=r[t.$modeName$=(e=>yf.map((t=>t(e))).find((e=>!!e)))(e)]);const o=Mp(n,t.$modeName$);if(!vf.has(o)){const e=(n.$tagName$,()=>{});((e,t,n)=>{let r=vf.get(e);Ef&&n?(r=r||new CSSStyleSheet,"string"==typeof r?r=t:r.replaceSync(t)):r=t,vf.set(e,r)})(o,r,!!(1&n.$flags$)),e()}}t.$ancestorComponent$,qp(t,!0)},af=e=>{const t=e["s-cr"]=xf.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},sf=(e,t)=>{const n={$flags$:t[0],$tagName$:t[1]};n.$members$=t[2],n.$listeners$=t[3],n.$watchers$=e.$watchers$,n.$attrsToReflect$=[];const r=e.prototype.connectedCallback,i=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){ff(this,n)},connectedCallback(){(e=>{if(0==(1&_f.$flags$)){const t=pf(e),n=t.$cmpMeta$,r=(n.$tagName$,()=>{});1&t.$flags$?(lf(e,t,n.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&n.$flags$&&af(e),n.$members$&&Object.entries(n.$members$).map((([t,[n]])=>{if(31&n&&e.hasOwnProperty(t)){const n=e[t];delete e[t],e[t]=n}})),of(e,t,n)),r()}})(this),r&&r.call(this)},disconnectedCallback(){(e=>{if(0==(1&_f.$flags$)){const t=pf(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),i&&i.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&n.$flags$)})}}),e.is=n.$tagName$,rf(e,n)},lf=(e,t,n,r)=>{n&&n.map((([n,r,i])=>{const o=uf(e,n),a=cf(t,i),s=df(n);_f.ael(o,r,a,s),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>_f.rel(o,r,a,s)))}))},cf=(e,t)=>n=>{try{ip||e.$hostElement$[t](n)}catch($A){gf($A)}},uf=(e,t)=>4&t?xf:8&t?bf:16&t?xf.body:e,df=e=>kf?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),hf=new WeakMap,pf=e=>hf.get(e),ff=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return lf(e,n,t.$listeners$),hf.set(e,n)},mf=(e,t)=>t in e,gf=(e,t)=>(0,console.error)(e,t),vf=new Map,yf=[],bf="undefined"!=typeof window?window:{},xf=bf.document||{head:{}},wf=bf.HTMLElement||class{},_f={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},kf=(()=>{let e=!1;try{xf.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch($A){}return e})(),Ef=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch($A){}return!1})(),Sf=[],Cf=[],Tf=(e,t)=>n=>{e.push(n),pp||(pp=!0,t&&4&_f.$flags$?Of(If):_f.raf(If))},Mf=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch($A){gf($A)}e.length=0},If=()=>{Mf(Sf),Mf(Cf),(pp=Sf.length>0)&&_f.raf(If)},Of=e=>(e=>Promise.resolve(e))().then(e),Af=e("r",Tf(Sf,!1)),Pf=e("w",Tf(Cf,!0)),Df="undefined"!=typeof window?window:void 0,Lf="undefined"!=typeof document?document:void 0,Rf=e("b",((e,t)=>{e.componentOnReady?e.componentOnReady().then((e=>t(e))):$f((()=>t(e)))})),zf=e=>void 0!==e.componentOnReady,jf=(e,t=[])=>{const n={};return t.forEach((t=>{e.hasAttribute(t)&&(null!==e.getAttribute(t)&&(n[t]=e.getAttribute(t)),e.removeAttribute(t))})),n},Nf=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Bf=(e,t)=>{let n=Nf;return t&&t.length>0&&(n=n.filter((e=>!t.includes(e)))),jf(e,n)},Ff=e("d",((e,t,n,r)=>{var i;if("undefined"!=typeof window){const o=window,a=null===(i=null==o?void 0:o.Ionic)||void 0===i?void 0:i.config;if(a){const i=a.get("_ael");if(i)return i(e,t,n,r);if(a._ael)return a._ael(e,t,n,r)}}return e.addEventListener(t,n,r)})),Vf=e("e",((e,t,n,r)=>{var i;if("undefined"!=typeof window){const o=window,a=null===(i=null==o?void 0:o.Ionic)||void 0===i?void 0:i.config;if(a){const i=a.get("_rel");if(i)return i(e,t,n,r);if(a._rel)return a._rel(e,t,n,r)}}return e.removeEventListener(t,n,r)})),Uf=(e,t=e)=>e.shadowRoot||t,$f=e("h",(e=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(e):"function"==typeof requestAnimationFrame?requestAnimationFrame(e):setTimeout(e))),Zf=e=>{const t=e.closest("ion-item");return t?t.querySelector("ion-label"):null},Hf=e("a",((e,t,n)=>Math.max(e,Math.min(t,n)))),Wf=(e,t)=>{if(!e){const e="ASSERT: "+t;throw console.error(e),new Error(e)}},qf=(e("n",(e=>e.timeStamp||Date.now())),e("p",(e=>{if(e){const t=e.changedTouches;if(t&&t.length>0){const e=t[0];return{x:e.clientX,y:e.clientY}}if(void 0!==e.pageX)return{x:e.pageX,y:e.pageY}}return{x:0,y:0}})),(e,t)=>{const n=e._original||e;return{_original:e,emit:Gf(n.emit.bind(n),t)}}),Gf=(e,t=0)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(e,t,...r)}},Kf=(e,t)=>{if(null!=e||(e={}),null!=t||(t={}),e===t)return!0;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n){if(!(r in t))return!1;if(e[r]!==t[r])return!1}return!0};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
let Yf;const Xf=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Jf=e=>{if(void 0===Yf){const t=void 0!==e.style.animationName,n=void 0!==e.style.webkitAnimationName;Yf=!t&&n?"-webkit-":""}return Yf},Qf=(e,t,n)=>{const r=t.startsWith("animation")?Jf(e):"";e.style.setProperty(r+t,n)},em=(e,t)=>{const n=t.startsWith("animation")?Jf(e):"";e.style.removeProperty(n+t)},tm=[],nm=(e=[],t)=>{if(void 0!==t){const n=Array.isArray(t)?t:[t];return[...e,...n]}return e},rm=e("l",(e=>{let t,n,r,i,o,a,s,l,c,u,d,h,p,f=[],m=[],g=[],v=!1,y={},b=[],x=[],w={},_=0,k=!1,E=!1,S=!0,C=!1,T=!0,M=!1;const I=e,O=[],A=[],P=[],D=[],L=[],R=[],z=[],j=[],N=[],B=[],F="function"==typeof AnimationEffect||void 0!==Df&&"function"==typeof Df.AnimationEffect,V="function"==typeof Element&&"function"==typeof Element.prototype.animate&&F,U=()=>B,$=e=>{W(),e&&q()},Z=(e,t)=>(((null==t?void 0:t.oneTimeCallback)?A:O).push({c:e,o:t}),p),H=()=>(O.length=0,A.length=0,p),W=()=>{if(V)B.forEach((e=>{e.cancel()})),B.length=0;else{const e=P.slice();$f((()=>{e.forEach((e=>{em(e,"animation-name"),em(e,"animation-duration"),em(e,"animation-timing-function"),em(e,"animation-iteration-count"),em(e,"animation-delay"),em(e,"animation-play-state"),em(e,"animation-fill-mode"),em(e,"animation-direction")}))}))}},q=()=>{L.forEach((e=>{(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e)})),L.length=0},G=()=>void 0!==o?o:s?s.getFill():"both",K=()=>void 0!==c?c:void 0!==a?a:s?s.getDirection():"normal",Y=()=>k?"linear":void 0!==r?r:s?s.getEasing():"linear",X=()=>E?0:void 0!==u?u:void 0!==n?n:s?s.getDuration():0,J=()=>void 0!==i?i:s?s.getIterations():1,Q=()=>void 0!==d?d:void 0!==t?t:s?s.getDelay():0,ee=e=>{V?U().forEach((t=>{if(t.effect.setKeyframes)t.effect.setKeyframes(e);else{const n=new KeyframeEffect(t.effect.target,e,t.effect.getTiming());t.effect=n}})):ne()},te=()=>{0!==_&&(_--,0===_&&((()=>{ue(),j.forEach((e=>e())),N.forEach((e=>e()));const e=S?1:0,t=b,n=x,r=w;P.forEach((e=>{const i=e.classList;t.forEach((e=>i.add(e))),n.forEach((e=>i.remove(e)));for(const t in r)r.hasOwnProperty(t)&&Qf(e,t,r[t])})),O.forEach((t=>t.c(e,p))),A.forEach((t=>t.c(e,p))),A.length=0,T=!0,S&&(C=!0),S=!0})(),s&&s.animationFinish()))},ne=(t=!0)=>{q();const n=(e=>(e.forEach((e=>{for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];if("easing"===t)e["animation-timing-function"]=n,delete e[t];else{const r=Xf(t);r!==t&&(e[r]=n,delete e[t])}}})),e))(f);P.forEach((r=>{if(n.length>0){const i=((e=[])=>e.map((e=>{const t=e.offset,n=[];for(const r in e)e.hasOwnProperty(r)&&"offset"!==r&&n.push(`${r}: ${e[r]};`);return`${100*t}% { ${n.join(" ")} }`})).join(" "))(n);h=void 0!==e?e:(e=>{let t=tm.indexOf(e);return t<0&&(t=tm.push(e)-1),`ion-animation-${t}`})(i);const o=((e,t,n)=>{var r;const i=(e=>{const t=void 0!==e.getRootNode?e.getRootNode():e;return t.head||t})(n),o=Jf(n),a=i.querySelector("#"+e);if(a)return a;const s=(null!==(r=n.ownerDocument)&&void 0!==r?r:document).createElement("style");return s.id=e,s.textContent=`@${o}keyframes ${e} { ${t} } @${o}keyframes ${e}-alt { ${t} }`,i.appendChild(s),s})(h,i,r);L.push(o),Qf(r,"animation-duration",`${X()}ms`),Qf(r,"animation-timing-function",Y()),Qf(r,"animation-delay",`${Q()}ms`),Qf(r,"animation-fill-mode",G()),Qf(r,"animation-direction",K());const a=J()===1/0?"infinite":J().toString();Qf(r,"animation-iteration-count",a),Qf(r,"animation-play-state","paused"),t&&Qf(r,"animation-name",`${o.id}-alt`),$f((()=>{Qf(r,"animation-name",o.id||null)}))}}))},re=(e=!0)=>{(()=>{R.forEach((e=>e())),z.forEach((e=>e()));const e=m,t=g,n=y;P.forEach((r=>{const i=r.classList;e.forEach((e=>i.add(e))),t.forEach((e=>i.remove(e)));for(const e in n)n.hasOwnProperty(e)&&Qf(r,e,n[e])}))})(),f.length>0&&(V?(P.forEach((e=>{const t=e.animate(f,{id:I,delay:Q(),duration:X(),easing:Y(),iterations:J(),fill:G(),direction:K()});t.pause(),B.push(t)})),B.length>0&&(B[0].onfinish=()=>{te()})):ne(e)),v=!0},ie=e=>{if(e=Math.min(Math.max(e,0),.9999),V)B.forEach((t=>{t.currentTime=t.effect.getComputedTiming().delay+X()*e,t.pause()}));else{const t=`-${X()*e}ms`;P.forEach((e=>{f.length>0&&(Qf(e,"animation-delay",t),Qf(e,"animation-play-state","paused"))}))}},oe=e=>{B.forEach((e=>{e.effect.updateTiming({delay:Q(),duration:X(),easing:Y(),iterations:J(),fill:G(),direction:K()})})),void 0!==e&&ie(e)},ae=(e=!0,t)=>{$f((()=>{P.forEach((n=>{Qf(n,"animation-name",h||null),Qf(n,"animation-duration",`${X()}ms`),Qf(n,"animation-timing-function",Y()),Qf(n,"animation-delay",void 0!==t?`-${t*X()}ms`:`${Q()}ms`),Qf(n,"animation-fill-mode",G()||null),Qf(n,"animation-direction",K()||null);const r=J()===1/0?"infinite":J().toString();Qf(n,"animation-iteration-count",r),e&&Qf(n,"animation-name",`${h}-alt`),$f((()=>{Qf(n,"animation-name",h||null)}))}))}))},se=(e=!1,t=!0,n)=>(e&&D.forEach((r=>{r.update(e,t,n)})),V?oe(n):ae(t,n),p),le=()=>{v&&(V?B.forEach((e=>{e.pause()})):P.forEach((e=>{Qf(e,"animation-play-state","paused")})),M=!0)},ce=()=>{l=void 0,te()},ue=()=>{l&&clearTimeout(l)},de=()=>{P.forEach((e=>{em(e,"animation-duration"),em(e,"animation-delay"),em(e,"animation-play-state")}))},he=e=>new Promise((t=>{(null==e?void 0:e.sync)&&(E=!0,Z((()=>E=!1),{oneTimeCallback:!0})),v||re(),C&&(V?(ie(0),oe()):ae(),C=!1),T&&(_=D.length+1,T=!1),Z((()=>t()),{oneTimeCallback:!0}),D.forEach((e=>{e.play()})),V?(B.forEach((e=>{e.play()})),0!==f.length&&0!==P.length||te()):(()=>{if(ue(),$f((()=>{P.forEach((e=>{f.length>0&&Qf(e,"animation-play-state","running")}))})),0===f.length||0===P.length)te();else{const e=Q()||0,t=X()||0,n=J()||1;isFinite(n)&&(l=setTimeout(ce,e+t*n+100)),((e,t)=>{let n;const r={passive:!0},i=()=>{n&&n()},o=n=>{e===n.target&&(i(),t(n))};e&&(e.addEventListener("webkitAnimationEnd",o,r),e.addEventListener("animationend",o,r),n=()=>{e.removeEventListener("webkitAnimationEnd",o,r),e.removeEventListener("animationend",o,r)})})(P[0],(()=>{ue(),$f((()=>{de(),$f(te)}))}))}})(),M=!1})),pe=(e,t)=>{const n=f[0];return void 0===n||void 0!==n.offset&&0!==n.offset?f=[{offset:0,[e]:t},...f]:n[e]=t,p};return p={parentAnimation:s,elements:P,childAnimations:D,id:I,animationFinish:te,from:pe,to:(e,t)=>{const n=f[f.length-1];return void 0===n||void 0!==n.offset&&1!==n.offset?f=[...f,{offset:1,[e]:t}]:n[e]=t,p},fromTo:(e,t,n)=>pe(e,t).to(e,n),parent:e=>(s=e,p),play:he,pause:()=>(D.forEach((e=>{e.pause()})),le(),p),stop:()=>{D.forEach((e=>{e.stop()})),v&&(W(),v=!1),k=!1,E=!1,T=!0,c=void 0,u=void 0,d=void 0,_=0,C=!1,S=!0,M=!1},destroy:e=>(D.forEach((t=>{t.destroy(e)})),$(e),P.length=0,D.length=0,f.length=0,H(),v=!1,T=!0,p),keyframes:e=>{const t=f!==e;return f=e,t&&ee(f),p},addAnimation:e=>{if(null!=e)if(Array.isArray(e))for(const t of e)t.parent(p),D.push(t);else e.parent(p),D.push(e);return p},addElement:e=>{if(null!=e)if(1===e.nodeType)P.push(e);else if(e.length>=0)for(let t=0;t<e.length;t++)P.push(e[t]);else console.error("Invalid addElement value");return p},update:se,fill:e=>(o=e,se(!0),p),direction:e=>(a=e,se(!0),p),iterations:e=>(i=e,se(!0),p),duration:e=>(V||0!==e||(e=1),n=e,se(!0),p),easing:e=>(r=e,se(!0),p),delay:e=>(t=e,se(!0),p),getWebAnimations:U,getKeyframes:()=>f,getFill:G,getDirection:K,getDelay:Q,getIterations:J,getEasing:Y,getDuration:X,afterAddRead:e=>(j.push(e),p),afterAddWrite:e=>(N.push(e),p),afterClearStyles:(e=[])=>{for(const t of e)w[t]="";return p},afterStyles:(e={})=>(w=e,p),afterRemoveClass:e=>(x=nm(x,e),p),afterAddClass:e=>(b=nm(b,e),p),beforeAddRead:e=>(R.push(e),p),beforeAddWrite:e=>(z.push(e),p),beforeClearStyles:(e=[])=>{for(const t of e)y[t]="";return p},beforeStyles:(e={})=>(y=e,p),beforeRemoveClass:e=>(g=nm(g,e),p),beforeAddClass:e=>(m=nm(m,e),p),onFinish:Z,isRunning:()=>0!==_&&!M,progressStart:(e=!1,t)=>(D.forEach((n=>{n.progressStart(e,t)})),le(),k=e,v||re(),se(!1,!0,t),p),progressStep:e=>(D.forEach((t=>{t.progressStep(e)})),ie(e),p),progressEnd:(e,t,n)=>(k=!1,D.forEach((r=>{r.progressEnd(e,t,n)})),void 0!==n&&(u=n),C=!1,S=!0,0===e?(c="reverse"===K()?"normal":"reverse","reverse"===c&&(S=!1),V?(se(),ie(1-t)):(d=(1-t)*X()*-1,se(!1,!1))):1===e&&(V?(se(),ie(t)):(d=t*X()*-1,se(!1,!1))),void 0!==e&&(Z((()=>{u=void 0,c=void 0,d=void 0}),{oneTimeCallback:!0}),s||he()),p)}})),im="ionViewWillLeave",om="ionViewDidLeave",am="ionViewWillUnload",sm=e=>new Promise(((t,n)=>{Pf((()=>{lm(e),cm(e).then((n=>{n.animation&&n.animation.destroy(),um(e),t(n)}),(t=>{um(e),n(t)}))}))})),lm=e=>{const t=e.enteringEl,n=e.leavingEl;_m(t,n,e.direction),e.showGoBack?t.classList.add("can-go-back"):t.classList.remove("can-go-back"),wm(t,!1),t.style.setProperty("pointer-events","none"),n&&(wm(n,!1),n.style.setProperty("pointer-events","none"))},cm=async e=>{const t=await dm(e);return t&&fp?hm(t,e):pm(e)},um=e=>{const t=e.enteringEl,n=e.leavingEl;t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events"),void 0!==n&&(n.classList.remove("ion-page-invisible"),n.style.removeProperty("pointer-events"))},dm=async e=>{if(e.leavingEl&&e.animated&&0!==e.duration)return e.animationBuilder?e.animationBuilder:"ios"===e.mode?(await Qh((()=>t.import("./ios.transition-legacy-2b0c2859.js")))).iosTransitionAnimation:(await Qh((()=>t.import("./md.transition-legacy-0ea04f61.js")))).mdTransitionAnimation},hm=async(e,t)=>{await fm(t,!0);const n=e(t.baseEl,t);vm(t.enteringEl,t.leavingEl);const r=await gm(n,t);return t.progressCallback&&t.progressCallback(void 0),r&&ym(t.enteringEl,t.leavingEl),{hasCompleted:r,animation:n}},pm=async e=>{const t=e.enteringEl,n=e.leavingEl;return await fm(e,!1),vm(t,n),ym(t,n),{hasCompleted:!0}},fm=async(e,t)=>{(void 0!==e.deepWait?e.deepWait:t)&&await Promise.all([xm(e.enteringEl),xm(e.leavingEl)]),await mm(e.viewIsReady,e.enteringEl)},mm=async(e,t)=>{e&&await e(t)},gm=(e,t)=>{const n=t.progressCallback,r=new Promise((t=>{e.onFinish((e=>t(1===e)))}));return n?(e.progressStart(!0),n(e)):e.play(),r},vm=(e,t)=>{bm(t,im),bm(e,"ionViewWillEnter")},ym=(e,t)=>{bm(e,"ionViewDidEnter"),bm(t,om)},bm=(e,t)=>{if(e){const n=new CustomEvent(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}},xm=async e=>{const t=e;if(t){if(null!=t.componentOnReady){if(null!=await t.componentOnReady())return}else if(null!=t.__registerHost){const e=new Promise((e=>$f(e)));return void(await e)}await Promise.all(Array.from(t.children).map(xm))}},wm=(e,t)=>{t?(e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")):(e.hidden=!1,e.removeAttribute("aria-hidden"),e.classList.remove("ion-page-hidden"))},_m=(e,t,n)=>{void 0!==e&&(e.style.zIndex="back"===n?"99":"101"),void 0!==t&&(t.style.zIndex="100")},km=(e("m",(e=>{if(e.classList.contains("ion-page"))return e;const t=e.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return t||e})),(e,t,n,r,i)=>Sm(e[1],t[1],n[1],r[1],i).map((i=>Em(e[0],t[0],n[0],r[0],i)))),Em=(e,t,n,r,i)=>i*(3*t*Math.pow(i-1,2)+i*(-3*n*i+3*n+r*i))-e*Math.pow(i-1,3),Sm=(e,t,n,r,i)=>Cm((r-=i)-3*(n-=i)+3*(t-=i)-(e-=i),3*n-6*t+3*e,3*t-3*e,e).filter((e=>e>=0&&e<=1)),Cm=(e,t,n,r)=>{if(0===e)return((e,t,n)=>{const r=t*t-4*e*n;return r<0?[]:[(-t+Math.sqrt(r))/(2*e),(-t-Math.sqrt(r))/(2*e)]})(t,n,r);const i=(3*(n/=e)-(t/=e)*t)/3,o=(2*t*t*t-9*t*n+27*(r/=e))/27;if(0===i)return[Math.pow(-o,1/3)];if(0===o)return[Math.sqrt(-i),-Math.sqrt(-i)];const a=Math.pow(o/2,2)+Math.pow(i/3,3);if(0===a)return[Math.pow(o/2,.5)-t/3];if(a>0)return[Math.pow(-o/2+Math.sqrt(a),1/3)-Math.pow(o/2+Math.sqrt(a),1/3)-t/3];const s=Math.sqrt(Math.pow(-i/3,3)),l=Math.acos(-o/(2*Math.sqrt(Math.pow(-i/3,3)))),c=2*Math.pow(s,1/3);return[c*Math.cos(l/3)-t/3,c*Math.cos((l+2*Math.PI)/3)-t/3,c*Math.cos((l+4*Math.PI)/3)-t/3]};class Tm{constructor(e,t,n,r,i){this.id=t,this.name=n,this.disableScroll=i,this.priority=1e6*r+t,this.ctrl=e}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const e=this.ctrl.capture(this.name,this.id,this.priority);return e&&this.disableScroll&&this.ctrl.disableScroll(this.id),e}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Mm{constructor(e,t,n,r){this.id=t,this.disable=n,this.disableScroll=r,this.ctrl=e}block(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.disableGesture(e,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.enableGesture(e,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Im="backdrop-no-scroll",Om=new
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
class{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(e){var t;return new Tm(this,this.newID(),e.name,null!==(t=e.priority)&&void 0!==t?t:0,!!e.disableScroll)}createBlocker(e={}){return new Mm(this,this.newID(),e.disable,!!e.disableScroll)}start(e,t,n){return this.canStart(e)?(this.requestedStart.set(t,n),!0):(this.requestedStart.delete(t),!1)}capture(e,t,n){if(!this.start(e,t,n))return!1;const r=this.requestedStart;let i=-1e4;if(r.forEach((e=>{i=Math.max(i,e)})),i===n){this.capturedId=t,r.clear();const n=new CustomEvent("ionGestureCaptured",{detail:{gestureName:e}});return document.dispatchEvent(n),!0}return r.delete(t),!1}release(e){this.requestedStart.delete(e),this.capturedId===e&&(this.capturedId=void 0)}disableGesture(e,t){let n=this.disabledGestures.get(e);void 0===n&&(n=new Set,this.disabledGestures.set(e,n)),n.add(t)}enableGesture(e,t){const n=this.disabledGestures.get(e);void 0!==n&&n.delete(t)}disableScroll(e){this.disabledScroll.add(e),1===this.disabledScroll.size&&document.body.classList.add(Im)}enableScroll(e){this.disabledScroll.delete(e),0===this.disabledScroll.size&&document.body.classList.remove(Im)}canStart(e){return void 0===this.capturedId&&!this.isDisabled(e)}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(e){const t=this.disabledGestures.get(e);return!!(t&&t.size>0)}newID(){return this.gestureId++,this.gestureId}},Am=(e,t,n,r)=>{const i=Pm(e)?{capture:!!r.capture,passive:!!r.passive}:!!r.capture;let o,a;return e.__zone_symbol__addEventListener?(o="__zone_symbol__addEventListener",a="__zone_symbol__removeEventListener"):(o="addEventListener",a="removeEventListener"),e[o](t,n,i),()=>{e[a](t,n,i)}},Pm=e=>{if(void 0===Dm)try{const t=Object.defineProperty({},"passive",{get:()=>{Dm=!0}});e.addEventListener("optsTest",(()=>{}),t)}catch($A){Dm=!1}return!!Dm};let Dm;const Lm=e=>e instanceof Document?e:e.ownerDocument,Rm=e("c",(e=>{let t=!1,n=!1,r=!0,i=!1;const o=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},e),a=o.canStart,s=o.onWillStart,l=o.onStart,c=o.onEnd,u=o.notCaptured,d=o.onMove,h=o.threshold,p=o.passive,f=o.blurOnStart,m={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},g=((e,t,n)=>{const r=n*(Math.PI/180),i="x"===e,o=Math.cos(r),a=t*t;let s=0,l=0,c=!1,u=0;return{start(e,t){s=e,l=t,u=0,c=!0},detect(e,t){if(!c)return!1;const n=e-s,r=t-l,d=n*n+r*r;if(d<a)return!1;const h=Math.sqrt(d),p=(i?n:r)/h;return u=p>o?1:p<-o?-1:0,c=!1,!0},isGesture:()=>0!==u,getDirection:()=>u}})(o.direction,o.threshold,o.maxAngle),v=Om.createGesture({name:e.gestureName,priority:e.gesturePriority,disableScroll:e.disableScroll}),y=()=>{t&&(i=!1,d&&d(m))},b=()=>!!v.capture()&&(t=!0,r=!1,m.startX=m.currentX,m.startY=m.currentY,m.startTime=m.currentTime,s?s(m).then(x):x(),!0),x=()=>{f&&(()=>{if("undefined"!=typeof document){const e=document.activeElement;(null==e?void 0:e.blur)&&e.blur()}})(),l&&l(m),r=!0},w=()=>{t=!1,n=!1,i=!1,r=!0,v.release()},_=e=>{const n=t,i=r;w(),i&&(zm(m,e),n?c&&c(m):u&&u(m))},k=((e,t,n,r,i)=>{let o,a,s,l,c,u,d,h=0;const p=r=>{h=Date.now()+2e3,t(r)&&(!a&&n&&(a=Am(e,"touchmove",n,i)),s||(s=Am(r.target,"touchend",m,i)),l||(l=Am(r.target,"touchcancel",m,i)))},f=r=>{h>Date.now()||t(r)&&(!u&&n&&(u=Am(Lm(e),"mousemove",n,i)),d||(d=Am(Lm(e),"mouseup",g,i)))},m=e=>{v(),r&&r(e)},g=e=>{y(),r&&r(e)},v=()=>{a&&a(),s&&s(),l&&l(),a=s=l=void 0},y=()=>{u&&u(),d&&d(),u=d=void 0},b=()=>{v(),y()},x=(t=!0)=>{t?(o||(o=Am(e,"touchstart",p,i)),c||(c=Am(e,"mousedown",f,i))):(o&&o(),c&&c(),o=c=void 0,b())};return{enable:x,stop:b,destroy:()=>{x(!1),r=n=t=void 0}}})(o.el,(e=>{const t=Nm(e);return!(n||!r)&&(jm(e,m),m.startX=m.currentX,m.startY=m.currentY,m.startTime=m.currentTime=t,m.velocityX=m.velocityY=m.deltaX=m.deltaY=0,m.event=e,(!a||!1!==a(m))&&(v.release(),!!v.start()&&(n=!0,0===h?b():(g.start(m.startX,m.startY),!0))))}),(e=>{t?!i&&r&&(i=!0,zm(m,e),requestAnimationFrame(y)):(zm(m,e),g.detect(m.currentX,m.currentY)&&(g.isGesture()&&b()||E()))}),_,{capture:!1,passive:p}),E=()=>{w(),k.stop(),u&&u(m)};return{enable(e=!0){e||(t&&_(void 0),w()),k.enable(e)},destroy(){v.destroy(),k.destroy()}}})),zm=(e,t)=>{if(!t)return;const n=e.currentX,r=e.currentY,i=e.currentTime;jm(t,e);const o=e.currentX,a=e.currentY,s=(e.currentTime=Nm(t))-i;if(s>0&&s<100){const t=(o-n)/s,i=(a-r)/s;e.velocityX=.7*t+.3*e.velocityX,e.velocityY=.7*i+.3*e.velocityY}e.deltaX=o-e.startX,e.deltaY=a-e.startY,e.event=t},jm=(e,t)=>{let n=0,r=0;if(e){const t=e.changedTouches;if(t&&t.length>0){const e=t[0];n=e.clientX,r=e.clientY}else void 0!==e.pageX&&(n=e.pageX,r=e.pageY)}t.currentX=n,t.currentY=r},Nm=e=>e.timeStamp||Date.now();
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
class Bm{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,t){const n=this.m.get(e);return void 0!==n?n:t}getBoolean(e,t=!1){const n=this.m.get(e);return void 0===n?t:"string"==typeof n?"true"===n:!!n}getNumber(e,t){const n=parseFloat(this.m.get(e));return isNaN(n)?void 0!==t?t:NaN:n}set(e,t){this.m.set(e,t)}}const Fm=new Bm,Vm=(e,t)=>e.substr(0,t.length)===t,Um="ionic:",$m="ionic-persist-config",Zm=(e,t)=>("string"==typeof e&&(t=e,e=void 0),(e=>Hm(e))(e).includes(t)),Hm=(e=window)=>{if(void 0===e)return[];e.Ionic=e.Ionic||{};let t=e.Ionic.platforms;return null==t&&(t=e.Ionic.platforms=Wm(e),t.forEach((t=>e.document.documentElement.classList.add(`plt-${t}`)))),t},Wm=e=>{const t=Fm.get("platform");return Object.keys(tg).filter((n=>{const r=null==t?void 0:t[n];return"function"==typeof r?r(e):tg[n](e)}))},qm=e=>!!Qm(e,/iPad/i)||!(!Qm(e,/Macintosh/i)||!Km(e)),Gm=e=>Qm(e,/android|sink/i),Km=e=>eg(e,"(any-pointer:coarse)"),Ym=e=>Xm(e)||Jm(e),Xm=e=>!!(e.cordova||e.phonegap||e.PhoneGap),Jm=e=>{const t=e.Capacitor;return!!(null==t?void 0:t.isNative)},Qm=(e,t)=>t.test(e.navigator.userAgent),eg=(e,t)=>{var n;return null===(n=e.matchMedia)||void 0===n?void 0:n.call(e,t).matches},tg={ipad:qm,iphone:e=>Qm(e,/iPhone/i),ios:e=>Qm(e,/iPhone|iPod/i)||qm(e),android:Gm,phablet:e=>{const t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),i=Math.max(t,n);return r>390&&r<520&&i>620&&i<800},tablet:e=>{const t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),i=Math.max(t,n);return qm(e)||(e=>Gm(e)&&!Qm(e,/mobile/i))(e)||r>460&&r<820&&i>780&&i<1400},cordova:Xm,capacitor:Jm,electron:e=>Qm(e,/electron/i),pwa:e=>{var t;return!(!(null===(t=e.matchMedia)||void 0===t?void 0:t.call(e,"(display-mode: standalone)").matches)&&!e.navigator.standalone)},mobile:Km,mobileweb:e=>Km(e)&&!Ym(e),desktop:e=>!Km(e),hybrid:Ym};let ng;const rg=e=>e&&(e=>pf(e).$modeName$)(e)||ng,ig=(e={})=>{if("undefined"==typeof window)return;const t=window.document,n=window,r=n.Ionic=n.Ionic||{},i={};var o;e._ael&&(i.ael=e._ael),e._rel&&(i.rel=e._rel),e._ce&&(i.ce=e._ce),o=i,Object.assign(_f,o);const a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(e=>{try{const t=e.sessionStorage.getItem($m);return null!==t?JSON.parse(t):{}}catch($A){return{}}})(n)),{persistConfig:!1}),r.config),(e=>{const t={};return e.location.search.slice(1).split("&").map((e=>e.split("="))).map((([e,t])=>[decodeURIComponent(e),decodeURIComponent(t)])).filter((([e])=>Vm(e,Um))).map((([e,t])=>[e.slice(Um.length),t])).forEach((([e,n])=>{t[e]=n})),t})(n)),e);Fm.reset(a),Fm.getBoolean("persistConfig")&&((e,t)=>{try{e.sessionStorage.setItem($m,JSON.stringify(t))}catch($A){return}})(n,a),Hm(n),r.config=Fm,r.mode=ng=Fm.get("mode",t.documentElement.getAttribute("mode")||(Zm(n,"ios")?"ios":"md")),Fm.set("mode",ng),t.documentElement.setAttribute("mode",ng),t.documentElement.classList.add(ng),Fm.getBoolean("_testing")&&Fm.set("animated",!1);const s=e=>{var t;return null===(t=e.tagName)||void 0===t?void 0:t.startsWith("ION-")},l=e=>["ios","md"].includes(e);var c;c=e=>{for(;e;){const t=e.mode||e.getAttribute("mode");if(t){if(l(t))return t;s(e)&&console.warn('Invalid ionic mode: "'+t+'", expected: "ios" or "md"')}e=e.parentElement}return ng},yf.push(c)},og=Object.freeze(Object.defineProperty({__proto__:null,MENU_BACK_BUTTON_PRIORITY:99,OVERLAY_BACK_BUTTON_PRIORITY:100,blockHardwareBackButton:()=>{document.addEventListener("backbutton",(()=>{}))},startHardwareBackButton:()=>{const e=document;let t=!1;e.addEventListener("backbutton",(()=>{if(t)return;let n=0,r=[];const i=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(e,t){r.push({priority:e,handler:t,id:n++})}}});e.dispatchEvent(i);const o=()=>{if(r.length>0){let e={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};r.forEach((t=>{t.priority>=e.priority&&(e=t)})),t=!0,r=r.filter((t=>t.id!==e.id)),(async e=>{try{if(null==e?void 0:e.handler){const t=e.handler(o);null!=t&&await t}}catch($A){console.error($A)}})(e).then((()=>t=!1))}};o()}))}},Symbol.toStringTag,{value:"Module"})),ag=async(e,t,n,r,i,o)=>{var a;if(e)return e.attachViewToDom(t,n,i,r);if(!(o||"string"==typeof n||n instanceof HTMLElement))throw new Error("framework delegate is missing");const s="string"==typeof n?null===(a=t.ownerDocument)||void 0===a?void 0:a.createElement(n):n;return r&&r.forEach((e=>s.classList.add(e))),i&&Object.assign(s,i),t.appendChild(s),await new Promise((e=>Rf(s,e))),s},sg=(e,t)=>{if(t){if(e){const n=t.parentElement;return e.removeViewFromDom(n,t)}t.remove()}return Promise.resolve()},lg=(e,...t)=>console.warn(`[Ionic Warning]: ${e}`,...t),cg=(e,...t)=>console.error(`[Ionic Error]: ${e}`,...t);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
let ug=0,dg=0;const hg=new WeakMap,pg='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',fg=(e,t)=>{let n=e.querySelector(pg);const r=null==n?void 0:n.shadowRoot;r&&(n=r.querySelector(pg)||n),n?(e=>{if(e.focus(),e.classList.contains("ion-focusable")){const t=e.closest("ion-app");t&&t.setFocus([e])}})(n):t.focus()},mg=(e,t)=>{const n=Array.from(e.querySelectorAll(pg));let r=n.length>0?n[n.length-1]:null;const i=null==r?void 0:r.shadowRoot;i&&(r=i.querySelector(pg)||r),r?r.focus():t.focus()},gg=(e,t)=>{const n=yg(t,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),r=e.target;n&&r&&(n.classList.contains("ion-disable-focus-trap")||(n.shadowRoot?(()=>{if(n.contains(r))n.lastFocus=r;else{const e=n.lastFocus;fg(n,n),e===t.activeElement&&mg(n,n),n.lastFocus=t.activeElement}})():(()=>{if(n===r)n.lastFocus=void 0;else{const e=Uf(n);if(!e.contains(r))return;const i=e.querySelector(".ion-overlay-wrapper");if(!i)return;if(i.contains(r))n.lastFocus=r;else{const e=n.lastFocus;fg(i,n),e===t.activeElement&&mg(i,n),n.lastFocus=t.activeElement}}})()))},vg=e=>{0===ug&&(ug=1,e.addEventListener("focus",(t=>{gg(t,e)}),!0),e.addEventListener("ionBackButton",(t=>{const n=yg(e);(null==n?void 0:n.backdropDismiss)&&t.detail.register(100,(()=>n.dismiss(void 0,Sg)))})),e.addEventListener("keydown",(t=>{if("Escape"===t.key){const t=yg(e);(null==t?void 0:t.backdropDismiss)&&t.dismiss(void 0,Sg)}})))},yg=(e,t,n)=>{const r=((e,t)=>(void 0===t&&(t="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(e.querySelectorAll(t)).filter((e=>e.overlayIndex>0))))(e,t).filter((e=>!e.classList.contains("overlay-hidden")));return void 0===n?r[r.length-1]:r.find((e=>e.id===n))},bg=(e=!1)=>{const t=wg(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))},xg=async e=>{let t=document.activeElement;if(!t)return;const n=null==t?void 0:t.shadowRoot;n&&(t=n.querySelector(pg)||t),await e.onDidDismiss(),t.focus()},wg=e=>e.querySelector("ion-app")||e.body,_g=async(e,t,n,r)=>{n.classList.remove("overlay-hidden");const i=t(e.el,r);e.animated&&Fm.getBoolean("animated",!0)||i.duration(0),e.keyboardClose&&i.beforeAddWrite((()=>{const e=n.ownerDocument.activeElement;(null==e?void 0:e.matches("input,ion-input, ion-textarea"))&&e.blur()}));const o=hg.get(e)||[];return hg.set(e,[...o,i]),await i.play(),!0},kg=(e,t)=>{let n;const r=new Promise((e=>n=e));return Eg(e,t,(e=>{n(e.detail)})),r},Eg=(e,t,n)=>{const r=i=>{Vf(e,t,r),n(i)};Ff(e,t,r)},Sg="backdrop",Cg="gesture";var Tg=function(e,t){return Tg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Tg(e,t)};function Mg(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Tg(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ig=function(){return Ig=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ig.apply(this,arguments)};function Og(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Ag(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch($A){o($A)}}function s(e){try{l(r.throw(e))}catch($A){o($A)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function Pg(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch($A){s=[6,$A],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function Dg(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const Lg="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",Rg="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",zg="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>";
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
let jg;const Ng=e=>{const t=(()=>{if("undefined"==typeof window)return new Map;if(!jg){const e=window;e.Ionicons=e.Ionicons||{},jg=e.Ionicons.map=e.Ionicons.map||new Map}return jg})().get(e);return t||(e=>{const t=new URL(e,_f.$resourcesUrl$);return t.origin!==bf.location.origin?t.href:t.pathname})(`svg/${e}.svg`)},Bg=(e,t,n,r,i)=>(n="ios"===(n&&$g(n))?"ios":"md",r&&"ios"===n?e=$g(r):i&&"md"===n?e=$g(i):(e||!t||Vg(t)||(e=t),Ug(e)&&(e=$g(e))),Ug(e)&&""!==e.trim()?""!==e.replace(/[a-z]|-|\d/gi,"")?null:e:null),Fg=e=>Ug(e)&&(e=e.trim(),Vg(e))?e:null,Vg=e=>e.length>0&&/(\/|\.)/.test(e),Ug=e=>"string"==typeof e,$g=e=>e.toLowerCase(),Zg=e=>{if(1===e.nodeType){if("script"===e.nodeName.toLowerCase())return!1;for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;if(Ug(n)&&0===n.toLowerCase().indexOf("on"))return!1}for(let t=0;t<e.childNodes.length;t++)if(!Zg(e.childNodes[t]))return!1}return!0},Hg=new Map,Wg=new Map;let qg;const Gg=(e,t)=>{let n=Wg.get(e);if(!n){if("undefined"==typeof fetch||"undefined"==typeof document)return Hg.set(e,""),Promise.resolve();if((e=>e.startsWith("data:image/svg+xml"))(e)&&(e=>-1!==e.indexOf(";utf8,"))(e)){qg||(qg=new DOMParser);const t=qg.parseFromString(e,"text/html").querySelector("svg");return t&&Hg.set(e,t.outerHTML),Promise.resolve()}n=fetch(e).then((n=>{if(n.ok)return n.text().then((n=>{n&&!1!==t&&(n=(e=>{const t=document.createElement("div");t.innerHTML=e;for(let r=t.childNodes.length-1;r>=0;r--)"svg"!==t.childNodes[r].nodeName.toLowerCase()&&t.removeChild(t.childNodes[r]);const n=t.firstElementChild;if(n&&"svg"===n.nodeName.toLowerCase()){const e=n.getAttribute("class")||"";if(n.setAttribute("class",(e+" s-ion-icon").trim()),Zg(n))return t.innerHTML}return""})(n)),Hg.set(e,n||"")}));Hg.set(e,"")})),Wg.set(e,n)}return n},Kg=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=Yg(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=((e,t=[])=>{const n={};return t.forEach((t=>{e.hasAttribute(t)&&(null!==e.getAttribute(t)&&(n[t]=e.getAttribute(t)),e.removeAttribute(t))})),n})(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",(()=>{this.isVisible=!0,this.loadIcon()}))}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,n){if(this.lazy&&"undefined"!=typeof window&&window.IntersectionObserver){const r=this.io=new window.IntersectionObserver((e=>{e[0].isIntersecting&&(r.disconnect(),this.io=void 0,n())}),{rootMargin:t});r.observe(e)}else n()}loadIcon(){if(this.isVisible){const e=(e=>{let t=Fg(e.src);if(t)return t;if(t=Bg(e.name,e.icon,e.mode,e.ios,e.md),t)return Ng(t);if(e.icon){if(t=Fg(e.icon),t)return t;if(t=Fg(e.icon[e.mode]),t)return t}return null})(this);e&&(Hg.has(e)?this.svgContent=Hg.get(e):Gg(e,this.sanitize).then((()=>this.svgContent=Hg.get(e))))}this.iconName=Bg(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{iconName:e,el:t,inheritedAttributes:n}=this,r=this.mode||"md",i=this.flipRtl||e&&(e.indexOf("arrow")>-1||e.indexOf("chevron")>-1)&&!1!==this.flipRtl;return yp(xp,Object.assign({role:"img",class:Object.assign(Object.assign({[r]:!0},Xg(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":!!i&&(o=t,o&&""!==o.dir?"rtl"===o.dir.toLowerCase():"rtl"===(null===document||void 0===document?void 0:document.dir.toLowerCase()))})},n),this.svgContent?yp("div",{class:"icon-inner",innerHTML:this.svgContent}):yp("div",{class:"icon-inner"}));var o}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}:host(.flip-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}"}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),Yg=()=>"undefined"!=typeof document&&document.documentElement.getAttribute("mode")||"md",Xg=e=>e?{"ion-color":!0,[`ion-color-${e}`]:!0}:null,Jg=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){return yp(xp,{class:rg(this)},yp("slot",null))}static get style(){return{ios:":host{border-radius:var(--border-radius);display:block}::slotted(ion-img),::slotted(img){border-radius:var(--border-radius);width:100%;height:100%;-o-object-fit:cover;object-fit:cover;overflow:hidden}:host{--border-radius:50%;width:48px;height:48px}",md:":host{border-radius:var(--border-radius);display:block}::slotted(ion-img),::slotted(img){border-radius:var(--border-radius);width:100%;height:100%;-o-object-fit:cover;object-fit:cover;overflow:hidden}:host{--border-radius:50%;width:64px;height:64px}"}}},[33,"ion-avatar"]),Qg=function(){"undefined"!=typeof customElements&&["ion-avatar"].forEach((e=>{"ion-avatar"===e&&(customElements.get(e)||customElements.define(e,Jg))}))},ev=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionBackdropTap=Ep(this,"ionBackdropTap",7),this.blocker=Om.createBlocker({disableScroll:!0}),this.visible=!0,this.tappable=!0,this.stopPropagation=!0}connectedCallback(){this.stopPropagation&&this.blocker.block()}disconnectedCallback(){this.blocker.unblock()}onMouseDown(e){this.emitTap(e)}emitTap(e){this.stopPropagation&&(e.preventDefault(),e.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){const e=rg(this);return yp(xp,{tabindex:"-1","aria-hidden":"true",class:{[e]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}static get style(){return{ios:":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",md:":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}"}}},[33,"ion-backdrop",{visible:[4],tappable:[4],stopPropagation:[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]),tv=(e,t)=>null!==t.closest(e),nv=(e,t)=>"string"==typeof e&&e.length>0?Object.assign({"ion-color":!0,[`ion-color-${e}`]:!0},t):t,rv=e=>{const t={};return(e=>void 0!==e?(Array.isArray(e)?e:e.split(" ")).filter((e=>null!=e)).map((e=>e.trim())).filter((e=>""!==e)):[])(e).forEach((e=>t[e]=!0)),t},iv=/^[a-z][a-z0-9+\-.]*:/,ov=async(e,t,n,r)=>{if(null!=e&&"#"!==e[0]&&!iv.test(e)){const i=document.querySelector("ion-router");if(i)return null!=t&&t.preventDefault(),i.push(e,n,r)}return!1},av=sf(class extends wf{constructor(){super(),this.__registerHost(),this.collapse=!1}render(){const e=rg(this);return yp(xp,{class:{[e]:!0,"buttons-collapse":this.collapse}})}static get style(){return{ios:".sc-ion-buttons-ios-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-ios-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-ios-s ion-button{--padding-start:5px;--padding-end:5px;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;height:32px}.sc-ion-buttons-ios-s ion-button:not(.button-round){--border-radius:4px}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button{--color:initial;--border-color:initial;--background-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-solid,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-solid{--background:var(--ion-color-contrast);--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12;--background-hover:var(--ion-color-base);--background-hover-opacity:0.45;--color:var(--ion-color-base);--color-focused:var(--ion-color-base)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-clear,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-clear{--color-activated:var(--ion-color-contrast);--color-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-outline,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-outline{--color-activated:var(--ion-color-base);--color-focused:var(--ion-color-contrast);--background-activated:var(--ion-color-contrast)}.sc-ion-buttons-ios-s .button-clear,.sc-ion-buttons-ios-s .button-outline{--background-activated:transparent;--background-focused:currentColor;--background-hover:transparent}.sc-ion-buttons-ios-s .button-solid:not(.ion-color){--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12}.sc-ion-buttons-ios-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:24px;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:24px;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:28px;line-height:0.67}",md:".sc-ion-buttons-md-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-md-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-md-s ion-button{--padding-top:0;--padding-bottom:0;--padding-start:8px;--padding-end:8px;--box-shadow:none;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;height:32px}.sc-ion-buttons-md-s ion-button:not(.button-round){--border-radius:2px}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button{--color:initial;--color-focused:var(--ion-color-contrast);--color-hover:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-contrast);--background-hover:var(--ion-color-contrast)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-solid,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-solid{--background:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-shade);--background-hover:var(--ion-color-base);--color:var(--ion-color-base);--color-focused:var(--ion-color-base);--color-hover:var(--ion-color-base)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-outline,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-outline{--border-color:var(--ion-color-contrast)}.sc-ion-buttons-md-s .button-has-icon-only.button-clear{--padding-top:12px;--padding-end:12px;--padding-bottom:12px;--padding-start:12px;--border-radius:50%;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;width:48px;height:48px}.sc-ion-buttons-md-s .button{--background-hover:currentColor}.sc-ion-buttons-md-s .button-solid{--color:var(--ion-toolbar-background, var(--ion-background-color, #fff));--background:var(--ion-toolbar-color, var(--ion-text-color, #424242));--background-activated:transparent;--background-focused:currentColor}.sc-ion-buttons-md-s .button-outline{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--border-color:currentColor}.sc-ion-buttons-md-s .button-clear{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor}.sc-ion-buttons-md-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:1.8em}"}}},[34,"ion-buttons",{collapse:[4]}]),sv=function(){"undefined"!=typeof customElements&&["ion-buttons"].forEach((e=>{"ion-buttons"===e&&(customElements.get(e)||customElements.define(e,av))}))}
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */,lv=e=>!!(null!==e.shadowRoot&&(cv.includes(e.tagName)&&null!==e.querySelector('[slot="label"]')||uv.includes(e.tagName)&&""!==e.textContent)),cv=["ION-RANGE"],uv=["ION-TOGGLE","ION-CHECKBOX","ION-RADIO"],dv=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(e,t){return new Promise((n=>{Af((()=>{const r=this.el.getBoundingClientRect(),i=r.width,o=r.height,a=Math.sqrt(i*i+o*o),s=Math.max(o,i),l=this.unbounded?s:a+pv,c=Math.floor(s*fv),u=l/c;let d=e-r.left,h=t-r.top;this.unbounded&&(d=.5*i,h=.5*o);const p=d-.5*c,f=h-.5*c,m=.5*i-d,g=.5*o-h;Pf((()=>{const e=document.createElement("div");e.classList.add("ripple-effect");const t=e.style;t.top=f+"px",t.left=p+"px",t.width=t.height=c+"px",t.setProperty("--final-scale",`${u}`),t.setProperty("--translate-end",`${m}px, ${g}px`),(this.el.shadowRoot||this.el).appendChild(e),setTimeout((()=>{n((()=>{hv(e)}))}),325)}))}))}))}get unbounded(){return"unbounded"===this.type}render(){const e=rg(this);return yp(xp,{role:"presentation",class:{[e]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}"}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),hv=e=>{e.classList.add("fade-out"),setTimeout((()=>{e.remove()}),200)},pv=10,fv=.5,mv="undefined"!=typeof window?window:void 0;mv&&mv.CSS&&mv.CSS.supports&&mv.CSS.supports("--a: 0");
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
const gv=e("i",(e=>e&&""!==e.dir?"rtl"===e.dir.toLowerCase():"rtl"===(null===document||void 0===document?void 0:document.dir.toLowerCase()))),vv=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=Ep(this,"ionScrollStart",7),this.ionScroll=Ep(this,"ionScroll",7),this.ionScrollEnd=Ep(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){this.isMainContent=null===this.el.closest("ion-menu, ion-popover, ion-modal")}disconnectedCallback(){this.onScrollEnd()}onAppLoad(){this.resize()}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout((()=>{null!==this.el.offsetParent&&this.resize()}),100)}shouldForceOverscroll(){const{forceOverscroll:e}=this,t=rg(this);return void 0===e?"ios"===t&&Zm("ios"):e}resize(){this.fullscreen?Af((()=>this.readDimensions())):0===this.cTop&&0===this.cBottom||(this.cTop=this.cBottom=0,ef(this))}readDimensions(){const e=yv(this.el),t=Math.max(this.el.offsetTop,0),n=Math.max(e.offsetHeight-t-this.el.offsetHeight,0);(t!==this.cTop||n!==this.cBottom)&&(this.cTop=t,this.cBottom=n,ef(this))}onScroll(e){const t=Date.now(),n=!this.isScrolling;this.lastScroll=t,n&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,Af((t=>{this.queued=!1,this.detail.event=e,bv(this.detail,this.scrollEl,t,n),this.ionScroll.emit(this.detail)})))}async getScrollElement(){return this.scrollEl||await new Promise((e=>Rf(this.el,e))),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise((e=>Rf(this.el,e))),Promise.resolve(this.backgroundContentEl)}scrollToTop(e=0){return this.scrollToPoint(void 0,0,e)}async scrollToBottom(e=0){const t=await this.getScrollElement(),n=t.scrollHeight-t.clientHeight;return this.scrollToPoint(void 0,n,e)}async scrollByPoint(e,t,n){const r=await this.getScrollElement();return this.scrollToPoint(e+r.scrollLeft,t+r.scrollTop,n)}async scrollToPoint(e,t,n=0){const r=await this.getScrollElement();if(n<32)return null!=t&&(r.scrollTop=t),void(null!=e&&(r.scrollLeft=e));let i,o=0;const a=new Promise((e=>i=e)),s=r.scrollTop,l=r.scrollLeft,c=null!=t?t-s:0,u=null!=e?e-l:0,d=e=>{const t=Math.min(1,(e-o)/n)-1,a=Math.pow(t,3)+1;0!==c&&(r.scrollTop=Math.floor(a*c+s)),0!==u&&(r.scrollLeft=Math.floor(a*u+l)),a<1?requestAnimationFrame(d):i()};return requestAnimationFrame((e=>{o=e,d(e)})),a}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval((()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()}),100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{isMainContent:e,scrollX:t,scrollY:n,el:r}=this,i=gv(r)?"rtl":"ltr",o=rg(this),a=this.shouldForceOverscroll(),s="ios"===o,l=e?"main":"div";return this.resize(),yp(xp,{class:nv(this.color,{[o]:!0,"content-sizing":tv("ion-popover",this.el),overscroll:a,[`content-${i}`]:!0}),style:{"--offset-top":`${this.cTop}px`,"--offset-bottom":`${this.cBottom}px`}},yp("div",{ref:e=>this.backgroundContentEl=e,id:"background-content",part:"background"}),yp(l,{class:{"inner-scroll":!0,"scroll-x":t,"scroll-y":n,overscroll:(t||n)&&a},ref:e=>this.scrollEl=e,onScroll:this.scrollEvents?e=>this.onScroll(e):void 0,part:"scroll"},yp("slot",null)),s?yp("div",{class:"transition-effect"},yp("div",{class:"transition-cover"}),yp("div",{class:"transition-shadow"})):null,yp("slot",{name:"fixed"}))}get el(){return this}static get style(){return':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}'}},[1,"ion-content",{color:[513],fullscreen:[4],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]]),yv=e=>{const t=e.closest("ion-tabs");if(t)return t;const n=e.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return n||(e=>{var t;return e.parentElement?e.parentElement:(null===(t=e.parentNode)||void 0===t?void 0:t.host)?e.parentNode.host:null})(e)},bv=(e,t,n,r)=>{const i=e.currentX,o=e.currentY,a=e.currentTime,s=t.scrollLeft,l=t.scrollTop,c=n-a;if(r&&(e.startTime=n,e.startX=s,e.startY=l,e.velocityX=e.velocityY=0),e.currentTime=n,e.currentX=e.scrollLeft=s,e.currentY=e.scrollTop=l,e.deltaX=s-e.startX,e.deltaY=l-e.startY,c>0&&c<100){const t=(s-i)/c,n=(l-o)/c;e.velocityX=.7*t+.3*e.velocityX,e.velocityY=.7*n+.3*e.velocityY}},xv=function(){"undefined"!=typeof customElements&&["ion-content"].forEach((e=>{"ion-content"===e&&(customElements.get(e)||customElements.define(e,vv))}))},wv=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=Ep(this,"ionFocus",7),this.ionBlur=Ep(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.inheritedAttributes={},this.handleClick=e=>{const{el:t}=this;if("button"===this.type)ov(this.href,e,this.routerDirection,this.routerAnimation);else if((e=>!!e.shadowRoot&&!!e.attachShadow)(t)){let n=this.findForm();const{form:r}=this;if(!n&&void 0!==r)return void lg("string"==typeof r?`Form with selector: "#${r}" could not be found. Verify that the id is correct and the form is rendered in the DOM.`:'The provided "form" element is invalid. Verify that the form is a HTMLFormElement and rendered in the DOM.',t);if(n||(n=t.closest("form")),n){e.preventDefault();const t=document.createElement("button");t.type=this.type,t.style.display="none",n.appendChild(t),t.click(),t.remove()}}},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.color=void 0,this.buttonType="button",this.disabled=!1,this.expand=void 0,this.fill=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.download=void 0,this.href=void 0,this.rel=void 0,this.shape=void 0,this.size=void 0,this.strong=!1,this.target=void 0,this.type="button",this.form=void 0}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=Bf(this.el)}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(void 0===this.fill||"clear"===this.fill)&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}findForm(){const{form:e}=this;if(e instanceof HTMLFormElement)return e;if("string"==typeof e){const t=document.getElementById(e);if(t instanceof HTMLFormElement)return t}return null}render(){const e=rg(this),{buttonType:t,type:n,disabled:r,rel:i,target:o,size:a,href:s,color:l,expand:c,hasIconOnly:u,shape:d,strong:h,inheritedAttributes:p}=this,f=void 0===a&&this.inItem?"small":a,m=void 0===s?"button":"a",g="button"===m?{type:n}:{download:this.download,href:s,rel:i,target:o};let v=this.fill;return null==v&&(v=this.inToolbar||this.inListHeader?"clear":"solid"),yp(xp,{onClick:this.handleClick,"aria-disabled":r?"true":null,class:nv(l,{[e]:!0,[t]:!0,[`${t}-${c}`]:void 0!==c,[`${t}-${f}`]:void 0!==f,[`${t}-${d}`]:void 0!==d,[`${t}-${v}`]:!0,[`${t}-strong`]:h,"in-toolbar":tv("ion-toolbar",this.el),"in-toolbar-color":tv("ion-toolbar[color]",this.el),"in-buttons":tv("ion-buttons",this.el),"button-has-icon-only":u,"button-disabled":r,"ion-activatable":!0,"ion-focusable":!0})},yp(m,Object.assign({},g,{class:"button-native",part:"native",disabled:r,onFocus:this.onFocus,onBlur:this.onBlur},p),yp("span",{class:"button-inner"},yp("slot",{name:"icon-only"}),yp("slot",{name:"start"}),yp("slot",null),yp("slot",{name:"end"})),"md"===e&&yp("ion-ripple-effect",{type:this.rippleType})))}get el(){return this}static get style(){return{ios:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted(ion-icon){font-size:1.4em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:14px;--padding-top:0;--padding-bottom:0;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;height:3.1em;font-size:16px;font-weight:500;letter-spacing:0}:host(.in-buttons){font-size:17px;font-weight:400}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:14px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #3880ff);--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-activated-opacity:0;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;font-size:17px;font-weight:normal}:host(.button-large){--border-radius:16px;--padding-top:0;--padding-start:1em;--padding-end:1em;--padding-bottom:0;height:3.1em;font-size:20px}:host(.button-small){--border-radius:6px;--padding-top:0;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:not(.ion-activated):hover),:host(.button-outline:not(.ion-activated):hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color):not(.ion-activated)) .button-native::after{background:#fff;opacity:0.1}}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}',md:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted(ion-icon){font-size:1.4em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:4px;--padding-top:0;--padding-bottom:0;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;height:36px;font-size:14px;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:0;--padding-start:1em;--padding-end:1em;--padding-bottom:0;height:2.8em;font-size:20px}:host(.button-small){--padding-top:0;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-strong){font-weight:bold}::slotted(ion-icon[slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}'}}},[33,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1],form:[1]}]),_v=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.labelColorStyles={},this.itemStyles=new Map,this.inheritedAriaAttributes={},this.multipleInputs=!1,this.focusable=!0,this.color=void 0,this.button=!1,this.detail=void 0,this.detailIcon=Lg,this.disabled=!1,this.download=void 0,this.fill=void 0,this.shape=void 0,this.href=void 0,this.rel=void 0,this.lines=void 0,this.counter=!1,this.routerAnimation=void 0,this.routerDirection="forward",this.target=void 0,this.type="button",this.counterFormatter=void 0,this.counterString=void 0}counterFormatterChanged(){this.updateCounterOutput(this.getFirstInput())}handleIonInput(e){this.counter&&e.target===this.getFirstInput()&&this.updateCounterOutput(e.target)}labelColorChanged(e){const{color:t}=this;void 0===t&&(this.labelColorStyles=e.detail)}itemStyle(e){e.stopPropagation();const t=e.target.tagName,n=e.detail,r={},i=this.itemStyles.get(t)||{};let o=!1;Object.keys(n).forEach((e=>{if(n[e]){const t=`item-${e}`;i[t]||(o=!0),r[t]=!0}})),o||Object.keys(r).length===Object.keys(i).length||(o=!0),o&&(this.itemStyles.set(t,r),ef(this))}connectedCallback(){this.counter&&this.updateCounterOutput(this.getFirstInput()),this.hasStartEl()}componentWillLoad(){this.inheritedAriaAttributes=jf(this.el,["aria-label"])}componentDidLoad(){const{el:e,counter:t,counterFormatter:n,fill:r,shape:i}=this;null!==e.querySelector('[slot="helper"]')&&lg('The "helper" slot has been deprecated in favor of using the "helperText" property on ion-input or ion-textarea.',e),null!==e.querySelector('[slot="error"]')&&lg('The "error" slot has been deprecated in favor of using the "errorText" property on ion-input or ion-textarea.',e),!0===t&&lg('The "counter" property has been deprecated in favor of using the "counter" property on ion-input or ion-textarea.',e),void 0!==n&&lg('The "counterFormatter" property has been deprecated in favor of using the "counterFormatter" property on ion-input or ion-textarea.',e),void 0!==r&&lg('The "fill" property has been deprecated in favor of using the "fill" property on ion-input or ion-textarea.',e),void 0!==i&&lg('The "shape" property has been deprecated in favor of using the "shape" property on ion-input or ion-textarea.',e),$f((()=>{this.setMultipleInputs(),this.focusable=this.isFocusable()}))}setMultipleInputs(){const e=this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio"),t=this.el.querySelectorAll("ion-input, ion-range, ion-searchbar, ion-segment, ion-textarea, ion-toggle"),n=this.el.querySelectorAll("ion-anchor, ion-button, a, button");this.multipleInputs=e.length+t.length>1||e.length+n.length>1||e.length>0&&this.isClickable()}hasCover(){return 1===this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio").length&&!this.multipleInputs}isClickable(){return void 0!==this.href||this.button}canActivate(){return this.isClickable()||this.hasCover()}isFocusable(){const e=this.el.querySelector(".ion-focusable");return this.canActivate()||null!==e}getFirstInput(){return this.el.querySelectorAll("ion-input, ion-textarea")[0]}updateCounterOutput(e){var t,n;const{counter:r,counterFormatter:i,defaultCounterFormatter:o}=this;if(r&&!this.multipleInputs&&void 0!==(null==e?void 0:e.maxlength)){const r=null!==(n=null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.toString().length)&&void 0!==n?n:0;if(void 0===i)this.counterString=o(r,e.maxlength);else try{this.counterString=i(r,e.maxlength)}catch($A){cg("Exception in provided `counterFormatter`.",$A),this.counterString=o(r,e.maxlength)}}}defaultCounterFormatter(e,t){return`${e} / ${t}`}hasStartEl(){null!==this.el.querySelector('[slot="start"]')&&this.el.classList.add("item-has-start-slot")}render(){const{counterString:e,detail:t,detailIcon:n,download:r,fill:i,labelColorStyles:o,lines:a,disabled:s,href:l,rel:c,shape:u,target:d,routerAnimation:h,routerDirection:p,inheritedAriaAttributes:f}=this,m={},g=rg(this),v=this.isClickable(),y=this.canActivate(),b=v?void 0===l?"button":"a":"div",x="button"===b?{type:this.type}:{download:r,href:l,rel:c,target:d},w=v?{onClick:e=>{ov(l,e,p,h)}}:{},_=void 0!==t?t:"ios"===g&&v;this.itemStyles.forEach((e=>{Object.assign(m,e)}));const k=s||m["item-interactive-disabled"]?"true":null,E=i||"none",S=tv("ion-list",this.el);return yp(xp,{"aria-disabled":k,class:Object.assign(Object.assign(Object.assign({},m),o),nv(this.color,{item:!0,[g]:!0,"item-lines-default":void 0===a,[`item-lines-${a}`]:void 0!==a,[`item-fill-${E}`]:!0,[`item-shape-${u}`]:void 0!==u,"item-disabled":s,"in-list":S,"item-multiple-inputs":this.multipleInputs,"ion-activatable":y,"ion-focusable":this.focusable,"item-rtl":"rtl"===document.dir})),role:S?"listitem":null},yp(b,Object.assign({},x,f,{class:"item-native",part:"native",disabled:s},w),yp("slot",{name:"start"}),yp("div",{class:"item-inner"},yp("div",{class:"input-wrapper"},yp("slot",null)),yp("slot",{name:"end"}),_&&yp("ion-icon",{icon:n,lazy:!1,class:"item-detail-icon",part:"detail-icon","aria-hidden":"true","flip-rtl":n===Lg}),yp("div",{class:"item-inner-highlight"})),y&&"md"===g&&yp("ion-ripple-effect",null),yp("div",{class:"item-highlight"})),yp("div",{class:"item-bottom"},yp("slot",{name:"error"}),yp("slot",{name:"helper"}),e&&yp("ion-note",{class:"item-counter"},e)))}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{counterFormatter:["counterFormatterChanged"]}}static get style(){return{ios:':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native,:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.item-bottom{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--inner-padding-end);padding-inline-end:var(--inner-padding-end);padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;top:0;bottom:0;border-radius:inherit;position:absolute;width:100%;height:100%;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:transform 200ms, border-bottom-width 200ms;transition:transform 200ms, border-bottom-width 200ms, -webkit-transform 200ms;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.ion-focused) .item-highlight,:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-highlight,:host(.item-has-focus) .item-inner-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.ion-focused) .item-highlight,:host(.item-has-focus) .item-highlight{border-width:var(--full-highlight-height);opacity:var(--show-full-highlight)}:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-inner-highlight{border-bottom-width:var(--inset-highlight-height);opacity:var(--show-inset-highlight)}:host(.ion-focused.item-fill-solid) .item-highlight,:host(.item-has-focus.item-fill-solid) .item-highlight{border-width:calc(var(--full-highlight-height) - 1px)}:host(.ion-focused) .item-inner-highlight,:host(.ion-focused:not(.item-fill-outline)) .item-highlight,:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus:not(.item-fill-outline)) .item-highlight{border-top:none;border-right:none;border-left:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=helper]){display:none}::slotted([slot=error]){display:none;color:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=error]){display:block}:host(:not(.item-label)) ::slotted(ion-select.legacy-select){--padding-start:0;max-width:none}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0;-ms-flex-item-align:stretch;align-self:stretch;width:100%;max-width:100%}:host(:not(.item-label)) ::slotted(ion-datetime){--padding-start:0}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select.legacy-select){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted([slot=helper]),::slotted([slot=error]),.item-counter{padding-top:5px;font-size:12px;z-index:1}.item-counter{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}@media (prefers-reduced-motion: reduce){.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}}:host{--min-height:44px;--transition:background-color 200ms linear, opacity 200ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0px 0px 0.55px 0px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:var(--ion-text-color, #000);--background-focused:var(--ion-text-color, #000);--background-hover:currentColor;--background-activated-opacity:.12;--background-focused-opacity:.15;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));--color:var(--ion-item-color, var(--ion-text-color, #000));--highlight-height:0px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--bottom-padding-start:0px;font-size:16px}:host(.ion-activated){--transition:none}:host(.ion-color.ion-focused) .item-native::after{background:#000;opacity:0.15}:host(.ion-color.ion-activated) .item-native::after{background:#000;opacity:0.12}:host(.item-interactive){--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-full){--border-width:0px 0px 0.55px 0px;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0px 0px 0.55px 0px;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0px;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0px;--show-inset-highlight:0}.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus) .item-highlight{border-top:none;border-right:none;border-left:none}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:2px;margin-bottom:2px}::slotted(ion-icon[slot=start]),::slotted(ion-icon[slot=end]){margin-top:7px;margin-bottom:7px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}::slotted(.button-small){--padding-top:0px;--padding-bottom:0px;--padding-start:.5em;--padding-end:.5em;height:24px;font-size:13px}::slotted(ion-avatar){width:36px;height:36px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px}:host(.item-radio) ::slotted(ion-label),:host(.item-toggle) ::slotted(ion-label){-webkit-margin-start:0px;margin-inline-start:0px}::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:10px;margin-bottom:10px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:68px}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0px}:host(.item-label-fixed) ::slotted(ion-select.legacy-select),:host(.item-label-fixed) ::slotted(ion-datetime){--padding-start:0}',md:':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native,:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.item-bottom{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--inner-padding-end);padding-inline-end:var(--inner-padding-end);padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;top:0;bottom:0;border-radius:inherit;position:absolute;width:100%;height:100%;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:transform 200ms, border-bottom-width 200ms;transition:transform 200ms, border-bottom-width 200ms, -webkit-transform 200ms;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.ion-focused) .item-highlight,:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-highlight,:host(.item-has-focus) .item-inner-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.ion-focused) .item-highlight,:host(.item-has-focus) .item-highlight{border-width:var(--full-highlight-height);opacity:var(--show-full-highlight)}:host(.ion-focused) .item-inner-highlight,:host(.item-has-focus) .item-inner-highlight{border-bottom-width:var(--inset-highlight-height);opacity:var(--show-inset-highlight)}:host(.ion-focused.item-fill-solid) .item-highlight,:host(.item-has-focus.item-fill-solid) .item-highlight{border-width:calc(var(--full-highlight-height) - 1px)}:host(.ion-focused) .item-inner-highlight,:host(.ion-focused:not(.item-fill-outline)) .item-highlight,:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus:not(.item-fill-outline)) .item-highlight{border-top:none;border-right:none;border-left:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=helper]){display:none}::slotted([slot=error]){display:none;color:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=error]){display:block}:host(:not(.item-label)) ::slotted(ion-select.legacy-select){--padding-start:0;max-width:none}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0;-ms-flex-item-align:stretch;align-self:stretch;width:100%;max-width:100%}:host(:not(.item-label)) ::slotted(ion-datetime){--padding-start:0}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select.legacy-select){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted([slot=helper]),::slotted([slot=error]),.item-counter{padding-top:5px;font-size:12px;z-index:1}.item-counter{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}@media (prefers-reduced-motion: reduce){.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}}:host{--min-height:48px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));--color:var(--ion-item-color, var(--ion-text-color, #000));--transition:opacity 15ms linear, background-color 15ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0 0 1px 0;--highlight-height:1px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);font-size:16px;font-weight:normal;text-transform:none}:host(.item-fill-outline){--highlight-height:2px}:host(.item-fill-none.item-interactive.ion-focus) .item-highlight,:host(.item-fill-none.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-none.item-interactive.ion-touched.ion-invalid) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-width:0 0 var(--full-highlight-height) 0;border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-none.item-interactive.ion-focus) .item-native,:host(.item-fill-none.item-interactive.item-has-focus) .item-native,:host(.item-fill-none.item-interactive.ion-touched.ion-invalid) .item-native{border-bottom-color:var(--highlight-background)}:host(.item-fill-outline.item-interactive.ion-focus) .item-highlight,:host(.item-fill-outline.item-interactive.item-has-focus) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1)}:host(.item-fill-outline.item-interactive.ion-focus) .item-highlight,:host(.item-fill-outline.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-outline.item-interactive.ion-touched.ion-invalid) .item-highlight{border-width:var(--full-highlight-height);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-outline.item-interactive.ion-touched.ion-invalid) .item-native{border-color:var(--highlight-background)}:host(.item-fill-solid.item-interactive.ion-focus) .item-highlight,:host(.item-fill-solid.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-solid.item-interactive.ion-touched.ion-invalid) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-width:0 0 var(--full-highlight-height) 0;border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-solid.item-interactive.ion-focus) .item-native,:host(.item-fill-solid.item-interactive.item-has-focus) .item-native,:host(.item-fill-solid.item-interactive.ion-touched.ion-invalid) .item-native{border-bottom-color:var(--highlight-background)}:host(.ion-color.ion-activated) .item-native::after{background:transparent}:host(.item-has-focus) .item-native{caret-color:var(--highlight-background)}:host(.item-interactive){--border-width:0 0 1px 0;--inner-border-width:0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-full){--border-width:0 0 1px 0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0 0 1px 0;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0;--show-inset-highlight:0}:host(.item-fill-outline) .item-highlight{--position-offset:calc(-1 * var(--border-width));top:var(--position-offset);width:calc(100% + 2 * var(--border-width));height:calc(100% + 2 * var(--border-width));-webkit-transition:none;transition:none}@supports (inset-inline-start: 0){:host(.item-fill-outline) .item-highlight{inset-inline-start:var(--position-offset)}}@supports not (inset-inline-start: 0){:host(.item-fill-outline) .item-highlight{left:var(--position-offset)}:host-context([dir=rtl]):host(.item-fill-outline) .item-highlight,:host-context([dir=rtl]).item-fill-outline .item-highlight{left:unset;right:unset;right:var(--position-offset)}@supports selector(:dir(rtl)){:host(.item-fill-outline) .item-highlight:dir(rtl){left:unset;right:unset;right:var(--position-offset)}}}:host(.item-fill-outline.ion-focused) .item-native,:host(.item-fill-outline.item-has-focus) .item-native{border-color:transparent}:host(.item-multi-line) ::slotted([slot=start]),:host(.item-multi-line) ::slotted([slot=end]){margin-top:16px;margin-bottom:16px;-ms-flex-item-align:start;align-self:flex-start}::slotted([slot=start]){-webkit-margin-end:32px;margin-inline-end:32px}::slotted([slot=end]){-webkit-margin-start:32px;margin-inline-start:32px}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);font-size:24px}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) ::slotted(ion-icon){color:var(--ion-color-contrast)}::slotted(ion-icon[slot]){margin-top:12px;margin-bottom:12px}::slotted(ion-icon[slot=start]){-webkit-margin-end:32px;margin-inline-end:32px}::slotted(ion-icon[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}:host(.item-fill-solid) ::slotted(ion-icon[slot=start]),:host(.item-fill-outline) ::slotted(ion-icon[slot=start]){-webkit-margin-end:8px;margin-inline-end:8px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}::slotted(ion-note){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-ms-flex-item-align:start;align-self:flex-start;font-size:11px}::slotted(ion-note[slot]:not([slot=helper]):not([slot=error])){padding-left:0;padding-right:0;padding-top:18px;padding-bottom:10px}::slotted(ion-note[slot=start]){-webkit-padding-end:16px;padding-inline-end:16px}::slotted(ion-note[slot=end]){-webkit-padding-start:16px;padding-inline-start:16px}::slotted(ion-avatar){width:40px;height:40px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar),::slotted(ion-thumbnail){margin-top:8px;margin-bottom:8px}::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){-webkit-margin-end:16px;margin-inline-end:16px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:10px;margin-bottom:10px}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}:host(.item-label-fixed) ::slotted(ion-select.legacy-select),:host(.item-label-fixed) ::slotted(ion-datetime){--padding-start:8px}:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0}::slotted(.button-small){--padding-top:0;--padding-bottom:0;--padding-start:.6em;--padding-end:.6em;height:25px;font-size:12px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:55px}:host(.item-label-stacked) ::slotted(ion-select.legacy-select),:host(.item-label-floating) ::slotted(ion-select.legacy-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0}:host(.ion-focused:not(.ion-color)) ::slotted(.label-stacked),:host(.ion-focused:not(.ion-color)) ::slotted(.label-floating),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-stacked),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-floating){color:var(--ion-color-primary, #3880ff)}:host(.ion-color){--highlight-color-focused:var(--ion-color-contrast)}:host(.item-label-color){--highlight-color-focused:var(--ion-color-base)}:host(.item-fill-solid.ion-color),:host(.item-fill-outline.ion-color){--highlight-color-focused:var(--ion-color-base)}:host(.item-fill-solid){--background:var(--ion-color-step-50, #f2f2f2);--background-hover:var(--ion-color-step-100, #e6e6e6);--background-focused:var(--ion-color-step-150, #d9d9d9);--border-width:0 0 1px 0;--inner-border-width:0;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.item-fill-solid),:host-context([dir=rtl]).item-fill-solid{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.item-fill-solid):dir(rtl){border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}}:host(.item-fill-solid) .item-native{--border-color:var(--ion-color-step-500, gray)}:host(.item-fill-solid.ion-focused) .item-native,:host(.item-fill-solid.item-has-focus) .item-native{--background:var(--background-focused)}:host(.item-fill-solid.item-shape-round){border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.item-fill-solid.item-shape-round),:host-context([dir=rtl]).item-fill-solid.item-shape-round{border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.item-fill-solid.item-shape-round):dir(rtl){border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}}@media (any-hover: hover){:host(.item-fill-solid:hover) .item-native{--background:var(--background-hover);--border-color:var(--ion-color-step-750, #404040)}}:host(.item-fill-outline){--ripple-color:transparent;--background-focused:transparent;--background-hover:transparent;--border-color:var(--ion-color-step-500, gray);--border-width:1px;border:none;overflow:visible}:host(.item-fill-outline) .item-native{--native-padding-left:16px;border-radius:4px}:host(.item-fill-outline.item-shape-round) .item-native{--inner-padding-start:16px;border-radius:28px}:host(.item-fill-outline.item-shape-round) .item-bottom{-webkit-padding-start:32px;padding-inline-start:32px}:host(.item-fill-outline.item-label-floating.ion-focused) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.ion-focused) .item-native ::slotted(ion-textarea:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-focus) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-focus) .item-native ::slotted(ion-textarea:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-value) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-value) .item-native ::slotted(ion-textarea:not(:first-child)){-webkit-transform:translateY(-14px);transform:translateY(-14px)}@media (any-hover: hover){:host(.item-fill-outline:hover) .item-native{--border-color:var(--ion-color-step-750, #404040)}}.item-counter{letter-spacing:0.0333333333em}'}}},[49,"ion-item",{color:[513],button:[4],detail:[4],detailIcon:[1,"detail-icon"],disabled:[4],download:[1],fill:[1],shape:[1],href:[1],rel:[1],lines:[1],counter:[4],routerAnimation:[16],routerDirection:[1,"router-direction"],target:[1],type:[1],counterFormatter:[16],multipleInputs:[32],focusable:[32],counterString:[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]]),kv=sf(class extends wf{constructor(){super(),this.__registerHost(),this.ionColor=Ep(this,"ionColor",7),this.ionStyle=Ep(this,"ionStyle",7),this.inRange=!1,this.color=void 0,this.position=void 0,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate="floating"===this.position,this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout((()=>{this.noAnimate=!1}),1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:e}=this;this.ionColor.emit({"item-label-color":void 0!==e,[`ion-color-${e}`]:void 0!==e})}emitStyle(){const{inRange:e,position:t}=this;e||this.ionStyle.emit({label:!0,[`label-${t}`]:void 0!==t})}render(){const e=this.position,t=rg(this);return yp(xp,{class:nv(this.color,{[t]:!0,"in-item-color":tv("ion-item.ion-color",this.el),[`label-${e}`]:void 0!==e,"label-no-animate":this.noAnimate,"label-rtl":"rtl"===document.dir})})}get el(){return this}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}static get style(){return{ios:".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{white-space:normal}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{font-size:14px;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:14px}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.label-floating.sc-ion-label-ios-h:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:22px;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:17px;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4)}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",md:'.item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{white-space:normal}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(-6px) scale(0.75);transform:translateY(-6px) scale(0.75);position:relative;max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content;background-color:var(--ion-item-background, var(--ion-background-color, #fff));overflow:visible;z-index:3}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{position:absolute;width:4px;height:100%;background-color:var(--ion-item-background, var(--ion-background-color, #fff));content:""}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before{left:calc(-1 * 4px)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{right:calc(-1 * 4px)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.sc-ion-label-md-h{-webkit-transform:translateX(-32px) translateY(-6px) scale(0.75);transform:translateX(-32px) translateY(-6px) scale(0.75)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating.label-rtl,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75);transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #3880ff)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.item-fill-solid.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-base)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:20px;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, #666666)}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}'}}},[34,"ion-label",{color:[513],position:[1],noAnimate:[32]}]),Ev=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.horizontal=void 0,this.vertical=void 0,this.edge=!1,this.activated=!1}activatedChanged(){const e=this.activated,t=this.getFab();t&&(t.activated=e),Array.from(this.el.querySelectorAll("ion-fab-list")).forEach((t=>{t.activated=e}))}componentDidLoad(){this.activated&&this.activatedChanged()}async close(){this.activated=!1}getFab(){return this.el.querySelector("ion-fab-button")}async toggle(){this.el.querySelector("ion-fab-list")&&(this.activated=!this.activated)}render(){const{horizontal:e,vertical:t,edge:n}=this,r=rg(this);return yp(xp,{class:{[r]:!0,[`fab-horizontal-${e}`]:void 0!==e,[`fab-vertical-${t}`]:void 0!==t,"fab-edge":n}},yp("slot",null))}get el(){return this}static get watchers(){return{activated:["activatedChanged"]}}static get style(){return":host{position:absolute;z-index:999}:host(.fab-horizontal-center){-webkit-margin-start:-28px;margin-inline-start:-28px}@supports (inset-inline-start: 0){:host(.fab-horizontal-center){inset-inline-start:50%}}@supports not (inset-inline-start: 0){:host(.fab-horizontal-center){left:50%}:host-context([dir=rtl]):host(.fab-horizontal-center),:host-context([dir=rtl]).fab-horizontal-center{left:unset;right:unset;right:50%}@supports selector(:dir(rtl)){:host(.fab-horizontal-center):dir(rtl){left:unset;right:unset;right:50%}}}@supports (inset-inline-start: 0){:host(.fab-horizontal-start){inset-inline-start:calc(10px + var(--ion-safe-area-left, 0px))}}@supports not (inset-inline-start: 0){:host(.fab-horizontal-start){left:calc(10px + var(--ion-safe-area-left, 0px))}:host-context([dir=rtl]):host(.fab-horizontal-start),:host-context([dir=rtl]).fab-horizontal-start{left:unset;right:unset;right:calc(10px + var(--ion-safe-area-left, 0px))}@supports selector(:dir(rtl)){:host(.fab-horizontal-start):dir(rtl){left:unset;right:unset;right:calc(10px + var(--ion-safe-area-left, 0px))}}}@supports (inset-inline-start: 0){:host(.fab-horizontal-end){inset-inline-end:calc(10px + var(--ion-safe-area-right, 0px))}}@supports not (inset-inline-start: 0){:host(.fab-horizontal-end){right:calc(10px + var(--ion-safe-area-right, 0px))}:host-context([dir=rtl]):host(.fab-horizontal-end),:host-context([dir=rtl]).fab-horizontal-end{left:unset;right:unset;left:calc(10px + var(--ion-safe-area-right, 0px))}@supports selector(:dir(rtl)){:host(.fab-horizontal-end):dir(rtl){left:unset;right:unset;left:calc(10px + var(--ion-safe-area-right, 0px))}}}:host(.fab-vertical-top){top:10px}:host(.fab-vertical-top.fab-edge){top:-28px}:host(.fab-vertical-bottom){bottom:10px}:host(.fab-vertical-bottom.fab-edge){bottom:-28px}:host(.fab-vertical-center){margin-top:-28px;top:50%}"}},[1,"ion-fab",{horizontal:[1],vertical:[1],edge:[4],activated:[1028],close:[64],toggle:[64]}]),Sv=function(){"undefined"!=typeof customElements&&["ion-fab"].forEach((e=>{"ion-fab"===e&&(customElements.get(e)||customElements.define(e,Ev))}))},Cv="ion-content",Tv=".ion-content-scroll-host",Mv=`${Cv}, ${Tv}`,Iv=e=>"ION-CONTENT"===e.tagName,Ov=e("j",(async e=>Iv(e)?(await new Promise((t=>Rf(e,t))),e.getScrollElement()):e)),Av=e=>{const t=e.querySelector(Tv);return t||e.querySelector(Mv)},Pv=e("f",(e=>e.closest(Mv))),Dv=(e("s",((e,t)=>Iv(e)?e.scrollToTop(t):Promise.resolve(e.scrollTo({top:0,left:0,behavior:t>0?"smooth":"auto"})))),e("k",((e,t,n,r)=>Iv(e)?e.scrollByPoint(t,n,r):Promise.resolve(e.scrollBy({top:n,left:t,behavior:r>0?"smooth":"auto"})))),e=>((e,...t)=>console.error(`<${e.tagName.toLowerCase()}> must be used inside ${t.join(" or ")}.`))(e,Cv)),Lv=e=>{if(Iv(e)){const t=e,n=t.scrollY;return t.scrollY=!1,n}return e.style.setProperty("overflow","hidden"),!0};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
var Rv;e("g",Rv),function(e){e.Body="body",e.Ionic="ionic",e.Native="native",e.None="none"}(Rv||e("g",Rv={}));const zv=e("K",{getEngine(){var e;return(null===(e=null==Df?void 0:Df.Capacitor)||void 0===e?void 0:e.isPluginAvailable("Keyboard"))&&(null==Df?void 0:Df.Capacitor.Plugins.Keyboard)},getResizeMode(){const e=this.getEngine();return(null==e?void 0:e.getResizeMode)?e.getResizeMode().catch((e=>{if("UNIMPLEMENTED"!==e.code)throw e})):Promise.resolve(void 0)}}),jv=e=>{if(void 0===Lf||e===Rv.None||void 0===e)return null;const t=Lf.querySelector("ion-app");return null!=t?t:Lf.body},Nv=e=>{const t=jv(e);return null===t?0:t.clientHeight},Bv=e=>{const t=document.querySelector(`${e}.ion-cloned-element`);if(null!==t)return t;const n=document.createElement(e);return n.classList.add("ion-cloned-element"),n.style.setProperty("display","none"),document.body.appendChild(n),n},Fv=e=>{if(!e)return;const t=e.querySelectorAll("ion-toolbar");return{el:e,toolbars:Array.from(t).map((e=>{const t=e.querySelector("ion-title");return{el:e,background:e.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:t,innerTitleEl:t?t.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(e.querySelectorAll("ion-buttons"))}}))}},Vv=(e,t)=>{"fade"!==e.collapse&&(void 0===t?e.style.removeProperty("--opacity-scale"):e.style.setProperty("--opacity-scale",t.toString()))},Uv=(e,t,n,r)=>{Pf((()=>{const i=r.scrollTop;((e,t,n)=>{if(!e[0].isIntersecting)return;const r=e[0].intersectionRatio>.9||n<=0?0:100*(1-e[0].intersectionRatio)/75;Vv(t.el,1===r?void 0:r)})(e,t,i);const o=e[0],a=o.intersectionRect,s=a.width*a.height,l=o.rootBounds.width*o.rootBounds.height,c=0===s&&0===l,u=Math.abs(a.left-o.boundingClientRect.left),d=Math.abs(a.right-o.boundingClientRect.right);c||s>0&&(u>=5||d>=5)||(o.isIntersecting?($v(t,!1),$v(n)):(0===a.x&&0===a.y||0!==a.width&&0!==a.height)&&i>0&&($v(t),$v(n,!1),Vv(t.el)))}))},$v=(e,t=!0)=>{const n=e.el;t?(n.classList.remove("header-collapse-condense-inactive"),n.removeAttribute("aria-hidden")):(n.classList.add("header-collapse-condense-inactive"),n.setAttribute("aria-hidden","true"))},Zv=(e=[],t=1,n=!1)=>{e.forEach((e=>{const r=e.ionTitleEl,i=e.innerTitleEl;r&&"large"===r.size&&(i.style.transition=n?"all 0.2s ease-in-out":"",i.style.transform=`scale3d(${t}, ${t}, 1)`)}))},Hv=(e,t,n)=>{Af((()=>{const r=e.scrollTop,i=t.clientHeight,o=n?n.clientHeight:0;if(null!==n&&r<o)return t.style.setProperty("--opacity-scale","0"),void e.style.setProperty("clip-path",`inset(${i}px 0px 0px 0px)`);const a=Hf(0,(r-o)/10,1);Pf((()=>{e.style.removeProperty("clip-path"),t.style.setProperty("--opacity-scale",a.toString())}))}))},Wv=sf(class extends wf{constructor(){super(),this.__registerHost(),this.inheritedAttributes={},this.setupFadeHeader=async(e,t)=>{const n=this.scrollEl=await Ov(e);this.contentScrollCallback=()=>{Hv(this.scrollEl,this.el,t)},n.addEventListener("scroll",this.contentScrollCallback),Hv(this.scrollEl,this.el,t)},this.collapse=void 0,this.translucent=!1}componentWillLoad(){this.inheritedAttributes=Bf(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){if("ios"!==rg(this))return;const{collapse:e}=this,t="condense"===e,n="fade"===e;if(this.destroyCollapsibleHeader(),t){const e=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),t=e?Av(e):null;Pf((()=>{Bv("ion-title").size="large",Bv("ion-back-button")})),await this.setupCondenseHeader(t,e)}else if(n){const e=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),t=e?Av(e):null;if(!t)return void Dv(this.el);const n=t.querySelector('ion-header[collapse="condense"]');await this.setupFadeHeader(t,n)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCondenseHeader(e,t){if(!e||!t)return void Dv(this.el);if("undefined"==typeof IntersectionObserver)return;this.scrollEl=await Ov(e);const n=t.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from(n).find((e=>"condense"!==e.collapse)),!this.collapsibleMainHeader)return;const r=Fv(this.collapsibleMainHeader),i=Fv(this.el);r&&i&&($v(r,!1),Vv(r.el,0),this.intersectionObserver=new IntersectionObserver((e=>{Uv(e,r,i,this.scrollEl)}),{root:e,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(i.toolbars[i.toolbars.length-1].el),this.contentScrollCallback=()=>{((e,t,n)=>{Af((()=>{const r=e.scrollTop,i=Hf(1,1+-r/500,1.1);null===n.querySelector("ion-refresher.refresher-native")&&Pf((()=>{Zv(t.toolbars,i)}))}))})(this.scrollEl,i,e)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),Pf((()=>{void 0!==this.collapsibleMainHeader&&this.collapsibleMainHeader.classList.add("header-collapse-main")})))}render(){const{translucent:e,inheritedAttributes:t}=this,n=rg(this),r=this.collapse||"none",i=tv("ion-menu",this.el)?"none":"banner";return yp(xp,Object.assign({role:i,class:{[n]:!0,[`header-${n}`]:!0,"header-translucent":this.translucent,[`header-collapse-${r}`]:!0,[`header-translucent-${n}`]:this.translucent}},t),"ios"===n&&e&&yp("div",{class:"header-background"}),yp("slot",null))}get el(){return this}static get style(){return{ios:"ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:7px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{height:48px;padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}",md:"ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md{-webkit-box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12)}.header-collapse-condense{display:none}.header-md.ion-no-border{-webkit-box-shadow:none;box-shadow:none}"}}},[36,"ion-header",{collapse:[1],translucent:[4]}]),qv=function(){"undefined"!=typeof customElements&&["ion-header"].forEach((e=>{"ion-header"===e&&(customElements.get(e)||customElements.define(e,Wv))}))},Gv=(e,t)=>`${e} / ${t}`,Kv=sf(class extends wf{constructor(){super(),this.__registerHost(),this.ionInput=Ep(this,"ionInput",7),this.ionChange=Ep(this,"ionChange",7),this.ionBlur=Ep(this,"ionBlur",7),this.ionFocus=Ep(this,"ionFocus",7),this.ionStyle=Ep(this,"ionStyle",7),this.inputId="ion-input-"+Yv++,this.inheritedAttributes={},this.isComposing=!1,this.hasLoggedDeprecationWarning=!1,this.didInputClearOnEdit=!1,this.onInput=e=>{const t=e.target;t&&(this.value=t.value||""),this.emitInputChange(e)},this.onChange=e=>{this.emitValueChange(e)},this.onBlur=e=>{this.hasFocus=!1,this.emitStyle(),this.focusedValue!==this.value&&this.emitValueChange(e),this.didInputClearOnEdit=!1,this.ionBlur.emit(e)},this.onFocus=e=>{this.hasFocus=!0,this.focusedValue=this.value,this.emitStyle(),this.ionFocus.emit(e)},this.onKeydown=e=>{this.checkClearOnEdit(e)},this.onCompositionStart=()=>{this.isComposing=!0},this.onCompositionEnd=()=>{this.isComposing=!1},this.clearTextInput=e=>{this.clearInput&&!this.readonly&&!this.disabled&&e&&(e.preventDefault(),e.stopPropagation(),this.setFocus()),this.value="",this.emitInputChange(e)},this.hasFocus=!1,this.color=void 0,this.accept=void 0,this.autocapitalize="off",this.autocomplete="off",this.autocorrect="off",this.autofocus=!1,this.clearInput=!1,this.clearOnEdit=void 0,this.counter=!1,this.counterFormatter=void 0,this.debounce=void 0,this.disabled=!1,this.enterkeyhint=void 0,this.errorText=void 0,this.fill=void 0,this.inputmode=void 0,this.helperText=void 0,this.label=void 0,this.labelPlacement="start",this.legacy=void 0,this.max=void 0,this.maxlength=void 0,this.min=void 0,this.minlength=void 0,this.multiple=void 0,this.name=this.inputId,this.pattern=void 0,this.placeholder=void 0,this.readonly=!1,this.required=!1,this.shape=void 0,this.spellcheck=!1,this.step=void 0,this.size=void 0,this.type="text",this.value=""}debounceChanged(){const{ionInput:e,debounce:t,originalIonInput:n}=this;this.ionInput=void 0===t?null!=n?n:e:qf(e,t)}disabledChanged(){this.emitStyle()}placeholderChanged(){this.emitStyle()}valueChanged(){const e=this.nativeInput,t=this.getValue();e&&e.value!==t&&!this.isComposing&&(e.value=t),this.emitStyle()}componentWillLoad(){this.inheritedAttributes=Object.assign(Object.assign({},Bf(this.el)),jf(this.el,["tabindex","title","data-form-type"]))}connectedCallback(){const{el:e}=this;this.legacyFormController=(e=>{const t=e;let n;return{hasLegacyControl:()=>{if(void 0===n){const e=void 0!==t.label||lv(t),r=t.hasAttribute("aria-label")||t.hasAttribute("aria-labelledby")&&null===t.shadowRoot,i=Zf(t);n=!0===t.legacy||!e&&!r&&null!==i}return n}}})(e),this.slotMutationController=((e,t,n)=>{let r,i;void 0!==Df&&"MutationObserver"in Df&&(r=new MutationObserver((e=>{for(const r of e)for(const e of r.addedNodes)if(e.nodeType===Node.ELEMENT_NODE&&e.slot===t)return n(),void $f((()=>o(e)))})),r.observe(e,{childList:!0}));const o=e=>{var r;i&&(i.disconnect(),i=void 0),i=new MutationObserver((e=>{n();for(const n of e)for(const e of n.removedNodes)e.nodeType===Node.ELEMENT_NODE&&e.slot===t&&a()})),i.observe(null!==(r=e.parentElement)&&void 0!==r?r:e,{subtree:!0,childList:!0})},a=()=>{i&&(i.disconnect(),i=void 0)};return{destroy:()=>{r&&(r.disconnect(),r=void 0),a()}}})(e,"label",(()=>ef(this))),this.notchController=((e,t,n)=>{let r;const i=()=>void 0!==t()&&void 0===e.label&&null!==n(),o=()=>{const a=t();if(void 0===a)return;if(!i())return void a.style.removeProperty("width");const s=n().scrollWidth;if(0===s&&null===a.offsetParent&&void 0!==Df&&"IntersectionObserver"in Df){if(void 0!==r)return;const t=r=new IntersectionObserver((e=>{1===e[0].intersectionRatio&&(o(),t.disconnect(),r=void 0)}),{threshold:.01,root:e});t.observe(a)}else a.style.setProperty("width",.75*s+"px")};return{calculateNotchWidth:()=>{i()&&$f((()=>{o()}))},destroy:()=>{r&&(r.disconnect(),r=void 0)}}})(e,(()=>this.notchSpacerEl),(()=>this.labelSlot)),this.emitStyle(),this.debounceChanged(),document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:this.el}))}componentDidLoad(){this.originalIonInput=this.ionInput}componentDidRender(){var e;null===(e=this.notchController)||void 0===e||e.calculateNotchWidth()}disconnectedCallback(){document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el})),this.slotMutationController&&(this.slotMutationController.destroy(),this.slotMutationController=void 0),this.notchController&&(this.notchController.destroy(),this.notchController=void 0)}async setFocus(){this.nativeInput&&this.nativeInput.focus()}getInputElement(){return Promise.resolve(this.nativeInput)}emitValueChange(e){const{value:t}=this,n=null==t?t:t.toString();this.focusedValue=n,this.ionChange.emit({value:n,event:e})}emitInputChange(e){const{value:t}=this,n=null==t?t:t.toString();this.ionInput.emit({value:n,event:e})}shouldClearOnEdit(){const{type:e,clearOnEdit:t}=this;return void 0===t?"password"===e:t}getValue(){return"number"==typeof this.value?this.value.toString():(this.value||"").toString()}emitStyle(){this.legacyFormController.hasLegacyControl()&&this.ionStyle.emit({interactive:!0,input:!0,"has-placeholder":void 0!==this.placeholder,"has-value":this.hasValue(),"has-focus":this.hasFocus,"interactive-disabled":this.disabled})}checkClearOnEdit(e){this.shouldClearOnEdit()&&(!this.didInputClearOnEdit&&this.hasValue()&&"Enter"!==e.key&&(this.value="",this.emitInputChange(e)),this.didInputClearOnEdit=!0)}hasValue(){return this.getValue().length>0}renderHintText(){const{helperText:e,errorText:t}=this;return[yp("div",{class:"helper-text"},e),yp("div",{class:"error-text"},t)]}renderCounter(){const{counter:e,maxlength:t,counterFormatter:n,value:r}=this;if(!0===e&&void 0!==t)return yp("div",{class:"counter"},((e,t,n)=>{const r=null==e?0:e.toString().length,i=Gv(r,t);if(void 0===n)return i;try{return n(r,t)}catch($A){return cg("Exception in provided `counterFormatter`.",$A),i}})(r,t,n))}renderBottomContent(){const{counter:e,helperText:t,errorText:n,maxlength:r}=this;if(t||n||!0===e&&void 0!==r)return yp("div",{class:"input-bottom"},this.renderHintText(),this.renderCounter())}renderLabel(){const{label:e}=this;return yp("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},void 0===e?yp("slot",{name:"label"}):yp("div",{class:"label-text"},e))}get labelSlot(){return this.el.querySelector('[slot="label"]')}get hasLabel(){return void 0!==this.label||null!==this.labelSlot}renderLabelContainer(){return"md"===rg(this)&&"outline"===this.fill?[yp("div",{class:"input-outline-container"},yp("div",{class:"input-outline-start"}),yp("div",{class:{"input-outline-notch":!0,"input-outline-notch-hidden":!this.hasLabel}},yp("div",{class:"notch-spacer","aria-hidden":"true",ref:e=>this.notchSpacerEl=e},this.label)),yp("div",{class:"input-outline-end"})),this.renderLabel()]:this.renderLabel()}renderInput(){const{disabled:e,fill:t,readonly:n,shape:r,inputId:i,labelPlacement:o}=this,a=rg(this),s=this.getValue(),l=tv("ion-item",this.el),c="md"===a&&"outline"!==t&&!l;return yp(xp,{class:nv(this.color,{[a]:!0,"has-value":this.hasValue(),"has-focus":this.hasFocus,[`input-fill-${t}`]:void 0!==t,[`input-shape-${r}`]:void 0!==r,[`input-label-placement-${o}`]:!0,"in-item":l,"in-item-color":tv("ion-item.ion-color",this.el),"input-disabled":e})},yp("label",{class:"input-wrapper"},this.renderLabelContainer(),yp("div",{class:"native-wrapper"},yp("input",Object.assign({class:"native-input",ref:e=>this.nativeInput=e,id:i,disabled:e,accept:this.accept,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:n,required:this.required,spellcheck:this.spellcheck,step:this.step,size:this.size,type:this.type,value:s,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown,onCompositionstart:this.onCompositionStart,onCompositionend:this.onCompositionEnd},this.inheritedAttributes)),this.clearInput&&!n&&!e&&yp("button",{"aria-label":"reset",type:"button",class:"input-clear-icon",onPointerDown:e=>{e.preventDefault()},onClick:this.clearTextInput},yp("ion-icon",{"aria-hidden":"true",icon:"ios"===a?Rg:zg}))),c&&yp("div",{class:"input-highlight"})),this.renderBottomContent())}renderLegacyInput(){this.hasLoggedDeprecationWarning||(lg('ion-input now requires providing a label with either the "label" property or the "aria-label" attribute. To migrate, remove any usage of "ion-label" and pass the label text to either the "label" property or the "aria-label" attribute.\n\nExample: <ion-input label="Email"></ion-input>\nExample with aria-label: <ion-input aria-label="Email"></ion-input>\n\nFor inputs that do not render the label immediately next to the input, developers may continue to use "ion-label" but must manually associate the label with the input by using "aria-labelledby".\n\nDevelopers can use the "legacy" property to continue using the legacy form markup. This property will be removed in an upcoming major release of Ionic where this form control will use the modern form markup.',this.el),this.legacy&&lg('ion-input is being used with the "legacy" property enabled which will forcibly enable the legacy form markup. This property will be removed in an upcoming major release of Ionic where this form control will use the modern form markup.\n\nDevelopers can dismiss this warning by removing their usage of the "legacy" property and using the new input syntax.',this.el),this.hasLoggedDeprecationWarning=!0);const e=rg(this),t=this.getValue(),n=this.inputId+"-lbl",r=Zf(this.el);return r&&(r.id=n),yp(xp,{"aria-disabled":this.disabled?"true":null,class:nv(this.color,{[e]:!0,"has-value":this.hasValue(),"has-focus":this.hasFocus,"legacy-input":!0,"in-item-color":tv("ion-item.ion-color",this.el)})},yp("input",Object.assign({class:"native-input",ref:e=>this.nativeInput=e,"aria-labelledby":r?r.id:null,disabled:this.disabled,accept:this.accept,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readonly,required:this.required,spellcheck:this.spellcheck,step:this.step,size:this.size,type:this.type,value:t,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown},this.inheritedAttributes)),this.clearInput&&!this.readonly&&!this.disabled&&yp("button",{"aria-label":"reset",type:"button",class:"input-clear-icon",onPointerDown:e=>{e.preventDefault()},onClick:this.clearTextInput},yp("ion-icon",{"aria-hidden":"true",icon:"ios"===e?Rg:zg})))}render(){const{legacyFormController:e}=this;return e.hasLegacyControl()?this.renderLegacyInput():this.renderInput()}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],disabled:["disabledChanged"],placeholder:["placeholderChanged"],value:["valueChanged"]}}static get style(){return{ios:".sc-ion-input-ios-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:0.6;--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}.legacy-input.sc-ion-input-ios-h{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;background:var(--background)}.legacy-input.sc-ion-input-ios-h .native-input.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius)}ion-item.sc-ion-input-ios-h:not(.item-label):not(.item-has-modern-input),ion-item:not(.item-label):not(.item-has-modern-input) .sc-ion-input-ios-h{--padding-start:0}ion-item[slot=start].sc-ion-input-ios-h,ion-item [slot=start].sc-ion-input-ios-h,ion-item[slot=end].sc-ion-input-ios-h,ion-item [slot=end].sc-ion-input-ios-h{width:auto}.legacy-input.ion-color.sc-ion-input-ios-h{color:var(--ion-color-base)}.ion-color.sc-ion-input-ios-h{--highlight-color-focused:var(--ion-color-base)}.native-input.sc-ion-input-ios{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-ios::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-ios:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-ios::-ms-clear{display:none}.cloned-input.sc-ion-input-ios{top:0;bottom:0;position:absolute;pointer-events:none}@supports (inset-inline-start: 0){.cloned-input.sc-ion-input-ios{inset-inline-start:0}}@supports not (inset-inline-start: 0){.cloned-input.sc-ion-input-ios{left:0}[dir=rtl].sc-ion-input-ios-h .cloned-input.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h .cloned-input.sc-ion-input-ios{left:unset;right:unset;right:0}[dir=rtl].sc-ion-input-ios .cloned-input.sc-ion-input-ios{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.cloned-input.sc-ion-input-ios:dir(rtl){left:unset;right:unset;right:0}}}.cloned-input.sc-ion-input-ios:disabled{opacity:1}.legacy-input.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.input-clear-icon.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, #666666);visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{color:inherit}.input-clear-icon.sc-ion-input-ios:focus{opacity:0.5}.has-value.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{visibility:visible}.has-focus.sc-ion-input-ios-h{pointer-events:none}.has-focus.sc-ion-input-ios-h input.sc-ion-input-ios,.has-focus.sc-ion-input-ios-h a.sc-ion-input-ios,.has-focus.sc-ion-input-ios-h button.sc-ion-input-ios{pointer-events:auto}.item-label-floating.item-has-placeholder.sc-ion-input-ios-h:not(.item-has-value),.item-label-floating.item-has-placeholder:not(.item-has-value) .sc-ion-input-ios-h{opacity:0}.item-label-floating.item-has-placeholder.sc-ion-input-ios-h:not(.item-has-value).item-has-focus,.item-label-floating.item-has-placeholder:not(.item-has-value).item-has-focus .sc-ion-input-ios-h{-webkit-transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:1}.input-wrapper.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;width:100%}.ion-touched.ion-invalid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:12px}.has-focus.ion-valid.sc-ion-input-ios-h,.ion-touched.ion-invalid.sc-ion-input-ios-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:block;color:var(--ion-color-step-550, #737373)}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:block}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:none}.input-bottom.sc-ion-input-ios .counter.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-ios-h input.sc-ion-input-ios{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-ios,.sc-ion-input-ios-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-ios,.input-outline-notch-hidden.sc-ion-input-ios{display:none}.input-wrapper.sc-ion-input-ios input.sc-ion-input-ios{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text.sc-ion-input-ios{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%}[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios:dir(rtl),.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-ios-h input.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios,.has-value.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:1}.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.has-focus.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.has-value.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.sc-ion-input-ios-h{--border-width:0.55px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));font-size:inherit}.legacy-input.sc-ion-input-ios-h{--padding-top:10px;--padding-end:8px;--padding-bottom:10px;--padding-start:0}.item-label-stacked.sc-ion-input-ios-h,.item-label-stacked .sc-ion-input-ios-h,.item-label-floating.sc-ion-input-ios-h,.item-label-floating .sc-ion-input-ios-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0px}.input-clear-icon.sc-ion-input-ios ion-icon.sc-ion-input-ios{width:18px;height:18px}.sc-ion-input-ios-h:not(.legacy-input){min-height:44px}.input-label-placement-floating.sc-ion-input-ios-h,.input-label-placement-stacked.sc-ion-input-ios-h{min-height:56px}.legacy-input.sc-ion-input-ios-h .native-input[disabled].sc-ion-input-ios,.input-disabled.sc-ion-input-ios-h{opacity:0.3}",md:".sc-ion-input-md-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:0.6;--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}.legacy-input.sc-ion-input-md-h{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;background:var(--background)}.legacy-input.sc-ion-input-md-h .native-input.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius)}ion-item.sc-ion-input-md-h:not(.item-label):not(.item-has-modern-input),ion-item:not(.item-label):not(.item-has-modern-input) .sc-ion-input-md-h{--padding-start:0}ion-item[slot=start].sc-ion-input-md-h,ion-item [slot=start].sc-ion-input-md-h,ion-item[slot=end].sc-ion-input-md-h,ion-item [slot=end].sc-ion-input-md-h{width:auto}.legacy-input.ion-color.sc-ion-input-md-h{color:var(--ion-color-base)}.ion-color.sc-ion-input-md-h{--highlight-color-focused:var(--ion-color-base)}.native-input.sc-ion-input-md{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-md::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-md:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-md::-ms-clear{display:none}.cloned-input.sc-ion-input-md{top:0;bottom:0;position:absolute;pointer-events:none}@supports (inset-inline-start: 0){.cloned-input.sc-ion-input-md{inset-inline-start:0}}@supports not (inset-inline-start: 0){.cloned-input.sc-ion-input-md{left:0}[dir=rtl].sc-ion-input-md-h .cloned-input.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h .cloned-input.sc-ion-input-md{left:unset;right:unset;right:0}[dir=rtl].sc-ion-input-md .cloned-input.sc-ion-input-md{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.cloned-input.sc-ion-input-md:dir(rtl){left:unset;right:unset;right:0}}}.cloned-input.sc-ion-input-md:disabled{opacity:1}.legacy-input.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.input-clear-icon.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, #666666);visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{color:inherit}.input-clear-icon.sc-ion-input-md:focus{opacity:0.5}.has-value.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{visibility:visible}.has-focus.sc-ion-input-md-h{pointer-events:none}.has-focus.sc-ion-input-md-h input.sc-ion-input-md,.has-focus.sc-ion-input-md-h a.sc-ion-input-md,.has-focus.sc-ion-input-md-h button.sc-ion-input-md{pointer-events:auto}.item-label-floating.item-has-placeholder.sc-ion-input-md-h:not(.item-has-value),.item-label-floating.item-has-placeholder:not(.item-has-value) .sc-ion-input-md-h{opacity:0}.item-label-floating.item-has-placeholder.sc-ion-input-md-h:not(.item-has-value).item-has-focus,.item-label-floating.item-has-placeholder:not(.item-has-value).item-has-focus .sc-ion-input-md-h{-webkit-transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:1}.input-wrapper.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;width:100%}.ion-touched.ion-invalid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:12px}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:block;color:var(--ion-color-step-550, #737373)}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:block}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:none}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-md-h input.sc-ion-input-md{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-md,.sc-ion-input-md-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-md,.input-outline-notch-hidden.sc-ion-input-md{display:none}.input-wrapper.sc-ion-input-md input.sc-ion-input-md{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text.sc-ion-input-md{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%}[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl),.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md,.has-value.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:1}.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-value.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.input-fill-solid.sc-ion-input-md-h{--background:var(--ion-color-step-50, #f2f2f2);--border-color:var(--ion-color-step-500, gray);--border-radius:4px;--padding-start:16px;--padding-end:16px}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:var(--border-width) var(--border-style) var(--border-color)}.has-focus.input-fill-solid.ion-valid.sc-ion-input-md-h,.input-fill-solid.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-fill-solid.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}@media (any-hover: hover){.input-fill-solid.sc-ion-input-md-h:hover{--background:var(--ion-color-step-100, #e6e6e6);--border-color:var(--ion-color-step-750, #404040)}}.input-fill-solid.has-focus.sc-ion-input-md-h{--background:var(--ion-color-step-150, #d9d9d9);--border-color:var(--ion-color-step-750, #404040)}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0px;border-bottom-left-radius:0px}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,[dir=rtl].input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0px;border-bottom-left-radius:0px}@supports selector(:dir(rtl)){.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0px;border-bottom-left-radius:0px}}.input-fill-solid.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-fill-solid.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-value.input-fill-solid.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{max-width:calc(100% / 0.75)}.input-fill-outline.sc-ion-input-md-h{--border-color:var(--ion-color-step-300, #b3b3b3);--border-radius:4px;--padding-start:16px;--padding-end:16px}.input-fill-outline.input-shape-round.sc-ion-input-md-h{--border-radius:28px;--padding-start:32px;--padding-end:32px}.has-focus.input-fill-outline.ion-valid.sc-ion-input-md-h,.input-fill-outline.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}@media (any-hover: hover){.input-fill-outline.sc-ion-input-md-h:hover{--border-color:var(--ion-color-step-750, #404040)}}.input-fill-outline.has-focus.sc-ion-input-md-h{--border-width:2px;--border-color:var(--highlight-color)}.input-fill-outline.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}.input-fill-outline.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:none}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;position:absolute;max-width:calc(100% - var(--padding-start) - var(--padding-end))}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl),.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.input-fill-outline.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{position:relative;z-index:1}.has-focus.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-value.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(-32%) scale(0.75);transform:translateY(-32%) scale(0.75);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;max-width:calc((100% - var(--padding-start) - var(--padding-end) - 8px) / 0.75)}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:6px;margin-bottom:6px}.input-fill-outline.sc-ion-input-md-h .input-outline-container.sc-ion-input-md{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;width:100%;height:100%}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{pointer-events:none}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{border-top:var(--border-width) var(--border-style) var(--border-color);border-bottom:var(--border-width) var(--border-style) var(--border-color)}.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{max-width:calc(100% - var(--padding-start) - var(--padding-end))}.input-fill-outline.sc-ion-input-md-h .notch-spacer.sc-ion-input-md{-webkit-padding-end:8px;padding-inline-end:8px;font-size:calc(1em * 0.75);opacity:0;pointer-events:none;-webkit-box-sizing:content-box;box-sizing:content-box}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:var(--border-radius);-webkit-border-start:var(--border-width) var(--border-style) var(--border-color);border-inline-start:var(--border-width) var(--border-style) var(--border-color);width:calc(var(--padding-start) - 4px)}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,[dir=rtl].input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,[dir=rtl] .input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md{border-top-left-radius:0px;border-top-right-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);border-bottom-left-radius:0px}@supports selector(:dir(rtl)){.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md:dir(rtl){border-top-left-radius:0px;border-top-right-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);border-bottom-left-radius:0px}}.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{-webkit-border-end:var(--border-width) var(--border-style) var(--border-color);border-inline-end:var(--border-width) var(--border-style) var(--border-color);border-top-left-radius:0px;border-top-right-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);border-bottom-left-radius:0px;-ms-flex-positive:1;flex-grow:1}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md,[dir=rtl].input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md,[dir=rtl] .input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{border-top-left-radius:var(--border-radius);border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:var(--border-radius)}@supports selector(:dir(rtl)){.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:var(--border-radius)}}.has-focus.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.has-value.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{border-top:none}.sc-ion-input-md-h{--border-width:1px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));font-size:inherit}.legacy-input.sc-ion-input-md-h{--padding-top:10px;--padding-end:0;--padding-bottom:10px;--padding-start:8px}.item-label-stacked.sc-ion-input-md-h,.item-label-stacked .sc-ion-input-md-h,.item-label-floating.sc-ion-input-md-h,.item-label-floating .sc-ion-input-md-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0}.input-clear-icon.sc-ion-input-md ion-icon.sc-ion-input-md{width:22px;height:22px}.legacy-input.sc-ion-input-md-h .native-input[disabled].sc-ion-input-md,.input-disabled.sc-ion-input-md-h{opacity:0.38}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{letter-spacing:0.0333333333em}.sc-ion-input-md-h:not(.legacy-input){min-height:56px}.input-label-placement-floating.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.has-focus.input-label-placement-floating.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-label-placement-stacked.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.input-highlight.sc-ion-input-md{bottom:-1px;position:absolute;width:100%;height:2px;-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform 200ms;transition:-webkit-transform 200ms;transition:transform 200ms;transition:transform 200ms, -webkit-transform 200ms;background:var(--highlight-color)}@supports (inset-inline-start: 0){.input-highlight.sc-ion-input-md{inset-inline-start:0}}@supports not (inset-inline-start: 0){.input-highlight.sc-ion-input-md{left:0}[dir=rtl].sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h .input-highlight.sc-ion-input-md{left:unset;right:unset;right:0}[dir=rtl].sc-ion-input-md .input-highlight.sc-ion-input-md{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.input-highlight.sc-ion-input-md:dir(rtl){left:unset;right:unset;right:0}}}.has-focus.sc-ion-input-md-h .input-highlight.sc-ion-input-md{-webkit-transform:scale(1);transform:scale(1)}.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{bottom:0}@supports (inset-inline-start: 0){.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{inset-inline-start:0}}@supports not (inset-inline-start: 0){.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{left:0}[dir=rtl].sc-ion-input-md-h -no-combinator.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl].in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md,[dir=rtl] .in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md:dir(rtl){left:unset;right:unset;right:0}}}.input-shape-round.sc-ion-input-md-h{--border-radius:16px}"}}},[38,"ion-input",{color:[513],accept:[1],autocapitalize:[1],autocomplete:[1],autocorrect:[1],autofocus:[4],clearInput:[4,"clear-input"],clearOnEdit:[4,"clear-on-edit"],counter:[4],counterFormatter:[16],debounce:[2],disabled:[4],enterkeyhint:[1],errorText:[1,"error-text"],fill:[1],inputmode:[1],helperText:[1,"helper-text"],label:[1],labelPlacement:[1,"label-placement"],legacy:[4],max:[8],maxlength:[2],min:[8],minlength:[2],multiple:[4],name:[1],pattern:[1],placeholder:[1],readonly:[4],required:[4],shape:[1],spellcheck:[4],step:[1],size:[2],type:[1],value:[1032],hasFocus:[32],setFocus:[64],getInputElement:[64]}]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */let Yv=0;const Xv=function(){"undefined"!=typeof customElements&&["ion-input","ion-icon"].forEach((e=>{switch(e){case"ion-input":customElements.get(e)||customElements.define(e,Kv);break;case"ion-icon":customElements.get(e)||"undefined"!=typeof customElements&&["ion-icon"].forEach((e=>{"ion-icon"===e&&(customElements.get(e)||customElements.define(e,Kg))}))}}))},Jv=function(){"undefined"!=typeof customElements&&["ion-label"].forEach((e=>{"ion-label"===e&&(customElements.get(e)||customElements.define(e,kv))}))}
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */;
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */class Qv{constructor(e,t){this.component=e,this.params=t,this.state=1}async init(e){if(this.state=2,!this.element){const t=this.component;this.element=await ag(this.delegate,e,t,["ion-page","ion-page-invisible"],this.params)}}_destroy(){Wf(3!==this.state,"view state must be ATTACHED");const e=this.element;e&&(this.delegate?this.delegate.removeViewFromDom(e.parentElement,e):e.remove()),this.nav=void 0,this.state=3}}const ey=(e,t,n)=>!!e&&e.component===t&&Kf(e.params,n),ty=(e,t)=>e?e instanceof Qv?e:new Qv(e,t):null,ny=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Ep(this,"ionNavWillLoad",7),this.ionNavWillChange=Ep(this,"ionNavWillChange",3),this.ionNavDidChange=Ep(this,"ionNavDidChange",3),this.transInstr=[],this.animationEnabled=!0,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.didLoad=!1,this.delegate=void 0,this.swipeGesture=void 0,this.animated=!0,this.animation=void 0,this.rootParams=void 0,this.root=void 0}swipeGestureChanged(){this.gesture&&this.gesture.enable(!0===this.swipeGesture)}rootChanged(){void 0!==this.root&&!1!==this.didLoad&&(this.useRouter||void 0!==this.root&&this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=null!==document.querySelector("ion-router")&&null===this.el.closest("[no-router]"),void 0===this.swipeGesture){const e=rg(this);this.swipeGesture=Fm.getBoolean("swipeBackEnabled","ios"===e)}this.ionNavWillLoad.emit()}async componentDidLoad(){this.didLoad=!0,this.rootChanged(),this.gesture=(await Qh((()=>t.import("./swipe-back-legacy-efa71c75.js")))).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const e of this.views)bm(e.element,am),e._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(e,t,n,r){return this.insert(-1,e,t,n,r)}insert(e,t,n,r,i){return this.insertPages(e,[{component:t,componentProps:n}],r,i)}insertPages(e,t,n,r){return this.queueTrns({insertStart:e,insertViews:t,opts:n},r)}pop(e,t){return this.removeIndex(-1,1,e,t)}popTo(e,t,n){const r={removeStart:-1,removeCount:-1,opts:t};return"object"==typeof e&&e.component?(r.removeView=e,r.removeStart=1):"number"==typeof e&&(r.removeStart=e+1),this.queueTrns(r,n)}popToRoot(e,t){return this.removeIndex(1,-1,e,t)}removeIndex(e,t=1,n,r){return this.queueTrns({removeStart:e,removeCount:t,opts:n},r)}setRoot(e,t,n,r){return this.setPages([{component:e,componentProps:t}],n,r)}setPages(e,t,n){return null!=t||(t={}),!0!==t.animated&&(t.animated=!1),this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:t},n)}setRouteId(e,t,n,r){const i=this.getActiveSync();if(ey(i,e,t))return Promise.resolve({changed:!1,element:i.element});let o;const a=new Promise((e=>o=e));let s;const l={updateURL:!1,viewIsReady:e=>{let t;const n=new Promise((e=>t=e));return o({changed:!0,element:e,markVisible:async()=>{t(),await s}}),n}};if("root"===n)s=this.setRoot(e,t,l);else{const i=this.views.find((n=>ey(n,e,t)));i?s=this.popTo(i,Object.assign(Object.assign({},l),{direction:"back",animationBuilder:r})):"forward"===n?s=this.push(e,t,Object.assign(Object.assign({},l),{animationBuilder:r})):"back"===n&&(s=this.setRoot(e,t,Object.assign(Object.assign({},l),{direction:"back",animated:!0,animationBuilder:r})))}return a}async getRouteId(){const e=this.getActiveSync();if(e)return{id:e.element.tagName,params:e.params,element:e.element}}async getActive(){return this.getActiveSync()}async getByIndex(e){return this.views[e]}async canGoBack(e){return this.canGoBackSync(e)}async getPrevious(e){return this.getPreviousSync(e)}getLength(){return this.views.length}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(e=this.getActiveSync()){return!(!e||!this.getPreviousSync(e))}getPreviousSync(e=this.getActiveSync()){if(!e)return;const t=this.views,n=t.indexOf(e);return n>0?t[n-1]:void 0}async queueTrns(e,t){var n,r;if(this.isTransitioning&&(null===(n=e.opts)||void 0===n?void 0:n.skipIfBusy))return!1;const i=new Promise(((t,n)=>{e.resolve=t,e.reject=n}));if(e.done=t,e.opts&&!1!==e.opts.updateURL&&this.useRouter){const t=document.querySelector("ion-router");if(t){const n=await t.canTransition();if(!1===n)return!1;if("string"==typeof n)return t.push(n,e.opts.direction||"back"),!1}}return 0===(null===(r=e.insertViews)||void 0===r?void 0:r.length)&&(e.insertViews=void 0),this.transInstr.push(e),this.nextTrns(),i}success(e,t){if(this.destroyed)this.fireError("nav controller was destroyed",t);else if(t.done&&t.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction),t.resolve(e.hasCompleted),!1!==t.opts.updateURL&&this.useRouter){const t=document.querySelector("ion-router");if(t){const n="back"===e.direction?"back":"forward";t.navChanged(n)}}}failed(e,t){this.destroyed?this.fireError("nav controller was destroyed",t):(this.transInstr.length=0,this.fireError(e,t))}fireError(e,t){t.done&&t.done(!1,!1,e),t.reject&&!this.destroyed?t.reject(e):t.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const e=this.transInstr.shift();return!!e&&(this.runTransition(e),!0)}async runTransition(e){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(e);const t=this.getActiveSync(),n=this.getEnteringView(e,t);if(!t&&!n)throw new Error("no views in the stack to be removed");n&&1===n.state&&await n.init(this.el),this.postViewInit(n,t,e);const r=(e.enteringRequiresTransition||e.leavingRequiresTransition)&&n!==t;let i;r&&e.opts&&t&&("back"===e.opts.direction&&(e.opts.animationBuilder=e.opts.animationBuilder||(null==n?void 0:n.animationBuilder)),t.animationBuilder=e.opts.animationBuilder),i=r?await this.transition(n,t,e):{hasCompleted:!0,requiresTransition:!1},this.success(i,e),this.ionNavDidChange.emit()}catch(t){this.failed(t,e)}this.isTransitioning=!1,this.nextTrns()}prepareTI(e){var t,n,r;const i=this.views.length;if(null!==(t=e.opts)&&void 0!==t||(e.opts={}),null!==(n=(r=e.opts).delegate)&&void 0!==n||(r.delegate=this.delegate),void 0!==e.removeView){Wf(void 0!==e.removeStart,"removeView needs removeStart"),Wf(void 0!==e.removeCount,"removeView needs removeCount");const t=this.views.indexOf(e.removeView);if(t<0)throw new Error("removeView was not found");e.removeStart+=t}void 0!==e.removeStart&&(e.removeStart<0&&(e.removeStart=i-1),e.removeCount<0&&(e.removeCount=i-e.removeStart),e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===i),e.insertViews&&((e.insertStart<0||e.insertStart>i)&&(e.insertStart=i),e.enteringRequiresTransition=e.insertStart===i);const o=e.insertViews;if(!o)return;Wf(o.length>0,"length can not be zero");const a=o.map((e=>e instanceof Qv?e:"component"in e?ty(e.component,null===e.componentProps?void 0:e.componentProps):ty(e,void 0))).filter((e=>null!==e));if(0===a.length)throw new Error("invalid views to insert");for(const s of a){s.delegate=e.opts.delegate;const t=s.nav;if(t&&t!==this)throw new Error("inserted view was already inserted");if(3===s.state)throw new Error("inserted view was already destroyed")}e.insertViews=a}getEnteringView(e,t){const n=e.insertViews;if(void 0!==n)return n[n.length-1];const r=e.removeStart;if(void 0!==r){const n=this.views,i=r+e.removeCount;for(let e=n.length-1;e>=0;e--){const o=n[e];if((e<r||e>=i)&&o!==t)return o}}}postViewInit(e,t,n){var r,i,o;Wf(t||e,"Both leavingView and enteringView are null"),Wf(n.resolve,"resolve must be valid"),Wf(n.reject,"reject must be valid");const a=n.opts,{insertViews:s,removeStart:l,removeCount:c}=n;let u;if(void 0!==l&&void 0!==c){Wf(l>=0,"removeStart can not be negative"),Wf(c>=0,"removeCount can not be negative"),u=[];for(let n=l;n<l+c;n++){const r=this.views[n];void 0!==r&&r!==e&&r!==t&&u.push(r)}null!==(r=a.direction)&&void 0!==r||(a.direction="back")}const d=this.views.length+(null!==(i=null==s?void 0:s.length)&&void 0!==i?i:0)-(null!=c?c:0);if(Wf(d>=0,"final balance can not be negative"),0===d)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(s){let e=n.insertStart;for(const t of s)this.insertViewAt(t,e),e++;n.enteringRequiresTransition&&(null!==(o=a.direction)&&void 0!==o||(a.direction="forward"))}if(u&&u.length>0){for(const e of u)bm(e.element,im),bm(e.element,om),bm(e.element,am);for(const e of u)this.destroyView(e)}}async transition(e,t,n){const r=n.opts,i=r.progressAnimation?e=>this.sbAni=e:void 0,o=rg(this),a=e.element,s=t&&t.element,l=Object.assign(Object.assign({mode:o,showGoBack:this.canGoBackSync(e),baseEl:this.el,progressCallback:i,animated:this.animated&&Fm.getBoolean("animated",!0),enteringEl:a,leavingEl:s},r),{animationBuilder:r.animationBuilder||this.animation||Fm.get("navAnimation")}),{hasCompleted:c}=await sm(l);return this.transitionFinish(c,e,t,r)}transitionFinish(e,t,n,r){const i=e?t:n;return i&&this.unmountInactiveViews(i),{hasCompleted:e,requiresTransition:!0,enteringView:t,leavingView:n,direction:r.direction}}insertViewAt(e,t){const n=this.views,r=n.indexOf(e);r>-1?(Wf(e.nav===this,"view is not part of the nav"),n.splice(r,1),n.splice(t,0,e)):(Wf(!e.nav,"nav is used"),e.nav=this,n.splice(t,0,e))}removeView(e){Wf(2===e.state||3===e.state,"view state should be loaded or destroyed");const t=this.views,n=t.indexOf(e);Wf(n>-1,"view must be part of the stack"),n>=0&&t.splice(n,1)}destroyView(e){e._destroy(),this.removeView(e)}unmountInactiveViews(e){if(this.destroyed)return;const t=this.views,n=t.indexOf(e);for(let r=t.length-1;r>=0;r--){const e=t[r],i=e.element;i&&(r>n?(bm(i,am),this.destroyView(e)):r<n&&wm(i,!0))}}canStart(){return!!this.swipeGesture&&!this.isTransitioning&&0===this.transInstr.length&&this.animationEnabled&&this.canGoBackSync()}onStart(){this.pop({direction:"back",progressAnimation:!0})}onMove(e){this.sbAni&&this.sbAni.progressStep(e)}onEnd(e,t,n){if(this.sbAni){this.animationEnabled=!1,this.sbAni.onFinish((()=>{this.animationEnabled=!0}),{oneTimeCallback:!0});let r=e?-.001:.001;e?r+=km([0,0],[.32,.72],[0,1],[1,1],t)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),r+=km([0,0],[1,0],[.68,.28],[1,1],t)[0]),this.sbAni.progressEnd(e?1:0,r,n)}}render(){return yp("slot",null)}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}"}},[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64]}]),ry=function(){"undefined"!=typeof customElements&&["ion-nav"].forEach((e=>{"ion-nav"===e&&(customElements.get(e)||customElements.define(e,ny))}))},iy=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionStyle=Ep(this,"ionStyle",7),this.color=void 0,this.size=void 0}sizeChanged(){this.emitStyle()}connectedCallback(){this.emitStyle()}emitStyle(){const e=this.getSize();this.ionStyle.emit({[`title-${e}`]:!0})}getSize(){return void 0!==this.size?this.size:"default"}render(){const e=rg(this),t=this.getSize();return yp(xp,{class:nv(this.color,{[e]:!0,[`title-${t}`]:!0,"title-rtl":"rtl"===document.dir})},yp("div",{class:"toolbar-title"},yp("slot",null)))}get el(){return this}static get watchers(){return{size:["sizeChanged"]}}static get style(){return{ios:":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{top:0;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:17px;font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}@supports (inset-inline-start: 0){:host{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host{left:0}:host-context([dir=rtl]){left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host:dir(rtl){left:unset;right:unset;right:0}}}:host(.title-small){-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:13px;font-weight:normal}:host(.title-large){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:0;-webkit-transform-origin:left center;transform-origin:left center;bottom:0;-ms-flex-align:end;align-items:flex-end;min-width:100%;padding-bottom:6px;font-size:34px;font-weight:700;text-align:start}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}@supports selector(:dir(rtl)){:host(.title-large) .toolbar-title:dir(rtl){-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}}",md:":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;letter-spacing:0.0125em}:host(.title-small){width:100%;height:100%;font-size:15px;font-weight:normal}"}}},[33,"ion-title",{color:[513],size:[1]}]),oy=function(){"undefined"!=typeof customElements&&["ion-title"].forEach((e=>{"ion-title"===e&&(customElements.get(e)||customElements.define(e,iy))}))},ay=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childrenStyles=new Map,this.color=void 0}componentWillLoad(){const e=Array.from(this.el.querySelectorAll("ion-buttons")),t=e.find((e=>"start"===e.slot));t&&t.classList.add("buttons-first-slot");const n=e.reverse(),r=n.find((e=>"end"===e.slot))||n.find((e=>"primary"===e.slot))||n.find((e=>"secondary"===e.slot));r&&r.classList.add("buttons-last-slot")}childrenStyle(e){e.stopPropagation();const t=e.target.tagName,n=e.detail,r={},i=this.childrenStyles.get(t)||{};let o=!1;Object.keys(n).forEach((e=>{const t=`toolbar-${e}`,a=n[e];a!==i[t]&&(o=!0),a&&(r[t]=!0)})),o&&(this.childrenStyles.set(t,r),ef(this))}render(){const e=rg(this),t={};return this.childrenStyles.forEach((e=>{Object.assign(t,e)})),yp(xp,{class:Object.assign(Object.assign({},t),nv(this.color,{[e]:!0,"in-toolbar":tv("ion-toolbar",this.el)}))},yp("div",{class:"toolbar-background"}),yp("div",{class:"toolbar-container"},yp("slot",{name:"start"}),yp("slot",{name:"secondary"}),yp("div",{class:"toolbar-content"},yp("slot",null)),yp("slot",{name:"primary"}),yp("slot",{name:"end"})))}get el(){return this}static get style(){return{ios:":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}:host(.toolbar-searchbar) ::slotted(ion-back-button){height:38px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",md:":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, #c1c4cd)));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){-webkit-margin-start:4px;margin-inline-start:4px}::slotted(.buttons-last-slot){-webkit-margin-end:4px;margin-inline-end:4px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}"}}},[33,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]),sy=function(){"undefined"!=typeof customElements&&["ion-toolbar"].forEach((e=>{"ion-toolbar"===e&&(customElements.get(e)||customElements.define(e,ay))}))},ly=wv,cy=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAriaAttributes={},this.color=void 0,this.button=!1,this.type="button",this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.target=void 0}componentWillLoad(){this.inheritedAriaAttributes=jf(this.el,["aria-label"])}isClickable(){return void 0!==this.href||this.button}renderCard(e){const t=this.isClickable();if(!t)return[yp("slot",null)];const{href:n,routerAnimation:r,routerDirection:i,inheritedAriaAttributes:o}=this,a=t?void 0===n?"button":"a":"div",s="button"===a?{type:this.type}:{download:this.download,href:this.href,rel:this.rel,target:this.target};return yp(a,Object.assign({},s,o,{class:"card-native",part:"native",disabled:this.disabled,onClick:e=>ov(n,e,i,r)}),yp("slot",null),t&&"md"===e&&yp("ion-ripple-effect",null))}render(){const e=rg(this);return yp(xp,{class:nv(this.color,{[e]:!0,"card-disabled":this.disabled,"ion-activatable":this.isClickable()})},this.renderCard(e))}get el(){return this}static get style(){return{ios:":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-600, #666666)));-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:24px;margin-bottom:24px;border-radius:8px;-webkit-transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1), -webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);font-size:14px;-webkit-box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);box-shadow:0 4px 16px rgba(0, 0, 0, 0.12)}:host(.ion-activated){-webkit-transform:scale3d(0.97, 0.97, 1);transform:scale3d(0.97, 0.97, 1)}",md:":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-550, #737373)));-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px;margin-top:10px;margin-bottom:10px;border-radius:4px;font-size:14px;-webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}"}}},[33,"ion-card",{color:[513],button:[4],type:[1],disabled:[4],download:[1],href:[1],rel:[1],routerDirection:[1,"router-direction"],routerAnimation:[16],target:[1]}]),uy=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=Ep(this,"ionFocus",7),this.ionBlur=Ep(this,"ionBlur",7),this.fab=null,this.inheritedAttributes={},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.onClick=()=>{const{fab:e}=this;e&&e.toggle()},this.color=void 0,this.activated=!1,this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.target=void 0,this.show=!1,this.translucent=!1,this.type="button",this.size=void 0,this.closeIcon="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>"}connectedCallback(){this.fab=this.el.closest("ion-fab")}componentWillLoad(){this.inheritedAttributes=Bf(this.el)}render(){const{el:e,disabled:t,color:n,href:r,activated:i,show:o,translucent:a,size:s,inheritedAttributes:l}=this,c=tv("ion-fab-list",e),u=rg(this),d=void 0===r?"button":"a",h="button"===d?{type:this.type}:{download:this.download,href:r,rel:this.rel,target:this.target};return yp(xp,{onClick:this.onClick,"aria-disabled":t?"true":null,class:nv(n,{[u]:!0,"fab-button-in-list":c,"fab-button-translucent-in-list":c&&a,"fab-button-close-active":i,"fab-button-show":o,"fab-button-disabled":t,"fab-button-translucent":a,"ion-activatable":!0,"ion-focusable":!0,[`fab-button-${s}`]:void 0!==s})},yp(d,Object.assign({},h,{class:"button-native",part:"native",disabled:t,onFocus:this.onFocus,onBlur:this.onBlur,onClick:e=>ov(r,e,this.routerDirection,this.routerAnimation)},l),yp("ion-icon",{"aria-hidden":"true",icon:this.closeIcon,part:"close-icon",class:"close-icon",lazy:!1}),yp("span",{class:"button-inner"},yp("slot",null)),"md"===u&&yp("ion-ripple-effect",null)))}get el(){return this}static get style(){return{ios:':host{--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--background-hover:var(--ion-color-primary-contrast, #fff);--background-hover-opacity:.08;--transition:background-color, opacity 100ms linear;--ripple-color:currentColor;--border-radius:50%;--border-width:0;--border-style:none;--border-color:initial;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:56px;height:56px;font-size:14px;text-align:center;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transform:var(--transform);transform:var(--transform);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);background-clip:padding-box;color:var(--color);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:strict;cursor:pointer;overflow:hidden;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-icon){line-height:1}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{left:0;right:0;top:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;z-index:1}:host(.fab-button-disabled){cursor:default;opacity:0.5;pointer-events:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-activated) .button-native{color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}::slotted(ion-icon){line-height:1}:host(.fab-button-small){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px;width:40px;height:40px}.close-icon{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;left:0;right:0;top:0;position:absolute;height:100%;-webkit-transform:scale(0.4) rotateZ(-45deg);transform:scale(0.4) rotateZ(-45deg);-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;font-size:var(--close-icon-font-size);opacity:0;z-index:1}:host(.fab-button-close-active) .close-icon{-webkit-transform:scale(1) rotateZ(0deg);transform:scale(1) rotateZ(0deg);opacity:1}:host(.fab-button-close-active) .button-inner{-webkit-transform:scale(0.4) rotateZ(45deg);transform:scale(0.4) rotateZ(45deg);opacity:0}ion-ripple-effect{color:var(--ripple-color)}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.fab-button-translucent) .button-native{-webkit-backdrop-filter:var(--backdrop-filter);backdrop-filter:var(--backdrop-filter)}}:host(.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{--background:var(--ion-color-primary, #3880ff);--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1;--color:var(--ion-color-primary-contrast, #fff);--box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);--transition:0.2s transform cubic-bezier(0.25, 1.11, 0.78, 1.59);--close-icon-font-size:28px}:host(.ion-activated){--box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);--transform:scale(1.1);--transition:0.2s transform ease-out}::slotted(ion-icon){font-size:28px}:host(.fab-button-in-list){--background:var(--ion-color-light, #f4f5f8);--background-activated:var(--ion-color-light-shade, #d7d8da);--background-focused:var(--background-activated);--background-hover:var(--ion-color-light-tint, #f5f6f9);--color:var(--ion-color-light-contrast, #000);--color-activated:var(--ion-color-light-contrast, #000);--color-focused:var(--color-activated);--transition:transform 200ms ease 10ms, opacity 200ms ease 10ms}:host(.fab-button-in-list) ::slotted(ion-icon){font-size:18px}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}:host(.ion-color.ion-focused) .button-native,:host(.ion-color.ion-activated) .button-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .button-native::after,:host(.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-contrast)}:host(.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.fab-button-translucent){--background:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.9);--background-hover:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.8);--background-focused:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.82);--backdrop-filter:saturate(180%) blur(20px)}:host(.fab-button-translucent-in-list){--background:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.9);--background-hover:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.8);--background-focused:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.82)}}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){@media (any-hover: hover){:host(.fab-button-translucent.ion-color:hover) .button-native{background:rgba(var(--ion-color-base-rgb), 0.8)}}:host(.ion-color.fab-button-translucent) .button-native{background:rgba(var(--ion-color-base-rgb), 0.9)}:host(.ion-color.ion-focused.fab-button-translucent) .button-native,:host(.ion-color.ion-activated.fab-button-translucent) .button-native{background:var(--ion-color-base)}}',md:':host{--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--background-hover:var(--ion-color-primary-contrast, #fff);--background-hover-opacity:.08;--transition:background-color, opacity 100ms linear;--ripple-color:currentColor;--border-radius:50%;--border-width:0;--border-style:none;--border-color:initial;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:56px;height:56px;font-size:14px;text-align:center;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transform:var(--transform);transform:var(--transform);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);background-clip:padding-box;color:var(--color);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:strict;cursor:pointer;overflow:hidden;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-icon){line-height:1}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{left:0;right:0;top:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;z-index:1}:host(.fab-button-disabled){cursor:default;opacity:0.5;pointer-events:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-activated) .button-native{color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}::slotted(ion-icon){line-height:1}:host(.fab-button-small){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px;width:40px;height:40px}.close-icon{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;left:0;right:0;top:0;position:absolute;height:100%;-webkit-transform:scale(0.4) rotateZ(-45deg);transform:scale(0.4) rotateZ(-45deg);-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;font-size:var(--close-icon-font-size);opacity:0;z-index:1}:host(.fab-button-close-active) .close-icon{-webkit-transform:scale(1) rotateZ(0deg);transform:scale(1) rotateZ(0deg);opacity:1}:host(.fab-button-close-active) .button-inner{-webkit-transform:scale(0.4) rotateZ(45deg);transform:scale(0.4) rotateZ(45deg);opacity:0}ion-ripple-effect{color:var(--ripple-color)}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.fab-button-translucent) .button-native{-webkit-backdrop-filter:var(--backdrop-filter);backdrop-filter:var(--backdrop-filter)}}:host(.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{--background:var(--ion-color-primary, #3880ff);--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--color:var(--ion-color-primary-contrast, #fff);--box-shadow:0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12);--transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1), background-color 280ms cubic-bezier(0.4, 0, 0.2, 1), color 280ms cubic-bezier(0.4, 0, 0.2, 1), opacity 15ms linear 30ms, transform 270ms cubic-bezier(0, 0, 0.2, 1) 0ms;--close-icon-font-size:24px}:host(.ion-activated){--box-shadow:0 7px 8px -4px rgba(0, 0, 0, 0.2), 0 12px 17px 2px rgba(0, 0, 0, 0.14), 0 5px 22px 4px rgba(0, 0, 0, 0.12)}::slotted(ion-icon){font-size:24px}:host(.fab-button-in-list){--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);--color-activated:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);--color-focused:var(--color-activated);--background:var(--ion-color-light, #f4f5f8);--background-activated:transparent;--background-focused:var(--ion-color-light-shade, #d7d8da);--background-hover:var(--ion-color-light-tint, #f5f6f9)}:host(.fab-button-in-list) ::slotted(ion-icon){font-size:18px}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.ion-color.ion-activated) .button-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activated) .button-native::after{background:transparent}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-contrast)}:host(.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}}'}}},[33,"ion-fab-button",{color:[513],activated:[4],disabled:[4],download:[1],href:[1],rel:[1],routerDirection:[1,"router-direction"],routerAnimation:[16],target:[1],show:[4],translucent:[4],type:[1],size:[1],closeIcon:[1,"close-icon"]}]),dy=uy,hy=_v,py="ionKeyboardDidShow",fy="ionKeyboardDidHide";let my={},gy={},vy=!1;const yy=e=>{e.addEventListener("keyboardDidShow",(t=>by(e,t))),e.addEventListener("keyboardDidHide",(()=>xy(e)))},by=(e,t)=>{Ey(e,t),vy=!0},xy=e=>{Sy(e),vy=!1},wy=()=>{const e=(my.height-gy.height)*gy.scale;return!vy&&my.width===gy.width&&e>150},_y=e=>vy&&!ky(e),ky=e=>vy&&gy.height===e.innerHeight,Ey=(e,t)=>{const n=t?t.keyboardHeight:e.innerHeight-gy.height,r=new CustomEvent(py,{detail:{keyboardHeight:n}});e.dispatchEvent(r)},Sy=e=>{const t=new CustomEvent(fy);e.dispatchEvent(t)},Cy=e=>{my=Object.assign({},gy),gy=Ty(e.visualViewport)},Ty=e=>({width:Math.round(e.width),height:Math.round(e.height),offsetTop:e.offsetTop,offsetLeft:e.offsetLeft,pageTop:e.pageTop,pageLeft:e.pageLeft,scale:e.scale}),My=Object.freeze(Object.defineProperty({__proto__:null,KEYBOARD_DID_CLOSE:fy,KEYBOARD_DID_OPEN:py,copyVisualViewport:Ty,keyboardDidClose:ky,keyboardDidOpen:wy,keyboardDidResize:_y,resetKeyboardAssist:()=>{my={},gy={},vy=!1},setKeyboardClose:xy,setKeyboardOpen:by,startKeyboardAssist:e=>{if(zv.getEngine())yy(e);else{if(!e.visualViewport)return;gy=Ty(e.visualViewport),e.visualViewport.onresize=()=>{Cy(e),wy()||_y(e)?by(e):ky(e)&&xy(e)}}},trackViewportChanges:Cy},Symbol.toStringTag,{value:"Module"}));
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
var Iy;!function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(Iy||(Iy={}));const Oy={getEngine(){var e;return(null===(e=null==Df?void 0:Df.Capacitor)||void 0===e?void 0:e.isPluginAvailable("StatusBar"))&&(null==Df?void 0:Df.Capacitor.Plugins.StatusBar)},supportsDefaultStatusBarStyle(){var e;return!!(null===(e=null==Df?void 0:Df.Capacitor)||void 0===e?void 0:e.PluginHeaders)},setStyle(e){const t=this.getEngine();t&&t.setStyle(e)},getStyle:async function(){const e=this.getEngine();if(!e)return Iy.Default;const{style:t}=await e.getInfo();return t}},Ay=(e,t)=>{if(1===t)return 0;const n=1/(1-t);return e*n+-t*n},Py=()=>{!Df||Df.innerWidth>=768||!Oy.supportsDefaultStatusBarStyle()||Oy.setStyle({style:Iy.Dark})},Dy=(e=Iy.Default)=>{!Df||Df.innerWidth>=768||!Oy.supportsDefaultStatusBarStyle()||Oy.setStyle({style:e})},Ly=async(e,t)=>{"function"==typeof e.canDismiss&&await e.canDismiss(void 0,Cg)&&(t.isRunning()?t.onFinish((()=>{e.dismiss(void 0,"handler")}),{oneTimeCallback:!0}):e.dismiss(void 0,"handler"))},Ry=e=>.00255275*2.71828**(-14.9619*e)-1.00255*2.71828**(-.0380968*e)+1,zy=.93,jy=(e,t,n,r)=>{const i=.5,o=e.offsetHeight;let a=!1,s=!1,l=null,c=null,u=!0,d=0;const h=Rm({el:e,gestureName:"modalSwipeToClose",gesturePriority:39,direction:"y",threshold:10,canStart:e=>{const t=e.event.target;if(null===t||!t.closest)return!0;if(l=Pv(t),l){if(Iv(l)){const e=Uf(l);c=e.querySelector(".inner-scroll")}else c=l;return!l.querySelector("ion-refresher")&&0===c.scrollTop}return null===t.closest("ion-footer")},onStart:n=>{const{deltaY:r}=n;u=!l||!Iv(l)||l.scrollY,s=void 0!==e.canDismiss&&!0!==e.canDismiss,r>0&&l&&Lv(l),t.progressStart(!0,a?1:0)},onMove:e=>{const{deltaY:r}=e;r>0&&l&&Lv(l);const a=e.deltaY/o,c=a>=0&&s,u=c?.2:.9999,h=c?Ry(a/u):a,p=Hf(1e-4,h,u);t.progressStep(p),p>=i&&d<i?Dy(n):p<i&&d>=i&&Py(),d=p},onEnd:n=>{const c=n.velocityY,d=n.deltaY/o,p=d>=0&&s,f=p?.2:.9999,m=p?Ry(d/f):d,g=Hf(1e-4,m,f),v=(n.deltaY+1e3*c)/o,y=!p&&v>=i;let b=y?-.001:.001;y?(t.easing("cubic-bezier(0.32, 0.72, 0, 1)"),b+=km([0,0],[.32,.72],[0,1],[1,1],g)[0]):(t.easing("cubic-bezier(1, 0, 0.68, 0.28)"),b+=km([0,0],[1,0],[.68,.28],[1,1],g)[0]);const x=Ny(y?d*o:(1-g)*o,c);a=y,h.enable(!1),l&&((e,t)=>{Iv(e)?e.scrollY=t:e.style.removeProperty("overflow")})(l,u),t.onFinish((()=>{y||h.enable(!0)})).progressEnd(y?1:0,b,x),p&&g>f/4?Ly(e,t):y&&r()}});return h},Ny=(e,t)=>Hf(400,e/Math.abs(1.1*t),500),By=e=>{const{currentBreakpoint:t,backdropBreakpoint:n}=e,r=void 0===n||n<t,i=r?`calc(var(--backdrop-opacity) * ${t})`:"0",o=rm("backdropAnimation").fromTo("opacity",0,i);return r&&o.beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),{wrapperAnimation:rm("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(100%)"},{offset:1,opacity:1,transform:`translateY(${100-100*t}%)`}]),backdropAnimation:o}},Fy=e=>{const{currentBreakpoint:t,backdropBreakpoint:n}=e,r=`calc(var(--backdrop-opacity) * ${Ay(t,n)})`,i=[{offset:0,opacity:r},{offset:1,opacity:0}],o=[{offset:0,opacity:r},{offset:n,opacity:0},{offset:1,opacity:0}],a=rm("backdropAnimation").keyframes(0!==n?o:i);return{wrapperAnimation:rm("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:`translateY(${100-100*t}%)`},{offset:1,opacity:1,transform:"translateY(100%)"}]),backdropAnimation:a}},Vy=(e,t)=>{const{presentingEl:n,currentBreakpoint:r}=t,i=Uf(e),{wrapperAnimation:o,backdropAnimation:a}=void 0!==r?By(t):{backdropAnimation:rm().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),wrapperAnimation:rm().fromTo("transform","translateY(100vh)","translateY(0vh)")};a.addElement(i.querySelector("ion-backdrop")),o.addElement(i.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const s=rm("entering-base").addElement(e).easing("cubic-bezier(0.32,0.72,0,1)").duration(500).addAnimation(o);if(n){const e=window.innerWidth<768,t="ION-MODAL"===n.tagName&&void 0!==n.presentingElement,r=Uf(n),i=rm().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"}),l=document.body;if(e){const e=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",r=`translateY(${t?"-10px":e}) scale(${zy})`;i.afterStyles({transform:r}).beforeAddWrite((()=>l.style.setProperty("background-color","black"))).addElement(n).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"},{offset:1,filter:"contrast(0.85)",transform:r,borderRadius:"10px 10px 0 0"}]),s.addAnimation(i)}else if(s.addAnimation(a),t){const e=`translateY(-10px) scale(${t?zy:1})`;i.afterStyles({transform:e}).addElement(r.querySelector(".modal-wrapper")).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0) scale(1)"},{offset:1,filter:"contrast(0.85)",transform:e}]);const n=rm().afterStyles({transform:e}).addElement(r.querySelector(".modal-shadow")).keyframes([{offset:0,opacity:"1",transform:"translateY(0) scale(1)"},{offset:1,opacity:"0",transform:e}]);s.addAnimation([i,n])}else o.fromTo("opacity","0","1")}else s.addAnimation(a);return s},Uy=(e,t,n=500)=>{const{presentingEl:r,currentBreakpoint:i}=t,o=Uf(e),{wrapperAnimation:a,backdropAnimation:s}=void 0!==i?Fy(t):{backdropAnimation:rm().fromTo("opacity","var(--backdrop-opacity)",0),wrapperAnimation:rm().fromTo("transform","translateY(0vh)","translateY(100vh)")};s.addElement(o.querySelector("ion-backdrop")),a.addElement(o.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const l=rm("leaving-base").addElement(e).easing("cubic-bezier(0.32,0.72,0,1)").duration(n).addAnimation(a);if(r){const e=window.innerWidth<768,t="ION-MODAL"===r.tagName&&void 0!==r.presentingElement,n=Uf(r),i=rm().beforeClearStyles(["transform"]).afterClearStyles(["transform"]).onFinish((e=>{if(1!==e)return;r.style.setProperty("overflow","");const t=Array.from(o.querySelectorAll("ion-modal")).filter((e=>void 0!==e.presentingElement)).length;t<=1&&o.style.setProperty("background-color","")})),o=document.body;if(e){const e=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",n=`translateY(${t?"-10px":e}) scale(${zy})`;i.addElement(r).keyframes([{offset:0,filter:"contrast(0.85)",transform:n,borderRadius:"10px 10px 0 0"},{offset:1,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"}]),l.addAnimation(i)}else if(l.addAnimation(s),t){const e=`translateY(-10px) scale(${t?zy:1})`;i.addElement(n.querySelector(".modal-wrapper")).afterStyles({transform:"translate3d(0, 0, 0)"}).keyframes([{offset:0,filter:"contrast(0.85)",transform:e},{offset:1,filter:"contrast(1)",transform:"translateY(0) scale(1)"}]);const r=rm().addElement(n.querySelector(".modal-shadow")).afterStyles({transform:"translateY(0) scale(1)"}).keyframes([{offset:0,opacity:"0",transform:e},{offset:1,opacity:"1",transform:"translateY(0) scale(1)"}]);l.addAnimation([i,r])}else a.fromTo("opacity","1","0")}else l.addAnimation(s);return l},$y=(e,t)=>{const{currentBreakpoint:n}=t,r=Uf(e),{wrapperAnimation:i,backdropAnimation:o}=void 0!==n?By(t):{backdropAnimation:rm().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),wrapperAnimation:rm().keyframes([{offset:0,opacity:.01,transform:"translateY(40px)"},{offset:1,opacity:1,transform:"translateY(0px)"}])};return o.addElement(r.querySelector("ion-backdrop")),i.addElement(r.querySelector(".modal-wrapper")),rm().addElement(e).easing("cubic-bezier(0.36,0.66,0.04,1)").duration(280).addAnimation([o,i])},Zy=(e,t)=>{const{currentBreakpoint:n}=t,r=Uf(e),{wrapperAnimation:i,backdropAnimation:o}=void 0!==n?Fy(t):{backdropAnimation:rm().fromTo("opacity","var(--backdrop-opacity)",0),wrapperAnimation:rm().keyframes([{offset:0,opacity:.99,transform:"translateY(0px)"},{offset:1,opacity:0,transform:"translateY(40px)"}])};return o.addElement(r.querySelector("ion-backdrop")),i.addElement(r.querySelector(".modal-wrapper")),rm().easing("cubic-bezier(0.47,0,0.745,0.715)").duration(200).addAnimation([o,i])},Hy=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=Ep(this,"ionModalDidPresent",7),this.willPresent=Ep(this,"ionModalWillPresent",7),this.willDismiss=Ep(this,"ionModalWillDismiss",7),this.didDismiss=Ep(this,"ionModalDidDismiss",7),this.ionBreakpointDidChange=Ep(this,"ionBreakpointDidChange",7),this.didPresentShorthand=Ep(this,"didPresent",7),this.willPresentShorthand=Ep(this,"willPresent",7),this.willDismissShorthand=Ep(this,"willDismiss",7),this.didDismissShorthand=Ep(this,"didDismiss",7),this.ionMount=Ep(this,"ionMount",7),this.triggerController=(()=>{let e;const t=()=>{e&&(e(),e=void 0)};return{addClickListener:(n,r)=>{t();const i=void 0!==r?document.getElementById(r):null;i?e=((e,t)=>{const n=()=>{t.present()};return e.addEventListener("click",n),()=>{e.removeEventListener("click",n)}})(i,n):lg(`A trigger element with the ID "${r}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,n)},removeClickListener:t}})(),this.coreDelegate=(()=>{let e,t;return{attachViewToDom:async(n,r,i={},o=[])=>{var a,s;if(e=n,r){const t="string"==typeof r?null===(a=e.ownerDocument)||void 0===a?void 0:a.createElement(r):r;o.forEach((e=>t.classList.add(e))),Object.assign(t,i),e.appendChild(t),await new Promise((e=>Rf(t,e)))}else if(e.children.length>0&&("ION-MODAL"===e.tagName||"ION-POPOVER"===e.tagName)&&!e.children[0].classList.contains("ion-delegate-host")){const t=null===(s=e.ownerDocument)||void 0===s?void 0:s.createElement("div");t.classList.add("ion-delegate-host"),o.forEach((e=>t.classList.add(e))),t.append(...e.children),e.appendChild(t)}const l=document.querySelector("ion-app")||document.body;return t=document.createComment("ionic teleport"),e.parentNode.insertBefore(t,e),l.appendChild(e),e},removeViewFromDom:()=>(e&&t&&(t.parentNode.insertBefore(e,t),t.remove()),Promise.resolve())}})(),this.isSheetModal=!1,this.inheritedAttributes={},this.inline=!1,this.gestureAnimationDismissing=!1,this.onHandleClick=()=>{const{sheetTransition:e,handleBehavior:t}=this;"cycle"===t&&void 0===e&&this.moveToNextBreakpoint()},this.onBackdropTap=()=>{const{sheetTransition:e}=this;void 0===e&&this.dismiss(void 0,Sg)},this.onLifecycle=e=>{const t=this.usersElement,n=Wy[e.type];if(t&&n){const r=new CustomEvent(n,{bubbles:!1,cancelable:!1,detail:e.detail});t.dispatchEvent(r)}},this.presented=!1,this.hasController=!1,this.overlayIndex=void 0,this.delegate=void 0,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.breakpoints=void 0,this.initialBreakpoint=void 0,this.backdropBreakpoint=0,this.handle=void 0,this.handleBehavior="none",this.component=void 0,this.componentProps=void 0,this.cssClass=void 0,this.backdropDismiss=!0,this.showBackdrop=!0,this.animated=!0,this.presentingElement=void 0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0,this.keepContentsMounted=!1,this.canDismiss=!0}onIsOpenChange(e,t){!0===e&&!1===t?this.present():!1===e&&!0===t&&this.dismiss()}triggerChanged(){const{trigger:e,el:t,triggerController:n}=this;e&&n.addClickListener(t,e)}breakpointsChanged(e){void 0!==e&&(this.sortedBreakpoints=e.sort(((e,t)=>e-t)))}connectedCallback(){const{el:e}=this;(e=>{"undefined"!=typeof document&&vg(document);const t=ug++;e.overlayIndex=t})(e),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener()}componentWillLoad(){const{breakpoints:e,initialBreakpoint:t,el:n}=this,r=this.isSheetModal=void 0!==e&&void 0!==t;this.inheritedAttributes=jf(n,["aria-label","role"]),r&&(this.currentBreakpoint=this.initialBreakpoint),void 0===e||void 0===t||e.includes(t)||lg("Your breakpoints array must include the initialBreakpoint value."),(e=>{e.hasAttribute("id")||(e.id="ion-overlay-"+ ++dg),e.id})(n)}componentDidLoad(){!0===this.isOpen&&$f((()=>this.present())),this.breakpointsChanged(this.breakpoints)}getDelegate(e=!1){if(this.workingDelegate&&!e)return{delegate:this.workingDelegate,inline:this.inline};const t=this.el.parentNode,n=this.inline=null!==t&&!this.hasController;return{inline:n,delegate:this.workingDelegate=n?this.delegate||this.coreDelegate:this.delegate}}async checkCanDismiss(e,t){const{canDismiss:n}=this;return"function"==typeof n?n(e,t):n}async present(){if(this.presented)return;const{presentingElement:e,el:t}=this;void 0!==this.currentTransition&&await this.currentTransition,this.currentBreakpoint=this.initialBreakpoint;const{inline:n,delegate:r}=this.getDelegate(!0);this.usersElement=await ag(r,t,this.component,["ion-page"],this.componentProps,n),this.ionMount.emit(),zf(t)?await xm(this.usersElement):this.keepContentsMounted||await new Promise((e=>$f((()=>$f((()=>e())))))),Pf((()=>this.el.classList.add("show-modal"))),this.currentTransition=(async(e,t,n,r,i)=>{var o,a;if(e.presented)return;bg(!0),e.presented=!0,e.willPresent.emit(),null===(o=e.willPresentShorthand)||void 0===o||o.emit();const s=rg(e),l=e.enterAnimation?e.enterAnimation:Fm.get(t,"ios"===s?n:r);await _g(e,l,e.el,i)&&(e.didPresent.emit(),null===(a=e.didPresentShorthand)||void 0===a||a.emit()),"ION-TOAST"!==e.el.tagName&&xg(e.el),!e.keyboardClose||null!==document.activeElement&&e.el.contains(document.activeElement)||e.el.focus()})(this,"modalEnter",Vy,$y,{presentingEl:e,currentBreakpoint:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint}),"undefined"!=typeof window&&(this.keyboardOpenCallback=()=>{this.gesture&&(this.gesture.enable(!1),$f((()=>{this.gesture&&this.gesture.enable(!0)})))},window.addEventListener(py,this.keyboardOpenCallback));const i=void 0!==e;i&&"ios"===rg(this)&&(this.statusBarStyle=await Oy.getStyle(),Py()),await this.currentTransition,this.isSheetModal?this.initSheetGesture():i&&this.initSwipeToClose(),this.currentTransition=void 0}initSwipeToClose(){var e;if("ios"!==rg(this))return;const{el:t}=this,n=this.leaveAnimation||Fm.get("modalLeave",Uy),r=this.animation=n(t,{presentingEl:this.presentingElement});if(!Av(t))return void Dv(t);const i=null!==(e=this.statusBarStyle)&&void 0!==e?e:Iy.Default;this.gesture=jy(t,r,i,(()=>{this.gestureAnimationDismissing=!0,this.animation.onFinish((async()=>{await this.dismiss(void 0,Cg),this.gestureAnimationDismissing=!1}))})),this.gesture.enable(!0)}initSheetGesture(){const{wrapperEl:e,initialBreakpoint:t,backdropBreakpoint:n}=this;if(!e||void 0===t)return;const r=this.enterAnimation||Fm.get("modalEnter",Vy),i=this.animation=r(this.el,{presentingEl:this.presentingElement,currentBreakpoint:t,backdropBreakpoint:n});i.progressStart(!0,1);const{gesture:o,moveSheetToBreakpoint:a}=((e,t,n,r,i,o,a=[],s,l,c)=>{const u={WRAPPER_KEYFRAMES:[{offset:0,transform:"translateY(0%)"},{offset:1,transform:"translateY(100%)"}],BACKDROP_KEYFRAMES:0!==i?[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1-i,opacity:0},{offset:1,opacity:0}]:[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1,opacity:.01}]},d=e.querySelector("ion-content"),h=n.clientHeight;let p=r,f=0,m=!1;const g=o.childAnimations.find((e=>"wrapperAnimation"===e.id)),v=o.childAnimations.find((e=>"backdropAnimation"===e.id)),y=a[a.length-1],b=a[0],x=()=>{e.style.setProperty("pointer-events","auto"),t.style.setProperty("pointer-events","auto"),e.classList.remove("ion-disable-focus-trap")},w=()=>{e.style.setProperty("pointer-events","none"),t.style.setProperty("pointer-events","none"),e.classList.add("ion-disable-focus-trap")};g&&v&&(g.keyframes([...u.WRAPPER_KEYFRAMES]),v.keyframes([...u.BACKDROP_KEYFRAMES]),o.progressStart(!0,1-p),p>i?x():w()),d&&p!==y&&(d.scrollY=!1);const _=t=>{const{breakpoint:n,canDismiss:r,breakpointOffset:s}=t,h=r&&0===n,f=h?p:n,m=0!==f;return p=0,g&&v&&(g.keyframes([{offset:0,transform:`translateY(${100*s}%)`},{offset:1,transform:`translateY(${100*(1-f)}%)`}]),v.keyframes([{offset:0,opacity:`calc(var(--backdrop-opacity) * ${Ay(1-s,i)})`},{offset:1,opacity:`calc(var(--backdrop-opacity) * ${Ay(f,i)})`}]),o.progressStep(0)),k.enable(!1),h?Ly(e,o):m||l(),new Promise((e=>{o.onFinish((()=>{m?g&&v?$f((()=>{g.keyframes([...u.WRAPPER_KEYFRAMES]),v.keyframes([...u.BACKDROP_KEYFRAMES]),o.progressStart(!0,1-f),p=f,c(p),d&&p===a[a.length-1]&&(d.scrollY=!0),p>i?x():w(),k.enable(!0),e()})):(k.enable(!0),e()):e()}),{oneTimeCallback:!0}).progressEnd(1,0,500)}))},k=Rm({el:n,gestureName:"modalSheet",gesturePriority:40,direction:"y",threshold:10,canStart:e=>{const t=e.event.target.closest("ion-content");return p=s(),1!==p||!t},onStart:()=>{m=void 0!==e.canDismiss&&!0!==e.canDismiss&&0===b,d&&(d.scrollY=!1),$f((()=>{e.focus()})),o.progressStart(!0,1-p)},onMove:e=>{const t=1-p,n=a.length>1?1-a[1]:void 0,r=t+e.deltaY/h,i=void 0!==n&&r>=n&&m,s=i?.95:.9999,l=i&&void 0!==n?n+Ry((r-n)/(s-n)):r;f=Hf(1e-4,l,s),o.progressStep(f)},onEnd:e=>{const t=e.velocityY,n=(e.deltaY+350*t)/h,r=p-n,i=a.reduce(((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e));_({breakpoint:i,breakpointOffset:f,canDismiss:m})}});return{gesture:k,moveSheetToBreakpoint:_}})(this.el,this.backdropEl,e,t,n,i,this.sortedBreakpoints,(()=>{var e;return null!==(e=this.currentBreakpoint)&&void 0!==e?e:0}),(()=>this.sheetOnDismiss()),(e=>{this.currentBreakpoint!==e&&(this.currentBreakpoint=e,this.ionBreakpointDidChange.emit({breakpoint:e}))}));this.gesture=o,this.moveSheetToBreakpoint=a,this.gesture.enable(!0)}sheetOnDismiss(){this.gestureAnimationDismissing=!0,this.animation.onFinish((async()=>{this.currentBreakpoint=0,this.ionBreakpointDidChange.emit({breakpoint:this.currentBreakpoint}),await this.dismiss(void 0,Cg),this.gestureAnimationDismissing=!1}))}async dismiss(e,t){var n;if(this.gestureAnimationDismissing&&t!==Cg)return!1;if("handler"!==t&&!(await this.checkCanDismiss(e,t)))return!1;const{presentingElement:r}=this;void 0!==r&&"ios"===rg(this)&&Dy(this.statusBarStyle),"undefined"!=typeof window&&this.keyboardOpenCallback&&(window.removeEventListener(py,this.keyboardOpenCallback),this.keyboardOpenCallback=void 0),void 0!==this.currentTransition&&await this.currentTransition;const i=hg.get(this)||[];this.currentTransition=(async(e,t,n,r,i,o,a)=>{var s,l;if(!e.presented)return!1;bg(!1),e.presented=!1;try{e.el.style.setProperty("pointer-events","none"),e.willDismiss.emit({data:t,role:n}),null===(s=e.willDismissShorthand)||void 0===s||s.emit({data:t,role:n});const c=rg(e),u=e.leaveAnimation?e.leaveAnimation:Fm.get(r,"ios"===c?i:o);n!==Cg&&await _g(e,u,e.el,a),e.didDismiss.emit({data:t,role:n}),null===(l=e.didDismissShorthand)||void 0===l||l.emit({data:t,role:n}),hg.delete(e),e.el.classList.add("overlay-hidden"),e.el.style.removeProperty("pointer-events"),void 0!==e.el.lastFocus&&(e.el.lastFocus=void 0)}catch(c){console.error(c)}return e.el.remove(),!0})(this,e,t,"modalLeave",Uy,Zy,{presentingEl:r,currentBreakpoint:null!==(n=this.currentBreakpoint)&&void 0!==n?n:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint});const o=await this.currentTransition;if(o){const{delegate:e}=this.getDelegate();await sg(e,this.usersElement),Pf((()=>this.el.classList.remove("show-modal"))),this.animation&&this.animation.destroy(),this.gesture&&this.gesture.destroy(),i.forEach((e=>e.destroy()))}return this.currentBreakpoint=void 0,this.currentTransition=void 0,this.animation=void 0,o}onDidDismiss(){return kg(this.el,"ionModalDidDismiss")}onWillDismiss(){return kg(this.el,"ionModalWillDismiss")}async setCurrentBreakpoint(e){if(!this.isSheetModal)return void lg("setCurrentBreakpoint is only supported on sheet modals.");if(!this.breakpoints.includes(e))return void lg(`Attempted to set invalid breakpoint value ${e}. Please double check that the breakpoint value is part of your defined breakpoints.`);const{currentBreakpoint:t,moveSheetToBreakpoint:n,canDismiss:r,breakpoints:i}=this;t!==e&&n&&(this.sheetTransition=n({breakpoint:e,breakpointOffset:1-t,canDismiss:void 0!==r&&!0!==r&&0===i[0]}),await this.sheetTransition,this.sheetTransition=void 0)}async getCurrentBreakpoint(){return this.currentBreakpoint}async moveToNextBreakpoint(){const{breakpoints:e,currentBreakpoint:t}=this;if(!e||null==t)return!1;const n=e.filter((e=>0!==e)),r=n.indexOf(t),i=n[(r+1)%n.length];return await this.setCurrentBreakpoint(i),!0}render(){const{handle:e,isSheetModal:t,presentingElement:n,htmlAttributes:r,handleBehavior:i,inheritedAttributes:o}=this,a=!1!==e&&t,s=rg(this),l=void 0!==n&&"ios"===s,c="cycle"===i;return yp(xp,Object.assign({"no-router":!0,tabindex:"-1"},r,{style:{zIndex:`${2e4+this.overlayIndex}`},class:Object.assign({[s]:!0,"modal-default":!l&&!t,"modal-card":l,"modal-sheet":t,"overlay-hidden":!0},rv(this.cssClass)),onIonBackdropTap:this.onBackdropTap,onIonModalDidPresent:this.onLifecycle,onIonModalWillPresent:this.onLifecycle,onIonModalWillDismiss:this.onLifecycle,onIonModalDidDismiss:this.onLifecycle}),yp("ion-backdrop",{ref:e=>this.backdropEl=e,visible:this.showBackdrop,tappable:this.backdropDismiss,part:"backdrop"}),"ios"===s&&yp("div",{class:"modal-shadow"}),yp("div",Object.assign({role:"dialog"},o,{"aria-modal":"true",class:"modal-wrapper ion-overlay-wrapper",part:"content",ref:e=>this.wrapperEl=e}),a&&yp("button",{class:"modal-handle",tabIndex:c?0:-1,"aria-label":"Activate to adjust the size of the dialog overlaying the screen",onClick:c?this.onHandleClick:void 0,part:"handle"}),yp("slot",null)))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, #c0c0be);cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.4)}:host(.modal-card),:host(.modal-sheet){--border-radius:10px}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:10px}}.modal-wrapper{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0)}@media screen and (max-width: 767px){@supports (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - max(30px, var(--ion-safe-area-top)) - 10px)}}@supports not (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - 40px)}}:host(.modal-card) .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.modal-card) .modal-wrapper,:host-context([dir=rtl]).modal-card .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.modal-card) .modal-wrapper:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}}:host(.modal-card){--backdrop-opacity:0;--width:100%;-ms-flex-align:end;align-items:flex-end}:host(.modal-card) .modal-shadow{display:none}:host(.modal-card) ion-backdrop{pointer-events:none}}@media screen and (min-width: 768px){:host(.modal-card){--width:calc(100% - 120px);--height:calc(100% - (120px + var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));--max-width:720px;--max-height:1000px;--backdrop-opacity:0;--box-shadow:0px 0px 30px 10px rgba(0, 0, 0, 0.1);-webkit-transition:all 0.5s ease-in-out;transition:all 0.5s ease-in-out}:host(.modal-card) .modal-wrapper{-webkit-box-shadow:none;box-shadow:none}:host(.modal-card) .modal-shadow{-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}}:host(.modal-sheet) .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.modal-sheet) .modal-wrapper,:host-context([dir=rtl]).modal-sheet .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.modal-sheet) .modal-wrapper:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}}',md:':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, #c0c0be);cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:2px;--box-shadow:0 28px 48px rgba(0, 0, 0, 0.4)}}.modal-wrapper{-webkit-transform:translate3d(0,  40px,  0);transform:translate3d(0,  40px,  0);opacity:0.01}'}}},[33,"ion-modal",{hasController:[4,"has-controller"],overlayIndex:[2,"overlay-index"],delegate:[16],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],breakpoints:[16],initialBreakpoint:[2,"initial-breakpoint"],backdropBreakpoint:[2,"backdrop-breakpoint"],handle:[4],handleBehavior:[1,"handle-behavior"],component:[1],componentProps:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],showBackdrop:[4,"show-backdrop"],animated:[4],presentingElement:[16],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],keepContentsMounted:[4,"keep-contents-mounted"],canDismiss:[4,"can-dismiss"],presented:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64],setCurrentBreakpoint:[64],getCurrentBreakpoint:[64]}]),Wy={ionModalDidPresent:"ionViewDidEnter",ionModalWillPresent:"ionViewWillEnter",ionModalWillDismiss:"ionViewWillLeave",ionModalDidDismiss:"ionViewDidLeave"},qy=function(){"undefined"!=typeof customElements&&["ion-modal","ion-backdrop"].forEach((e=>{switch(e){case"ion-modal":customElements.get(e)||customElements.define(e,Hy);break;case"ion-backdrop":customElements.get(e)||"undefined"!=typeof customElements&&["ion-backdrop"].forEach((e=>{"ion-backdrop"===e&&(customElements.get(e)||customElements.define(e,ev))}))}}))},Gy=sf(class extends wf{constructor(){super(),this.__registerHost()}componentDidLoad(){Yy((async()=>{const e=Zm(window,"hybrid");if(Fm.getBoolean("_testing")||Qh((()=>t.import("./index9-legacy-5aec57b7.js"))).then((e=>e.startTapClick(Fm))),Fm.getBoolean("statusTap",e)&&Qh((()=>t.import("./status-tap-legacy-0392268c.js"))).then((e=>e.startStatusTap())),Fm.getBoolean("inputShims",Ky())){const e=Zm(window,"ios")?"ios":"android";Qh((()=>t.import("./input-shims-legacy-a713b32e.js"))).then((t=>t.startInputShims(Fm,e)))}const n=await Qh((()=>Promise.resolve().then((()=>og))));Fm.getBoolean("hardwareBackButton",e)?n.startHardwareBackButton():n.blockHardwareBackButton(),"undefined"!=typeof window&&Qh((()=>Promise.resolve().then((()=>My)))).then((e=>e.startKeyboardAssist(window))),Qh((()=>t.import("./focus-visible-legacy-b3e947fe.js"))).then((e=>this.focusVisible=e.startFocusVisible()))}))}async setFocus(e){this.focusVisible&&this.focusVisible.setFocus(e)}render(){const e=rg(this);return yp(xp,{class:{[e]:!0,"ion-page":!0,"force-statusbar-padding":Fm.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return"html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}"}},[0,"ion-app",{setFocus:[64]}]),Ky=()=>!(!Zm(window,"ios")||!Zm(window,"mobile"))||!(!Zm(window,"android")||!Zm(window,"mobileweb")),Yy=e=>{"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,32)},Xy=function(){"undefined"!=typeof customElements&&["ion-app"].forEach((e=>{"ion-app"===e&&(customElements.get(e)||customElements.define(e,Gy))}))},Jy=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Ep(this,"ionNavWillLoad",7),this.ionNavWillChange=Ep(this,"ionNavWillChange",3),this.ionNavDidChange=Ep(this,"ionNavDidChange",3),this.gestureOrAnimationInProgress=!1,this.mode=rg(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(void 0!==this.swipeHandler)}async connectedCallback(){const e=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await Qh((()=>t.import("./swipe-back-legacy-efa71c75.js")))).createSwipeBackGesture(this.el,(()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart()),(()=>e()),(e=>{var t;return null===(t=this.ani)||void 0===t?void 0:t.progressStep(e)}),((e,t,n)=>{if(this.ani){this.ani.onFinish((()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(e)}),{oneTimeCallback:!0});let r=e?-.001:.001;e?r+=km([0,0],[.32,.72],[0,1],[1,1],t)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),r+=km([0,0],[1,0],[.68,.28],[1,1],t)[0]),this.ani.progressEnd(e?1:0,r,n)}else this.gestureOrAnimationInProgress=!1})),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(e,t,n){const r=await this.lock();let i=!1;try{i=await this.transition(e,t,n)}catch($A){console.error($A)}return r(),i}async setRouteId(e,t,n,r){return{changed:await this.setRoot(e,t,{duration:"root"===n?0:void 0,direction:"back"===n?"back":"forward",animationBuilder:r}),element:this.activeEl}}async getRouteId(){const e=this.activeEl;return e?{id:e.tagName,element:e,params:this.activeParams}:void 0}async setRoot(e,t,n){if(this.activeComponent===e&&Kf(t,this.activeParams))return!1;const r=this.activeEl,i=await ag(this.delegate,this.el,e,["ion-page","ion-page-invisible"],t);return this.activeComponent=e,this.activeEl=i,this.activeParams=t,await this.commit(i,r,n),await sg(this.delegate,r),!0}async transition(e,t,n={}){if(t===e)return!1;this.ionNavWillChange.emit();const{el:r,mode:i}=this,o=this.animated&&Fm.getBoolean("animated",!0),a=n.animationBuilder||this.animation||Fm.get("navAnimation");return await sm(Object.assign(Object.assign({mode:i,animated:o,enteringEl:e,leavingEl:t,baseEl:r,deepWait:zf(r),progressCallback:n.progressAnimation?e=>{void 0===e||this.gestureOrAnimationInProgress?this.ani=e:(this.gestureOrAnimationInProgress=!0,e.onFinish((()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)}),{oneTimeCallback:!0}),e.progressEnd(0,0,0))}:void 0},n),{animationBuilder:a})),this.ionNavDidChange.emit(),!0}async lock(){const e=this.waitPromise;let t;return this.waitPromise=new Promise((e=>t=e)),void 0!==e&&await e,t}render(){return yp("slot",null)}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}"}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]}]),Qy=function(){"undefined"!=typeof customElements&&["ion-router-outlet"].forEach((e=>{"ion-router-outlet"===e&&(customElements.get(e)||customElements.define(e,Jy))}))},eb=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=Ep(this,"ionTabBarChanged",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){void 0!==this.selectedTab&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}async connectedCallback(){this.keyboardCtrl=await(async e=>{let t,n,r,i;const o=async()=>{const e=await zv.getResizeMode(),o=void 0===e?void 0:e.mode;t=()=>{void 0===i&&(i=Nv(o)),r=!0,a(r,o)},n=()=>{r=!1,a(r,o)},null==Df||Df.addEventListener("keyboardWillShow",t),null==Df||Df.addEventListener("keyboardWillHide",n)},a=(t,n)=>{e&&e(t,s(n))},s=e=>{if(0===i||i===Nv(e))return;const t=jv(e);return null!==t?new Promise((e=>{const n=new ResizeObserver((()=>{t.clientHeight===i&&(n.disconnect(),e())}));n.observe(t)})):void 0};return await o(),{init:o,destroy:()=>{null==Df||Df.removeEventListener("keyboardWillShow",t),null==Df||Df.removeEventListener("keyboardWillHide",n),t=n=void 0},isKeyboardVisible:()=>r}})((async(e,t)=>{!1===e&&void 0!==t&&await t,this.keyboardVisible=e}))}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}render(){const{color:e,translucent:t,keyboardVisible:n}=this,r=rg(this),i=n&&"top"!==this.el.getAttribute("slot");return yp(xp,{role:"tablist","aria-hidden":i?"true":null,class:nv(e,{[r]:!0,"tab-bar-translucent":t,"tab-bar-hidden":i})},yp("slot",null))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",md:":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, #595959));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}"}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]}]),tb=function(){"undefined"!=typeof customElements&&["ion-tab-bar"].forEach((e=>{"ion-tab-bar"===e&&(customElements.get(e)||customElements.define(e,eb))}))},nb=sf(class extends wf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=Ep(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=e=>{"Enter"!==e.key&&" "!==e.key||this.selectTab(e)},this.onClick=e=>{this.selectTab(e)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(e){const t=e.target,n=this.el.parentElement;(e.composedPath().includes(n)||(null==t?void 0:t.contains(this.el)))&&(this.selected=this.tab===e.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},jf(this.el,["aria-label"])),void 0===this.layout&&(this.layout=Fm.get("tabButtonLayout","icon-top"))}selectTab(e){void 0!==this.tab&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),e.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:e,hasIcon:t,hasLabel:n,href:r,rel:i,target:o,layout:a,selected:s,tab:l,inheritedAttributes:c}=this,u=rg(this),d={download:this.download,href:r,rel:i,target:o};return yp(xp,{onClick:this.onClick,onKeyup:this.onKeyUp,id:void 0!==l?`tab-button-${l}`:null,class:{[u]:!0,"tab-selected":s,"tab-disabled":e,"tab-has-label":n,"tab-has-icon":t,"tab-has-label-only":n&&!t,"tab-has-icon-only":t&&!n,[`tab-layout-${a}`]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},yp("a",Object.assign({},d,{class:"button-native",part:"native",role:"tab","aria-selected":s?"true":null,"aria-disabled":e?"true":null,tabindex:e?"-1":void 0},c),yp("span",{class:"button-inner"},yp("slot",null)),"md"===u&&yp("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:30px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:calc(50% + 12px)}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 12px)}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:calc(50% + 35px)}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 35px)}}}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:calc(50% + 30px)}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 30px)}}}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}',md:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:80%}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:80%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:80%}}}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}'}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]),rb=function(){"undefined"!=typeof customElements&&["ion-tab-button","ion-ripple-effect"].forEach((e=>{switch(e){case"ion-tab-button":customElements.get(e)||customElements.define(e,nb);break;case"ion-ripple-effect":customElements.get(e)||"undefined"!=typeof customElements&&["ion-ripple-effect"].forEach((e=>{"ion-ripple-effect"===e&&(customElements.get(e)||customElements.define(e,dv))}))}}))},ib=!0,ob=!0,ab=!0,sb=!1,lb=!1;let cb,ub,db,hb=!1,pb=!1,fb=!1,mb=!1,gb=null,vb=!1;const yb="http://www.w3.org/1999/xlink",bb={},xb=e=>"object"==(e=typeof e)||"function"===e,wb=(e,t,...n)=>{let r=null,i=null,o=null,a=!1,s=!1;const l=[],c=t=>{for(let n=0;n<t.length;n++)r=t[n],Array.isArray(r)?c(r):null!=r&&"boolean"!=typeof r&&((a="function"!=typeof e&&!xb(r))&&(r=String(r)),a&&s?l[l.length-1].$text$+=r:l.push(a?_b(null,r):r),s=a)};if(c(n),t){t.key&&(i=t.key),t.name&&(o=t.name);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,l,Eb);const u=_b(e,null);return u.$attrs$=t,l.length>0&&(u.$children$=l),u.$key$=i,u.$name$=o,u},_b=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return n},kb={},Eb={forEach:(e,t)=>e.map(Sb).forEach(t),map:(e,t)=>e.map(Sb).map(t).map(Cb)},Sb=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Cb=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),wb(e.vtag,t,...e.vchildren||[])}const t=_b(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Tb=new WeakMap,Mb=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,i=(t.$tagName$,()=>{}),o=((e,t,n,r)=>{var i;let o=Ib(t,n);const a=mx.get(o);if(e=11===e.nodeType?e:yx,a)if("string"==typeof a){e=e.head||e;let t,n=Tb.get(e);if(n||Tb.set(e,n=new Set),!n.has(o)){{t=yx.createElement("style"),t.innerHTML=a;const n=null!==(i=xx.$nonce$)&&void 0!==i?i:function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===n?void 0:n.getAttribute("content"))&&void 0!==r?r:void 0}(yx);null!=n&&t.setAttribute("nonce",n),e.insertBefore(t,e.querySelector("link"))}n&&n.add(o)}}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,a]);return o})(n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$);10&r&&(n["s-sc"]=o,n.classList.add(o+"-h"),2&r&&n.classList.add(o+"-s")),i()},Ib=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),Ob=(e,t,n,r,i,o)=>{if(n!==r){let a=px(e,t),s=t.toLowerCase();if("class"===t){const t=e.classList,i=Pb(n),o=Pb(r);t.remove(...i.filter((e=>e&&!o.includes(e)))),t.add(...o.filter((e=>e&&!i.includes(e))))}else if("style"===t){for(const t in n)r&&null!=r[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in r)n&&r[t]===n[t]||(t.includes("-")?e.style.setProperty(t,r[t]):e.style[t]=r[t])}else if("key"===t);else if("ref"===t)r&&r(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=xb(r);if((a||l&&null!==r)&&!i)try{if(e.tagName.includes("-"))e[t]=r;else{const i=null==r?"":r;"list"===t?a=!1:null!=n&&e[t]==i||(e[t]=i)}}catch($A){}let c=!1;s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,c=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(yb,t):e.removeAttribute(t)):(!a||4&o||i)&&!l&&(r=!0===r?"":r,c?e.setAttributeNS(yb,t,r):e.setAttribute(t,r))}else t="-"===t[2]?t.slice(3):px(vx,s)?s.slice(2):s[2]+t.slice(3),n&&xx.rel(e,t,n,!1),r&&xx.ael(e,t,r,!1)}},Ab=/\s/,Pb=e=>e?e.split(Ab):[],Db=(e,t,n,r)=>{const i=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||bb,a=t.$attrs$||bb;for(r in o)r in a||Ob(i,r,o[r],void 0,n,t.$flags$);for(r in a)Ob(i,r,o[r],a[r],n,t.$flags$)},Lb=(e,t,n,r)=>{const i=t.$children$[n];let o,a,s,l=0;if(hb||(fb=!0,"slot"===i.$tag$&&(cb&&r.classList.add(cb+"-s"),i.$flags$|=i.$children$?2:1)),null!==i.$text$)o=i.$elm$=yx.createTextNode(i.$text$);else if(1&i.$flags$)o=i.$elm$=yx.createTextNode("");else{if(mb||(mb="svg"===i.$tag$),o=i.$elm$=yx.createElementNS(mb?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&i.$flags$?"slot-fb":i.$tag$),mb&&"foreignObject"===i.$tag$&&(mb=!1),Db(null,i,mb),(e=>null!=e)(cb)&&o["s-si"]!==cb&&o.classList.add(o["s-si"]=cb),i.$children$)for(l=0;l<i.$children$.length;++l)a=Lb(e,i,l,o),a&&o.appendChild(a);"svg"===i.$tag$?mb=!1:"foreignObject"===o.tagName&&(mb=!0)}return o["s-hn"]=db,3&i.$flags$&&(o["s-sr"]=!0,o["s-cr"]=ub,o["s-sn"]=i.$name$||"",s=e&&e.$children$&&e.$children$[n],s&&s.$tag$===i.$tag$&&e.$elm$&&Rb(e.$elm$,!1)),o},Rb=(e,t)=>{xx.$flags$|=1;const n=e.childNodes;for(let r=n.length-1;r>=0;r--){const e=n[r];e["s-hn"]!==db&&e["s-ol"]&&(Fb(e).insertBefore(e,Bb(e)),e["s-ol"].remove(),e["s-ol"]=void 0,fb=!0),t&&Rb(e,t)}xx.$flags$&=-2},zb=(e,t,n,r,i,o)=>{let a,s=e["s-cr"]&&e["s-cr"].parentNode||e;for(s.shadowRoot&&s.tagName===db&&(s=s.shadowRoot);i<=o;++i)r[i]&&(a=Lb(null,n,i,e),a&&(r[i].$elm$=a,s.insertBefore(a,Bb(t))))},jb=(e,t,n,r,i)=>{for(;t<=n;++t)(r=e[t])&&(i=r.$elm$,Wb(r),pb=!0,i["s-ol"]?i["s-ol"].remove():Rb(i,!0),i.remove())},Nb=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),Bb=e=>e&&e["s-ol"]||e,Fb=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Vb=(e,t)=>{const n=t.$elm$=e.$elm$,r=e.$children$,i=t.$children$,o=t.$tag$,a=t.$text$;let s;null===a?(mb="svg"===o||"foreignObject"!==o&&mb,"slot"===o||Db(e,t,mb),null!==r&&null!==i?((e,t,n,r)=>{let i,o,a=0,s=0,l=0,c=0,u=t.length-1,d=t[0],h=t[u],p=r.length-1,f=r[0],m=r[p];for(;a<=u&&s<=p;)if(null==d)d=t[++a];else if(null==h)h=t[--u];else if(null==f)f=r[++s];else if(null==m)m=r[--p];else if(Nb(d,f))Vb(d,f),d=t[++a],f=r[++s];else if(Nb(h,m))Vb(h,m),h=t[--u],m=r[--p];else if(Nb(d,m))"slot"!==d.$tag$&&"slot"!==m.$tag$||Rb(d.$elm$.parentNode,!1),Vb(d,m),e.insertBefore(d.$elm$,h.$elm$.nextSibling),d=t[++a],m=r[--p];else if(Nb(h,f))"slot"!==d.$tag$&&"slot"!==m.$tag$||Rb(h.$elm$.parentNode,!1),Vb(h,f),e.insertBefore(h.$elm$,d.$elm$),h=t[--u],f=r[++s];else{for(l=-1,c=a;c<=u;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===f.$key$){l=c;break}l>=0?(o=t[l],o.$tag$!==f.$tag$?i=Lb(t&&t[s],n,l,e):(Vb(o,f),t[l]=void 0,i=o.$elm$),f=r[++s]):(i=Lb(t&&t[s],n,s,e),f=r[++s]),i&&Fb(d.$elm$).insertBefore(i,Bb(d.$elm$))}a>u?zb(e,null==r[p+1]?null:r[p+1].$elm$,n,r,s,p):s>p&&jb(t,a,u)})(n,r,t,i):null!==i?(null!==e.$text$&&(n.textContent=""),zb(n,null,t,i,0,i.length-1)):null!==r&&jb(r,0,r.length-1),mb&&"svg"===o&&(mb=!1)):(s=n["s-cr"])?s.parentNode.textContent=a:e.$text$!==a&&(n.data=a)},Ub=e=>{const t=e.childNodes;let n,r,i,o,a,s;for(r=0,i=t.length;r<i;r++)if(n=t[r],1===n.nodeType){if(n["s-sr"])for(a=n["s-sn"],n.hidden=!1,o=0;o<i;o++)if(s=t[o].nodeType,t[o]["s-hn"]!==n["s-hn"]||""!==a){if(1===s&&a===t[o].getAttribute("slot")){n.hidden=!0;break}}else if(1===s||3===s&&""!==t[o].textContent.trim()){n.hidden=!0;break}Ub(n)}},$b=[],Zb=e=>{let t,n,r,i,o,a,s=0;const l=e.childNodes,c=l.length;for(;s<c;s++){if(t=l[s],t["s-sr"]&&(n=t["s-cr"])&&n.parentNode)for(r=n.parentNode.childNodes,i=t["s-sn"],a=r.length-1;a>=0;a--)n=r[a],n["s-cn"]||n["s-nr"]||n["s-hn"]===t["s-hn"]||(Hb(n,i)?(o=$b.find((e=>e.$nodeToRelocate$===n)),pb=!0,n["s-sn"]=n["s-sn"]||i,o?o.$slotRefNode$=t:$b.push({$slotRefNode$:t,$nodeToRelocate$:n}),n["s-sr"]&&$b.map((e=>{Hb(e.$nodeToRelocate$,n["s-sn"])&&(o=$b.find((e=>e.$nodeToRelocate$===n)),o&&!e.$slotRefNode$&&(e.$slotRefNode$=o.$slotRefNode$))}))):$b.some((e=>e.$nodeToRelocate$===n))||$b.push({$nodeToRelocate$:n}));1===t.nodeType&&Zb(t)}},Hb=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,Wb=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Wb)},qb=(e,t)=>{const n=e.$hostElement$,r=e.$cmpMeta$,i=e.$vnode$||_b(null,null),o=(a=t)&&a.$tag$===kb?t:wb(null,null,t);var a;if(db=n.tagName,r.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},r.$attrsToReflect$.map((([e,t])=>o.$attrs$[t]=n[e]))),o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=i.$elm$=n.shadowRoot||n,cb=n["s-sc"],ub=n["s-cr"],hb=0!=(1&r.$flags$),pb=!1,Vb(i,o),xx.$flags$|=1,fb){let e,t,n,r,i,a;Zb(o.$elm$);let s=0;for(;s<$b.length;s++)e=$b[s],t=e.$nodeToRelocate$,t["s-ol"]||(n=yx.createTextNode(""),n["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=n,t));for(s=0;s<$b.length;s++)if(e=$b[s],t=e.$nodeToRelocate$,e.$slotRefNode$){for(r=e.$slotRefNode$.parentNode,i=e.$slotRefNode$.nextSibling,n=t["s-ol"];n=n.previousSibling;)if(a=n["s-nr"],a&&a["s-sn"]===t["s-sn"]&&r===a.parentNode&&(a=a.nextSibling,!a||!a["s-nr"])){i=a;break}(!i&&r!==t.parentNode||t.nextSibling!==i)&&t!==i&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),r.insertBefore(t,i))}else 1===t.nodeType&&(t.hidden=!0)}pb&&Ub(o.$elm$),xx.$flags$&=-2,$b.length=0},Gb=(e,t)=>(e.$flags$|=16,e.$ancestorComponent$,Ix((()=>Kb(e,t)))),Kb=(e,t)=>{const n=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{}),i=n;let o;return o=Qb(i,t?"componentWillLoad":"componentWillUpdate"),o=ex(o,(()=>Qb(i,"componentWillRender"))),r(),ex(o,(()=>Yb(e,i,t)))},Yb=async(e,t,n)=>{const r=e.$hostElement$,i=(e.$cmpMeta$.$tagName$,()=>{});r["s-rc"],n&&Mb(e);const o=(e.$cmpMeta$.$tagName$,()=>{});Xb(e,t,r),o(),i(),Jb(e)},Xb=(e,t,n)=>{try{gb=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(ib||ob)&&(ab||ob)&&(sb||qb(e,t))}catch($A){fx($A,e.$hostElement$)}return gb=null,null},Jb=e=>{e.$cmpMeta$.$tagName$;const t=()=>{},n=e.$hostElement$;e.$ancestorComponent$,Qb(n,"componentDidRender"),64&e.$flags$?(Qb(n,"componentDidUpdate"),t()):(e.$flags$|=64,Qb(n,"componentDidLoad"),t())},Qb=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch($A){fx($A)}},ex=(e,t)=>e&&e.then?e.then(t):t(),tx=(e,t,n,r)=>{const i=dx(e),o=e,a=i.$instanceValues$.get(t),s=i.$flags$,l=o;var c,u;c=n,u=r.$members$[t][0],n=null==c||xb(c)?c:4&u?"false"!==c&&(""===c||!!c):2&u?parseFloat(c):1&u?String(c):c;const d=Number.isNaN(a)&&Number.isNaN(n);if(n!==a&&!d){if(i.$instanceValues$.set(t,n),r.$watchers$&&128&s){const e=r.$watchers$[t];e&&e.map((e=>{try{l[e](n,a,t)}catch($A){fx($A,o)}}))}if(2==(18&s)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(n,a,t))return;Gb(i,!1)}}},nx=(e,t,n)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const n=Object.entries(t.$members$),r=e.prototype;n.map((([e,[n]])=>{(31&n||32&n)&&Object.defineProperty(r,e,{get(){return t=e,dx(this).$instanceValues$.get(t);var t},set(n){tx(this,e,n,t)},configurable:!0,enumerable:!0})}));{const i=new Map;r.attributeChangedCallback=function(e,t,n){xx.jmp((()=>{const t=i.get(e);if(this.hasOwnProperty(t))n=this[t],delete this[t];else if(r.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==n)return;this[t]=(null!==n||"boolean"!=typeof this[t])&&n}))},e.observedAttributes=n.filter((([e,t])=>15&t[0])).map((([e,n])=>{const r=n[1]||e;return i.set(r,e),512&n[0]&&t.$attrsToReflect$.push([e,r]),r}))}}return e},rx=async(e,t,n,r,i)=>{if(0==(32&t.$flags$)&&(i=e.constructor,t.$flags$|=32,customElements.whenDefined(n.$tagName$).then((()=>t.$flags$|=128)),i.style)){let r=i.style;"string"!=typeof r&&(r=r[t.$modeName$=(e=>gx.map((t=>t(e))).find((e=>!!e)))(e)]);const o=Ib(n,t.$modeName$);if(!mx.has(o)){const e=(n.$tagName$,()=>{});((e,t,n)=>{let r=mx.get(e);_x&&n?(r=r||new CSSStyleSheet,"string"==typeof r?r=t:r.replaceSync(t)):r=t,mx.set(e,r)})(o,r,!!(1&n.$flags$)),e()}}t.$ancestorComponent$,Gb(t,!0)},ix=e=>{const t=e["s-cr"]=yx.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},ox=(e,t)=>{const n={$flags$:t[0],$tagName$:t[1]};n.$members$=t[2],n.$listeners$=t[3],n.$watchers$=e.$watchers$,n.$attrsToReflect$=[];const r=e.prototype.connectedCallback,i=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){hx(this,n)},connectedCallback(){(e=>{if(0==(1&xx.$flags$)){const t=dx(e),n=t.$cmpMeta$,r=(n.$tagName$,()=>{});1&t.$flags$?(ax(e,t,n.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&n.$flags$&&ix(e),n.$members$&&Object.entries(n.$members$).map((([t,[n]])=>{if(31&n&&e.hasOwnProperty(t)){const n=e[t];delete e[t],e[t]=n}})),rx(e,t,n)),r()}})(this),r&&r.call(this)},disconnectedCallback(){(e=>{if(0==(1&xx.$flags$)){const t=dx(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),i&&i.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&n.$flags$)})}}),e.is=n.$tagName$,nx(e,n)},ax=(e,t,n,r)=>{n&&n.map((([n,r,i])=>{const o=lx(e,n),a=sx(t,i),s=cx(n);xx.ael(o,r,a,s),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>xx.rel(o,r,a,s)))}))},sx=(e,t)=>n=>{try{lb||e.$hostElement$[t](n)}catch($A){fx($A)}},lx=(e,t)=>4&t?yx:8&t?vx:16&t?yx.body:e,cx=e=>wx?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),ux=new WeakMap,dx=e=>ux.get(e),hx=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return ax(e,n,t.$listeners$),ux.set(e,n)},px=(e,t)=>t in e,fx=(e,t)=>(0,console.error)(e,t),mx=new Map,gx=[],vx="undefined"!=typeof window?window:{},yx=vx.document||{head:{}},bx=vx.HTMLElement||class{},xx={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},wx=(()=>{let e=!1;try{yx.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch($A){}return e})(),_x=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch($A){}return!1})(),kx=[],Ex=[],Sx=(e,t)=>n=>{e.push(n),vb||(vb=!0,t&&4&xx.$flags$?Mx(Tx):xx.raf(Tx))},Cx=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch($A){fx($A)}e.length=0},Tx=()=>{Cx(kx),Cx(Ex),(vb=kx.length>0)&&xx.raf(Tx)},Mx=e=>(e=>Promise.resolve(e))().then(e),Ix=Sx(Ex,!0);let Ox;const Ax=e=>{const t=(()=>{if("undefined"==typeof window)return new Map;if(!Ox){const e=window;e.Ionicons=e.Ionicons||{},Ox=e.Ionicons.map=e.Ionicons.map||new Map}return Ox})().get(e);return t||(e=>{const t=new URL(e,xx.$resourcesUrl$);return t.origin!==vx.location.origin?t.href:t.pathname})(`svg/${e}.svg`)},Px=(e,t,n,r,i)=>(n="ios"===(n&&zx(n))?"ios":"md",r&&"ios"===n?e=zx(r):i&&"md"===n?e=zx(i):(e||!t||Lx(t)||(e=t),Rx(e)&&(e=zx(e))),Rx(e)&&""!==e.trim()?""!==e.replace(/[a-z]|-|\d/gi,"")?null:e:null),Dx=e=>Rx(e)&&(e=e.trim(),Lx(e))?e:null,Lx=e=>e.length>0&&/(\/|\.)/.test(e),Rx=e=>"string"==typeof e,zx=e=>e.toLowerCase(),jx=e=>{if(1===e.nodeType){if("script"===e.nodeName.toLowerCase())return!1;for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;if(Rx(n)&&0===n.toLowerCase().indexOf("on"))return!1}for(let t=0;t<e.childNodes.length;t++)if(!jx(e.childNodes[t]))return!1}return!0},Nx=new Map,Bx=new Map;let Fx;const Vx=(e,t)=>{let n=Bx.get(e);if(!n){if("undefined"==typeof fetch||"undefined"==typeof document)return Nx.set(e,""),Promise.resolve();if((e=>e.startsWith("data:image/svg+xml"))(e)&&(e=>-1!==e.indexOf(";utf8,"))(e)){Fx||(Fx=new DOMParser);const t=Fx.parseFromString(e,"text/html").querySelector("svg");return t&&Nx.set(e,t.outerHTML),Promise.resolve()}n=fetch(e).then((n=>{if(n.ok)return n.text().then((n=>{n&&!1!==t&&(n=(e=>{const t=document.createElement("div");t.innerHTML=e;for(let r=t.childNodes.length-1;r>=0;r--)"svg"!==t.childNodes[r].nodeName.toLowerCase()&&t.removeChild(t.childNodes[r]);const n=t.firstElementChild;if(n&&"svg"===n.nodeName.toLowerCase()){const e=n.getAttribute("class")||"";if(n.setAttribute("class",(e+" s-ion-icon").trim()),jx(n))return t.innerHTML}return""})(n)),Nx.set(e,n||"")}));Nx.set(e,"")})),Bx.set(e,n)}return n},Ux=ox(class extends bx{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=$x(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=((e,t=[])=>{const n={};return t.forEach((t=>{e.hasAttribute(t)&&(null!==e.getAttribute(t)&&(n[t]=e.getAttribute(t)),e.removeAttribute(t))})),n})(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",(()=>{this.isVisible=!0,this.loadIcon()}))}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,n){if(this.lazy&&"undefined"!=typeof window&&window.IntersectionObserver){const r=this.io=new window.IntersectionObserver((e=>{e[0].isIntersecting&&(r.disconnect(),this.io=void 0,n())}),{rootMargin:t});r.observe(e)}else n()}loadIcon(){if(this.isVisible){const e=(e=>{let t=Dx(e.src);if(t)return t;if(t=Px(e.name,e.icon,e.mode,e.ios,e.md),t)return Ax(t);if(e.icon){if(t=Dx(e.icon),t)return t;if(t=Dx(e.icon[e.mode]),t)return t}return null})(this);e&&(Nx.has(e)?this.svgContent=Nx.get(e):Vx(e,this.sanitize).then((()=>this.svgContent=Nx.get(e))))}this.iconName=Px(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:e,iconName:t,inheritedAttributes:n,el:r}=this,i=this.mode||"md",o=!!t&&(t.includes("arrow")||t.includes("chevron"))&&!1!==e,a=e||o;return wb(kb,Object.assign({role:"img",class:Object.assign(Object.assign({[i]:!0},Zx(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":a,"icon-rtl":a&&(s=r,s&&""!==s.dir?"rtl"===s.dir.toLowerCase():"rtl"===(null===document||void 0===document?void 0:document.dir.toLowerCase()))})},n),this.svgContent?wb("div",{class:"icon-inner",innerHTML:this.svgContent}):wb("div",{class:"icon-inner"}));var s}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}"}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),$x=()=>"undefined"!=typeof document&&document.documentElement.getAttribute("mode")||"md",Zx=e=>e?{"ion-color":!0,[`ion-color-${e}`]:!0}:null,Hx=function(){"undefined"!=typeof customElements&&["ion-icon"].forEach((e=>{"ion-icon"===e&&(customElements.get(e)||customElements.define(e,Ux))}))},Wx=$.createContext({onIonViewWillEnter:()=>{},ionViewWillEnter:()=>{},onIonViewDidEnter:()=>{},ionViewDidEnter:()=>{},onIonViewWillLeave:()=>{},ionViewWillLeave:()=>{},onIonViewDidLeave:()=>{},ionViewDidLeave:()=>{}}),qx=$.createContext({getIonRedirect:()=>{},getIonRoute:()=>{},getPageManager:()=>{},getStackManager:()=>{},goBack:e=>{"undefined"!=typeof window&&("string"==typeof e?window.location.pathname=e:window.history.back())},navigate:e=>{"undefined"!=typeof window&&(window.location.pathname=e)},hasIonicRouter:()=>!1,routeInfo:void 0,setCurrentTab:()=>{},changeTab:(e,t)=>{"undefined"!=typeof window&&(window.location.pathname=t)},resetTab:(e,t)=>{"undefined"!=typeof window&&(window.location.pathname=t)}}),Gx=e=>e.toLowerCase().split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(""),Kx=e=>e.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),Yx=(e,t,n={})=>{if(e instanceof Element){const r=Xx(e.classList,t,n);""!==r&&(e.className=r),Object.keys(t).forEach((n=>{if("children"!==n&&"style"!==n&&"ref"!==n&&"class"!==n&&"className"!==n&&"forwardedRef"!==n)if(0===n.indexOf("on")&&n[2]===n[2].toUpperCase()){const r=n.substring(2),i=r[0].toLowerCase()+r.substring(1);Jx(i)||Qx(e,i,t[n])}else e[n]=t[n],"string"==typeof t[n]&&e.setAttribute(Kx(n),t[n])}))}},Xx=(e,t,n)=>{const r=t.className||t.class,i=n.className||n.class,o=ew(e),a=ew(r?r.split(" "):[]),s=ew(i?i.split(" "):[]),l=[];return o.forEach((e=>{a.has(e)?(l.push(e),a.delete(e)):s.has(e)||l.push(e)})),a.forEach((e=>l.push(e))),l.join(" ")},Jx=e=>{if("undefined"==typeof document)return!0;{const t="on"+(e=>"doubleclick"===e?"dblclick":e)(e);let n=t in document;if(!n){const e=document.createElement("div");e.setAttribute(t,"return;"),n="function"==typeof e[t]}return n}},Qx=(e,t,n)=>{const r=e.__events||(e.__events={}),i=r[t];i&&e.removeEventListener(t,i),e.addEventListener(t,r[t]=function(e){n&&n.call(this,e)})},ew=e=>{const t=new Map;return e.forEach((e=>t.set(e,e))),t},tw=(...e)=>t=>{e.forEach((e=>{((e,t)=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})(e,t)}))},nw=(e,t,n,r)=>{void 0!==r&&r();const i=Gx(e),o=class extends $.Component{constructor(e){super(e),this.setComponentElRef=e=>{this.componentEl=e}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(e){Yx(this.componentEl,this.props,e)}render(){const t=this.props,{children:r,forwardedRef:i,style:o,className:a,ref:s}=t,l=Og(t,["children","forwardedRef","style","className","ref"]);let c=Object.keys(l).reduce(((e,t)=>{const n=l[t];if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){const r=t.substring(2).toLowerCase();"undefined"!=typeof document&&Jx(r)&&(e[t]=n)}else{const r=typeof n;"string"!==r&&"boolean"!==r&&"number"!==r||(e[Kx(t)]=n)}return e}),{});n&&(c=n(this.props,c));const u=Object.assign(Object.assign({},c),{ref:tw(i,this.setComponentElRef),style:o});return U.createElement(e,u,r)}static get displayName(){return i}};return t&&(o.contextType=t),((e,t)=>{const n=(t,n)=>$.createElement(e,Object.assign({},t,{forwardedRef:n}));return n.displayName=t,$.forwardRef(n)})(o,i)},rw=nw("ion-avatar",void 0,void 0,Qg),iw=nw("ion-buttons",void 0,void 0,sv),ow=nw("ion-content",void 0,void 0,xv),aw=nw("ion-fab",void 0,void 0,Sv),sw=nw("ion-header",void 0,void 0,qv),lw=nw("ion-input",void 0,void 0,Xv),cw=nw("ion-label",void 0,void 0,Jv),uw=nw("ion-title",void 0,void 0,oy),dw=nw("ion-toolbar",void 0,void 0,sy),hw=(e,t)=>{const n=(t,n)=>$.createElement(e,Object.assign({},t,{forwardedRef:n}));return n.displayName=t,$.forwardRef(n)},pw=e=>Zm(window,e),fw=()=>{if("undefined"!=typeof window){const e=window.Ionic;if(e&&e.config)return e.config}return null},mw=(e,t)=>{((e,t)=>{void 0===t||"undefined"==typeof customElements||customElements.get(e)||customElements.define(e,t)})(e,t);const n=Gx(e),r=class extends $.Component{constructor(e){super(e),this.handleClick=e=>{const{routerLink:t,routerDirection:n,routerOptions:r,routerAnimation:i}=this.props;void 0!==t&&(e.preventDefault(),this.context.navigate(t,n,void 0,i,r))},this.ref=$.createRef(),this.stableMergedRefs=tw(this.ref,this.props.forwardedRef)}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(e){const t=this.ref.current;Yx(t,this.props,e)}render(){const t=this.props,{children:n,forwardedRef:r,style:i,className:o,ref:a}=t,s=Og(t,["children","forwardedRef","style","className","ref"]),l=Object.keys(s).reduce(((e,t)=>{if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){const n=t.substring(2).toLowerCase();Jx(n)&&(e[t]=s[t])}else["string","boolean","number"].includes(typeof s[t])&&(e[Kx(t)]=s[t]);return e}),{}),c=Object.assign(Object.assign({},l),{ref:this.stableMergedRefs,style:i});if(this.props.routerLink&&!this.props.href&&(c.href=this.props.routerLink),c.onClick){const e=c.onClick;c.onClick=t=>{e(t),t.defaultPrevented||this.handleClick(t)}}else c.onClick=this.handleClick;return U.createElement(e,c,n)}static get displayName(){return n}static get contextType(){return qx}};return hw(r,n)},gw=mw("ion-button",ly),vw=mw("ion-card",cy),yw=mw("ion-fab-button",dy),bw=mw("ion-item",hy),xw=(e,t)=>{const n=e.__events||(e.__events={}),r=n[t];r&&(e.removeEventListener(t,r),n[t]=void 0)},ww=(e,t,n)=>{t&&t();const r=Gx(e),i=class extends $.Component{constructor(e){super(e),this.handleIonMount=()=>{this.setState({isOpen:!0})},this.handleWillPresent=e=>{this.setState({isOpen:!0}),this.props.onWillPresent&&this.props.onWillPresent(e)},this.handleDidDismiss=e=>{const t=this.wrapperRef.current,n=this.ref.current;t&&n&&(n.append(t),this.setState({isOpen:!1})),this.props.onDidDismiss&&this.props.onDidDismiss(e)},this.ref=$.createRef(),this.stableMergedRefs=tw(this.ref,this.props.forwardedRef),this.state={isOpen:!1},this.wrapperRef=$.createRef()}componentDidMount(){var e,t,n;this.componentDidUpdate(this.props),null===(e=this.ref.current)||void 0===e||e.addEventListener("ionMount",this.handleIonMount),null===(t=this.ref.current)||void 0===t||t.addEventListener("willPresent",this.handleWillPresent),null===(n=this.ref.current)||void 0===n||n.addEventListener("didDismiss",this.handleDidDismiss)}componentDidUpdate(e){const t=this.ref.current;Yx(t,this.props,e)}componentWillUnmount(){const e=this.ref.current;e&&this.state.isOpen&&(e.removeEventListener("didDismiss",this.handleDidDismiss),e.remove(),((e,t)=>{e instanceof Element&&Object.keys(t).forEach((t=>{if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){const n=t.substring(2),r=n[0].toLowerCase()+n.substring(1);Jx(r)||xw(e,r)}}))})(e,this.props))}render(){const t=this.props,{children:r,forwardedRef:i,style:o,className:a,ref:s}=t,l=Og(t,["children","forwardedRef","style","className","ref"]),c=Object.keys(l).reduce(((e,t)=>{if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){const n=t.substring(2).toLowerCase();Jx(n)&&(e[t]=l[t])}else["string","boolean","number"].includes(typeof l[t])&&(e[Kx(t)]=l[t]);return e}),{}),u=Object.assign(Object.assign({},c),{ref:this.stableMergedRefs,style:o});return U.createElement("template",{},U.createElement(e,u,this.state.isOpen||this.props.keepContentsMounted?U.createElement("div",{ref:this.wrapperRef,className:n?`${_w} ion-page`:_w},r):null))}static get displayName(){return r}};return hw(i,r)},_w="ion-delegate-host",kw=ww("ion-modal",qy,!0),Ew=$.createContext({addOverlay:()=>{},removeOverlay:()=>{}}),Sw=({onAddOverlay:e,onRemoveOverlay:t})=>{const[n,r]=U.useState({}),i=U.useRef({});i.current=n,U.useEffect((()=>{e(o),t(a)}),[]);const o=(e,t,n)=>{const o=Object.assign({},i.current);o[e]={component:t,containerElement:n},r(o)},a=e=>{const t=Object.assign({},i.current);delete t[e],r(t)},s=Object.keys(n);return $.createElement($.Fragment,null,s.map((e=>{const t=n[e];return ld.createPortal(t.component,t.containerElement,`overlay-${e}`)})))},Cw=nw("ion-tab-button",void 0,void 0,rb),Tw=nw("ion-tab-bar",void 0,void 0,tb),Mw=nw("ion-router-outlet",void 0,void 0,Qy),Iw=nw("ion-app",void 0,void 0,Xy),Ow=nw("ion-icon",void 0,void 0,Hx),Aw=(()=>class extends $.Component{constructor(e){super(e),this.ionContext={addOverlay:(e,t,n)=>{this.addOverlayCallback&&this.addOverlayCallback(e,t,n)},removeOverlay:e=>{this.removeOverlayCallback&&this.removeOverlayCallback(e)}}}render(){return $.createElement(Ew.Provider,{value:this.ionContext},$.createElement(Iw,Object.assign({},this.props),this.props.children),$.createElement(Sw,{onAddOverlay:e=>{this.addOverlayCallback=e},onRemoveOverlay:e=>{this.removeOverlayCallback=e}}))}static get displayName(){return"IonApp"}})(),Pw=$.createContext({registerIonPage:()=>{},isInOutlet:()=>!1});class Dw extends $.PureComponent{constructor(e){super(e),this.ionPageElementRef=$.createRef(),this.stableMergedRefs=tw(this.ionPageElementRef,this.props.forwardedRef)}componentDidMount(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{className:t,children:n,routeInfo:r,forwardedRef:i}=e,o=Og(e,["className","children","routeInfo","forwardedRef"]);return $.createElement(Wx.Consumer,null,(e=>(this.ionLifeCycleContext=e,$.createElement("div",Object.assign({className:t?`${t} ion-page`:"ion-page",ref:this.stableMergedRefs},o),n))))}static get contextType(){return Pw}}class Lw extends $.Component{constructor(e){super(e)}render(){const e=this.props,{className:t,children:n,forwardedRef:r}=e,i=Og(e,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?$.createElement(Dw,Object.assign({className:t?`${t}`:"",routeInfo:this.context.routeInfo,forwardedRef:r},i),n):$.createElement("div",Object.assign({className:t?`ion-page ${t}`:"ion-page",ref:r},i),n)}static get displayName(){return"IonPage"}static get contextType(){return qx}}const Rw=hw(Lw,"IonPage"),zw=nw("ion-nav",void 0,void 0,ry);hw((e=>{var{children:t,forwardedRef:n}=e,r=Og(e,["children","forwardedRef"]);const[i,o]=U.useState([]),a=e=>o((t=>[...t,e])),s=e=>o((t=>t.filter((t=>t!==e)))),l=U.useMemo((()=>((e,t)=>{const n=new WeakMap;return{attachViewToDom:async(t,r,i,o)=>{const a=document.createElement("div");o&&a.classList.add(...o),t.appendChild(a);const s=r(i),l=sd.createPortal(s,a);return n.set(a,l),e(l),Promise.resolve(a)},removeViewFromDom:(e,r)=>{const i=n.get(r);return i&&t(i),r.remove(),Promise.resolve()}}})(a,s)),[]);return $.createElement(zw,Object.assign({delegate:l,ref:n},r),i)}),"IonNav");const jw=$.createContext({activeTab:void 0,selectTab:()=>!1}),Nw="undefined"!=typeof HTMLElement?HTMLElement:class{};class Bw extends $.Component{constructor(e){super(e),this.outletIsReady=!1}componentDidMount(){this.ionRouterOutlet&&(this.outletIsReady||Rf(this.ionRouterOutlet,(()=>{this.outletIsReady=!0,this.context.registerIonPage(this.ionRouterOutlet,this.props.routeInfo)})),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{StackManager:t,children:n,routeInfo:r}=e,i=Og(e,["StackManager","children","routeInfo"]);return $.createElement(Wx.Consumer,null,(e=>(this.ionLifeCycleContext=e,$.createElement(t,{routeInfo:r},$.createElement(Mw,Object.assign({setRef:e=>this.ionRouterOutlet=e},i),n)))))}static get contextType(){return Pw}}class Fw extends $.Component{constructor(e){super(e)}render(){const e=this.context.getStackManager(),t=this.props,{children:n,forwardedRef:r}=t,i=Og(t,["children","forwardedRef"]);return this.context.hasIonicRouter()?i.ionPage?$.createElement(Bw,Object.assign({StackManager:e,routeInfo:this.context.routeInfo},i),n):$.createElement(e,{routeInfo:this.context.routeInfo},$.createElement(Mw,Object.assign({},i,{forwardedRef:r}),n)):$.createElement(Mw,Object.assign({ref:r},this.props),this.props.children)}static get contextType(){return qx}}const Vw=hw(Fw,"IonRouterOutlet"),Uw=(()=>class extends $.Component{constructor(e){super(e),this.handleIonTabButtonClick=this.handleIonTabButtonClick.bind(this)}handleIonTabButtonClick(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}render(){const e=Og(this.props,["onClick"]);return $.createElement(Cw,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},e))}static get displayName(){return"IonTabButton"}})();class $w extends $.PureComponent{constructor(e){super(e),this.setActiveTabOnContext=e=>{};const t={};$.Children.forEach(e.children,(n=>{var r,i,o,a;null!=n&&"object"==typeof n&&n.props&&(n.type===Uw||n.type.isTabButton)&&(t[n.props.tab]={originalHref:n.props.href,currentHref:n.props.href,originalRouteOptions:n.props.href===(null===(r=e.routeInfo)||void 0===r?void 0:r.pathname)?null===(i=e.routeInfo)||void 0===i?void 0:i.routeOptions:void 0,currentRouteOptions:n.props.href===(null===(o=e.routeInfo)||void 0===o?void 0:o.pathname)?null===(a=e.routeInfo)||void 0===a?void 0:a.routeOptions:void 0})})),this.state={tabs:t},this.onTabButtonClick=this.onTabButtonClick.bind(this),this.renderTabButton=this.renderTabButton.bind(this),this.setActiveTabOnContext=this.setActiveTabOnContext.bind(this),this.selectTab=this.selectTab.bind(this)}componentDidMount(){const e=this.state.tabs,t=Object.keys(e).find((t=>{const n=e[t].originalHref;return this.props.routeInfo.pathname.startsWith(n)}));t&&this.setState({activeTab:t})}componentDidUpdate(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}selectTab(e){const t=this.state.tabs[e];return!!t&&(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:t.currentHref,tab:e,selected:e===this.state.activeTab,routeOptions:void 0}})),!0)}static getDerivedStateFromProps(e,t){var n,r,i;const o=Object.assign({},t.tabs),a=Object.keys(t.tabs).find((n=>{const r=t.tabs[n].originalHref;return e.routeInfo.pathname.startsWith(r)}));$.Children.forEach(e.children,(e=>{if(null!=e&&"object"==typeof e&&e.props&&(e.type===Uw||e.type.isTabButton)){const t=o[e.props.tab];t&&t.originalHref===e.props.href||(o[e.props.tab]={originalHref:e.props.href,currentHref:e.props.href,originalRouteOptions:e.props.routeOptions,currentRouteOptions:e.props.routeOptions})}}));const{activeTab:s}=t;if(a&&s){const l=t.tabs[s].currentHref,c=t.tabs[s].currentRouteOptions;a===s&&l===(null===(n=e.routeInfo)||void 0===n?void 0:n.pathname)&&c===(null===(r=e.routeInfo)||void 0===r?void 0:r.routeOptions)||(o[a]={originalHref:o[a].originalHref,currentHref:e.routeInfo.pathname+(e.routeInfo.search||""),originalRouteOptions:o[a].originalRouteOptions,currentRouteOptions:null===(i=e.routeInfo)||void 0===i?void 0:i.routeOptions},"pop"===e.routeInfo.routeAction&&a!==s&&(o[s]={originalHref:o[s].originalHref,currentHref:o[s].originalHref,originalRouteOptions:o[s].originalRouteOptions,currentRouteOptions:o[s].currentRouteOptions}))}return a&&e.onSetCurrentTab(a,e.routeInfo),{activeTab:a,tabs:o}}onTabButtonClick(e,t){const n=this.state.tabs[e.detail.tab],r=n.originalHref,i=e.detail.href,{activeTab:o}=this.state;t&&t(e),o===e.detail.tab?r!==i&&this.context.resetTab(e.detail.tab,r,n.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:e.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:e.detail.tab}})),this.setActiveTabOnContext(e.detail.tab),this.context.changeTab(e.detail.tab,i,e.detail.routeOptions))}renderTabButton(e){return t=>{var n,r;if(null!=t&&t.props&&(t.type===Uw||t.type.isTabButton)){const i=t.props.tab===e?null===(n=this.props.routeInfo)||void 0===n?void 0:n.pathname:this.state.tabs[t.props.tab].currentHref,o=t.props.tab===e?null===(r=this.props.routeInfo)||void 0===r?void 0:r.routeOptions:this.state.tabs[t.props.tab].currentRouteOptions;return $.cloneElement(t,{href:i,routeOptions:o,onClick:e=>this.onTabButtonClick(e,t.props.onClick)})}return null}}render(){const{activeTab:e}=this.state;return $.createElement(Tw,Object.assign({},this.props,{selectedTab:e}),$.Children.map(this.props.children,this.renderTabButton(e)))}static get contextType(){return qx}}const Zw=$.memo((e=>{var{forwardedRef:t}=e,n=Og(e,["forwardedRef"]);const r=U.useContext(qx);return $.createElement($w,Object.assign({ref:t},n,{routeInfo:n.routeInfo||r.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:r.setCurrentTab}),n.children)})),Hw=hw(Zw,"IonTabBar");class Ww extends Nw{constructor(){super()}}"undefined"!=typeof window&&window.customElements&&(window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",Ww));const qw={display:"flex",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",flexDirection:"column",width:"100%",height:"100%",contain:"layout size style"},Gw={position:"relative",flex:1,contain:"layout size style"},Kw=(()=>class extends $.Component{constructor(e){super(e),this.routerOutletRef=$.createRef(),this.tabBarRef=$.createRef(),this.ionTabContextState={activeTab:void 0,selectTab:()=>!1}}componentDidMount(){this.tabBarRef.current&&(this.ionTabContextState.activeTab=this.tabBarRef.current.state.activeTab,this.tabBarRef.current.setActiveTabOnContext=e=>{this.ionTabContextState.activeTab=e},this.ionTabContextState.selectTab=this.tabBarRef.current.selectTab)}render(){let e,t;const n=this.props,{className:r,onIonTabsDidChange:i,onIonTabsWillChange:o}=n,a=Og(n,["className","onIonTabsDidChange","onIonTabsWillChange"]),s="function"==typeof this.props.children?this.props.children(this.ionTabContextState):this.props.children;if($.Children.forEach(s,(n=>{if(null==n||"object"!=typeof n||!n.hasOwnProperty("type"))return;n.type===Vw||n.type.isRouterOutlet?e=$.cloneElement(n):n.type===U.Fragment&&n.props.children[0].type===Vw&&(e=n.props.children[0]);let r={ref:this.tabBarRef};void 0!==i&&(r=Object.assign(Object.assign({},r),{onIonTabsDidChange:i})),void 0!==o&&(r=Object.assign(Object.assign({},r),{onIonTabsWillChange:o})),n.type===Hw||n.type.isTabBar?t=$.cloneElement(n,r):n.type!==U.Fragment||n.props.children[1].type!==Hw&&!n.props.children[1].type.isTabBar||(t=$.cloneElement(n.props.children[1],r))})),!e)throw new Error("IonTabs must contain an IonRouterOutlet");if(!t)throw new Error("IonTabs needs a IonTabBar");return $.createElement(jw.Provider,{value:this.ionTabContextState},this.context.hasIonicRouter()?$.createElement(Dw,Object.assign({className:r?`${r}`:"",routeInfo:this.context.routeInfo},a),$.createElement("ion-tabs",{className:"ion-tabs",style:qw},"top"===t.props.slot?t:null,$.createElement("div",{style:Gw,className:"tabs-inner"},e),"bottom"===t.props.slot?t:null)):$.createElement("div",Object.assign({className:r?`${r}`:"ion-tabs"},a,{style:qw}),"top"===t.props.slot?t:null,$.createElement("div",{style:Gw,className:"tabs-inner"},e),"bottom"===t.props.slot?t:null))}static get contextType(){return qx}})();class Yw extends $.PureComponent{constructor(e){super(e),this.props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.')}render(){var e,t;const n=this.props,{icon:r,ios:i,md:o,mode:a}=n,s=Og(n,["icon","ios","md","mode"]);let l;const c=fw(),u=a||(null==c?void 0:c.get("mode"));return l=i||o?"ios"===u?null!==(e=null!=i?i:o)&&void 0!==e?e:r:null!==(t=null!=o?o:i)&&void 0!==t?t:r:r,$.createElement(Ow,Object.assign({ref:this.props.forwardedRef,icon:l},s),this.props.children)}static get contextType(){return qx}}const Xw=hw(Yw,"IonIcon");class Jw extends $.PureComponent{render(){const e=this.context.getIonRoute();return this.context.hasIonicRouter()&&Jw?$.createElement(e,Object.assign({},this.props)):(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null)}static get contextType(){return qx}}class Qw extends $.PureComponent{render(){const e=this.context.getIonRedirect();return this.context.hasIonicRouter()&&Qw?$.createElement(e,Object.assign({},this.props)):(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRedirect>"),null)}static get contextType(){return qx}}const e_=$.createContext({routeInfo:void 0,push:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},back:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")}});function t_(){const e=U.useContext(e_);return U.useMemo((()=>({back:e.back,push:e.push,goBack:e.back,canGoBack:e.canGoBack,routeInfo:e.routeInfo})),[e.back,e.push,e.canGoBack,e.routeInfo])}class n_ extends $.PureComponent{constructor(e){super(e),this.nodes=new Map,this.animation=rm(e.id)}setupAnimation(e){const t=this.animation;this.nodes.size>0&&t.addElement(Array.from(this.nodes.values())),checkConfig(t,e),checkPlayback(t,e)}componentDidMount(){const e=this.props;this.setupAnimation(e)}componentDidUpdate(e){const t=this.animation,n=this.props;checkConfig(t,n,e),checkProgress(t,n,e),checkPlayback(t,n,e)}render(){const{children:e}=this.props;return $.createElement($.Fragment,null,$.Children.map(e,((e,t)=>$.cloneElement(e,{ref:e=>this.nodes.set(t,e)}))))}}const r_={main:0},i_=(e="main")=>{var t;const n=(null!==(t=r_[e])&&void 0!==t?t:0)+1;return r_[e]=n,n.toString()},o_=$.createContext({addViewItem:()=>{},canGoBack:()=>{},clearOutlet:()=>{},createViewItem:()=>{},findViewItemByPathname:()=>{},findLeavingViewItemByRouteInfo:()=>{},findViewItemByRouteInfo:()=>{},getChildrenToRender:()=>{},goBack:()=>{},unMountViewItem:()=>{}});class a_ extends $.Component{constructor(e){super(e),this.ionLifeCycleContext=new class{constructor(){this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[]}onIonViewWillEnter(e){if(e.id){const t=this.ionViewWillEnterCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewWillEnterCallbacks[t]=e:this.ionViewWillEnterCallbacks.push(e)}else this.ionViewWillEnterCallbacks.push(e)}ionViewWillEnter(){this.ionViewWillEnterCallbacks.forEach((e=>e()))}onIonViewDidEnter(e){if(e.id){const t=this.ionViewDidEnterCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewDidEnterCallbacks[t]=e:this.ionViewDidEnterCallbacks.push(e)}else this.ionViewDidEnterCallbacks.push(e)}ionViewDidEnter(){this.ionViewDidEnterCallbacks.forEach((e=>e()))}onIonViewWillLeave(e){if(e.id){const t=this.ionViewWillLeaveCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewWillLeaveCallbacks[t]=e:this.ionViewWillLeaveCallbacks.push(e)}else this.ionViewWillLeaveCallbacks.push(e)}ionViewWillLeave(){this.ionViewWillLeaveCallbacks.forEach((e=>e()))}onIonViewDidLeave(e){if(e.id){const t=this.ionViewDidLeaveCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewDidLeaveCallbacks[t]=e:this.ionViewDidLeaveCallbacks.push(e)}else this.ionViewDidLeaveCallbacks.push(e)}ionViewDidLeave(){this.ionViewDidLeaveCallbacks.forEach((e=>e())),this.componentCanBeDestroyed()}onComponentCanBeDestroyed(e){this.componentCanBeDestroyedCallback=e}componentCanBeDestroyed(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}},this._isMounted=!1,this.ionLifeCycleContext.onComponentCanBeDestroyed((()=>{this.props.mount||this._isMounted&&this.setState({show:!1},(()=>this.props.removeView()))})),this.state={show:!0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{show:e}=this.state;return $.createElement(Wx.Provider,{value:this.ionLifeCycleContext},e&&this.props.children)}}class s_{constructor(){this.locationHistory=[],this.tabHistory={}}add(e){"push"===e.routeAction||null==e.routeAction?this._add(e):"pop"===e.routeAction?this._pop(e):"replace"===e.routeAction&&this._replace(e),"root"===e.routeDirection&&(this._clear(),this._add(e))}clearTabStack(e){const t=this._getRouteInfosByKey(e);t&&(t.forEach((e=>{this.locationHistory=this.locationHistory.filter((t=>t.id!==e.id))})),this.tabHistory[e]=[])}update(e){const t=this.locationHistory.findIndex((t=>t.id===e.id));t>-1&&this.locationHistory.splice(t,1,e);const n=this.tabHistory[e.tab||""];if(n){const t=n.findIndex((t=>t.id===e.id));t>-1?n.splice(t,1,e):n.push(e)}else e.tab&&(this.tabHistory[e.tab]=[e])}_add(e){const t=this._getRouteInfosByKey(e.tab);t&&(this._areRoutesEqual(t[t.length-1],e)&&t.pop(),t.push(e)),this.locationHistory.push(e)}_areRoutesEqual(e,t){return!(!e||!t)&&e.pathname===t.pathname&&e.search===t.search}_pop(e){const t=this._getRouteInfosByKey(e.tab);t&&(t.pop(),t.pop(),t.push(e)),this.locationHistory.pop(),this.locationHistory.pop(),this.locationHistory.push(e)}_replace(e){const t=this._getRouteInfosByKey(e.tab);t&&t.pop(),this.locationHistory.pop(),this._add(e)}_clear(){Object.keys(this.tabHistory).forEach((e=>this.tabHistory[e]=[])),this.locationHistory=[]}_getRouteInfosByKey(e){let t;return e&&(t=this.tabHistory[e],t||(t=this.tabHistory[e]=[])),t}getFirstRouteInfoForTab(e){const t=this._getRouteInfosByKey(e);if(t)return t[0]}getCurrentRouteInfoForTab(e){const t=this._getRouteInfosByKey(e);if(t)return t[t.length-1]}findLastLocation(e){const t=this._getRouteInfosByKey(e.tab);if(t)for(let n=t.length-2;n>=0;n--){const r=t[n];if(r&&r.pathname===e.pushedByRoute)return r}for(let n=this.locationHistory.length-2;n>=0;n--){const t=this.locationHistory[n];if(t&&t.pathname===e.pushedByRoute)return t}}previous(){return this.locationHistory[this.locationHistory.length-2]||this.locationHistory[this.locationHistory.length-1]}current(){return this.locationHistory[this.locationHistory.length-1]}canGoBack(){return this.locationHistory.length>1}}class l_ extends $.PureComponent{constructor(e){super(e),this.ionRouterContextValue={push:(e,t,n,r,i)=>{this.navigate(e,t,n,i,r)},back:e=>{this.goBack(void 0,e)},canGoBack:()=>this.props.locationHistory.canGoBack(),nativeBack:()=>this.props.onNativeBack(),routeInfo:this.props.routeInfo},this.state={goBack:this.goBack.bind(this),hasIonicRouter:()=>!0,navigate:this.navigate.bind(this),getIonRedirect:this.getIonRedirect.bind(this),getIonRoute:this.getIonRoute.bind(this),getStackManager:this.getStackManager.bind(this),getPageManager:this.getPageManager.bind(this),routeInfo:this.props.routeInfo,setCurrentTab:this.props.onSetCurrentTab,changeTab:this.props.onChangeTab,resetTab:this.props.onResetTab}}componentDidMount(){"undefined"!=typeof document&&(this.handleHardwareBackButton=this.handleHardwareBackButton.bind(this),document.addEventListener("ionBackButton",this.handleHardwareBackButton))}componentWillUnmount(){"undefined"!=typeof document&&document.removeEventListener("ionBackButton",this.handleHardwareBackButton)}handleHardwareBackButton(e){e.detail.register(0,(e=>{this.nativeGoBack(),e()}))}goBack(e,t){this.props.onNavigateBack(e,t)}nativeGoBack(){this.props.onNativeBack()}navigate(e,t="forward",n="push",r,i,o){this.props.onNavigate(e,n,t,r,i,o)}getPageManager(){return Dw}getIonRedirect(){return this.props.ionRedirect}getIonRoute(){return this.props.ionRoute}getStackManager(){return this.props.stackManager}render(){return $.createElement(qx.Provider,{value:Object.assign(Object.assign({},this.state),{routeInfo:this.props.routeInfo})},$.createElement(e_.Provider,{value:Object.assign(Object.assign({},this.ionRouterContextValue),{routeInfo:this.props.routeInfo})},this.props.children))}}class c_{constructor(){this.viewStacks={},this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.getViewItemsForOutlet=this.getViewItemsForOutlet.bind(this),this.remove=this.remove.bind(this)}add(e){const{outletId:t}=e;this.viewStacks[t]?this.viewStacks[t].push(e):this.viewStacks[t]=[e]}clear(e){return setTimeout((()=>{delete this.viewStacks[e]}),500)}getViewItemsForOutlet(e){return this.viewStacks[e]||[]}remove(e){const{outletId:t}=e,n=this.viewStacks[t];if(n){const r=n.find((t=>t.id===e.id));r&&(r.mount=!1,this.viewStacks[t]=n.filter((e=>e.id!==r.id)))}}getStackIds(){return Object.keys(this.viewStacks)}getAllViewItems(){const e=this.getStackIds(),t=[];return e.forEach((e=>{t.push(...this.viewStacks[e])})),t}}class u_ extends $.PureComponent{render(){return $.createElement(Jh,Object.assign({path:this.props.path,exact:this.props.exact,render:this.props.render},void 0!==this.props.computedMatch?{computedMatch:this.props.computedMatch}:{}))}}class d_ extends c_{constructor(){super(),this.createViewItem=this.createViewItem.bind(this),this.findViewItemByRouteInfo=this.findViewItemByRouteInfo.bind(this),this.findLeavingViewItemByRouteInfo=this.findLeavingViewItemByRouteInfo.bind(this),this.getChildrenToRender=this.getChildrenToRender.bind(this),this.findViewItemByPathname=this.findViewItemByPathname.bind(this)}createViewItem(e,t,n,r){const i={id:i_("viewItem"),outletId:e,ionPageElement:r,reactElement:t,mount:!0,ionRoute:!1},o={exact:t.props.exact,path:t.props.path||t.props.from,component:t.props.component},a=Xh(n.pathname,o);return t.type===Jw&&(i.ionRoute=!0,i.disableIonPageManagement=t.props.disableIonPageManagement),i.routeData={match:a,childProps:t.props},i}getChildrenToRender(e,t,n){const r=this.getViewItemsForOutlet(e);return $.Children.forEach(t.props.children,(e=>{const t=r.find((t=>h_(e,t.routeData.childProps.path||t.routeData.childProps.from)));t&&(t.reactElement=e)})),r.map((e=>{let t;if(e.ionRoute&&!e.disableIonPageManagement)t=$.createElement(a_,{key:`view-${e.id}`,mount:e.mount,removeView:()=>this.remove(e)},$.cloneElement(e.reactElement,{computedMatch:e.routeData.match}));else{const r=h_(e.reactElement,n.pathname);t=$.createElement(a_,{key:`view-${e.id}`,mount:e.mount,removeView:()=>this.remove(e)},$.cloneElement(e.reactElement,{computedMatch:e.routeData.match})),!r&&e.routeData.match&&(e.routeData.match=void 0,e.mount=!1)}return t}))}findViewItemByRouteInfo(e,t,n){const{viewItem:r,match:i}=this.findViewItemByPath(e.pathname,t);return(void 0===n||!0===n)&&r&&i&&(r.routeData.match=i),r}findLeavingViewItemByRouteInfo(e,t,n=!0){const{viewItem:r}=this.findViewItemByPath(e.lastPathname,t,!1,n);return r}findViewItemByPathname(e,t){const{viewItem:n}=this.findViewItemByPath(e,t);return n}findViewItemByPath(e,t,n,r){let i,o,a;if(t)a=this.getViewItemsForOutlet(t),a.some(s),i||a.some(l);else{const e=this.getAllViewItems();e.some(s),i||e.some(l)}return{viewItem:i,match:o};function s(t){if(r&&!t.ionRoute)return!1;const a={exact:!!n||t.routeData.childProps.exact,path:t.routeData.childProps.path||t.routeData.childProps.from,component:t.routeData.childProps.component},s=Xh(e,a);return!!s&&(i=t,o=s,!0)}function l(t){return!t.routeData.childProps.path&&!t.routeData.childProps.from&&(o={path:e,url:e,isExact:!0,params:{}},i=t,!0)}}}function h_(e,t,n){return Xh(t,{exact:!!n||e.props.exact,path:e.props.path||e.props.from,component:e.props.component})}const p_=e=>!e.classList.contains("ion-page-invisible")&&!e.classList.contains("ion-page-hidden");class f_ extends $.PureComponent{constructor(e){super(e),this.stackContextValue={registerIonPage:this.registerIonPage.bind(this),isInOutlet:()=>!0},this.pendingPageTransition=!1,this.registerIonPage=this.registerIonPage.bind(this),this.transitionPage=this.transitionPage.bind(this),this.handlePageTransition=this.handlePageTransition.bind(this),this.id=i_("routerOutlet"),this.prevProps=void 0,this.skipTransition=!1}componentDidMount(){this.clearOutletTimeout&&clearTimeout(this.clearOutletTimeout),this.routerOutletElement&&(this.setupRouterOutlet(this.routerOutletElement),this.handlePageTransition(this.props.routeInfo))}componentDidUpdate(e){const{pathname:t}=this.props.routeInfo,{pathname:n}=e.routeInfo;t!==n?(this.prevProps=e,this.handlePageTransition(this.props.routeInfo)):this.pendingPageTransition&&(this.handlePageTransition(this.props.routeInfo),this.pendingPageTransition=!1)}componentWillUnmount(){this.clearOutletTimeout=this.context.clearOutlet(this.id)}async handlePageTransition(e){var t,n;if(this.routerOutletElement&&this.routerOutletElement.commit){let r=this.context.findViewItemByRouteInfo(e,this.id),i=this.context.findLeavingViewItemByRouteInfo(e,this.id);!i&&e.prevRouteLastPathname&&(i=this.context.findViewItemByPathname(e.prevRouteLastPathname,this.id)),i&&("replace"===e.routeAction?i.mount=!1:"push"!==e.routeAction||"forward"!==e.routeDirection?"none"!==e.routeDirection&&r!==i&&(i.mount=!1):(null===(t=e.routeOptions)||void 0===t?void 0:t.unmount)&&(i.mount=!1));const o=function(e,t){let n;return $.Children.forEach(e,(e=>{const r={exact:e.props.exact,path:e.props.path||e.props.from,component:e.props.component};Xh(t.pathname,r)&&(n=e)})),n||($.Children.forEach(e,(e=>{e.props.path||e.props.from||(n=e)})),n)}(null===(n=this.ionRouterOutlet)||void 0===n?void 0:n.props.children,e);if(r?r.reactElement=o:o&&(r=this.context.createViewItem(this.id,o,e),this.context.addViewItem(r)),r&&r.ionPageElement){if(r===i&&r.routeData.match.url!==e.pathname)return;if(!i&&this.props.routeInfo.prevRouteLastPathname&&(i=this.context.findViewItemByPathname(this.props.routeInfo.prevRouteLastPathname,this.id)),p_(r.ionPageElement)&&void 0!==i&&!p_(i.ionPageElement))return;this.transitionPage(e,r,i)}else!i||o||r||i.ionPageElement&&(i.ionPageElement.classList.add("ion-page-hidden"),i.ionPageElement.setAttribute("aria-hidden","true"));this.forceUpdate()}else this.pendingPageTransition=!0}registerIonPage(e,t){const n=this.context.findViewItemByRouteInfo(t,this.id);if(n){const t=n.ionPageElement;if(n.ionPageElement=e,n.ionRoute=!0,t===e)return}this.handlePageTransition(t)}async setupRouterOutlet(e){e.swipeHandler={canStart:()=>{const t=fw();if(!t||!t.get("swipeBackEnabled","ios"===e.mode))return!1;const{routeInfo:n}=this.props,r=this.prevProps&&this.prevProps.routeInfo.pathname===n.pushedByRoute?this.prevProps.routeInfo:{pathname:n.pushedByRoute||""},i=this.context.findViewItemByRouteInfo(r,this.id,!1);return!!i&&i.mount&&i.routeData.match.path!==n.pathname},onStart:async()=>{const{routeInfo:e}=this.props,t=this.prevProps&&this.prevProps.routeInfo.pathname===e.pushedByRoute?this.prevProps.routeInfo:{pathname:e.pushedByRoute||""},n=this.context.findViewItemByRouteInfo(t,this.id,!1),r=this.context.findViewItemByRouteInfo(e,this.id,!1);return n&&r&&await this.transitionPage(e,n,r,"back",!0),Promise.resolve()},onEnd:e=>{if(e)this.skipTransition=!0,this.context.goBack();else{const{routeInfo:e}=this.props,t=this.prevProps&&this.prevProps.routeInfo.pathname===e.pushedByRoute?this.prevProps.routeInfo:{pathname:e.pushedByRoute||""},n=this.context.findViewItemByRouteInfo(t,this.id,!1);if(n!==this.context.findViewItemByRouteInfo(e,this.id,!1)&&void 0!==(null==n?void 0:n.ionPageElement)){const{ionPageElement:e}=n;e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")}}}}}async transitionPage(e,t,n,r,i=!1){const o=async(t,n)=>{const r=this.skipTransition;r?this.skipTransition=!1:(t.classList.add("ion-page"),t.classList.add("ion-page-invisible")),await a.commit(t,n,{duration:r||void 0===l?0:void 0,direction:l,showGoBack:!!e.pushedByRoute,progressAnimation:i,animationBuilder:e.routeAnimation})},a=this.routerOutletElement,s="none"===e.routeDirection||"root"===e.routeDirection?void 0:e.routeDirection,l=null!=r?r:s;if(t&&t.ionPageElement&&this.routerOutletElement)if(n&&n.ionPageElement&&t===n)if(function(e,t,n){const r={exact:!!n||e.props.exact,path:e.props.path||e.props.from,component:e.props.component},i=Xh(t,r);return i}(n.reactElement,e.pathname,!0)){const e=function(e){let t;if(t="string"==typeof e?e:e.outerHTML,document){const e=document.createElement("div");e.innerHTML=t,e.style.zIndex="";const n=e.getElementsByTagName("ion-back-button");return n[0]&&n[0].remove(),e.firstChild}}(n.ionPageElement.outerHTML);e&&(this.routerOutletElement.appendChild(e),await o(t.ionPageElement,e),this.routerOutletElement.removeChild(e))}else await o(t.ionPageElement,void 0);else await o(t.ionPageElement,null==n?void 0:n.ionPageElement),n&&n.ionPageElement&&!i&&(n.ionPageElement.classList.add("ion-page-hidden"),n.ionPageElement.setAttribute("aria-hidden","true"))}render(){const{children:e}=this.props,t=$.Children.only(e);this.ionRouterOutlet=t;const n=this.context.getChildrenToRender(this.id,this.ionRouterOutlet,this.props.routeInfo,(()=>{this.forceUpdate()}));return $.createElement(Pw.Provider,{value:this.stackContextValue},$.cloneElement(t,{ref:e=>{t.props.setRef&&t.props.setRef(e),t.props.forwardedRef&&(t.props.forwardedRef.current=e),this.routerOutletElement=e;const{ref:n}=t;"function"==typeof n&&n(e)}},n))}static get contextType(){return o_}}class m_ extends $.PureComponent{constructor(e){super(e),this.exitViewFromOtherOutletHandlers=[],this.locationHistory=new s_,this.viewStack=new d_,this.routeMangerContextState={canGoBack:()=>this.locationHistory.canGoBack(),clearOutlet:this.viewStack.clear,findViewItemByPathname:this.viewStack.findViewItemByPathname,getChildrenToRender:this.viewStack.getChildrenToRender,goBack:()=>this.handleNavigateBack(),createViewItem:this.viewStack.createViewItem,findViewItemByRouteInfo:this.viewStack.findViewItemByRouteInfo,findLeavingViewItemByRouteInfo:this.viewStack.findLeavingViewItemByRouteInfo,addViewItem:this.viewStack.add,unMountViewItem:this.viewStack.remove};const t={id:i_("routeInfo"),pathname:this.props.location.pathname,search:this.props.location.search};this.locationHistory.add(t),this.handleChangeTab=this.handleChangeTab.bind(this),this.handleResetTab=this.handleResetTab.bind(this),this.handleNativeBack=this.handleNativeBack.bind(this),this.handleNavigate=this.handleNavigate.bind(this),this.handleNavigateBack=this.handleNavigateBack.bind(this),this.props.registerHistoryListener(this.handleHistoryChange.bind(this)),this.handleSetCurrentTab=this.handleSetCurrentTab.bind(this),this.state={routeInfo:t}}handleChangeTab(e,t,n){if(!t)return;const r=this.locationHistory.getCurrentRouteInfoForTab(e),[i,o]=t.split("?");r?(this.incomingRouteParams=Object.assign(Object.assign({},r),{routeAction:"push",routeDirection:"none"}),r.pathname===i?(this.incomingRouteParams.routeOptions=n,this.props.history.push(r.pathname+(r.search||""))):(this.incomingRouteParams.pathname=i,this.incomingRouteParams.search=o?"?"+o:void 0,this.incomingRouteParams.routeOptions=n,this.props.history.push(i+(o?"?"+o:"")))):this.handleNavigate(i,"push","none",void 0,n,e)}handleHistoryChange(e,t){var n,r,i;let o;if(o=this.incomingRouteParams&&"replace"===this.incomingRouteParams.routeAction?this.locationHistory.previous():this.locationHistory.current(),o.pathname+o.search!==e.pathname){if(!this.incomingRouteParams){if("REPLACE"===t&&(this.incomingRouteParams={routeAction:"replace",routeDirection:"none",tab:this.currentTab}),"POP"===t){const e=this.locationHistory.current();if(e&&e.pushedByRoute){const t=this.locationHistory.findLastLocation(e);this.incomingRouteParams=Object.assign(Object.assign({},t),{routeAction:"pop",routeDirection:"back"})}else this.incomingRouteParams={routeAction:"pop",routeDirection:"none",tab:this.currentTab}}this.incomingRouteParams||(this.incomingRouteParams={routeAction:"push",routeDirection:(null===(n=e.state)||void 0===n?void 0:n.direction)||"forward",routeOptions:null===(r=e.state)||void 0===r?void 0:r.routerOptions,tab:this.currentTab})}let a;if(null===(i=this.incomingRouteParams)||void 0===i?void 0:i.id)a=Object.assign(Object.assign({},this.incomingRouteParams),{lastPathname:o.pathname}),this.locationHistory.add(a);else{const t="push"===this.incomingRouteParams.routeAction&&"forward"===this.incomingRouteParams.routeDirection;if(a=Object.assign(Object.assign({id:i_("routeInfo")},this.incomingRouteParams),{lastPathname:o.pathname,pathname:e.pathname,search:e.search,params:this.props.match.params,prevRouteLastPathname:o.lastPathname}),t)a.tab=o.tab,a.pushedByRoute=o.pathname;else if("pop"===a.routeAction){const e=this.locationHistory.findLastLocation(a);a.pushedByRoute=null==e?void 0:e.pushedByRoute}else if("push"===a.routeAction&&a.tab!==o.tab){const e=this.locationHistory.getCurrentRouteInfoForTab(a.tab);a.pushedByRoute=null==e?void 0:e.pushedByRoute}else if("replace"===a.routeAction){const e=this.locationHistory.current(),t=null==e?void 0:e.pushedByRoute,n=void 0!==t&&t!==a.pathname?t:a.pushedByRoute;a.lastPathname=(null==e?void 0:e.pathname)||a.lastPathname,a.prevRouteLastPathname=null==e?void 0:e.lastPathname,a.pushedByRoute=n,a.routeDirection=(null==e?void 0:e.routeDirection)||a.routeDirection,a.routeAnimation=(null==e?void 0:e.routeAnimation)||a.routeAnimation}this.locationHistory.add(a)}this.setState({routeInfo:a})}this.incomingRouteParams=void 0}handleNativeBack(){const e=this.props.history;(e.goBack||e.back)()}handleNavigate(e,t,n,r,i,o){this.incomingRouteParams=Object.assign(this.incomingRouteParams||{},{routeAction:t,routeDirection:n,routeOptions:i,routeAnimation:r,tab:o}),"push"===t?this.props.history.push(e):this.props.history.replace(e)}handleNavigateBack(e="/",t){const n=fw();e=e||n&&n.get("backButtonDefaultHref");const r=this.locationHistory.current();if(r&&r.pushedByRoute){const n=this.locationHistory.findLastLocation(r);if(n)if(this.incomingRouteParams=Object.assign(Object.assign({},n),{routeAction:"pop",routeDirection:"back",routeAnimation:t||r.routeAnimation}),r.lastPathname===r.pushedByRoute||n.pathname===r.pushedByRoute&&""===r.tab&&""===n.tab){const e=this.props.history;(e.goBack||e.back)()}else this.handleNavigate(n.pathname+(n.search||""),"pop","back");else this.handleNavigate(e,"pop","back")}else this.handleNavigate(e,"pop","back")}handleResetTab(e,t,n){const r=this.locationHistory.getFirstRouteInfoForTab(e);if(r){const e=Object.assign({},r);e.pathname=t,e.routeOptions=n,this.incomingRouteParams=Object.assign(Object.assign({},e),{routeAction:"pop",routeDirection:"back"}),this.props.history.push(e.pathname+(e.search||""))}}handleSetCurrentTab(e){this.currentTab=e;const t=Object.assign({},this.locationHistory.current());t.tab!==e&&(t.tab=e,this.locationHistory.update(t))}render(){return $.createElement(o_.Provider,{value:this.routeMangerContextState},$.createElement(l_,{ionRoute:u_,ionRedirect:{},stackManager:f_,routeInfo:this.state.routeInfo,onNativeBack:this.handleNativeBack,onNavigateBack:this.handleNavigateBack,onNavigate:this.handleNavigate,onSetCurrentTab:this.handleSetCurrentTab,onChangeTab:this.handleChangeTab,onResetTab:this.handleResetTab,locationHistory:this.locationHistory},this.props.children))}}const g_=function(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=xh(t,["wrappedComponentRef"]);return $.createElement(Fh.Consumer,null,(function(t){return t||Ed(!1),$.createElement(e,vd({},r,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,Lh(n,e)}(m_);g_.displayName="IonRouter";class v_ extends $.Component{constructor(e){super(e);const{history:t}=e,n=Og(e,["history"]);this.history=t||jd(n),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,t){const n=e.location||e,r=e.action||t;this.historyListenHandler&&this.historyListenHandler(n,r)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:t}=e,n=Og(e,["children"]);return $.createElement(Vh,Object.assign({history:this.history},n),$.createElement(g_,{registerHistoryListener:this.registerHistoryListener},t))}}class y_ extends $.Component{constructor(e){super(e),this.history=e.history,this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,t){const n=e.location||e,r=e.action||t;this.historyListenHandler&&this.historyListenHandler(n,r)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:t}=e,n=Og(e,["children"]);return $.createElement(Vh,Object.assign({},n),$.createElement(g_,{registerHistoryListener:this.registerHistoryListener},t))}}class b_ extends $.Component{constructor(e){super(e);const{history:t}=e;Og(e,["history"]);this.history=t||createHashHistory(),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,t){const n=e.location||e,r=e.action||t;this.historyListenHandler&&this.historyListenHandler(n,r)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:t}=e,n=Og(e,["children"]);return $.createElement(Vh,Object.assign({history:this.history},n),$.createElement(g_,{registerHistoryListener:this.registerHistoryListener},t))}}const x_="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>",w_="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M476.59 227.05l-.16-.07L49.35 49.84A23.56 23.56 0 0027.14 52 24.65 24.65 0 0016 72.59v113.29a24 24 0 0019.52 23.57l232.93 43.07a4 4 0 010 7.86L35.53 303.45A24 24 0 0016 327v113.31A23.57 23.57 0 0026.59 460a23.94 23.94 0 0013.22 4 24.55 24.55 0 009.52-1.93L476.4 285.94l.19-.09a32 32 0 000-58.8z'/></svg>",__=()=>J(Rw,{children:J(ow,{fullscreen:!0})});var k_="Invariant Violation",E_=Object.setPrototypeOf,S_=void 0===E_?function(e,t){return e.__proto__=t,e}:E_,C_=function(e){function t(n){void 0===n&&(n=k_);var r=e.call(this,"number"==typeof n?k_+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return r.framesToPop=1,r.name=k_,S_(r,t.prototype),r}return Mg(t,e),t}(Error);function T_(e,t){if(!e)throw new C_(t)}var M_=["debug","log","warn","error","silent"],I_=M_.indexOf("log");function O_(e){return function(){if(M_.indexOf(e)>=I_)return(console[e]||console.log).apply(console,arguments)}}function A_(e){try{return e()}catch(TC){}}!function(e){e.debug=O_("debug"),e.log=O_("log"),e.warn=O_("warn"),e.error=O_("error")}(T_||(T_={}));const P_=A_((function(){return globalThis}))||A_((function(){return window}))||A_((function(){return self}))||A_((function(){return global}))||A_((function(){return A_.constructor("return this")()}));var D_="__",L_=[D_,D_].join("DEV");const R_=function(){try{return Boolean(__DEV__)}catch(TC){return Object.defineProperty(P_,L_,{value:"production"!==A_((function(){return"production"})),enumerable:!1,configurable:!0,writable:!0}),P_[L_]}}();function z_(e){try{return e()}catch(xI){}}var j_=z_((function(){return globalThis}))||z_((function(){return window}))||z_((function(){return self}))||z_((function(){return global}))||z_((function(){return z_.constructor("return this")()})),N_=!1;function B_(){N_&&(delete j_.process,N_=!1)}function F_(e,t){if(!Boolean(e))throw new Error(t)}function V_(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}!j_||z_((function(){return"production"}))||z_((function(){return process}))||(Object.defineProperty(j_,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),N_=!0);const U_=/\r\n|[\n\r]/g;function $_(e,t){let n=0,r=1;for(const i of e.body.matchAll(U_)){if("number"==typeof i.index||V_(!1),i.index>=t)break;n=i.index+i[0].length,r+=1}return{line:r,column:t+1-n}}function Z_(e){return H_(e.source,$_(e.source,e.start))}function H_(e,t){const n=e.locationOffset.column-1,r="".padStart(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,a=t.line+o,s=1===t.line?n:0,l=t.column+s,c=`${e.name}:${a}:${l}\n`,u=r.split(/\r\n|[\n\r]/g),d=u[i];if(d.length>120){const e=Math.floor(l/80),t=l%80,n=[];for(let r=0;r<d.length;r+=80)n.push(d.slice(r,r+80));return c+W_([[`${a} |`,n[0]],...n.slice(1,e+1).map((e=>["|",e])),["|","^".padStart(t)],["|",n[e+1]]])}return c+W_([[a-1+" |",u[i-1]],[`${a} |`,d],["|","^".padStart(l)],[`${a+1} |`,u[i+1]]])}function W_(e){const t=e.filter((([e,t])=>void 0!==t)),n=Math.max(...t.map((([e])=>e.length)));return t.map((([e,t])=>e.padStart(n)+(t?" "+t:""))).join("\n")}class q_ extends Error{constructor(e,...t){var n,r,i;const{nodes:o,source:a,positions:s,path:l,originalError:c,extensions:u}=function(e){const t=e[0];return null==t||"kind"in t||"length"in t?{nodes:t,source:e[1],positions:e[2],path:e[3],originalError:e[4],extensions:e[5]}:t}(t);super(e),this.name="GraphQLError",this.path=null!=l?l:void 0,this.originalError=null!=c?c:void 0,this.nodes=G_(Array.isArray(o)?o:o?[o]:void 0);const d=G_(null===(n=this.nodes)||void 0===n?void 0:n.map((e=>e.loc)).filter((e=>null!=e)));this.source=null!=a?a:null==d||null===(r=d[0])||void 0===r?void 0:r.source,this.positions=null!=s?s:null==d?void 0:d.map((e=>e.start)),this.locations=s&&a?s.map((e=>$_(a,e))):null==d?void 0:d.map((e=>$_(e.source,e.start)));const h="object"==typeof(p=null==c?void 0:c.extensions)&&null!==p?null==c?void 0:c.extensions:void 0;var p;this.extensions=null!==(i=null!=u?u:h)&&void 0!==i?i:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=c&&c.stack?Object.defineProperty(this,"stack",{value:c.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,q_):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+="\n\n"+Z_(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+="\n\n"+H_(this.source,t);return e}toJSON(){const e={message:this.message};return null!=this.locations&&(e.locations=this.locations),null!=this.path&&(e.path=this.path),null!=this.extensions&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function G_(e){return void 0===e||0===e.length?void 0:e}function K_(e,t,n){return new q_(`Syntax Error: ${n}`,{source:e,positions:[t]})}class Y_{constructor(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class X_{constructor(e,t,n,r,i,o){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const J_={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Q_=new Set(Object.keys(J_));function ek(e){const t=null==e?void 0:e.kind;return"string"==typeof t&&Q_.has(t)}var tk,nk,rk,ik;function ok(e){return 9===e||32===e}function ak(e){return e>=48&&e<=57}function sk(e){return e>=97&&e<=122||e>=65&&e<=90}function lk(e){return sk(e)||95===e}function ck(e){return sk(e)||ak(e)||95===e}function uk(e){var t;let n=Number.MAX_SAFE_INTEGER,r=null,i=-1;for(let a=0;a<e.length;++a){var o;const t=e[a],s=dk(t);s!==t.length&&(r=null!==(o=r)&&void 0!==o?o:a,i=a,0!==a&&s<n&&(n=s))}return e.map(((e,t)=>0===t?e:e.slice(n))).slice(null!==(t=r)&&void 0!==t?t:0,i+1)}function dk(e){let t=0;for(;t<e.length&&ok(e.charCodeAt(t));)++t;return t}!function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"}(tk||(tk={})),function(e){e.QUERY="QUERY",e.MUTATION="MUTATION",e.SUBSCRIPTION="SUBSCRIPTION",e.FIELD="FIELD",e.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",e.FRAGMENT_SPREAD="FRAGMENT_SPREAD",e.INLINE_FRAGMENT="INLINE_FRAGMENT",e.VARIABLE_DEFINITION="VARIABLE_DEFINITION",e.SCHEMA="SCHEMA",e.SCALAR="SCALAR",e.OBJECT="OBJECT",e.FIELD_DEFINITION="FIELD_DEFINITION",e.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",e.INTERFACE="INTERFACE",e.UNION="UNION",e.ENUM="ENUM",e.ENUM_VALUE="ENUM_VALUE",e.INPUT_OBJECT="INPUT_OBJECT",e.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"}(nk||(nk={})),function(e){e.NAME="Name",e.DOCUMENT="Document",e.OPERATION_DEFINITION="OperationDefinition",e.VARIABLE_DEFINITION="VariableDefinition",e.SELECTION_SET="SelectionSet",e.FIELD="Field",e.ARGUMENT="Argument",e.FRAGMENT_SPREAD="FragmentSpread",e.INLINE_FRAGMENT="InlineFragment",e.FRAGMENT_DEFINITION="FragmentDefinition",e.VARIABLE="Variable",e.INT="IntValue",e.FLOAT="FloatValue",e.STRING="StringValue",e.BOOLEAN="BooleanValue",e.NULL="NullValue",e.ENUM="EnumValue",e.LIST="ListValue",e.OBJECT="ObjectValue",e.OBJECT_FIELD="ObjectField",e.DIRECTIVE="Directive",e.NAMED_TYPE="NamedType",e.LIST_TYPE="ListType",e.NON_NULL_TYPE="NonNullType",e.SCHEMA_DEFINITION="SchemaDefinition",e.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",e.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",e.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",e.FIELD_DEFINITION="FieldDefinition",e.INPUT_VALUE_DEFINITION="InputValueDefinition",e.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",e.UNION_TYPE_DEFINITION="UnionTypeDefinition",e.ENUM_TYPE_DEFINITION="EnumTypeDefinition",e.ENUM_VALUE_DEFINITION="EnumValueDefinition",e.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",e.DIRECTIVE_DEFINITION="DirectiveDefinition",e.SCHEMA_EXTENSION="SchemaExtension",e.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",e.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",e.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",e.UNION_TYPE_EXTENSION="UnionTypeExtension",e.ENUM_TYPE_EXTENSION="EnumTypeExtension",e.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"}(rk||(rk={})),function(e){e.SOF="<SOF>",e.EOF="<EOF>",e.BANG="!",e.DOLLAR="$",e.AMP="&",e.PAREN_L="(",e.PAREN_R=")",e.SPREAD="...",e.COLON=":",e.EQUALS="=",e.AT="@",e.BRACKET_L="[",e.BRACKET_R="]",e.BRACE_L="{",e.PIPE="|",e.BRACE_R="}",e.NAME="Name",e.INT="Int",e.FLOAT="Float",e.STRING="String",e.BLOCK_STRING="BlockString",e.COMMENT="Comment"}(ik||(ik={}));class hk{constructor(e){const t=new X_(ik.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==ik.EOF)do{if(e.next)e=e.next;else{const t=bk(this,e.end);e.next=t,t.prev=e,e=t}}while(e.kind===ik.COMMENT);return e}}function pk(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function fk(e,t){return mk(e.charCodeAt(t))&&gk(e.charCodeAt(t+1))}function mk(e){return e>=55296&&e<=56319}function gk(e){return e>=56320&&e<=57343}function vk(e,t){const n=e.source.body.codePointAt(t);if(void 0===n)return ik.EOF;if(n>=32&&n<=126){const e=String.fromCodePoint(n);return'"'===e?"'\"'":`"${e}"`}return"U+"+n.toString(16).toUpperCase().padStart(4,"0")}function yk(e,t,n,r,i){const o=e.line,a=1+n-e.lineStart;return new X_(t,n,r,o,a,i)}function bk(e,t){const n=e.source.body,r=n.length;let i=t;for(;i<r;){const t=n.charCodeAt(i);switch(t){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++e.line,e.lineStart=i;continue;case 13:10===n.charCodeAt(i+1)?i+=2:++i,++e.line,e.lineStart=i;continue;case 35:return xk(e,i);case 33:return yk(e,ik.BANG,i,i+1);case 36:return yk(e,ik.DOLLAR,i,i+1);case 38:return yk(e,ik.AMP,i,i+1);case 40:return yk(e,ik.PAREN_L,i,i+1);case 41:return yk(e,ik.PAREN_R,i,i+1);case 46:if(46===n.charCodeAt(i+1)&&46===n.charCodeAt(i+2))return yk(e,ik.SPREAD,i,i+3);break;case 58:return yk(e,ik.COLON,i,i+1);case 61:return yk(e,ik.EQUALS,i,i+1);case 64:return yk(e,ik.AT,i,i+1);case 91:return yk(e,ik.BRACKET_L,i,i+1);case 93:return yk(e,ik.BRACKET_R,i,i+1);case 123:return yk(e,ik.BRACE_L,i,i+1);case 124:return yk(e,ik.PIPE,i,i+1);case 125:return yk(e,ik.BRACE_R,i,i+1);case 34:return 34===n.charCodeAt(i+1)&&34===n.charCodeAt(i+2)?Ik(e,i):kk(e,i)}if(ak(t)||45===t)return wk(e,i,t);if(lk(t))return Ok(e,i);throw K_(e.source,i,39===t?"Unexpected single quote character ('), did you mean to use a double quote (\")?":pk(t)||fk(n,i)?`Unexpected character: ${vk(e,i)}.`:`Invalid character: ${vk(e,i)}.`)}return yk(e,ik.EOF,r,r)}function xk(e,t){const n=e.source.body,r=n.length;let i=t+1;for(;i<r;){const e=n.charCodeAt(i);if(10===e||13===e)break;if(pk(e))++i;else{if(!fk(n,i))break;i+=2}}return yk(e,ik.COMMENT,t,i,n.slice(t+1,i))}function wk(e,t,n){const r=e.source.body;let i=t,o=n,a=!1;if(45===o&&(o=r.charCodeAt(++i)),48===o){if(o=r.charCodeAt(++i),ak(o))throw K_(e.source,i,`Invalid number, unexpected digit after 0: ${vk(e,i)}.`)}else i=_k(e,i,o),o=r.charCodeAt(i);if(46===o&&(a=!0,o=r.charCodeAt(++i),i=_k(e,i,o),o=r.charCodeAt(i)),69!==o&&101!==o||(a=!0,o=r.charCodeAt(++i),43!==o&&45!==o||(o=r.charCodeAt(++i)),i=_k(e,i,o),o=r.charCodeAt(i)),46===o||lk(o))throw K_(e.source,i,`Invalid number, expected digit but got: ${vk(e,i)}.`);return yk(e,a?ik.FLOAT:ik.INT,t,i,r.slice(t,i))}function _k(e,t,n){if(!ak(n))throw K_(e.source,t,`Invalid number, expected digit but got: ${vk(e,t)}.`);const r=e.source.body;let i=t+1;for(;ak(r.charCodeAt(i));)++i;return i}function kk(e,t){const n=e.source.body,r=n.length;let i=t+1,o=i,a="";for(;i<r;){const r=n.charCodeAt(i);if(34===r)return a+=n.slice(o,i),yk(e,ik.STRING,t,i+1,a);if(92!==r){if(10===r||13===r)break;if(pk(r))++i;else{if(!fk(n,i))throw K_(e.source,i,`Invalid character within String: ${vk(e,i)}.`);i+=2}}else{a+=n.slice(o,i);const t=117===n.charCodeAt(i+1)?123===n.charCodeAt(i+2)?Ek(e,i):Sk(e,i):Mk(e,i);a+=t.value,i+=t.size,o=i}}throw K_(e.source,i,"Unterminated string.")}function Ek(e,t){const n=e.source.body;let r=0,i=3;for(;i<12;){const e=n.charCodeAt(t+i++);if(125===e){if(i<5||!pk(r))break;return{value:String.fromCodePoint(r),size:i}}if(r=r<<4|Tk(e),r<0)break}throw K_(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+i)}".`)}function Sk(e,t){const n=e.source.body,r=Ck(n,t+2);if(pk(r))return{value:String.fromCodePoint(r),size:6};if(mk(r)&&92===n.charCodeAt(t+6)&&117===n.charCodeAt(t+7)){const e=Ck(n,t+8);if(gk(e))return{value:String.fromCodePoint(r,e),size:12}}throw K_(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+6)}".`)}function Ck(e,t){return Tk(e.charCodeAt(t))<<12|Tk(e.charCodeAt(t+1))<<8|Tk(e.charCodeAt(t+2))<<4|Tk(e.charCodeAt(t+3))}function Tk(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function Mk(e,t){const n=e.source.body;switch(n.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:"\n",size:2};case 114:return{value:"\r",size:2};case 116:return{value:"\t",size:2}}throw K_(e.source,t,`Invalid character escape sequence: "${n.slice(t,t+2)}".`)}function Ik(e,t){const n=e.source.body,r=n.length;let i=e.lineStart,o=t+3,a=o,s="";const l=[];for(;o<r;){const r=n.charCodeAt(o);if(34===r&&34===n.charCodeAt(o+1)&&34===n.charCodeAt(o+2)){s+=n.slice(a,o),l.push(s);const r=yk(e,ik.BLOCK_STRING,t,o+3,uk(l).join("\n"));return e.line+=l.length-1,e.lineStart=i,r}if(92!==r||34!==n.charCodeAt(o+1)||34!==n.charCodeAt(o+2)||34!==n.charCodeAt(o+3))if(10!==r&&13!==r)if(pk(r))++o;else{if(!fk(n,o))throw K_(e.source,o,`Invalid character within String: ${vk(e,o)}.`);o+=2}else s+=n.slice(a,o),l.push(s),13===r&&10===n.charCodeAt(o+1)?o+=2:++o,s="",a=o,i=o;else s+=n.slice(a,o),a=o+1,o+=4}throw K_(e.source,o,"Unterminated string.")}function Ok(e,t){const n=e.source.body,r=n.length;let i=t+1;for(;i<r&&ck(n.charCodeAt(i));)++i;return yk(e,ik.NAME,t,i,n.slice(t,i))}const Ak=10,Pk=2;function Dk(e){return Lk(e,[])}function Lk(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return function(e,t){if(null===e)return"null";if(t.includes(e))return"[Circular]";const n=[...t,e];if(function(e){return"function"==typeof e.toJSON}(e)){const t=e.toJSON();if(t!==e)return"string"==typeof t?t:Lk(t,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>Pk)return"[Array]";const n=Math.min(Ak,e.length),r=e.length-n,i=[];for(let o=0;o<n;++o)i.push(Lk(e[o],t));return 1===r?i.push("... 1 more item"):r>1&&i.push(`... ${r} more items`),"["+i.join(", ")+"]"}(e,n);return function(e,t){const n=Object.entries(e);if(0===n.length)return"{}";if(t.length>Pk)return"["+function(e){const t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){const t=e.constructor.name;if("string"==typeof t&&""!==t)return t}return t}(e)+"]";const r=n.map((([e,n])=>e+": "+Lk(n,t)));return"{ "+r.join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}class Rk{constructor(e,t="GraphQL request",n={line:1,column:1}){"string"==typeof e||F_(!1,`Body must be a string. Received: ${Dk(e)}.`),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||F_(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||F_(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}class zk{constructor(e,t={}){const n=function(e){return e instanceof Rk}(e)?e:new Rk(e);this._lexer=new hk(n),this._options=t,this._tokenCounter=0}parseName(){const e=this.expectToken(ik.NAME);return this.node(e,{kind:rk.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:rk.DOCUMENT,definitions:this.many(ik.SOF,this.parseDefinition,ik.EOF)})}parseDefinition(){if(this.peek(ik.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===ik.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw K_(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(ik.BRACE_L))return this.node(e,{kind:rk.OPERATION_DEFINITION,operation:tk.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let n;return this.peek(ik.NAME)&&(n=this.parseName()),this.node(e,{kind:rk.OPERATION_DEFINITION,operation:t,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(ik.NAME);switch(e.value){case"query":return tk.QUERY;case"mutation":return tk.MUTATION;case"subscription":return tk.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(ik.PAREN_L,this.parseVariableDefinition,ik.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:rk.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(ik.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(ik.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(ik.DOLLAR),this.node(e,{kind:rk.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:rk.SELECTION_SET,selections:this.many(ik.BRACE_L,this.parseSelection,ik.BRACE_R)})}parseSelection(){return this.peek(ik.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let n,r;return this.expectOptionalToken(ik.COLON)?(n=t,r=this.parseName()):r=t,this.node(e,{kind:rk.FIELD,alias:n,name:r,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(ik.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(ik.PAREN_L,t,ik.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,n=this.parseName();return this.expectToken(ik.COLON),this.node(t,{kind:rk.ARGUMENT,name:n,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(ik.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(ik.NAME)?this.node(e,{kind:rk.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:rk.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),!0===this._options.allowLegacyFragmentVariables?this.node(e,{kind:rk.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:rk.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case ik.BRACKET_L:return this.parseList(e);case ik.BRACE_L:return this.parseObject(e);case ik.INT:return this.advanceLexer(),this.node(t,{kind:rk.INT,value:t.value});case ik.FLOAT:return this.advanceLexer(),this.node(t,{kind:rk.FLOAT,value:t.value});case ik.STRING:case ik.BLOCK_STRING:return this.parseStringLiteral();case ik.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:rk.BOOLEAN,value:!0});case"false":return this.node(t,{kind:rk.BOOLEAN,value:!1});case"null":return this.node(t,{kind:rk.NULL});default:return this.node(t,{kind:rk.ENUM,value:t.value})}case ik.DOLLAR:if(e){if(this.expectToken(ik.DOLLAR),this._lexer.token.kind===ik.NAME){const e=this._lexer.token.value;throw K_(this._lexer.source,t.start,`Unexpected variable "$${e}" in constant value.`)}throw this.unexpected(t)}return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:rk.STRING,value:e.value,block:e.kind===ik.BLOCK_STRING})}parseList(e){return this.node(this._lexer.token,{kind:rk.LIST,values:this.any(ik.BRACKET_L,(()=>this.parseValueLiteral(e)),ik.BRACKET_R)})}parseObject(e){return this.node(this._lexer.token,{kind:rk.OBJECT,fields:this.any(ik.BRACE_L,(()=>this.parseObjectField(e)),ik.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,n=this.parseName();return this.expectToken(ik.COLON),this.node(t,{kind:rk.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(ik.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(ik.AT),this.node(t,{kind:rk.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(ik.BRACKET_L)){const n=this.parseTypeReference();this.expectToken(ik.BRACKET_R),t=this.node(e,{kind:rk.LIST_TYPE,type:n})}else t=this.parseNamedType();return this.expectOptionalToken(ik.BANG)?this.node(e,{kind:rk.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:rk.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(ik.STRING)||this.peek(ik.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const n=this.parseConstDirectives(),r=this.many(ik.BRACE_L,this.parseOperationTypeDefinition,ik.BRACE_R);return this.node(e,{kind:rk.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(ik.COLON);const n=this.parseNamedType();return this.node(e,{kind:rk.OPERATION_TYPE_DEFINITION,operation:t,type:n})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const n=this.parseName(),r=this.parseConstDirectives();return this.node(e,{kind:rk.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:rk.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(ik.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(ik.BRACE_L,this.parseFieldDefinition,ik.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(ik.COLON);const i=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:rk.FIELD_DEFINITION,description:t,name:n,arguments:r,type:i,directives:o})}parseArgumentDefs(){return this.optionalMany(ik.PAREN_L,this.parseInputValueDef,ik.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(ik.COLON);const r=this.parseTypeReference();let i;this.expectOptionalToken(ik.EQUALS)&&(i=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:rk.INPUT_VALUE_DEFINITION,description:t,name:n,type:r,defaultValue:i,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:rk.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const n=this.parseName(),r=this.parseConstDirectives(),i=this.parseUnionMemberTypes();return this.node(e,{kind:rk.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:i})}parseUnionMemberTypes(){return this.expectOptionalToken(ik.EQUALS)?this.delimitedMany(ik.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const n=this.parseName(),r=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();return this.node(e,{kind:rk.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:i})}parseEnumValuesDefinition(){return this.optionalMany(ik.BRACE_L,this.parseEnumValueDefinition,ik.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseEnumValueName(),r=this.parseConstDirectives();return this.node(e,{kind:rk.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r})}parseEnumValueName(){if("true"===this._lexer.token.value||"false"===this._lexer.token.value||"null"===this._lexer.token.value)throw K_(this._lexer.source,this._lexer.token.start,`${jk(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const n=this.parseName(),r=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();return this.node(e,{kind:rk.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:i})}parseInputFieldsDefinition(){return this.optionalMany(ik.BRACE_L,this.parseInputValueDef,ik.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===ik.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),n=this.optionalMany(ik.BRACE_L,this.parseOperationTypeDefinition,ik.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:rk.SCHEMA_EXTENSION,directives:t,operationTypes:n})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),n=this.parseConstDirectives();if(0===n.length)throw this.unexpected();return this.node(e,{kind:rk.SCALAR_TYPE_EXTENSION,name:t,directives:n})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:rk.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:rk.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),n=this.parseConstDirectives(),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return this.node(e,{kind:rk.UNION_TYPE_EXTENSION,name:t,directives:n,types:r})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),n=this.parseConstDirectives(),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return this.node(e,{kind:rk.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),n=this.parseConstDirectives(),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return this.node(e,{kind:rk.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(ik.AT);const n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:rk.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:i,locations:o})}parseDirectiveLocations(){return this.delimitedMany(ik.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(nk,t.value))return t;throw this.unexpected(e)}node(e,t){return!0!==this._options.noLocation&&(t.loc=new Y_(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw K_(this._lexer.source,t.start,`Expected ${Nk(e)}, found ${jk(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e&&(this.advanceLexer(),!0)}expectKeyword(e){const t=this._lexer.token;if(t.kind!==ik.NAME||t.value!==e)throw K_(this._lexer.source,t.start,`Expected "${e}", found ${jk(t)}.`);this.advanceLexer()}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===ik.NAME&&t.value===e&&(this.advanceLexer(),!0)}unexpected(e){const t=null!=e?e:this._lexer.token;return K_(this._lexer.source,t.start,`Unexpected ${jk(t)}.`)}any(e,t,n){this.expectToken(e);const r=[];for(;!this.expectOptionalToken(n);)r.push(t.call(this));return r}optionalMany(e,t,n){if(this.expectOptionalToken(e)){const e=[];do{e.push(t.call(this))}while(!this.expectOptionalToken(n));return e}return[]}many(e,t,n){this.expectToken(e);const r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r}delimitedMany(e,t){this.expectOptionalToken(e);const n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(void 0!==e&&t.kind!==ik.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw K_(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function jk(e){const t=e.value;return Nk(e.kind)+(null!=t?` "${t}"`:"")}function Nk(e){return function(e){return e===ik.BANG||e===ik.DOLLAR||e===ik.AMP||e===ik.PAREN_L||e===ik.PAREN_R||e===ik.SPREAD||e===ik.COLON||e===ik.EQUALS||e===ik.AT||e===ik.BRACKET_L||e===ik.BRACKET_R||e===ik.BRACE_L||e===ik.PIPE||e===ik.BRACE_R}(e)?`"${e}"`:e}const Bk=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function Fk(e){return Vk[e.charCodeAt(0)]}const Vk=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],Uk=Object.freeze({});function $k(e,t,n=J_){const r=new Map;for(const v of Object.values(rk))r.set(v,Zk(t,v));let i,o,a,s=Array.isArray(e),l=[e],c=-1,u=[],d=e;const h=[],p=[];do{c++;const e=c===l.length,v=e&&0!==u.length;if(e){if(o=0===p.length?void 0:h[h.length-1],d=a,a=p.pop(),v)if(s){d=d.slice();let e=0;for(const[t,n]of u){const r=t-e;null===n?(d.splice(r,1),e++):d[r]=n}}else{d=Object.defineProperties({},Object.getOwnPropertyDescriptors(d));for(const[e,t]of u)d[e]=t}c=i.index,l=i.keys,u=i.edits,s=i.inArray,i=i.prev}else if(a){if(o=s?c:l[c],d=a[o],null==d)continue;h.push(o)}let y;if(!Array.isArray(d)){var f,m;ek(d)||F_(!1,`Invalid AST Node: ${Dk(d)}.`);const n=e?null===(f=r.get(d.kind))||void 0===f?void 0:f.leave:null===(m=r.get(d.kind))||void 0===m?void 0:m.enter;if(y=null==n?void 0:n.call(t,d,o,a,h,p),y===Uk)break;if(!1===y){if(!e){h.pop();continue}}else if(void 0!==y&&(u.push([o,y]),!e)){if(!ek(y)){h.pop();continue}d=y}}var g;void 0===y&&v&&u.push([o,d]),e?h.pop():(i={inArray:s,index:c,keys:l,edits:u,prev:i},s=Array.isArray(d),l=s?d:null!==(g=n[d.kind])&&void 0!==g?g:[],c=-1,u=[],a&&p.push(a),a=d)}while(void 0!==i);return 0!==u.length?u[u.length-1][1]:e}function Zk(e,t){const n=e[t];return"object"==typeof n?n:"function"==typeof n?{enter:n,leave:void 0}:{enter:e.enter,leave:e.leave}}function Hk(e){return $k(e,Wk)}const Wk={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>qk(e.definitions,"\n\n")},OperationDefinition:{leave(e){const t=Kk("(",qk(e.variableDefinitions,", "),")"),n=qk([e.operation,qk([e.name,t]),qk(e.directives," ")]," ");return("query"===n?"":n+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:n,directives:r})=>e+": "+t+Kk(" = ",n)+Kk(" ",qk(r," "))},SelectionSet:{leave:({selections:e})=>Gk(e)},Field:{leave({alias:e,name:t,arguments:n,directives:r,selectionSet:i}){const o=Kk("",e,": ")+t;let a=o+Kk("(",qk(n,", "),")");return a.length>80&&(a=o+Kk("(\n",Yk(qk(n,"\n")),"\n)")),qk([a,qk(r," "),i]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+Kk(" ",qk(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:n})=>qk(["...",Kk("on ",e),qk(t," "),n]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:n,directives:r,selectionSet:i})=>`fragment ${e}${Kk("(",qk(n,", "),")")} on ${t} ${Kk("",qk(r," ")," ")}`+i},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?function(e,t){const n=e.replace(/"""/g,'\\"""'),r=n.split(/\r\n|[\n\r]/g),i=1===r.length,o=r.length>1&&r.slice(1).every((e=>0===e.length||ok(e.charCodeAt(0)))),a=n.endsWith('\\"""'),s=e.endsWith('"')&&!a,l=e.endsWith("\\"),c=s||l,u=!(null!=t&&t.minimize)&&(!i||e.length>70||c||o||a);let d="";const h=i&&ok(e.charCodeAt(0));return(u&&!h||o)&&(d+="\n"),d+=n,(u||c)&&(d+="\n"),'"""'+d+'"""'}(e):`"${e.replace(Bk,Fk)}"`},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+qk(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+qk(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+Kk("(",qk(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:n})=>Kk("",e,"\n")+qk(["schema",qk(t," "),Gk(n)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:n})=>Kk("",e,"\n")+qk(["scalar",t,qk(n," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:r,fields:i})=>Kk("",e,"\n")+qk(["type",t,Kk("implements ",qk(n," & ")),qk(r," "),Gk(i)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:n,type:r,directives:i})=>Kk("",e,"\n")+t+(Xk(n)?Kk("(\n",Yk(qk(n,"\n")),"\n)"):Kk("(",qk(n,", "),")"))+": "+r+Kk(" ",qk(i," "))},InputValueDefinition:{leave:({description:e,name:t,type:n,defaultValue:r,directives:i})=>Kk("",e,"\n")+qk([t+": "+n,Kk("= ",r),qk(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:r,fields:i})=>Kk("",e,"\n")+qk(["interface",t,Kk("implements ",qk(n," & ")),qk(r," "),Gk(i)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:n,types:r})=>Kk("",e,"\n")+qk(["union",t,qk(n," "),Kk("= ",qk(r," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:n,values:r})=>Kk("",e,"\n")+qk(["enum",t,qk(n," "),Gk(r)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:n})=>Kk("",e,"\n")+qk([t,qk(n," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:n,fields:r})=>Kk("",e,"\n")+qk(["input",t,qk(n," "),Gk(r)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:n,repeatable:r,locations:i})=>Kk("",e,"\n")+"directive @"+t+(Xk(n)?Kk("(\n",Yk(qk(n,"\n")),"\n)"):Kk("(",qk(n,", "),")"))+(r?" repeatable":"")+" on "+qk(i," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>qk(["extend schema",qk(e," "),Gk(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>qk(["extend scalar",e,qk(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:r})=>qk(["extend type",e,Kk("implements ",qk(t," & ")),qk(n," "),Gk(r)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:r})=>qk(["extend interface",e,Kk("implements ",qk(t," & ")),qk(n," "),Gk(r)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:n})=>qk(["extend union",e,qk(t," "),Kk("= ",qk(n," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:n})=>qk(["extend enum",e,qk(t," "),Gk(n)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:n})=>qk(["extend input",e,qk(t," "),Gk(n)]," ")}};function qk(e,t=""){var n;return null!==(n=null==e?void 0:e.filter((e=>e)).join(t))&&void 0!==n?n:""}function Gk(e){return Kk("{\n",Yk(qk(e,"\n")),"\n}")}function Kk(e,t,n=""){return null!=t&&""!==t?e+t+n:""}function Yk(e){return Kk("  ",e.replace(/\n/g,"\n  "))}function Xk(e){var t;return null!==(t=null==e?void 0:e.some((e=>e.includes("\n"))))&&void 0!==t&&t}function Jk(e){return e.kind===rk.FIELD||e.kind===rk.FRAGMENT_SPREAD||e.kind===rk.INLINE_FRAGMENT}function Qk(e,t){var n=e.directives;return!n||!n.length||function(e){var t=[];return e&&e.length&&e.forEach((function(e){if(function(e){var t=e.name.value;return"skip"===t||"include"===t}(e)){var n=e.arguments,r=e.name.value;__DEV__?T_(n&&1===n.length,"Incorrect number of arguments for the @".concat(r," directive.")):T_(n&&1===n.length,41);var i=n[0];__DEV__?T_(i.name&&"if"===i.name.value,"Invalid argument for the @".concat(r," directive.")):T_(i.name&&"if"===i.name.value,42);var o=i.value;__DEV__?T_(o&&("Variable"===o.kind||"BooleanValue"===o.kind),"Argument for the @".concat(r," directive must be a variable or a boolean value.")):T_(o&&("Variable"===o.kind||"BooleanValue"===o.kind),43),t.push({directive:e,ifArgument:i})}})),t}(n).every((function(e){var n=e.directive,r=e.ifArgument,i=!1;return"Variable"===r.value.kind?(i=t&&t[r.value.name.value],__DEV__?T_(void 0!==i,"Invalid variable referenced in @".concat(n.name.value," directive.")):T_(void 0!==i,40)):i=r.value.value,"skip"===n.name.value?!i:i}))}function eE(e,t,n){var r=new Set(e),i=r.size;return $k(t,{Directive:function(e){if(r.delete(e.name.value)&&(!n||!r.size))return Uk}}),n?!r.size:r.size<i}function tE(e){return e&&eE(["client","export"],e,!0)}function nE(e,t){var n=t,r=[];return e.definitions.forEach((function(e){if("OperationDefinition"===e.kind)throw __DEV__?new C_("Found a ".concat(e.operation," operation").concat(e.name?" named '".concat(e.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new C_(44);"FragmentDefinition"===e.kind&&r.push(e)})),void 0===n&&(__DEV__?T_(1===r.length,"Found ".concat(r.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):T_(1===r.length,45),n=r[0].name.value),Ig(Ig({},e),{definitions:Dg([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],e.definitions,!0)})}function rE(e){void 0===e&&(e=[]);var t={};return e.forEach((function(e){t[e.name.value]=e})),t}function iE(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":var n=e.name.value;if("function"==typeof t)return t(n);var r=t&&t[n];return __DEV__?T_(r,"No fragment named ".concat(n)):T_(r,46),r||null;default:return null}}function oE(e){return null!==e&&"object"==typeof e}function aE(e){return{__ref:String(e)}}function sE(e){return Boolean(e&&"object"==typeof e&&"string"==typeof e.__ref)}function lE(e,t,n,r){if(function(e){return"IntValue"===e.kind}(n)||function(e){return"FloatValue"===e.kind}(n))e[t.value]=Number(n.value);else if(function(e){return"BooleanValue"===e.kind}(n)||function(e){return"StringValue"===e.kind}(n))e[t.value]=n.value;else if(function(e){return"ObjectValue"===e.kind}(n)){var i={};n.fields.map((function(e){return lE(i,e.name,e.value,r)})),e[t.value]=i}else if(function(e){return"Variable"===e.kind}(n)){var o=(r||{})[n.name.value];e[t.value]=o}else if(function(e){return"ListValue"===e.kind}(n))e[t.value]=n.values.map((function(e){var n={};return lE(n,t,e,r),n[t.value]}));else if(function(e){return"EnumValue"===e.kind}(n))e[t.value]=n.value;else{if(!function(e){return"NullValue"===e.kind}(n))throw __DEV__?new C_('The inline argument "'.concat(t.value,'" of kind "').concat(n.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new C_(55);e[t.value]=null}}B_(),__DEV__?T_("boolean"==typeof R_,R_):T_("boolean"==typeof R_,39);var cE=["connection","include","skip","client","rest","export"],uE=Object.assign((function(e,t,n){if(t&&n&&n.connection&&n.connection.key){if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var i={};return r.forEach((function(e){i[e]=t[e]})),"".concat(n.connection.key,"(").concat(dE(i),")")}return n.connection.key}var o=e;if(t){var a=dE(t);o+="(".concat(a,")")}return n&&Object.keys(n).forEach((function(e){-1===cE.indexOf(e)&&(n[e]&&Object.keys(n[e]).length?o+="@".concat(e,"(").concat(dE(n[e]),")"):o+="@".concat(e))})),o}),{setStringify:function(e){var t=dE;return dE=e,t}}),dE=function(e){return JSON.stringify(e,hE)};function hE(e,t){return oE(t)&&!Array.isArray(t)&&(t=Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{})),t}function pE(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach((function(e){var r=e.name,i=e.value;return lE(n,r,i,t)})),n}return null}function fE(e){return e.alias?e.alias.value:e.name.value}function mE(e,t,n){for(var r,i=0,o=t.selections;i<o.length;i++)if(gE(l=o[i])){if("__typename"===l.name.value)return e[fE(l)]}else r?r.push(l):r=[l];if("string"==typeof e.__typename)return e.__typename;if(r)for(var a=0,s=r;a<s.length;a++){var l,c=mE(e,iE(l=s[a],n).selectionSet,n);if("string"==typeof c)return c}}function gE(e){return"Field"===e.kind}function vE(e){__DEV__?T_(e&&"Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):T_(e&&"Document"===e.kind,47);var t=e.definitions.filter((function(e){return"FragmentDefinition"!==e.kind})).map((function(e){if("OperationDefinition"!==e.kind)throw __DEV__?new C_('Schema type definitions not allowed in queries. Found: "'.concat(e.kind,'"')):new C_(48);return e}));return __DEV__?T_(t.length<=1,"Ambiguous GraphQL document: contains ".concat(t.length," operations")):T_(t.length<=1,49),e}function yE(e){return vE(e),e.definitions.filter((function(e){return"OperationDefinition"===e.kind}))[0]}function bE(e){return e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&!!e.name})).map((function(e){return e.name.value}))[0]||null}function xE(e){return e.definitions.filter((function(e){return"FragmentDefinition"===e.kind}))}function wE(e){var t=yE(e);return __DEV__?T_(t&&"query"===t.operation,"Must contain a query definition."):T_(t&&"query"===t.operation,50),t}function _E(e){var t;vE(e);for(var n=0,r=e.definitions;n<r.length;n++){var i=r[n];if("OperationDefinition"===i.kind){var o=i.operation;if("query"===o||"mutation"===o||"subscription"===o)return i}"FragmentDefinition"!==i.kind||t||(t=i)}if(t)return t;throw __DEV__?new C_("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new C_(54)}function kE(e){var t=Object.create(null),n=e&&e.variableDefinitions;return n&&n.length&&n.forEach((function(e){e.defaultValue&&lE(t,e.variable.name,e.defaultValue)})),t}var EE=Array.isArray;function SE(e){return Array.isArray(e)&&e.length>0}var CE={kind:rk.FIELD,name:{kind:rk.NAME,value:"__typename"}};function TE(e,t){return!e||e.selectionSet.selections.every((function(e){return e.kind===rk.FRAGMENT_SPREAD&&TE(t[e.name.value],t)}))}function ME(e){return TE(yE(e)||function(e){__DEV__?T_("Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):T_("Document"===e.kind,51),__DEV__?T_(e.definitions.length<=1,"Fragment must have exactly one definition."):T_(e.definitions.length<=1,52);var t=e.definitions[0];return __DEV__?T_("FragmentDefinition"===t.kind,"Must be a fragment definition."):T_("FragmentDefinition"===t.kind,53),t}(e),rE(xE(e)))?null:e}function IE(e){var t=new Map;return function(n){void 0===n&&(n=e);var r=t.get(n);return r||t.set(n,r={variables:new Set,fragmentSpreads:new Set}),r}}function OE(e,t){for(var n=IE(""),r=IE(""),i=function(e){for(var t=0,i=void 0;t<e.length&&(i=e[t]);++t)if(!EE(i)){if(i.kind===rk.OPERATION_DEFINITION)return n(i.name&&i.name.value);if(i.kind===rk.FRAGMENT_DEFINITION)return r(i.name.value)}return __DEV__&&T_.error("Could not find operation or fragment"),null},o=0,a=t.definitions.length-1;a>=0;--a)t.definitions[a].kind===rk.OPERATION_DEFINITION&&++o;var s=function(e){var t=new Set,n=[];return e.forEach((function(e){e.name?t.add(e.name):e.test&&n.push(e.test)})),function(e){return t.has(e.name.value)||n.some((function(t){return t(e)}))}}(e),l=e.some((function(e){return e.remove})),c=function(e){return l&&e&&e.some(s)},u=new Map,d=!1,h={enter:function(e){if(c(e.directives))return d=!0,null}},p=$k(t,{Field:h,InlineFragment:h,VariableDefinition:{enter:function(){return!1}},Variable:{enter:function(e,t,n,r,o){var a=i(o);a&&a.variables.add(e.name.value)}},FragmentSpread:{enter:function(e,t,n,r,o){if(c(e.directives))return d=!0,null;var a=i(o);a&&a.fragmentSpreads.add(e.name.value)}},FragmentDefinition:{enter:function(e,t,n,r){u.set(JSON.stringify(r),e)},leave:function(e,t,n,i){return e===u.get(JSON.stringify(i))?e:o>0&&e.selectionSet.selections.every((function(e){return e.kind===rk.FIELD&&"__typename"===e.name.value}))?(r(e.name.value).removed=!0,d=!0,null):void 0}},Directive:{leave:function(e){if(s(e))return d=!0,null}}});if(!d)return t;var f=function(e){return e.transitiveVars||(e.transitiveVars=new Set(e.variables),e.removed||e.fragmentSpreads.forEach((function(t){f(r(t)).transitiveVars.forEach((function(t){e.transitiveVars.add(t)}))}))),e},m=new Set;p.definitions.forEach((function(e){e.kind===rk.OPERATION_DEFINITION?f(n(e.name&&e.name.value)).fragmentSpreads.forEach((function(e){m.add(e)})):e.kind!==rk.FRAGMENT_DEFINITION||0!==o||r(e.name.value).removed||m.add(e.name.value)})),m.forEach((function(e){f(r(e)).fragmentSpreads.forEach((function(e){m.add(e)}))}));var g={enter:function(e){if(t=e.name.value,!m.has(t)||r(t).removed)return null;var t}};return ME($k(p,{FragmentSpread:g,FragmentDefinition:g,OperationDefinition:{leave:function(e){if(e.variableDefinitions){var t=f(n(e.name&&e.name.value)).transitiveVars;if(t.size<e.variableDefinitions.length)return Ig(Ig({},e),{variableDefinitions:e.variableDefinitions.filter((function(e){return t.has(e.variable.name.value)}))})}}}}))}var AE=Object.assign((function(e){return $k(e,{SelectionSet:{enter:function(e,t,n){if(!n||n.kind!==rk.OPERATION_DEFINITION){var r=e.selections;if(r&&!r.some((function(e){return gE(e)&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))}))){var i=n;if(!(gE(i)&&i.directives&&i.directives.some((function(e){return"export"===e.name.value}))))return Ig(Ig({},e),{selections:Dg(Dg([],r,!0),[CE],!1)})}}}}})}),{added:function(e){return e===CE}}),PE={test:function(e){var t="connection"===e.name.value;return t&&(e.arguments&&e.arguments.some((function(e){return"key"===e.name.value}))||__DEV__&&T_.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key.")),t}};function DE(e){return"query"===_E(e).operation?e:$k(e,{OperationDefinition:{enter:function(e){return Ig(Ig({},e),{operation:"query"})}}})}var LE=Object.prototype.hasOwnProperty;function RE(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return zE(e)}function zE(e){var t=e[0]||{},n=e.length;if(n>1)for(var r=new NE,i=1;i<n;++i)t=r.merge(t,e[i]);return t}var jE=function(e,t,n){return this.merge(e[n],t[n])},NE=function(){function e(e){void 0===e&&(e=jE),this.reconciler=e,this.isObject=oE,this.pastCopies=new Set}return e.prototype.merge=function(e,t){for(var n=this,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return oE(t)&&oE(e)?(Object.keys(t).forEach((function(i){if(LE.call(e,i)){var o=e[i];if(t[i]!==o){var a=n.reconciler.apply(n,Dg([e,t,i],r,!1));a!==o&&((e=n.shallowCopyForMerge(e))[i]=a)}}else(e=n.shallowCopyForMerge(e))[i]=t[i]})),e):t},e.prototype.shallowCopyForMerge=function(e){return oE(e)&&(this.pastCopies.has(e)||(e=Array.isArray(e)?e.slice(0):Ig({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e))),e},e}();function BE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return FE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FE(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function FE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function VE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UE(e,t,n){return t&&VE(e.prototype,t),n&&VE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var $E=function(){return"function"==typeof Symbol},ZE=function(e){return $E()&&Boolean(Symbol[e])},HE=function(e){return ZE(e)?Symbol[e]:"@@"+e};$E()&&!ZE("observable")&&(Symbol.observable=Symbol("observable"));var WE=HE("iterator"),qE=HE("observable"),GE=HE("species");function KE(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function YE(e){var t=e.constructor;return void 0!==t&&null===(t=t[GE])&&(t=void 0),void 0!==t?t:aS}function XE(e){return e instanceof aS}function JE(e){JE.log?JE.log(e):setTimeout((function(){throw e}))}function QE(e){Promise.resolve().then((function(){try{e()}catch($A){JE($A)}}))}function eS(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=KE(t,"unsubscribe");n&&n.call(t)}}catch($A){JE($A)}}function tS(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function nS(e,t,n){e._state="running";var r=e._observer;try{var i=KE(r,t);switch(t){case"next":i&&i.call(r,n);break;case"error":if(tS(e),!i)throw n;i.call(r,n);break;case"complete":tS(e),i&&i.call(r)}}catch($A){JE($A)}"closed"===e._state?eS(e):"running"===e._state&&(e._state="ready")}function rS(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void QE((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(nS(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void nS(e,t,n);e._queue.push({type:t,value:n})}}var iS=function(){function e(e,t){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";var n=new oS(this);try{this._cleanup=t.call(void 0,n)}catch($A){n.error($A)}"initializing"===this._state&&(this._state="ready")}return e.prototype.unsubscribe=function(){"closed"!==this._state&&(tS(this),eS(this))},UE(e,[{key:"closed",get:function(){return"closed"===this._state}}]),e}(),oS=function(){function e(e){this._subscription=e}var t=e.prototype;return t.next=function(e){rS(this._subscription,"next",e)},t.error=function(e){rS(this._subscription,"error",e)},t.complete=function(){rS(this._subscription,"complete")},UE(e,[{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),aS=function(){function e(t){if(!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}var t=e.prototype;return t.subscribe=function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new iS(e,this._subscriber)},t.forEach=function(e){var t=this;return new Promise((function(n,r){if("function"==typeof e)var i=t.subscribe({next:function(t){try{e(t,o)}catch($A){r($A),i.unsubscribe()}},error:r,complete:n});else r(new TypeError(e+" is not a function"));function o(){i.unsubscribe(),n()}}))},t.map=function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(YE(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch($A){return n.error($A)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))},t.filter=function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(YE(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch($A){return n.error($A)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))},t.reduce=function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=YE(this),r=arguments.length>1,i=!1,o=arguments[1];return new n((function(n){return t.subscribe({next:function(t){var a=!i;if(i=!0,!a||r)try{o=e(o,t)}catch($A){return n.error($A)}else o=t},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(o),n.complete()}})}))},t.concat=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=YE(this);return new i((function(t){var r,o=0;return function e(a){r=a.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(r=void 0,t.complete()):e(i.from(n[o++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}}))},t.flatMap=function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=YE(this);return new n((function(r){var i=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch($A){return r.error($A)}var o=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=i.indexOf(o);e>=0&&i.splice(e,1),a()}});i.push(o)},error:function(e){r.error(e)},complete:function(){a()}});function a(){o.closed&&0===i.length&&r.complete()}return function(){i.forEach((function(e){return e.unsubscribe()})),o.unsubscribe()}}))},t[qE]=function(){return this},e.from=function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=KE(t,qE);if(r){var i=r.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return XE(i)&&i.constructor===n?i:new n((function(e){return i.subscribe(e)}))}if(ZE("iterator")&&(r=KE(t,WE)))return new n((function(e){QE((function(){if(!e.closed){for(var n,i=BE(r.call(t));!(n=i()).done;){var o=n.value;if(e.next(o),e.closed)return}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){QE((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")},e.of=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new("function"==typeof this?this:e)((function(e){QE((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))},UE(e,null,[{key:GE,get:function(){return this}}]),e}();$E()&&Object.defineProperty(aS,Symbol("extensions"),{value:{symbol:qE,hostReportError:JE},configurable:!0}),function(e){var t,n=e.Symbol;if("function"==typeof n)if(n.observable)t=n.observable;else{t="function"==typeof n.for?n.for("https://github.com/benlesh/symbol-observable"):n("https://github.com/benlesh/symbol-observable");try{n.observable=t}catch(r){}}else t="@@observable"}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==t?t:Function("return this")());var sS=aS.prototype,lS="@@observable";sS[lS]||(sS[lS]=function(){return this});var cS=Object.prototype.toString;function uS(e){return dS(e)}function dS(e,t){switch(cS.call(e)){case"[object Array]":if((t=t||new Map).has(e))return t.get(e);var n=e.slice(0);return t.set(e,n),n.forEach((function(e,r){n[r]=dS(e,t)})),n;case"[object Object]":if((t=t||new Map).has(e))return t.get(e);var r=Object.create(Object.getPrototypeOf(e));return t.set(e,r),Object.keys(e).forEach((function(n){r[n]=dS(e[n],t)})),r;default:return e}}function hS(e){var t=new Set([e]);return t.forEach((function(e){oE(e)&&function(e){if(__DEV__&&!Object.isFrozen(e))try{Object.freeze(e)}catch($A){if($A instanceof TypeError)return null;throw $A}return e}(e)===e&&Object.getOwnPropertyNames(e).forEach((function(n){oE(e[n])&&t.add(e[n])}))})),e}function pS(e){return __DEV__&&hS(e),e}function fS(e,t,n){var r=[];e.forEach((function(e){return e[t]&&r.push(e)})),r.forEach((function(e){return e[t](n)}))}function mS(e,t,n){return new aS((function(r){var i=r.next,o=r.error,a=r.complete,s=0,l=!1,c={then:function(e){return new Promise((function(t){return t(e())}))}};function u(e,t){return e?function(t){++s;var n=function(){return e(t)};c=c.then(n,n).then((function(e){--s,i&&i.call(r,e),l&&d.complete()}),(function(e){throw--s,e})).catch((function(e){o&&o.call(r,e)}))}:function(e){return t&&t.call(r,e)}}var d={next:u(t,i),error:u(n,o),complete:function(){l=!0,s||a&&a.call(r)}},h=e.subscribe(d);return function(){return h.unsubscribe()}}))}var gS="function"==typeof WeakMap&&"ReactNative"!==A_((function(){return navigator.product})),vS="function"==typeof WeakSet,yS="function"==typeof Symbol&&"function"==typeof Symbol.for,bS=yS&&Symbol.asyncIterator;function xS(e){function t(t){Object.defineProperty(e,t,{value:aS})}return yS&&Symbol.species&&t(Symbol.species),t("@@species"),e}function wS(e){return e&&"function"==typeof e.then}A_((function(){return window.document.createElement})),A_((function(){return navigator.userAgent.indexOf("jsdom")>=0}));var _S=function(e){function t(t){var n=e.call(this,(function(e){return n.addObserver(e),function(){return n.removeObserver(e)}}))||this;return n.observers=new Set,n.promise=new Promise((function(e,t){n.resolve=e,n.reject=t})),n.handlers={next:function(e){null!==n.sub&&(n.latest=["next",e],n.notify("next",e),fS(n.observers,"next",e))},error:function(e){var t=n.sub;null!==t&&(t&&setTimeout((function(){return t.unsubscribe()})),n.sub=null,n.latest=["error",e],n.reject(e),n.notify("error",e),fS(n.observers,"error",e))},complete:function(){var e=n,t=e.sub,r=e.sources;if(null!==t){var i=(void 0===r?[]:r).shift();i?wS(i)?i.then((function(e){return n.sub=e.subscribe(n.handlers)})):n.sub=i.subscribe(n.handlers):(t&&setTimeout((function(){return t.unsubscribe()})),n.sub=null,n.latest&&"next"===n.latest[0]?n.resolve(n.latest[1]):n.resolve(),n.notify("complete"),fS(n.observers,"complete"))}}},n.nextResultListeners=new Set,n.cancel=function(e){n.reject(e),n.sources=[],n.handlers.complete()},n.promise.catch((function(e){})),"function"==typeof t&&(t=[new aS(t)]),wS(t)?t.then((function(e){return n.start(e)}),n.handlers.error):n.start(t),n}return Mg(t,e),t.prototype.start=function(e){void 0===this.sub&&(this.sources=Array.from(e),this.handlers.complete())},t.prototype.deliverLastMessage=function(e){if(this.latest){var t=this.latest[0],n=e[t];n&&n.call(e,this.latest[1]),null===this.sub&&"next"===t&&e.complete&&e.complete()}},t.prototype.addObserver=function(e){this.observers.has(e)||(this.deliverLastMessage(e),this.observers.add(e))},t.prototype.removeObserver=function(e){this.observers.delete(e)&&this.observers.size<1&&this.handlers.complete()},t.prototype.notify=function(e,t){var n=this.nextResultListeners;n.size&&(this.nextResultListeners=new Set,n.forEach((function(n){return n(e,t)})))},t.prototype.beforeNext=function(e){var t=!1;this.nextResultListeners.add((function(n,r){t||(t=!0,e(n,r))}))},t}(aS);function kS(e){return"incremental"in e}function ES(e){return oE(e)&&"payload"in e}function SS(e,t){var n=e,r=new NE;return kS(t)&&SE(t.incremental)&&t.incremental.forEach((function(e){for(var t=e.data,i=e.path,o=i.length-1;o>=0;--o){var a=i[o],s=isNaN(+a)?{}:[];s[a]=t,t=s}n=r.merge(n,t)})),n}function CS(e){return SE(TS(e))}function TS(e){var t=SE(e.errors)?e.errors.slice(0):[];return kS(e)&&SE(e.incremental)&&e.incremental.forEach((function(e){e.errors&&t.push.apply(t,e.errors)})),t}function MS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object.create(null);return e.forEach((function(e){e&&Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)}))})),n}xS(_S);var IS=new Map;function OS(e){var t=IS.get(e)||1;return IS.set(e,t+1),"".concat(e,":").concat(t,":").concat(Math.random().toString(36).slice(2))}function AS(e,t){return MS(e,t,t.variables&&{variables:Ig(Ig({},e&&e.variables),t.variables)})}function PS(e){return new aS((function(t){t.error(e)}))}var DS=function(e,t,n){var r=new Error(n);throw r.name="ServerError",r.response=e,r.statusCode=e.status,r.result=t,r};function LS(e,t){return t?t(e):aS.of()}function RS(e){return"function"==typeof e?new NS(e):e}function zS(e){return e.request.length<=1}var jS=function(e){function t(t,n){var r=e.call(this,t)||this;return r.link=n,r}return Mg(t,e),t}(Error),NS=function(){function e(e){e&&(this.request=e)}return e.empty=function(){return new e((function(){return aS.of()}))},e.from=function(t){return 0===t.length?e.empty():t.map(RS).reduce((function(e,t){return e.concat(t)}))},e.split=function(t,n,r){var i=RS(n),o=RS(r||new e(LS));return zS(i)&&zS(o)?new e((function(e){return t(e)?i.request(e)||aS.of():o.request(e)||aS.of()})):new e((function(e,n){return t(e)?i.request(e,n)||aS.of():o.request(e,n)||aS.of()}))},e.execute=function(e,t){return e.request(function(e,t){var n=Ig({},e);return Object.defineProperty(t,"setContext",{enumerable:!1,value:function(e){n=Ig(Ig({},n),"function"==typeof e?e(n):e)}}),Object.defineProperty(t,"getContext",{enumerable:!1,value:function(){return Ig({},n)}}),t}(t.context,function(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName="string"!=typeof t.query?bE(t.query)||void 0:""),t}(function(e){for(var t=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(t.indexOf(i)<0)throw __DEV__?new C_("illegal argument: ".concat(i)):new C_(27)}return e}(t))))||aS.of()},e.concat=function(t,n){var r=RS(t);if(zS(r))return __DEV__&&T_.warn(new jS("You are calling concat on a terminating link, which will have no effect",r)),r;var i=RS(n);return zS(i)?new e((function(e){return r.request(e,(function(e){return i.request(e)||aS.of()}))||aS.of()})):new e((function(e,t){return r.request(e,(function(e){return i.request(e,t)||aS.of()}))||aS.of()}))},e.prototype.split=function(t,n,r){return this.concat(e.split(t,n,r||new e(LS)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(e,t){throw __DEV__?new C_("request is not implemented"):new C_(22)},e.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},e.prototype.setOnError=function(e){return this.onError=e,this},e}(),BS=NS.split,FS=NS.execute;function VS(e){var t=null,n=null,r=!1,i=[],o=[];function a(e){if(!n){if(o.length){var t=o.shift();if(Array.isArray(t)&&t[0])return t[0]({value:e,done:!1})}i.push(e)}}function s(e){n=e,o.slice().forEach((function(t){t[1](e)})),!t||t()}function l(){r=!0,o.slice().forEach((function(e){e[0]({value:void 0,done:!0})})),!t||t()}t=function(){t=null,e.removeListener("data",a),e.removeListener("error",s),e.removeListener("end",l),e.removeListener("finish",l),e.removeListener("close",l)},e.on("data",a),e.on("error",s),e.on("end",l),e.on("finish",l),e.on("close",l);var c={next:function(){return new Promise((function(e,t){return n?t(n):i.length?e({value:i.shift(),done:!1}):r?e({value:void 0,done:!0}):void o.push([e,t])}))}};return bS&&(c[Symbol.asyncIterator]=function(){return this}),c}function US(e){var t={next:function(){return e.read()}};return bS&&(t[Symbol.asyncIterator]=function(){return this}),t}function $S(e){var t=e;if(e.body&&(t=e.body),function(e){return!(!bS||!e[Symbol.asyncIterator])}(t))return function(e){var t,n=e[Symbol.asyncIterator]();return(t={next:function(){return n.next()}})[Symbol.asyncIterator]=function(){return this},t}(t);if(function(e){return!!e.getReader}(t))return US(t.getReader());if(function(e){return!!e.stream}(t))return US(t.stream().getReader());if(function(e){return!!e.arrayBuffer}(t))return function(e){var t=!1,n={next:function(){return t?Promise.resolve({value:void 0,done:!0}):(t=!0,new Promise((function(t,n){e.then((function(e){t({value:e,done:!1})})).catch(n)})))}};return bS&&(n[Symbol.asyncIterator]=function(){return this}),n}(t.arrayBuffer());if(function(e){return!!e.pipe}(t))return VS(t);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var ZS=Symbol(),HS=function(e){function t(n){var r,i,o=n.graphQLErrors,a=n.protocolErrors,s=n.clientErrors,l=n.networkError,c=n.errorMessage,u=n.extraInfo,d=e.call(this,c)||this;return d.name="ApolloError",d.graphQLErrors=o||[],d.protocolErrors=a||[],d.clientErrors=s||[],d.networkError=l||null,d.message=c||(i=Dg(Dg(Dg([],(r=d).graphQLErrors,!0),r.clientErrors,!0),r.protocolErrors,!0),r.networkError&&i.push(r.networkError),i.map((function(e){return oE(e)&&e.message||"Error message not found."})).join("\n")),d.extraInfo=u,d.__proto__=t.prototype,d}return Mg(t,e),t}(Error),WS=Object.prototype.hasOwnProperty;function qS(e){var t={};return e.split("\n").forEach((function(e){var n=e.indexOf(":");if(n>-1){var r=e.slice(0,n).trim().toLowerCase(),i=e.slice(n+1).trim();t[r]=i}})),t}function GS(e,t){e.status>=300&&DS(e,function(){try{return JSON.parse(t)}catch(e){return t}}(),"Response not successful: Received status code ".concat(e.status));try{return JSON.parse(t)}catch(r){var n=r;throw n.name="ServerParseError",n.response=e,n.statusCode=e.status,n.bodyText=t,n}}function KS(e,t){var n,r;"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&(null===(n=t.next)||void 0===n||n.call(t,e.result)),null===(r=t.error)||void 0===r||r.call(t,e))}function YS(e,t,n){var r;(r=t,function(e){return e.text().then((function(t){return GS(e,t)})).then((function(t){return e.status>=300&&DS(e,t,"Response not successful: Received status code ".concat(e.status)),Array.isArray(t)||WS.call(t,"data")||WS.call(t,"errors")||DS(e,t,"Server response was missing for query '".concat(Array.isArray(r)?r.map((function(e){return e.operationName})):r.operationName,"'.")),t}))})(e).then((function(e){var t,r;null===(t=n.next)||void 0===t||t.call(n,e),null===(r=n.complete)||void 0===r||r.call(n)})).catch((function(e){return KS(e,n)}))}var XS=function(e,t){var n;try{n=JSON.stringify(e)}catch($A){var r=__DEV__?new C_("Network request failed. ".concat(t," is not serializable: ").concat($A.message)):new C_(24);throw r.parseError=$A,r}return n},JS={http:{includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},QS=function(e,t){return t(e)};function eC(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={},o={};n.forEach((function(e){i=Ig(Ig(Ig({},i),e.options),{headers:Ig(Ig({},i.headers),e.headers)}),e.credentials&&(i.credentials=e.credentials),o=Ig(Ig({},o),e.http)})),i.headers&&(i.headers=function(e,t){if(!t){var n=Object.create(null);return Object.keys(Object(e)).forEach((function(t){n[t.toLowerCase()]=e[t]})),n}var r=Object.create(null);Object.keys(Object(e)).forEach((function(t){r[t.toLowerCase()]={originalName:t,value:e[t]}}));var i=Object.create(null);return Object.keys(r).forEach((function(e){i[r[e].originalName]=r[e].value})),i}(i.headers,o.preserveHeaderCase));var a=e.operationName,s=e.extensions,l=e.variables,c=e.query,u={operationName:a,variables:l};return o.includeExtensions&&(u.extensions=s),o.includeQuery&&(u.query=t(c,Hk)),{options:i,body:u}}var tC=A_((function(){return fetch})),nC=function(e){void 0===e&&(e={});var t=e.uri,n=void 0===t?"/graphql":t,r=e.fetch,i=e.print,o=void 0===i?QS:i,a=e.includeExtensions,s=e.preserveHeaderCase,l=e.useGETForQueries,c=e.includeUnusedVariables,u=void 0!==c&&c,d=Og(e,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);__DEV__&&function(e){if(!e&&"undefined"==typeof fetch)throw __DEV__?new C_("\n\"fetch\" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:\n\nimport fetch from 'cross-fetch';\nimport { ApolloClient, HttpLink } from '@apollo/client';\nconst client = new ApolloClient({\n  link: new HttpLink({ uri: '/graphql', fetch })\n});\n    "):new C_(23)}(r||tC);var h={http:{includeExtensions:a,preserveHeaderCase:s},options:d.fetchOptions,credentials:d.credentials,headers:d.headers};return new NS((function(e){var t=function(e,t){var n=e.getContext().uri;return n||("function"==typeof t?t(e):t||"/graphql")}(e,n),i=e.getContext(),a={};if(i.clientAwareness){var s=i.clientAwareness,c=s.name,d=s.version;c&&(a["apollographql-client-name"]=c),d&&(a["apollographql-client-version"]=d)}var p,f=Ig(Ig({},a),i.headers),m={http:i.http,options:i.fetchOptions,credentials:i.credentials,headers:f},g=eC(e,o,JS,h,m),v=g.options,y=g.body;if(y.variables&&!u){var b=new Set(Object.keys(y.variables));$k(e.query,{Variable:function(e,t,n){n&&"VariableDefinition"!==n.kind&&b.delete(e.name.value)}}),b.size&&(y.variables=Ig({},y.variables),b.forEach((function(e){delete y.variables[e]})))}if(!v.signal){var x=function(){if("undefined"==typeof AbortController)return{controller:!1,signal:!1};var e=new AbortController;return{controller:e,signal:e.signal}}(),w=x.controller,_=x.signal;(p=w)&&(v.signal=_)}var k=function(e){return"OperationDefinition"===e.kind&&"subscription"===e.operation}(_E(e.query)),E=eE(["defer"],e.query);if(l&&!e.query.definitions.some((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation}))&&(v.method="GET"),E||k){v.headers=v.headers||{};var S="multipart/mixed;";k&&E&&__DEV__&&T_.warn("Multipart-subscriptions do not support @defer"),k?S+="boundary=graphql;subscriptionSpec=1.0,application/json":E&&(S+="deferSpec=20220824,application/json"),v.headers.accept=S}if("GET"===v.method){var C=function(e,t){var n=[],r=function(e,t){n.push("".concat(e,"=").concat(encodeURIComponent(t)))};if("query"in t&&r("query",t.query),t.operationName&&r("operationName",t.operationName),t.variables){var i=void 0;try{i=XS(t.variables,"Variables map")}catch(M){return{parseError:M}}r("variables",i)}if(t.extensions){var o=void 0;try{o=XS(t.extensions,"Extensions map")}catch(M){return{parseError:M}}r("extensions",o)}var a="",s=e,l=e.indexOf("#");-1!==l&&(a=e.substr(l),s=e.substr(0,l));var c=-1===s.indexOf("?")?"?":"&";return{newURI:s+c+n.join("&")+a}}(t,y),T=C.newURI,M=C.parseError;if(M)return PS(M);t=T}else try{v.body=XS(y,"Payload")}catch(M){return PS(M)}return new aS((function(n){return(r||A_((function(){return fetch}))||tC)(t,v).then((function(t){var r;e.setContext({response:t});var i=null===(r=t.headers)||void 0===r?void 0:r.get("content-type");return null!==i&&/^multipart\/mixed/i.test(i)?function(e,t){var n,r,i,o,a;return Ag(this,void 0,void 0,(function(){var s,l,c,u,d,h,p,f,m,g,v,y,b,x,w,_,k,E,S,C,T,M,I;return Pg(this,(function(O){switch(O.label){case 0:if(void 0===TextDecoder)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");s=new TextDecoder("utf-8"),l=null===(n=e.headers)||void 0===n?void 0:n.get("content-type"),c="boundary=",u=(null==l?void 0:l.includes(c))?null==l?void 0:l.substring((null==l?void 0:l.indexOf(c))+c.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",d="\r\n--".concat(u),h="",p=$S(e),f=!0,O.label=1;case 1:return f?[4,p.next()]:[3,3];case 2:for(m=O.sent(),g=m.value,v=m.done,y="string"==typeof g?g:s.decode(g),b=h.length-d.length+1,f=!v,x=(h+=y).indexOf(d,b);x>-1;){if(w=void 0,M=[h.slice(0,x),h.slice(x+d.length)],h=M[1],_=(w=M[0]).indexOf("\r\n\r\n"),k=qS(w.slice(0,_)),(E=k["content-type"])&&-1===E.toLowerCase().indexOf("application/json"))throw new Error("Unsupported patch content type: application/json is required.");if(S=w.slice(_))try{C=GS(e,S),Object.keys(C).length>1||"data"in C||"incremental"in C||"errors"in C||"payload"in C?ES(C)?(T={},"payload"in C&&(T=Ig({},C.payload)),"errors"in C&&(T=Ig(Ig({},T),{extensions:Ig(Ig({},"extensions"in T?T.extensions:null),(I={},I[ZS]=C.errors,I))})),null===(r=t.next)||void 0===r||r.call(t,T)):null===(i=t.next)||void 0===i||i.call(t,C):1===Object.keys(C).length&&"hasNext"in C&&!C.hasNext&&(null===(o=t.complete)||void 0===o||o.call(t))}catch(A){KS(A,t)}x=h.indexOf(d)}return[3,1];case 3:return null===(a=t.complete)||void 0===a||a.call(t),[2]}}))}))}(t,n):YS(t,e,n)})).catch((function(e){return KS(e,n)})),function(){p&&p.abort()}}))}))},rC=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,nC(t).request)||this;return n.options=t,n}return Mg(t,e),t}(NS);const{toString:iC,hasOwnProperty:oC}=Object.prototype,aC=Function.prototype.toString,sC=new Map;function lC(e,t){try{return cC(e,t)}finally{sC.clear()}}function cC(e,t){if(e===t)return!0;const n=iC.call(e);if(n!==iC.call(t))return!1;switch(n){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":{if(pC(e,t))return!0;const n=uC(e),r=uC(t),i=n.length;if(i!==r.length)return!1;for(let e=0;e<i;++e)if(!oC.call(t,n[e]))return!1;for(let o=0;o<i;++o){const r=n[o];if(!cC(e[r],t[r]))return!1}return!0}case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!=e)return t!=t;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object RegExp]":case"[object String]":return e==`${t}`;case"[object Map]":case"[object Set]":{if(e.size!==t.size)return!1;if(pC(e,t))return!0;const r=e.entries(),i="[object Map]"===n;for(;;){const e=r.next();if(e.done)break;const[n,o]=e.value;if(!t.has(n))return!1;if(i&&!cC(o,t.get(n)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":e=new Uint8Array(e),t=new Uint8Array(t);case"[object DataView]":{let n=e.byteLength;if(n===t.byteLength)for(;n--&&e[n]===t[n];);return-1===n}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{const n=aC.call(e);return n===aC.call(t)&&!function(e,t){const n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n}(n,hC)}}return!1}function uC(e){return Object.keys(e).filter(dC,e)}function dC(e){return void 0!==this[e]}const hC="{ [native code] }";function pC(e,t){let n=sC.get(e);if(n){if(n.has(t))return!0}else sC.set(e,n=new Set);return n.add(t),!1}var fC=function(){return Object.create(null)},mC=Array.prototype,gC=mC.forEach,vC=mC.slice,yC=function(){function e(e,t){void 0===e&&(e=!0),void 0===t&&(t=fC),this.weakness=e,this.makeData=t}return e.prototype.lookup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.lookupArray(e)},e.prototype.lookupArray=function(e){var t=this;return gC.call(e,(function(e){return t=t.getChildTrie(e)})),t.data||(t.data=this.makeData(vC.call(e)))},e.prototype.getChildTrie=function(t){var n=this.weakness&&function(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=n.get(t);return r||n.set(t,r=new e(this.weakness,this.makeData)),r},e}();let bC=null;const xC={};let wC=1;function _C(e){try{return e()}catch(t){}}const kC="@wry/context:Slot",EC=_C((()=>globalThis))||_C((()=>global))||Object.create(null),SC=EC[kC]||Array[kC]||function(e){try{Object.defineProperty(EC,kC,{value:e,enumerable:!1,writable:!1,configurable:!0})}finally{return e}}(class{constructor(){this.id=["slot",wC++,Date.now(),Math.random().toString(36).slice(2)].join(":")}hasValue(){for(let e=bC;e;e=e.parent)if(this.id in e.slots){const t=e.slots[this.id];if(t===xC)break;return e!==bC&&(bC.slots[this.id]=t),!0}return bC&&(bC.slots[this.id]=xC),!1}getValue(){if(this.hasValue())return bC.slots[this.id]}withValue(e,t,n,r){const i={__proto__:null,[this.id]:e},o=bC;bC={parent:o,slots:i};try{return t.apply(r,n)}finally{bC=o}}static bind(e){const t=bC;return function(){const n=bC;try{return bC=t,e.apply(this,arguments)}finally{bC=n}}}static noContext(e,t,n){if(!bC)return e.apply(n,t);{const r=bC;try{return bC=null,e.apply(n,t)}finally{bC=r}}}});function CC(){}var TC,MC=function(){function e(e,t){void 0===e&&(e=1/0),void 0===t&&(t=CC),this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.get=function(e){var t=this.getNode(e);return t&&t.value},e.prototype.getNode=function(e){var t=this.map.get(e);if(t&&t!==this.newest){var n=t.older,r=t.newer;r&&(r.older=n),n&&(n.newer=r),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=r)}return t},e.prototype.set=function(e,t){var n=this.getNode(e);return n?n.value=t:(n={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},e.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},e.prototype.delete=function(e){var t=this.map.get(e);return!!t&&(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0)},e}(),IC=new SC,OC=Object.prototype.hasOwnProperty,AC=void 0===(TC=Array.from)?function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t}:TC;function PC(e){var t=e.unsubscribe;"function"==typeof t&&(e.unsubscribe=void 0,t())}var DC=[],LC=100;function RC(e,t){if(!e)throw new Error(t||"assertion failure")}function zC(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}var jC=function(){function e(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++e.count}return e.prototype.peek=function(){if(1===this.value.length&&!FC(this))return NC(this),this.value[0]},e.prototype.recompute=function(e){return RC(!this.recomputing,"already recomputing"),NC(this),FC(this)?function(e,t){return qC(e),IC.withValue(e,BC,[e,t]),function(e,t){if("function"==typeof e.subscribe)try{PC(e),e.unsubscribe=e.subscribe.apply(null,t)}catch($A){return e.setDirty(),!1}return!0}(e,t)&&function(e){e.dirty=!1,FC(e)||UC(e)}(e),zC(e.value)}(this,e):zC(this.value)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,VC(this),PC(this))},e.prototype.dispose=function(){var e=this;this.setDirty(),qC(this),$C(this,(function(t,n){t.setDirty(),GC(t,e)}))},e.prototype.forget=function(){this.dispose()},e.prototype.dependOn=function(e){e.add(this),this.deps||(this.deps=DC.pop()||new Set),this.deps.add(e)},e.prototype.forgetDeps=function(){var e=this;this.deps&&(AC(this.deps).forEach((function(t){return t.delete(e)})),this.deps.clear(),DC.push(this.deps),this.deps=null)},e.count=0,e}();function NC(e){var t=IC.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),FC(e)?ZC(t,e):HC(t,e),t}function BC(e,t){e.recomputing=!0,e.value.length=0;try{e.value[0]=e.fn.apply(null,t)}catch($A){e.value[1]=$A}e.recomputing=!1}function FC(e){return e.dirty||!(!e.dirtyChildren||!e.dirtyChildren.size)}function VC(e){$C(e,ZC)}function UC(e){$C(e,HC)}function $C(e,t){var n=e.parents.size;if(n)for(var r=AC(e.parents),i=0;i<n;++i)t(r[i],e)}function ZC(e,t){RC(e.childValues.has(t)),RC(FC(t));var n=!FC(e);if(e.dirtyChildren){if(e.dirtyChildren.has(t))return}else e.dirtyChildren=DC.pop()||new Set;e.dirtyChildren.add(t),n&&VC(e)}function HC(e,t){RC(e.childValues.has(t)),RC(!FC(t));var n=e.childValues.get(t);0===n.length?e.childValues.set(t,t.value.slice(0)):function(e,t){var n=e.length;return n>0&&n===t.length&&e[n-1]===t[n-1]}(n,t.value)||e.setDirty(),WC(e,t),FC(e)||UC(e)}function WC(e,t){var n=e.dirtyChildren;n&&(n.delete(t),0===n.size&&(DC.length<LC&&DC.push(n),e.dirtyChildren=null))}function qC(e){e.childValues.size>0&&e.childValues.forEach((function(t,n){GC(e,n)})),e.forgetDeps(),RC(null===e.dirtyChildren)}function GC(e,t){t.parents.delete(e),e.childValues.delete(t),WC(e,t)}var KC={setDirty:!0,dispose:!0,forget:!0};function YC(e){var t=new Map,n=e&&e.subscribe;function r(e){var r=IC.getValue();if(r){var i=t.get(e);i||t.set(e,i=new Set),r.dependOn(i),"function"==typeof n&&(PC(i),i.unsubscribe=n(e))}}return r.dirty=function(e,n){var r=t.get(e);if(r){var i=n&&OC.call(KC,n)?n:"setDirty";AC(r).forEach((function(e){return e[i]()})),t.delete(e),PC(r)}},r}function XC(){var e=new yC("function"==typeof WeakMap);return function(){return e.lookupArray(arguments)}}XC();var JC=new Set;function QC(e,t){void 0===t&&(t=Object.create(null));var n=new MC(t.max||Math.pow(2,16),(function(e){return e.dispose()})),r=t.keyArgs,i=t.makeCacheKey||XC(),o=function(){var o=i.apply(null,r?r.apply(null,arguments):arguments);if(void 0===o)return e.apply(null,arguments);var a=n.get(o);a||(n.set(o,a=new jC(e)),a.subscribe=t.subscribe,a.forget=function(){return n.delete(o)});var s=a.recompute(Array.prototype.slice.call(arguments));return n.set(o,a),JC.add(n),IC.hasValue()||(JC.forEach((function(e){return e.clean()})),JC.clear()),s};function a(e){var t=n.get(e);t&&t.setDirty()}function s(e){var t=n.get(e);if(t)return t.peek()}function l(e){return n.delete(e)}return Object.defineProperty(o,"size",{get:function(){return n.map.size},configurable:!1,enumerable:!1}),o.dirtyKey=a,o.dirty=function(){a(i.apply(null,arguments))},o.peekKey=s,o.peek=function(){return s(i.apply(null,arguments))},o.forgetKey=l,o.forget=function(){return l(i.apply(null,arguments))},o.makeCacheKey=i,o.getKey=r?function(){return i.apply(null,r.apply(null,arguments))}:i,Object.freeze(o)}var eT=function(){function e(){this.getFragmentDoc=QC(nE)}return e.prototype.batch=function(e){var t,n=this,r="string"==typeof e.optimistic?e.optimistic:!1===e.optimistic?null:void 0;return this.performTransaction((function(){return t=e.update(n)}),r),t},e.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},e.prototype.transformDocument=function(e){return e},e.prototype.transformForLink=function(e){return e},e.prototype.identify=function(e){},e.prototype.gc=function(){return[]},e.prototype.modify=function(e){return!1},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read(Ig(Ig({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read(Ig(Ig({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},e.prototype.writeQuery=function(e){var t=e.id,n=e.data,r=Og(e,["id","data"]);return this.write(Object.assign(r,{dataId:t||"ROOT_QUERY",result:n}))},e.prototype.writeFragment=function(e){var t=e.id,n=e.data,r=e.fragment,i=e.fragmentName,o=Og(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(o,{query:this.getFragmentDoc(r,i),dataId:t,result:n}))},e.prototype.updateQuery=function(e,t){return this.batch({update:function(n){var r=n.readQuery(e),i=t(r);return null==i?r:(n.writeQuery(Ig(Ig({},e),{data:i})),i)}})},e.prototype.updateFragment=function(e,t){return this.batch({update:function(n){var r=n.readFragment(e),i=t(r);return null==i?r:(n.writeFragment(Ig(Ig({},e),{data:i})),i)}})},e}(),tT=function(e){function t(n,r,i,o){var a,s=e.call(this,n)||this;if(s.message=n,s.path=r,s.query=i,s.variables=o,Array.isArray(s.path)){s.missing=s.message;for(var l=s.path.length-1;l>=0;--l)s.missing=((a={})[s.path[l]]=s.missing,a)}else s.missing=s.path;return s.__proto__=t.prototype,s}return Mg(t,e),t}(Error);const nT=()=>Object.create(null),{forEach:rT,slice:iT}=Array.prototype,{hasOwnProperty:oT}=Object.prototype;class aT{constructor(e=!0,t=nT){this.weakness=e,this.makeData=t}lookup(...e){return this.lookupArray(e)}lookupArray(e){let t=this;return rT.call(e,(e=>t=t.getChildTrie(e))),oT.call(t,"data")?t.data:t.data=this.makeData(iT.call(e))}peek(...e){return this.peekArray(e)}peekArray(e){let t=this;for(let n=0,r=e.length;t&&n<r;++n){const r=this.weakness&&sT(e[n])?t.weak:t.strong;t=r&&r.get(e[n])}return t&&t.data}getChildTrie(e){const t=this.weakness&&sT(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map);let n=t.get(e);return n||t.set(e,n=new aT(this.weakness,this.makeData)),n}}function sT(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}var lT=Object.prototype.hasOwnProperty;function cT(e){return null==e}function uT(e,t){var n=e.__typename,r=e.id,i=e._id;if("string"==typeof n&&(t&&(t.keyObject=cT(r)?cT(i)?void 0:{_id:i}:{id:r}),cT(r)&&!cT(i)&&(r=i),!cT(r)))return"".concat(n,":").concat("number"==typeof r||"string"==typeof r?r:JSON.stringify(r))}var dT={dataIdFromObject:uT,addTypename:!0,resultCaching:!0,canonizeResults:!1};function hT(e){var t=e.canonizeResults;return void 0===t?dT.canonizeResults:t}var pT=/^[_a-z][_0-9a-z]*/i;function fT(e){var t=e.match(pT);return t?t[0]:e}function mT(e,t,n){return!!oE(t)&&(EE(t)?t.every((function(t){return mT(e,t,n)})):e.selections.every((function(e){if(gE(e)&&Qk(e,n)){var r=fE(e);return lT.call(t,r)&&(!e.selectionSet||mT(e.selectionSet,t[r],n))}return!0})))}function gT(e){return oE(e)&&!sE(e)&&!EE(e)}function vT(e,t){var n=rE(xE(e));return{fragmentMap:n,lookupFragment:function(e){var r=n[e];return!r&&t&&(r=t.lookup(e)),r||null}}}var yT=Object.create(null),bT=function(){return yT},xT=Object.create(null),wT=function(){function e(e,t){var n=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(e,t){return pS(sE(e)?n.get(e.__ref,t):e&&e[t])},this.canRead=function(e){return sE(e)?n.has(e.__ref):"object"==typeof e},this.toReference=function(e,t){if("string"==typeof e)return aE(e);if(sE(e))return e;var r=n.policies.identify(e)[0];if(r){var i=aE(r);return t&&n.merge(r,e),i}}}return e.prototype.toObject=function(){return Ig({},this.data)},e.prototype.has=function(e){return void 0!==this.lookup(e,!0)},e.prototype.get=function(e,t){if(this.group.depend(e,t),lT.call(this.data,e)){var n=this.data[e];if(n&&lT.call(n,t))return n[t]}return"__typename"===t&&lT.call(this.policies.rootTypenamesById,e)?this.policies.rootTypenamesById[e]:this instanceof ST?this.parent.get(e,t):void 0},e.prototype.lookup=function(e,t){return t&&this.group.depend(e,"__exists"),lT.call(this.data,e)?this.data[e]:this instanceof ST?this.parent.lookup(e,t):this.policies.rootTypenamesById[e]?Object.create(null):void 0},e.prototype.merge=function(e,t){var n,r=this;sE(e)&&(e=e.__ref),sE(t)&&(t=t.__ref);var i="string"==typeof e?this.lookup(n=e):e,o="string"==typeof t?this.lookup(n=t):t;if(o){__DEV__?T_("string"==typeof n,"store.merge expects a string ID"):T_("string"==typeof n,1);var a=new NE(TT).merge(i,o);if(this.data[n]=a,a!==i&&(delete this.refs[n],this.group.caching)){var s=Object.create(null);i||(s.__exists=1),Object.keys(o).forEach((function(e){if(!i||i[e]!==a[e]){s[e]=1;var t=fT(e);t===e||r.policies.hasKeyArgs(a.__typename,t)||(s[t]=1),void 0!==a[e]||r instanceof ST||delete a[e]}})),!s.__typename||i&&i.__typename||this.policies.rootTypenamesById[n]!==a.__typename||delete s.__typename,Object.keys(s).forEach((function(e){return r.group.dirty(n,e)}))}}},e.prototype.modify=function(e,t){var n=this,r=this.lookup(e);if(r){var i=Object.create(null),o=!1,a=!0,s={DELETE:yT,INVALIDATE:xT,isReference:sE,toReference:this.toReference,canRead:this.canRead,readField:function(t,r){return n.policies.readField("string"==typeof t?{fieldName:t,from:r||aE(e)}:t,{store:n})}};if(Object.keys(r).forEach((function(l){var c=fT(l),u=r[l];if(void 0!==u){var d="function"==typeof t?t:t[l]||t[c];if(d){var h=d===bT?yT:d(pS(u),Ig(Ig({},s),{fieldName:c,storeFieldName:l,storage:n.getStorage(e,l)}));h===xT?n.group.dirty(e,l):(h===yT&&(h=void 0),h!==u&&(i[l]=h,o=!0,u=h))}void 0!==u&&(a=!1)}})),o)return this.merge(e,i),a&&(this instanceof ST?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},e.prototype.delete=function(e,t,n){var r,i=this.lookup(e);if(i){var o=this.getFieldValue(i,"__typename"),a=t&&n?this.policies.getStoreFieldName({typename:o,fieldName:t,args:n}):t;return this.modify(e,a?((r={})[a]=bT,r):bT)}return!1},e.prototype.evict=function(e,t){var n=!1;return e.id&&(lT.call(this.data,e.id)&&(n=this.delete(e.id,e.fieldName,e.args)),this instanceof ST&&this!==t&&(n=this.parent.evict(e,t)||n),(e.fieldName||n)&&this.group.dirty(e.id,e.fieldName||"__exists")),n},e.prototype.clear=function(){this.replace(null)},e.prototype.extract=function(){var e=this,t=this.toObject(),n=[];return this.getRootIdSet().forEach((function(t){lT.call(e.policies.rootTypenamesById,t)||n.push(t)})),n.length&&(t.__META={extraRootIds:n.sort()}),t},e.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach((function(n){e&&lT.call(e,n)||t.delete(n)})),e){var n=e.__META,r=Og(e,["__META"]);Object.keys(r).forEach((function(e){t.merge(e,r[e])})),n&&n.extraRootIds.forEach(this.retain,this)}},e.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},e.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},e.prototype.getRootIdSet=function(e){return void 0===e&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof ST?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},e.prototype.gc=function(){var e=this,t=this.getRootIdSet(),n=this.toObject();t.forEach((function(r){lT.call(n,r)&&(Object.keys(e.findChildRefIds(r)).forEach(t.add,t),delete n[r])}));var r=Object.keys(n);if(r.length){for(var i=this;i instanceof ST;)i=i.parent;r.forEach((function(e){return i.delete(e)}))}return r},e.prototype.findChildRefIds=function(e){if(!lT.call(this.refs,e)){var t=this.refs[e]=Object.create(null),n=this.data[e];if(!n)return t;var r=new Set([n]);r.forEach((function(e){sE(e)&&(t[e.__ref]=!0),oE(e)&&Object.keys(e).forEach((function(t){var n=e[t];oE(n)&&r.add(n)}))}))}return this.refs[e]},e.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},e}(),_T=function(){function e(e,t){void 0===t&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return e.prototype.resetCaching=function(){this.d=this.caching?YC():null,this.keyMaker=new aT(gS)},e.prototype.depend=function(e,t){if(this.d){this.d(kT(e,t));var n=fT(t);n!==t&&this.d(kT(e,n)),this.parent&&this.parent.depend(e,t)}},e.prototype.dirty=function(e,t){this.d&&this.d.dirty(kT(e,t),"__exists"===t?"forget":"setDirty")},e}();function kT(e,t){return t+"#"+e}function ET(e,t){MT(e)&&e.group.depend(t,"__exists")}!function(e){var t=function(e){function t(t){var n=t.policies,r=t.resultCaching,i=void 0===r||r,o=t.seed,a=e.call(this,n,new _T(i))||this;return a.stump=new CT(a),a.storageTrie=new aT(gS),o&&a.replace(o),a}return Mg(t,e),t.prototype.addLayer=function(e,t){return this.stump.addLayer(e,t)},t.prototype.removeLayer=function(){return this},t.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},t}(e);e.Root=t}(wT||(wT={}));var ST=function(e){function t(t,n,r,i){var o=e.call(this,n.policies,i)||this;return o.id=t,o.parent=n,o.replay=r,o.group=i,r(o),o}return Mg(t,e),t.prototype.addLayer=function(e,n){return new t(e,this,n,this.group)},t.prototype.removeLayer=function(e){var t=this,n=this.parent.removeLayer(e);return e===this.id?(this.group.caching&&Object.keys(this.data).forEach((function(e){var r=t.data[e],i=n.lookup(e);i?r?r!==i&&Object.keys(r).forEach((function(n){lC(r[n],i[n])||t.group.dirty(e,n)})):(t.group.dirty(e,"__exists"),Object.keys(i).forEach((function(n){t.group.dirty(e,n)}))):t.delete(e)})),n):n===this.parent?this:n.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return Ig(Ig({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(t){var n=this.parent.findChildRefIds(t);return lT.call(this.data,t)?Ig(Ig({},n),e.prototype.findChildRefIds.call(this,t)):n},t.prototype.getStorage=function(){for(var e=this.parent;e.parent;)e=e.parent;return e.getStorage.apply(e,arguments)},t}(wT),CT=function(e){function t(t){return e.call(this,"EntityStore.Stump",t,(function(){}),new _T(t.group.caching,t.group))||this}return Mg(t,e),t.prototype.removeLayer=function(){return this},t.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},t}(ST);function TT(e,t,n){var r=e[n],i=t[n];return lC(r,i)?r:i}function MT(e){return!!(e instanceof wT&&e.group.caching)}var IT,OT,AT=function(){function e(){this.known=new(vS?WeakSet:Set),this.pool=new aT(gS),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return e.prototype.isKnown=function(e){return oE(e)&&this.known.has(e)},e.prototype.pass=function(e){if(oE(e)){var t=function(e){return oE(e)?EE(e)?e.slice(0):Ig({__proto__:Object.getPrototypeOf(e)},e):e}(e);return this.passes.set(t,e),t}return e},e.prototype.admit=function(e){var t=this;if(oE(e)){var n=this.passes.get(e);if(n)return n;switch(Object.getPrototypeOf(e)){case Array.prototype:if(this.known.has(e))return e;var r=e.map(this.admit,this);return(s=this.pool.lookupArray(r)).array||(this.known.add(s.array=r),__DEV__&&Object.freeze(r)),s.array;case null:case Object.prototype:if(this.known.has(e))return e;var i=Object.getPrototypeOf(e),o=[i],a=this.sortedKeys(e);o.push(a.json);var s,l=o.length;if(a.sorted.forEach((function(n){o.push(t.admit(e[n]))})),!(s=this.pool.lookupArray(o)).object){var c=s.object=Object.create(i);this.known.add(c),a.sorted.forEach((function(e,t){c[e]=o[l+t]})),__DEV__&&Object.freeze(c)}return s.object}}return e},e.prototype.sortedKeys=function(e){var t=Object.keys(e),n=this.pool.lookupArray(t);if(!n.keys){t.sort();var r=JSON.stringify(t);(n.keys=this.keysByJSON.get(r))||this.keysByJSON.set(r,n.keys={sorted:t,json:r})}return n.keys},e}(),PT=Object.assign((function(e){if(oE(e)){void 0===IT&&DT();var t=IT.admit(e),n=OT.get(t);return void 0===n&&OT.set(t,n=JSON.stringify(t)),n}return JSON.stringify(e)}),{reset:DT});function DT(){IT=new AT,OT=new(gS?WeakMap:Map)}function LT(e){return[e.selectionSet,e.objectOrReference,e.context,e.context.canonizeResults]}var RT=function(){function e(e){var t=this;this.knownResults=new(gS?WeakMap:Map),this.config=MS(e,{addTypename:!1!==e.addTypename,canonizeResults:hT(e)}),this.canon=e.canon||new AT,this.executeSelectionSet=QC((function(e){var n,r=e.context.canonizeResults,i=LT(e);i[3]=!r;var o=(n=t.executeSelectionSet).peek.apply(n,i);return o?r?Ig(Ig({},o),{result:t.canon.admit(o.result)}):o:(ET(e.context.store,e.enclosingRef.__ref),t.execSelectionSetImpl(e))}),{max:this.config.resultCacheMaxSize,keyArgs:LT,makeCacheKey:function(e,t,n,r){if(MT(n.store))return n.store.makeCacheKey(e,sE(t)?t.__ref:t,n.varString,r)}}),this.executeSubSelectedArray=QC((function(e){return ET(e.context.store,e.enclosingRef.__ref),t.execSubSelectedArrayImpl(e)}),{max:this.config.resultCacheMaxSize,makeCacheKey:function(e){var t=e.field,n=e.array,r=e.context;if(MT(r.store))return r.store.makeCacheKey(t,n,r.varString)}})}return e.prototype.resetCanon=function(){this.canon=new AT},e.prototype.diffQueryAgainstStore=function(e){var t=e.store,n=e.query,r=e.rootId,i=void 0===r?"ROOT_QUERY":r,o=e.variables,a=e.returnPartialData,s=void 0===a||a,l=e.canonizeResults,c=void 0===l?this.config.canonizeResults:l,u=this.config.cache.policies;o=Ig(Ig({},kE(wE(n))),o);var d,h=aE(i),p=this.executeSelectionSet({selectionSet:_E(n).selectionSet,objectOrReference:h,enclosingRef:h,context:Ig({store:t,query:n,policies:u,variables:o,varString:PT(o),canonizeResults:c},vT(n,this.config.fragments))});if(p.missing&&(d=[new tT(zT(p.missing),p.missing,n,o)],!s))throw d[0];return{result:p.result,complete:!d,missing:d}},e.prototype.isFresh=function(e,t,n,r){if(MT(r.store)&&this.knownResults.get(e)===n){var i=this.executeSelectionSet.peek(n,t,r,this.canon.isKnown(e));if(i&&e===i.result)return!0}return!1},e.prototype.execSelectionSetImpl=function(e){var t=this,n=e.selectionSet,r=e.objectOrReference,i=e.enclosingRef,o=e.context;if(sE(r)&&!o.policies.rootTypenamesById[r.__ref]&&!o.store.has(r.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(r.__ref," object")};var a,s=o.variables,l=o.policies,c=o.store.getFieldValue(r,"__typename"),u=[],d=new NE;function h(e,t){var n;return e.missing&&(a=d.merge(a,((n={})[t]=e.missing,n))),e.result}this.config.addTypename&&"string"==typeof c&&!l.rootIdsByTypename[c]&&u.push({__typename:c});var p=new Set(n.selections);p.forEach((function(e){var n,f;if(Qk(e,s))if(gE(e)){var m=l.readField({fieldName:e.name.value,field:e,variables:o.variables,from:r},o),g=fE(e);void 0===m?AE.added(e)||(a=d.merge(a,((n={})[g]="Can't find field '".concat(e.name.value,"' on ").concat(sE(r)?r.__ref+" object":"object "+JSON.stringify(r,null,2)),n))):EE(m)?m=h(t.executeSubSelectedArray({field:e,array:m,enclosingRef:i,context:o}),g):e.selectionSet?null!=m&&(m=h(t.executeSelectionSet({selectionSet:e.selectionSet,objectOrReference:m,enclosingRef:sE(m)?m:i,context:o}),g)):o.canonizeResults&&(m=t.canon.pass(m)),void 0!==m&&u.push(((f={})[g]=m,f))}else{var v=iE(e,o.lookupFragment);if(!v&&e.kind===rk.FRAGMENT_SPREAD)throw __DEV__?new C_("No fragment named ".concat(e.name.value)):new C_(5);v&&l.fragmentMatches(v,c)&&v.selectionSet.selections.forEach(p.add,p)}}));var f={result:zE(u),missing:a},m=o.canonizeResults?this.canon.admit(f):pS(f);return m.result&&this.knownResults.set(m.result,n),m},e.prototype.execSubSelectedArrayImpl=function(e){var t,n=this,r=e.field,i=e.array,o=e.enclosingRef,a=e.context,s=new NE;function l(e,n){var r;return e.missing&&(t=s.merge(t,((r={})[n]=e.missing,r))),e.result}return r.selectionSet&&(i=i.filter(a.store.canRead)),i=i.map((function(e,t){return null===e?null:EE(e)?l(n.executeSubSelectedArray({field:r,array:e,enclosingRef:o,context:a}),t):r.selectionSet?l(n.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:e,enclosingRef:sE(e)?e:o,context:a}),t):(__DEV__&&function(e,t,n){if(!t.selectionSet){var r=new Set([n]);r.forEach((function(n){oE(n)&&(__DEV__?T_(!sE(n),"Missing selection set for object of type ".concat(function(e,t){return sE(t)?e.get(t.__ref,"__typename"):t&&t.__typename}(e,n)," returned for query field ").concat(t.name.value)):T_(!sE(n),6),Object.values(n).forEach(r.add,r))}))}}(a.store,r,e),e)})),{result:a.canonizeResults?this.canon.admit(i):i,missing:t}},e}();function zT(e){try{JSON.stringify(e,(function(e,t){if("string"==typeof t)throw t;return t}))}catch(t){return t}}var jT=new SC,NT=new WeakMap;function BT(e){var t=NT.get(e);return t||NT.set(e,t={vars:new Set,dep:YC()}),t}function FT(e){BT(e).vars.forEach((function(t){return t.forgetCache(e)}))}function VT(e){var t=new Set,n=new Set,r=function(o){if(arguments.length>0){if(e!==o){e=o,t.forEach((function(e){BT(e).dep.dirty(r),function(e){e.broadcastWatches&&e.broadcastWatches()}(e)}));var a=Array.from(n);n.clear(),a.forEach((function(t){return t(e)}))}}else{var s=jT.getValue();s&&(i(s),BT(s).dep(r))}return e};r.onNextChange=function(e){return n.add(e),function(){n.delete(e)}};var i=r.attachCache=function(e){return t.add(e),BT(e).vars.add(r),r};return r.forgetCache=function(e){return t.delete(e)},r}var UT=Object.create(null);function $T(e){var t=JSON.stringify(e);return UT[t]||(UT[t]=Object.create(null))}function ZT(e){var t=$T(e);return t.keyFieldsFn||(t.keyFieldsFn=function(t,n){var r=function(e,t){return n.readField(t,e)},i=n.keyObject=WT(e,(function(e){var i=KT(n.storeObject,e,r);return void 0===i&&t!==n.storeObject&&lT.call(t,e[0])&&(i=KT(t,e,GT)),__DEV__?T_(void 0!==i,"Missing field '".concat(e.join("."),"' while extracting keyFields from ").concat(JSON.stringify(t))):T_(void 0!==i,2),i}));return"".concat(n.typename,":").concat(JSON.stringify(i))})}function HT(e){var t=$T(e);return t.keyArgsFn||(t.keyArgsFn=function(t,n){var r=n.field,i=n.variables,o=n.fieldName,a=WT(e,(function(e){var n=e[0],o=n.charAt(0);if("@"!==o)if("$"!==o){if(t)return KT(t,e)}else{var a=n.slice(1);if(i&&lT.call(i,a)){var s=e.slice(0);return s[0]=a,KT(i,s)}}else if(r&&SE(r.directives)){var l=n.slice(1),c=r.directives.find((function(e){return e.name.value===l})),u=c&&pE(c,i);return u&&KT(u,e.slice(1))}})),s=JSON.stringify(a);return(t||"{}"!==s)&&(o+=":"+s),o})}function WT(e,t){var n=new NE;return qT(e).reduce((function(e,r){var i,o=t(r);if(void 0!==o){for(var a=r.length-1;a>=0;--a)(i={})[r[a]]=o,o=i;e=n.merge(e,o)}return e}),Object.create(null))}function qT(e){var t=$T(e);if(!t.paths){var n=t.paths=[],r=[];e.forEach((function(t,i){EE(t)?(qT(t).forEach((function(e){return n.push(r.concat(e))})),r.length=0):(r.push(t),EE(e[i+1])||(n.push(r.slice(0)),r.length=0))}))}return t.paths}function GT(e,t){return e[t]}function KT(e,t,n){return n=n||GT,YT(t.reduce((function e(t,r){return EE(t)?t.map((function(t){return e(t,r)})):t&&n(t,r)}),e))}function YT(e){return oE(e)?EE(e)?e.map(YT):WT(Object.keys(e).sort(),(function(t){return KT(e,t)})):e}function XT(e){return void 0!==e.args?e.args:e.field?pE(e.field,e.variables):null}uE.setStringify(PT);var JT=function(){},QT=function(e,t){return t.fieldName},eM=function(e,t,n){return(0,n.mergeObjects)(e,t)},tM=function(e,t){return t},nM=function(){function e(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=Ig({dataIdFromObject:uT},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return e.prototype.identify=function(e,t){var n,r=this,i=t&&(t.typename||(null===(n=t.storeObject)||void 0===n?void 0:n.__typename))||e.__typename;if(i===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var o,a=t&&t.storeObject||e,s=Ig(Ig({},t),{typename:i,storeObject:a,readField:t&&t.readField||function(){var e=iM(arguments,a);return r.readField(e,{store:r.cache.data,variables:e.variables})}}),l=i&&this.getTypePolicy(i),c=l&&l.keyFn||this.config.dataIdFromObject;c;){var u=c(Ig(Ig({},e),a),s);if(!EE(u)){o=u;break}c=ZT(u)}return o=o?String(o):void 0,s.keyObject?[o,s.keyObject]:[o]},e.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],i=r.queryType,o=r.mutationType,a=r.subscriptionType,s=Og(r,["queryType","mutationType","subscriptionType"]);i&&t.setRootTypename("Query",n),o&&t.setRootTypename("Mutation",n),a&&t.setRootTypename("Subscription",n),lT.call(t.toBeAdded,n)?t.toBeAdded[n].push(s):t.toBeAdded[n]=[s]}))},e.prototype.updateTypePolicy=function(e,t){var n=this,r=this.getTypePolicy(e),i=t.keyFields,o=t.fields;function a(e,t){e.merge="function"==typeof t?t:!0===t?eM:!1===t?tM:e.merge}a(r,t.merge),r.keyFn=!1===i?JT:EE(i)?ZT(i):"function"==typeof i?i:r.keyFn,o&&Object.keys(o).forEach((function(t){var r=n.getFieldPolicy(e,t,!0),i=o[t];if("function"==typeof i)r.read=i;else{var s=i.keyArgs,l=i.read,c=i.merge;r.keyFn=!1===s?QT:EE(s)?HT(s):"function"==typeof s?s:r.keyFn,"function"==typeof l&&(r.read=l),a(r,c)}r.read&&r.merge&&(r.keyFn=r.keyFn||QT)}))},e.prototype.setRootTypename=function(e,t){void 0===t&&(t=e);var n="ROOT_"+e.toUpperCase(),r=this.rootTypenamesById[n];t!==r&&(__DEV__?T_(!r||r===e,"Cannot change root ".concat(e," __typename more than once")):T_(!r||r===e,3),r&&delete this.rootIdsByTypename[r],this.rootIdsByTypename[t]=n,this.rootTypenamesById[n]=t)},e.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach((function(n){t.getSupertypeSet(n,!0),e[n].forEach((function(e){t.getSupertypeSet(e,!0).add(n);var r=e.match(pT);r&&r[0]===e||t.fuzzySubtypes.set(e,new RegExp(e))}))}))},e.prototype.getTypePolicy=function(e){var t=this;if(!lT.call(this.typePolicies,e)){var n=this.typePolicies[e]=Object.create(null);n.fields=Object.create(null);var r=this.supertypeMap.get(e);r&&r.size&&r.forEach((function(e){var r=t.getTypePolicy(e),i=r.fields,o=Og(r,["fields"]);Object.assign(n,o),Object.assign(n.fields,i)}))}var i=this.toBeAdded[e];return i&&i.length&&i.splice(0).forEach((function(n){t.updateTypePolicy(e,n)})),this.typePolicies[e]},e.prototype.getFieldPolicy=function(e,t,n){if(e){var r=this.getTypePolicy(e).fields;return r[t]||n&&(r[t]=Object.create(null))}},e.prototype.getSupertypeSet=function(e,t){var n=this.supertypeMap.get(e);return!n&&t&&this.supertypeMap.set(e,n=new Set),n},e.prototype.fragmentMatches=function(e,t,n,r){var i=this;if(!e.typeCondition)return!0;if(!t)return!1;var o=e.typeCondition.name.value;if(t===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var a=this.getSupertypeSet(t,!0),s=[a],l=function(e){var t=i.getSupertypeSet(e,!1);t&&t.size&&s.indexOf(t)<0&&s.push(t)},c=!(!n||!this.fuzzySubtypes.size),u=!1,d=0;d<s.length;++d){var h=s[d];if(h.has(o))return a.has(o)||(u&&__DEV__&&T_.warn("Inferring subtype ".concat(t," of supertype ").concat(o)),a.add(o)),!0;h.forEach(l),c&&d===s.length-1&&mT(e.selectionSet,n,r)&&(c=!1,u=!0,this.fuzzySubtypes.forEach((function(e,n){var r=t.match(e);r&&r[0]===t&&l(n)})))}return!1},e.prototype.hasKeyArgs=function(e,t){var n=this.getFieldPolicy(e,t,!1);return!(!n||!n.keyFn)},e.prototype.getStoreFieldName=function(e){var t,n=e.typename,r=e.fieldName,i=this.getFieldPolicy(n,r,!1),o=i&&i.keyFn;if(o&&n)for(var a={typename:n,fieldName:r,field:e.field||null,variables:e.variables},s=XT(e);o;){var l=o(s,a);if(!EE(l)){t=l||r;break}o=HT(l)}return void 0===t&&(t=e.field?function(e,t){var n=null;e.directives&&(n={},e.directives.forEach((function(e){n[e.name.value]={},e.arguments&&e.arguments.forEach((function(r){var i=r.name,o=r.value;return lE(n[e.name.value],i,o,t)}))})));var r=null;return e.arguments&&e.arguments.length&&(r={},e.arguments.forEach((function(e){var n=e.name,i=e.value;return lE(r,n,i,t)}))),uE(e.name.value,r,n)}(e.field,e.variables):uE(r,XT(e))),!1===t?r:r===fT(t)?t:r+":"+t},e.prototype.readField=function(e,t){var n=e.from;if(n&&(e.field||e.fieldName)){if(void 0===e.typename){var r=t.store.getFieldValue(n,"__typename");r&&(e.typename=r)}var i=this.getStoreFieldName(e),o=fT(i),a=t.store.getFieldValue(n,i),s=this.getFieldPolicy(e.typename,o,!1),l=s&&s.read;if(l){var c=rM(this,n,e,t,t.store.getStorage(sE(n)?n.__ref:n,i));return jT.withValue(this.cache,l,[a,c])}return a}},e.prototype.getReadFunction=function(e,t){var n=this.getFieldPolicy(e,t,!1);return n&&n.read},e.prototype.getMergeFunction=function(e,t,n){var r=this.getFieldPolicy(e,t,!1),i=r&&r.merge;return!i&&n&&(i=(r=this.getTypePolicy(n))&&r.merge),i},e.prototype.runMergeFunction=function(e,t,n,r,i){var o=n.field,a=n.typename,s=n.merge;return s===eM?oM(r.store)(e,t):s===tM?t:(r.overwrite&&(e=void 0),s(e,t,rM(this,void 0,{typename:a,fieldName:o.name.value,field:o,variables:r.variables},r,i||Object.create(null))))},e}();function rM(e,t,n,r,i){var o=e.getStoreFieldName(n),a=fT(o),s=n.variables||r.variables,l=r.store,c=l.toReference,u=l.canRead;return{args:XT(n),field:n.field||null,fieldName:a,storeFieldName:o,variables:s,isReference:sE,toReference:c,storage:i,cache:e.cache,canRead:u,readField:function(){return e.readField(iM(arguments,t,s),r)},mergeObjects:oM(r.store)}}function iM(e,t,n){var r,i,o,a=e[0],s=e[1],l=e.length;return"string"==typeof a?r={fieldName:a,from:l>1?s:t}:(r=Ig({},a),lT.call(r,"from")||(r.from=t)),__DEV__&&void 0===r.from&&__DEV__&&T_.warn("Undefined 'from' passed to readField with arguments ".concat((i=Array.from(e),o=OS("stringifyForDisplay"),JSON.stringify(i,(function(e,t){return void 0===t?o:t})).split(JSON.stringify(o)).join("<undefined>")))),void 0===r.variables&&(r.variables=n),r}function oM(e){return function(t,n){if(EE(t)||EE(n))throw __DEV__?new C_("Cannot automatically merge arrays"):new C_(4);if(oE(t)&&oE(n)){var r=e.getFieldValue(t,"__typename"),i=e.getFieldValue(n,"__typename");if(r&&i&&r!==i)return n;if(sE(t)&&gT(n))return e.merge(t.__ref,n),t;if(gT(t)&&sE(n))return e.merge(t,n.__ref),n;if(gT(t)&&gT(n))return Ig(Ig({},t),n)}return n}}function aM(e,t,n){var r="".concat(t).concat(n),i=e.flavors.get(r);return i||e.flavors.set(r,i=e.clientOnly===t&&e.deferred===n?e:Ig(Ig({},e),{clientOnly:t,deferred:n})),i}var sM=function(){function e(e,t,n){this.cache=e,this.reader=t,this.fragments=n}return e.prototype.writeToStore=function(e,t){var n=this,r=t.query,i=t.result,o=t.dataId,a=t.variables,s=t.overwrite,l=yE(r),c=new NE;a=Ig(Ig({},kE(l)),a);var u=Ig(Ig({store:e,written:Object.create(null),merge:function(e,t){return c.merge(e,t)},variables:a,varString:PT(a)},vT(r,this.fragments)),{overwrite:!!s,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),d=this.processSelectionSet({result:i||Object.create(null),dataId:o,selectionSet:l.selectionSet,mergeTree:{map:new Map},context:u});if(!sE(d))throw __DEV__?new C_("Could not identify object ".concat(JSON.stringify(i))):new C_(7);return u.incomingById.forEach((function(t,r){var i=t.storeObject,o=t.mergeTree,a=t.fieldNodeSet,s=aE(r);if(o&&o.map.size){var l=n.applyMerges(o,s,i,u);if(sE(l))return;i=l}if(__DEV__&&!u.overwrite){var c=Object.create(null);a.forEach((function(e){e.selectionSet&&(c[e.name.value]=!0)})),Object.keys(i).forEach((function(e){(function(e){return!0===c[fT(e)]})(e)&&!function(e){var t=o&&o.map.get(e);return Boolean(t&&t.info&&t.info.merge)}(e)&&function(e,t,n,r){var i=function(e){var t=r.getFieldValue(e,n);return"object"==typeof t&&t},o=i(e);if(o){var a=i(t);if(a&&!sE(o)&&!lC(o,a)&&!Object.keys(o).every((function(e){return void 0!==r.getFieldValue(a,e)}))){var s=r.getFieldValue(e,"__typename")||r.getFieldValue(t,"__typename"),l=fT(n),c="".concat(s,".").concat(l);if(!fM.has(c)){fM.add(c);var u=[];EE(o)||EE(a)||[o,a].forEach((function(e){var t=r.getFieldValue(e,"__typename");"string"!=typeof t||u.includes(t)||u.push(t)})),__DEV__&&T_.warn("Cache data may be lost when replacing the ".concat(l," field of a ").concat(s," object.\n\nThis could cause additional (usually avoidable) network requests to fetch data that were otherwise cached.\n\nTo address this problem (which is not a bug in Apollo Client), ").concat(u.length?"either ensure all objects of type "+u.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(c," field, so InMemoryCache can safely merge these objects:\n\n  existing: ").concat(JSON.stringify(o).slice(0,1e3),"\n  incoming: ").concat(JSON.stringify(a).slice(0,1e3),"\n\nFor more information about these options, please refer to the documentation:\n\n  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers\n  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects\n"))}}}}(s,i,e,u.store)}))}e.merge(r,i)})),e.retain(d.__ref),d},e.prototype.processSelectionSet=function(e){var t=this,n=e.dataId,r=e.result,i=e.selectionSet,o=e.context,a=e.mergeTree,s=this.cache.policies,l=Object.create(null),c=n&&s.rootTypenamesById[n]||mE(r,i,o.fragmentMap)||n&&o.store.get(n,"__typename");"string"==typeof c&&(l.__typename=c);var u=function(){var e=iM(arguments,l,o.variables);if(sE(e.from)){var t=o.incomingById.get(e.from.__ref);if(t){var n=s.readField(Ig(Ig({},e),{from:t.storeObject}),o);if(void 0!==n)return n}}return s.readField(e,o)},d=new Set;this.flattenFields(i,r,o,c).forEach((function(e,n){var i,o=fE(n),h=r[o];if(d.add(n),void 0!==h){var p=s.getStoreFieldName({typename:c,fieldName:n.name.value,field:n,variables:e.variables}),f=cM(a,p),m=t.processFieldValue(h,n,n.selectionSet?aM(e,!1,!1):e,f),g=void 0;n.selectionSet&&(sE(m)||gT(m))&&(g=u("__typename",m));var v=s.getMergeFunction(c,n.name.value,g);v?f.info={field:n,typename:c,merge:v}:hM(a,p),l=e.merge(l,((i={})[p]=m,i))}else!__DEV__||e.clientOnly||e.deferred||AE.added(n)||s.getReadFunction(c,n.name.value)||__DEV__&&T_.error("Missing field '".concat(fE(n),"' while writing result ").concat(JSON.stringify(r,null,2)).substring(0,1e3))}));try{var h=s.identify(r,{typename:c,selectionSet:i,fragmentMap:o.fragmentMap,storeObject:l,readField:u}),p=h[0],f=h[1];n=n||p,f&&(l=o.merge(l,f))}catch($A){if(!n)throw $A}if("string"==typeof n){var m=aE(n),g=o.written[n]||(o.written[n]=[]);if(g.indexOf(i)>=0)return m;if(g.push(i),this.reader&&this.reader.isFresh(r,m,i,o))return m;var v=o.incomingById.get(n);return v?(v.storeObject=o.merge(v.storeObject,l),v.mergeTree=uM(v.mergeTree,a),d.forEach((function(e){return v.fieldNodeSet.add(e)}))):o.incomingById.set(n,{storeObject:l,mergeTree:dM(a)?void 0:a,fieldNodeSet:d}),m}return l},e.prototype.processFieldValue=function(e,t,n,r){var i=this;return t.selectionSet&&null!==e?EE(e)?e.map((function(e,o){var a=i.processFieldValue(e,t,n,cM(r,o));return hM(r,o),a})):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:n,mergeTree:r}):__DEV__?uS(e):e},e.prototype.flattenFields=function(e,t,n,r){void 0===r&&(r=mE(t,e,n.fragmentMap));var i=new Map,o=this.cache.policies,a=new aT(!1);return function e(s,l){var c=a.lookup(s,l.clientOnly,l.deferred);c.visited||(c.visited=!0,s.selections.forEach((function(a){if(Qk(a,n.variables)){var s=l.clientOnly,c=l.deferred;if(s&&c||!SE(a.directives)||a.directives.forEach((function(e){var t=e.name.value;if("client"===t&&(s=!0),"defer"===t){var r=pE(e,n.variables);r&&!1===r.if||(c=!0)}})),gE(a)){var u=i.get(a);u&&(s=s&&u.clientOnly,c=c&&u.deferred),i.set(a,aM(n,s,c))}else{var d=iE(a,n.lookupFragment);if(!d&&a.kind===rk.FRAGMENT_SPREAD)throw __DEV__?new C_("No fragment named ".concat(a.name.value)):new C_(8);d&&o.fragmentMatches(d,r,t,n.variables)&&e(d.selectionSet,aM(n,s,c))}}})))}(e,n),i},e.prototype.applyMerges=function(e,t,n,r,i){var o,a=this;if(e.map.size&&!sE(n)){var s,l=EE(n)||!sE(t)&&!gT(t)?void 0:t,c=n;l&&!i&&(i=[sE(l)?l.__ref:l]);var u=function(e,t){return EE(e)?"number"==typeof t?e[t]:void 0:r.store.getFieldValue(e,String(t))};e.map.forEach((function(e,t){var n=u(l,t),o=u(c,t);if(void 0!==o){i&&i.push(t);var d=a.applyMerges(e,n,o,r,i);d!==o&&(s=s||new Map).set(t,d),i&&T_(i.pop()===t)}})),s&&(n=EE(c)?c.slice(0):Ig({},c),s.forEach((function(e,t){n[t]=e})))}return e.info?this.cache.policies.runMergeFunction(t,n,e.info,r,i&&(o=r.store).getStorage.apply(o,i)):n},e}(),lM=[];function cM(e,t){var n=e.map;return n.has(t)||n.set(t,lM.pop()||{map:new Map}),n.get(t)}function uM(e,t){if(e===t||!t||dM(t))return e;if(!e||dM(e))return t;var n=e.info&&t.info?Ig(Ig({},e.info),t.info):e.info||t.info,r=e.map.size&&t.map.size,i={info:n,map:r?new Map:e.map.size?e.map:t.map};if(r){var o=new Set(t.map.keys());e.map.forEach((function(e,n){i.map.set(n,uM(e,t.map.get(n))),o.delete(n)})),o.forEach((function(n){i.map.set(n,uM(t.map.get(n),e.map.get(n)))}))}return i}function dM(e){return!e||!(e.info||e.map.size)}function hM(e,t){var n=e.map,r=n.get(t);r&&dM(r)&&(lM.push(r),n.delete(t))}var pM,fM=new Set,mM=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.watches=new Set,n.typenameDocumentCache=new Map,n.makeVar=VT,n.txCount=0,n.config=function(e){return MS(dT,e)}(t),n.addTypename=!!n.config.addTypename,n.policies=new nM({cache:n,dataIdFromObject:n.config.dataIdFromObject,possibleTypes:n.config.possibleTypes,typePolicies:n.config.typePolicies}),n.init(),n}return Mg(t,e),t.prototype.init=function(){var e=this.data=new wT.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=e.stump,this.resetResultCache()},t.prototype.resetResultCache=function(e){var t=this,n=this.storeReader,r=this.config.fragments;this.storeWriter=new sM(this,this.storeReader=new RT({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:hT(this.config),canon:e?void 0:n&&n.canon,fragments:r}),r),this.maybeBroadcastWatch=QC((function(e,n){return t.broadcastWatch(e,n)}),{max:this.config.resultCacheMaxSize,makeCacheKey:function(e){var n=e.optimistic?t.optimisticData:t.data;if(MT(n)){var r=e.optimistic,i=e.id,o=e.variables;return n.makeCacheKey(e.query,e.callback,PT({optimistic:r,id:i,variables:o}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach((function(e){return e.resetCaching()}))},t.prototype.restore=function(e){return this.init(),e&&this.data.replace(e),this},t.prototype.extract=function(e){return void 0===e&&(e=!1),(e?this.optimisticData:this.data).extract()},t.prototype.read=function(e){var t=e.returnPartialData,n=void 0!==t&&t;try{return this.storeReader.diffQueryAgainstStore(Ig(Ig({},e),{store:e.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:n})).result||null}catch($A){if($A instanceof tT)return null;throw $A}},t.prototype.write=function(e){try{return++this.txCount,this.storeWriter.writeToStore(this.data,e)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.modify=function(e){if(lT.call(e,"id")&&!e.id)return!1;var t=e.optimistic?this.optimisticData:this.data;try{return++this.txCount,t.modify(e.id||"ROOT_QUERY",e.fields)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.diff=function(e){return this.storeReader.diffQueryAgainstStore(Ig(Ig({},e),{store:e.optimistic?this.optimisticData:this.data,rootId:e.id||"ROOT_QUERY",config:this.config}))},t.prototype.watch=function(e){var t=this;return this.watches.size||function(e){BT(e).vars.forEach((function(t){return t.attachCache(e)}))}(this),this.watches.add(e),e.immediate&&this.maybeBroadcastWatch(e),function(){t.watches.delete(e)&&!t.watches.size&&FT(t),t.maybeBroadcastWatch.forget(e)}},t.prototype.gc=function(e){PT.reset();var t=this.optimisticData.gc();return e&&!this.txCount&&(e.resetResultCache?this.resetResultCache(e.resetResultIdentities):e.resetResultIdentities&&this.storeReader.resetCanon()),t},t.prototype.retain=function(e,t){return(t?this.optimisticData:this.data).retain(e)},t.prototype.release=function(e,t){return(t?this.optimisticData:this.data).release(e)},t.prototype.identify=function(e){if(sE(e))return e.__ref;try{return this.policies.identify(e)[0]}catch($A){__DEV__&&T_.warn($A)}},t.prototype.evict=function(e){if(!e.id){if(lT.call(e,"id"))return!1;e=Ig(Ig({},e),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(e,this.data)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.reset=function(e){var t=this;return this.init(),PT.reset(),e&&e.discardWatches?(this.watches.forEach((function(e){return t.maybeBroadcastWatch.forget(e)})),this.watches.clear(),FT(this)):this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){var t=this.optimisticData.removeLayer(e);t!==this.optimisticData&&(this.optimisticData=t,this.broadcastWatches())},t.prototype.batch=function(e){var t,n=this,r=e.update,i=e.optimistic,o=void 0===i||i,a=e.removeOptimistic,s=e.onWatchUpdated,l=function(e){var i=n,o=i.data,a=i.optimisticData;++n.txCount,e&&(n.data=n.optimisticData=e);try{return t=r(n)}finally{--n.txCount,n.data=o,n.optimisticData=a}},c=new Set;return s&&!this.txCount&&this.broadcastWatches(Ig(Ig({},e),{onWatchUpdated:function(e){return c.add(e),!1}})),"string"==typeof o?this.optimisticData=this.optimisticData.addLayer(o,l):!1===o?l(this.data):l(),"string"==typeof a&&(this.optimisticData=this.optimisticData.removeLayer(a)),s&&c.size?(this.broadcastWatches(Ig(Ig({},e),{onWatchUpdated:function(e,t){var n=s.call(this,e,t);return!1!==n&&c.delete(e),n}})),c.size&&c.forEach((function(e){return n.maybeBroadcastWatch.dirty(e)}))):this.broadcastWatches(e),t},t.prototype.performTransaction=function(e,t){return this.batch({update:e,optimistic:t||null!==t})},t.prototype.transformDocument=function(e){if(this.addTypename){var t=this.typenameDocumentCache.get(e);return t||(t=AE(e),this.typenameDocumentCache.set(e,t),this.typenameDocumentCache.set(t,t)),t}return e},t.prototype.transformForLink=function(e){var t=this.config.fragments;return t?t.transform(e):e},t.prototype.broadcastWatches=function(e){var t=this;this.txCount||this.watches.forEach((function(n){return t.maybeBroadcastWatch(n,e)}))},t.prototype.broadcastWatch=function(e,t){var n=e.lastDiff,r=this.diff(e);t&&(e.optimistic&&"string"==typeof t.optimistic&&(r.fromOptimisticTransaction=!0),t.onWatchUpdated&&!1===t.onWatchUpdated.call(this,e,r,n))||n&&lC(n.result,r.result)||e.callback(e.lastDiff=r,n)},t}(eT);function gM(e){return!!e&&e<7}!function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"}(pM||(pM={}));var vM=Object.assign,yM=Object.hasOwnProperty,bM=function(e){function t(t){var n=t.queryManager,r=t.queryInfo,i=t.options,o=e.call(this,(function(e){try{var n=e._subscription._observer;n&&!n.error&&(n.error=wM)}catch(t){}var r=!o.observers.size;o.observers.add(e);var i=o.last;return i&&i.error?e.error&&e.error(i.error):i&&i.result&&e.next&&e.next(i.result),r&&o.reobserve().catch((function(){})),function(){o.observers.delete(e)&&!o.observers.size&&o.tearDownQuery()}}))||this;o.observers=new Set,o.subscriptions=new Set,o.queryInfo=r,o.queryManager=n,o.waitForOwnResult=kM(i.fetchPolicy),o.isTornDown=!1;var a=n.defaultOptions.watchQuery,s=(void 0===a?{}:a).fetchPolicy,l=void 0===s?"cache-first":s,c=i.fetchPolicy,u=void 0===c?l:c,d=i.initialFetchPolicy,h=void 0===d?"standby"===u?l:u:d;o.options=Ig(Ig({},i),{initialFetchPolicy:h,fetchPolicy:u}),o.queryId=r.queryId||n.generateQueryId();var p=yE(o.query);return o.queryName=p&&p.name&&p.name.value,o}return Mg(t,e),Object.defineProperty(t.prototype,"query",{get:function(){return this.queryManager.transform(this.options.query).document},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var e=this;return new Promise((function(t,n){var r={next:function(n){t(n),e.observers.delete(r),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout((function(){i.unsubscribe()}),0)},error:n},i=e.subscribe(r)}))},t.prototype.getCurrentResult=function(e){void 0===e&&(e=!0);var t=this.getLastResult(!0),n=this.queryInfo.networkStatus||t&&t.networkStatus||pM.ready,r=Ig(Ig({},t),{loading:gM(n),networkStatus:n}),i=this.options.fetchPolicy,o=void 0===i?"cache-first":i;if(kM(o)||this.queryManager.transform(this.options.query).hasForcedResolvers);else if(this.waitForOwnResult)this.queryInfo.updateWatch();else{var a=this.queryInfo.getDiff();(a.complete||this.options.returnPartialData)&&(r.data=a.result),lC(r.data,{})&&(r.data=void 0),a.complete?(delete r.partial,!a.complete||r.networkStatus!==pM.loading||"cache-first"!==o&&"cache-only"!==o||(r.networkStatus=pM.ready,r.loading=!1)):r.partial=!0,!__DEV__||a.complete||this.options.partialRefetch||r.loading||r.data||r.error||_M(a.missing)}return e&&this.updateLastResult(r),r},t.prototype.isDifferentFromLastResult=function(e,t){return!this.last||!lC(this.last.result,e)||t&&!lC(this.last.variables,t)},t.prototype.getLast=function(e,t){var n=this.last;if(n&&n[e]&&(!t||lC(n.variables,this.variables)))return n[e]},t.prototype.getLastResult=function(e){return this.getLast("result",e)},t.prototype.getLastError=function(e){return this.getLast("error",e)},t.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(e){var t,n={pollInterval:0},r=this.options.fetchPolicy;if(n.fetchPolicy="cache-and-network"===r?r:"no-cache"===r?"no-cache":"network-only",__DEV__&&e&&yM.call(e,"variables")){var i=wE(this.query),o=i.variableDefinitions;o&&o.some((function(e){return"variables"===e.variable.name.value}))||__DEV__&&T_.warn("Called refetch(".concat(JSON.stringify(e),") for query ").concat((null===(t=i.name)||void 0===t?void 0:t.value)||JSON.stringify(i),", which does not declare a $variables variable.\nDid you mean to call refetch(variables) instead of refetch({ variables })?"))}return e&&!lC(this.options.variables,e)&&(n.variables=this.options.variables=Ig(Ig({},this.options.variables),e)),this.queryInfo.resetLastWrite(),this.reobserve(n,pM.refetch)},t.prototype.fetchMore=function(e){var t=this,n=Ig(Ig({},e.query?e:Ig(Ig(Ig(Ig({},this.options),{query:this.query}),e),{variables:Ig(Ig({},this.options.variables),e.variables)})),{fetchPolicy:"no-cache"}),r=this.queryManager.generateQueryId(),i=this.queryInfo,o=i.networkStatus;i.networkStatus=pM.fetchMore,n.notifyOnNetworkStatusChange&&this.observe();var a=new Set;return this.queryManager.fetchQuery(r,n,pM.fetchMore).then((function(s){return t.queryManager.removeQuery(r),i.networkStatus===pM.fetchMore&&(i.networkStatus=o),t.queryManager.cache.batch({update:function(r){var i=e.updateQuery;i?r.updateQuery({query:t.query,variables:t.variables,returnPartialData:!0,optimistic:!1},(function(e){return i(e,{fetchMoreResult:s.data,variables:n.variables})})):r.writeQuery({query:n.query,variables:n.variables,data:s.data})},onWatchUpdated:function(e){a.add(e.query)}}),s})).finally((function(){a.has(t.query)||xM(t)}))},t.prototype.subscribeToMore=function(e){var t=this,n=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables,context:e.context}).subscribe({next:function(n){var r=e.updateQuery;r&&t.updateQuery((function(e,t){var i=t.variables;return r(e,{subscriptionData:n,variables:i})}))},error:function(t){e.onError?e.onError(t):__DEV__&&T_.error("Unhandled GraphQL subscription error",t)}});return this.subscriptions.add(n),function(){t.subscriptions.delete(n)&&n.unsubscribe()}},t.prototype.setOptions=function(e){return this.reobserve(e)},t.prototype.setVariables=function(e){return lC(this.variables,e)?this.observers.size?this.result():Promise.resolve():(this.options.variables=e,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:e},pM.setVariables):Promise.resolve())},t.prototype.updateQuery=function(e){var t=this.queryManager,n=e(t.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,{variables:this.variables});n&&(t.cache.writeQuery({query:this.options.query,data:n,variables:this.variables}),t.broadcastQueries())},t.prototype.startPolling=function(e){this.options.pollInterval=e,this.updatePolling()},t.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},t.prototype.applyNextFetchPolicy=function(e,t){if(t.nextFetchPolicy){var n=t.fetchPolicy,r=void 0===n?"cache-first":n,i=t.initialFetchPolicy,o=void 0===i?r:i;"standby"===r||("function"==typeof t.nextFetchPolicy?t.fetchPolicy=t.nextFetchPolicy(r,{reason:e,options:t,observable:this,initialFetchPolicy:o}):t.fetchPolicy="variables-changed"===e?o:t.nextFetchPolicy)}return t.fetchPolicy},t.prototype.fetch=function(e,t){return this.queryManager.setObservableQuery(this),this.queryManager.fetchConcastWithInfo(this.queryId,e,t)},t.prototype.updatePolling=function(){var e=this;if(!this.queryManager.ssrMode){var t=this.pollingInfo,n=this.options.pollInterval;if(n){if(!t||t.interval!==n){__DEV__?T_(n,"Attempted to start a polling query without a polling interval."):T_(n,13),(t||(this.pollingInfo={})).interval=n;var r=function(){e.pollingInfo&&(gM(e.queryInfo.networkStatus)?i():e.reobserve({fetchPolicy:"no-cache"===e.options.initialFetchPolicy?"no-cache":"network-only"},pM.poll).then(i,i))},i=function(){var t=e.pollingInfo;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(r,t.interval))};i()}}else t&&(clearTimeout(t.timeout),delete this.pollingInfo)}},t.prototype.updateLastResult=function(e,t){return void 0===t&&(t=this.variables),this.last=Ig(Ig({},this.last),{result:this.queryManager.assumeImmutableResults?e:uS(e),variables:t}),SE(e.errors)||delete this.last.error,this.last},t.prototype.reobserveAsConcast=function(e,t){var n=this;this.isTornDown=!1;var r=t===pM.refetch||t===pM.fetchMore||t===pM.poll,i=this.options.variables,o=this.options.fetchPolicy,a=MS(this.options,e||{}),s=r?a:vM(this.options,a);r||(this.updatePolling(),e&&e.variables&&!lC(e.variables,i)&&"standby"!==s.fetchPolicy&&s.fetchPolicy===o&&(this.applyNextFetchPolicy("variables-changed",s),void 0===t&&(t=pM.setVariables))),this.waitForOwnResult&&(this.waitForOwnResult=kM(s.fetchPolicy));var l=function(){n.concast===d&&(n.waitForOwnResult=!1)},c=s.variables&&Ig({},s.variables),u=this.fetch(s,t),d=u.concast,h=u.fromLink,p={next:function(e){l(),n.reportResult(e,c)},error:function(e){l(),n.reportError(e,c)}};return!r&&h&&(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=d,this.observer=p),d.addObserver(p),d},t.prototype.reobserve=function(e,t){return this.reobserveAsConcast(e,t).promise},t.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},t.prototype.reportResult=function(e,t){var n=this.getLastError();(n||this.isDifferentFromLastResult(e,t))&&((n||!e.partial||this.options.returnPartialData)&&this.updateLastResult(e,t),fS(this.observers,"next",e))},t.prototype.reportError=function(e,t){var n=Ig(Ig({},this.getLastResult()),{error:e,errors:e.graphQLErrors,networkStatus:pM.error,loading:!1});this.updateLastResult(n,t),fS(this.observers,"error",this.last.error=e)},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t}(aS);function xM(e){var t=e.options,n=t.fetchPolicy,r=t.nextFetchPolicy;return"cache-and-network"===n||"network-only"===n?e.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(){return this.nextFetchPolicy=r,"function"==typeof r?r.apply(this,arguments):n}}):e.reobserve()}function wM(e){__DEV__&&T_.error("Unhandled error",e.message,e.stack)}function _M(e){__DEV__&&e&&__DEV__&&T_.debug("Missing cache result fields: ".concat(JSON.stringify(e)),e)}function kM(e){return"network-only"===e||"no-cache"===e||"standby"===e}xS(bM);var EM=function(){function e(e){var t=e.cache,n=e.client,r=e.resolvers,i=e.fragmentMatcher;this.selectionsToResolveCache=new WeakMap,this.cache=t,n&&(this.client=n),r&&this.addResolvers(r),i&&this.setFragmentMatcher(i)}return e.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach((function(e){t.resolvers=RE(t.resolvers,e)})):this.resolvers=RE(this.resolvers,e)},e.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(e){var t=e.document,n=e.remoteResult,r=e.context,i=e.variables,o=e.onlyRunForcedResolvers,a=void 0!==o&&o;return Ag(this,void 0,void 0,(function(){return Pg(this,(function(e){return t?[2,this.resolveDocument(t,n.data,r,i,this.fragmentMatcher,a).then((function(e){return Ig(Ig({},n),{data:e.result})}))]:[2,n]}))}))},e.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(e){return eE(["client"],e)&&this.resolvers?e:null},e.prototype.serverQuery=function(e){return function(e){return vE(e),OE([{test:function(e){return"client"===e.name.value},remove:!0}],e)}(e)},e.prototype.prepareContext=function(e){var t=this.cache;return Ig(Ig({},e),{cache:t,getCacheKey:function(e){return t.identify(e)}})},e.prototype.addExportedVariables=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),Ag(this,void 0,void 0,(function(){return Pg(this,(function(r){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,t)||{},this.prepareContext(n),t).then((function(e){return Ig(Ig({},t),e.exportedVariables)}))]:[2,Ig({},t)]}))}))},e.prototype.shouldForceResolvers=function(e){var t=!1;return $k(e,{Directive:{enter:function(e){if("client"===e.name.value&&e.arguments&&(t=e.arguments.some((function(e){return"always"===e.name.value&&"BooleanValue"===e.value.kind&&!0===e.value.value}))))return Uk}}}),t},e.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:DE(e),variables:t,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(e,t,n,r,i,o){return void 0===n&&(n={}),void 0===r&&(r={}),void 0===i&&(i=function(){return!0}),void 0===o&&(o=!1),Ag(this,void 0,void 0,(function(){var a,s,l,c,u,d,h,p,f,m;return Pg(this,(function(g){return a=_E(e),s=xE(e),l=rE(s),c=this.collectSelectionsToResolve(a,l),u=a.operation,d=u?u.charAt(0).toUpperCase()+u.slice(1):"Query",p=(h=this).cache,f=h.client,m={fragmentMap:l,context:Ig(Ig({},n),{cache:p,client:f}),variables:r,fragmentMatcher:i,defaultOperationType:d,exportedVariables:{},selectionsToResolve:c,onlyRunForcedResolvers:o},[2,this.resolveSelectionSet(a.selectionSet,!1,t,m).then((function(e){return{result:e,exportedVariables:m.exportedVariables}}))]}))}))},e.prototype.resolveSelectionSet=function(e,t,n,r){return Ag(this,void 0,void 0,(function(){var i,o,a,s,l,c=this;return Pg(this,(function(u){return i=r.fragmentMap,o=r.context,a=r.variables,s=[n],l=function(e){return Ag(c,void 0,void 0,(function(){var l,c;return Pg(this,(function(u){return(t||r.selectionsToResolve.has(e))&&Qk(e,a)?gE(e)?[2,this.resolveField(e,t,n,r).then((function(t){var n;void 0!==t&&s.push(((n={})[fE(e)]=t,n))}))]:(function(e){return"InlineFragment"===e.kind}(e)?l=e:(l=i[e.name.value],__DEV__?T_(l,"No fragment named ".concat(e.name.value)):T_(l,11)),l&&l.typeCondition&&(c=l.typeCondition.name.value,r.fragmentMatcher(n,c,o))?[2,this.resolveSelectionSet(l.selectionSet,t,n,r).then((function(e){s.push(e)}))]:[2]):[2]}))}))},[2,Promise.all(e.selections.map(l)).then((function(){return zE(s)}))]}))}))},e.prototype.resolveField=function(e,t,n,r){return Ag(this,void 0,void 0,(function(){var i,o,a,s,l,c,u,d,h,p=this;return Pg(this,(function(f){return n?(i=r.variables,o=e.name.value,a=fE(e),s=o!==a,l=n[a]||n[o],c=Promise.resolve(l),r.onlyRunForcedResolvers&&!this.shouldForceResolvers(e)||(u=n.__typename||r.defaultOperationType,(d=this.resolvers&&this.resolvers[u])&&(h=d[s?o:a])&&(c=Promise.resolve(jT.withValue(this.cache,h,[n,pE(e,i),r.context,{field:e,fragmentMap:r.fragmentMap}])))),[2,c.then((function(n){var i,o;if(void 0===n&&(n=l),e.directives&&e.directives.forEach((function(e){"export"===e.name.value&&e.arguments&&e.arguments.forEach((function(e){"as"===e.name.value&&"StringValue"===e.value.kind&&(r.exportedVariables[e.value.value]=n)}))})),!e.selectionSet)return n;if(null==n)return n;var a=null!==(o=null===(i=e.directives)||void 0===i?void 0:i.some((function(e){return"client"===e.name.value})))&&void 0!==o&&o;return Array.isArray(n)?p.resolveSubSelectedArray(e,t||a,n,r):e.selectionSet?p.resolveSelectionSet(e.selectionSet,t||a,n,r):void 0}))]):[2,null]}))}))},e.prototype.resolveSubSelectedArray=function(e,t,n,r){var i=this;return Promise.all(n.map((function(n){return null===n?null:Array.isArray(n)?i.resolveSubSelectedArray(e,t,n,r):e.selectionSet?i.resolveSelectionSet(e.selectionSet,t,n,r):void 0})))},e.prototype.collectSelectionsToResolve=function(e,t){var n=function(e){return!Array.isArray(e)},r=this.selectionsToResolveCache;return function e(i){if(!r.has(i)){var o=new Set;r.set(i,o),$k(i,{Directive:function(e,t,r,i,a){"client"===e.name.value&&a.forEach((function(e){n(e)&&Jk(e)&&o.add(e)}))},FragmentSpread:function(r,i,a,s,l){var c=t[r.name.value];__DEV__?T_(c,"No fragment named ".concat(r.name.value)):T_(c,12);var u=e(c);u.size>0&&(l.forEach((function(e){n(e)&&Jk(e)&&o.add(e)})),o.add(r),u.forEach((function(e){o.add(e)})))}})}return r.get(i)}(e)},e}(),SM=new(gS?WeakMap:Map);function CM(e,t){var n=e[t];"function"==typeof n&&(e[t]=function(){return SM.set(e,(SM.get(e)+1)%1e15),n.apply(this,arguments)})}function TM(e){e.notifyTimeout&&(clearTimeout(e.notifyTimeout),e.notifyTimeout=void 0)}var MM=function(){function e(e,t){void 0===t&&(t=e.generateQueryId()),this.queryId=t,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var n=this.cache=e.cache;SM.has(n)||(SM.set(n,0),CM(n,"evict"),CM(n,"modify"),CM(n,"reset"))}return e.prototype.init=function(e){var t=e.networkStatus||pM.loading;return this.variables&&this.networkStatus!==pM.loading&&!lC(this.variables,e.variables)&&(t=pM.setVariables),lC(e.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},e.prototype.reset=function(){TM(this),this.dirty=!1},e.prototype.getDiff=function(e){void 0===e&&(e=this.variables);var t=this.getDiffOptions(e);if(this.lastDiff&&lC(t,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=e);var n=this.observableQuery;if(n&&"no-cache"===n.options.fetchPolicy)return{complete:!1};var r=this.cache.diff(t);return this.updateLastDiff(r,t),r},e.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},e.prototype.getDiffOptions=function(e){var t;return void 0===e&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:null===(t=this.observableQuery)||void 0===t?void 0:t.options.canonizeResults}},e.prototype.setDiff=function(e){var t=this,n=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(e),this.dirty||lC(n&&n.result,e&&e.result)||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout((function(){return t.notify()}),0)))},e.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){t.getDiff().fromOptimisticTransaction?e.observe():xM(e)})):delete this.oqListener)},e.prototype.notify=function(){var e=this;TM(this),this.shouldNotify()&&this.listeners.forEach((function(t){return t(e)})),this.dirty=!1},e.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(gM(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if("cache-only"!==e&&"cache-and-network"!==e)return!1}return!0},e.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=e.prototype.cancel,this.subscriptions.forEach((function(e){return e.unsubscribe()}));var t=this.observableQuery;t&&t.stopPolling()}},e.prototype.cancel=function(){},e.prototype.updateWatch=function(e){var t=this;void 0===e&&(e=this.variables);var n=this.observableQuery;if(!n||"no-cache"!==n.options.fetchPolicy){var r=Ig(Ig({},this.getDiffOptions(e)),{watcher:this,callback:function(e){return t.setDiff(e)}});this.lastWatch&&lC(r,this.lastWatch)||(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=r))}},e.prototype.resetLastWrite=function(){this.lastWrite=void 0},e.prototype.shouldWrite=function(e,t){var n=this.lastWrite;return!(n&&n.dmCount===SM.get(this.cache)&&lC(t,n.variables)&&lC(e.data,n.result.data))},e.prototype.markResult=function(e,t,n,r){var i=this,o=new NE,a=SE(e.errors)?e.errors.slice(0):[];if(this.reset(),"incremental"in e&&SE(e.incremental)){var s=SS(this.getDiff().result,e);e.data=s}else if("hasNext"in e&&e.hasNext){var l=this.getDiff();e.data=o.merge(l.result,e.data)}this.graphQLErrors=a,"no-cache"===n.fetchPolicy?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(n.variables)):0!==r&&(IM(e,n.errorPolicy)?this.cache.performTransaction((function(o){if(i.shouldWrite(e,n.variables))o.writeQuery({query:t,data:e.data,variables:n.variables,overwrite:1===r}),i.lastWrite={result:e,variables:n.variables,dmCount:SM.get(i.cache)};else if(i.lastDiff&&i.lastDiff.diff.complete)return void(e.data=i.lastDiff.diff.result);var a=i.getDiffOptions(n.variables),s=o.diff(a);i.stopped||i.updateWatch(n.variables),i.updateLastDiff(s,a),s.complete&&(e.data=s.result)})):this.lastWrite=void 0)},e.prototype.markReady=function(){return this.networkError=null,this.networkStatus=pM.ready},e.prototype.markError=function(e){return this.networkStatus=pM.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},e}();function IM(e,t){void 0===t&&(t="none");var n="ignore"===t||"all"===t,r=!CS(e);return!r&&n&&e.data&&(r=!0),r}var OM=Object.prototype.hasOwnProperty,AM=function(){function e(e){var t=e.cache,n=e.link,r=e.defaultOptions,i=e.queryDeduplication,o=void 0!==i&&i,a=e.onBroadcast,s=e.ssrMode,l=void 0!==s&&s,c=e.clientAwareness,u=void 0===c?{}:c,d=e.localState,h=e.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(gS?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=t,this.link=n,this.defaultOptions=r||Object.create(null),this.queryDeduplication=o,this.clientAwareness=u,this.localState=d||new EM({cache:t}),this.ssrMode=l,this.assumeImmutableResults=!!h,(this.onBroadcast=a)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var e=this;this.queries.forEach((function(t,n){e.stopQueryNoBroadcast(n)})),this.cancelPendingFetches(__DEV__?new C_("QueryManager stopped while query was in flight"):new C_(14))},e.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach((function(t){return t(e)})),this.fetchCancelFns.clear()},e.prototype.mutate=function(e){var t,n,r=e.mutation,i=e.variables,o=e.optimisticResponse,a=e.updateQueries,s=e.refetchQueries,l=void 0===s?[]:s,c=e.awaitRefetchQueries,u=void 0!==c&&c,d=e.update,h=e.onQueryUpdated,p=e.fetchPolicy,f=void 0===p?(null===(t=this.defaultOptions.mutate)||void 0===t?void 0:t.fetchPolicy)||"network-only":p,m=e.errorPolicy,g=void 0===m?(null===(n=this.defaultOptions.mutate)||void 0===n?void 0:n.errorPolicy)||"none":m,v=e.keepRootFields,y=e.context;return Ag(this,void 0,void 0,(function(){var e,t,n,s,c,p;return Pg(this,(function(m){switch(m.label){case 0:return __DEV__?T_(r,"mutation option is required. You must specify your GraphQL document in the mutation option."):T_(r,15),__DEV__?T_("network-only"===f||"no-cache"===f,"Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):T_("network-only"===f||"no-cache"===f,16),e=this.generateMutationId(),t=this.transform(r),n=t.document,s=t.hasClientExports,r=this.cache.transformForLink(n),i=this.getVariables(r,i),s?[4,this.localState.addExportedVariables(r,i,y)]:[3,2];case 1:i=m.sent(),m.label=2;case 2:return c=this.mutationStore&&(this.mutationStore[e]={mutation:r,variables:i,loading:!0,error:null}),o&&this.markMutationOptimistic(o,{mutationId:e,document:r,variables:i,fetchPolicy:f,errorPolicy:g,context:y,updateQueries:a,update:d,keepRootFields:v}),this.broadcastQueries(),p=this,[2,new Promise((function(t,n){return mS(p.getObservableFromLink(r,Ig(Ig({},y),{optimisticResponse:o}),i,!1),(function(t){if(CS(t)&&"none"===g)throw new HS({graphQLErrors:TS(t)});c&&(c.loading=!1,c.error=null);var n=Ig({},t);return"function"==typeof l&&(l=l(n)),"ignore"===g&&CS(n)&&delete n.errors,p.markMutationResult({mutationId:e,result:n,document:r,variables:i,fetchPolicy:f,errorPolicy:g,context:y,update:d,updateQueries:a,awaitRefetchQueries:u,refetchQueries:l,removeOptimistic:o?e:void 0,onQueryUpdated:h,keepRootFields:v})})).subscribe({next:function(e){p.broadcastQueries(),"hasNext"in e&&!1!==e.hasNext||t(e)},error:function(t){c&&(c.loading=!1,c.error=t),o&&p.cache.removeOptimistic(e),p.broadcastQueries(),n(t instanceof HS?t:new HS({networkError:t}))}})}))]}}))}))},e.prototype.markMutationResult=function(e,t){var n=this;void 0===t&&(t=this.cache);var r=e.result,i=[],o="no-cache"===e.fetchPolicy;if(!o&&IM(r,e.errorPolicy)){if(kS(r)||i.push({result:r.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),kS(r)&&SE(r.incremental)){var a=t.diff({id:"ROOT_MUTATION",query:this.transform(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0}),s=void 0;a.result&&(s=SS(a.result,r)),void 0!==s&&(r.data=s,i.push({result:s,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}))}var l=e.updateQueries;l&&this.queries.forEach((function(e,o){var a=e.observableQuery,s=a&&a.queryName;if(s&&OM.call(l,s)){var c=l[s],u=n.queries.get(o),d=u.document,h=u.variables,p=t.diff({query:d,variables:h,returnPartialData:!0,optimistic:!1}),f=p.result;if(p.complete&&f){var m=c(f,{mutationResult:r,queryName:d&&bE(d)||void 0,queryVariables:h});m&&i.push({result:m,dataId:"ROOT_QUERY",query:d,variables:h})}}}))}if(i.length>0||e.refetchQueries||e.update||e.onQueryUpdated||e.removeOptimistic){var c=[];if(this.refetchQueries({updateCache:function(t){o||i.forEach((function(e){return t.write(e)}));var a,s=e.update,l=!(kS(a=r)||function(e){return"hasNext"in e&&"data"in e}(a))||kS(r)&&!r.hasNext;if(s){if(!o){var c=t.diff({id:"ROOT_MUTATION",query:n.transform(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});c.complete&&("incremental"in(r=Ig(Ig({},r),{data:c.result}))&&delete r.incremental,"hasNext"in r&&delete r.hasNext)}l&&s(t,r,{context:e.context,variables:e.variables})}o||e.keepRootFields||!l||t.modify({id:"ROOT_MUTATION",fields:function(e,t){var n=t.fieldName,r=t.DELETE;return"__typename"===n?e:r}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach((function(e){return c.push(e)})),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(c).then((function(){return r}))}return Promise.resolve(r)},e.prototype.markMutationOptimistic=function(e,t){var n=this,r="function"==typeof e?e(t.variables):e;return this.cache.recordOptimisticTransaction((function(e){try{n.markMutationResult(Ig(Ig({},t),{result:{data:r}}),e)}catch(i){__DEV__&&T_.error(i)}}),t.mutationId)},e.prototype.fetchQuery=function(e,t,n){return this.fetchQueryObservable(e,t,n).promise},e.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach((function(t,n){e[n]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}})),e},e.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},e.prototype.transform=function(e){var t=this.transformCache;if(!t.has(e)){var n=this.cache.transformDocument(e),r=function(e){return OE([PE],vE(e))}(n),i=this.localState.clientQuery(n),o=r&&this.localState.serverQuery(r),a={document:n,hasClientExports:tE(n),hasForcedResolvers:this.localState.shouldForceResolvers(n),clientQuery:i,serverQuery:o,defaultVars:kE(yE(n)),asQuery:Ig(Ig({},n),{definitions:n.definitions.map((function(e){return"OperationDefinition"===e.kind&&"query"!==e.operation?Ig(Ig({},e),{operation:"query"}):e}))})},s=function(e){e&&!t.has(e)&&t.set(e,a)};s(e),s(n),s(i),s(o)}return t.get(e)},e.prototype.getVariables=function(e,t){return Ig(Ig({},this.transform(e).defaultVars),t)},e.prototype.watchQuery=function(e){void 0===(e=Ig(Ig({},e),{variables:this.getVariables(e.query,e.variables)})).notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var t=new MM(this),n=new bM({queryManager:this,queryInfo:t,options:e});return this.queries.set(n.queryId,t),t.init({document:n.query,observableQuery:n,variables:n.variables}),n},e.prototype.query=function(e,t){var n=this;return void 0===t&&(t=this.generateQueryId()),__DEV__?T_(e.query,"query option is required. You must specify your GraphQL document in the query option."):T_(e.query,17),__DEV__?T_("Document"===e.query.kind,'You must wrap the query string in a "gql" tag.'):T_("Document"===e.query.kind,18),__DEV__?T_(!e.returnPartialData,"returnPartialData option only supported on watchQuery."):T_(!e.returnPartialData,19),__DEV__?T_(!e.pollInterval,"pollInterval option only supported on watchQuery."):T_(!e.pollInterval,20),this.fetchQuery(t,e).finally((function(){return n.stopQuery(t)}))},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},e.prototype.clearStore=function(e){return void 0===e&&(e={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new C_("Store reset while query was in flight (not completed in link chain)"):new C_(21)),this.queries.forEach((function(e){e.observableQuery?e.networkStatus=pM.loading:e.stop()})),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},e.prototype.getObservableQueries=function(e){var t=this;void 0===e&&(e="active");var n=new Map,r=new Map,i=new Set;return Array.isArray(e)&&e.forEach((function(e){var n;"string"==typeof e?r.set(e,!1):oE(n=e)&&"Document"===n.kind&&Array.isArray(n.definitions)?r.set(t.transform(e).document,!1):oE(e)&&e.query&&i.add(e)})),this.queries.forEach((function(t,i){var o=t.observableQuery,a=t.document;if(o){if("all"===e)return void n.set(i,o);var s=o.queryName;if("standby"===o.options.fetchPolicy||"active"===e&&!o.hasObservers())return;("active"===e||s&&r.has(s)||a&&r.has(a))&&(n.set(i,o),s&&r.set(s,!0),a&&r.set(a,!0))}})),i.size&&i.forEach((function(e){var r=OS("legacyOneTimeQuery"),i=t.getQuery(r).init({document:e.query,variables:e.variables}),o=new bM({queryManager:t,queryInfo:i,options:Ig(Ig({},e),{fetchPolicy:"network-only"})});T_(o.queryId===r),i.setObservableQuery(o),n.set(r,o)})),__DEV__&&r.size&&r.forEach((function(e,t){e||__DEV__&&T_.warn("Unknown query ".concat("string"==typeof t?"named ":"").concat(JSON.stringify(t,null,2)," requested in refetchQueries options.include array"))})),n},e.prototype.reFetchObservableQueries=function(e){var t=this;void 0===e&&(e=!1);var n=[];return this.getObservableQueries(e?"all":"active").forEach((function(r,i){var o=r.options.fetchPolicy;r.resetLastResults(),(e||"standby"!==o&&"cache-only"!==o)&&n.push(r.refetch()),t.getQuery(i).setDiff(null)})),this.broadcastQueries(),Promise.all(n)},e.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},e.prototype.startGraphQLSubscription=function(e){var t=this,n=e.query,r=e.fetchPolicy,i=e.errorPolicy,o=e.variables,a=e.context,s=void 0===a?{}:a;n=this.transform(n).document,o=this.getVariables(n,o);var l=function(e){return t.getObservableFromLink(n,s,e).map((function(o){"no-cache"!==r&&(IM(o,i)&&t.cache.write({query:n,result:o.data,dataId:"ROOT_SUBSCRIPTION",variables:e}),t.broadcastQueries());var a=CS(o),s=function(e){return!!e.extensions&&Array.isArray(e.extensions[ZS])}(o);if(a||s){var l={};throw a&&(l.graphQLErrors=o.errors),s&&(l.protocolErrors=o.extensions[ZS]),new HS(l)}return o}))};if(this.transform(n).hasClientExports){var c=this.localState.addExportedVariables(n,o,s).then(l);return new aS((function(e){var t=null;return c.then((function(n){return t=n.subscribe(e)}),e.error),function(){return t&&t.unsubscribe()}}))}return l(o)},e.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},e.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.queries.has(e)&&(this.getQuery(e).stop(),this.queries.delete(e))},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach((function(e){return e.notify()}))},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(e,t,n,r){var i,o,a=this;void 0===r&&(r=null!==(i=null==t?void 0:t.queryDeduplication)&&void 0!==i?i:this.queryDeduplication);var s=this.transform(e).serverQuery;if(s){var l=this.inFlightLinkObservables,c=this.link,u={query:s,variables:n,operationName:bE(s)||void 0,context:this.prepareContext(Ig(Ig({},t),{forceFetch:!r}))};if(t=u.context,r){var d=l.get(s)||new Map;l.set(s,d);var h=PT(n);if(!(o=d.get(h))){var p=new _S([FS(c,u)]);d.set(h,o=p),p.beforeNext((function(){d.delete(h)&&d.size<1&&l.delete(s)}))}}else o=new _S([FS(c,u)])}else o=new _S([aS.of({data:{}})]),t=this.prepareContext(t);var f=this.transform(e).clientQuery;return f&&(o=mS(o,(function(e){return a.localState.runResolvers({document:f,remoteResult:e,context:t,variables:n})}))),o},e.prototype.getResultsFromLink=function(e,t,n){var r=e.lastRequestId=this.generateRequestId(),i=this.cache.transformForLink(this.transform(e.document).document);return mS(this.getObservableFromLink(i,n.context,n.variables),(function(o){var a=TS(o),s=a.length>0;if(r>=e.lastRequestId){if(s&&"none"===n.errorPolicy)throw e.markError(new HS({graphQLErrors:a}));e.markResult(o,i,n,t),e.markReady()}var l={data:o.data,loading:!1,networkStatus:pM.ready};return s&&"ignore"!==n.errorPolicy&&(l.errors=a,l.networkStatus=pM.error),l}),(function(t){var n=t.hasOwnProperty("graphQLErrors")?t:new HS({networkError:t});throw r>=e.lastRequestId&&e.markError(n),n}))},e.prototype.fetchQueryObservable=function(e,t,n){return this.fetchConcastWithInfo(e,t,n).concast},e.prototype.fetchConcastWithInfo=function(e,t,n){var r=this;void 0===n&&(n=pM.loading);var i,o,a=this.transform(t.query).document,s=this.getVariables(a,t.variables),l=this.getQuery(e),c=this.defaultOptions.watchQuery,u=t.fetchPolicy,d=void 0===u?c&&c.fetchPolicy||"cache-first":u,h=t.errorPolicy,p=void 0===h?c&&c.errorPolicy||"none":h,f=t.returnPartialData,m=void 0!==f&&f,g=t.notifyOnNetworkStatusChange,v=void 0!==g&&g,y=t.context,b=void 0===y?{}:y,x=Object.assign({},t,{query:a,variables:s,fetchPolicy:d,errorPolicy:p,returnPartialData:m,notifyOnNetworkStatusChange:v,context:b}),w=function(e){x.variables=e;var i=r.fetchQueryByPolicy(l,x,n);return"standby"!==x.fetchPolicy&&i.sources.length>0&&l.observableQuery&&l.observableQuery.applyNextFetchPolicy("after-fetch",t),i},_=function(){return r.fetchCancelFns.delete(e)};if(this.fetchCancelFns.set(e,(function(e){_(),setTimeout((function(){return i.cancel(e)}))})),this.transform(x.query).hasClientExports)i=new _S(this.localState.addExportedVariables(x.query,x.variables,x.context).then(w).then((function(e){return e.sources}))),o=!0;else{var k=w(x.variables);o=k.fromLink,i=new _S(k.sources)}return i.promise.then(_,_),{concast:i,fromLink:o}},e.prototype.refetchQueries=function(e){var t=this,n=e.updateCache,r=e.include,i=e.optimistic,o=void 0!==i&&i,a=e.removeOptimistic,s=void 0===a?o?OS("refetchQueries"):void 0:a,l=e.onQueryUpdated,c=new Map;r&&this.getObservableQueries(r).forEach((function(e,n){c.set(n,{oq:e,lastDiff:t.getQuery(n).getDiff()})}));var u=new Map;return n&&this.cache.batch({update:n,optimistic:o&&s||!1,removeOptimistic:s,onWatchUpdated:function(e,t,n){var r=e.watcher instanceof MM&&e.watcher.observableQuery;if(r){if(l){c.delete(r.queryId);var i=l(r,t,n);return!0===i&&(i=r.refetch()),!1!==i&&u.set(r,i),i}null!==l&&c.set(r.queryId,{oq:r,lastDiff:n,diff:t})}}}),c.size&&c.forEach((function(e,n){var r,i=e.oq,o=e.lastDiff,a=e.diff;if(l){if(!a){var s=i.queryInfo;s.reset(),a=s.getDiff()}r=l(i,a,o)}l&&!0!==r||(r=i.refetch()),!1!==r&&u.set(i,r),n.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(n)})),s&&this.cache.removeOptimistic(s),u},e.prototype.fetchQueryByPolicy=function(e,t,n){var r=this,i=t.query,o=t.variables,a=t.fetchPolicy,s=t.refetchWritePolicy,l=t.errorPolicy,c=t.returnPartialData,u=t.context,d=t.notifyOnNetworkStatusChange,h=e.networkStatus;e.init({document:this.transform(i).document,variables:o,networkStatus:n});var p=function(){return e.getDiff(o)},f=function(t,n){void 0===n&&(n=e.networkStatus||pM.loading);var a=t.result;!__DEV__||c||lC(a,{})||_M(t.missing);var s=function(e){return aS.of(Ig({data:e,loading:gM(n),networkStatus:n},t.complete?null:{partial:!0}))};return a&&r.transform(i).hasForcedResolvers?r.localState.runResolvers({document:i,remoteResult:{data:a},context:u,variables:o,onlyRunForcedResolvers:!0}).then((function(e){return s(e.data||void 0)})):"none"===l&&n===pM.refetch&&Array.isArray(t.missing)?s(void 0):s(a)},m="no-cache"===a?0:n===pM.refetch&&"merge"!==s?1:2,g=function(){return r.getResultsFromLink(e,m,{variables:o,context:u,fetchPolicy:a,errorPolicy:l})},v=d&&"number"==typeof h&&h!==n&&gM(n);switch(a){default:case"cache-first":return(y=p()).complete?{fromLink:!1,sources:[f(y,e.markReady())]}:c||v?{fromLink:!0,sources:[f(y),g()]}:{fromLink:!0,sources:[g()]};case"cache-and-network":var y;return(y=p()).complete||c||v?{fromLink:!0,sources:[f(y),g()]}:{fromLink:!0,sources:[g()]};case"cache-only":return{fromLink:!1,sources:[f(p(),e.markReady())]};case"network-only":return v?{fromLink:!0,sources:[f(p()),g()]}:{fromLink:!0,sources:[g()]};case"no-cache":return v?{fromLink:!0,sources:[f(e.getDiff()),g()]}:{fromLink:!0,sources:[g()]};case"standby":return{fromLink:!1,sources:[]}}},e.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new MM(this,e)),this.queries.get(e)},e.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.localState.prepareContext(e);return Ig(Ig({},t),{clientAwareness:this.clientAwareness})},e}(),PM=!1,DM=function(){function e(e){var t=this;this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.uri,r=e.credentials,i=e.headers,o=e.cache,a=e.ssrMode,s=void 0!==a&&a,l=e.ssrForceFetchDelay,c=void 0===l?0:l,u=e.connectToDevTools,d=void 0===u?"object"==typeof window&&!window.__APOLLO_CLIENT__&&__DEV__:u,h=e.queryDeduplication,p=void 0===h||h,f=e.defaultOptions,m=e.assumeImmutableResults,g=void 0!==m&&m,v=e.resolvers,y=e.typeDefs,b=e.fragmentMatcher,x=e.name,w=e.version,_=e.link;if(_||(_=n?new rC({uri:n,credentials:r,headers:i}):NS.empty()),!o)throw __DEV__?new C_("To initialize Apollo Client, you must specify a 'cache' property in the options object. \nFor more information, please visit: https://go.apollo.dev/c/docs"):new C_(9);if(this.link=_,this.cache=o,this.disableNetworkFetches=s||c>0,this.queryDeduplication=p,this.defaultOptions=f||Object.create(null),this.typeDefs=y,c&&setTimeout((function(){return t.disableNetworkFetches=!1}),c),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),d&&"object"==typeof window&&(window.__APOLLO_CLIENT__=this),!PM&&d&&__DEV__&&(PM=!0,"undefined"!=typeof window&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var k=window.navigator,E=k&&k.userAgent,S=void 0;"string"==typeof E&&(E.indexOf("Chrome/")>-1?S="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":E.indexOf("Firefox/")>-1&&(S="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),S&&__DEV__&&T_.log("Download the Apollo DevTools for a better development experience: "+S)}this.version="3.7.17",this.localState=new EM({cache:o,client:this,resolvers:v,fragmentMatcher:b}),this.queryManager=new AM({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,queryDeduplication:p,ssrMode:s,clientAwareness:{name:x,version:w},localState:this.localState,assumeImmutableResults:g,onBroadcast:d?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0})}return e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=AS(this.defaultOptions.watchQuery,e)),!this.disableNetworkFetches||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e=Ig(Ig({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},e.prototype.query=function(e){return this.defaultOptions.query&&(e=AS(this.defaultOptions.query,e)),__DEV__?T_("cache-and-network"!==e.fetchPolicy,"The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):T_("cache-and-network"!==e.fetchPolicy,10),this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=Ig(Ig({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},e.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=AS(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},e.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.cache.readQuery(e,t)},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.cache.readFragment(e,t)},e.prototype.writeQuery=function(e){var t=this.cache.writeQuery(e);return!1!==e.broadcast&&this.queryManager.broadcastQueries(),t},e.prototype.writeFragment=function(e){var t=this.cache.writeFragment(e);return!1!==e.broadcast&&this.queryManager.broadcastQueries(),t},e.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},e.prototype.__requestRaw=function(e){return FS(this.link,e)},e.prototype.resetStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore({discardWatches:!1})})).then((function(){return Promise.all(e.resetStoreCallbacks.map((function(e){return e()})))})).then((function(){return e.reFetchObservableQueries()}))},e.prototype.clearStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore({discardWatches:!0})})).then((function(){return Promise.all(e.clearStoreCallbacks.map((function(e){return e()})))}))},e.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},e.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),n=[],r=[];t.forEach((function(e,t){n.push(t),r.push(e)}));var i=Promise.all(r);return i.queries=n,i.results=r,i.catch((function(e){__DEV__&&T_.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(e))})),i},e.prototype.getObservableQueries=function(e){return void 0===e&&(e="active"),this.queryManager.getObservableQueries(e)},e.prototype.extract=function(e){return this.cache.extract(e)},e.prototype.restore=function(e){return this.cache.restore(e)},e.prototype.addResolvers=function(e){this.localState.addResolvers(e)},e.prototype.setResolvers=function(e){this.localState.setResolvers(e)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},e.prototype.setLink=function(e){this.link=this.queryManager.link=e},e}(),LM=new Map,RM=new Map,zM=!0,jM=!1;function NM(e){return e.replace(/[\s,]+/g," ").trim()}function BM(e){var t=new Set,n=[];return e.definitions.forEach((function(e){if("FragmentDefinition"===e.kind){var r=e.name.value,i=NM((a=e.loc).source.body.substring(a.start,a.end)),o=RM.get(r);o&&!o.has(i)?zM&&console.warn("Warning: fragment with name "+r+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):o||RM.set(r,o=new Set),o.add(i),t.has(i)||(t.add(i),n.push(e))}else n.push(e);var a})),Ig(Ig({},e),{definitions:n})}function FM(e){var t=NM(e);if(!LM.has(t)){var n=function(e,t){return new zk(e,t).parseDocument()}(e,{experimentalFragmentVariables:jM,allowLegacyFragmentVariables:jM});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");LM.set(t,function(e){var t=new Set(e.definitions);t.forEach((function(e){e.loc&&delete e.loc,Object.keys(e).forEach((function(n){var r=e[n];r&&"object"==typeof r&&t.add(r)}))}));var n=e.loc;return n&&(delete n.startToken,delete n.endToken),e}(BM(n)))}return LM.get(t)}function VM(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];"string"==typeof e&&(e=[e]);var r=e[0];return t.forEach((function(t,n){t&&"Document"===t.kind?r+=t.loc.source.body:r+=t,r+=e[n+1]})),FM(r)}var UM,$M=VM,ZM=function(){LM.clear(),RM.clear()},HM=function(){zM=!1},WM=function(){jM=!0},qM=function(){jM=!1};(UM=VM||(VM={})).gql=$M,UM.resetCaches=ZM,UM.disableFragmentWarnings=HM,UM.enableExperimentalFragmentVariables=WM,UM.disableExperimentalFragmentVariables=qM,VM.default=VM;var GM=yS?Symbol.for("__APOLLO_CONTEXT__"):"__APOLLO_CONTEXT__";function KM(){var e=U.createContext[GM];return e||(Object.defineProperty(U.createContext,GM,{value:e=U.createContext({}),enumerable:!1,writable:!1,configurable:!0}),e.displayName="ApolloContext"),e}var YM,XM=function(e){var t=e.client,n=e.children,r=KM();return U.createElement(r.Consumer,null,(function(e){return void 0===e&&(e={}),t&&e.client!==t&&(e=Object.assign({},e,{client:t})),__DEV__?T_(e.client,'ApolloProvider was not passed a client instance. Make sure you pass in your client via the "client" prop.'):T_(e.client,29),U.createElement(r.Provider,{value:e},n)}))};!function(e){e[e.Query=0]="Query",e[e.Mutation=1]="Mutation",e[e.Subscription=2]="Subscription"}(YM||(YM={}));var JM=new Map;function QM(e){var t;switch(e){case YM.Query:t="Query";break;case YM.Mutation:t="Mutation";break;case YM.Subscription:t="Subscription"}return t}function eI(e,t){var n=function(e){var t,n,r=JM.get(e);if(r)return r;__DEV__?T_(!!e&&!!e.kind,"Argument of ".concat(e," passed to parser was not a valid GraphQL ")+"DocumentNode. You may need to use 'graphql-tag' or another method to convert your operation into a document"):T_(!!e&&!!e.kind,33);for(var i=[],o=[],a=[],s=[],l=0,c=e.definitions;l<c.length;l++){var u=c[l];if("FragmentDefinition"!==u.kind){if("OperationDefinition"===u.kind)switch(u.operation){case"query":o.push(u);break;case"mutation":a.push(u);break;case"subscription":s.push(u)}}else i.push(u)}__DEV__?T_(!i.length||o.length||a.length||s.length,"Passing only a fragment to 'graphql' is not yet supported. You must include a query, subscription or mutation as well"):T_(!i.length||o.length||a.length||s.length,34),__DEV__?T_(o.length+a.length+s.length<=1,"react-apollo only supports a query, subscription, or a mutation per HOC. "+"".concat(e," had ").concat(o.length," queries, ").concat(s.length," ")+"subscriptions and ".concat(a.length," mutations. ")+"You can use 'compose' to join multiple operation types to a component"):T_(o.length+a.length+s.length<=1,35),n=o.length?YM.Query:YM.Mutation,o.length||a.length||(n=YM.Subscription);var d=o.length?o:a.length?a:s;__DEV__?T_(1===d.length,"react-apollo only supports one definition per HOC. ".concat(e," had ")+"".concat(d.length," definitions. ")+"You can use 'compose' to join multiple operation types to a component"):T_(1===d.length,36);var h=d[0];t=h.variableDefinitions||[];var p={name:h.name&&"Name"===h.name.kind?h.name.value:"data",type:n,variables:t};return JM.set(e,p),p}(e),r=QM(t),i=QM(n.type);__DEV__?T_(n.type===t,"Running a ".concat(r," requires a graphql ")+"".concat(r,", but a ").concat(i," was used instead.")):T_(n.type===t,37)}function tI(e,t){var n=function(e){var t=U.useContext(KM()),n=e||t.client;return __DEV__?T_(!!n,'Could not find "client" in the context or passed in as an option. Wrap the root component in an <ApolloProvider>, or pass an ApolloClient instance in via options.'):T_(!!n,32),n}(null==t?void 0:t.client);eI(e,YM.Mutation);var r=U.useState({called:!1,loading:!1,client:n}),i=r[0],o=r[1],a=U.useRef({result:i,mutationId:0,isMounted:!0,client:n,mutation:e,options:t});Object.assign(a.current,{client:n,options:t,mutation:e});var s=U.useCallback((function(e){void 0===e&&(e={});var t=a.current,n=t.options,r=t.mutation,i=Ig(Ig({},n),{mutation:r}),s=e.client||a.current.client;a.current.result.loading||i.ignoreResults||!a.current.isMounted||o(a.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:s});var l=++a.current.mutationId,c=AS(i,e);return s.mutate(c).then((function(t){var n,r=t.data,i=t.errors,u=i&&i.length>0?new HS({graphQLErrors:i}):void 0;if(l===a.current.mutationId&&!c.ignoreResults){var d={called:!0,loading:!1,data:r,error:u,client:s};a.current.isMounted&&!lC(a.current.result,d)&&o(a.current.result=d)}var h=e.onCompleted||(null===(n=a.current.options)||void 0===n?void 0:n.onCompleted);return null==h||h(t.data,c),t})).catch((function(t){var n;if(l===a.current.mutationId&&a.current.isMounted){var r={loading:!1,error:t,data:void 0,called:!0,client:s};lC(a.current.result,r)||o(a.current.result=r)}var i=e.onError||(null===(n=a.current.options)||void 0===n?void 0:n.onError);if(i)return i(t,c),{data:void 0,errors:t};throw t}))}),[]),l=U.useCallback((function(){a.current.isMounted&&o({called:!1,loading:!1,client:n})}),[]);return U.useEffect((function(){return a.current.isMounted=!0,function(){a.current.isMounted=!1}}),[]),[s,Ig({reset:l},i)]}var nI={exports:{}};!function(e,t){e.exports=function(){var e,t,n;function r(r,i){if(e)if(t){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",a={};e(a),n=i(a),"undefined"!=typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else t=i;else e=i}r(["exports"],(function(e){var t="undefined"!=typeof self?self:{},n="2.15.0";let r;const i={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==r){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{r=null!={}.API_URL_REGEX?new RegExp({}.API_URL_REGEX):e}catch(t){r=e}}return r},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!i.API_URL)return null;try{const e=new URL(i.API_URL);return"api.mapbox.cn"===e.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===e.hostname?"https://events.mapbox.com/events/v2":null}catch(e){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},o={supported:!1,testSupport:function(e){!l&&s&&(c?u(e):a=e)}};let a,s,l=!1,c=!1;function u(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s),e.isContextLost())return;o.supported=!0}catch(e){}e.deleteTexture(t),l=!0}t.document&&(s=t.document.createElement("img"),s.onload=function(){a&&u(a),a=null,c=!0},s.onerror=function(){l=!0,a=null},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const d="01";function h(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var p=f;function f(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=r}f.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,r=0;r<8;r++){var i=this.sampleCurveX(n)-e;if(Math.abs(i)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var a=0,s=1;for(n=e,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-e)<t));r++)e>i?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var m=h(p),g=v;function v(e,t){this.x=e,this.y=t}v.prototype={clone:function(){return new v(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},v.convert=function(e){return e instanceof v?e:Array.isArray(e)?new v(e[0],e[1]):e};var y=h(g);const b=Math.PI/180,x=180/Math.PI;function w(e){return e*b}function _(e){return e*x}const k=[[0,0],[1,0],[1,1],[0,1]];function E(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function S(e,t,n,r){const i=new m(e,t,n,r);return function(e){return i.solve(e)}}const C=S(.25,.1,.25,1);function T(e,t,n){return Math.min(n,Math.max(t,e))}function M(e,t,n){return(n=T((n-e)/(t-e),0,1))*n*(3-2*n)}function I(e,t,n){const r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function O(e,t,n){if(!e.length)return n(null,[]);let r=e.length;const i=new Array(e.length);let o=null;e.forEach(((e,a)=>{t(e,((e,t)=>{e&&(o=e),i[a]=t,0==--r&&n(o,i)}))}))}function A(e){const t=[];for(const n in e)t.push(e[n]);return t}function P(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}let D=1;function L(){return D++}function R(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function z(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function j(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function N(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function B(e,t){return-1!==e.indexOf(t,e.length-t.length)}function F(e,t,n){const r={};for(const i in e)r[i]=t.call(n||this,e[i],i,e);return r}function V(e,t,n){const r={};for(const i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function U(e){return Array.isArray(e)?e.map(U):"object"==typeof e&&e?F(e,U):e}const $={};function Z(e){$[e]||("undefined"!=typeof console&&console.warn(e),$[e]=!0)}function H(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function W(e){let t=0;for(let n,r,i=0,o=e.length,a=o-1;i<o;a=i++)n=e[i],r=e[a],t+=(r.x-n.x)*(n.y+r.y);return t}function q(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function G(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,n,r,i)=>{const o=r||i;return t[n]=!o||o.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let K=null;function Y(e){if(null==K){const t=e.navigator?e.navigator.userAgent:null;K=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return K}function X(e){try{const n=t[e];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function J(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}const Q="mapbox-tiles";let ee,te,ne=500,re=50;function ie(){try{return t.caches}catch(e){}}function oe(){ie()&&!ee&&(ee=t.caches.open(Q))}function ae(e){const t=e.indexOf("?");if(t<0)return e;const n=function(e){const t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}(e),r=n.filter((e=>{const t=e.split("=");return"language"===t[0]||"worldview"===t[0]}));return r.length?`${e.slice(0,t)}?${r.join("&")}`:e.slice(0,t)}let se=1/0;const le={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(le);class ce extends Error{constructor(e,t,n){401===t&&xe(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ue=q()?()=>self.worker&&self.worker.referrer:()=>("blob:"===t.location.protocol?t.parent:t).location.href,de=function(e,n){if(!(/^file:/.test(r=e.url)||/^file:/.test(ue())&&!/^\w+:/.test(r))){if(t.fetch&&t.Request&&t.AbortController&&t.Request.prototype.hasOwnProperty("signal"))return function(e,n){const r=new t.AbortController,i=new t.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:ue(),referrerPolicy:e.referrerPolicy,signal:r.signal});let o=!1,a=!1;const s=(l=i.url).indexOf("sku=")>0&&xe(l);var l;"json"===e.type&&i.headers.set("Accept","application/json");const c=(r,o,l)=>{if(a)return;if(r&&"SecurityError"!==r.message&&Z(r.toString()),o&&l)return u(o);const c=Date.now();t.fetch(i).then((t=>{if(t.ok){const e=s?t.clone():null;return u(t,e,c)}return n(new ce(t.statusText,t.status,e.url))})).catch((t=>{"AbortError"!==t.name&&n(new Error(`${t.message} ${e.url}`))}))},u=(r,s,l)=>{("arrayBuffer"===e.type?r.arrayBuffer():"json"===e.type?r.json():r.text()).then((e=>{a||(s&&l&&function(e,n,r){if(oe(),!ee)return;const i={status:n.status,statusText:n.statusText,headers:new t.Headers};n.headers.forEach(((e,t)=>i.headers.set(t,e)));const o=G(n.headers.get("Cache-Control")||"");if(o["no-store"])return;o["max-age"]&&i.headers.set("Expires",new Date(r+1e3*o["max-age"]).toUTCString());const a=i.headers.get("Expires");a&&(new Date(a).getTime()-r<42e4||function(e,t){if(void 0===te)try{new Response(new ReadableStream),te=!0}catch(e){te=!1}te?t(e.body):e.blob().then(t)}(n,(n=>{const r=new t.Response(n,i);oe(),ee&&ee.then((t=>t.put(ae(e.url),r))).catch((e=>Z(e.message)))})))}(i,s,l),o=!0,n(null,e,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((e=>{a||n(new Error(e.message))}))};return s?function(e,t){if(oe(),!ee)return t(null);const n=ae(e.url);ee.then((e=>{e.match(n).then((r=>{const i=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),n=G(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(r);e.delete(n),i&&e.put(n,r.clone()),t(null,r,i)})).catch(t)})).catch(t)}(i,c):c(null,null),{cancel:()=>{a=!0,o||r.abort()}}}(e,n);if(q()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,n,void 0,!0)}var r;return function(e,n){const r=new t.XMLHttpRequest;r.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(r.responseType="arraybuffer");for(const t in e.headers)r.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===e.credentials,r.onerror=()=>{n(new Error(r.statusText))},r.onload=()=>{if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){let t=r.response;if("json"===e.type)try{t=JSON.parse(r.response)}catch(e){return n(e)}n(null,t,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else n(new ce(r.statusText,r.status,e.url))},r.send(e.body),{cancel:()=>r.abort()}}(e,n)},he=function(e,t){return de(P(e,{type:"arrayBuffer"}),t)};function pe(e){const n=t.document.createElement("a");return n.href=e,n.protocol===t.document.location.protocol&&n.host===t.document.location.host}const fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let me,ge;me=[],ge=0;const ve=function(e,n){if(o.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),ge>=i.MAX_PARALLEL_IMAGE_REQUESTS){const t={requestParameters:e,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return me.push(t),t}ge++;let r=!1;const a=()=>{if(!r)for(r=!0,ge--;me.length&&ge<i.MAX_PARALLEL_IMAGE_REQUESTS;){const e=me.shift(),{requestParameters:t,callback:n,cancelled:r}=e;r||(e.cancel=ve(t,n).cancel)}},s=he(e,((e,r,i,o)=>{a(),e?n(e):r&&(t.createImageBitmap?function(e,n){const r=new t.Blob([new Uint8Array(e)],{type:"image/png"});t.createImageBitmap(r).then((e=>{n(null,e)})).catch((e=>{n(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(r,((e,t)=>n(e,t,i,o))):function(e,n){const r=new t.Image,i=t.URL;r.onload=()=>{n(null,r),i.revokeObjectURL(r.src),r.onload=null,t.requestAnimationFrame((()=>{r.src=fe}))},r.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const o=new t.Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?i.createObjectURL(o):fe}(r,((e,t)=>n(e,t,i,o))))}));return{cancel:()=>{s.cancel(),a()}}},ye="NO_ACCESS_TOKEN";function be(e){return 0===e.indexOf("mapbox:")}function xe(e){return i.API_URL_REGEX.test(e)}function we(e){return i.API_CDN_URL_REGEX.test(e)}function _e(e){return i.API_STYLE_REGEX.test(e)&&!ke(e)}function ke(e){return i.API_SPRITE_REGEX.test(e)}const Ee=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Se(e){const t=e.match(Ee);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Ce(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}const Te="mapbox.eventData";function Me(e){if(!e)return null;const n=e.split(".");if(!n||3!==n.length)return null;try{return JSON.parse(decodeURIComponent(t.atob(n[1]).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(e){return null}}class Ie{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const n=Me(i.ACCESS_TOKEN);let r="";return r=n&&n.u?t.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(Number("0x"+t))))):i.ACCESS_TOKEN||"",e?`${Te}.${e}:${r}`:`${Te}:${r}`}fetchEventData(){const e=X("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{const e=t.localStorage.getItem(n);e&&(this.eventData=JSON.parse(e));const i=t.localStorage.getItem(r);i&&(this.anonId=i)}catch(e){Z("Unable to read from LocalStorage")}}saveEventData(){const e=X("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{t.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&t.localStorage.setItem(n,JSON.stringify(this.eventData))}catch(e){Z("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,t,n,r){if(!i.EVENTS_URL)return;const o=Se(i.EVENTS_URL);o.params.push(`access_token=${r||i.ACCESS_TOKEN||""}`);const a={event:this.type,created:new Date(e).toISOString()},s=t?P(a,t):a,l={url:Ce(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(e,t){return de(P(e,{method:"POST"}),t)}(l,(e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(r)}))}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const Oe=new class extends Ie{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){i.EVENTS_URL&&i.ACCESS_TOKEN&&Array.isArray(e)&&e.some((e=>be(e)||xe(e)))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=Me(i.ACCESS_TOKEN),r=t?t.u:i.ACCESS_TOKEN;let o=r!==this.eventData.tokenU;j(this.anonId)||(this.anonId=R(),o=!0);const a=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(a),n=(a-this.eventData.lastSuccess)/864e5;o=o||n>=1||n<-1||e.getDate()!==t.getDate()}else o=!0;o?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:d,"enabled.telemetry":!1,userId:this.anonId},(e=>{e||(this.eventData.lastSuccess=a,this.eventData.tokenU=r)}),e):this.processRequests()}},Ae=Oe.postTurnstileEvent.bind(Oe),Pe=new class extends Ie{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,n,r){this.skuToken=t,this.errorCb=r,i.EVENTS_URL&&(n||i.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(ye)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:r}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),j(this.anonId)||(this.anonId=R()),this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:d,skuToken:this.skuToken,userId:this.anonId},(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e))}},De=Pe.postMapLoadEvent.bind(Pe),Le=new class extends Ie{constructor(){super("gljs.performance")}postPerformanceEvent(e,t){i.EVENTS_URL&&(e||i.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:r,performanceData:i}=this.queue.shift(),o=function(e){const r=t.performance.getEntriesByType("resource"),i=t.performance.getEntriesByType("mark"),o=function(e){const t={};if(e)for(const n in e)if("other"!==n)for(const r of e[n]){const e=`${n}ResolveRangeMin`,i=`${n}ResolveRangeMax`,o=`${n}RequestCount`,a=`${n}RequestCachedCount`;t[e]=Math.min(t[e]||1/0,r.startTime),t[i]=Math.max(t[i]||-1/0,r.responseEnd);const s=e=>{void 0===t[e]&&(t[e]=0),++t[e]};void 0!==r.transferSize&&0===r.transferSize&&s(a),s(o)}return t}(function(e,t){const n={};if(e)for(const r of e){const e=t(r);void 0===n[e]&&(n[e]=[]),n[e].push(r)}return n}(r,Ve)),a=t.devicePixelRatio,s=t.navigator.connection||t.navigator.mozConnection||t.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},c=(e,t,n)=>{null!=n&&e.push({name:t,value:n.toString()})};for(const t in o)c(l.counters,t,o[t]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(c(l.counters,"interactionRangeMin",e.interactionRange[0]),c(l.counters,"interactionRangeMax",e.interactionRange[1])),i)for(const t of Object.keys(Be)){const e=Be[t],n=i.find((t=>t.name===e));n&&c(l.counters,e,n.startTime)}return c(l.counters,"visibilityHidden",e.visibilityHidden),c(l.attributes,"style",function(e){if(e)for(const t of e){const e=t.name.split("?")[0];if(_e(e)){const t=e.split("/").slice(-2);if(2===t.length)return`mapbox://styles/${t[0]}/${t[1]}`}}}(r)),c(l.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),c(l.attributes,"fogEnabled",e.fogEnabled?"true":"false"),c(l.attributes,"projection",e.projection),c(l.attributes,"zoom",e.zoom),c(l.metadata,"devicePixelRatio",a),c(l.metadata,"connectionEffectiveType",s?s.effectiveType:void 0),c(l.metadata,"navigatorUserAgent",t.navigator.userAgent),c(l.metadata,"screenWidth",t.screen.width),c(l.metadata,"screenHeight",t.screen.height),c(l.metadata,"windowWidth",t.innerWidth),c(l.metadata,"windowHeight",t.innerHeight),c(l.metadata,"mapWidth",e.width/a),c(l.metadata,"mapHeight",e.height/a),c(l.metadata,"webglRenderer",e.renderer),c(l.metadata,"webglVendor",e.vendor),c(l.metadata,"sdkVersion",n),c(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(i);for(const t of o.metadata);for(const t of o.counters);for(const t of o.attributes);this.postEvent(r,o,(()=>{}),e)}},Re=Le.postPerformanceEvent.bind(Le),ze=new class extends Ie{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,n,r){if(!i.API_URL||!i.SESSION_PATH)return;const o=Se(i.API_URL+i.SESSION_PATH);o.params.push(`sku=${t||""}`),o.params.push(`access_token=${r||i.ACCESS_TOKEN||""}`);const a={url:Ce(o),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(e,t){return de(P(e,{method:"GET"}),t)}(a,(e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(r)}))}getSessionAPI(e,t,n,r){this.skuToken=t,this.errorCb=r,i.SESSION_PATH&&i.API_URL&&(n||i.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(ye)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||this.getSession(n,this.skuToken,(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e)}},je=ze.getSessionAPI.bind(ze),Ne=new Set,Be={create:"create",load:"load",fullLoad:"fullLoad"},Fe={mark(e){t.performance.mark(e)},measure(e,n,r){t.performance.measure(e,n,r)}};function Ve(e){const t=e.name.split("?")[0];return we(t)&&t.includes("mapbox-gl.js")?"javascript":we(t)&&t.includes("mapbox-gl.css")?"css":function(e){return i.API_FONTS_REGEX.test(e)}(t)?"fontRange":ke(t)?"sprite":_e(t)?"style":function(e){return i.API_TILEJSON_REGEX.test(e)}(t)?"tilejson":"other"}const Ue=t.performance;function $e(e){const t=e?e.url.toString():void 0;return Ue.getEntriesByName(t)}let Ze,He,We,qe;const Ge={now:()=>void 0!==We?We:t.performance.now(),setNow(e){We=e},restoreNow(){We=void 0},frame(e){const n=t.requestAnimationFrame(e);return{cancel:()=>t.cancelAnimationFrame(n)}},getImageData(e,n=0){const{width:r,height:i}=e;qe||(qe=t.document.createElement("canvas"));const o=qe.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return(r>qe.width||i>qe.height)&&(qe.width=r,qe.height=i),o.clearRect(-n,-n,r+2*n,i+2*n),o.drawImage(e,0,0,r,i),o.getImageData(-n,-n,r+2*n,i+2*n)},resolveURL:e=>(Ze||(Ze=t.document.createElement("a")),Ze.href=e,Ze.href),get devicePixelRatio(){return t.devicePixelRatio},get prefersReducedMotion(){return!!t.matchMedia&&(null==He&&(He=t.matchMedia("(prefers-reduced-motion: reduce)")),He.matches)}};function Ke(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function Ye(e,t,n){if(n&&n[e]){const r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}class Xe{constructor(e,t={}){P(this,t),this.type=e}}class Je extends Xe{constructor(e,t={}){super("error",P({error:e},t))}}class Qe{on(e,t){return this._listeners=this._listeners||{},Ke(e,t,this._listeners),this}off(e,t){return Ye(e,t,this._listeners),Ye(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},Ke(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new Xe(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const o of r)Ye(n,o,this._oneTimeListeners),o.call(this,e);const i=this._eventedParent;i&&(P(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof Je&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var et=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function tt(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}function nt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function rt(e){if(Array.isArray(e))return e.map(rt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=rt(e[n]);return t}return nt(e)}class it extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var ot=it;class at{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[n,r]of t)this.bindings[n]=r}concat(e){return new at(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var st=at;const lt={kind:"null"},ct={kind:"number"},ut={kind:"string"},dt={kind:"boolean"},ht={kind:"color"},pt={kind:"object"},ft={kind:"value"},mt={kind:"collator"},gt={kind:"formatted"},vt={kind:"resolvedImage"};function yt(e,t){return{kind:"array",itemType:e,N:t}}function bt(e){if("array"===e.kind){const t=bt(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const xt=[lt,ct,ut,dt,ht,gt,pt,yt(ft),vt];function wt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!wt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of xt)if(!wt(e,t))return null}return`Expected ${bt(e)} but found ${bt(t)} instead.`}function _t(e,t){return t.some((t=>t.kind===e.kind))}function kt(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}var Et,St={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ct(e){return(e=Math.round(e))<0?0:e>255?255:e}function Tt(e){return Ct("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function Mt(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function It(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{Et={}.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in St)return St[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),a=n.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=Mt(a.pop());case"rgb":return 3!==a.length?null:[Tt(a[0]),Tt(a[1]),Tt(a[2]),s];case"hsla":if(4!==a.length)return null;s=Mt(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,c=Mt(a[1]),u=Mt(a[2]),d=u<=.5?u*(c+1):u+c-u*c,h=2*u-d;return[Ct(255*It(h,d,l+1/3)),Ct(255*It(h,d,l)),Ct(255*It(h,d,l-1/3)),s];default:return null}}return null}}catch(e){}class Ot{constructor(e,t,n,r=1){this.r=e,this.g=t,this.b=n,this.a=r}static parse(e){if(!e)return;if(e instanceof Ot)return e;if("string"!=typeof e)return;const t=Et(e);return t?new Ot(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,n,r]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(n)},${r})`}toArray(){const{r:e,g:t,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]}toArray01(){const{r:e,g:t,b:n,a:r}=this;return 0===r?[0,0,0,0]:[e/r,t/r,n/r,r]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:n,a:r}=this;return[e,t,n,r]}}Ot.black=new Ot(0,0,0,1),Ot.white=new Ot(1,1,1,1),Ot.transparent=new Ot(0,0,0,0),Ot.red=new Ot(1,0,0,1),Ot.blue=new Ot(0,0,1,1);var At=Ot;class Pt{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Dt{constructor(e,t,n,r,i){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=i}}class Lt{constructor(e){this.sections=e}static fromString(e){return new Lt([new Dt(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof Lt?e:Lt.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const n={};t.fontStack&&(n["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(n["font-scale"]=t.scale),t.textColor&&(n["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(n)}return e}}class Rt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Rt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function zt(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function jt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof At)return!0;if(e instanceof Pt)return!0;if(e instanceof Lt)return!0;if(e instanceof Rt)return!0;if(Array.isArray(e)){for(const t of e)if(!jt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!jt(e[t]))return!1;return!0}return!1}function Nt(e){if(null===e)return lt;if("string"==typeof e)return ut;if("boolean"==typeof e)return dt;if("number"==typeof e)return ct;if(e instanceof At)return ht;if(e instanceof Pt)return mt;if(e instanceof Lt)return gt;if(e instanceof Rt)return vt;if(Array.isArray(e)){const t=e.length;let n;for(const r of e){const e=Nt(r);if(n){if(n===e)continue;n=ft;break}n=e}return yt(n||ft,t)}return pt}function Bt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof At||e instanceof Lt||e instanceof Rt?e.toString():JSON.stringify(e)}class Ft{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!jt(e[1]))return t.error("invalid value");const n=e[1];let r=Nt(n);const i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Ft(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof At?["rgba"].concat(this.value.toArray()):this.value instanceof Lt?this.value.serialize():this.value}}var Vt=Ft,Ut=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const $t={string:ut,number:ct,boolean:dt,object:pt};class Zt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,r=1;const i=e[0];if("array"===i){let i,o;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in $t)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=$t[n],r++}else i=ft;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}n=yt(i,o)}else n=$t[i];const o=[];for(;r<e.length;r++){const n=t.parse(e[r],r,ft);if(!n)return null;o.push(n)}return new Zt(n,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!wt(this.type,Nt(n)))return n;if(t===this.args.length-1)throw new Ut(`Expected value to be of type ${bt(this.type)}, but found ${bt(Nt(n))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);const r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((e=>e.serialize())))}}var Ht=Zt;class Wt{constructor(e){this.type=gt,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const r=[];let i=!1;for(let o=1;o<=e.length-1;++o){const n=e[o];if(i&&"object"==typeof n&&!Array.isArray(n)){i=!1;let e=null;if(n["font-scale"]&&(e=t.parse(n["font-scale"],1,ct),!e))return null;let o=null;if(n["text-font"]&&(o=t.parse(n["text-font"],1,yt(ut)),!o))return null;let a=null;if(n["text-color"]&&(a=t.parse(n["text-color"],1,ht),!a))return null;const s=r[r.length-1];s.scale=e,s.font=o,s.textColor=a}else{const n=t.parse(e[o],1,ft);if(!n)return null;const a=n.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:n,scale:null,font:null,textColor:null})}}return new Wt(r)}evaluate(e){return new Lt(this.sections.map((t=>{const n=t.content.evaluate(e);return Nt(n)===vt?new Dt("",n,null,null,null):new Dt(Bt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const n={};t.scale&&(n["font-scale"]=t.scale.serialize()),t.font&&(n["text-font"]=t.font.serialize()),t.textColor&&(n["text-color"]=t.textColor.serialize()),e.push(n)}return e}}class qt{constructor(e){this.type=vt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,ut);return n?new qt(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=Rt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Gt={"to-boolean":dt,"to-color":ht,"to-number":ct,"to-string":ut};class Kt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const r=Gt[n],i=[];for(let o=1;o<e.length;o++){const n=t.parse(e[o],o,ft);if(!n)return null;i.push(n)}return new Kt(r,i)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,n;for(const r of this.args){if(t=r.evaluate(e),n=null,t instanceof At)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:zt(t[0],t[1],t[2],t[3]),!n))return new At(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Ut(n||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Ut(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?Lt.fromString(Bt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Rt.fromString(Bt(this.args[0].evaluate(e))):Bt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Wt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new qt(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild((t=>{e.push(t.serialize())})),e}}var Yt=Kt;const Xt=["Unknown","Point","LineString","Polygon"];var Jt=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Xt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:n,y:r}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*t-e[0])+this.featureDistanceData.bearing[1]*(r*t-e[1])}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=At.parse(e)),t}};class Qt{constructor(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((e=>e.serialize())))}static parse(e,t){const n=e[0],r=Qt.definitions[n];if(!r)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let s=null;for(const[l,c]of a){s=new Tn(t.registry,t.path,null,t.scope);const r=[];let o=!1;for(let t=1;t<e.length;t++){const n=e[t],i=Array.isArray(l)?l[t-1]:l.type,a=s.parse(n,1+r.length,i);if(!a){o=!0;break}r.push(a)}if(!o)if(Array.isArray(l)&&l.length!==r.length)s.error(`Expected ${l.length} arguments, but found ${r.length} instead.`);else{for(let e=0;e<r.length;e++){const t=Array.isArray(l)?l[e]:l.type,n=r[e];s.concat(e+1).checkSubtype(t,n.type)}if(0===s.errors.length)return new Qt(n,i,c,r)}}if(1===a.length)t.errors.push(...s.errors);else{const n=(a.length?a:o).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(bt).join(", ")})`:`(${bt(t.type)}...)`;var t})).join(" | "),r=[];for(let i=1;i<e.length;i++){const n=t.parse(e[i],1+r.length);if(!n)return null;r.push(bt(n.type))}t.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(e,t){Qt.definitions=t;for(const n in t)e[n]=Qt}}var en=Qt;class tn{constructor(e,t,n){this.type=mt,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,dt);if(!r)return null;const i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,dt);if(!i)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,ut),!o)?null:new tn(r,i,o)}evaluate(e){return new Pt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const nn=8192;function rn(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function on(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function an(e,t){const n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*nn),Math.round(r*i*nn)]}function sn(e,t,n){const r=e[0]-t[0],i=e[1]-t[1],o=e[0]-n[0],a=e[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function ln(e,t){let n=!1;for(let a=0,s=t.length;a<s;a++){const s=t[a];for(let t=0,a=s.length;t<a-1;t++){if(sn(e,s[t],s[t+1]))return!1;(i=s[t])[1]>(r=e)[1]!=(o=s[t+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function cn(e,t){for(let n=0;n<t.length;n++)if(ln(e,t[n]))return!0;return!1}function un(e,t,n,r){const i=r[0]-n[0],o=r[1]-n[1],a=(e[0]-n[0])*o-i*(e[1]-n[1]),s=(t[0]-n[0])*o-i*(t[1]-n[1]);return a>0&&s<0||a<0&&s>0}function dn(e,t,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(a=c[n+1])[0]-(o=c[n])[0],a[1]-o[1]])[0]*(l=[(i=t)[0]-(r=e)[0],i[1]-r[1]])[1]-s[1]*l[0]&&un(r,i,o,a)&&un(o,a,r,i))return!0;var r,i,o,a,s,l;return!1}function hn(e,t){for(let n=0;n<e.length;++n)if(!ln(e[n],t))return!1;for(let n=0;n<e.length-1;++n)if(dn(e[n],e[n+1],t))return!1;return!0}function pn(e,t){for(let n=0;n<t.length;n++)if(hn(e,t[n]))return!0;return!1}function fn(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=[];for(let r=0;r<e[i].length;r++){const a=an(e[i][r],n);rn(t,a),o.push(a)}r.push(o)}return r}function mn(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=fn(e[i],t,n);r.push(o)}return r}function gn(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){const t=.5*r;let i=e[0]-n[0]>t?-r:n[0]-e[0]>t?r:0;0===i&&(i=e[0]-n[2]>t?-r:n[2]-e[0]>t?r:0),e[0]+=i}rn(t,e)}function vn(e,t,n,r){const i=Math.pow(2,r.z)*nn,o=[r.x*nn,r.y*nn],a=[];if(!e)return a;for(const s of e)for(const e of s){const r=[e.x+o[0],e.y+o[1]];gn(r,t,n,i),a.push(r)}return a}function yn(e,t,n,r){const i=Math.pow(2,r.z)*nn,o=[r.x*nn,r.y*nn],a=[];if(!e)return a;for(const l of e){const e=[];for(const n of l){const r=[n.x+o[0],n.y+o[1]];rn(t,r),e.push(r)}a.push(e)}if(t[2]-t[0]<=i/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const r of e)gn(r,t,n,i)}var s;return a}class bn{constructor(e,t){this.type=dt,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(jt(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const n=t.features[e].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new bn(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new bn(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new bn(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const o=fn(t.coordinates,r,i),a=vn(e.geometry(),n,r,i);if(!on(n,r))return!1;for(const e of a)if(!ln(e,o))return!1}if("MultiPolygon"===t.type){const o=mn(t.coordinates,r,i),a=vn(e.geometry(),n,r,i);if(!on(n,r))return!1;for(const e of a)if(!cn(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const o=fn(t.coordinates,r,i),a=yn(e.geometry(),n,r,i);if(!on(n,r))return!1;for(const e of a)if(!hn(e,o))return!1}if("MultiPolygon"===t.type){const o=mn(t.coordinates,r,i),a=yn(e.geometry(),n,r,i);if(!on(n,r))return!1;for(const e of a)if(!pn(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var xn=bn;function wn(e){if(e instanceof en){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof xn)return!1;let t=!0;return e.eachChild((e=>{t&&!wn(e)&&(t=!1)})),t}function _n(e){if(e instanceof en&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!_n(e)&&(t=!1)})),t}function kn(e,t){if(e instanceof en&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild((e=>{n&&!kn(e,t)&&(n=!1)})),n}class En{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new En(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Sn=En;class Cn{constructor(e,t=[],n,r=new st,i=[]){this.registry=e,this.path=t,this.key=t.map((e=>`[${e}]`)).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(e,t,n,r,i={}){return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}_parse(e,t){function n(e,t,n){return"assert"===n?new Ht(t,[e]):"coerce"===n?new Yt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(e,this);if(!r)return null;if(this.expectedType){const e=this.expectedType,i=r.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(e,i))return null}else r=n(r,e,t.typeAnnotation||"coerce");else r=n(r,e,t.typeAnnotation||"assert")}if(!(r instanceof Vt)&&"resolvedImage"!==r.type.kind&&Mn(r)){const t=new Jt;try{r=new Vt(r.type,r.evaluate(t))}catch(e){return this.error(e.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new Cn(this.registry,r,t||null,i,this.errors)}error(e,...t){const n=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new ot(n,e))}checkSubtype(e,t){const n=wt(e,t);return n&&this.error(n),n}}var Tn=Cn;function Mn(e){if(e instanceof Sn)return Mn(e.boundExpression);if(e instanceof en&&"error"===e.name)return!1;if(e instanceof tn)return!1;if(e instanceof xn)return!1;const t=e instanceof Yt||e instanceof Ht;let n=!0;return e.eachChild((e=>{n=t?n&&Mn(e):n&&e instanceof Vt})),!!n&&wn(e)&&kn(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function In(e,t){const n=e.length-1;let r,i,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=e[s],i=e[s+1],r<=t){if(s===n||t<i)return s;o=s+1}else{if(!(r>t))throw new Ut("Input is not a number.");a=s-1}return 0}class On{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,i]of n)this.labels.push(r),this.outputs.push(i)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,ct);if(!n)return null;const r=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let o=1;o<e.length;o+=2){const n=1===o?-1/0:e[o],a=e[o+1],s=o,l=o+1;if("number"!=typeof n)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=n)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(a,l,i);if(!c)return null;i=i||c.type,r.push([n,c])}return new On(i,n,r)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[In(t,r)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var An=On;function Pn(e,t,n){return e*(1-n)+t*n}var Dn=Object.freeze({__proto__:null,array:function(e,t,n){return e.map(((e,r)=>Pn(e,t[r],n)))},color:function(e,t,n){return new At(Pn(e.r,t.r,n),Pn(e.g,t.g,n),Pn(e.b,t.b,n),Pn(e.a,t.a,n))},number:Pn});const Ln=.95047,Rn=1.08883,zn=4/29,jn=6/29,Nn=3*jn*jn,Bn=jn*jn*jn,Fn=Math.PI/180,Vn=180/Math.PI;function Un(e){return e>Bn?Math.pow(e,1/3):e/Nn+zn}function $n(e){return e>jn?e*e*e:Nn*(e-zn)}function Zn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Hn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Wn(e){const t=Hn(e.r),n=Hn(e.g),r=Hn(e.b),i=Un((.4124564*t+.3575761*n+.1804375*r)/Ln),o=Un((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Un((.0193339*t+.119192*n+.9503041*r)/Rn)),alpha:e.a}}function qn(e){let t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*$n(t),n=Ln*$n(n),r=Rn*$n(r),new At(Zn(3.2404542*n-1.5371385*t-.4985314*r),Zn(-.969266*n+1.8760108*t+.041556*r),Zn(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function Gn(e,t,n){const r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const Kn={forward:Wn,reverse:qn,interpolate:function(e,t,n){return{l:Pn(e.l,t.l,n),a:Pn(e.a,t.a,n),b:Pn(e.b,t.b,n),alpha:Pn(e.alpha,t.alpha,n)}}},Yn={forward:function(e){const{l:t,a:n,b:r}=Wn(e),i=Math.atan2(r,n)*Vn;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:t,alpha:e.a}},reverse:function(e){const t=e.h*Fn,n=e.c;return qn({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:Gn(e.h,t.h,n),c:Pn(e.c,t.c,n),l:Pn(e.l,t.l,n),alpha:Pn(e.alpha,t.alpha,n)}}};var Xn=Object.freeze({__proto__:null,hcl:Yn,lab:Kn});class Jn{constructor(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of i)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(e,t,n,r){let i=0;if("exponential"===e.name)i=Qn(t,e.base,n,r);else if("linear"===e.name)i=Qn(t,1,n,r);else if("cubic-bezier"===e.name){const o=e.controlPoints;i=new m(o[0],o[1],o[2],o[3]).solve(Qn(t,1,n,r))}return i}static parse(e,t){let[n,r,i,...o]=e;if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const e=r[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:e}}else{if("cubic-bezier"!==r[0])return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const e=r.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,ct),!i)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=ht:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let l=0;l<o.length;l+=2){const e=o[l],n=o[l+1],r=l+3,i=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(a.length&&a[a.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=t.parse(n,i,s);if(!c)return null;s=s||c.type,a.push([e,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Jn(s,n,r,i,a):t.error(`Type ${bt(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);const o=In(t,r),a=Jn.interpolationFactor(this.interpolation,r,t[o],t[o+1]),s=n[o].evaluate(e),l=n[o+1].evaluate(e);return"interpolate"===this.operator?Dn[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?Yn.reverse(Yn.interpolate(Yn.forward(s),Yn.forward(l),a)):Kn.reverse(Kn.interpolate(Kn.forward(s),Kn.forward(l),a))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t}}function Qn(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}var er=Jn;class tr{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const r=t.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const a of e.slice(1)){const e=t.parse(a,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,i.push(e)}const o=r&&i.some((e=>wt(r,e.type)));return new tr(o?ft:n,i)}evaluate(e){let t,n=null,r=0;for(const i of this.args){if(r++,n=i.evaluate(e),n&&n instanceof Rt&&!n.available&&(t||(t=n),n=null,r===this.args.length))return t;if(null!==n)break}return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=["coalesce"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var nr=tr;class rr{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let i=1;i<e.length-1;i+=2){const r=e[i];if("string"!=typeof r)return t.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=t.parse(e[i+1],i+1);if(!o)return null;n.push([r,o])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return r?new rr(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,n]of this.bindings)e.push(t,n.serialize());return e.push(this.result.serialize()),e}}var ir=rr;class or{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ct),r=t.parse(e[2],2,yt(t.expectedType||ft));return n&&r?new or(r.type.itemType,n,r):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Ut(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new Ut(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new Ut(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ar=or;class sr{constructor(e,t){this.type=dt,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ft),r=t.parse(e[2],2,ft);return n&&r?_t(n.type,[dt,ut,ct,lt,ft])?new sr(n,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${bt(n.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(null==n)return!1;if(!kt(t,["boolean","string","number","null"]))throw new Ut(`Expected first argument to be of type boolean, string, number or null, but found ${bt(Nt(t))} instead.`);if(!kt(n,["string","array"]))throw new Ut(`Expected second argument to be of type array or string, but found ${bt(Nt(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var lr=sr;class cr{constructor(e,t,n){this.type=ct,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ft),r=t.parse(e[2],2,ft);if(!n||!r)return null;if(!_t(n.type,[dt,ut,ct,lt,ft]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${bt(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,ct);return i?new cr(n,r,i):null}return new cr(n,r)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!kt(t,["boolean","string","number","null"]))throw new Ut(`Expected first argument to be of type boolean, string, number or null, but found ${bt(Nt(t))} instead.`);if(!kt(n,["string","array"]))throw new Ut(`Expected second argument to be of type array or string, but found ${bt(Nt(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var ur=cr;class dr{constructor(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const i={},o=[];for(let l=2;l<e.length-1;l+=2){let a=e[l];const s=e[l+1];Array.isArray(a)||(a=[a]);const c=t.concat(l);if(0===a.length)return c.error("Expected at least one branch label.");for(const e of a){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,Nt(e)))return null}else n=Nt(e);if(void 0!==i[String(e)])return c.error("Branch labels must be unique.");i[String(e)]=o.length}const u=t.parse(s,l,r);if(!u)return null;r=r||u.type,o.push(u)}const a=t.parse(e[1],1,ft);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,r);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(n,a.type)?null:new dr(n,r,a,i,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(Nt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),n=[],r={};for(const o of t){const e=r[this.cases[o]];void 0===e?(r[this.cases[o]]=n.length,n.push([this.cases[o],[o]])):n[e][1].push(o)}const i=e=>"number"===this.inputType.kind?Number(e):e;for(const[o,a]of n)e.push(1===a.length?i(a[0]):a.map(i)),e.push(this.outputs[o].serialize());return e.push(this.otherwise.serialize()),e}}var hr=dr;class pr{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const r=[];for(let o=1;o<e.length-1;o+=2){const i=t.parse(e[o],o,dt);if(!i)return null;const a=t.parse(e[o+1],o+1,n);if(!a)return null;r.push([i,a]),n=n||a.type}const i=t.parse(e[e.length-1],e.length-1,n);return i?new pr(n,r,i):null}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var fr=pr;class mr{constructor(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ft),r=t.parse(e[2],2,ct);if(!n||!r)return null;if(!_t(n.type,[yt(ft),ut,ft]))return t.error(`Expected first argument to be of type array or string, but found ${bt(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,ct);return i?new mr(n.type,n,r,i):null}return new mr(n.type,n,r)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!kt(t,["string","array"]))throw new Ut(`Expected first argument to be of type array or string, but found ${bt(Nt(t))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var gr=mr;function vr(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function yr(e,t,n,r){return 0===r.compare(t,n)}function br(e,t,n){const r="=="!==e&&"!="!==e;return class i{constructor(e,t,n){this.type=dt,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let o=t.parse(e[1],1,ft);if(!o)return null;if(!vr(n,o.type))return t.concat(1).error(`"${n}" comparisons are not supported for type '${bt(o.type)}'.`);let a=t.parse(e[2],2,ft);if(!a)return null;if(!vr(n,a.type))return t.concat(2).error(`"${n}" comparisons are not supported for type '${bt(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error(`Cannot compare types '${bt(o.type)}' and '${bt(a.type)}'.`);r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Ht(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Ht(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,mt),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const t=Nt(o),n=Nt(a);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new Ut(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const e=Nt(o),n=Nt(a);if("string"!==e.kind||"string"!==n.kind)return t(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):t(i,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild((e=>{t.push(e.serialize())})),t}}}const xr=br("==",(function(e,t,n){return t===n}),yr),wr=br("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!yr(0,t,n,r)})),_r=br("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),kr=br(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),Er=br("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),Sr=br(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0}));class Cr{constructor(e,t,n,r,i,o){this.type=ut,this.number=e,this.locale=t,this.currency=n,this.unit=r,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,ct);if(!n)return null;const r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=t.parse(r.locale,1,ut),!i))return null;let o=null;if(r.currency&&(o=t.parse(r.currency,1,ut),!o))return null;let a=null;if(r.unit&&(a=t.parse(r.unit,1,ut),!a))return null;let s=null;if(r["min-fraction-digits"]&&(s=t.parse(r["min-fraction-digits"],1,ct),!s))return null;let l=null;return r["max-fraction-digits"]&&(l=t.parse(r["max-fraction-digits"],1,ct),!l)?null:new Cr(n,i,o,a,s,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Tr{constructor(e){this.type=ct,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error(`Expected argument of type string or array, but found ${bt(n.type)} instead.`):new Tr(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Ut(`Expected value to be of type string or array, but found ${bt(Nt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild((t=>{e.push(t.serialize())})),e}}const Mr={"==":xr,"!=":wr,">":kr,"<":_r,">=":Sr,"<=":Er,array:Ht,at:ar,boolean:Ht,case:fr,coalesce:nr,collator:tn,format:Wt,image:qt,in:lr,"index-of":ur,interpolate:er,"interpolate-hcl":er,"interpolate-lab":er,length:Tr,let:ir,literal:Vt,match:hr,number:Ht,"number-format":Cr,object:Ht,slice:gr,step:An,string:Ht,"to-boolean":Yt,"to-color":Yt,"to-number":Yt,"to-string":Yt,var:Sn,within:xn};function Ir(e,[t,n,r,i]){t=t.evaluate(e),n=n.evaluate(e),r=r.evaluate(e);const o=i?i.evaluate(e):1,a=zt(t,n,r,o);if(a)throw new Ut(a);return new At(t/255*o,n/255*o,r/255*o,o)}function Or(e,t){return e in t}function Ar(e,t){const n=t[e];return void 0===n?null:n}function Pr(e){return{type:e}}en.register(Mr,{error:[{kind:"error"},[ut],(e,[t])=>{throw new Ut(t.evaluate(e))}],typeof:[ut,[ft],(e,[t])=>bt(Nt(t.evaluate(e)))],"to-rgba":[yt(ct,4),[ht],(e,[t])=>t.evaluate(e).toArray()],rgb:[ht,[ct,ct,ct],Ir],rgba:[ht,[ct,ct,ct,ct],Ir],has:{type:dt,overloads:[[[ut],(e,[t])=>Or(t.evaluate(e),e.properties())],[[ut,pt],(e,[t,n])=>Or(t.evaluate(e),n.evaluate(e))]]},get:{type:ft,overloads:[[[ut],(e,[t])=>Ar(t.evaluate(e),e.properties())],[[ut,pt],(e,[t,n])=>Ar(t.evaluate(e),n.evaluate(e))]]},"feature-state":[ft,[ut],(e,[t])=>Ar(t.evaluate(e),e.featureState||{})],properties:[pt,[],e=>e.properties()],"geometry-type":[ut,[],e=>e.geometryType()],id:[ft,[],e=>e.id()],zoom:[ct,[],e=>e.globals.zoom],pitch:[ct,[],e=>e.globals.pitch||0],"distance-from-center":[ct,[],e=>e.distanceFromCenter()],"heatmap-density":[ct,[],e=>e.globals.heatmapDensity||0],"line-progress":[ct,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[ct,[],e=>e.globals.skyRadialProgress||0],accumulated:[ft,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[ct,Pr(ct),(e,t)=>{let n=0;for(const r of t)n+=r.evaluate(e);return n}],"*":[ct,Pr(ct),(e,t)=>{let n=1;for(const r of t)n*=r.evaluate(e);return n}],"-":{type:ct,overloads:[[[ct,ct],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[ct],(e,[t])=>-t.evaluate(e)]]},"/":[ct,[ct,ct],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[ct,[ct,ct],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[ct,[],()=>Math.LN2],pi:[ct,[],()=>Math.PI],e:[ct,[],()=>Math.E],"^":[ct,[ct,ct],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[ct,[ct],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[ct,[ct],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[ct,[ct],(e,[t])=>Math.log(t.evaluate(e))],log2:[ct,[ct],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[ct,[ct],(e,[t])=>Math.sin(t.evaluate(e))],cos:[ct,[ct],(e,[t])=>Math.cos(t.evaluate(e))],tan:[ct,[ct],(e,[t])=>Math.tan(t.evaluate(e))],asin:[ct,[ct],(e,[t])=>Math.asin(t.evaluate(e))],acos:[ct,[ct],(e,[t])=>Math.acos(t.evaluate(e))],atan:[ct,[ct],(e,[t])=>Math.atan(t.evaluate(e))],min:[ct,Pr(ct),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[ct,Pr(ct),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[ct,[ct],(e,[t])=>Math.abs(t.evaluate(e))],round:[ct,[ct],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[ct,[ct],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[ct,[ct],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[dt,[ut,ft],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[dt,[ft],(e,[t])=>e.id()===t.value],"filter-type-==":[dt,[ut],(e,[t])=>e.geometryType()===t.value],"filter-<":[dt,[ut,ft],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[dt,[ft],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<r}],"filter->":[dt,[ut,ft],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[dt,[ft],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>r}],"filter-<=":[dt,[ut,ft],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[dt,[ft],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<=r}],"filter->=":[dt,[ut,ft],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[dt,[ft],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>=r}],"filter-has":[dt,[ft],(e,[t])=>t.value in e.properties()],"filter-has-id":[dt,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[dt,[yt(ut)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[dt,[yt(ft)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[dt,[ut,yt(ft)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[dt,[ut,yt(ft)],(e,[t,n])=>function(e,t,n,r){for(;n<=r;){const i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:dt,overloads:[[[dt,dt],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[Pr(dt),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:dt,overloads:[[[dt,dt],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[Pr(dt),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[dt,[dt],(e,[t])=>!t.evaluate(e)],"is-supported-script":[dt,[ut],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return!n||n(t.evaluate(e))}],upcase:[ut,[ut],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[ut,[ut],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[ut,Pr(ft),(e,t)=>t.map((t=>Bt(t.evaluate(e)))).join("")],"resolved-locale":[ut,[mt],(e,[t])=>t.evaluate(e).resolvedLocale()]});var Dr=Mr;function Lr(e){return{result:"success",value:e}}function Rr(e){return{result:"error",value:e}}function zr(e){return"data-driven"===e["property-type"]}function jr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Nr(e){return!!e.expression&&e.expression.interpolated}function Br(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Fr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Vr(e){return e}function Ur(e,t){const n="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],i=r||!(r||void 0!==e.property),o=e.type||(Nr(t)?"exponential":"interval");if(n&&((e=tt({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],At.parse(e[1])]))),e.default=At.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Xn[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let a,s,l;if("exponential"===o)a=Wr;else if("interval"===o)a=Hr;else if("categorical"===o){a=Zr,s=Object.create(null);for(const t of e.stops)s[t[0]]=t[1];l=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);a=qr}if(r){const n={},r=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],o=i[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},r.push(o)),n[o].stops.push([i[0].value,i[1]])}const i=[];for(const e of r)i.push([n[e].zoom,Ur(n[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:er.interpolationFactor.bind(void 0,o),zoomStops:i.map((e=>e[0])),evaluate:({zoom:n},r)=>Wr({stops:i,base:e.base},t,n).evaluate(n,r)}}if(i){const n="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:er.interpolationFactor.bind(void 0,n),zoomStops:e.stops.map((e=>e[0])),evaluate:({zoom:n})=>a(e,t,n,s,l)}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[e.property]:void 0;return void 0===i?$r(e.default,t.default):a(e,t,i,s,l)}}}function $r(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Zr(e,t,n,r,i){return $r(typeof n===i?r[n]:void 0,e.default,t.default)}function Hr(e,t,n){if("number"!==Br(n))return $r(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];const i=In(e.stops.map((e=>e[0])),n);return e.stops[i][1]}function Wr(e,t,n){const r=void 0!==e.base?e.base:1;if("number"!==Br(n))return $r(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const o=In(e.stops.map((e=>e[0])),n),a=function(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1];let c=Dn[t.type]||Vr;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=Xn[e.colorSpace];c=(e,n)=>t.reverse(t.interpolate(t.forward(e),t.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(...e){const t=s.evaluate.apply(void 0,e),n=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==n)return c(t,n,a)}}:c(s,l,a)}function qr(e,t,n){return"color"===t.type?n=At.parse(n):"formatted"===t.type?n=Lt.fromString(n.toString()):"resolvedImage"===t.type?n=Rt.fromString(n.toString()):Br(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),$r(n,e.default,t.default)}class Gr{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Jt,this._defaultValue=t?function(e){return"color"===e.type&&(Fr(e.default)||Array.isArray(e.default))?new At(0,0,0,0):"color"===e.type?At.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,r,i,o,a,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,r,i,o,a,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new Ut(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function Kr(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Dr}function Yr(e,t){const n=new Tn(Dr,[],t?function(e){const t={color:ht,string:ut,number:ct,enum:ut,boolean:dt,formatted:gt,resolvedImage:vt};return"array"===e.type?yt(t[e.value]||ft,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Lr(new Gr(r,t)):Rr(n.errors)}class Xr{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!_n(t.expression)}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}}class Jr{constructor(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!_n(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}interpolationFactor(e,t,n){return this.interpolationType?er.interpolationFactor(this.interpolationType,e,t,n):0}}function Qr(e,t){if("error"===(e=Yr(e,t)).result)return e;const n=e.value.expression,r=wn(n);if(!r&&!zr(t))return Rr([new ot("","data expressions not supported")]);const i=kn(n,["zoom","pitch","distance-from-center"]);if(!i&&!jr(t))return Rr([new ot("","zoom expressions not supported")]);const o=ti(n);return o||i?o instanceof ot?Rr([o]):o instanceof er&&!Nr(t)?Rr([new ot("",'"interpolate" expressions cannot be used with this property')]):Lr(o?new Jr(r?"camera":"composite",e.value,o.labels,o instanceof er?o.interpolation:void 0):new Xr(r?"constant":"source",e.value)):Rr([new ot("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ei{constructor(e,t){this._parameters=e,this._specification=t,tt(this,Ur(this._parameters,this._specification))}static deserialize(e){return new ei(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function ti(e){let t=null;if(e instanceof ir)t=ti(e.result);else if(e instanceof nr){for(const n of e.args)if(t=ti(n),t)break}else(e instanceof An||e instanceof er)&&e.input instanceof en&&"zoom"===e.input.name&&(t=e);return t instanceof ot||e.eachChild((e=>{const n=ti(e);n instanceof ot?t=n:!t&&n?t=new ot("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new ot("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}class ni{constructor(e,t,n,r){this.message=(e?`${e}: `:"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)}}function ri(e){const t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec;let s=[];const l=Br(n);if("object"!==l)return[new ni(t,n,`object expected, ${l} found`)];for(const c in n){const e=c.split(".")[0];let l;i[e]?l=i[e]:r[e]?l=ji:i["*"]?l=i["*"]:r["*"]&&(l=ji),l?s=s.concat(l({key:(t?`${t}.`:t)+c,value:n[c],valueSpec:r[e]||r["*"],style:o,styleSpec:a,object:n,objectKey:c},n)):s.push(new ni(t,n[c],`unknown property "${c}"`))}for(const c in r)i[c]||r[c].required&&void 0===r[c].default&&void 0===n[c]&&s.push(new ni(t,n,`missing required property "${c}"`));return s}function ii(e){const t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||ji;if("array"!==Br(t))return[new ni(o,t,`array expected, ${Br(t)} found`)];if(n.length&&t.length!==n.length)return[new ni(o,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new ni(o,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};i.$version<7&&(s.function=n.function),"object"===Br(n.value)&&(s=n.value);let l=[];for(let c=0;c<t.length;c++)l=l.concat(a({array:t,arrayIndex:c,value:t[c],valueSpec:s,style:r,styleSpec:i,key:`${o}[${c}]`}));return l}function oi(e){const t=e.key,n=e.value,r=e.valueSpec;let i=Br(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new ni(t,n,`number expected, ${i} found`)];if("minimum"in r){let i=r.minimum;if("array"===Br(r.minimum)&&(i=r.minimum[e.arrayIndex]),n<i)return[new ni(t,n,`${n} is less than the minimum value ${i}`)]}if("maximum"in r){let i=r.maximum;if("array"===Br(r.maximum)&&(i=r.maximum[e.arrayIndex]),n>i)return[new ni(t,n,`${n} is greater than the maximum value ${i}`)]}return[]}function ai(e){const t=e.valueSpec,n=nt(e.value.type);let r,i,o,a={};const s="categorical"!==n&&void 0===e.value.property,l=!s,c="array"===Br(e.value.stops)&&"array"===Br(e.value.stops[0])&&"object"===Br(e.value.stops[0][0]),u=ri({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new ni(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const r=e.value;return t=t.concat(ii({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:d})),"array"===Br(r)&&0===r.length&&t.push(new ni(e.key,r,"array must have at least one stop")),t},default:function(e){return ji({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&s&&u.push(new ni(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||u.push(new ni(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!Nr(e.valueSpec)&&u.push(new ni(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!zr(e.valueSpec)?u.push(new ni(e.key,e.value,"property functions not supported")):s&&!jr(e.valueSpec)&&u.push(new ni(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==e.value.property||u.push(new ni(e.key,e.value,'"property" property is required')),u;function d(e){let n=[];const r=e.value,s=e.key;if("array"!==Br(r))return[new ni(s,r,`array expected, ${Br(r)} found`)];if(2!==r.length)return[new ni(s,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==Br(r[0]))return[new ni(s,r,`object expected, ${Br(r[0])} found`)];if(void 0===r[0].zoom)return[new ni(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new ni(s,r,"object stop key must have value")];const t=nt(r[0].zoom);if("number"!=typeof t)return[new ni(s,r[0].zoom,"stop zoom values must be numbers")];if(o&&o>t)return[new ni(s,r[0].zoom,"stop zoom values must appear in ascending order")];t!==o&&(o=t,i=void 0,a={}),n=n.concat(ri({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:oi,value:h}}))}else n=n.concat(h({key:`${s}[0]`,value:r[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},r));return Kr(rt(r[1]))?n.concat([new ni(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(ji({key:`${s}[1]`,value:r[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function h(e,o){const s=Br(e.value),l=nt(e.value),c=null!==e.value?e.value:o;if(r){if(s!==r)return[new ni(e.key,c,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new ni(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r=`number expected, ${s} found`;return zr(t)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ni(e.key,c,r)]}return"categorical"!==n||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&"number"==typeof l&&"number"==typeof i&&void 0!==i&&l<i?[new ni(e.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in a?[new ni(e.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new ni(e.key,c,`integer expected, found ${String(l)}`)]}}function si(e){const t=("property"===e.expressionContext?Qr:Yr)(rt(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new ni(`${e.key}${t.key}`,e.value,t.message)));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new ni(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!_n(n))return[new ni(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return li(n,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!kn(n,["zoom","feature-state"]))return[new ni(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!wn(n))return[new ni(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function li(e,t){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const i of t.valueSpec.expression.parameters)n.delete(i);if(0===n.size)return[];const r=[];return e instanceof en&&n.has(e.name)?[new ni(t.key,t.value,`["${e.name}"] expression is not supported in a filter for a ${t.object.type} layer with id: ${t.object.id}`)]:(e.eachChild((e=>{r.push(...li(e,t))})),r)}function ci(e){const t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(nt(n))&&i.push(new ni(t,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(nt(n))&&i.push(new ni(t,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function ui(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!ui(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function di(e,t="fill"){if(null==e)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ui(e)||(e=yi(e));const n=e;let r=!0;try{r=function(e){if(!fi(e))return e;let t=rt(e);return pi(t),t=hi(t),t}(n)}catch(e){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(n,null,2)}\n        `)}const i=et[`filter_${t}`],o=Yr(r,i);let a=null;if("error"===o.result)throw new Error(o.value.map((e=>`${e.key}: ${e.message}`)).join(", "));a=(e,t,n)=>o.value.evaluate(e,t,{},n);let s=null,l=null;if(r!==n){const e=Yr(n,i);if("error"===e.result)throw new Error(e.value.map((e=>`${e.key}: ${e.message}`)).join(", "));s=(t,n,r,i,o)=>e.value.evaluate(t,n,{},r,void 0,void 0,i,o),l=!wn(e.value.expression)}return{filter:a,dynamicFilter:s||void 0,needGeometry:vi(r),needFeature:!!l}}function hi(e){if(!Array.isArray(e))return e;const t=function(e){if(mi.has(e[0]))for(let t=1;t<e.length;t++)if(fi(e[t]))return!0;return e}(e);return!0===t?t:t.map((e=>hi(e)))}function pi(e){let t=!1;const n=[];if("case"===e[0]){for(let r=1;r<e.length-1;r+=2)t=t||fi(e[r]),n.push(e[r+1]);n.push(e[e.length-1])}else if("match"===e[0]){t=t||fi(e[1]);for(let t=2;t<e.length-1;t+=2)n.push(e[t+1]);n.push(e[e.length-1])}else if("step"===e[0]){t=t||fi(e[1]);for(let t=1;t<e.length-1;t+=2)n.push(e[t+1])}t&&(e.length=0,e.push("any",...n));for(let r=1;r<e.length;r++)pi(e[r])}function fi(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;var t;for(let n=1;n<e.length;n++)if(fi(e[n]))return!0;return!1}const mi=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function gi(e,t){return e<t?-1:e>t?1:0}function vi(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(vi(e[t]))return!0;return!1}function yi(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?bi(e[1],e[2],"=="):"!="===t?_i(bi(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?bi(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(yi))):"all"===t?["all"].concat(e.slice(1).map(yi)):"none"===t?["all"].concat(e.slice(1).map(yi).map(_i)):"in"===t?xi(e[1],e.slice(2)):"!in"===t?_i(xi(e[1],e.slice(2))):"has"===t?wi(e[1]):"!has"===t?_i(wi(e[1])):"within"!==t||e;var n}function bi(e,t,n){switch(e){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,e,t]}}function xi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(gi)]]:["filter-in-small",e,["literal",t]]}}function wi(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function _i(e){return["!",e]}function ki(e){return ui(rt(e.value))?si(tt({},e,{expressionContext:"filter",valueSpec:e.styleSpec[`filter_${e.layerType||"fill"}`]})):Ei(e)}function Ei(e){const t=e.value,n=e.key;if("array"!==Br(t))return[new ni(n,t,`array expected, ${Br(t)} found`)];const r=e.styleSpec;let i,o=[];if(t.length<1)return[new ni(n,t,"filter array must have at least 1 element")];switch(o=o.concat(ci({key:`${n}[0]`,value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),nt(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===nt(t[1])&&o.push(new ni(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&o.push(new ni(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=Br(t[1]),"string"!==i&&o.push(new ni(`${n}[1]`,t[1],`string expected, ${i} found`)));for(let a=2;a<t.length;a++)i=Br(t[a]),"$type"===nt(t[1])?o=o.concat(ci({key:`${n}[${a}]`,value:t[a],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new ni(`${n}[${a}]`,t[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<t.length;r++)o=o.concat(Ei({key:`${n}[${r}]`,value:t[r],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Br(t[1]),2!==t.length?o.push(new ni(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new ni(`${n}[1]`,t[1],`string expected, ${i} found`));break;case"within":i=Br(t[1]),2!==t.length?o.push(new ni(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==i&&o.push(new ni(`${n}[1]`,t[1],`object expected, ${i} found`))}return o}function Si(e,t){const n=e.key,r=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i[`${t}_${e.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return ji({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const c=e.valueSpec||s[a];if(!c)return[new ni(n,o,`unknown property "${a}"`)];let u;if("string"===Br(o)&&zr(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o))){const e=`\`{ "type": "identity", "property": ${u?JSON.stringify(u[1]):'"_"'} }\``;return[new ni(n,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: ${e}.`)]}const d=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&d.push(new ni(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Fr(rt(o))&&"identity"===nt(o.type)&&d.push(new ni(n,o,'"text-font" does not support identity functions'))),d.concat(ji({key:e.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function Ci(e){return Si(e,"paint")}function Ti(e){return Si(e,"layout")}function Mi(e){let t=[];const n=e.value,r=e.key,i=e.style,o=e.styleSpec;n.type||n.ref||t.push(new ni(r,n,'either "type" or "ref" is required'));let a=nt(n.type);const s=nt(n.ref);if(n.id){const o=nt(n.id);for(let a=0;a<e.arrayIndex;a++){const e=i.layers[a];nt(e.id)===o&&t.push(new ni(r,n.id,`duplicate layer id "${n.id}", previously used at line ${e.id.__line__}`))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in n&&t.push(new ni(r,n[e],`"${e}" is prohibited for ref layers`))})),i.layers.forEach((t=>{nt(t.id)===s&&(e=t)})),e?e.ref?t.push(new ni(r,n.ref,"ref cannot reference another ref layer")):a=nt(e.type):"string"==typeof s&&t.push(new ni(r,n.ref,`ref layer "${s}" not found`))}else if("background"!==a&&"sky"!==a)if(n.source){const e=i.sources&&i.sources[n.source],o=e&&nt(e.type);e?"vector"===o&&"raster"===a?t.push(new ni(r,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==a?t.push(new ni(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?t.push(new ni(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===o&&e.lineMetrics||t.push(new ni(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new ni(r,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new ni(r,n.source,`source "${n.source}" not found`))}else t.push(new ni(r,n,'missing required property "source"'));return t=t.concat(ri({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ji({key:`${r}.type`,value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"}),filter:e=>ki(tt({layerType:a},e)),layout:e=>ri({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Ti(tt({layerType:a},e))}}),paint:e=>ri({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Ci(tt({layerType:a},e))}})}})),t}function Ii(e){const t=e.value,n=e.key,r=Br(t);return"string"!==r?[new ni(n,t,`string expected, ${r} found`)]:[]}const Oi={promoteId:function({key:e,value:t}){if("string"===Br(t))return Ii({key:e,value:t});{const n=[];for(const r in t)n.push(...Ii({key:`${e}.${r}`,value:t[r]}));return n}}};function Ai(e){const t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new ni(n,t,'"type" is required')];const o=nt(t.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=ri({key:n,value:t,valueSpec:r[`source_${o.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:Oi}),a;case"geojson":if(a=ri({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Oi}),t.cluster)for(const e in t.clusterProperties){const[r,i]=t.clusterProperties[e],o="string"==typeof r?[r,["accumulated"],["get",e]]:r;a.push(...si({key:`${n}.${e}.map`,value:i,expressionContext:"cluster-map"})),a.push(...si({key:`${n}.${e}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return ri({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return ri({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new ni(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ci({key:`${n}.type`,value:t.type,valueSpec:{values:Pi(r)},style:i,styleSpec:r})}}function Pi(e){return e.source.reduce(((t,n)=>{const r=e[n];return"enum"===r.type.type&&(t=t.concat(Object.keys(r.type.values))),t}),[])}function Di(e){const t=e.value,n=e.styleSpec,r=n.light,i=e.style;let o=[];const a=Br(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new ni("light",t,`object expected, ${a} found`)]),o;for(const s in t){const e=s.match(/^(.*)-transition$/);o=o.concat(e&&r[e[1]]&&r[e[1]].transition?ji({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?ji({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}):[new ni(s,t[s],`unknown property "${s}"`)])}return o}function Li(e){const t=e.value,n=e.key,r=e.style,i=e.styleSpec,o=i.terrain;let a=[];const s=Br(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new ni("terrain",t,`object expected, ${s} found`)]),a;for(const l in t){const e=l.match(/^(.*)-transition$/);a=a.concat(e&&o[e[1]]&&o[e[1]].transition?ji({key:l,value:t[l],valueSpec:i.transition,style:r,styleSpec:i}):o[l]?ji({key:l,value:t[l],valueSpec:o[l],style:r,styleSpec:i}):[new ni(l,t[l],`unknown property "${l}"`)])}if(t.source){const e=r.sources&&r.sources[t.source],i=e&&nt(e.type);e?"raster-dem"!==i&&a.push(new ni(n,t.source,`terrain cannot be used with a source of type ${String(i)}, it only be used with a "raster-dem" source type`)):a.push(new ni(n,t.source,`source "${t.source}" not found`))}else a.push(new ni(n,t,'terrain is missing required property "source"'));return a}function Ri(e){const t=e.value,n=e.style,r=e.styleSpec,i=r.fog;let o=[];const a=Br(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new ni("fog",t,`object expected, ${a} found`)]),o;for(const s in t){const e=s.match(/^(.*)-transition$/);o=o.concat(e&&i[e[1]]&&i[e[1]].transition?ji({key:s,value:t[s],valueSpec:r.transition,style:n,styleSpec:r}):i[s]?ji({key:s,value:t[s],valueSpec:i[s],style:n,styleSpec:r}):[new ni(s,t[s],`unknown property "${s}"`)])}return o}const zi={"*":()=>[],array:ii,boolean:function(e){const t=e.value,n=e.key,r=Br(t);return"boolean"!==r?[new ni(n,t,`boolean expected, ${r} found`)]:[]},number:oi,color:function(e){const t=e.key,n=e.value,r=Br(n);return"string"!==r?[new ni(t,n,`color expected, ${r} found`)]:null===Et(n)?[new ni(t,n,`color expected, "${n}" found`)]:[]},enum:ci,filter:ki,function:ai,layer:Mi,object:ri,source:Ai,light:Di,terrain:Li,fog:Ri,string:Ii,formatted:function(e){return 0===Ii(e).length?[]:si(e)},resolvedImage:function(e){return 0===Ii(e).length?[]:si(e)},projection:function(e){const t=e.value,n=e.styleSpec,r=n.projection,i=e.style;let o=[];const a=Br(t);if("object"===a)for(const s in t)o=o.concat(ji({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}));else"string"!==a&&(o=o.concat([new ni("projection",t,`object or string expected, ${a} found`)]));return o}};function ji(e){const t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Fr(nt(t))?ai(e):n.expression&&Kr(rt(t))?si(e):n.type&&zi[n.type]?zi[n.type](e):ri(tt({},e,{valueSpec:n.type?r[n.type]:n}))}function Ni(e){const t=e.value,n=e.key,r=Ii(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new ni(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new ni(n,t,'"glyphs" url must include a "{range}" token'))),r}function Bi(e,t=et){return Ui(ji({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Ni,"*":()=>[]}}))}const Fi=e=>Ui(Ci(e)),Vi=e=>Ui(Ti(e));function Ui(e){return e.slice().sort(((e,t)=>e.line&&t.line?e.line-t.line:0))}function $i(e,t){let n=!1;if(t&&t.length)for(const r of t)e.fire(new Je(new Error(r.message))),n=!0;return n}var Zi=Wi,Hi=3;function Wi(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[Hi+o],s=i[Hi+o+1];r.push(a===s?null:i.subarray(a,s))}var l=i[Hi+r.length+1];this.keys=i.subarray(i[Hi+r.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var u=n/t*e;this.min=-u,this.max=e+u}Wi.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Wi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Wi.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},Wi.prototype.query=function(e,t,n,r,i){var o=this.min,a=this.max;if(e<=o&&t<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},Wi.prototype._queryCell=function(e,t,n,r,i,o,a,s){var l=this.cells[i];if(null!==l)for(var c=this.keys,u=this.bboxes,d=0;d<l.length;d++){var h=l[d];if(void 0===a[h]){var p=4*h;(s?s(u[p+0],u[p+1],u[p+2],u[p+3]):e<=u[p+2]&&t<=u[p+3]&&n>=u[p+0]&&r>=u[p+1])?(a[h]=!0,o.push(c[h])):a[h]=!1}}},Wi.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(n),d=this._convertToCellCoord(r),h=l;h<=u;h++)for(var p=c;p<=d;p++){var f=this.d*p+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(p),this._convertFromCellCoord(h+1),this._convertFromCellCoord(p+1)))&&i.call(this,e,t,n,r,f,o,a,s))return}},Wi.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Wi.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Wi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=Hi+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[Hi+a]=o,i.set(s,o),o+=s.length}return i[Hi+e.length]=o,i.set(this.keys,o),i[Hi+e.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var qi=h(Zi);const Gi={};function Ki(e,t,n={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Gi[t]={klass:e,omit:n.omit||[]}}Ki(Object,"Object"),qi.serialize=function(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},qi.deserialize=function(e){return new qi(e.buffer)},Object.defineProperty(qi,"name",{value:"Grid"}),Ki(qi,"Grid"),Ki(At,"Color"),Ki(Error,"Error"),Ki(ce,"AJAXError"),Ki(Rt,"ResolvedImage"),Ki(ei,"StylePropertyFunction"),Ki(Gr,"StyleExpression",{omit:["_evaluator"]}),Ki(Jr,"ZoomDependentExpression"),Ki(Xr,"ZoomConstantExpression"),Ki(en,"CompoundExpression",{omit:["_evaluate"]});for(const km in Dr)Gi[Dr[km]._classRegistryKey]||Ki(Dr[km],`Expression${km}`);function Yi(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Xi(e){return t.ImageBitmap&&e instanceof t.ImageBitmap}function Ji(e,n){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Yi(e)||Xi(e))return n&&n.push(e),e;if(ArrayBuffer.isView(e)){const t=e;return n&&n.push(t.buffer),t}if(e instanceof t.ImageData)return n&&n.push(e.data.buffer),e;if(Array.isArray(e)){const t=[];for(const r of e)t.push(Ji(r,n));return t}if("object"==typeof e){const t=e.constructor,r=t._classRegistryKey;if(!r)throw new Error(`can't serialize object of unregistered class ${r}`);const i=t.serialize?t.serialize(e,n):{};if(!t.serialize){for(const t in e)e.hasOwnProperty(t)&&(Gi[r].omit.indexOf(t)>=0||(i[t]=Ji(e[t],n)));e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof e)}function Qi(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Yi(e)||Xi(e)||ArrayBuffer.isView(e)||e instanceof t.ImageData)return e;if(Array.isArray(e))return e.map(Qi);if("object"==typeof e){const t=e.$name||"Object",{klass:n}=Gi[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(e);const r=Object.create(n.prototype);for(const i of Object.keys(e))"$name"!==i&&(r[i]=Qi(e[i]));return r}throw new Error("can't deserialize object of type "+typeof e)}const eo={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function to(e){for(const t of e)if(io(t.charCodeAt(0)))return!0;return!1}function no(e){for(const t of e)if(!ro(t.charCodeAt(0)))return!1;return!0}function ro(e){return!(eo.Arabic(e)||eo["Arabic Supplement"](e)||eo["Arabic Extended-A"](e)||eo["Arabic Presentation Forms-A"](e)||eo["Arabic Presentation Forms-B"](e))}function io(e){return!(746!==e&&747!==e&&(e<4352||!(eo["Bopomofo Extended"](e)||eo.Bopomofo(e)||eo["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||eo["CJK Compatibility Ideographs"](e)||eo["CJK Compatibility"](e)||eo["CJK Radicals Supplement"](e)||eo["CJK Strokes"](e)||!(!eo["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||eo["CJK Unified Ideographs Extension A"](e)||eo["CJK Unified Ideographs"](e)||eo["Enclosed CJK Letters and Months"](e)||eo["Hangul Compatibility Jamo"](e)||eo["Hangul Jamo Extended-A"](e)||eo["Hangul Jamo Extended-B"](e)||eo["Hangul Jamo"](e)||eo["Hangul Syllables"](e)||eo.Hiragana(e)||eo["Ideographic Description Characters"](e)||eo.Kanbun(e)||eo["Kangxi Radicals"](e)||eo["Katakana Phonetic Extensions"](e)||eo.Katakana(e)&&12540!==e||!(!eo["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!eo["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||eo["Unified Canadian Aboriginal Syllabics"](e)||eo["Unified Canadian Aboriginal Syllabics Extended"](e)||eo["Vertical Forms"](e)||eo["Yijing Hexagram Symbols"](e)||eo["Yi Syllables"](e)||eo["Yi Radicals"](e))))}function oo(e){return!(io(e)||function(e){return!!(eo["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||eo["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||eo["Letterlike Symbols"](e)||eo["Number Forms"](e)||eo["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||eo["Control Pictures"](e)&&9251!==e||eo["Optical Character Recognition"](e)||eo["Enclosed Alphanumerics"](e)||eo["Geometric Shapes"](e)||eo["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||eo["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||eo["CJK Symbols and Punctuation"](e)||eo.Katakana(e)||eo["Private Use Area"](e)||eo["CJK Compatibility Forms"](e)||eo["Small Form Variants"](e)||eo["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function ao(e){return e>=1424&&e<=2303||eo["Arabic Presentation Forms-A"](e)||eo["Arabic Presentation Forms-B"](e)}function so(e,t){return!(!t&&ao(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||eo.Khmer(e))}function lo(e){for(const t of e)if(ao(t.charCodeAt(0)))return!0;return!1}const co="deferred",uo="loading",ho="loaded";let po=null,fo="unavailable",mo=null;const go=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(fo="error"),po&&po(e)};function vo(){yo.fire(new Xe("pluginStateChange",{pluginStatus:fo,pluginURL:mo}))}const yo=new Qe,bo=function(){return fo},xo=function(){if(fo!==co||!mo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");fo=uo,vo(),mo&&he({url:mo},(e=>{e?go(e):(fo=ho,vo())}))},wo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>fo===ho||null!=wo.applyArabicShaping,isLoading:()=>fo===uo,setState(e){fo=e.pluginStatus,mo=e.pluginURL},isParsed:()=>null!=wo.applyArabicShaping&&null!=wo.processBidirectionalText&&null!=wo.processStyledBidirectionalText,getPluginURL:()=>mo};class _o{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.transition=t.transition,this.pitch=t.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(e,t){for(const n of e)if(!so(n.charCodeAt(0),t))return!1;return!0}(e,wo.isLoaded())}}class ko{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Fr(e))return new ei(e,t);if(Kr(e)){const n=Qr(e,t);if("error"===n.result)throw new Error(n.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return n.value}{let n=e;return"string"==typeof e&&"color"===t.type&&(n=At.parse(e)),{kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class Eo{constructor(e){this.property=e,this.value=new ko(e,void 0)}transitioned(e,t){return new Co(this.property,this.value,t,P({},e.transition,this.transition),e.now)}untransitioned(){return new Co(this.property,this.value,null,{},0)}}class So{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return U(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Eo(this._values[e].property)),this._values[e].value=new ko(this._values[e].property,null===t?void 0:U(t))}getTransition(e){return U(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Eo(this._values[e].property)),this._values[e].transition=U(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const r=this.getTransition(t);void 0!==r&&(e[`${t}-transition`]=r)}return e}transitioned(e,t){const n=new To(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(e,t._values[r]);return n}untransitioned(){const e=new To(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Co{constructor(e,t,n,r,i){const o=r.delay||0,a=r.duration||0;i=i||0,this.property=e,this.value=t,this.begin=i+o,this.end=this.begin+a,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(e,t,n);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),i,E(a))}}return i}}class To{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const r=new Oo(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Mo{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return U(this._values[e].value)}setValue(e,t){this._values[e]=new ko(this._values[e].property,null===t?void 0:U(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const r=new Oo(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}}class Io{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}class Oo{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Ao{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,n){const r=Dn[this.specification.type];return r?r(e,t,n):e}}class Po{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,r){return new Io(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Io(this,{kind:"constant",value:void 0},e.parameters);const r=Dn[this.specification.type];return r?new Io(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e}evaluate(e,t,n,r,i,o){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,o)}}class Do{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}interpolate(){return!1}}class Lo{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const t=new _o(0,{});for(const n in e){const r=e[n];r.specification.overridable&&this.overridableProperties.push(n);const i=this.defaultPropertyValues[n]=new ko(r,void 0),o=this.defaultTransitionablePropertyValues[n]=new Eo(r);this.defaultTransitioningPropertyValues[n]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate(t)}}}function Ro(e,t){return 256*(e=T(Math.floor(e),0,255))+T(Math.floor(t),0,255)}Ki(Po,"DataDrivenProperty"),Ki(Ao,"DataConstantProperty"),Ki(Do,"ColorRampProperty");const zo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class jo{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class No{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Bo(e,t=1){let n=0,r=0;return{members:e.map((e=>{const i=zo[e.type].BYTES_PER_ELEMENT,o=n=Fo(n,Math.max(t,i)),a=e.components||1;return r=Math.max(r,i),n+=i*a,{name:e.name,type:e.type,components:a,offset:o}})),size:Fo(n,Math.max(r,t)),alignment:t}}function Fo(e,t){return Math.ceil(e/t)*t}class Vo extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}Vo.prototype.bytesPerElement=4,Ki(Vo,"StructArrayLayout2i4");class Uo extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}Uo.prototype.bytesPerElement=6,Ki(Uo,"StructArrayLayout3i6");class $o extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,e}}$o.prototype.bytesPerElement=8,Ki($o,"StructArrayLayout4i8");class Zo extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.uint8[c+4]=r,this.uint8[c+5]=i,this.uint8[c+6]=o,this.uint8[c+7]=a,this.float32[u+2]=s,e}}Zo.prototype.bytesPerElement=12,Ki(Zo,"StructArrayLayout2i4ub1f12");class Ho extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,e}}Ho.prototype.bytesPerElement=16,Ki(Ho,"StructArrayLayout4f16");class Wo extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=6*e,s=3*e;return this.uint16[a+0]=t,this.uint16[a+1]=n,this.uint16[a+2]=r,this.uint16[a+3]=i,this.float32[s+2]=o,e}}Wo.prototype.bytesPerElement=12,Ki(Wo,"StructArrayLayout4ui1f12");class qo extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.uint16[o+0]=t,this.uint16[o+1]=n,this.uint16[o+2]=r,this.uint16[o+3]=i,e}}qo.prototype.bytesPerElement=8,Ki(qo,"StructArrayLayout4ui8");class Go extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e}}Go.prototype.bytesPerElement=12,Ki(Go,"StructArrayLayout6i12");class Ko extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,d){const h=this.length;return this.resize(h+1),this.emplace(h,e,t,n,r,i,o,a,s,l,c,u,d)}emplace(e,t,n,r,i,o,a,s,l,c,u,d,h){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=d,this.int16[p+11]=h,e}}Ko.prototype.bytesPerElement=24,Ki(Ko,"StructArrayLayout4i4ui4i24");class Yo extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,a){const s=10*e,l=5*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.float32[l+2]=i,this.float32[l+3]=o,this.float32[l+4]=a,e}}Yo.prototype.bytesPerElement=20,Ki(Yo,"StructArrayLayout3i3f20");class Xo extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}Xo.prototype.bytesPerElement=4,Ki(Xo,"StructArrayLayout1ul4");class Jo extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,d,h){const p=this.length;return this.resize(p+1),this.emplace(p,e,t,n,r,i,o,a,s,l,c,u,d,h)}emplace(e,t,n,r,i,o,a,s,l,c,u,d,h,p){const f=20*e,m=10*e;return this.int16[f+0]=t,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.int16[f+4]=o,this.float32[m+3]=a,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=c,this.int16[f+14]=u,this.uint32[m+8]=d,this.uint16[f+18]=h,this.uint16[f+19]=p,e}}Jo.prototype.bytesPerElement=40,Ki(Jo,"StructArrayLayout5i4f1i1ul2ui40");class Qo extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const l=8*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+4]=i,this.int16[l+5]=o,this.int16[l+6]=a,this.int16[l+7]=s,e}}Qo.prototype.bytesPerElement=16,Ki(Qo,"StructArrayLayout3i2i2i16");class ea extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,e}}ea.prototype.bytesPerElement=16,Ki(ea,"StructArrayLayout2f1f2i16");class ta extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=12*e,a=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,e}}ta.prototype.bytesPerElement=12,Ki(ta,"StructArrayLayout2ub2f12");class na extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}na.prototype.bytesPerElement=12,Ki(na,"StructArrayLayout3f12");class ra extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}ra.prototype.bytesPerElement=6,Ki(ra,"StructArrayLayout3ui6");class ia extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,x){const w=this.length;return this.resize(w+1),this.emplace(w,e,t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,x)}emplace(e,t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,x,w){const _=30*e,k=15*e,E=60*e;return this.int16[_+0]=t,this.int16[_+1]=n,this.int16[_+2]=r,this.float32[k+2]=i,this.float32[k+3]=o,this.uint16[_+8]=a,this.uint16[_+9]=s,this.uint32[k+5]=l,this.uint32[k+6]=c,this.uint32[k+7]=u,this.uint16[_+16]=d,this.uint16[_+17]=h,this.uint16[_+18]=p,this.float32[k+10]=f,this.float32[k+11]=m,this.uint8[E+48]=g,this.uint8[E+49]=v,this.uint8[E+50]=y,this.uint32[k+13]=b,this.int16[_+28]=x,this.uint8[E+58]=w,e}}ia.prototype.bytesPerElement=60,Ki(ia,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class oa extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,x,w,_,k,E,S,C,T,M,I){const O=this.length;return this.resize(O+1),this.emplace(O,e,t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,x,w,_,k,E,S,C,T,M,I)}emplace(e,t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,x,w,_,k,E,S,C,T,M,I,O){const A=38*e,P=19*e;return this.int16[A+0]=t,this.int16[A+1]=n,this.int16[A+2]=r,this.float32[P+2]=i,this.float32[P+3]=o,this.int16[A+8]=a,this.int16[A+9]=s,this.int16[A+10]=l,this.int16[A+11]=c,this.int16[A+12]=u,this.int16[A+13]=d,this.uint16[A+14]=h,this.uint16[A+15]=p,this.uint16[A+16]=f,this.uint16[A+17]=m,this.uint16[A+18]=g,this.uint16[A+19]=v,this.uint16[A+20]=y,this.uint16[A+21]=b,this.uint16[A+22]=x,this.uint16[A+23]=w,this.uint16[A+24]=_,this.uint16[A+25]=k,this.uint16[A+26]=E,this.uint16[A+27]=S,this.uint16[A+28]=C,this.uint32[P+15]=T,this.float32[P+16]=M,this.float32[P+17]=I,this.float32[P+18]=O,e}}oa.prototype.bytesPerElement=76,Ki(oa,"StructArrayLayout3i2f6i15ui1ul3f76");class aa extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}aa.prototype.bytesPerElement=4,Ki(aa,"StructArrayLayout1f4");class sa extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=5*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,this.float32[a+4]=o,e}}sa.prototype.bytesPerElement=20,Ki(sa,"StructArrayLayout5f20");class la extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=6*e;return this.uint32[3*e+0]=t,this.uint16[o+2]=n,this.uint16[o+3]=r,this.uint16[o+4]=i,e}}la.prototype.bytesPerElement=12,Ki(la,"StructArrayLayout1ul3ui12");class ca extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}ca.prototype.bytesPerElement=4,Ki(ca,"StructArrayLayout2ui4");class ua extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}ua.prototype.bytesPerElement=2,Ki(ua,"StructArrayLayout1ui2");class da extends No{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}da.prototype.bytesPerElement=8,Ki(da,"StructArrayLayout2f8");class ha extends jo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ha.prototype.size=40;class pa extends Jo{get(e){return new ha(this,e)}}Ki(pa,"CollisionBoxArray");class fa extends jo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}fa.prototype.size=60;class ma extends ia{get(e){return new fa(this,e)}}Ki(ma,"PlacedSymbolArray");class ga extends jo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}ga.prototype.size=76;class va extends oa{get(e){return new ga(this,e)}}Ki(va,"SymbolInstanceArray");class ya extends aa{getoffsetX(e){return this.float32[1*e+0]}}Ki(ya,"GlyphOffsetArray");class ba extends Vo{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}Ki(ba,"SymbolLineVertexArray");class xa extends jo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}xa.prototype.size=12;class wa extends la{get(e){return new xa(this,e)}}Ki(wa,"FeatureIndexArray");class _a extends ca{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}Ki(_a,"FillExtrusionCentroidArray");const ka=Bo([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Ea=Bo([{name:"a_dash",components:4,type:"Uint16"}]);var Sa={exports:{}},Ca={exports:{}};Ca.exports=function(e,t){var n,r,i,o,a,s,l,c;for(r=e.length-(n=3&e.length),i=t,a=3432918353,s=461845907,c=0;c<r;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var Ta=Ca.exports,Ma={exports:{}};Ma.exports=function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var Ia=Ta,Oa=Ma.exports;Sa.exports=Ia,Sa.exports.murmur3=Ia,Sa.exports.murmur2=Oa;var Aa=h(Sa.exports);class Pa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,r){this.ids.push(Da(e)),this.positions.push(t,n,r)}getPositions(e){const t=Da(e);let n=0,r=this.ids.length-1;for(;n<r;){const e=n+r>>1;this.ids[e]>=t?r=e:n=e+1}const i=[];for(;this.ids[n]===t;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(e,t){const n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return La(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(e){const t=new Pa;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function Da(e){const t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Aa(String(e))}function La(e,t,n,r){for(;n<r;){const i=e[n+r>>1];let o=n-1,a=r+1;for(;;){do{o++}while(e[o]<i);do{a--}while(e[a]>i);if(o>=a)break;Ra(e,o,a),Ra(t,3*o,3*a),Ra(t,3*o+1,3*a+1),Ra(t,3*o+2,3*a+2)}a-n<r-a?(La(e,t,n,a),n=a+1):(La(e,t,a+1,r),r=a)}}function Ra(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}Ki(Pa,"FeaturePositionMap");class za{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}class ja extends za{constructor(e){super(e),this.current=0}set(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Na extends za{constructor(e){super(e),this.current=[0,0,0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}class Ba extends za{constructor(e){super(e),this.current=At.transparent}set(e,t,n){this.fetchUniformLocation(e,t)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}const Fa=new Float32Array(16),Va=new Float32Array(9),Ua=new Float32Array(4);function $a(e){return[Ro(255*e.r,255*e.g),Ro(255*e.b,255*e.a)]}class Za{constructor(e,t,n){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=n}setUniform(e,t,n,r,i){t.set(e,i,r.constantOr(this.value))}getBinding(e,t){return"color"===this.type?new Ba(e):new ja(e)}}class Ha{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,t,n,r,i){const o="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;o&&t.set(e,i,o)}getBinding(e,t){return"u_pattern"===t||"u_dash"===t?new Na(e):new ja(e)}}class Wa{constructor(e,t,n,r){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(e,t,n,r,i,o){const a=this.paintVertexArray.length,s=this.expression.evaluate(new _o(0),t,{},i,r,o);this.paintVertexArray.resize(e),this._setPaintValue(a,e,s)}updatePaintArray(e,t,n,r,i){const o=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(e,t,o)}_setPaintValue(e,t,n){if("color"===this.type){const r=$a(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class qa{constructor(e,t,n,r,i,o){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,n,r,i,o){const a=this.expression.evaluate(new _o(this.zoom),t,{},i,r,o),s=this.expression.evaluate(new _o(this.zoom+1),t,{},i,r,o),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,a,s)}updatePaintArray(e,t,n,r,i){const o=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),a=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(e,t,o,a)}_setPaintValue(e,t,n,r){if("color"===this.type){const i=$a(n),o=$a(r);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t,n,r,i){const o=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,a=T(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);t.set(e,i,a)}getBinding(e,t){return new ja(e)}}class Ga{constructor(e,t,n,r,i){this.expression=e,this.layerId=i,this.paintVertexAttributes=("array"===n?Ea:ka).members;for(let o=0;o<t.length;++o);this.paintVertexArray=new r}populatePaintArray(e,t,n){const r=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}updatePaintArray(e,t,n,r,i,o){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],o)}_setPaintValues(e,t,n,r){if(!r||!n)return;const i=r[n];if(!i)return;const{tl:o,br:a,pixelRatio:s}=i;for(let l=e;l<t;l++)this.paintVertexArray.emplace(l,o[0],o[1],a[0],a[1],s)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ka{constructor(e,t,n=(()=>!0)){this.binders={},this._buffers=[];const r=[];for(const i in e.paint._values){if(!n(i))continue;const o=e.paint.get(i);if(!(o instanceof Io&&zr(o.property.specification)))continue;const a=Ja(i,e.type),s=o.value,l=o.property.specification.type,c=!!o.property.useIntegerZoom,u="line-dasharray"===i||i.endsWith("pattern"),d="line-dasharray"===i&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||u){const t=ts(i,l,"source");this.binders[i]=u?new Ga(s,a,l,t,e.id):new Wa(s,a,l,t),r.push(`/a_${i}`)}else{const e=ts(i,l,"composite");this.binders[i]=new qa(s,a,l,c,t,e),r.push(`/z_${i}`)}else this.binders[i]=u?new Ha(s.value,a):new Za(s.value,a,l),r.push(`/u_${i}`)}this.cacheKey=r.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof Wa||t instanceof qa?t.maxValue:0}populatePaintArrays(e,t,n,r,i,o){for(const a in this.binders){const s=this.binders[a];(s instanceof Wa||s instanceof qa||s instanceof Ga)&&s.populatePaintArray(e,t,n,r,i,o)}}setConstantPatternPositions(e){for(const t in this.binders){const n=this.binders[t];n instanceof Ha&&n.setConstantPatternPositions(e)}}updatePaintArrays(e,t,n,r,i,o){let a=!1;for(const s in e){const l=t.getPositions(s);for(const t of l){const l=n.feature(t.index);for(const n in this.binders){const c=this.binders[n];if((c instanceof Wa||c instanceof qa||c instanceof Ga)&&!0===c.expression.isStateDependent){const u=r.paint.get(n);c.expression=u.value,c.updatePaintArray(t.start,t.end,l,e[s],i,o),a=!0}}}}return a}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof Za||n instanceof Ha)&&e.push(...n.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Wa||n instanceof qa||n instanceof Ga)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Za||n instanceof Ha||n instanceof qa)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const t=[];for(const n in this.binders){const r=this.binders[n];if(r instanceof Za||r instanceof Ha||r instanceof qa)for(const i of r.uniformNames)t.push({name:i,property:n,binding:r.getBinding(e,i)})}return t}setUniforms(e,t,n,r,i){for(const{name:o,property:a,binding:s}of n)this.binders[a].setUniform(e,s,i,r.get(a),o)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const t=this.binders[e];(t instanceof Wa||t instanceof qa||t instanceof Ga)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof Wa||n instanceof qa||n instanceof Ga)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof Wa||t instanceof qa||t instanceof Ga)&&t.destroy()}}}class Ya{constructor(e,t,n=(()=>!0)){this.programConfigurations={};for(const r of e)this.programConfigurations[r.id]=new Ka(r,t,n);this.needsUpload=!1,this._featureMap=new Pa,this._bufferOffset=0}populatePaintArrays(e,t,n,r,i,o,a){for(const s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,r,i,o,a);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,r,i){for(const o of n)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,r,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Xa={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Ja(e,t){return Xa[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}const Qa={"line-pattern":{source:Wo,composite:Wo},"fill-pattern":{source:Wo,composite:Wo},"fill-extrusion-pattern":{source:Wo,composite:Wo},"line-dasharray":{source:qo,composite:qo}},es={color:{source:da,composite:Ho},number:{source:aa,composite:da}};function ts(e,t,n){const r=Qa[e];return r&&r[n]||es[t][n]}Ki(Za,"ConstantBinder"),Ki(Ha,"PatternConstantBinder"),Ki(Wa,"SourceExpressionBinder"),Ki(Ga,"PatternCompositeBinder"),Ki(qa,"CompositeExpressionBinder"),Ki(Ka,"ProgramConfiguration",{omit:["_buffers"]}),Ki(Ya,"ProgramConfigurationSet");const ns="-transition";class rs extends Qe{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Mo(t.layout)),t.paint)){this._transitionablePaint=new So(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Oo(t.paint)}}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,n={}){null!=t&&this._validate(Vi,`layers.${this.id}.layout.${e}`,e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return B(e,ns)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,n={}){if(null!=t&&this._validate(Fi,`layers.${this.id}.paint.${e}`,e,t,n))return!1;if(B(e,ns))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const n=this._transitionablePaint._values[e],r=n.value.isDataDriven(),i=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const o=this._transitionablePaint._values[e].value,a=o.isDataDriven(),s=B(e,"pattern")||"line-dasharray"===e;return a||r||s||this._handleOverridablePaintPropertyUpdate(e,i,o)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),V(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,n,r,i={}){return(!i||!1!==i.validate)&&$i(this,e.call(Bi,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:et,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Io&&zr(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=di(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const is=Bo([{name:"a_pos",components:2,type:"Int16"}],4),os=Bo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class as{constructor(e=[]){this.segments=e}prepareSegment(e,t,n,r){let i=this.segments[this.segments.length-1];return e>as.MAX_VERTEX_ARRAY_LENGTH&&Z(`Max vertices per segment is ${as.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!i||i.vertexLength+e>as.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,r){return new as([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}as.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ki(as,"SegmentVector");var ss=8192;class ls{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Ul?new Ul(e.lng,e.lat):Ul.convert(e),this}setSouthWest(e){return this._sw=e instanceof Ul?new Ul(e.lng,e.lat):Ul.convert(e),this}extend(e){const t=this._sw,n=this._ne;let r,i;if(e instanceof Ul)r=e,i=e;else{if(!(e instanceof ls))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(ls.convert(e)):this.extend(Ul.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(Ul.convert(e)):this;if(r=e._sw,i=e._ne,!r||!i)return this}return t||n?(t.lng=Math.min(r.lng,t.lng),t.lat=Math.min(r.lat,t.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Ul(r.lng,r.lat),this._ne=new Ul(i.lng,i.lat)),this}getCenter(){return new Ul((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ul(this.getWest(),this.getNorth())}getSouthEast(){return new Ul(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:n}=Ul.convert(e);let r=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(e){return!e||e instanceof ls?e:new ls(e)}}var cs=1e-6,us="undefined"!=typeof Float32Array?Float32Array:Array;function ds(){var e=new us(9);return us!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function hs(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=n[0],p=n[1],f=n[2],m=n[3],g=n[4],v=n[5],y=n[6],b=n[7],x=n[8];return e[0]=h*r+p*a+f*c,e[1]=h*i+p*s+f*u,e[2]=h*o+p*l+f*d,e[3]=m*r+g*a+v*c,e[4]=m*i+g*s+v*u,e[5]=m*o+g*l+v*d,e[6]=y*r+b*a+x*c,e[7]=y*i+b*s+x*u,e[8]=y*o+b*l+x*d,e}function ps(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fs(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],p=t[11],f=t[12],m=t[13],g=t[14],v=t[15],y=n*s-r*a,b=n*l-i*a,x=n*c-o*a,w=r*l-i*s,_=r*c-o*s,k=i*c-o*l,E=u*m-d*f,S=u*g-h*f,C=u*v-p*f,T=d*g-h*m,M=d*v-p*m,I=h*v-p*g,O=y*I-b*M+x*T+w*C-_*S+k*E;return O?(e[0]=(s*I-l*M+c*T)*(O=1/O),e[1]=(i*M-r*I-o*T)*O,e[2]=(m*k-g*_+v*w)*O,e[3]=(h*_-d*k-p*w)*O,e[4]=(l*C-a*I-c*S)*O,e[5]=(n*I-i*C+o*S)*O,e[6]=(g*x-f*k-v*b)*O,e[7]=(u*k-h*x+p*b)*O,e[8]=(a*M-s*C+c*E)*O,e[9]=(r*C-n*M-o*E)*O,e[10]=(f*_-m*x+v*y)*O,e[11]=(d*x-u*_-p*y)*O,e[12]=(s*S-a*T-l*E)*O,e[13]=(n*T-r*S+i*E)*O,e[14]=(m*b-f*w-g*y)*O,e[15]=(u*w-d*b+h*y)*O,e):null}function ms(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=n[0],x=n[1],w=n[2],_=n[3];return e[0]=b*r+x*s+w*d+_*m,e[1]=b*i+x*l+w*h+_*g,e[2]=b*o+x*c+w*p+_*v,e[3]=b*a+x*u+w*f+_*y,e[4]=(b=n[4])*r+(x=n[5])*s+(w=n[6])*d+(_=n[7])*m,e[5]=b*i+x*l+w*h+_*g,e[6]=b*o+x*c+w*p+_*v,e[7]=b*a+x*u+w*f+_*y,e[8]=(b=n[8])*r+(x=n[9])*s+(w=n[10])*d+(_=n[11])*m,e[9]=b*i+x*l+w*h+_*g,e[10]=b*o+x*c+w*p+_*v,e[11]=b*a+x*u+w*f+_*y,e[12]=(b=n[12])*r+(x=n[13])*s+(w=n[14])*d+(_=n[15])*m,e[13]=b*i+x*l+w*h+_*g,e[14]=b*o+x*c+w*p+_*v,e[15]=b*a+x*u+w*f+_*y,e}function gs(e,t,n){var r,i,o,a,s,l,c,u,d,h,p,f,m=n[0],g=n[1],v=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],e[0]=r=t[0],e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=h,e[10]=p,e[11]=f,e[12]=r*m+s*g+d*v+t[12],e[13]=i*m+l*g+h*v+t[13],e[14]=o*m+c*g+p*v+t[14],e[15]=a*m+u*g+f*v+t[15]),e}function vs(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ys(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+u*r,e[6]=s*i+d*r,e[7]=l*i+h*r,e[8]=c*i-o*r,e[9]=u*i-a*r,e[10]=d*i-s*r,e[11]=h*i-l*r,e}function bs(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-u*r,e[2]=s*i-d*r,e[3]=l*i-h*r,e[8]=o*r+c*i,e[9]=a*r+u*i,e[10]=s*r+d*i,e[11]=l*r+h*i,e}function xs(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ws(e,t,n){var r,i,o,a=n[0],s=n[1],l=n[2],c=Math.hypot(a,s,l);return c<cs?null:(a*=c=1/c,s*=c,l*=c,r=Math.sin(t),i=Math.cos(t),e[0]=a*a*(o=1-i)+i,e[1]=s*a*o+l*r,e[2]=l*a*o-s*r,e[3]=0,e[4]=a*s*o-l*r,e[5]=s*s*o+i,e[6]=l*s*o+a*r,e[7]=0,e[8]=a*l*o+s*r,e[9]=s*l*o-a*r,e[10]=l*l*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var _s=ms;function ks(){var e=new us(3);return us!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Es(e){var t=new us(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ss(e){return Math.hypot(e[0],e[1],e[2])}function Cs(e,t,n){var r=new us(3);return r[0]=e,r[1]=t,r[2]=n,r}function Ts(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Ms(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Is(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Os(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function As(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Ps(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Ds(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Ls(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Rs(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function zs(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e}function js(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(a=a||1),e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function Ns(e,t,n){var r=n[0],i=n[1],o=n[2],a=t[0],s=t[1],l=t[2],c=i*l-o*s,u=o*a-r*l,d=r*s-i*a,h=i*d-o*u,p=o*c-r*d,f=r*u-i*c,m=2*n[3];return u*=m,d*=m,p*=2,f*=2,e[0]=a+(c*=m)+(h*=2),e[1]=s+u+p,e[2]=l+d+f,e}var Bs,Fs=Ms,Vs=Is,Us=Ss;function $s(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Zs(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e}function Hs(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function Ws(){var e=new us(4);return us!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function qs(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Gs(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-r*s,e}function Ks(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-o*s,e[1]=i*l+a*s,e[2]=o*l+r*s,e[3]=a*l-i*s,e}ks(),Bs=new us(4),us!=Float32Array&&(Bs[0]=0,Bs[1]=0,Bs[2]=0,Bs[3]=0);var Ys=Zs;ks(),Cs(1,0,0),Cs(0,1,0),Ws(),Ws(),ds();const Xs=Bo([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Js}=Xs,Qs=Bo([{name:"a_pos_3",components:3,type:"Int16"}]);var el=Bo([{name:"a_pos",type:"Int16",components:2}]);class tl{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,n){const r=Rs(t,this.dir);if(Math.abs(r)<1e-6)return!1;const i=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/r;return n[0]=this.pos[0]+this.dir[0]*i,n[1]=this.pos[1]+this.dir[1]*i,n[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(e,t,n){if(function(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2];return Math.abs(n-o)<=cs*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=cs*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=cs*Math.max(1,Math.abs(i),Math.abs(s))}(this.pos,e)||0===t)return n[0]=n[1]=n[2]=0,!1;const[r,i,o]=this.dir,a=this.pos[0]-e[0],s=this.pos[1]-e[1],l=this.pos[2]-e[2],c=r*r+i*i+o*o,u=2*(a*r+s*i+l*o),d=u*u-4*c*(a*a+s*s+l*l-t*t);if(d<0){const e=Math.max(-u/2,0),c=a+r*e,d=s+i*e,h=l+o*e,p=Math.hypot(c,d,h);return n[0]=c*t/p,n[1]=d*t/p,n[2]=h*t/p,!1}{const e=(-u-Math.sqrt(d))/(2*c);if(e<0){const e=Math.hypot(a,s,l);return n[0]=a*t/e,n[1]=s*t/e,n[2]=l*t/e,!1}return n[0]=a+r*e,n[1]=s+i*e,n[2]=l+o*e,!0}}}class nl{constructor(e,t,n,r,i){this.TL=e,this.TR=t,this.BR=n,this.BL=r,this.horizon=i}static fromInvProjectionMatrix(e,t,n){const r=[-1,1,1],i=[1,1,1],o=[1,-1,1],a=[-1,-1,1],s=js(r,r,e),l=js(i,i,e),c=js(o,o,e),u=js(a,a,e);return new nl(s,l,c,u,t/n)}}class rl{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,n,r){const i=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const o=Hs([],n,e),a=1/o[3]/t*i;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(o,o,[a,a,r?1/o[3]:a,a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=Ls([],zs([],Fs([],o[e[0]],o[e[1]]),Fs([],o[e[2]],o[e[1]]))),n=-Rs(t,o[e[1]]);return t.concat(n)}));return new rl(o,a)}}class il{static fromPoints(e){const t=[1/0,1/0,1/0],n=[-1/0,-1/0,-1/0];for(const r of e)Os(t,t,r),As(n,n,r);return new il(t,n)}static applyTransform(e,t){const n=e.getCorners();for(let r=0;r<n.length;++r)js(n[r],n[r],t);return il.fromPoints(n)}constructor(e,t){this.min=e,this.max=t,this.center=Ps([],Ts([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],n=Es(this.min),r=Es(this.max);for(let i=0;i<t.length;i++)n[i]=t[i]?this.min[i]:this.center[i],r[i]=t[i]?this.center[i]:this.max[i];return r[2]=this.max[2],new il(n,r)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}intersects(e){const t=this.getCorners();let n=!0;for(let r=0;r<e.planes.length;r++){const i=e.planes[r];let o=0;for(let e=0;e<t.length;e++)o+=Rs(i,t[e])+i[3]>=0;if(0===o)return 0;o!==t.length&&(n=!1)}if(n)return 2;for(let r=0;r<3;r++){let t=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const o=e.points[i][r]-this.min[r];t=Math.min(t,o),n=Math.max(n,o)}if(n<0||t>this.max[r]-this.min[r])return 0}return 1}}const ol=5,al=6,sl=ss/Math.PI/2,ll=16383,cl=64,ul=[cl,32,16],dl=-sl,hl=sl,pl=[new il([dl,dl,dl],[hl,hl,hl]),new il([dl,dl,dl],[0,0,hl]),new il([0,dl,dl],[hl,0,hl]),new il([dl,0,dl],[0,hl,hl]),new il([0,0,dl],[hl,hl,hl])];function fl(e){return e*sl/Bl}function ml(e,t,n,r=!0){const i=Ps([],e._camera.position,e.worldSize),o=[t,n,1,1];Hs(o,o,e.pixelMatrixInverse),$s(o,o,1/o[3]);const a=Ls([],Fs([],o,i)),s=e.globeMatrix,l=[s[12],s[13],s[14]],c=Fs([],l,i),u=Ss(c),d=Ls([],c),h=e.worldSize/(2*Math.PI),p=Rs(d,a),f=Math.asin(h/u);if(f<Math.acos(p)){if(!r)return null;const e=[],t=[];Ps(e,a,u/p),Ls(t,Fs(t,e,c)),Ls(a,Ts(a,c,Ps(a,t,Math.tan(f)*u)))}const m=[];new tl(i,a).closestPointOnSphere(l,h,m);const g=Ls([],J(s,0)),v=Ls([],J(s,1)),y=Ls([],J(s,2)),b=Rs(g,m),x=Rs(v,m),w=Rs(y,m),k=_(Math.asin(-x/h));let E=_(Math.atan2(b,w));E=e.center.lng+function(e,t){const n=(t-e+180)%360-180;return n<-180?n+360:n}(e.center.lng,E);const S=Zl(E),C=T(Hl(k),0,1);return new Jl(S,C)}class gl{constructor(e,t,n){this.a=Fs([],e,n),this.b=Fs([],t,n),this.center=n;const r=Ls([],this.a),i=Ls([],this.b);this.angle=Math.acos(Rs(r,i))}}function vl(e,t){if(0===e.angle)return null;let n;return n=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)),n<0||n>1?null:function(e,t,n,r){const i=Math.sin(n);return e*(Math.sin((1-r)*n)/i)+t*(Math.sin(r*n)/i)}(e.a[t],e.b[t],e.angle,T(n,0,1))+e.center[t]}function yl(e){if(e.z<=1)return pl[e.z+2*e.y+e.x];const t=El(kl(e));return il.fromPoints(t)}function bl(e,t,n){return Ps(e,e,1-n),Ds(e,e,t,n)}function xl(e,t){const n=Dl(t.zoom);if(0===n)return yl(e);const r=kl(e),i=El(r),o=Zl(r.getWest())*t.worldSize,a=Zl(r.getEast())*t.worldSize,s=Hl(r.getNorth())*t.worldSize,l=Hl(r.getSouth())*t.worldSize,c=[o,s,0],u=[a,s,0],d=[o,l,0],h=[a,l,0],p=fs([],t.globeMatrix);return js(c,c,p),js(u,u,p),js(d,d,p),js(h,h,p),i[0]=bl(i[0],d,n),i[1]=bl(i[1],h,n),i[2]=bl(i[2],u,n),i[3]=bl(i[3],c,n),il.fromPoints(i)}function wl(e,t,n){for(const r of e)js(r,r,t),Ps(r,r,n)}function _l(e,t,n){const r=t/e.worldSize,i=e.globeMatrix;if(n.z<=1){const e=yl(n).getCorners();return wl(e,i,r),il.fromPoints(e)}const o=kl(n),a=El(o);wl(a,i,r);const s=Number.MAX_VALUE,l=[-s,-s,-s],c=[s,s,s];if(o.contains(e.center)){for(const e of a)Os(c,c,e),As(l,l,e);l[2]=0;const t=e.point,n=[t.x*r,t.y*r,0];return Os(c,c,n),As(l,l,n),new il(c,l)}const u=[i[12]*r,i[13]*r,i[14]*r],d=o.getCenter(),h=T(e.center.lat,-Yl,Yl),p=T(d.lat,-Yl,Yl),f=Zl(e.center.lng),m=Hl(h);let g=f-Zl(d.lng);const v=m-Hl(p);g>.5?g-=1:g<-.5&&(g+=1);let y=0;Math.abs(g)>Math.abs(v)?y=g>=0?1:3:(y=v>=0?0:2,Ds(u,u,[i[4]*r,i[5]*r,i[6]*r],-Math.sin(w(v>=0?o.getSouth():o.getNorth()))*sl));const b=a[y],x=a[(y+1)%4],_=new gl(b,x,u),k=[vl(_,0)||b[0],vl(_,1)||b[1],vl(_,2)||b[2]],E=Dl(e.zoom);if(E>0){const r=function({x:e,y:t,z:n},r,i,o,a){const s=1/(1<<n);let l=e*s,c=l+s,u=t*s,d=u+s,h=0;const p=(l+c)/2-o;return p>.5?h=-1:p<-.5&&(h=1),l=((l+h)*r-(o*=r))*i+o,c=((c+h)*r-o)*i+o,u=(u*r-(a*=r))*i+a,d=(d*r-a)*i+a,[[l,d,0],[c,d,0],[c,u,0],[l,u,0]]}(n,t,e._pixelsPerMercatorPixel,f,m);for(let e=0;e<a.length;e++)bl(a[e],r[e],E);const i=Ts([],r[y],r[(y+1)%4]);Ps(i,i,.5),bl(k,i,E)}for(const w of a)Os(c,c,w),As(l,l,w);return c[2]=Math.min(b[2],x[2]),Os(c,c,k),As(l,l,k),new il(c,l)}function kl({x:e,y:t,z:n}){const r=1/(1<<n),i=new Ul(ql(e*r),Gl((t+1)*r)),o=new Ul(ql((e+1)*r),Gl(t*r));return new ls(i,o)}function El(e){const t=w(e.getNorth()),n=w(e.getSouth()),r=Math.cos(t),i=Math.cos(n),o=Math.sin(t),a=Math.sin(n),s=e.getWest(),l=e.getEast();return[Sl(i,a,s),Sl(i,a,l),Sl(r,o,l),Sl(r,o,s)]}function Sl(e,t,n,r=sl){return n=w(n),[e*Math.sin(n)*r,-t*r,e*Math.cos(n)*r]}function Cl(e,t,n){return Sl(Math.cos(w(e)),Math.sin(w(e)),t,n)}function Tl(e,t,n,r){const i=1<<n.z,o=(e/ss+n.x)/i;return Cl(Gl((t/ss+n.y)/i),ql(o),r)}function Ml({min:e,max:t}){return ll/Math.max(t[0]-e[0],t[1]-e[1],t[2]-e[2])}const Il=new Float64Array(16);function Ol(e){const t=Ml(e),n=xs(Il,[t,t,t]);return gs(n,n,((r=[])[0]=-(i=e.min)[0],r[1]=-i[1],r[2]=-i[2],r));var r,i}function Al(e){const t=(r=e.min,(n=Il)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n);var n,r;const i=1/Ml(e);return vs(t,t,[i,i,i])}function Pl(e,t,n,r,i){const o=function(e){const t=ss/(2*Math.PI);return e/(2*Math.PI)/t}(n),a=[e,t,-n/(2*Math.PI)],s=ps(new Float64Array(16));return gs(s,s,a),vs(s,s,[o,o,o]),ys(s,s,w(-i)),bs(s,s,w(-r)),s}function Dl(e){return M(ol,al,e)}function Ll(e,t){const n=Cl(t.lat,t.lng),r=function(e){const t=Cl(e._center.lat,e._center.lng);let n=zs([],Cs(0,1,0),t);const r=ws([],-e.angle,t);n=js(n,n,r),ws(r,-e._pitch,n);const i=Ls([],t);return Ps(i,i,fl(e.cameraToCenterDistance/e.pixelsPerMeter)),js(i,i,r),Ts([],t,i)}(e);return a=(i=Ms([],r,n))[0],s=i[1],l=i[2],c=(o=n)[0],u=o[1],d=o[2],p=(h=Math.sqrt(a*a+s*s+l*l)*Math.sqrt(c*c+u*u+d*d))&&Rs(i,o)/h,Math.acos(Math.min(Math.max(p,-1),1));var i,o,a,s,l,c,u,d,h,p}function Rl(e,t){return Ll(e,t)>Math.PI/2*1.01}const zl=w(85),jl=Math.cos(zl),Nl=Math.sin(zl),Bl=6371008.8,Fl=2*Math.PI*Bl;class Vl{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Vl(I(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return Bl*Math.acos(Math.min(i,1))}toBounds(e=0){const t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new ls(new Vl(this.lng-n,this.lat-t),new Vl(this.lng+n,this.lat+t))}toEcef(e){const t=fl(e);return Cl(this.lat,this.lng,sl+t)}static convert(e){if(e instanceof Vl)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Vl(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Vl(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Ul=Vl;function $l(e){return Fl*Math.cos(e*Math.PI/180)}function Zl(e){return(180+e)/360}function Hl(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Wl(e,t){return e/$l(t)}function ql(e){return 360*e-180}function Gl(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Kl(e,t){return e*$l(Gl(t))}const Yl=85.051129;function Xl(e){return 1/Math.cos(e*Math.PI/180)}class Jl{constructor(e,t,n=0){this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e,t=0){const n=Ul.convert(e);return new Jl(Zl(n.lng),Hl(n.lat),Wl(t,n.lat))}toLngLat(){return new Ul(ql(this.x),Gl(this.y))}toAltitude(){return Kl(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Fl*Xl(Gl(this.y))}}function Ql(e,t,n,r,i,o,a,s,l){const c=(t+r)/2,u=(n+i)/2,d=new y(c,u);s(d),function(e,t,n,r,i,o){const a=n-i,s=r-o;return Math.abs((r-t)*a-(n-e)*s)/Math.hypot(a,s)}(d.x,d.y,o.x,o.y,a.x,a.y)>=l?(Ql(e,t,n,c,u,o,d,s,l),Ql(e,c,u,r,i,d,a,s,l)):e.push(a)}function ec(e,t,n){let r=e[0],i=r.x,o=r.y;t(r);const a=[r];for(let s=1;s<e.length;s++){const l=e[s],{x:c,y:u}=l;t(l),Ql(a,i,o,c,u,r,l,t,n),i=c,o=u,r=l}return a}function tc(e,t,n,r){if(r(t,n)){const i=t.add(n)._mult(.5);tc(e,t,i,r),tc(e,i,n,r)}else e.push(n)}function nc(e,t){let n=e[0];const r=[n];for(let i=1;i<e.length;i++){const o=e[i];tc(r,n,o,t),n=o}return r}const rc=Math.pow(2,14)-1,ic=-rc-1;function oc(e,t){const n=Math.round(e.x*t),r=Math.round(e.y*t);return e.x=T(n,ic,rc),e.y=T(r,ic,rc),(n<e.x||n>e.x+1||r<e.y||r>e.y+1)&&Z("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function ac(e,t,n){const r=e.loadGeometry(),i=e.extent,o=ss/i;if(t&&n&&n.projection.isReprojectedInTileSpace){const o=1<<t.z,{scale:a,x:s,y:l,projection:c}=n,u=e=>{const n=ql((t.x+e.x/i)/o),r=Gl((t.y+e.y/i)/o),u=c.project(n,r);e.x=(u.x*a-s)*i,e.y=(u.y*a-l)*i};for(let t=0;t<r.length;t++)if(1!==e.type)r[t]=ec(r[t],u,1);else{const e=[];for(const n of r[t])n.x<0||n.x>=i||n.y<0||n.y>=i||(u(n),e.push(n));r[t]=e}}for(const a of r)for(const e of a)oc(e,o);return r}function sc(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?ac(e):[]}}function lc(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}function cc(e,t,n){const r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}class uc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new Vo,this.indexArray=new ra,this.segments=new as,this.programConfigurations=new Ya(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n,r){const i=this.layers[0],o=[];let a=null;"circle"===i.type&&(a=i.layout.get("circle-sort-key"));for(const{feature:l,id:c,index:u,sourceLayerIndex:d}of e){const e=this.layers[0]._featureFilter.needGeometry,t=sc(l,e);if(!this.layers[0]._featureFilter.filter(new _o(this.zoom),t,n))continue;const i=a?a.evaluate(t,{},n):void 0,s={id:c,properties:l.properties,type:l.type,sourceLayerIndex:d,index:u,geometry:e?t.geometry:ac(l,n,r),patterns:{},sortKey:i};o.push(s)}a&&o.sort(((e,t)=>e.sortKey-t.sortKey));let s=null;"globe"===r.projection.name&&(this.globeExtVertexArray=new Go,s=r.projection);for(const l of o){const{geometry:r,index:i,sourceLayerIndex:o}=l,a=e[i].feature;this.addFeature(l,r,i,t.availableImages,n,s),t.featureIndex.insert(a,r,i,o,this.index)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,is.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,os.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,t,n,r,i,o){for(const a of t)for(const t of a){const n=t.x,r=t.y;if(n<0||n>=ss||r<0||r>=ss)continue;if(o){const e=o.projectTilePoint(n,r,i),t=o.upVector(i,n,r),a=this.globeExtVertexArray;cc(a,e,t),cc(a,e,t),cc(a,e,t),cc(a,e,t)}const a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),s=a.vertexLength;lc(this.layoutVertexArray,n,r,-1,-1),lc(this.layoutVertexArray,n,r,1,-1),lc(this.layoutVertexArray,n,r,1,1),lc(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(s,s+1,s+2),this.indexArray.emplaceBack(s,s+2,s+3),a.vertexLength+=4,a.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r,i)}}function dc(e,t){for(let n=0;n<e.length;n++)if(xc(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(xc(e,t[n]))return!0;return!!mc(e,t)}function hc(e,t,n){return!!xc(e,t)||!!vc(t,e,n)}function pc(e,t){if(1===e.length)return bc(t,e[0]);for(let n=0;n<t.length;n++){const r=t[n];for(let t=0;t<r.length;t++)if(xc(e,r[t]))return!0}for(let n=0;n<e.length;n++)if(bc(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(mc(e,t[n]))return!0;return!1}function fc(e,t,n){if(e.length>1){if(mc(e,t))return!0;for(let r=0;r<t.length;r++)if(vc(t[r],e,n))return!0}for(let r=0;r<e.length;r++)if(vc(e[r],t,n))return!0;return!1}function mc(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];for(let e=0;e<t.length-1;e++)if(gc(r,i,t[e],t[e+1]))return!0}return!1}function gc(e,t,n,r){return H(e,n,r)!==H(t,n,r)&&H(e,t,n)!==H(e,t,r)}function vc(e,t,n){const r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(let i=1;i<t.length;i++)if(yc(e,t[i-1],t[i])<r)return!0;return!1}function yc(e,t,n){const r=t.distSqr(n);if(0===r)return e.distSqr(t);const i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function bc(e,t){let n,r,i,o=!1;for(let a=0;a<e.length;a++){n=e[a];for(let e=0,a=n.length-1;e<n.length;a=e++)r=n[e],i=n[a],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function xc(e,t){let n=!1;for(let r=0,i=e.length-1;r<e.length;i=r++){const o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function wc(e,t,n,r,i){for(const a of e)if(t<=a.x&&n<=a.y&&r>=a.x&&i>=a.y)return!0;const o=[new y(t,n),new y(t,i),new y(r,i),new y(r,n)];if(e.length>2)for(const a of o)if(xc(e,a))return!0;for(let a=0;a<e.length-1;a++)if(_c(e[a],e[a+1],o))return!0;return!1}function _c(e,t,n){const r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;const o=H(e,t,n[0]);return o!==H(e,t,n[1])||o!==H(e,t,n[2])||o!==H(e,t,n[3])}function kc(e,t,n){const r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function Ec(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Sc(e,t,n,r,i){if(!t[0]&&!t[1])return e;const o=y.convert(t)._mult(i);"viewport"===n&&o._rotate(-r);const a=[];for(let s=0;s<e.length;s++)a.push(e[s].sub(o));return a}function Cc(e,t,n,r){const i=y.convert(e)._mult(r);return"viewport"===t&&i._rotate(-n),i}Ki(uc,"CircleBucket",{omit:["layers"]});const Tc=new Lo({"circle-sort-key":new Po(et.layout_circle["circle-sort-key"])});var Mc={paint:new Lo({"circle-radius":new Po(et.paint_circle["circle-radius"]),"circle-color":new Po(et.paint_circle["circle-color"]),"circle-blur":new Po(et.paint_circle["circle-blur"]),"circle-opacity":new Po(et.paint_circle["circle-opacity"]),"circle-translate":new Ao(et.paint_circle["circle-translate"]),"circle-translate-anchor":new Ao(et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ao(et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ao(et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Po(et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Po(et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Po(et.paint_circle["circle-stroke-opacity"])}),layout:Tc};function Ic(e,t,n,r,i,o,a,s,l){if(o&&e.queryGeometry.isAboveHorizon)return!1;o&&(l*=e.pixelToTileUnitsFactor);const c=e.tileID.canonical,u=n.projection.upVectorScale(c,n.center.lat,n.worldSize).metersToTile;for(const d of t)for(const t of d){const d=t.add(s),h=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(d.x,d.y,!0):0,p=n.projection.projectTilePoint(d.x,d.y,c);if(h>0){const e=n.projection.upVector(c,d.x,d.y);p.x+=e[0]*u*h,p.y+=e[1]*u*h,p.z+=e[2]*u*h}const f=o?d:Oc(p.x,p.y,p.z,r),m=o?e.tilespaceRays.map((e=>Dc(e,h))):e.queryGeometry.screenGeometry,g=Hs([],[p.x,p.y,p.z,1],r);if(!a&&o?l*=g[3]/n.cameraToCenterDistance:a&&!o&&(l*=n.cameraToCenterDistance/g[3]),o){const e=Gl((t.y/ss+c.y)/(1<<c.z));l/=n.projection.pixelsPerMeter(e,1)/Wl(1,e)}if(hc(m,f,l))return!0}return!1}function Oc(e,t,n,r){const i=Hs([],[e,t,n,1],r);return new y(i[0]/i[3],i[1]/i[3])}const Ac=Cs(0,0,0),Pc=Cs(0,0,1);function Dc(e,t){const n=ks();return Ac[2]=t,e.intersectsPlane(Ac,Pc,n),new y(n[0],n[1])}class Lc extends uc{}function Rc(e,{width:t,height:n},r,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==t*n*r)throw new RangeError("mismatched image size")}else i=new Uint8Array(t*n*r);return e.width=t,e.height=n,e.data=i,e}function zc(e,t,n){const{width:r,height:i}=t;r===e.width&&i===e.height||(jc(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=t.data)}function jc(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;for(let l=0;l<i.height;l++){const c=((n.y+l)*e.width+n.x)*o,u=((r.y+l)*t.width+r.x)*o;for(let e=0;e<i.width*o;e++)s[u+e]=a[c+e]}return t}Ki(Lc,"HeatmapBucket",{omit:["layers"]});class Nc{constructor(e,t){Rc(this,e,1,t)}resize(e){zc(this,new Nc(e),1)}clone(){return new Nc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){jc(e,t,n,r,i,1)}}class Bc{constructor(e,t){Rc(this,e,4,t)}resize(e){zc(this,new Bc(e),4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Bc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){jc(e,t,n,r,i,4)}}Ki(Nc,"AlphaImage"),Ki(Bc,"RGBAImage");var Fc={paint:new Lo({"heatmap-radius":new Po(et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Po(et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ao(et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Do(et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ao(et.paint_heatmap["heatmap-opacity"])})};function Vc(e){const t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new Bc({width:n,height:r}),o=(n,r,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(e.clips)for(let a=0,s=0;a<r;++a,s+=4*n)for(let t=0,r=0;t<n;t++,r+=4){const i=t/(n-1),{start:l,end:c}=e.clips[a];o(s,r,l*(1-i)+c*i)}else for(let a=0,s=0;a<n;a++,s+=4)o(0,s,a/(n-1));return i}var Uc={paint:new Lo({"hillshade-illumination-direction":new Ao(et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ao(et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ao(et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ao(et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ao(et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ao(et.paint_hillshade["hillshade-accent-color"])})};const $c=Bo([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zc}=$c;var Hc={exports:{}};function Wc(e,t,n){n=n||2;var r,i,o,a,s,l,c,u=t&&t.length,d=u?t[0]*n:e.length,h=qc(e,0,d,n,!0),p=[];if(!h||h.next===h.prev)return p;if(u&&(h=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=qc(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(iu(a));for(s.sort(eu),i=0;i<s.length;i++)n=tu(s[i],n);return n}(e,t,h,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var f=n;f<d;f+=n)(s=e[f])<r&&(r=s),(l=e[f+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-r,a-i))?32767/c:0}return Kc(h,p,n,r,i,c,0),p}function qc(e,t,n,r,i){var o,a;if(i===vu(e,t,n,r)>0)for(o=t;o<n;o+=r)a=fu(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=fu(o,e[o],e[o+1],a);return a&&lu(a,a.next)&&(mu(a),a=a.next),a}function Gc(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!lu(r,r.next)&&0!==su(r.prev,r,r.next))r=r.next;else{if(mu(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Kc(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=ru(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Xc(e,r,i,o):Yc(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),mu(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Kc(e=Jc(Gc(e),t,n),t,n,r,i,o,2):2===a&&Qc(e,t,n,r,i,o):Kc(Gc(e),t,n,r,i,o,1);break}}}function Yc(e){var t=e.prev,n=e,r=e.next;if(su(t,n,r)>=0)return!1;for(var i=t.x,o=n.x,a=r.x,s=t.y,l=n.y,c=r.y,u=i<o?i<a?i:a:o<a?o:a,d=s<l?s<c?s:c:l<c?l:c,h=i>o?i>a?i:a:o>a?o:a,p=s>l?s>c?s:c:l>c?l:c,f=r.next;f!==t;){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&ou(i,s,o,l,a,c,f.x,f.y)&&su(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Xc(e,t,n,r){var i=e.prev,o=e,a=e.next;if(su(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,c=a.x,u=i.y,d=o.y,h=a.y,p=s<l?s<c?s:c:l<c?l:c,f=u<d?u<h?u:h:d<h?d:h,m=s>l?s>c?s:c:l>c?l:c,g=u>d?u>h?u:h:d>h?d:h,v=ru(p,f,t,n,r),y=ru(m,g,t,n,r),b=e.prevZ,x=e.nextZ;b&&b.z>=v&&x&&x.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==a&&ou(s,u,l,d,c,h,b.x,b.y)&&su(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==a&&ou(s,u,l,d,c,h,x.x,x.y)&&su(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;b&&b.z>=v;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==a&&ou(s,u,l,d,c,h,b.x,b.y)&&su(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=y;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==a&&ou(s,u,l,d,c,h,x.x,x.y)&&su(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Jc(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!lu(i,o)&&cu(i,r,r.next,o)&&hu(i,o)&&hu(o,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(o.i/n|0),mu(r),mu(r.next),r=e=o),r=r.next}while(r!==e);return Gc(r)}function Qc(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&au(a,s)){var l=pu(a,s);return a=Gc(a,a.next),l=Gc(l,l.next),Kc(a,t,n,r,i,o,0),void Kc(l,t,n,r,i,o,0)}s=s.next}a=a.next}while(a!==e)}function eu(e,t){return e.x-t.x}function tu(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var l,c=n,u=n.x,d=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&ou(o<d?i:a,o,u,d,o<d?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),hu(r,e)&&(l<h||l===h&&(r.x>n.x||r.x===n.x&&nu(n,r)))&&(n=r,h=l)),r=r.next}while(r!==c);return n}(e,t);if(!n)return t;var r=pu(n,e);return Gc(r,r.next),Gc(n,n.next)}function nu(e,t){return su(e.prev,e,t.prev)<0&&su(t.next,e,e.next)<0}function ru(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function iu(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function ou(e,t,n,r,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function au(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&cu(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(hu(e,t)&&hu(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(su(e.prev,e,t.prev)||su(e,t.prev,t))||lu(e,t)&&su(e.prev,e,e.next)>0&&su(t.prev,t,t.next)>0)}function su(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function lu(e,t){return e.x===t.x&&e.y===t.y}function cu(e,t,n,r){var i=du(su(e,t,n)),o=du(su(e,t,r)),a=du(su(n,r,e)),s=du(su(n,r,t));return i!==o&&a!==s||!(0!==i||!uu(e,n,t))||!(0!==o||!uu(e,r,t))||!(0!==a||!uu(n,e,r))||!(0!==s||!uu(n,t,r))}function uu(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function du(e){return e>0?1:e<0?-1:0}function hu(e,t){return su(e.prev,e,e.next)<0?su(e,t,e.next)>=0&&su(e,e.prev,t)>=0:su(e,t,e.prev)<0||su(e,e.next,t)<0}function pu(e,t){var n=new gu(e.i,e.x,e.y),r=new gu(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function fu(e,t,n,r){var i=new gu(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function mu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function gu(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vu(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}Hc.exports=Wc,Hc.exports.default=Wc,Wc.deviation=function(e,t,n,r){var i=t&&t.length,o=Math.abs(vu(e,0,i?t[0]*n:e.length,n));if(i)for(var a=0,s=t.length;a<s;a++)o-=Math.abs(vu(e,t[a]*n,a<s-1?t[a+1]*n:e.length,n));var l=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,u=r[a+1]*n,d=r[a+2]*n;l+=Math.abs((e[c]-e[d])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[d+1]-e[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Wc.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&n.holes.push(r+=e[i-1].length)}return n};var yu=h(Hc.exports);function bu(e,t,n,r,i){xu(e,t,n||0,r||e.length-1,i||_u)}function xu(e,t,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);xu(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(r,Math.floor(t+(o-a)*l/o+c)),i)}var u=e[t],d=n,h=r;for(wu(e,n,t),i(e[r],u)>0&&wu(e,n,r);d<h;){for(wu(e,d,h),d++,h--;i(e[d],u)<0;)d++;for(;i(e[h],u)>0;)h--}0===i(e[n],u)?wu(e,n,h):wu(e,++h,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function wu(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _u(e,t){return e<t?-1:e>t?1:0}function ku(e,t){const n=e.length;if(n<=1)return[e];const r=[];let i,o;for(let a=0;a<n;a++){const t=W(e[a]);0!==t&&(e[a].area=Math.abs(t),void 0===o&&(o=t<0),o===t<0?(i&&r.push(i),i=[e[a]]):i.push(e[a]))}if(i&&r.push(i),t>1)for(let a=0;a<r.length;a++)r[a].length<=t||(bu(r[a],t,1,r[a].length-1,Eu),r[a]=r[a].slice(0,t));return r}function Eu(e,t){return t.area-e.area}function Su(e,t,n){const r=n.patternDependencies;let i=!1;for(const o of t){const t=o.paint.get(`${e}-pattern`);t.isConstant()||(i=!0);const n=t.constantOr(null);n&&(i=!0,r[n]=!0)}return i}function Cu(e,t,n,r,i){const o=i.patternDependencies;for(const a of t){const t=a.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:r},n,{},i.availableImages);e=e&&e.name?e.name:e,o[e]=!0,n.patterns[a.id]=e}}return n}class Tu{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Vo,this.indexArray=new ra,this.indexArray2=new ca,this.programConfigurations=new Ya(e.layers,e.zoom),this.segments=new as,this.segments2=new as,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.projection=e.projection}populate(e,t,n,r){this.hasPattern=Su("fill",this.layers,t);const i=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=sc(a,e);if(!this.layers[0]._featureFilter.filter(new _o(this.zoom),u,n))continue;const d=i?i.evaluate(u,{},n,t.availableImages):void 0,h={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:ac(a,n,r),patterns:{},sortKey:d};o.push(h)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const a of o){const{geometry:r,index:i,sourceLayerIndex:o}=a;if(this.hasPattern){const e=Cu("fill",this.layers,a,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(a,r,i,n,{},t.availableImages);t.featureIndex.insert(e[i].feature,r,i,o,this.index)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}addFeatures(e,t,n,r,i){for(const o of this.patternFeatures)this.addFeature(o,o.geometry,o.index,t,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Zc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,r,i,o=[]){for(const a of ku(t,500)){let e=0;for(const s of a)e+=s.length;const t=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),n=t.vertexLength,r=[],i=[];for(const s of a){if(0===s.length)continue;s!==a[0]&&i.push(r.length/2);const e=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),t=e.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(t+s.length-1,t),r.push(s[0].x),r.push(s[0].y);for(let n=1;n<s.length;n++)this.layoutVertexArray.emplaceBack(s[n].x,s[n].y),this.indexArray2.emplaceBack(t+n-1,t+n),r.push(s[n].x),r.push(s[n].y);e.vertexLength+=s.length,e.primitiveLength+=s.length}const o=yu(r,i);for(let a=0;a<o.length;a+=3)this.indexArray.emplaceBack(n+o[a],n+o[a+1],n+o[a+2]);t.vertexLength+=e,t.primitiveLength+=o.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}}Ki(Tu,"FillBucket",{omit:["layers","patternFeatures"]});const Mu=new Lo({"fill-sort-key":new Po(et.layout_fill["fill-sort-key"])});var Iu={paint:new Lo({"fill-antialias":new Ao(et.paint_fill["fill-antialias"]),"fill-opacity":new Po(et.paint_fill["fill-opacity"]),"fill-color":new Po(et.paint_fill["fill-color"]),"fill-outline-color":new Po(et.paint_fill["fill-outline-color"]),"fill-translate":new Ao(et.paint_fill["fill-translate"]),"fill-translate-anchor":new Ao(et.paint_fill["fill-translate-anchor"]),"fill-pattern":new Po(et.paint_fill["fill-pattern"])}),layout:Mu};const Ou=Bo([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Au=Bo([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Pu=Bo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Du}=Ou;var Lu={},Ru=g,zu=ju;function ju(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(Nu,this,t)}function Nu(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function Bu(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)r+=((n=e[a]).x-(t=e[i]).x)*(t.y+n.y);return r}ju.types=["Unknown","Point","LineString","Polygon"],ju.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,o=0,a=0,s=[];e.pos<n;){if(i<=0){var l=e.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new Ru(o,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},ju.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(r<=0){var u=e.readVarint();n=7&u,r=u>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,c]},ju.prototype.toGeoJSON=function(e,t,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=ju.types[this.type];function u(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(r=0;r<l.length;r++)d[r]=l[r][0];u(l=d);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=Bu(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)u(l[r][i])}1===l.length?l=l[0]:c="Multi"+c;var h={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Fu=zu,Vu=Uu;function Uu(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields($u,this,t),this.length=this._features.length}function $u(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}Uu.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Fu(this._pbf,t,this.extent,this._keys,this._values)};var Zu=Vu;function Hu(e,t,n){if(3===e){var r=new Zu(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var Wu=Lu.VectorTile=function(e,t){this.layers=e.readFields(Hu,{},t)},qu=Lu.VectorTileFeature=zu;function Gu(e,t,n,r){const i=[],o=0===r?(e,t,n,r,i,o)=>{e.push(new y(o,n+(o-t)/(r-t)*(i-n)))}:(e,t,n,r,i,o)=>{e.push(new y(t+(o-n)/(i-n)*(r-t),o))};for(const a of e){const e=[];for(const i of a){if(i.length<=2)continue;const a=[];for(let e=0;e<i.length-1;e++){const s=i[e].x,l=i[e].y,c=i[e+1].x,u=i[e+1].y,d=0===r?s:l,h=0===r?c:u;d<t?h>t&&o(a,s,l,c,u,t):d>n?h<n&&o(a,s,l,c,u,n):a.push(i[e]),h<t&&d>=t&&o(a,s,l,c,u,t),h>n&&d<=n&&o(a,s,l,c,u,n)}let s=i[i.length-1];const l=0===r?s.x:s.y;l>=t&&l<=n&&a.push(s),a.length&&(s=a[a.length-1],a[0].x===s.x&&a[0].y===s.y||a.push(a[0]),e.push(a))}e.length&&i.push(e)}return i}Lu.VectorTileLayer=Vu;const Ku=qu.types,Yu=Math.pow(2,13);function Xu(e,t,n,r,i,o,a,s){e.emplaceBack((t<<1)+a,(n<<1)+o,(Math.floor(r*Yu)<<1)+i,Math.round(s))}function Ju(e,t,n){const r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}class Qu{constructor(){this.acc=new y(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new y(e.x,e.y),this.max=new y(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);const n=this.min,r=this.max;e.x<n.x?n.x=e.x:e.x>r.x&&(r.x=e.x),e.y<n.y?n.y=e.y:e.y>r.y&&(r.y=e.y),((0===e.x||e.x===ss)&&e.x===t.x)!=((0===e.y||e.y===ss)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,Pn(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>ss!=e.x>ss&&this.addBorderIntersection(1,Pn(t.y,e.y,(ss-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Pn(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>ss!=e.y>ss&&this.addBorderIntersection(3,Pn(t.x,e.x,(ss-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{const n=0===e.y?2:3;this.addBorderIntersection(n,t.x),this.addBorderIntersection(n,e.x)}}centroid(){const e=this.polyCount.reduce(((e,t)=>e+t.edges),0);return 0!==e?this.acc.div(e)._round():new y(0,0)}span(){return new y(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((e,t)=>e+ +(t[0]!==Number.MAX_VALUE)),0)}}class ed{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new $o,this.centroidVertexArray=new _a,this.indexArray=new ra,this.programConfigurations=new Ya(e.layers,e.zoom),this.segments=new as,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.enableTerrain=e.enableTerrain}populate(e,t,n,r){this.features=[],this.hasPattern=Su("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/ss/(1<<e.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:i,id:o,index:a,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=sc(i,e);if(!this.layers[0]._featureFilter.filter(new _o(this.zoom),l,n))continue;const c={id:o,sourceLayerIndex:s,index:a,geometry:e?l.geometry:ac(i,n,r),properties:i.properties,type:i.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(Cu("fill-extrusion",this.layers,c,this.zoom,t)):this.addFeature(c,c.geometry,a,n,{},t.availableImages,r),t.featureIndex.insert(i,c.geometry,a,s,this.index,u)}this.sortBorders()}addFeatures(e,t,n,r,i){for(const o of this.features){const{geometry:e}=o;this.addFeature(o,e,o.index,t,n,r,i)}this.sortBorders()}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Du),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Pu.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Au.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,r,i,o,a){const s=[new y(0,0),new y(ss,ss)],l=a.projection,c="globe"===l.name,u=this.enableTerrain&&!c?new Qu:null,d="Polygon"===Ku[e.type];c&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Go);const h=ku(t,500);for(let g=h.length-1;g>=0;g--){const e=h[g];(0===e.length||(p=e[0]).every((e=>e.x<=0))||p.every((e=>e.x>=ss))||p.every((e=>e.y<=0))||p.every((e=>e.y>=ss)))&&h.splice(g,1)}var p;let f;if(c)f=ld(h,s,r);else{f=[];for(const e of h)f.push({polygon:e,bounds:s})}const m=d?this.edgeRadius:0;for(const{polygon:g,bounds:v}of f){let e=0,t=0;for(const r of g)d&&!r[0].equals(r[r.length-1])&&r.push(r[0]),t+=d?r.length-1:r.length;const n=this.segments.prepareSegment((d?5:4)*t,this.layoutVertexArray,this.indexArray);if(d){const t=[],i=[];e=n.vertexLength;for(const e of g){let o,a;e.length&&e!==g[0]&&i.push(t.length/2),o=e[1].sub(e[0])._perp()._unit();for(let i=1;i<e.length;i++){const s=e[i],u=e[i===e.length-1?1:i+1];let{x:d,y:h}=s;if(m){a=u.sub(s)._perp()._unit();const e=o.add(a)._unit(),t=m*Math.min(4,1/(o.x*e.x+o.y*e.y));d+=t*e.x,h+=t*e.y,o=a}Xu(this.layoutVertexArray,d,h,0,0,1,1,0),n.vertexLength++,t.push(s.x,s.y),c&&Ju(this.layoutVertexExtArray,l.projectTilePoint(d,h,r),l.upVector(r,d,h))}}const o=yu(t,i);for(let r=0;r<o.length;r+=3)this.indexArray.emplaceBack(e+o[r],e+o[r+2],e+o[r+1]),n.primitiveLength++}for(const i of g){u&&i.length&&u.startRing(i[0]);let t,o,a,s=i.length>4&&od(i[i.length-2],i[0],i[1]),h=m?nd(i[i.length-2],i[0],i[1],m):0;o=i[1].sub(i[0])._perp()._unit();let p=!0;for(let f=1,g=0;f<i.length;f++){let y=i[f-1],b=i[f];const x=i[f===i.length-1?1:f+1];if(u&&d&&u.currentPolyCount.top++,id(b,y,v)){m&&(o=x.sub(b)._perp()._unit(),p=!p);continue}u&&u.append(b,y);const w=b.sub(y)._perp(),_=w.x/(Math.abs(w.x)+Math.abs(w.y)),k=w.y>0?1:0,E=y.dist(b);if(g+E>32768&&(g=0),m){a=x.sub(b)._perp()._unit();let e=rd(y,b,x,td(o,a),m);isNaN(e)&&(e=0);const t=b.sub(y)._unit();y=y.add(t.mult(h))._round(),b=b.add(t.mult(-e))._round(),h=e,o=a}const S=n.vertexLength,C=i.length>4&&od(y,b,x);let T=ad(g,s,p);if(Xu(this.layoutVertexArray,y.x,y.y,_,k,0,0,T),Xu(this.layoutVertexArray,y.x,y.y,_,k,0,1,T),g+=E,T=ad(g,C,!p),s=C,Xu(this.layoutVertexArray,b.x,b.y,_,k,0,0,T),Xu(this.layoutVertexArray,b.x,b.y,_,k,0,1,T),n.vertexLength+=4,this.indexArray.emplaceBack(S+0,S+1,S+2),this.indexArray.emplaceBack(S+1,S+3,S+2),n.primitiveLength+=2,m){const r=e+(1===f?i.length-2:f-2),o=1===f?e:r+1;if(this.indexArray.emplaceBack(S+1,r,S+3),this.indexArray.emplaceBack(r,o,S+3),n.primitiveLength+=2,void 0===t&&(t=S),!id(x,i[f],v)){const e=f===i.length-1?t:n.vertexLength;this.indexArray.emplaceBack(S+2,S+3,e),this.indexArray.emplaceBack(S+3,e+1,e),this.indexArray.emplaceBack(S+3,o,e+1),n.primitiveLength+=3}p=!p}if(c){const e=this.layoutVertexExtArray,t=l.projectTilePoint(y.x,y.y,r),n=l.projectTilePoint(b.x,b.y,r),i=l.upVector(r,y.x,y.y),o=l.upVector(r,b.x,b.y);Ju(e,t,i),Ju(e,t,i),Ju(e,n,o),Ju(e,n,o)}}d&&(e+=i.length-1)}}if(u&&u.polyCount.length>0){if(u.borders){u.vertexArrayOffset=this.centroidVertexArray.length;const e=u.borders,t=this.featuresOnBorder.push(u)-1;for(let n=0;n<4;n++)e[n][0]!==Number.MAX_VALUE&&this.borders[n].push(t)}this.encodeCentroid(u.borders?void 0:u.centroid(),u)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort(((t,n)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[n].borders[e][0]))}encodeCentroid(e,t,n=!0){let r,i;if(e)if(0!==e.y){const n=t.span()._mult(this.tileToMeter);r=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(n.x/10)),i=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(n.y/10))}else r=Math.ceil(7*(e.x+450)),i=0;else r=0,i=+n;let o=n?this.centroidVertexArray.length:t.vertexArrayOffset;for(const a of t.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*a.edges+a.top);for(let e=0;e<a.top;e++)this.centroidVertexArray.emplace(o++,r,i);for(let e=0;e<2*a.edges;e++)this.centroidVertexArray.emplace(o++,0,i),this.centroidVertexArray.emplace(o++,r,i)}}}function td(e,t){const n=e.add(t)._unit();return e.x*n.x+e.y*n.y}function nd(e,t,n,r){const i=t.sub(e)._perp()._unit(),o=n.sub(t)._perp()._unit();return rd(e,t,n,td(i,o),r)}function rd(e,t,n,r,i){const o=Math.sqrt(1-r*r);return Math.min(e.dist(t)/3,t.dist(n)/3,i*o/r)}function id(e,t,n){return e.x<n[0].x&&t.x<n[0].x||e.x>n[1].x&&t.x>n[1].x||e.y<n[0].y&&t.y<n[0].y||e.y>n[1].y&&t.y>n[1].y}function od(e,t,n){if(e.x<0||e.x>=ss||t.x<0||t.x>=ss||n.x<0||n.x>=ss)return!1;const r=n.sub(t),i=r.perp(),o=e.sub(t);return(r.x*o.x+r.y*o.y)/Math.sqrt((r.x*r.x+r.y*r.y)*(o.x*o.x+o.y*o.y))>-.866&&i.x*o.x+i.y*o.y<0}function ad(e,t,n){const r=t?2|e:-3&e;return n?1|r:-2&r}function sd(){const e=Math.PI/32,t=Math.tan(e),n=Bl;return n*Math.sqrt(1+2*t*t)-n}function ld(e,t,n){const r=1<<n.z,i=ql(n.x/r),o=ql((n.x+1)/r),a=Gl(n.y/r),s=Gl((n.y+1)/r);return function(e,t,n,r,i=0,o){const a=[];if(!e.length||!n||!r)return a;const s=(e,t)=>{for(const n of e)a.push({polygon:n,bounds:t})},l=Math.ceil(Math.log2(n)),c=Math.ceil(Math.log2(r)),u=l-c,d=[];for(let f=0;f<Math.abs(u);f++)d.push(u>0?0:1);for(let f=0;f<Math.min(l,c);f++)d.push(0),d.push(1);let h=e;if(h=Gu(h,t[0].y-i,t[1].y+i,1),h=Gu(h,t[0].x-i,t[1].x+i,0),!h.length)return a;const p=[];for(d.length?p.push({polygons:h,bounds:t,depth:0}):s(h,t);p.length;){const e=p.pop(),t=e.depth,n=d[t],r=e.bounds[0],a=e.bounds[1],l=0===n?r.x:r.y,c=0===n?a.x:a.y,u=o?o(n,l,c):.5*(l+c),h=Gu(e.polygons,l-i,u+i,n),f=Gu(e.polygons,u-i,c+i,n);if(h.length){const e=[r,new y(0===n?u:a.x,1===n?u:a.y)];d.length>t+1?p.push({polygons:h,bounds:e,depth:t+1}):s(h,e)}if(f.length){const e=[new y(0===n?u:r.x,1===n?u:r.y),a];d.length>t+1?p.push({polygons:f,bounds:e,depth:t+1}):s(f,e)}}return a}(e,t,Math.ceil((o-i)/11.25),Math.ceil((a-s)/11.25),1,((e,t,i)=>{if(0===e)return.5*(t+i);{const e=Gl((n.y+t/ss)/r);return(Hl(.5*(Gl((n.y+i/ss)/r)+e))*r-n.y)*ss}}))}Ki(ed,"FillExtrusionBucket",{omit:["layers","features"]}),Ki(Qu,"PartMetadata");const cd=new Lo({"fill-extrusion-edge-radius":new Ao(et["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var ud={paint:new Lo({"fill-extrusion-opacity":new Ao(et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Po(et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ao(et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ao(et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Po(et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Po(et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Po(et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ao(et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ao(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ao(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Ao(et["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:cd};function dd(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}class hd{constructor(e,t,n){this.z=e,this.x=t,this.y=n,this.key=md(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const n=function(e,t,n){var r=dd(256*e,256*(t=Math.pow(2,n)-t-1),n),i=dd(256*(e+1),256*(t+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),r=function(e,t,n){let r,i="";for(let o=e;o>0;o--)r=1<<o-1,i+=(t&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)}toString(){return`${this.z}/${this.x}/${this.y}`}}class pd{constructor(e,t){this.wrap=e,this.canonical=t,this.key=md(e,t.z,t.z,t.x,t.y)}}class fd{constructor(e,t,n,r,i){this.overscaledZ=e,this.wrap=t,this.canonical=new hd(n,+r,+i),this.key=0===t&&e===n?this.canonical.key:md(t,e,n,r,i)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new fd(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fd(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t=!0){if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return md(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-e;return md(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new fd(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new fd(t,this.wrap,t,n,r),new fd(t,this.wrap,t,n+1,r),new fd(t,this.wrap,t,n,r+1),new fd(t,this.wrap,t,n+1,r+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new fd(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new fd(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new pd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function md(e,t,n,r,i){const o=1<<Math.min(n,22);let a=o*(i%o)+r%o;return e&&n<22&&(a+=o*o*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*a+n)+(t-n)}Ki(hd,"CanonicalTileID"),Ki(fd,"OverscaledTileID",{omit:["projMatrix"]});class gd extends y{constructor(e,t,n){super(e,t),this.z=n}}function vd(e,t){return e.x*t.x+e.y*t.y}function yd(e,t){if(1===e.length){let n=0;const r=t[n++];let i;for(;!i||r.equals(i);)if(i=t[n++],!i)return 1/0;for(;n<t.length;n++){const o=t[n],a=e[0],s=i.sub(r),l=o.sub(r),c=a.sub(r),u=vd(s,s),d=vd(s,l),h=vd(l,l),p=vd(c,s),f=vd(c,l),m=u*h-d*d,g=(h*p-d*f)/m,v=(u*f-d*p)/m,y=r.z*(1-g-v)+i.z*g+o.z*v;if(isFinite(y))return y}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}function bd(e,t,n,r,i,o,a,s){const l=a*i.getElevationAt(e,t,!0,!0),c=0!==o[0],u=c?0===o[1]?a*(o[0]/7-450):a*function(e,t,n){const r=Math.floor(t[0]/8),i=Math.floor(t[1]/8),o=10*(t[0]-8*r),a=10*(t[1]-8*i),s=e.getElevationAt(r,i,!0,!0),l=e.getMeterToDEM(n),c=Math.floor(.5*(o*l-1)),u=Math.floor(.5*(a*l-1)),d=e.tileCoordToPixel(r,i),h=2*c+1,p=2*u+1,f=function(e,t,n,r,i){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+i,n,!0),e.getElevationAtPixel(t,n+i,!0),e.getElevationAtPixel(t+r,n+i,!0)]}(e,d.x-c,d.y-u,h,p),m=Math.abs(f[0]-f[1]),g=Math.abs(f[2]-f[3]),v=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),y=Math.min(.25,.5*l*(m+g)/h),b=Math.min(.25,.5*l*v/p);return s+Math.max(y*o,b*a)}(i,o,s):l;return{base:l+(0===n)?-1:n,top:c?Math.max(u+r,l+n+2):l+r}}const xd=Bo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:wd}=xd,_d=Bo([{name:"a_packed",components:4,type:"Float32"}]),{members:kd}=_d,Ed=qu.types,Sd=Math.cos(Math.PI/180*37.5);class Cd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new Zo,this.layoutVertexArray2=new Ho,this.indexArray=new ra,this.programConfigurations=new Ya(e.layers,e.zoom),this.segments=new as,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n,r){this.hasPattern=Su("line",this.layers,t);const i=this.layers[0].layout.get("line-sort-key"),o=[];for(const{feature:c,id:u,index:d,sourceLayerIndex:h}of e){const e=this.layers[0]._featureFilter.needGeometry,t=sc(c,e);if(!this.layers[0]._featureFilter.filter(new _o(this.zoom),t,n))continue;const a=i?i.evaluate(t,{},n):void 0,s={id:u,properties:c.properties,type:c.type,sourceLayerIndex:h,index:d,geometry:e?t.geometry:ac(c,n,r),patterns:{},sortKey:a};o.push(s)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));const{lineAtlas:a,featureIndex:s}=t,l=this.addConstantDashes(a);for(const c of o){const{geometry:r,index:i,sourceLayerIndex:o}=c;if(l&&this.addFeatureDashes(c,a),this.hasPattern){const e=Cu("line",this.layers,c,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(c,r,i,n,a.positions,t.availableImages);s.insert(e[i].feature,r,i,o,this.index)}}addConstantDashes(e){let t=!1;for(const n of this.layers){const r=n.paint.get("line-dasharray").value,i=n.layout.get("line-cap").value;if("constant"!==r.kind||"constant"!==i.kind)t=!0;else{const t=i.value,n=r.value;if(!n)continue;e.addDash(n,t)}}return t}addFeatureDashes(e,t){const n=this.zoom;for(const r of this.layers){const i=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===o.kind)continue;let a,s;if("constant"===i.kind){if(a=i.value,!a)continue}else a=i.evaluate({zoom:n},e);s="constant"===o.kind?o.value:o.evaluate({zoom:n},e),t.addDash(a,s),e.patterns[r.id]=t.getKey(a,s)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}addFeatures(e,t,n,r,i){for(const o of this.patternFeatures)this.addFeature(o,o.geometry,o.index,t,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,kd)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,wd),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,r,i,o){const a=this.layers[0].layout,s=a.get("line-join").evaluate(e,{}),l=a.get("line-cap").evaluate(e,{}),c=a.get("line-miter-limit"),u=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const d of t)this.addLine(d,e,s,l,c,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}addLine(e,t,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Ed[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(i=1.05);const c=this.overscaling<=16?15*ss/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let d,h,p,f,m;this.e1=this.e2=-1,a&&(d=e[s-2],m=e[l].sub(d)._unit()._perp());for(let g=l;g<s;g++){if(p=g===s-1?a?e[l+1]:void 0:e[g+1],p&&e[g].equals(p))continue;m&&(f=m),d&&(h=d),d=e[g],m=p?p.sub(d)._unit()._perp():f,f=f||m;let t=f.add(m);0===t.x&&0===t.y||t._unit();const v=f.x*m.x+f.y*m.y,y=t.x*m.x+t.y*m.y,b=0!==y?1/y:1/0,x=2*Math.sqrt(2-2*y),w=y<Sd&&h&&p,_=f.x*m.y-f.y*m.x>0;if(w&&g>l){const e=d.dist(h);if(e>2*c){const t=d.sub(d.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,f,0,0,u),h=t}}const k=h&&p;let E=k?n:a?"butt":r;if(k&&"round"===E&&(b<o?E="miter":b<=2&&(E="fakeround")),"miter"===E&&b>i&&(E="bevel"),"bevel"===E&&(b>2&&(E="flipbevel"),b<i&&(E="miter")),h&&this.updateDistance(h,d),"miter"===E)t._mult(b),this.addCurrentVertex(d,t,0,0,u);else if("flipbevel"===E){if(b>100)t=m.mult(-1);else{const e=b*f.add(m).mag()/f.sub(m).mag();t._perp()._mult(e*(_?-1:1))}this.addCurrentVertex(d,t,0,0,u),this.addCurrentVertex(d,t.mult(-1),0,0,u)}else if("bevel"===E||"fakeround"===E){const e=-Math.sqrt(b*b-1),t=_?e:0,n=_?0:e;if(h&&this.addCurrentVertex(d,f,t,n,u),"fakeround"===E){const e=Math.round(180*x/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*e*e+(.848013+v*(.215638*v-1.06021)))}const r=m.sub(f)._mult(n)._add(f)._unit()._mult(_?-1:1);this.addHalfVertex(d,r.x,r.y,!1,_,0,u)}}p&&this.addCurrentVertex(d,m,-t,-n,u)}else if("butt"===E)this.addCurrentVertex(d,t,0,0,u);else if("square"===E){const e=h?1:-1;h||this.addCurrentVertex(d,t,e,e,u),this.addCurrentVertex(d,t,0,0,u),h&&this.addCurrentVertex(d,t,e,e,u)}else"round"===E&&(h&&(this.addCurrentVertex(d,f,0,0,u),this.addCurrentVertex(d,f,1,1,u,!0)),p&&(this.addCurrentVertex(d,m,-1,-1,u,!0),this.addCurrentVertex(d,m,0,0,u)));if(w&&g<s-1){const e=d.dist(p);if(e>2*c){const t=d.add(p.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,m,0,0,u),d=t}}}}addCurrentVertex(e,t,n,r,i,o=!1){const a=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,i),this.addHalfVertex(e,a,s,o,!0,-r,i)}addHalfVertex({x:e,y:t},n,r,i,o,a,s){this.layoutVertexArray.emplaceBack((e<<1)+(i?1:0),(t<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}Ki(Cd,"LineBucket",{omit:["layers","patternFeatures"]});const Td=new Lo({"line-cap":new Po(et.layout_line["line-cap"]),"line-join":new Po(et.layout_line["line-join"]),"line-miter-limit":new Ao(et.layout_line["line-miter-limit"]),"line-round-limit":new Ao(et.layout_line["line-round-limit"]),"line-sort-key":new Po(et.layout_line["line-sort-key"])});var Md={paint:new Lo({"line-opacity":new Po(et.paint_line["line-opacity"]),"line-color":new Po(et.paint_line["line-color"]),"line-translate":new Ao(et.paint_line["line-translate"]),"line-translate-anchor":new Ao(et.paint_line["line-translate-anchor"]),"line-width":new Po(et.paint_line["line-width"]),"line-gap-width":new Po(et.paint_line["line-gap-width"]),"line-offset":new Po(et.paint_line["line-offset"]),"line-blur":new Po(et.paint_line["line-blur"]),"line-dasharray":new Po(et.paint_line["line-dasharray"]),"line-pattern":new Po(et.paint_line["line-pattern"]),"line-gradient":new Do(et.paint_line["line-gradient"]),"line-trim-offset":new Ao(et.paint_line["line-trim-offset"])}),layout:Td};const Id=new class extends Po{possiblyEvaluate(e,t){return t=new _o(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,r){return t=P({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,r)}}(Md.paint.properties["line-width"].specification);function Od(e,t){return t>0?t+2*e:e}Id.useIntegerZoom=!0;const Ad=Bo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Pd=Bo([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Dd=Bo([{name:"a_projected_pos",components:4,type:"Float32"}],4);Bo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ld=Bo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Rd=Bo([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Bo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const zd=Bo([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),jd=Bo([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Bo([{name:"triangle",components:3,type:"Uint16"}]),Bo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Bo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Bo([{type:"Float32",name:"offsetX"}]),Bo([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Nd=24;const Bd=128;function Fd(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new _o(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:r}=n;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let o=i;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[i],s=t[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new _o(a)),maxSize:n.evaluate(new _o(s)),interpolationType:r}}}function Vd(e,{uSize:t,uSizeT:n},{lowerSize:r,upperSize:i}){return"source"===e.kind?r/Bd:"composite"===e.kind?Pn(r/Bd,i/Bd,n):t}function Ud(e,t){let n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:o,maxZoom:a}=e,s=i?T(er.interpolationFactor(i,t,o,a),0,1):0;"camera"===e.kind?r=Pn(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:r}}var $d=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Bd,evaluateSizeForFeature:Vd,evaluateSizeForZoom:Ud,getSizeData:Fd});function Zd(e,t,n){return e.sections.forEach((e=>{e.text=function(e,t,n){const r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),wo.applyArabicShaping&&(e=wo.applyArabicShaping(e)),e}(e.text,t,n)})),e}const Hd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function Wd(e){return""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e}function qd(e){return""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e}var Gd=Xd,Kd=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?i-1:0,h=n?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=h,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+d],d+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},Yd=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*l-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=f,a/=256,c-=8);e[n+p-f]|=128*m};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Xd(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Xd.Varint=0,Xd.Fixed64=1,Xd.Bytes=2,Xd.Fixed32=5;var Jd=4294967296,Qd=1/Jd,eh="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function th(e){return e.type===Xd.Bytes?e.readVarint()+e.pos:e.pos+1}function nh(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function rh(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function ih(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function oh(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function ah(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function sh(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function lh(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function ch(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function uh(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function dh(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function hh(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function ph(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function fh(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function mh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Xd.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=ph(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=mh(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=ph(this.buf,this.pos)+ph(this.buf,this.pos+4)*Jd;return this.pos+=8,e},readSFixed64:function(){var e=ph(this.buf,this.pos)+mh(this.buf,this.pos+4)*Jd;return this.pos+=8,e},readFloat:function(){var e=Kd(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Kd(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return nh(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return nh(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return nh(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return nh(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return nh(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return nh(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&eh?function(e,t,n){return eh.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var o,a,s,l=e[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=u}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Xd.Bytes)return e.push(this.readVarint(t));var n=th(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Xd.Bytes)return e.push(this.readSVarint());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Xd.Bytes)return e.push(this.readBoolean());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Xd.Bytes)return e.push(this.readFloat());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Xd.Bytes)return e.push(this.readDouble());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Xd.Bytes)return e.push(this.readFixed32());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Xd.Bytes)return e.push(this.readSFixed32());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Xd.Bytes)return e.push(this.readFixed64());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Xd.Bytes)return e.push(this.readSFixed64());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Xd.Varint)for(;this.buf[this.pos++]>127;);else if(t===Xd.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Xd.Fixed32)this.pos+=4;else{if(t!==Xd.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),fh(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),fh(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),fh(this.buf,-1&e,this.pos),fh(this.buf,Math.floor(e*Qd),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),fh(this.buf,-1&e,this.pos),fh(this.buf,Math.floor(e*Qd),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&rh(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Yd(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Yd(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&rh(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,Xd.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,ih,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,oh,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,lh,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,ah,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,sh,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,ch,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,uh,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,dh,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,hh,t)},writeBytesField:function(e,t){this.writeTag(e,Xd.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Xd.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Xd.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Xd.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Xd.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Xd.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Xd.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Xd.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Xd.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Xd.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var gh=h(Gd);const vh=3;function yh(e,t,n){t.glyphs=[],1===e&&n.readMessage(bh,t)}function bh(e,t,n){if(3===e){const{id:e,bitmap:r,width:i,height:o,left:a,top:s,advance:l}=n.readMessage(xh,{});t.glyphs.push({id:e,bitmap:new Nc({width:i+2*vh,height:o+2*vh},r),metrics:{width:i,height:o,left:a,top:s,advance:l}})}else 4===e?t.ascender=n.readSVarint():5===e&&(t.descender=n.readSVarint())}function xh(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}const wh=vh;function _h(e){let t=0,n=0;for(const a of e)t+=a.w*a.h,n=Math.max(n,a.w);e.sort(((e,t)=>t.h-e.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let i=0,o=0;for(const a of e)for(let e=r.length-1;e>=0;e--){const t=r[e];if(!(a.w>t.w||a.h>t.h)){if(a.x=t.x,a.y=t.y,o=Math.max(o,a.y+a.h),i=Math.max(i,a.x+a.w),a.w===t.w&&a.h===t.h){const t=r.pop();e<r.length&&(r[e]=t)}else a.h===t.h?(t.x+=a.w,t.w-=a.w):a.w===t.w?(t.y+=a.h,t.h-=a.h):(r.push({x:t.x+a.w,y:t.y,w:t.w-a.w,h:a.h}),t.y+=a.h,t.h-=a.h);break}}return{w:i,h:o,fill:t/(i*o)||0}}const kh=1;class Eh{constructor(e,{pixelRatio:t,version:n,stretchX:r,stretchY:i,content:o}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=r,this.stretchY=i,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+kh,this.paddedRect.y+kh]}get br(){return[this.paddedRect.x+this.paddedRect.w-kh,this.paddedRect.y+this.paddedRect.h-kh]}get displaySize(){return[(this.paddedRect.w-2*kh)/this.pixelRatio,(this.paddedRect.h-2*kh)/this.pixelRatio]}}class Sh{constructor(e,t){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,n,i),this.addImages(t,r,i);const{w:o,h:a}=_h(i),s=new Bc({width:o||1,height:a||1});for(const l in e){const t=e[l],r=n[l].paddedRect;Bc.copy(t.data,s,{x:0,y:0},{x:r.x+kh,y:r.y+kh},t.data)}for(const l in t){const e=t[l],n=r[l].paddedRect,i=n.x+kh,o=n.y+kh,a=e.data.width,c=e.data.height;Bc.copy(e.data,s,{x:0,y:0},{x:i,y:o},e.data),Bc.copy(e.data,s,{x:0,y:c-1},{x:i,y:o-1},{width:a,height:1}),Bc.copy(e.data,s,{x:0,y:0},{x:i,y:o+c},{width:a,height:1}),Bc.copy(e.data,s,{x:a-1,y:0},{x:i-1,y:o},{width:1,height:c}),Bc.copy(e.data,s,{x:0,y:0},{x:i+a,y:o},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(e,t,n){for(const r in e){const i=e[r],o={x:0,y:0,w:i.data.width+2*kh,h:i.data.height+2*kh};n.push(o),t[r]=new Eh(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(e,t){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((t=>e.hasImage(t))),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[r,i]=e.tl;n.update(t.data,void 0,{x:r,y:i})}}Ki(Eh,"ImagePosition"),Ki(Sh,"ImageAtlas");const Ch={horizontal:1,vertical:2,horizontalOnly:3},Th=-17;class Mh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const n=new Mh;return n.scale=e||1,n.fontStack=t,n}static forImage(e){const t=new Mh;return t.imageName=e,t}}class Ih{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const n=new Ih;for(let r=0;r<e.sections.length;r++){const i=e.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,t)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(e,t){let n="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r+1)||null,o=e.charCodeAt(r-1)||null;n+=!t&&(i&&oo(i)&&!Hd[e[r+1]]||o&&oo(o)&&!Hd[e[r-1]])||!Hd[e[r]]?e[r]:Hd[e[r]]}return n}(this.text,e)}trim(){let e=0;for(let n=0;n<this.text.length&&Ah[this.text.charCodeAt(n)];n++)e++;let t=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&Ah[this.text.charCodeAt(n)];n--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const n=new Ih;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(Mh.forText(e.scale,e.fontStack||t));const n=this.sections.length-1;for(let r=0;r<e.text.length;++r)this.sectionIndex.push(n)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void Z("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Mh.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Z("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Oh(e,t,n,r,i,o,a,s,l,c,u,d,h,p,f){const m=Ih.fromFeature(e,i);d===Ch.vertical&&m.verticalizePunctuation(h);let g=[];const v=function(e,t,n,r,i,o){if(!e)return[];const a=[],s=function(e,t,n,r,i,o){let a=0;for(let s=0;s<e.length();s++){const n=e.getSection(s);a+=Dh(e.getCharCode(s),n,r,i,t,o)}return a/Math.max(1,Math.ceil(a/n))}(e,t,n,r,i,o),l=e.text.indexOf("")>=0;let c=0;for(let d=0;d<e.length();d++){const n=e.getSection(d),h=e.getCharCode(d);if(Ah[h]||(c+=Dh(h,n,r,i,t,o)),d<e.length()-1){const t=!((u=h)<11904||!(eo["Bopomofo Extended"](u)||eo.Bopomofo(u)||eo["CJK Compatibility Forms"](u)||eo["CJK Compatibility Ideographs"](u)||eo["CJK Compatibility"](u)||eo["CJK Radicals Supplement"](u)||eo["CJK Strokes"](u)||eo["CJK Symbols and Punctuation"](u)||eo["CJK Unified Ideographs Extension A"](u)||eo["CJK Unified Ideographs"](u)||eo["Enclosed CJK Letters and Months"](u)||eo["Halfwidth and Fullwidth Forms"](u)||eo.Hiragana(u)||eo["Ideographic Description Characters"](u)||eo["Kangxi Radicals"](u)||eo["Katakana Phonetic Extensions"](u)||eo.Katakana(u)||eo["Vertical Forms"](u)||eo["Yi Radicals"](u)||eo["Yi Syllables"](u)));(Ph[h]||t||n.imageName)&&a.push(zh(d+1,c,s,a,Rh(h,e.getCharCode(d+1),t&&l),!1))}}var u;return jh(zh(e.length(),c,s,a,0,!0))}(m,c,o,t,r,p),{processBidirectionalText:y,processStyledBidirectionalText:b}=wo;if(y&&1===m.sections.length){const e=y(m.toString(),v);for(const t of e){const e=new Ih;e.text=t,e.sections=m.sections;for(let n=0;n<t.length;n++)e.sectionIndex.push(0);g.push(e)}}else if(b){const e=b(m.text,m.sectionIndex,v);for(const t of e){const e=new Ih;e.text=t[0],e.sectionIndex=t[1],e.sections=m.sections,g.push(e)}}else g=function(e,t){const n=[],r=e.text;let i=0;for(const o of t)n.push(e.substring(i,o)),i=o;return i<r.length&&n.push(e.substring(i,r.length)),n}(m,v);const x=[],w={positionedLines:x,text:m.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:d,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,n,r,i,o,a,s,l,c,u,d){let h=0,p=0,f=0;const m="right"===s?1:"left"===s?0:.5;let g=!1;for(const _ of i){const e=_.getSections();for(const n of e){if(n.imageName)continue;const e=t[n.fontStack];if(e&&(g=void 0!==e.ascender&&void 0!==e.descender,!g))break}if(!g)break}let v=0;for(const _ of i){_.trim();const i=_.getMaxScale(),a=(i-1)*Nd,s={positionedGlyphs:[],lineOffset:0};e.positionedLines[v]=s;const b=s.positionedGlyphs;let x=0;if(!_.length()){p+=o,++v;continue}let w=0,k=0;for(let o=0;o<_.length();o++){const a=_.getSection(o),s=_.getSectionIndex(o),f=_.getCharCode(o);let m=a.scale,v=null,E=null,S=null,C=Nd,T=0;const M=!(l===Ch.horizontal||!u&&!io(f)||u&&(Ah[f]||(y=f,eo.Arabic(y)||eo["Arabic Supplement"](y)||eo["Arabic Extended-A"](y)||eo["Arabic Presentation Forms-A"](y)||eo["Arabic Presentation Forms-B"](y))));if(a.imageName){const t=r[a.imageName];if(!t)continue;S=a.imageName,e.iconsInText=e.iconsInText||!0,E=t.paddedRect;const n=t.displaySize;m=m*Nd/d,v={width:n[0],height:n[1],left:kh,top:-wh,advance:M?n[1]:n[0],localGlyph:!1},T=g?-v.height*m:Th+i*Nd-n[1]*m,C=v.advance;const o=(M?n[0]:n[1])*m-Nd*i;o>0&&o>x&&(x=o)}else{const e=n[a.fontStack];if(!e)continue;e[f]&&(E=e[f]);const r=t[a.fontStack];if(!r)continue;const o=r.glyphs[f];if(!o)continue;if(v=o.metrics,C=8203!==f?Nd:0,g){const e=void 0!==r.ascender?Math.abs(r.ascender):0,t=void 0!==r.descender?Math.abs(r.descender):0,n=(e+t)*m;w<n&&(w=n,k=(e-t)/2*m),T=-e*m}else T=Th+(i-m)*Nd}M?(e.verticalizable=!0,b.push({glyph:f,imageName:S,x:h,y:p+T,vertical:M,scale:m,localGlyph:v.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:v,rect:E}),h+=C*m+c):(b.push({glyph:f,imageName:S,x:h,y:p+T,vertical:M,scale:m,localGlyph:v.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:v,rect:E}),h+=v.advance*m+c)}0!==b.length&&(f=Math.max(h-c,f),g?Bh(b,m,x,k,o*i/2):Bh(b,m,x,0,o/2)),h=0;const E=o*i+x;s.lineOffset=Math.max(x,a),p+=E,++v}var y;const b=p,{horizontalAlign:x,verticalAlign:w}=Nh(a);(function(e,t,n,r,i,o){const a=(t-n)*i,s=-o*r;for(const l of e)for(const e of l.positionedGlyphs)e.x+=a,e.y+=s})(e.positionedLines,m,x,w,f,b),e.top+=-w*b,e.bottom=e.top+b,e.left+=-x*f,e.right=e.left+f,e.hasBaseline=g}(w,t,n,r,g,a,s,l,d,c,h,f),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(x)&&w}const Ah={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ph={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Dh(e,t,n,r,i,o){if(t.imageName){const e=r[t.imageName];return e?e.displaySize[0]*t.scale*Nd/o+i:0}{const r=n[t.fontStack],o=r&&r.glyphs[e];return o?o.metrics.advance*t.scale+i:0}}function Lh(e,t,n,r){const i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function Rh(e,t,n){let r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function zh(e,t,n,r,i,o){let a=null,s=Lh(t,n,i,o);for(const l of r){const e=Lh(t-l.x,n,i,o)+l.badness;e<=s&&(a=l,s=e)}return{index:e,x:t,priorBreak:a,badness:s}}function jh(e){return e?jh(e.priorBreak).concat(e.index):[]}function Nh(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Bh(e,t,n,r,i){if(!(t||n||r||i))return;const o=e.length-1,a=e[o],s=(a.x+a.metrics.advance*a.scale)*t;for(let l=0;l<=o;l++)e[l].x-=s,e[l].y+=n+r+i}function Fh(e,t,n){const{horizontalAlign:r,verticalAlign:i}=Nh(n),o=t[0]-e.displaySize[0]*r,a=t[1]-e.displaySize[1]*i;return{image:e,top:a,bottom:a+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function Vh(e,t,n,r,i,o){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,d,h,p;"width"===n||"both"===n?(p=i[0]+l-r[3],d=i[0]+c+r[1]):(p=i[0]+(l+c-a.displaySize[0])/2,d=p+a.displaySize[0]);const f=t.top*o,m=t.bottom*o;return"height"===n||"both"===n?(u=i[1]+f-r[0],h=i[1]+m+r[2]):(u=i[1]+(f+m-a.displaySize[1])/2,h=u+a.displaySize[1]),{image:a,top:u,right:d,bottom:h,left:p,collisionPadding:s}}class Uh extends y{constructor(e,t,n,r,i){super(e,t),this.angle=r,this.z=n,void 0!==i&&(this.segment=i)}clone(){return new Uh(this.x,this.y,this.z,this.angle,this.segment)}}function $h(e,t,n,r,i){if(void 0===t.segment)return!0;let o=t,a=t.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let c=0;for(;s<n/2;){const t=e[a],n=e[a+1];if(!n)return!1;let o=e[a-1].angleTo(t)-t.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>r;)c-=l.shift().angleDelta;if(c>i)return!1;a++,s+=t.dist(n)}return!0}function Zh(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function Hh(e,t,n){return e?.6*t*n:0}function Wh(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function qh(e,t,n,r,i,o){const a=Hh(n,i,o),s=Wh(n,r)*o;let l=0;const c=Zh(e)/2;for(let u=0;u<e.length-1;u++){const n=e[u],r=e[u+1],i=n.dist(r);if(l+i>c){const o=(c-l)/i,d=Pn(n.x,r.x,o),h=Pn(n.y,r.y,o),p=new Uh(d,h,0,r.angleTo(n),u);return!a||$h(e,p,s,a,t)?p:void 0}l+=i}}function Gh(e,t,n,r,i,o,a,s,l){const c=Hh(r,o,a),u=Wh(r,i),d=u*a,h=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-d<t/4&&(t=d+t/4),Kh(e,h?t/2*s%t:(u/2+2*o)*a*s%t,t,c,n,d,h,!1,l)}function Kh(e,t,n,r,i,o,a,s,l){const c=o/2,u=Zh(e);let d=0,h=t-n,p=[];for(let f=0;f<e.length-1;f++){const t=e[f],a=e[f+1],s=t.dist(a),m=a.angleTo(t);for(;h+n<d+s;){h+=n;const g=(h-d)/s,v=Pn(t.x,a.x,g),y=Pn(t.y,a.y,g);if(v>=0&&v<l&&y>=0&&y<l&&h-c>=0&&h+c<=u){const t=new Uh(v,y,0,m,f);t._round(),r&&!$h(e,t,o,r,i)||p.push(t)}}d+=s}return s||p.length||a||(p=Kh(e,d/2,n,r,i,o,a,!0,l)),p}function Yh(e,t,n,r,i){const o=[];for(let a=0;a<e.length;a++){const s=e[a];let l;for(let e=0;e<s.length-1;e++){let a=s[e],c=s[e+1];a.x<t&&c.x<t||(a.x<t?a=new y(t,a.y+(t-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x<t&&(c=new y(t,a.y+(t-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y<n&&c.y<n||(a.y<n?a=new y(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round():c.y<n&&(c=new y(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round()),a.x>=r&&c.x>=r||(a.x>=r?a=new y(r,a.y+(r-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x>=r&&(c=new y(r,a.y+(r-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y>=i&&c.y>=i||(a.y>=i?a=new y(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round():c.y>=i&&(c=new y(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round()),l&&a.equals(l[l.length-1])||(l=[a],o.push(l)),l.push(c)))))}}return o}Ki(Uh,"Anchor");const Xh=1e20;function Jh(e,t,n,r,i,o,a,s,l){for(let c=t;c<t+r;c++)Qh(e,n*o+c,o,i,a,s,l);for(let c=n;c<n+i;c++)Qh(e,c*o+t,1,r,a,s,l)}function Qh(e,t,n,r,i,o,a){o[0]=0,a[0]=-Xh,a[1]=Xh,i[0]=e[t];for(let s=1,l=0,c=0;s<r;s++){i[s]=e[t+s*n];const r=s*s;do{const e=o[l];c=(i[s]-i[e]+r-e*e)/(s-e)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=Xh}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],c=s-r;e[t+s*n]=i[r]+c*c}}const ep=2,tp={none:0,ideographs:1,all:2};class np{constructor(e,t,n){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,t){const n=[];for(const r in e)for(const t of e[r])n.push({stack:r,id:t});O(n,(({stack:e,id:t},n)=>{let r=this.entries[e];r||(r=this.entries[e]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let i=r.glyphs[t];if(void 0!==i)return void n(null,{stack:e,id:t,glyph:i});if(i=this._tinySDF(r,e,t),i)return r.glyphs[t]=i,void n(null,{stack:e,id:t,glyph:i});const o=Math.floor(t/256);if(256*o>65535)return void n(new Error("glyphs > 65535 not supported"));if(r.ranges[o])return void n(null,{stack:e,id:t,glyph:i});let a=r.requests[o];a||(a=r.requests[o]=[],np.loadGlyphRange(e,o,this.url,this.requestManager,((e,t)=>{if(t){r.ascender=t.ascender,r.descender=t.descender;for(const e in t.glyphs)this._doesCharSupportLocalGlyph(+e)||(r.glyphs[+e]=t.glyphs[+e]);r.ranges[o]=!0}for(const n of a)n(e,t);delete r.requests[o]}))),a.push(((r,i)=>{r?n(r):i&&n(null,{stack:e,id:t,glyph:i.glyphs[t]||null})}))}),((e,n)=>{if(e)t(e);else if(n){const e={};for(const{stack:t,id:r,glyph:i}of n)void 0===e[t]&&(e[t]={}),void 0===e[t].glyphs&&(e[t].glyphs={}),e[t].glyphs[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},e[t].ascender=this.entries[t].ascender,e[t].descender=this.entries[t].descender;t(null,e)}}))}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==tp.none&&(this.localGlyphMode===tp.all?!!this.localFontFamily:!!this.localFontFamily&&(eo["CJK Unified Ideographs"](e)||eo["Hangul Syllables"](e)||eo.Hiragana(e)||eo.Katakana(e)||eo["CJK Symbols and Punctuation"](e)))}_tinySDF(e,t,n){const r=this.localFontFamily;if(!r||!this._doesCharSupportLocalGlyph(n))return;let i=e.tinySDF;if(!i){let n="400";/bold/i.test(t)?n="900":/medium/i.test(t)?n="500":/light/i.test(t)&&(n="200"),i=e.tinySDF=new np.TinySDF({fontFamily:r,fontWeight:n,fontSize:24*ep,buffer:3*ep,radius:8*ep}),i.fontWeight=n}if(this.localGlyphs[i.fontWeight][n])return this.localGlyphs[i.fontWeight][n];const o=String.fromCharCode(n),{data:a,width:s,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:d,glyphTop:h,glyphAdvance:p}=i.draw(o);return this.localGlyphs[i.fontWeight][n]={id:n,bitmap:new Nc({width:s,height:l},a),metrics:{width:c/ep,height:u/ep,left:d/ep,top:h/ep-27,advance:p/ep,localGlyph:!0}}}}np.loadGlyphRange=function(e,t,n,r,i){const o=256*t,a=o+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",`${o}-${a}`),le.Glyphs);he(s,((e,t)=>{if(e)i(e);else if(t){const e={},n=function(e){return new gh(e).readFields(yh,{})}(t);for(const t of n.glyphs)e[t.id]=t;i(null,{glyphs:e,ascender:n.ascender,descender:n.descender})}}))},np.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=t,this.cutoff=r,this.radius=n;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${a} ${o} ${e}px ${i}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(n),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-i))),l=Math.min(this.size-this.buffer,a+Math.ceil(r)),c=s+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),h=new Uint8ClampedArray(d),p={data:h,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:v}=this;f.clearRect(m,m,s,l),f.fillText(e,m,m+a);const y=f.getImageData(m,m,s,l);v.fill(Xh,0,d),g.fill(0,0,d);for(let b=0;b<l;b++)for(let e=0;e<s;e++){const t=y.data[4*(b*s+e)+3]/255;if(0===t)continue;const n=(b+m)*c+e+m;if(1===t)v[n]=0,g[n]=Xh;else{const e=.5-t;v[n]=e>0?e*e:0,g[n]=e<0?e*e:0}}Jh(v,0,0,c,u,c,this.f,this.v,this.z),Jh(g,m,m,s,l,c,this.f,this.v,this.z);for(let b=0;b<d;b++){const e=Math.sqrt(v[b])-Math.sqrt(g[b]);h[b]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}};const rp=kh;function ip(e,t,n,r){const i=[],o=e.image,a=o.pixelRatio,s=o.paddedRect.w-2*rp,l=o.paddedRect.h-2*rp,c=e.right-e.left,u=e.bottom-e.top,d=o.stretchX||[[0,s]],h=o.stretchY||[[0,l]],p=(e,t)=>e+t[1]-t[0],f=d.reduce(p,0),m=h.reduce(p,0),g=s-f,v=l-m;let b=0,x=f,w=0,_=m,k=0,E=g,S=0,C=v;if(o.content&&r){const e=o.content;b=op(d,0,e[0]),w=op(h,0,e[1]),x=op(d,e[0],e[2]),_=op(h,e[1],e[3]),k=e[0]-b,S=e[1]-w,E=e[2]-e[0]-x,C=e[3]-e[1]-_}const T=(r,i,s,l)=>{const d=sp(r.stretch-b,x,c,e.left),h=lp(r.fixed-k,E,r.stretch,f),p=sp(i.stretch-w,_,u,e.top),g=lp(i.fixed-S,C,i.stretch,m),v=sp(s.stretch-b,x,c,e.left),T=lp(s.fixed-k,E,s.stretch,f),M=sp(l.stretch-w,_,u,e.top),I=lp(l.fixed-S,C,l.stretch,m),O=new y(d,p),A=new y(v,p),P=new y(v,M),D=new y(d,M),L=new y(h/a,g/a),R=new y(T/a,I/a),z=t*Math.PI/180;if(z){const e=Math.sin(z),t=Math.cos(z),n=[t,-e,e,t];O._matMult(n),A._matMult(n),D._matMult(n),P._matMult(n)}const j=r.stretch+r.fixed,N=i.stretch+i.fixed;return{tl:O,tr:A,bl:D,br:P,tex:{x:o.paddedRect.x+rp+j,y:o.paddedRect.y+rp+N,w:s.stretch+s.fixed-j,h:l.stretch+l.fixed-N},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:L,pixelOffsetBR:R,minFontScaleX:E/a/c,minFontScaleY:C/a/u,isSDF:n}};if(r&&(o.stretchX||o.stretchY)){const e=ap(d,g,f),t=ap(h,v,m);for(let n=0;n<e.length-1;n++){const r=e[n],o=e[n+1];for(let e=0;e<t.length-1;e++)i.push(T(r,t[e],o,t[e+1]))}}else i.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function op(e,t,n){let r=0;for(const i of e)r+=Math.max(t,Math.min(n,i[1]))-Math.max(t,Math.min(n,i[0]));return r}function ap(e,t,n){const r=[{fixed:-rp,stretch:0}];for(const[i,o]of e){const e=r[r.length-1];r.push({fixed:i-e.stretch,stretch:e.stretch}),r.push({fixed:i-e.stretch,stretch:e.stretch+(o-i)})}return r.push({fixed:t+rp,stretch:n}),r}function sp(e,t,n,r){return e/t*n+r}function lp(e,t,n,r){return e-t*n/r}function cp(e,t,n,r){const i=t+e.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(t+e.positionedLines[r-1].lineOffset))/2}class up{constructor(e=[],t=dp){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,r=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}_down(e){const{data:t,compare:n}=this,r=this.length>>1,i=t[e];for(;e<r;){let r=1+(e<<1),o=t[r];const a=r+1;if(a<this.length&&n(t[a],o)<0&&(r=a,o=t[a]),n(o,i)>=0)break;t[e]=o,e=r}t[e]=i}}function dp(e,t){return e<t?-1:e>t?1:0}function hp(e,t=1,n=!1){let r=1/0,i=1/0,o=-1/0,a=-1/0;const s=e[0];for(let p=0;p<s.length;p++){const e=s[p];(!p||e.x<r)&&(r=e.x),(!p||e.y<i)&&(i=e.y),(!p||e.x>o)&&(o=e.x),(!p||e.y>a)&&(a=e.y)}const l=Math.min(o-r,a-i);let c=l/2;const u=new up([],pp);if(0===l)return new y(r,i);for(let p=r;p<o;p+=l)for(let t=i;t<a;t+=l)u.push(new fp(p+c,t+c,c,e));let d=function(e){let t=0,n=0,r=0;const i=e[0];for(let o=0,a=i.length,s=a-1;o<a;s=o++){const e=i[o],a=i[s],l=e.x*a.y-a.x*e.y;n+=(e.x+a.x)*l,r+=(e.y+a.y)*l,t+=3*l}return new fp(n/t,r/t,0,e)}(e),h=u.length;for(;u.length;){const r=u.pop();(r.d>d.d||!d.d)&&(d=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,h)),r.max-d.d<=t||(c=r.h/2,u.push(new fp(r.p.x-c,r.p.y-c,c,e)),u.push(new fp(r.p.x+c,r.p.y-c,c,e)),u.push(new fp(r.p.x-c,r.p.y+c,c,e)),u.push(new fp(r.p.x+c,r.p.y+c,c,e)),h+=4)}return n&&(console.log(`num probes: ${h}`),console.log(`best distance: ${d.d}`)),d.p}function pp(e,t){return t.max-e.max}class fp{constructor(e,t,n,r){this.p=new y(e,t),this.h=n,this.d=function(e,t){let n=!1,r=1/0;for(let i=0;i<t.length;i++){const o=t[i];for(let t=0,i=o.length,a=i-1;t<i;a=t++){const i=o[t],s=o[a];i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,yc(e,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}}const mp=7,gp=Number.POSITIVE_INFINITY,vp=Math.sqrt(2);function yp(e,[t,n]){let r=0,i=0;if(n===gp){t<0&&(t=0);const n=t/vp;switch(e){case"top-right":case"top-left":i=n-mp;break;case"bottom-right":case"bottom-left":i=-n+mp;break;case"bottom":i=-t+mp;break;case"top":i=t-mp}switch(e){case"top-right":case"bottom-right":r=-n;break;case"top-left":case"bottom-left":r=n;break;case"left":r=t;break;case"right":r=-t}}else{switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-mp;break;case"bottom-right":case"bottom-left":case"bottom":i=-n+mp}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}}return[r,i]}function bp(e,t,n,r,i,o,a,s,l,c){e.createArrays(),e.tilePixelRatio=ss/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const u=e.layers[0].layout,d=e.layers[0]._unevaluatedLayout._values,h={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:n}=e.textSizeData;h.compositeTextSizes=[d["text-size"].possiblyEvaluate(new _o(t),s),d["text-size"].possiblyEvaluate(new _o(n),s)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:n}=e.iconSizeData;h.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new _o(t),s),d["icon-size"].possiblyEvaluate(new _o(n),s)]}h.layoutTextSize=d["text-size"].possiblyEvaluate(new _o(l+1),s),h.layoutIconSize=d["icon-size"].possiblyEvaluate(new _o(l+1),s),h.textMaxSize=d["text-size"].possiblyEvaluate(new _o(18),s);const p="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),f=u.get("text-size");for(const m of e.features){const o=u.get("text-font").evaluate(m,{},s).join(","),l=f.evaluate(m,{},s),d=h.layoutTextSize.evaluate(m,{},s),g=(h.layoutIconSize.evaluate(m,{},s),{horizontal:{},vertical:void 0}),v=m.text;let y,b=[0,0];if(v){const r=v.toString(),a=u.get("text-letter-spacing").evaluate(m,{},s)*Nd,c=u.get("text-line-height").evaluate(m,{},s)*Nd,h=no(r)?a:0,f=u.get("text-anchor").evaluate(m,{},s),y=u.get("text-variable-anchor");if(!y){const e=u.get("text-radial-offset").evaluate(m,{},s);b=e?yp(f,[e*Nd,gp]):u.get("text-offset").evaluate(m,{},s).map((e=>e*Nd))}let x=p?"center":u.get("text-justify").evaluate(m,{},s);const w="point"===u.get("symbol-placement"),_=w?u.get("text-max-width").evaluate(m,{},s)*Nd:1/0,k=a=>{e.allowVerticalPlacement&&to(r)&&(g.vertical=Oh(v,t,n,i,o,_,c,f,a,h,b,Ch.vertical,!0,d,l))};if(!p&&y){const e="auto"===x?y.map((e=>xp(e))):[x];let r=!1;for(let a=0;a<e.length;a++){const s=e[a];if(!g.horizontal[s])if(r)g.horizontal[s]=g.horizontal[0];else{const e=Oh(v,t,n,i,o,_,c,"center",s,h,b,Ch.horizontal,!1,d,l);e&&(g.horizontal[s]=e,r=1===e.positionedLines.length)}}k("left")}else{if("auto"===x&&(x=xp(f)),w||u.get("text-writing-mode").indexOf("horizontal")>=0||!to(r)){const e=Oh(v,t,n,i,o,_,c,f,x,h,b,Ch.horizontal,!1,d,l);e&&(g.horizontal[x]=e)}k(w?"left":x)}}let x=!1;if(m.icon&&m.icon.name){const t=r[m.icon.name];t&&(y=Fh(i[m.icon.name],u.get("icon-offset").evaluate(m,{},s),u.get("icon-anchor").evaluate(m,{},s)),x=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&Z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const w=Sp(g.horizontal)||g.vertical;e.iconsInText||(e.iconsInText=!!w&&w.iconsInText),(w||y)&&wp(e,m,g,y,r,h,d,0,b,x,a,s,c)}o&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function xp(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wp(e,t,n,r,i,o,a,s,l,c,u,d,h){let p=o.textMaxSize.evaluate(t,{},d);void 0===p&&(p=a);const f=e.layers[0].layout,m=f.get("icon-offset").evaluate(t,{},d),g=Sp(n.horizontal)||n.vertical,v="globe"===h.name,y=Nd,b=a/y,x=e.tilePixelRatio*p/y,_=(O=e.overscaling,e.zoom>18&&O>2&&(O>>=1),Math.max(ss/(512*O),1)*f.get("symbol-spacing")),k=f.get("text-padding")*e.tilePixelRatio,E=f.get("icon-padding")*e.tilePixelRatio,S=w(f.get("text-max-angle")),C="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),T="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),M=f.get("symbol-placement"),I=_/2;var O;const A=f.get("icon-text-fit");let P;r&&"none"!==A&&(e.allowVerticalPlacement&&n.vertical&&(P=Vh(r,n.vertical,A,f.get("icon-text-fit-padding"),m,b)),g&&(r=Vh(r,g,A,f.get("icon-text-fit-padding"),m,b)));const D=(a,s,p)=>{if(s.x<0||s.x>=ss||s.y<0||s.y>=ss)return;let f=null;if(v){const{x:e,y:t,z:n}=h.projectTilePoint(s.x,s.y,p);f={anchor:new Uh(e,t,n,0,void 0),up:h.upVector(p,s.x,s.y)}}!function(e,t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,x,w,_,k,E){const S=e.addToLineVertexArray(t,r);let C,T,M,I,O,A,P,D=0,L=0,R=0,z=0,j=-1,N=-1;const B={};let F=Aa("");const V=n?n.anchor:t;let U=0,$=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[U,$]=l.layout.get("text-offset").evaluate(x,{},E).map((e=>e*Nd)):(U=l.layout.get("text-radial-offset").evaluate(x,{},E)*Nd,$=gp),e.allowVerticalPlacement&&i.vertical){const e=i.vertical;if(f)A=Tp(e),s&&(P=Tp(s));else{const n=l.layout.get("text-rotate").evaluate(x,{},E)+90;M=Cp(c,V,t,u,d,h,e,p,n,m),s&&(I=Cp(c,V,t,u,d,h,s,v,n))}}if(o){const r=l.layout.get("icon-rotate").evaluate(x,{},E),i="none"!==l.layout.get("icon-text-fit"),a=ip(o,r,_,i),p=s?ip(s,r,_,i):void 0;T=Cp(c,V,t,u,d,h,o,v,r),D=4*a.length;const f=e.iconSizeData;let m=null;"source"===f.kind?(m=[Bd*l.layout.get("icon-size").evaluate(x,{},E)],m[0]>kp&&Z(`${e.layerIds[0]}: Value for "icon-size" is >= ${_p}. Reduce your "icon-size".`)):"composite"===f.kind&&(m=[Bd*w.compositeIconSizes[0].evaluate(x,{},E),Bd*w.compositeIconSizes[1].evaluate(x,{},E)],(m[0]>kp||m[1]>kp)&&Z(`${e.layerIds[0]}: Value for "icon-size" is >= ${_p}. Reduce your "icon-size".`)),e.addSymbols(e.icon,a,m,b,y,x,!1,n,t,S.lineStartIndex,S.lineLength,-1,k,E),j=e.icon.placedSymbolArray.length-1,p&&(L=4*p.length,e.addSymbols(e.icon,p,m,b,y,x,Ch.vertical,n,t,S.lineStartIndex,S.lineLength,-1,k,E),N=e.icon.placedSymbolArray.length-1)}for(const Z in i.horizontal){const r=i.horizontal[Z];C||(F=Aa(r.text),f?O=Tp(r):C=Cp(c,V,t,u,d,h,r,p,l.layout.get("text-rotate").evaluate(x,{},E),m));const o=1===r.positionedLines.length;if(R+=Ep(e,n,t,r,a,l,f,x,m,S,i.vertical?Ch.horizontal:Ch.horizontalOnly,o?Object.keys(i.horizontal):[Z],B,j,w,k,E),o)break}i.vertical&&(z+=Ep(e,n,t,i.vertical,a,l,f,x,m,S,Ch.vertical,["vertical"],B,N,w,k,E));let H=-1;const W=(e,t)=>e?Math.max(e,t):t;H=W(O,H),H=W(A,H),H=W(P,H);const q=H>-1?1:0;e.glyphOffsetArray.length>=sf.MAX_GLYPHS&&Z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,x.sortKey),e.symbolInstances.emplaceBack(V.x,V.y,V.z,t.x,t.y,B.right>=0?B.right:-1,B.center>=0?B.center:-1,B.left>=0?B.left:-1,B.vertical>=0?B.vertical:-1,j,N,F,void 0!==C?C:e.collisionBoxArray.length,void 0!==C?C+1:e.collisionBoxArray.length,void 0!==M?M:e.collisionBoxArray.length,void 0!==M?M+1:e.collisionBoxArray.length,void 0!==T?T:e.collisionBoxArray.length,void 0!==T?T+1:e.collisionBoxArray.length,I||e.collisionBoxArray.length,I?I+1:e.collisionBoxArray.length,u,R,z,D,L,q,0,U,$,H)}(e,s,f,a,n,r,i,P,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,k,C,l,0,E,T,m,t,o,c,u,d)};if("line"===M)for(const w of Yh(t.geometry,0,0,ss,ss)){const t=Gh(w,_,S,n.vertical||g,r,y,x,e.overscaling,ss);for(const n of t)g&&Mp(e,g.text,I,n)||D(w,n,d)}else if("line-center"===M){for(const w of t.geometry)if(w.length>1){const e=qh(w,S,n.vertical||g,r,y,x);e&&D(w,e,d)}}else if("Polygon"===t.type)for(const w of ku(t.geometry,0)){const e=hp(w,16);D(w[0],new Uh(e.x,e.y,0,0,void 0),d)}else if("LineString"===t.type)for(const w of t.geometry)D(w,new Uh(w[0].x,w[0].y,0,0,void 0),d);else if("Point"===t.type)for(const w of t.geometry)for(const e of w)D([e],new Uh(e.x,e.y,0,0,void 0),d)}const _p=255,kp=_p*Bd;function Ep(e,t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g){const v=function(e,t,n,r,i,o,a,s){const l=[];if(0===t.positionedLines.length)return l;const c=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=function(e){const t=e[0],n=e[1],r=t*n;return r>0?[t,-n]:r<0?[-t,n]:0===t?[n,t]:[n,-t]}(n);let d=Math.abs(t.top-t.bottom);for(const m of t.positionedLines)d-=m.lineOffset;const h=t.positionedLines.length,p=d/h;let f=t.top-n[1];for(let m=0;m<h;++m){const e=t.positionedLines[m];f=cp(t,p,f,m);for(const r of e.positionedGlyphs){if(!r.rect)continue;const e=r.rect||{};let o=wh+1,d=!0,h=1,p=0;if(r.imageName){const e=a[r.imageName];if(!e)continue;if(e.sdf){Z("SDF images are not supported in formatted text and will be ignored.");continue}d=!1,h=e.pixelRatio,o=kh/h}const m=(i||s)&&r.vertical,g=r.metrics.advance*r.scale/2,v=r.metrics,b=r.rect;if(null===b)continue;s&&t.verticalizable&&(p=r.imageName?g-r.metrics.width*r.scale/2:0);const x=i?[r.x+g,r.y]:[0,0];let w=[0,0],_=[0,0],k=!1;i||(m?(_=[r.x+g+u[0],r.y+u[1]-p],k=!0):w=[r.x+g+n[0],r.y+n[1]-p]);const E=b.w*r.scale/(h*(r.localGlyph?ep:1)),S=b.h*r.scale/(h*(r.localGlyph?ep:1));let C,T,M,I;if(m){const e=r.y-f,t=new y(-g,g-e),n=-Math.PI/2,i=new y(..._);C=new y(-g+w[0],w[1]),C._rotateAround(n,t)._add(i),C.x+=-e+g,C.y-=(v.left-o)*r.scale;const a=r.imageName?v.advance*r.scale:Nd*r.scale,s=String.fromCharCode(r.glyph);Wd(s)?C.x+=(1-o)*r.scale:qd(s)?C.x+=a-v.height*r.scale+(-o-1)*r.scale:C.x+=r.imageName||v.width+2*o===b.w&&v.height+2*o===b.h?(a-S)/2:(a-(v.height+2*o)*r.scale)/2,T=new y(C.x,C.y-E),M=new y(C.x+S,C.y),I=new y(C.x+S,C.y-E)}else{const e=(v.left-o)*r.scale-g+w[0],t=(-v.top-o)*r.scale+w[1],n=e+E,i=t+S;C=new y(e,t),T=new y(n,t),M=new y(e,i),I=new y(n,i)}if(c){let e;e=i?new y(0,0):k?new y(u[0],u[1]):new y(n[0],n[1]),C._rotateAround(c,e),T._rotateAround(c,e),M._rotateAround(c,e),I._rotateAround(c,e)}const O=new y(0,0),A=new y(0,0);l.push({tl:C,tr:T,bl:M,br:I,tex:e,writingMode:t.writingMode,glyphOffset:x,sectionIndex:r.sectionIndex,isSDF:d,pixelOffsetTL:O,pixelOffsetBR:A,minFontScaleX:0,minFontScaleY:0})}}return l}(0,r,l,o,a,s,i,e.allowVerticalPlacement),b=e.textSizeData;let x=null;"source"===b.kind?(x=[Bd*o.layout.get("text-size").evaluate(s,{},g)],x[0]>kp&&Z(`${e.layerIds[0]}: Value for "text-size" is >= ${_p}. Reduce your "text-size".`)):"composite"===b.kind&&(x=[Bd*f.compositeTextSizes[0].evaluate(s,{},g),Bd*f.compositeTextSizes[1].evaluate(s,{},g)],(x[0]>kp||x[1]>kp)&&Z(`${e.layerIds[0]}: Value for "text-size" is >= ${_p}. Reduce your "text-size".`)),e.addSymbols(e.text,v,x,l,a,s,u,t,n,c.lineStartIndex,c.lineLength,p,m,g);for(const y of d)h[y]=e.text.placedSymbolArray.length-1;return 4*v.length}function Sp(e){for(const t in e)return e[t];return null}function Cp(e,t,n,r,i,o,a,s,l,c){let u=a.top,d=a.bottom,h=a.left,p=a.right;const f=a.collisionPadding;if(f&&(h-=f[0],u-=f[1],p+=f[2],d+=f[3]),l){const e=new y(h,u),t=new y(p,u),n=new y(h,d),r=new y(p,d),i=w(l);let o=new y(0,0);c&&(o=new y(c[0],c[1])),e._rotateAround(i,o),t._rotateAround(i,o),n._rotateAround(i,o),r._rotateAround(i,o),h=Math.min(e.x,t.x,n.x,r.x),p=Math.max(e.x,t.x,n.x,r.x),u=Math.min(e.y,t.y,n.y,r.y),d=Math.max(e.y,t.y,n.y,r.y)}return e.emplaceBack(t.x,t.y,t.z,n.x,n.y,h,u,p,d,s,r,i,o),e.length-1}function Tp(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Mp(e,t,n,r){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(r.dist(e[t])<n)return!0}else i[t]=[];return i[t].push(r),!1}function Ip(e,t){const n=e.fovAboveCenter,r=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,i=(e._camera.position[2]*e.worldSize-r)/Math.cos(e._pitch),o=Math.sin(n)*i/Math.sin(Math.max(Math.PI/2-e._pitch-n,.01)),a=Math.sin(e._pitch)*o+i;return Math.min(1.01*a,i*(1/e._horizonShift))}function Op(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};const n=Math.pow(2,-e.z),r=e.x*n,i=(e.x+1)*n,o=e.y*n,a=(e.y+1)*n,s=ql(r),l=ql(i),c=Gl(o),u=Gl(a),d=t.project(s,c),h=t.project(l,c),p=t.project(l,u),f=t.project(s,u);let m=Math.min(d.x,h.x,p.x,f.x),g=Math.min(d.y,h.y,p.y,f.y),v=Math.max(d.x,h.x,p.x,f.x),y=Math.max(d.y,h.y,p.y,f.y);const b=n/16;function x(e,n,r,i,o,a){const s=(r+o)/2,l=(i+a)/2,c=t.project(ql(s),Gl(l)),u=Math.max(0,m-c.x,g-c.y,c.x-v,c.y-y);m=Math.min(m,c.x),v=Math.max(v,c.x),g=Math.min(g,c.y),y=Math.max(y,c.y),u>b&&(x(e,c,r,i,s,l),x(c,n,s,l,o,a))}x(d,h,r,o,i,o),x(h,p,i,o,i,a),x(p,f,i,a,r,a),x(f,d,r,a,r,o),m-=b,g-=b,v+=b,y+=b;const w=1/Math.max(v-m,y-g);return{scale:w,x:m*w,y:g*w,x2:v*w,y2:y*w,projection:t}}const Ap=ps(new Float32Array(16));class Pp{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,t){return{x:0,y:0,z:0}}unproject(e,t){return new Ul(0,0)}projectTilePoint(e,t,n){return{x:e,y:t,z:0}}locationPoint(e,t,n=!0){return e._coordinatePoint(e.locationCoordinate(t),n)}pixelsPerMeter(e,t){return Wl(1,e)*t}pixelSpaceConversion(e,t,n){return 1}farthestPixelDistance(e){return Ip(e,e.pixelsPerMeter)}pointCoordinate(e,t,n,r){const i=e.horizonLineFromTop(!1),o=new y(t,Math.max(i,n));return e.rayIntersectionCoordinate(e.pointRayIntersection(o,r))}pointCoordinate3D(e,t,n){const r=new y(t,n);if(e.elevation)return e.elevation.pointCoordinate(r);{const t=this.pointCoordinate(e,r.x,r.y,0);return[t.x,t.y,t.z]}}isPointAboveHorizon(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);const n=e.horizonLineFromTop();return t.y<n}createInversionMatrix(e,t){return Ap}createTileMatrix(e,t,n){let r,i,o;const a=n.canonical,s=ps(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Op(a,this);r=1,i=l.x+n.wrap*l.scale,o=l.y,vs(s,s,[r/l.scale,r/l.scale,e.pixelsPerMeter/t])}else r=t/e.zoomScale(a.z),i=(a.x+Math.pow(2,a.z)*n.wrap)*r,o=a.y*r;return gs(s,s,[i,o,0]),vs(s,s,[r/ss,r/ss,1]),s}upVector(e,t,n){return[0,0,1]}upVectorScale(e,t,n){return{metersToTile:1}}}class Dp extends Pp{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[t,n]=this.parallels=e.parallels||[29.5,45.5],r=Math.sin(w(t));this.n=(r+Math.sin(w(n)))/2,this.c=1+r*(2*this.n-r),this.r0=Math.sqrt(this.c)/this.n}project(e,t){const{n:n,c:r,r0:i}=this,o=w(e-this.center[0]),a=w(t),s=Math.sqrt(r-2*n*Math.sin(a))/n;return{x:s*Math.sin(o*n),y:s*Math.cos(o*n)-i,z:0}}unproject(e,t){const{n:n,c:r,r0:i}=this,o=i+t;let a=Math.atan2(e,Math.abs(o))*Math.sign(o);o*n<0&&(a-=Math.PI*Math.sign(e)*Math.sign(o));const s=w(this.center[0])*n;a=I(a,-Math.PI-s,Math.PI-s);const l=T(_(a/n)+this.center[0],-180,180),c=Math.asin(T((r-(e*e+o*o)*n*n)/(2*n),-1,1)),u=T(_(c),-Yl,Yl);return new Ul(l,u)}}const Lp=1.340264,Rp=-.081106,zp=893e-6,jp=.003796,Np=Math.sqrt(3)/2;class Bp extends Pp{project(e,t){t=t/180*Math.PI,e=e/180*Math.PI;const n=Math.asin(Np*Math.sin(t)),r=n*n,i=r*r*r;return{x:.5*(e*Math.cos(n)/(Np*(Lp+3*Rp*r+i*(7*zp+9*jp*r)))/Math.PI+.5),y:1-.5*(n*(Lp+Rp*r+i*(zp+jp*r))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,r=n*n,i=r*r*r;for(let c,u,d,h=0;h<12&&(u=n*(Lp+Rp*r+i*(zp+jp*r))-t,d=Lp+3*Rp*r+i*(7*zp+9*jp*r),c=u/d,n=T(n-c,-Math.PI/3,Math.PI/3),r=n*n,i=r*r*r,!(Math.abs(c)<1e-12));++h);const o=Np*e*(Lp+3*Rp*r+i*(7*zp+9*jp*r))/Math.cos(n),a=Math.asin(Math.sin(n)/Np),s=T(180*o/Math.PI,-180,180),l=T(180*a/Math.PI,-Yl,Yl);return new Ul(s,l)}}class Fp extends Pp{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}unproject(e,t){const n=360*(e-.5),r=T(360*(.5-t),-Yl,Yl);return new Ul(n,r)}}const Vp=Math.PI/2;function Up(e){return Math.tan((Vp+e)/2)}class $p extends Pp{constructor(e){super(e),this.center=e.center||[0,30];const[t,n]=this.parallels=e.parallels||[30,30];let r=w(t),i=w(n);this.southernCenter=r+i<0,this.southernCenter&&(r=-r,i=-i);const o=Math.cos(r),a=Up(r);this.n=r===i?Math.sin(r):Math.log(o/Math.cos(i))/Math.log(Up(i)/a),this.f=o*Math.pow(Up(r),this.n)/this.n}project(e,t){t=w(t),this.southernCenter&&(t=-t),e=w(e-this.center[0]);const n=1e-6,{n:r,f:i}=this;i>0?t<-Vp+n&&(t=-Vp+n):t>Vp-n&&(t=Vp-n);const o=i/Math.pow(Up(t),r);let a=o*Math.sin(r*e),s=i-o*Math.cos(r*e);return a=.5*(a/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:a,y:this.southernCenter?s:1-s,z:0}}unproject(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;const{n:n,f:r}=this,i=r-t,o=Math.sign(i),a=Math.sign(n)*Math.sqrt(e*e+i*i);let s=Math.atan2(e,Math.abs(i))*o;i*n<0&&(s-=Math.PI*Math.sign(e)*o);const l=T(_(s/n)+this.center[0],-180,180),c=T(_(2*Math.atan(Math.pow(r/a,1/n))-Vp),-Yl,Yl);return new Ul(l,this.southernCenter?-c:c)}}class Zp extends Pp{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,t){return{x:Zl(e),y:Hl(t),z:0}}unproject(e,t){const n=ql(e),r=Gl(t);return new Ul(n,r)}}const Hp=w(Yl);class Wp extends Pp{project(e,t){const n=(t=w(t))*t,r=n*n;return{x:.5*((e=w(e))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,r=25,i=0,o=n*n;do{o=n*n;const e=o*o;i=(n*(1.007226+o*(.015085+e*(.028874*o-.044475-.005916*e)))-t)/(1.007226+o*(.045255+e*(.259866*o-.311325-.005916*11*e))),n=T(n-i,-Hp,Hp)}while(Math.abs(i)>1e-6&&--r>0);o=n*n;const a=T(_(e/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),s=_(n);return new Ul(a,s)}}const qp=w(Yl);class Gp extends Pp{project(e,t){t=w(t),e=w(e);const n=Math.cos(t),r=2/Math.PI,i=Math.acos(n*Math.cos(e/2)),o=Math.sin(i)/i,a=.5*(e*r+2*n*Math.sin(e/2)/o)||0,s=.5*(t+Math.sin(t)/o)||0;return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}unproject(e,t){let n=e=(2*e-.5)*Math.PI,r=t=(2*(1-t)-1)*Math.PI,i=25;const o=1e-6;let a=0,s=0;do{const i=Math.cos(r),o=Math.sin(r),l=2*o*i,c=o*o,u=i*i,d=Math.cos(n/2),h=Math.sin(n/2),p=2*d*h,f=h*h,m=1-u*d*d,g=m?1/m:0,v=m?Math.acos(i*d)*Math.sqrt(1/m):0,y=.5*(2*v*i*h+2*n/Math.PI)-e,b=.5*(v*o+r)-t,x=.5*g*(u*f+v*i*d*c)+1/Math.PI,w=g*(p*l/4-v*o*h),_=.125*g*(l*h-v*o*u*p),k=.5*g*(c*d+v*f*i)+.5,E=w*_-k*x;a=(b*w-y*k)/E,s=(y*_-b*x)/E,n=T(n-a,-Math.PI,Math.PI),r=T(r-s,-qp,qp)}while((Math.abs(a)>o||Math.abs(s)>o)&&--i>0);return new Ul(_(n),_(r))}}class Kp extends Pp{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(w(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){const{scale:n,cosPhi:r}=this;return{x:w(e)*r*n+.5,y:-Math.sin(w(t))/r*n+.5,z:0}}unproject(e,t){const{scale:n,cosPhi:r}=this,i=-(t-.5)/n,o=T(_((e-.5)/n)/r,-180,180),a=Math.asin(T(i*r,-1,1)),s=T(_(a),-Yl,Yl);return new Ul(o,s)}}class Yp extends Zp{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,t,n){const r=Tl(e,t,n);return js(r,r,Ol(yl(n))),{x:r[0],y:r[1],z:r[2]}}locationPoint(e,t){const n=Cl(t.lat,t.lng),r=Ls([],n),i=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;Ds(n,n,r,Wl(1,0)*ss*i);const o=ps(new Float64Array(16));return ms(o,e.pixelMatrix,e.globeMatrix),js(n,n,o),new y(n[0],n[1])}pixelsPerMeter(e,t){return Wl(1,0)*t}pixelSpaceConversion(e,t,n){const r=Wl(1,e)*t,i=Pn(Wl(1,45)*t,r,n);return this.pixelsPerMeter(e,t)/i}createTileMatrix(e,t,n){const r=Al(yl(n.canonical));return ms(new Float64Array(16),e.globeMatrix,r)}createInversionMatrix(e,t){const{center:n}=e,r=Ol(yl(t));return bs(r,r,w(n.lng)),ys(r,r,w(n.lat)),vs(r,r,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(r)}pointCoordinate(e,t,n,r){return ml(e,t,n,!0)||new Jl(0,0)}pointCoordinate3D(e,t,n){const r=this.pointCoordinate(e,t,n,0);return[r.x,r.y,r.z]}isPointAboveHorizon(e,t){return!ml(e,t.x,t.y,!1)}farthestPixelDistance(e){const t=function(e,t){const n=e.cameraToCenterDistance,r=e._centerAltitude*t,i=e._camera,o=e._camera.forward(),a=Ts([],Ps([],o,-n),[0,0,r]),s=e.worldSize/(2*Math.PI),l=[0,0,-s],c=e.width/e.height,u=Math.tan(e.fovAboveCenter),d=Ps([],i.up(),u),h=Ps([],i.right(),u*c),p=Ls([],Ts([],Ts([],o,d),h)),f=[];let m;if(new tl(a,p).closestPointOnSphere(l,s,f)){const t=Ts([],f,l),n=Fs([],t,a);m=Math.cos(e.fovAboveCenter)*Ss(n)}else{const e=Fs([],a,l),t=Fs([],l,a);Ls(t,t);const n=Ss(e)-s;m=Math.sqrt(n*(n+2*s));const r=Math.acos(m/(s+n))-Math.acos(Rs(o,t));m*=Math.cos(r)}return 1.01*m}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),n=Dl(e.zoom);if(n>0){const r=Ip(e,Wl(1,e.center.lat)*e.worldSize),i=e.worldSize/(2*Math.PI),o=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Pn(t,r+i*(1-Math.cos(o)),Math.pow(n,10))}return t}upVector(e,t,n){return Tl(t,n,e,1)}upVectorScale(e){return{metersToTile:fl(Ml(yl(e)))}}}function Xp(e){const t=e.parallels,n=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new Zp(e);case"equirectangular":return new Fp(e);case"naturalEarth":return new Wp(e);case"equalEarth":return new Bp(e);case"winkelTripel":return new Gp(e);case"albers":return n?new Kp(e):new Dp(e);case"lambertConformalConic":return n?new Kp(e):new $p(e);case"globe":return new Yp(e)}throw new Error(`Invalid projection name: ${e.name}`)}const Jp=qu.types,Qp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ef(e,t,n,r,i,o,a,s,l,c,u,d,h){const p=s?Math.min(kp,Math.round(s[0])):0,f=s?Math.min(kp,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),o,a,(p<<1)+(l?1:0),f,16*c,16*u,256*d,256*h)}function tf(e,t,n,r,i,o,a){e.emplaceBack(t,n,r,i,o,a)}function nf(e,t,n,r,i){e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i)}function rf(e){for(const t of e.sections)if(lo(t.text))return!0;return!1}class of{constructor(e){this.layoutVertexArray=new Ko,this.indexArray=new ra,this.programConfigurations=e,this.segments=new as,this.dynamicLayoutVertexArray=new Ho,this.opacityVertexArray=new Xo,this.placedSymbolArray=new ma,this.globeExtVertexArray=new Yo}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ad.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Dd.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Qp,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Pd.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Ki(of,"SymbolBuffers");class af{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new as,this.collisionVertexArray=new ta,this.collisionVertexArrayExt=new na}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Ld.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Rd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Ki(af,"CollisionBuffers");class sf{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ps([]),this.placementViewportMatrix=ps([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Fd(this.zoom,t["text-size"]),this.iconSizeData=Fd(this.zoom,t["icon-size"]);const n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((e=>Ch[e])),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new of(new Ya(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new of(new Ya(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new ya,this.lineVertexArray=new ba,this.symbolInstances=new va}calculateGlyphDependencies(e,t,n,r,i){for(let o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,r&&i){const n=Hd[e.charAt(o)];n&&(t[n.charCodeAt(0)]=!0)}}populate(e,t,n,r){const i=this.layers[0],o=i.layout,a="globe"===this.projection.name,s=o.get("text-font"),l=o.get("text-field"),c=o.get("icon-image"),u=("constant"!==l.value.kind||l.value.value instanceof Lt&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),d="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!u&&!d)return;const p=t.iconDependencies,f=t.glyphDependencies,m=t.availableImages,g=new _o(this.zoom);for(const{feature:v,id:y,index:b,sourceLayerIndex:x}of e){const e=i._featureFilter.needGeometry,t=sc(v,e);if(!i._featureFilter.filter(g,t,n))continue;if(e||(t.geometry=ac(v,n,r)),a&&1!==v.type&&n.z<=5){const e=t.geometry,r=.98078528056,i=(e,t)=>Rs(Tl(e.x,e.y,n,1),Tl(t.x,t.y,n,1))<r;for(let t=0;t<e.length;t++)e[t]=nc(e[t],i)}let l,c;if(u){const e=i.getValueAndResolveTokens("text-field",t,n,m),r=Lt.factory(e);rf(r)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===bo()||this.hasRTLText&&wo.isParsed())&&(l=Zd(r,i,t))}if(d){const e=i.getValueAndResolveTokens("icon-image",t,n,m);c=e instanceof Rt?e:Rt.fromString(e)}if(!l&&!c)continue;const w=this.sortFeaturesByKey?h.evaluate(t,{},n):void 0;if(this.features.push({id:y,text:l,icon:c,index:b,sourceLayerIndex:x,geometry:t.geometry,properties:v.properties,type:Jp[v.type],sortKey:w}),c&&(p[c.name]=!0),l){const e=s.evaluate(t,{},n).join(","),r="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ch.vertical)>=0;for(const t of l.sections)if(t.image)p[t.image.name]=!0;else{const n=to(l.toString()),i=t.fontStack||e,o=f[i]=f[i]||{};this.calculateGlyphDependencies(t.text,o,r,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},n={},r=[];let i=0;function o(t){r.push(e[t]),i++}function a(e,t,i){const o=n[e];return delete n[e],n[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(e,n,i){const o=t[n];return delete t[n],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(e,t,n){const r=n?t[0][t[0].length-1]:t[0][0];return`${e}:${r.x}:${r.y}`}for(let c=0;c<e.length;c++){const u=e[c],d=u.geometry,h=u.text?u.text.toString():null;if(!h){o(c);continue}const p=l(h,d),f=l(h,d,!0);if(p in n&&f in t&&n[p]!==t[f]){const e=s(p,f,d),i=a(p,f,r[e].geometry);delete t[p],delete n[f],n[l(h,r[i].geometry,!0)]=i,r[e].geometry=null}else p in n?a(p,f,d):f in t?s(p,f,d):(o(c),t[p]=i-1,n[f]=i-1)}return r.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Xp(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:r,y:i}of t)this.lineVertexArray.emplaceBack(r,i);return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,t,n,r,i,o,a,s,l,c,u,d,h,p){const f=e.indexArray,m=e.layoutVertexArray,g=e.globeExtVertexArray,v=e.segments.prepareSegment(4*t.length,m,f,this.canOverlap?o.sortKey:void 0),y=this.glyphOffsetArray.length,b=v.vertexLength,x=this.allowVerticalPlacement&&a===Ch.vertical?Math.PI/2:0,w=o.text&&o.text.sections;for(let k=0;k<t.length;k++){const{tl:r,tr:i,bl:a,br:c,tex:u,pixelOffsetTL:d,pixelOffsetBR:y,minFontScaleX:b,minFontScaleY:_,glyphOffset:E,isSDF:S,sectionIndex:C}=t[k],T=v.vertexLength,M=E[1];if(ef(m,l.x,l.y,r.x,M+r.y,u.x,u.y,n,S,d.x,d.y,b,_),ef(m,l.x,l.y,i.x,M+i.y,u.x+u.w,u.y,n,S,y.x,d.y,b,_),ef(m,l.x,l.y,a.x,M+a.y,u.x,u.y+u.h,n,S,d.x,y.y,b,_),ef(m,l.x,l.y,c.x,M+c.y,u.x+u.w,u.y+u.h,n,S,y.x,y.y,b,_),s){const{x:t,y:n,z:r}=s.anchor,[i,o,a]=s.up;tf(g,t,n,r,i,o,a),tf(g,t,n,r,i,o,a),tf(g,t,n,r,i,o,a),tf(g,t,n,r,i,o,a),nf(e.dynamicLayoutVertexArray,t,n,r,x)}else nf(e.dynamicLayoutVertexArray,l.x,l.y,l.z,x);f.emplaceBack(T,T+1,T+2),f.emplaceBack(T+1,T+2,T+3),v.vertexLength+=4,v.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(E[0]),k!==t.length-1&&C===t[k+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,o,o.index,{},h,p,w&&w[C])}const _=s?s.anchor:l;e.placedSymbolArray.emplaceBack(_.x,_.y,_.z,l.x,l.y,y,this.glyphOffsetArray.length-y,b,c,u,l.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,d,0)}_commitLayoutVertex(e,t,n,r,i,o,a){e.emplaceBack(t,n,r,i,o,Math.round(a.x),Math.round(a.y))}_addCollisionDebugVertices(e,t,n,r,i,o,a){const s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=s.vertexLength,c=a.tileAnchorX,u=a.tileAnchorY;for(let h=0;h<4;h++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new y(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new y(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new y(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new y(e.x1,e.y2)),s.vertexLength+=4;const d=n.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),s.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._addCollisionDebugVertices(r,i,this.textCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(e,t,o.placedIconSymbolIndex);this._addCollisionDebugVertices(r,i,this.iconCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new af(Qo,zd.members,ca),this.iconCollisionBox=new af(Qo,zd.members,ca);const n=Ud(this.iconSizeData,e),r=Ud(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(e,t,n,r){const i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:r),o=Vd(this.textSizeData,e,i)/Nd;return this.tilePixelRatio*o}getSymbolInstanceIconSize(e,t,n){const r=this.icon.placedSymbolArray.get(n),i=Vd(this.iconSizeData,e,r);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}_updateTextDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,r.padding)}}_updateIconDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(e,t,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,r.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=Ud(this.iconSizeData,e),r=Ud(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,n,r,i,o,a,s,l){const c={};if(t<n){const{x1:n,y1:r,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h,featureIndex:p}=e.get(t);c.textBox={x1:n,y1:r,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h},c.textFeatureIndex=p}if(r<i){const{x1:t,y1:n,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h,featureIndex:p}=e.get(r);c.verticalTextBox={x1:t,y1:n,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h},c.verticalTextFeatureIndex=p}if(o<a){const{x1:t,y1:n,x2:r,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h,featureIndex:p}=e.get(o);c.iconBox={x1:t,y1:n,x2:r,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h},c.iconFeatureIndex=p}if(s<l){const{x1:t,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h,featureIndex:p}=e.get(s);c.verticalIconBox={x1:t,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h},c.verticalIconFeatureIndex=p}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs;for(let i=n.vertexStartIndex;i<r;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),r=[],i=[],o=[];for(let a=0;a<this.symbolInstances.length;++a){o.push(a);const e=this.symbolInstances.get(a);r.push(0|Math.round(t*e.tileAnchorX+n*e.tileAnchorY)),i.push(e.featureIndex)}return o.sort(((e,t)=>r[e]-r[t]||i[t]-i[e])),o}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex);const{rightJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:r,leftJustifiedTextSymbolIndex:i,verticalPlacedTextSymbolIndex:o,placedIconSymbolIndex:a,verticalPlacedIconSymbolIndex:s}=t;n>=0&&this.addIndicesForPlacedSymbol(this.text,n),r>=0&&r!==n&&this.addIndicesForPlacedSymbol(this.text,r),i>=0&&i!==r&&i!==n&&this.addIndicesForPlacedSymbol(this.text,i),o>=0&&this.addIndicesForPlacedSymbol(this.text,o),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a),s>=0&&this.addIndicesForPlacedSymbol(this.icon,s)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Ki(sf,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),sf.MAX_GLYPHS=65535,sf.addDynamicAttributes=nf;const lf=new Lo({"symbol-placement":new Ao(et.layout_symbol["symbol-placement"]),"symbol-spacing":new Ao(et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ao(et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Po(et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ao(et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ao(et.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ao(et.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ao(et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ao(et.layout_symbol["icon-rotation-alignment"]),"icon-size":new Po(et.layout_symbol["icon-size"]),"icon-text-fit":new Ao(et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ao(et.layout_symbol["icon-text-fit-padding"]),"icon-image":new Po(et.layout_symbol["icon-image"]),"icon-rotate":new Po(et.layout_symbol["icon-rotate"]),"icon-padding":new Ao(et.layout_symbol["icon-padding"]),"icon-keep-upright":new Ao(et.layout_symbol["icon-keep-upright"]),"icon-offset":new Po(et.layout_symbol["icon-offset"]),"icon-anchor":new Po(et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ao(et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ao(et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ao(et.layout_symbol["text-rotation-alignment"]),"text-field":new Po(et.layout_symbol["text-field"]),"text-font":new Po(et.layout_symbol["text-font"]),"text-size":new Po(et.layout_symbol["text-size"]),"text-max-width":new Po(et.layout_symbol["text-max-width"]),"text-line-height":new Po(et.layout_symbol["text-line-height"]),"text-letter-spacing":new Po(et.layout_symbol["text-letter-spacing"]),"text-justify":new Po(et.layout_symbol["text-justify"]),"text-radial-offset":new Po(et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ao(et.layout_symbol["text-variable-anchor"]),"text-anchor":new Po(et.layout_symbol["text-anchor"]),"text-max-angle":new Ao(et.layout_symbol["text-max-angle"]),"text-writing-mode":new Ao(et.layout_symbol["text-writing-mode"]),"text-rotate":new Po(et.layout_symbol["text-rotate"]),"text-padding":new Ao(et.layout_symbol["text-padding"]),"text-keep-upright":new Ao(et.layout_symbol["text-keep-upright"]),"text-transform":new Po(et.layout_symbol["text-transform"]),"text-offset":new Po(et.layout_symbol["text-offset"]),"text-allow-overlap":new Ao(et.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ao(et.layout_symbol["text-ignore-placement"]),"text-optional":new Ao(et.layout_symbol["text-optional"])});var cf={paint:new Lo({"icon-opacity":new Po(et.paint_symbol["icon-opacity"]),"icon-color":new Po(et.paint_symbol["icon-color"]),"icon-halo-color":new Po(et.paint_symbol["icon-halo-color"]),"icon-halo-width":new Po(et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Po(et.paint_symbol["icon-halo-blur"]),"icon-translate":new Ao(et.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ao(et.paint_symbol["icon-translate-anchor"]),"text-opacity":new Po(et.paint_symbol["text-opacity"]),"text-color":new Po(et.paint_symbol["text-color"],{runtimeType:ht,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Po(et.paint_symbol["text-halo-color"]),"text-halo-width":new Po(et.paint_symbol["text-halo-width"]),"text-halo-blur":new Po(et.paint_symbol["text-halo-blur"]),"text-translate":new Ao(et.paint_symbol["text-translate"]),"text-translate-anchor":new Ao(et.paint_symbol["text-translate-anchor"])}),layout:lf};class uf{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:lt,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ki(uf,"FormatSectionOverride",{omit:["defaultValue"]});class df extends rs{constructor(e){super(e,cf)}recalculate(e,t){super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const e=[];for(const t of n)e.indexOf(t)<0&&e.push(t);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,r){const i=this.layout.get(e).evaluate(t,{},n,r),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||Kr(o.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,((t,n)=>n in e?String(e[n]):""))}(t.properties,i)}createBucket(e){return new sf(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of cf.paint.overridableProperties){if(!df.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new uf(t),r=new Gr(n,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new Xr("source",r):new Jr("composite",r,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new Io(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&df.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),r=cf.paint.properties[t];let i=!1;const o=e=>{for(const t of e)if(r.overrides&&r.overrides.hasOverride(t))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Lt)o(n.value.value.sections);else if("source"===n.value.kind){const e=t=>{i||(t instanceof Vt&&Nt(t.value)===gt?o(t.value.sections):t instanceof Wt?o(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return i}getProgramConfiguration(e){return new Ka(this,e)}}var hf={paint:new Lo({"background-color":new Ao(et.paint_background["background-color"]),"background-pattern":new Ao(et.paint_background["background-pattern"]),"background-opacity":new Ao(et.paint_background["background-opacity"])})},pf={paint:new Lo({"raster-opacity":new Ao(et.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ao(et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ao(et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ao(et.paint_raster["raster-brightness-max"]),"raster-saturation":new Ao(et.paint_raster["raster-saturation"]),"raster-contrast":new Ao(et.paint_raster["raster-contrast"]),"raster-resampling":new Ao(et.paint_raster["raster-resampling"]),"raster-fade-duration":new Ao(et.paint_raster["raster-fade-duration"])})};class ff extends rs{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var mf={paint:new Lo({"sky-type":new Ao(et.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ao(et.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ao(et.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ao(et.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ao(et.paint_sky["sky-gradient-radius"]),"sky-gradient":new Do(et.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ao(et.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ao(et.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ao(et.paint_sky["sky-opacity"])})};function gf(e,t,n){const r=[0,0,1],i=qs([]);return Ks(i,i,n?-w(e)+Math.PI:w(e)),Gs(i,i,-w(t)),Ns(r,r,i),Ls(r,r)}const vf={circle:class extends rs{constructor(e){super(e,Mc)}createBucket(e){return new uc(e)}queryRadius(e){const t=e;return kc("circle-radius",this,t)+kc("circle-stroke-width",this,t)+Ec(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,n,r,i,o,a,s){const l=Cc(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);return Ic(e,r,o,a,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new Ka(this,e)}},heatmap:class extends rs{createBucket(e){return new Lc(e)}constructor(e){super(e,Fc),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Vc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return kc("heatmap-radius",this,e)}queryIntersectsFeature(e,t,n,r,i,o,a,s){const l=this.paint.get("heatmap-radius").evaluate(t,n);return Ic(e,r,o,a,s,!0,!0,new y(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new Ka(this,e)}},hillshade:class extends rs{constructor(e){super(e,Uc)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends rs{constructor(e){super(e,Iu)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(e){return new Ka(this,e)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new Tu(e)}queryRadius(){return Ec(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,n,r,i,o){return!e.queryGeometry.isAboveHorizon&&pc(Sc(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),r)}isTileClipped(){return!0}},"fill-extrusion":class extends rs{constructor(e){super(e,ud)}createBucket(e){return new ed(e)}queryRadius(){return Ec(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new Ka(this,e)}queryIntersectsFeature(e,t,n,r,i,o,a,s,l){const c=Cc(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(t,n),d=this.paint.get("fill-extrusion-base").evaluate(t,n),h=[0,0],p=s&&o.elevation,f=o.elevation?o.elevation.exaggeration():1,m=e.tile.getBucket(this);if(p&&m instanceof ed){const e=m.centroidVertexArray,t=l+1;t<e.length&&(h[0]=e.geta_centroid_pos0(t),h[1]=e.geta_centroid_pos1(t))}if(0===h[0]&&1===h[1])return!1;"globe"===o.projection.name&&(r=ld([r],[new y(0,0),new y(ss,ss)],e.tileID.canonical).map((e=>e.polygon)).flat());const g=p?s:null,[v,b]=function(e,t,n,r,i,o,a,s,l,c,u){return"globe"===e.projection.name?function(e,t,n,r,i,o,a,s,l,c,u){const d=[],h=[],p=e.projection.upVectorScale(u,e.center.lat,e.worldSize).metersToTile,f=[0,0,0,1],m=[0,0,0,1],g=(e,t,n,r)=>{e[0]=t,e[1]=n,e[2]=r,e[3]=1},v=sd();n>0&&(n+=v),r+=v;for(const y of t){const t=[],v=[];for(const d of y){const h=d.x+i.x,y=d.y+i.y,b=e.projection.projectTilePoint(h,y,u),x=e.projection.upVector(u,d.x,d.y);let w=n,_=r;if(a){const e=bd(h,y,n,r,a,s,l,c);w+=e.base,_+=e.top}0!==n?g(f,b.x+x[0]*p*w,b.y+x[1]*p*w,b.z+x[2]*p*w):g(f,b.x,b.y,b.z),g(m,b.x+x[0]*p*_,b.y+x[1]*p*_,b.z+x[2]*p*_),js(f,f,o),js(m,m,o),t.push(new gd(f[0],f[1],f[2])),v.push(new gd(m[0],m[1],m[2]))}d.push(t),h.push(v)}return[d,h]}(e,t,n,r,i,o,a,s,l,c,u):a?function(e,t,n,r,i,o,a,s,l){const c=[],u=[],d=[0,0,0,1];for(const h of e){const e=[],p=[];for(const c of h){const u=c.x+r.x,h=c.y+r.y,f=bd(u,h,t,n,o,a,s,l);d[0]=u,d[1]=h,d[2]=f.base,d[3]=1,Hs(d,d,i),d[3]=Math.max(d[3],1e-5);const m=new gd(d[0]/d[3],d[1]/d[3],d[2]/d[3]);d[0]=u,d[1]=h,d[2]=f.top,d[3]=1,Hs(d,d,i),d[3]=Math.max(d[3],1e-5);const g=new gd(d[0]/d[3],d[1]/d[3],d[2]/d[3]);e.push(m),p.push(g)}c.push(e),u.push(p)}return[c,u]}(t,n,r,i,o,a,s,l,c):function(e,t,n,r,i){const o=[],a=[],s=i[8]*t,l=i[9]*t,c=i[10]*t,u=i[11]*t,d=i[8]*n,h=i[9]*n,p=i[10]*n,f=i[11]*n;for(const m of e){const e=[],t=[];for(const n of m){const o=n.x+r.x,a=n.y+r.y,m=i[0]*o+i[4]*a+i[12],g=i[1]*o+i[5]*a+i[13],v=i[2]*o+i[6]*a+i[14],y=i[3]*o+i[7]*a+i[15],b=m+s,x=g+l,w=v+c,_=Math.max(y+u,1e-5),k=m+d,E=g+h,S=v+p,C=Math.max(y+f,1e-5);e.push(new gd(b/_,x/_,w/_)),t.push(new gd(k/C,E/C,S/C))}o.push(e),a.push(t)}return[o,a]}(t,n,r,i,o)}(o,r,d,u,c,a,g,h,f,o.center.lat,e.tileID.canonical),x=e.queryGeometry;return function(e,t,n){let r=1/0;pc(n,t)&&(r=yd(n,t[0]));for(let i=0;i<t.length;i++){const o=t[i],a=e[i];for(let e=0;e<o.length-1;e++){const t=o[e],i=[t,o[e+1],a[e+1],a[e],t];dc(n,i)&&(r=Math.min(r,yd(n,i)))}}return r!==1/0&&r}(v,b,x.isPointQuery()?x.screenBounds:x.screenGeometry)}},line:class extends rs{constructor(e){super(e,Md),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof An,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Id.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Cd(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(e){return new Ka(this,e)}queryRadius(e){const t=e,n=Od(kc("line-width",this,t),kc("line-gap-width",this,t)),r=kc("line-offset",this,t);return n/2+Math.abs(r)+Ec(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,n,r,i,o){if(e.queryGeometry.isAboveHorizon)return!1;const a=Sc(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*Od(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),l=this.paint.get("line-offset").evaluate(t,n);return l&&(r=function(e,t){const n=[],r=new y(0,0);for(let i=0;i<e.length;i++){const o=e[i],a=[];for(let e=0;e<o.length;e++){const n=o[e],i=o[e+1],s=0===e?r:n.sub(o[e-1])._unit()._perp(),l=e===o.length-1?r:i.sub(n)._unit()._perp(),c=s._add(l)._unit();c._mult(1/(c.x*l.x+c.y*l.y)),a.push(c._mult(t)._add(n))}n.push(a)}return n}(r,l*e.pixelToTileUnitsFactor)),function(e,t,n){for(let r=0;r<t.length;r++){const i=t[r];if(e.length>=3)for(let t=0;t<i.length;t++)if(xc(e,i[t]))return!0;if(fc(e,i,n))return!0}return!1}(a,r,s)}isTileClipped(){return!0}},symbol:df,background:class extends rs{constructor(e){super(e,hf)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends rs{constructor(e){super(e,pf)}getProgramIds(){return["raster"]}},sky:class extends rs{constructor(e){super(e,mf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Vc({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(e,t){if("atmosphere"===this.paint.get("sky-type")){const n=this.paint.get("sky-atmosphere-sun"),r=!n,i=e.style.light,o=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&Z("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?gf(o.azimuthal,90-o.polar,t):gf(n[0],90-n[1],t)}const n=this.paint.get("sky-gradient-center");return gf(n[0],90-n[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}};class yf{constructor(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)}update(e,n,r){const{width:i,height:o}=e,{context:a}=this,{gl:s}=a,{HTMLImageElement:l,HTMLCanvasElement:c,HTMLVideoElement:u,ImageData:d,ImageBitmap:h}=t;if(s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!n||!1!==n.premultiply)),r||this.size&&this.size[0]===i&&this.size[1]===o){const{x:t,y:n}=r||{x:0,y:0};e instanceof l||e instanceof c||e instanceof u||e instanceof d||h&&e instanceof h?s.texSubImage2D(s.TEXTURE_2D,0,t,n,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,t,n,i,o,s.RGBA,s.UNSIGNED_BYTE,e.data)}else this.size=[i,o],e instanceof l||e instanceof c||e instanceof u||e instanceof d||h&&e instanceof h?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,i,o,0,this.format,s.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(n&&n.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&s.generateMipmap(s.TEXTURE_2D)}bind(e,t){const{context:n}=this,{gl:r}=n;r.bindTexture(r.TEXTURE_2D,this.texture),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.useMipmap?e===r.NEAREST?r.NEAREST_MIPMAP_NEAREST:r.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class bf{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class xf{constructor(){this.tasks={},this.taskQueue=[],N(["process"],this),this.invoker=new bf(this.process),this.nextId=0}add(e,t){const n=this.nextId++,r=function({type:e,isSymbolTile:t,zoom:n}){return n=n||0,"message"===e?0:"maybePrepare"!==e||t?"parseTile"!==e||t?"parseTile"===e&&t?300-n:"maybePrepare"===e&&t?400-n:500:200-n:100-n}(t);if(0===r){q();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:e,metadata:t,priority:r,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){q();try{if(this.taskQueue=this.taskQueue.filter((e=>!!this.tasks[e])),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let r=0;r<this.taskQueue.length;r++){const n=this.tasks[this.taskQueue[r]];n.priority<t&&(t=n.priority,e=r)}if(null===e)return null;const n=this.taskQueue[e];return this.taskQueue.splice(e,1),n}remove(){this.invoker.remove()}}class wf{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const _f=["tile","layer","source","sourceLayer","state"];class kf{constructor(e,t,n,r,i){this.type="Feature",this._vectorTileFeature=e,this._z=t,this._x=n,this._y=r,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const t of _f)void 0!==this[t]&&(e[t]=this[t]);return e}}const Ef=32,Sf=33,Cf=new Uint16Array(8184);for(let km=0;km<2046;km++){let e=km+2,t=0,n=0,r=0,i=0,o=0,a=0;for(1&e?r=i=o=Ef:t=n=a=Ef;(e>>=1)>1;){const s=t+r>>1,l=n+i>>1;1&e?(r=t,i=n,t=o,n=a):(t=r,n=i,r=o,i=a),o=s,a=l}const s=4*km;Cf[s+0]=t,Cf[s+1]=n,Cf[s+2]=r,Cf[s+3]=i}const Tf=new Uint16Array(2178),Mf=new Uint8Array(1089),If=new Uint16Array(1089);function Of(e){return 0===e?-.03125:32===e?.03125:0}var Af=Bo([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Pf={type:2,extent:ss,loadGeometry:()=>[[new y(0,0),new y(ss+1,0),new y(ss+1,ss+1),new y(0,ss+1),new y(0,0)]]};class Df{constructor(e,t,n,r,i){this.tileID=e,this.uid=L(),this.uses=0,this.tileSize=t,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",r&&r.transform&&(this.projection=r.transform.projection)}registerFadeDuration(e){const t=e+this.timeAdded;t<Ge.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Op(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,t,n){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const r of e){const e=r.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){r.layers=e,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)n[t.id]=r}}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof sf){if(this.hasSymbolBuckets=!0,!n)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof sf&&t.hasRTLText){this.hasRTLText=!0,wo.isLoading()||wo.isLoaded()||"deferred"!==bo()||xo();break}}this.queryPadding=0;for(const e in this.buckets){const n=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(n))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new pa}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const n in this.buckets){const t=this.buckets[n];t.uploadPending()&&t.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new yf(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new yf(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new yf(e,this.lineAtlas.image,t.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:a,transform:o,params:i,tileTransform:this.tileTransform},e,t,n):{}}querySourceFeatures(e,t){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const r=n.loadVTLayers(),i=t?t.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(!o)return;const a=di(t&&t.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let d=0;d<o.length;d++){const t=o.feature(d);if(a.needGeometry){const e=sc(t,!0);if(!a.filter(new _o(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!a.filter(new _o(this.tileID.overscaledZ),t))continue;const r=n.getId(t,i),h=new kf(t,s,l,c,r);h.tile=u,e.push(h)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=G(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let n=!1;if(this.expirationTime>e)n=!1;else if(t)if(this.expirationTime<t)n=!0;else{const r=this.expirationTime-t;r?this.expirationTime=e+Math.max(r,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!t)return;const n=this.latestFeatureIndex.loadVTLayers(),r=t.style.listImages();for(const i in this.buckets){if(!t.style.hasLayer(i))continue;const o=this.buckets[i],a=o.layers[0].sourceLayer||"_geojsonTileLayer",s=n[a],l=e[a];if(!s||!l||0===Object.keys(l).length)continue;if(o.update(l,s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o instanceof Cd||o instanceof Tu){const e=t.style._getSourceCache(o.layers[0].source);t._terrain&&t._terrain.enabled&&e&&o.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(e.id,this.tileID)}const c=t&&t.style&&t.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ge.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Ge.now()+e}setTexture(e,t){const n=t.context,r=n.gl;this.texture=this.texture||t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new yf(n,e,r.RGBA,{useMipmap:!0}),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE))}setDependencies(e,t){const n={};for(const r of t)n[r]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,t){if(!t||"mercator"===t.name||this._tileDebugBuffer)return;const n=ac(Pf,this.tileID.canonical,this.tileTransform)[0],r=new Vo,i=new ua;for(let o=0;o<n.length;o++){const{x:e,y:t}=n[o];r.emplaceBack(e,t),i.emplaceBack(o)}i.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(r,el.members),this._tileDebugSegments=as.simpleSegment(0,0,r.length,i.length)}_makeTileBoundsBuffers(e,t){if(this._tileBoundsBuffer||!t||"mercator"===t.name)return;const n=ac(Pf,this.tileID.canonical,this.tileTransform)[0];let r,i;if(this.isRaster){const e=function(e,t){const n=Op(e,t),r=Math.pow(2,e.z);for(let c=0;c<Sf;c++)for(let i=0;i<Sf;i++){const o=ql((e.x+(i+Of(i))/Ef)/r),a=Gl((e.y+(c+Of(c))/Ef)/r),s=t.project(o,a),l=c*Sf+i;Tf[2*l+0]=Math.round((s.x*n.scale-n.x)*ss),Tf[2*l+1]=Math.round((s.y*n.scale-n.y)*ss)}Mf.fill(0),If.fill(0);for(let c=2045;c>=0;c--){const e=4*c,t=Cf[e+0],n=Cf[e+1],r=Cf[e+2],i=Cf[e+3],o=t+r>>1,a=n+i>>1,s=o+a-n,l=a+t-o,u=n*Sf+t,d=i*Sf+r,h=a*Sf+o,p=Math.hypot((Tf[2*u+0]+Tf[2*d+0])/2-Tf[2*h+0],(Tf[2*u+1]+Tf[2*d+1])/2-Tf[2*h+1])>=16;Mf[h]=Mf[h]||(p?1:0),c<1022&&(Mf[h]=Mf[h]||Mf[(n+l>>1)*Sf+(t+s>>1)]||Mf[(i+l>>1)*Sf+(r+s>>1)])}const i=new $o,o=new ra;let a=0;function s(e,t){const n=t*Sf+e;return 0===If[n]&&(i.emplaceBack(Tf[2*n+0],Tf[2*n+1],e*ss/Ef,t*ss/Ef),If[n]=++a),If[n]-1}function l(e,t,n,r,i,a){const c=e+n>>1,u=t+r>>1;if(Math.abs(e-i)+Math.abs(t-a)>1&&Mf[u*Sf+c])l(i,a,e,t,c,u),l(n,r,i,a,c,u);else{const l=s(e,t),c=s(n,r),u=s(i,a);o.emplaceBack(l,c,u)}}return l(0,0,Ef,Ef,Ef,0),l(Ef,Ef,0,0,0,Ef),{vertices:i,indices:o}}(this.tileID.canonical,t);r=e.vertices,i=e.indices}else{r=new $o,i=new ra;for(const{x:t,y:i}of n)r.emplaceBack(t,i,0,0);const e=yu(r.int16,void 0,4);for(let t=0;t<e.length;t+=3)i.emplaceBack(e[t],e[t+1],e[t+2])}this._tileBoundsBuffer=e.createVertexBuffer(r,Af.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(i),this._tileBoundsSegments=as.simpleSegment(0,0,r.length,i.length)}_makeGlobeTileDebugBuffers(e,t){const n=t.projection;if(!n||"globe"!==n.name||t.freezeTileCoverage)return;const r=this.tileID.canonical,i=Ol(xl(r,t)),o=Dl(t.zoom);let a;o>0&&(a=fs(new Float64Array(16),t.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,r,t,i,a,o),this._makeGlobeTileDebugTextBuffer(e,r,t,i,a,o)}_globePoint(e,t,n,r,i,o,a){let s=Tl(e,t,n);if(o){const i=1<<n.z,l=Zl(r.center.lng),c=Hl(r.center.lat),u=(n.x+.5)/i-l;let d=0;u>.5?d=-1:u<-.5&&(d=1);let h=(e/ss+n.x)/i+d,p=(t/ss+n.y)/i;h=(h-l)*r._pixelsPerMercatorPixel+l,p=(p-c)*r._pixelsPerMercatorPixel+c;const f=[h*r.worldSize,p*r.worldSize,0];js(f,f,o),s=bl(s,f,a)}return js(s,s,i)}_makeGlobeTileDebugBorderBuffer(e,t,n,r,i,o){const a=new Vo,s=new ua,l=new Uo,c=(e,c,u,d,h)=>{const p=(u-e)/(h-1),f=(d-c)/(h-1),m=a.length;for(let g=0;g<h;g++){const u=e+g*p,d=c+g*f;a.emplaceBack(u,d);const h=this._globePoint(u,d,t,n,r,i,o);l.emplaceBack(h[0],h[1],h[2]),s.emplaceBack(m+g)}},u=ss;c(0,0,u,0,16),c(u,0,u,u,16),c(u,u,0,u,16),c(0,u,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(s),this._tileDebugBuffer=e.createVertexBuffer(a,el.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(l,Qs.members),this._tileDebugSegments=as.simpleSegment(0,0,a.length,s.length)}_makeGlobeTileDebugTextBuffer(e,t,n,r,i,o){const a=ss/4,s=new Vo,l=new ra,c=new Uo,u=25;l.reserve(32),s.reserve(u),c.reserve(u);const d=(e,t)=>u*e+t;for(let h=0;h<u;h++){const e=h*a;for(let l=0;l<u;l++){const u=l*a;s.emplaceBack(u,e);const d=this._globePoint(u,e,t,n,r,i,o);c.emplaceBack(d[0],d[1],d[2])}}for(let h=0;h<4;h++)for(let e=0;e<4;e++){const t=d(h,e),n=d(h,e+1),r=d(h+1,e),i=d(h+1,e+1);l.emplaceBack(t,n,r),l.emplaceBack(r,n,i)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(l),this._tileDebugTextBuffer=e.createVertexBuffer(s,el.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(c,Qs.members),this._tileDebugTextSegments=as.simpleSegment(0,0,u,32)}}class Lf{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,n){const r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},P(this.stateChanges[e][r],n),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==r&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][r]){this.deletedStates[e][r]={};for(const t in this.state[e][r])n[t]||(this.deletedStates[e][r][t]=null)}else for(const i in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][i]&&delete this.deletedStates[e][r][i]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}getState(e,t){const n=String(t),r=P({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const n=this.deletedStates[e][t];if(null===n)return{};for(const e in n)delete r[e]}return r}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const n={};for(const r in this.stateChanges){this.state[r]=this.state[r]||{};const e={};for(const t in this.stateChanges[r])this.state[r][t]||(this.state[r][t]={}),P(this.state[r][t],this.stateChanges[r][t]),e[t]=this.state[r][t];n[r]=e}for(const r in this.deletedStates){this.state[r]=this.state[r]||{};const e={};if(null===this.deletedStates[r])for(const t in this.state[r])e[t]={},this.state[r][t]={};else for(const t in this.deletedStates[r]){if(null===this.deletedStates[r][t])this.state[r][t]={};else if(this.state[r][t])for(const e of Object.keys(this.deletedStates[r][t]))delete this.state[r][t][e];e[t]=this.state[r][t]}n[r]=n[r]||{},P(n[r],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const r in e)e[r].setFeatureState(n,t)}}class Rf{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function zf(e,t,n,r){let i=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(r[a])<1e-15){if(n[a]<e[a]||n[a]>t[a])return null}else{const s=1/r[a];let l=(e[a]-n[a])*s,c=(t[a]-n[a])*s;if(l>c){const e=l;l=c,c=e}if(l>i&&(i=l),c<o&&(o=c),i>o)return null}return i}function jf(e,t,n,r,i,o,a,s,l,c,u){const d=r-e,h=i-t,p=o-n,f=a-e,m=s-t,g=l-n,v=u[1]*g-u[2]*m,y=u[2]*f-u[0]*g,b=u[0]*m-u[1]*f,x=d*v+h*y+p*b;if(Math.abs(x)<1e-15)return null;const w=1/x,_=c[0]-e,k=c[1]-t,E=c[2]-n,S=(_*v+k*y+E*b)*w;if(S<0||S>1)return null;const C=k*p-E*h,T=E*d-_*p,M=_*h-k*d,I=(u[0]*C+u[1]*T+u[2]*M)*w;return I<0||S+I>1?null:(f*C+m*T+g*M)*w}function Nf(e,t,n){return(e-t)/(n-t)}function Bf(e,t,n,r,i,o,a,s,l){const c=1<<n,u=o-r,d=a-i,h=(e+1)/c*u+r,p=(t+0)/c*d+i,f=(t+1)/c*d+i;s[0]=(e+0)/c*u+r,s[1]=p,l[0]=h,l[1]=f}class Ff{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),n=[];let r=Math.ceil(Math.pow(2,t));const i=1/r,o=(e,t,n,r,i)=>{const o=r?1:0,a=(e+1)*n-o,s=t*n,l=(t+1)*n-o;i[0]=e*n,i[1]=s,i[2]=a,i[3]=l};let a=new Rf(r);const s=[];for(let l=0;l<r*r;l++){o(l%r,Math.floor(l/r),i,!1,s);const t=Uf(s[0],s[1],e),n=Uf(s[2],s[1],e),c=Uf(s[2],s[3],e),u=Uf(s[0],s[3],e);a.minimums.push(Math.min(t,n,c,u)),a.maximums.push(Math.max(t,n,c,u)),a.leaves.push(1)}for(n.push(a),r/=2;r>=1;r/=2){const e=n[n.length-1];a=new Rf(r);for(let t=0;t<r*r;t++){o(t%r,Math.floor(t/r),2,!0,s);const n=e.getElevation(s[0],s[1]),i=e.getElevation(s[2],s[1]),l=e.getElevation(s[2],s[3]),c=e.getElevation(s[0],s[3]),u=e.isLeaf(s[0],s[1]),d=e.isLeaf(s[2],s[1]),h=e.isLeaf(s[2],s[3]),p=e.isLeaf(s[0],s[3]),f=Math.min(n.min,i.min,l.min,c.min),m=Math.max(n.max,i.max,l.max,c.max),g=u&&d&&h&&p;a.maximums.push(m),a.minimums.push(f),a.leaves.push(m-f<=5&&g?1:0)}n.push(a)}return n}(this.dem),n=t.length-1,r=t[n];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(t,0,0,n,0)}raycastRoot(e,t,n,r,i,o,a=1){return zf([e,t,-100],[n,r,this.maximums[0]*a],i,o)}raycast(e,t,n,r,i,o,a=1){if(!this.nodeCount)return null;const s=this.raycastRoot(e,t,n,r,i,o,a);if(null==s)return null;const l=[],c=[],u=[],d=[],h=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;h.length>0;){const{idx:s,t:p,nodex:f,nodey:m,depth:g}=h.pop();if(this.leaves[s]){Bf(f,m,g,e,t,n,r,u,d);const s=1<<g,l=(f+0)/s,c=(f+1)/s,h=(m+0)/s,v=(m+1)/s,y=Uf(l,h,this.dem)*a,b=Uf(c,h,this.dem)*a,x=Uf(c,v,this.dem)*a,w=Uf(l,v,this.dem)*a,_=jf(u[0],u[1],y,d[0],u[1],b,d[0],d[1],x,i,o),k=jf(d[0],d[1],x,u[0],d[1],w,u[0],u[1],y,i,o),E=Math.min(null!==_?_:Number.MAX_VALUE,null!==k?k:Number.MAX_VALUE);if(E!==Number.MAX_VALUE)return E;{const e=Ds([],i,o,p);if(Vf(y,b,w,x,Nf(e[0],u[0],d[0]),Nf(e[1],u[1],d[1]))>=e[2])return p}continue}let v=0;for(let h=0;h<this._siblingOffset.length;h++){Bf((f<<1)+this._siblingOffset[h][0],(m<<1)+this._siblingOffset[h][1],g+1,e,t,n,r,u,d),u[2]=-100,d[2]=this.maximums[this.childOffsets[s]+h]*a;const p=zf(u,d,i,o);if(null!=p){const e=p;l[h]=e;let t=!1;for(let n=0;n<v&&!t;n++)e>=l[c[n]]&&(c.splice(n,0,h),t=!0);t||(c[v]=h),v++}}for(let e=0;e<v;e++){const t=c[e];h.push({idx:this.childOffsets[s]+t,t:l[t],nodex:(f<<1)+this._siblingOffset[t][0],nodey:(m<<1)+this._siblingOffset[t][1],depth:g+1})}}return null}_addNode(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,n,r,i){if(1===e[r].isLeaf(t,n))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const o=r-1,a=e[o];let s=0,l=0;for(let c=0;c<this._siblingOffset.length;c++){const e=2*t+this._siblingOffset[c][0],r=2*n+this._siblingOffset[c][1],i=a.getElevation(e,r),o=a.isLeaf(e,r),u=this._addNode(i.min,i.max,o);o&&(s|=1<<c),l||(l=u)}for(let c=0;c<this._siblingOffset.length;c++)s&1<<c||this._construct(e,2*t+this._siblingOffset[c][0],2*n+this._siblingOffset[c][1],o,l+c)}}function Vf(e,t,n,r,i,o){return Pn(Pn(e,n,o),Pn(t,r,o),i)}function Uf(e,t,n){const r=n.dim,i=T(e*r-.5,0,r-1),o=T(t*r-.5,0,r-1),a=Math.floor(i),s=Math.floor(o),l=Math.min(a+1,r-1),c=Math.min(s+1,r-1);return Vf(n.get(a,s),n.get(l,s),n.get(a,c),n.get(l,c),i-a,o-s)}const $f={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Zf(e,t,n){return(256*e*256+256*t+n)/10-1e4}function Hf(e,t,n){return 256*e+t+n/256-32768}class Wf{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,n,r=!1,i=!1){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return Z(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const o=this.dim=t.height-2,a=new Uint32Array(t.data.buffer);if(this.pixels=new Uint8Array(t.data.buffer),this.encoding=n||"mapbox",this.borderReady=r,!r){for(let e=0;e<o;e++)a[this._idx(-1,e)]=a[this._idx(0,e)],a[this._idx(o,e)]=a[this._idx(o-1,e)],a[this._idx(e,-1)]=a[this._idx(e,0)],a[this._idx(e,o)]=a[this._idx(e,o-1)];a[this._idx(-1,-1)]=a[this._idx(0,0)],a[this._idx(o,-1)]=a[this._idx(o-1,0)],a[this._idx(-1,o)]=a[this._idx(0,o-1)],a[this._idx(o,o)]=a[this._idx(o-1,o-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Ff(this)}get(e,t,n=!1){n&&(e=T(e,-1,this.dim),t=T(t,-1,this.dim));const r=4*this._idx(e,t);return("terrarium"===this.encoding?Hf:Zf)(this.pixels[r],this.pixels[r+1],this.pixels[r+2])}static getUnpackVector(e){return $f[e]}get unpackVector(){return $f[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}static pack(e,t){const n=[0,0,0,0],r=Wf.getUnpackVector(t);let i=Math.floor((e+r[3])/r[2]);return n[2]=i%256,i=Math.floor(i/256),n[1]=i%256,i=Math.floor(i/256),n[0]=i,n}getPixels(){return new Bc({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,l=-n*this.dim;for(let c=o;c<a;c++)for(let t=r;t<i;t++){const n=4*this._idx(t,c),r=4*this._idx(t+s,c+l);this.pixels[n+0]=e.pixels[r+0],this.pixels[n+1]=e.pixels[r+1],this.pixels[n+2]=e.pixels[r+2],this.pixels[n+3]=e.pixels[r+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Ki(Wf,"DEMData"),Ki(Ff,"DemMinMaxQuadTree",{omit:["dem"]});class qf{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:t,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(e,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const r of this.data[n])e(r.value)||t.push(r);for(const n of t)this.remove(n.value.tileID,n)}}class Gf{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}Gf.ReadOnly=!1,Gf.ReadWrite=!0,Gf.disabled=new Gf(519,Gf.ReadOnly,[0,1]);const Kf=7680;class Yf{constructor(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}Yf.disabled=new Yf({func:519,mask:0},0,0,Kf,Kf,Kf);class Xf{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}Xf.Replace=[1,0],Xf.disabled=new Xf(Xf.Replace,At.transparent,[!1,!1,!1,!1]),Xf.unblended=new Xf(Xf.Replace,At.transparent,[!0,!0,!0,!0]),Xf.alphaBlended=new Xf([1,771],At.transparent,[!0,!0,!0,!0]);const Jf=1029,Qf=2305;class em{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}em.disabled=new em(!1,Jf,Qf),em.backCCW=new em(!0,Jf,Qf),em.backCW=new em(!0,Jf,2304),em.frontCW=new em(!0,1028,2304),em.frontCCW=new em(!0,1028,Qf);class tm extends Qe{constructor(e,t,n){super(),this.id=e,this._onlySymbols=n,t.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),t.on("error",(()=>{this._sourceErrored=!0})),this._source=t,this._tiles={},this._cache=new qf(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Lf,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,(()=>{}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return A(this._tiles).map((e=>e.tileID)).sort(nm).map((e=>e.key))}getRenderableIds(e){const t=[];for(const n in this._tiles)this._isIdRenderable(+n,e)&&t.push(this._tiles[n]);return e?t.sort(((e,t)=>{const n=e.tileID,r=t.tileID,i=new y(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),o=new y(r.canonical.x,r.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-r.overscaledZ||o.y-i.y||o.x-i.x})).map((e=>e.tileID.key)):t.map((e=>e.tileID)).sort(nm).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}_tileLoaded(e,t,n,r){if(r)if(e.state="errored",404!==r.status)this._source.fire(new Je(r,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const e=this.map.painter.terrain;this.update(this.transform,e.getScaledDemTileSize(),!0),e.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Ge.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Xe("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let r=0;r<t.length;r++){const i=t[r];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);n(e,t),n(t,e)}}function n(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let n=t.tileID.canonical.x-e.tileID.canonical.x;const r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){r[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(let n=e.overscaledZ-1;n>=t;n--){const t=e.scaledTo(n),r=this._getLoadedTile(t);if(r)return r}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const n=Math.ceil(e.width/t)+1,r=Math.ceil(e.height/t)+1,i=Math.floor(n*r*5),o="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(a)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),e[r.tileID.key]=r}this._tiles=e;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(+t,this._tiles[t])}}update(e,t,n){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let r;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new fd(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(r=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(r=r.filter((e=>this._source.hasTile(e))))):r=[];const i=this._updateRetainedTiles(r);if(rm(this._source.type)&&0!==r.length){const e={},t={},n=Object.keys(i);for(const r of n){const n=i[r],o=this._tiles[r];if(!o||o.fadeEndTime&&o.fadeEndTime<=Ge.now())continue;const a=this.findLoadedParent(n,Math.max(n.overscaledZ-tm.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),e[a.tileID.key]=a.tileID),t[r]=n}const o=r[r.length-1].overscaledZ;for(const r in this._tiles){const e=this._tiles[r];if(i[r]||!e.hasData())continue;let n=e.tileID;for(;n.overscaledZ>o;){n=n.scaledTo(n.overscaledZ-1);const o=this._tiles[n.key];if(o&&o.hasData()&&t[n.key]){i[r]=e.tileID;break}}}for(const r in e)i[r]||(this._coveredTiles[r]=!0,i[r]=e[r])}for(const a in i)this._tiles[a].clearFadeHold();const o=function(e,t){const n=[];for(const r in e)r in t||n.push(r);return n}(this._tiles,i);for(const a of o){const e=this._tiles[a];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(+a)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const n={},r=e.reduce(((e,t)=>Math.min(e,t.overscaledZ)),1/0),i=e[0].overscaledZ,o=Math.max(i-tm.maxOverzooming,this._source.minzoom),a=Math.max(i+tm.maxUnderzooming,this._source.minzoom),s={};for(const l of e){const e=this._addTile(l);t[l.key]=l,e.hasData()||r<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,r,a,t);for(const l of e){let e=this._tiles[l.key];if(e.hasData())continue;if(l.canonical.z>=this._source.maxzoom){const e=l.children(this._source.maxzoom)[0],n=this.getTile(e);if(n&&n.hasData()){t[e.key]=e;continue}}else{const e=l.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let r=e.wasRequested();for(let i=l.overscaledZ-1;i>=o;--i){const o=l.scaledTo(i);if(n[o.key])break;if(n[o.key]=!0,e=this.getTile(o),!e&&r&&(e=this._addTile(o)),e&&(t[o.key]=o,r=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let n,r=this._tiles[e].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);const e=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(e),n)break;r=e}for(const e of t)this._loadedParentTiles[e]=n}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const n=Boolean(t);if(!n){const n=this.map?this.map.painter:null;t=new Df(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,n,this._isRaster),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new Xe("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),n))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,t,n){const r=[],i=this.transform;if(!i)return r;const o="globe"===i.projection.name,a=Zl(i.center.lng);for(const s in this._tiles){const l=this._tiles[s];if(n&&l.clearQueryDebugViz(),l.holdingForFade())continue;let c;if(o){const e=l.tileID.canonical;if(0===e.z){const t=[Math.abs(T(a,...im(e,-1))-a),Math.abs(T(a,...im(e,1))-a)];c=[0,2*t.indexOf(Math.min(...t))-1]}else{const t=[Math.abs(T(a,...im(e,-1))-a),Math.abs(T(a,...im(e,0))-a),Math.abs(T(a,...im(e,1))-a)];c=[t.indexOf(Math.min(...t))-1]}}else c=[0];for(const n of c){const o=e.containsTile(l,i,t,n);o&&r.push(o)}}return r}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const n of t)n.projMatrix=this.transform.calculateProjMatrix(n.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(rm(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=Ge.now())return!0}return!1}setFeatureState(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}removeFeatureState(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,n){const r=this._tiles[e];r&&r.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(e,t)))}_preloadTiles(e,t){if(!this._sourceLoaded){const n=()=>{this._sourceLoaded&&(this._source.off("data",n),this._preloadTiles(e,t))};return void this._source.on("data",n)}const n=new Map,r=Array.isArray(e)?e:[e],i=this.map.painter.terrain,o=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const a of r){const e=a.coveringTiles({tileSize:o,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const t of e)n.set(t.key,t);this.usedForTerrain&&a.updateElevation(!1)}O(Array.from(n.values()),((e,t)=>{const n=new Df(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(n,(e=>{"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),t(e,n)}))}),t)}}function nm(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function rm(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function im(e,t){const n=1<<e.z;return[e.x/n+t,(e.x+1)/n+t]}tm.maxOverzooming=10,tm.maxUnderzooming=3;class om{constructor(e,t,n){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=n}static create(e,t,n){const r=n||e.findDEMTileFor(t);if(!r||!r.dem)return;const i=r.dem,o=r.tileID,a=1<<t.canonical.z-o.canonical.z;return new om(r,r.tileSize/ss/a,[(t.canonical.x/a-o.canonical.x)*i.dim,(t.canonical.y/a-o.canonical.y)*i.dim])}tileCoordToPixel(e,t){const n=t*this._scale+this._offset[1],r=Math.floor(e*this._scale+this._offset[0]),i=Math.floor(n);return new y(r,i)}getElevationAt(e,t,n,r){const i=e*this._scale+this._offset[0],o=t*this._scale+this._offset[1],a=Math.floor(i),s=Math.floor(o),l=this._dem;return r=!!r,n?Pn(Pn(l.get(a,s,r),l.get(a,s+1,r),o-s),Pn(l.get(a+1,s,r),l.get(a+1,s+1,r),o-s),i-a):l.get(a,s,r)}getElevationAtPixel(e,t,n){return this._dem.get(e,t,!!n)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Wl(1,e)*this._dem.stride}}class am{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new qi(ss,16,0),this.featureIndexArray=new wa,this.promoteId=t}insert(e,t,n,r,i,o=0){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,o);const s=this.grid;for(let l=0;l<t.length;l++){const e=t[l],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<e.length;t++){const r=e[t];n[0]=Math.min(n[0],r.x),n[1]=Math.min(n[1],r.y),n[2]=Math.max(n[2],r.x),n[3]=Math.max(n[3],r.y)}n[0]<ss&&n[1]<ss&&n[2]>=0&&n[3]>=0&&s.insert(a,n[0],n[1],n[2],n[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Wu(new gh(this.rawTileData)).layers,this.sourceLayerCoder=new wf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,t,n,r){this.loadVTLayers();const i=e.params||{},o=di(i.filter),a=e.tileResult,s=e.transform,l=a.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((e,t,n,r)=>wc(a.bufferedTilespaceGeometry,e,t,n,r)));c.sort(lm);let u=null;s.elevation&&c.length>0&&(u=om.create(s.elevation,this.tileID));const d={};let h;for(let p=0;p<c.length;p++){const s=c[p];if(s===h)continue;h=s;const l=this.featureIndexArray.get(s);let f=null;this.loadMatchingFeature(d,l,o,i.layers,i.availableImages,t,n,r,((t,n,r,i=0)=>(f||(f=ac(t,this.tileID.canonical,e.tileTransform)),n.queryIntersectsFeature(a,t,r,f,this.z,e.transform,e.pixelPosMatrix,u,i))))}return d}loadMatchingFeature(e,t,n,r,i,o,a,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:d,layoutVertexArrayOffset:h}=t,p=this.bucketLayerIDs[u];if(r&&!function(e,t){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(r,p))return;const f=this.sourceLayerCoder.decode(d),m=this.vtLayers[f].feature(c);if(n.needGeometry){const e=sc(m,!0);if(!n.filter(new _o(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!n.filter(new _o(this.tileID.overscaledZ),m))return;const g=this.getId(m,f);for(let v=0;v<p.length;v++){const t=p[v];if(r&&r.indexOf(t)<0)continue;const n=o[t];if(!n)continue;let u={};void 0!==g&&s&&(u=s.getState(n.sourceLayer||"_geojsonTileLayer",g));const d=P({},a[t]);d.paint=sm(d.paint,n.paint,m,u,i),d.layout=sm(d.layout,n.layout,m,u,i);const f=!l||l(m,n,u,h);if(!f)continue;const y=new kf(m,this.z,this.x,this.y,g);y.layer=d;let b=e[t];void 0===b&&(b=e[t]=[]),b.push({featureIndex:c,feature:y,intersectionZ:f})}}lookupSymbolFeatures(e,t,n,r,i,o,a,s){const l={};this.loadVTLayers();const c=di(i);for(const u of e)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:r,featureIndex:u,layoutVertexArrayOffset:0},c,o,a,s,t);return l}loadFeature(e){const{featureIndex:t,sourceLayerIndex:n}=e;this.loadVTLayers();const r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[t])return i[t];const o=this.vtLayers[r].feature(t);return i[t]=o,o}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){let n=e.id;if(this.promoteId){const r="string"==typeof this.promoteId?this.promoteId:this.promoteId[t];null!=r&&(n=e.properties[r]),"boolean"==typeof n&&(n=Number(n))}return n}}function sm(e,t,n,r,i){return F(e,((e,o)=>{const a=t instanceof Oo?t.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function lm(e,t){return t-e}Ki(am,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class cm{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.image=new Nc({width:e,height:t}),this.positions={},this.uploaded=!1}getDash(e,t){const n=this.getKey(e,t);return this.positions[n]}trim(){const e=this.width,t=this.height=z(this.nextRow);this.image.resize({width:e,height:t})}getKey(e,t){return e.join(",")+t}getDashRanges(e,t,n){const r=[];let i=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let l=1;l<e.length;l++){a=!a;const t=e[l];i=s*n,s+=t,o=s*n,r.push({left:i,right:o,isDash:a,zeroLength:0===t})}return r}addRoundDash(e,t,n){const r=t/2;for(let i=-n;i<=n;i++){const t=this.width*(this.nextRow+n+i);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let d;const h=i/n*(r+1);if(a.isDash){const e=r-Math.abs(h);d=Math.sqrt(u*u+e*e)}else d=r-Math.sqrt(u*u+h*h);this.image.data[t+s]=Math.max(0,Math.min(255,d+128))}}}addRegularDash(e,t){for(let s=e.length-1;s>=0;--s){const t=e[s],n=e[s+1];t.zeroLength?e.splice(s,1):n&&n.isDash===t.isDash&&(n.left=t.left,e.splice(s,1))}const n=e[0],r=e[e.length-1];n.isDash===r.isDash&&(n.left=r.left-this.width,r.right=n.right+this.width);const i=this.width*this.nextRow;let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const n=Math.abs(s-a.left),r=Math.abs(s-a.right),l=Math.min(n,r);this.image.data[i+s]=Math.max(0,Math.min(255,(a.isDash?l:-l)+t+128))}}addDash(e,t){const n=this.getKey(e,t);if(this.positions[n])return this.positions[n];const r="round"===t,i=r?7:0,o=2*i+1;if(this.nextRow+o>this.height)return Z("LineAtlas out of space"),null;0===e.length&&e.push(1);let a=0;for(let c=0;c<e.length;c++)e[c]<0&&(Z("Negative value is found in line dasharray, replacing values with 0"),e[c]=0),a+=e[c];if(0!==a){const n=this.width/a,o=this.getDashRanges(e,this.width,n);r?this.addRoundDash(o,n,i):this.addRegularDash(o,"square"===t?.5*n:0)}const s=this.nextRow+i;this.nextRow+=o;const l={tl:[s,i],br:[a,0]};return this.positions[n]=l,l}}Ki(cm,"LineAtlas");const um=1*ep;class dm{constructor(e){const t={},n=[];for(const a in e){const r=e[a],i=t[a]={};for(const e in r.glyphs){const t=r.glyphs[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const o=t.metrics.localGlyph?um:1,a={x:0,y:0,w:t.bitmap.width+2*o,h:t.bitmap.height+2*o};n.push(a),i[e]=a}}const{w:r,h:i}=_h(n),o=new Nc({width:r||1,height:i||1});for(const a in e){const n=e[a];for(const e in n.glyphs){const r=n.glyphs[+e];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const i=t[a][e],s=r.metrics.localGlyph?um:1;Nc.copy(r.bitmap,o,{x:0,y:0},{x:i.x+s,y:i.y+s},r.bitmap)}}this.image=o,this.positions=t}}Ki(dm,"GlyphAtlas");class hm{constructor(e){this.tileID=new fd(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Op(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,t,n,r,i){this.status="parsing",this.data=e,this.collisionBoxArray=new pa;const o=new wf(Object.keys(e.layers).sort()),a=new am(this.tileID,this.promoteId);a.bucketLayerIDs=[];const s={},l=new cm(256,256),c={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:n},u=t.familiesBySource[this.source];for(const x in u){const t=e.layers[x];if(!t)continue;let r=!1,i=!1;for(const e of u[x])"symbol"===e[0].type?r=!0:i=!0;if(!0===this.isSymbolTile&&!r)continue;if(!1===this.isSymbolTile&&!i)continue;1===t.version&&Z(`Vector tile source "${this.source}" layer "${x}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const l=o.encode(x),d=[];for(let e=0;e<t.length;e++){const n=t.feature(e),r=a.getId(n,x);d.push({feature:n,id:r,index:e,sourceLayerIndex:l})}for(const e of u[x]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(pm(e,this.zoom,n),(s[t.id]=t.createBucket({index:a.bucketLayerIDs.length,layers:e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:l,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(d,c,this.tileID.canonical,this.tileTransform),a.bucketLayerIDs.push(e.map((e=>e.id))))}}let d,h,p,f;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=()=>{if(d)return i(d);if(h&&p&&f){const e=new dm(h),t=new Sh(p,f);for(const r in s){const i=s[r];i instanceof sf?(pm(i.layers,this.zoom,n),bp(i,h,e.positions,p,t.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):i.hasPattern&&(i instanceof Cd||i instanceof Tu||i instanceof ed)&&(pm(i.layers,this.zoom,n),i.addFeatures(c,this.tileID.canonical,t.patternPositions,n,this.tileTransform))}this.status="done",i(null,{buckets:A(s).filter((e=>!e.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:l,imageAtlas:t,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}},v=F(c.glyphDependencies,(e=>Object.keys(e).map(Number)));Object.keys(v).length?r.send("getGlyphs",{uid:this.uid,stacks:v},((e,t)=>{d||(d=e,h=t,g())}),void 0,!1,m):h={};const y=Object.keys(c.iconDependencies);y.length?r.send("getImages",{icons:y,source:this.source,tileID:this.tileID,type:"icons"},((e,t)=>{d||(d=e,p=t,g())}),void 0,!1,m):p={};const b=Object.keys(c.patternDependencies);b.length?r.send("getImages",{icons:b,source:this.source,tileID:this.tileID,type:"patterns"},((e,t)=>{d||(d=e,f=t,g())}),void 0,!1,m):f={},g()}}function pm(e,t,n){const r=new _o(t);for(const i of e)i.recalculate(r,n)}class fm{constructor(e){this.entries={},this.scheduler=e}request(e,t,n,r){const i=this.entries[e]=this.entries[e]||{callbacks:[]};if(i.result){const[e,n]=i.result;return this.scheduler?this.scheduler.add((()=>{r(e,n)}),t):r(e,n),()=>{}}return i.callbacks.push(r),i.cancel||(i.cancel=n(((n,r)=>{i.result=[n,r];for(const e of i.callbacks)this.scheduler?this.scheduler.add((()=>{e(n,r)}),t):e(n,r);setTimeout((()=>delete this.entries[e]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((e=>e!==r)),i.callbacks.length||(i.cancel(),delete this.entries[e]))}}}function mm(e,t,n){const r=JSON.stringify(e.request);return e.data&&(this.deduped.entries[r]={result:[null,e.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(t=>{const r=he(e.request,((e,r,i,o)=>{e?t(e):r&&t(null,{vectorTile:n?void 0:new Wu(new gh(r)),rawData:r,cacheControl:i,expires:o})}));return()=>{r.cancel(),t()}}),t)}const gm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class vm{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(1!==r)throw new Error(`Got v${r} data when expected v1.`);const i=gm[15&n];if(!i)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new vm(a,o,i,e)}constructor(e,t=64,n=Float64Array,r){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=gm.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-a%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${n}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+a+s),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return ym(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:o,nodeSize:a}=this,s=[0,i.length-1,0],l=[];for(;s.length;){const c=s.pop()||0,u=s.pop()||0,d=s.pop()||0;if(u-d<=a){for(let a=d;a<=u;a++){const s=o[2*a],c=o[2*a+1];s>=e&&s<=n&&c>=t&&c<=r&&l.push(i[a])}continue}const h=d+u>>1,p=o[2*h],f=o[2*h+1];p>=e&&p<=n&&f>=t&&f<=r&&l.push(i[h]),(0===c?e<=p:t<=f)&&(s.push(d),s.push(h-1),s.push(1-c)),(0===c?n>=p:r>=f)&&(s.push(h+1),s.push(u),s.push(1-c))}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:o}=this,a=[0,r.length-1,0],s=[],l=n*n;for(;a.length;){const c=a.pop()||0,u=a.pop()||0,d=a.pop()||0;if(u-d<=o){for(let n=d;n<=u;n++)_m(i[2*n],i[2*n+1],e,t)<=l&&s.push(r[n]);continue}const h=d+u>>1,p=i[2*h],f=i[2*h+1];_m(p,f,e,t)<=l&&s.push(r[h]),(0===c?e-n<=p:t-n<=f)&&(a.push(d),a.push(h-1),a.push(1-c)),(0===c?e+n>=p:t+n>=f)&&(a.push(h+1),a.push(u),a.push(1-c))}return s}}function ym(e,t,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;bm(e,t,a,r,i,o),ym(e,t,n,r,a-1,1-o),ym(e,t,n,a+1,i,1-o)}function bm(e,t,n,r,i,o){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);bm(e,t,n,Math.max(r,Math.floor(n-s*c/a+u)),Math.min(i,Math.floor(n+(a-s)*c/a+u)),o)}const a=t[2*n+o];let s=r,l=i;for(xm(e,t,r,n),t[2*i+o]>a&&xm(e,t,r,i);s<l;){for(xm(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*r+o]===a?xm(e,t,r,l):(l++,xm(e,t,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function xm(e,t,n,r){wm(e,n,r),wm(t,2*n,2*r),wm(t,2*n+1,2*r+1)}function wm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function _m(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}e.ARRAY_TYPE=us,e.AUTH_ERR_MSG=ye,e.Aabb=il,e.Actor=class{constructor(e,n,r){this.target=e,this.parent=n,this.mapId=r,this.callbacks={},this.cancelCallbacks={},N(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=q()?e:t,this.scheduler=new xf}send(e,t,n,r,i=!1,o){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[a]=n);const s=Y(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:e,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Ji(t,s)},s),{cancel:()=>{n&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(e){const t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[n];delete this.cancelCallbacks[n],e&&e.cancel()}else if(t.mustQueue||q()){const e=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,t)),e&&e.metadata||{type:"message"})}else this.processTask(n,t)}processTask(e,t){if("<response>"===t.type){const n=this.callbacks[e];delete this.callbacks[e],n&&(t.error?n(Qi(t.error)):n(null,Qi(t.data)))}else{const n=Y(this.globalScope)?void 0:[],r=t.hasCallback?(t,r)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Ji(t):null,data:Ji(r,n)},n)}:e=>{},i=Qi(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,i,r);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],i.source)[e[1]](i,r)}else r(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=hd,e.Color=At,e.ColorMode=Xf,e.CullFaceMode=em,e.DEMData=Wf,e.DataConstantProperty=Ao,e.DedupedRequest=fm,e.DepthMode=Gf,e.EXTENT=ss,e.Elevation=class{isDataAvailableAtPoint(e){const t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;const n=t.getSource().maxzoom,r=1<<n,i=Math.floor(e.x),o=Math.floor((e.x-i)*r),a=Math.floor(e.y*r),s=this.findDEMTileFor(new fd(n,i,n,o,a));return!(!s||!s.dem)}getAtPointOrZero(e,t=0){return this.getAtPoint(e,t)||0}getAtPoint(e,t,n=!0){if(this.isUsingMockSource())return null;null==t&&(t=null);const r=this._source();if(!r)return t;if(e.y<0||e.y>1)return t;const i=r.getSource().maxzoom,o=1<<i,a=Math.floor(e.x),s=e.x-a,l=new fd(i,a,i,Math.floor(s*o),Math.floor(e.y*o)),c=this.findDEMTileFor(l);if(!c||!c.dem)return t;const u=c.dem,d=1<<c.tileID.canonical.z,h=(s*d-c.tileID.canonical.x)*u.dim,p=(e.y*d-c.tileID.canonical.y)*u.dim,f=Math.floor(h),m=Math.floor(p);return(n?this.exaggeration():1)*Pn(Pn(u.get(f,m),u.get(f,m+1),p-m),Pn(u.get(f+1,m),u.get(f+1,m+1),p-m),h-f)}getAtTileOffset(e,t,n){const r=1<<e.canonical.z;return this.getAtPointOrZero(new Jl(e.wrap+(e.canonical.x+t/ss)/r,(e.canonical.y+n/ss)/r))}getAtTileOffsetFunc(e,t,n,r){return i=>{const o=this.getAtTileOffset(e,i.x,i.y),a=r.upVector(e.canonical,i.x,i.y);return Ps(a,a,o*r.upVectorScale(e.canonical,t,n).metersToTile),a}}getForTilePoints(e,t,n,r){if(this.isUsingMockSource())return!1;const i=om.create(this,e,r);return!!i&&(t.forEach((e=>{e[2]=this.exaggeration()*i.getElevationAt(e[0],e[1],n)})),!0)}getMinMaxForTile(e){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const n=t.dem.tree,r=t.tileID,i=1<<e.canonical.z-r.canonical.z;let o=e.canonical.x/i-r.canonical.x,a=e.canonical.y/i-r.canonical.y,s=0;for(let l=0;l<e.canonical.z-r.canonical.z&&!n.leaves[s];l++){o*=2,a*=2;const e=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+e,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,n){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=Je,e.EvaluationParameters=_o,e.Event=Xe,e.Evented=Qe,e.FillExtrusionBucket=ed,e.Frustum=rl,e.FrustumCorners=nl,e.GLOBE_RADIUS=sl,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=al,e.GLOBE_ZOOM_THRESHOLD_MIN=ol,e.GlobeSharedBuffers=class{constructor(e){this._createGrid(e),this._createPoles(e)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const e of this._poleSegments)e.destroy();for(const e of this._gridSegments)e.withSkirts.destroy(),e.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const e of this._wireframeSegments)e.destroy()}}_fillGridMeshWithLods(e,t){const n=new Vo,r=new ra,i=[],o=e+1+2,a=t[0]+1,s=t[0]+1+(1+t.length),l=(e,t,n)=>{let r=e===o-1?e-2:0===e?e:e-1;return r+=n?24575:0,[r,t]};for(let c=0;c<o;++c)n.emplaceBack(...l(c,0,!0));for(let c=0;c<a;++c)for(let e=0;e<o;++e)n.emplaceBack(...l(e,c,(0===e||e===o-1)&&!0));for(let c=0;c<t.length;++c){const e=t[c];for(let t=0;t<o;++t)n.emplaceBack(...l(t,e,!0))}for(let c=0;c<t.length;++c){const e=r.length,a=t[c]+1+2,l=new ra;for(let n=0;n<a-1;n++){const e=n===a-2,i=e?o*(s-t.length+c-n):o;for(let t=0;t<o-1;t++){const a=n*o+t;0===n||e||0===t||t===o-2?(l.emplaceBack(a+1,a,a+i),l.emplaceBack(a+i,a+i+1,a+1)):(r.emplaceBack(a+1,a,a+i),r.emplaceBack(a+i,a+i+1,a+1))}}const u=as.simpleSegment(0,e,n.length,r.length-e);for(let t=0;t<l.uint16.length;t+=3)r.emplaceBack(l.uint16[t],l.uint16[t+1],l.uint16[t+2]);const d=as.simpleSegment(0,e,n.length,r.length-e);i.push({withoutSkirts:u,withSkirts:d})}return{vertices:n,indices:r,segments:i}}_createGrid(e){const t=this._fillGridMeshWithLods(cl,ul);this._gridSegments=t.segments,this._gridBuffer=e.createVertexBuffer(t.vertices,el.members),this._gridIndexBuffer=e.createIndexBuffer(t.indices,!0)}_createPoles(e){const t=new ra;for(let i=0;i<=cl;i++)t.emplaceBack(0,i+1,i+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);const n=new sa,r=new sa;this._poleSegments=[];for(let i=0,o=0;i<ol;i++){const e=360/(1<<i);n.emplaceBack(0,-sl,0,.5,0),r.emplaceBack(0,-sl,0,.5,1);for(let t=0;t<=cl;t++){const i=t/cl,o=Pn(0,e,i),[a,s,l]=Sl(jl,Nl,o,sl);n.emplaceBack(a,s,l,i,0),r.emplaceBack(a,s,l,i,1)}this._poleSegments.push(as.simpleSegment(o,0,66,64)),o+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(n,Js,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(r,Js,!1)}getGridBuffers(e,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}getPoleBuffers(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}getWirefameBuffers(e,t){if(!this._wireframeSegments){const t=new ca,n=cl,r=n+1+2,i=1;this._wireframeSegments=[];for(let e=0,o=0;e<ul.length;e++){const a=ul[e];for(let e=i;e<a+i;e++)for(let o=i;o<n+i;o++){const n=e*r+o;t.emplaceBack(n,n+1),t.emplaceBack(n,n+r),t.emplaceBack(n,n+r+1)}const s=a*n*3;this._wireframeSegments.push(as.simpleSegment(0,o,(a+1)*r,s)),o+=s}this._wireframeIndexBuffer=e.createIndexBuffer(t)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},e.GlyphManager=np,e.ImagePosition=Eh,e.KDBush=vm,e.LivePerformanceUtils=Fe,e.LngLat=Ul,e.LngLatBounds=ls,e.LocalGlyphMode=tp,e.MAX_MERCATOR_LATITUDE=Yl,e.MercatorCoordinate=Jl,e.ONE_EM=Nd,e.OverscaledTileID=fd,e.PerformanceMarkers=Be,e.Point=y,e.Properties=Lo,e.RGBAImage=Bc,e.Ray=tl,e.RequestManager=class{constructor(e,t,n){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",d,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!be(e))return e;const n=Se(e);return n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!be(e))return e;const n=Se(e);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||t)}normalizeSourceURL(e,t,n,r){if(!be(e))return e;const i=Se(e);return i.path=`/v4/${i.authority}.json`,i.params.push("secure"),n&&i.params.push(`language=${n}`),r&&i.params.push(`worldview=${r}`),this._makeAPIURL(i,this._customAccessToken||t)}normalizeSpriteURL(e,t,n,r){const i=Se(e);return be(e)?(i.path=`/styles/v1${i.path}/sprite${t}${n}`,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=`${t}${n}`,Ce(i))}normalizeTileURL(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!be(e))return e;const r=Se(e);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||n&&"raster"!==r.authority&&512===n?"@2x":""}${o.supported?".webp":"$1"}`),"raster"===r.authority?r.path=`/${i.RASTER_URL_PREFIX}${r.path}`:(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path=`/${i.TILE_URL_VERSION}${r.path}`);const a=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(r.params)||i.ACCESS_TOKEN;return i.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&r.params.push(`sku=${this._skuToken}`),this._makeAPIURL(r,a)}canonicalizeTileURL(e,t){const n=Se(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;let r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+=`raster/${n.path.replace(`/${i.RASTER_URL_PREFIX}/`,"")}`:r+=`tiles/${n.path.replace(`/${i.TILE_URL_VERSION}/`,"")}`;let o=n.params;return t&&(o=o.filter((e=>!e.match(/^access_token=/)))),o.length&&(r+=`?${o.join("&")}`),r}canonicalizeTileset(e,t){const n=!!t&&be(t),r=[];for(const i of e.tiles||[])xe(i)?r.push(this.canonicalizeTileURL(i,n)):r.push(i);return r}_makeAPIURL(e,t){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",r=Se(i.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==r.path&&(e.path=`${r.path}${e.path}`),!i.REQUIRE_ACCESS_TOKEN)return Ce(e);if(t=t||i.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if("s"===t[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return e.params=e.params.filter((e=>-1===e.indexOf("access_token"))),e.params.push(`access_token=${t||""}`),Ce(e)}},e.ResourceType=le,e.SegmentVector=as,e.SourceCache=tm,e.StencilMode=Yf,e.StructArrayLayout1ui2=ua,e.StructArrayLayout2f1f2i16=ea,e.StructArrayLayout2i4=Vo,e.StructArrayLayout2ui4=ca,e.StructArrayLayout3f12=na,e.StructArrayLayout3ui6=ra,e.StructArrayLayout4i8=$o,e.StructArrayLayout5f20=sa,e.Texture=yf,e.Tile=Df,e.Transitionable=So,e.Uniform1f=ja,e.Uniform1i=class extends za{constructor(e){super(e),this.current=0}set(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},e.Uniform2f=class extends za{constructor(e){super(e),this.current=[0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}},e.Uniform3f=class extends za{constructor(e){super(e),this.current=[0,0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}},e.Uniform4f=Na,e.UniformColor=Ba,e.UniformMatrix2f=class extends za{constructor(e){super(e),this.current=Ua}set(e,t,n){if(this.fetchUniformLocation(e,t))for(let r=0;r<4;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}},e.UniformMatrix3f=class extends za{constructor(e){super(e),this.current=Va}set(e,t,n){if(this.fetchUniformLocation(e,t))for(let r=0;r<9;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},e.UniformMatrix4f=class extends za{constructor(e){super(e),this.current=Fa}set(e,t,n){if(this.fetchUniformLocation(e,t)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let e=1;e<16;e++)if(n[e]!==this.current[e]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}},e.UnwrappedTileID=pd,e.ValidationError=ni,e.VectorTileFeature=qu,e.VectorTileWorkerSource=class extends Qe{constructor(e,t,n,r,i){super(),this.actor=e,this.layerIndex=t,this.availableImages=n,this.loadVectorData=i||mm,this.loading={},this.loaded={},this.deduped=new fm(e.scheduler),this.isSpriteLoaded=r,this.scheduler=e.scheduler}loadTile(e,t){const n=e.uid,r=e&&e.request,i=r&&r.collectResourceTiming,o=this.loading[n]=new hm(e);o.abort=this.loadVectorData(e,((a,s)=>{const l=!this.loading[n];if(delete this.loading[n],l||a||!s)return o.status="done",l||(this.loaded[n]=o),t(a);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new Wu(new gh(c));const d=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,n)=>{if(e||!n)return t(e);const o={};if(i){const e=$e(r);e.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(e)))}t(null,P({rawTileData:c.slice(0)},n,u,o))}))};this.isSpriteLoaded?d():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(d,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):d()})),this.loaded=this.loaded||{},this.loaded[n]=o}))}reloadTile(e,t){const n=this.loaded,r=e.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain,o.projection=e.projection,o.tileTransform=Op(e.tileID.canonical,e.projection);const a=(e,n)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),t(e,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(e,t){const n=e.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),t()}removeTile(e,t){const n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()}},e.WritingMode=Ch,e.ZoomDependentExpression=Jr,e.add=Ts,e.addDynamicAttributes=nf,e.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=a*u-s*c,e[1]=i*c-r*u,e[2]=r*s-i*a,e[3]=s*l-o*u,e[4]=n*u-i*l,e[5]=i*o-n*s,e[6]=o*c-a*l,e[7]=r*l-n*c,e[8]=n*a-r*o,e},e.asyncAll=O,e.bezier=S,e.bindAll=N,e.boundsAttributes=Af,e.bufferConvexPolygon=function(e,t){const n=[];for(let r=0;r<e.length;r++){const i=I(r-1,-1,e.length-1),o=I(r+1,-1,e.length-1),a=e[r],s=e[o],l=e[i].sub(a).unit(),c=s.sub(a).unit(),u=c.angleWithSep(l.x,l.y),d=l.add(c).unit().mult(-1*t/Math.sin(u/2));n.push(a.add(d))}return n},e.cacheEntryPossiblyAdded=function(e){se++,se>re&&(e.getActor().send("enforceCacheSizeLimit",ne),se=0)},e.calculateGlobeLabelMatrix=function(e,t){const{x:n,y:r}=e.point,i=Pl(n,r,e.worldSize/e._pixelsPerMercatorPixel,0,0);return ms(i,i,Al(yl(t)))},e.calculateGlobeMatrix=function(e){const{x:t,y:n}=e.point,{lng:r,lat:i}=e._center;return Pl(t,n,e.worldSize,r,i)},e.calculateGlobeMercatorMatrix=function(e){const t=e.pixelsPerMeter,n=t/Wl(1,e.center.lat),r=ps(new Float64Array(16));return gs(r,r,[e.point.x,e.point.y,0]),vs(r,r,[n,n,t]),Float32Array.from(r)},e.circumferenceAtLatitude=$l,e.clamp=T,e.clearTileCache=function(e){if(!ie())return;const n=t.caches.delete(Q);e&&n.catch(e).then((()=>e()))},e.clipLine=Yh,e.clone=function(e){var t=new us(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=U,e.collisionCircleLayout=jd,e.config=i,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new us(16);return us!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=ds,e.createExpression=Yr,e.createLayout=Bo,e.createStyleLayer=function(e){return"custom"===e.type?new ff(e):new vf[e.type](e)},e.cross=zs,e.degToRad=w,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=Rs,e.earthRadius=Bl,e.ease=C,e.easeCubicInOut=E,e.ecefToLatLng=function([e,t,n]){const r=Math.hypot(e,t,n),i=Math.atan2(e,n),o=.5*Math.PI-Math.acos(-t/r);return new Ul(_(i),_(o))},e.emitValidationErrors=$i,e.endsWith=B,e.enforceCacheSizeLimit=function(e){oe(),ee&&ee.then((t=>{t.keys().then((n=>{for(let r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.evaluateSizeForFeature=Vd,e.evaluateSizeForZoom=Ud,e.evaluateVariableOffset=yp,e.evented=yo,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=Ge,e.exported$1=o,e.extend=P,e.extend$1=tt,e.fillExtrusionHeightLift=sd,e.filterObject=V,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,d=r*s,h=i*a,p=i*s,f=i*l,m=o*a,g=o*s,v=o*l;return e[0]=1-d-f,e[1]=u+v,e[2]=h-g,e[3]=0,e[4]=u-v,e[5]=1-c-f,e[6]=p+m,e[7]=0,e[8]=h+g,e[9]=p-m,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=xs,e.furthestTileCorner=function(e){const t=Math.round((e+45+360)%360/90)%4;return k[t]},e.getAABBPointSquareDist=function(e,t,n){let r=0;for(let i=0;i<2;++i){const o=n?n[i]:0;e[i]>o&&(r+=(e[i]-o)*(e[i]-o)),t[i]<o&&(r+=(o-t[i])*(o-t[i]))}return r},e.getAnchorAlignment=Nh,e.getAnchorJustification=xp,e.getBounds=function(e){let t=1/0,n=1/0,r=-1/0,i=-1/0;for(const o of e)t=Math.min(t,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x),i=Math.max(i,o.y);return{min:new y(t,n),max:new y(r,i)}},e.getColumn=J,e.getDefaultExportFromCjs=h,e.getGridMatrix=function(e,t,n,r){const i=t.getNorth(),o=t.getSouth(),a=t.getWest(),s=t.getEast(),l=1<<e.z,c=s-a,u=i-o,d=c/cl,h=-u/ul[n],p=[0,d,0,h,0,0,i,a,0];if(e.z>0){const e=180/r;hs(p,p,[e/c+1,0,0,0,e/u+1,0,-.5*e/d,.5*e/h,1])}return p[2]=l,p[5]=e.x,p[8]=e.y,p},e.getImage=ve,e.getJSON=function(e,t){return de(P(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){const t=Yl-5;e=T(e,-t,t)/t*90;const n=Math.pow(Math.abs(Math.sin(w(e))),3);return Math.round(n*(ul.length-1))},e.getMapSessionAPI=je,e.getPerformanceMeasurement=$e,e.getProjection=Xp,e.getRTLTextPluginStatus=bo,e.getReferrer=ue,e.getTilePoint=function(e,{x:t,y:n},r=0){return new y(((t-r)*e.scale-e.x)*ss,(n*e.scale-e.y)*ss)},e.getTileVec3=function(e,t,n=0){return Cs(((t.x-n)*e.scale-e.x)*ss,(t.y*e.scale-e.y)*ss,Kl(t.z,t.y))},e.getVideo=function(e,n){const r=t.document.createElement("video");r.muted=!0,r.onloadstart=function(){n(null,r)};for(let i=0;i<e.length;i++){const n=t.document.createElement("source");pe(e[i])||(r.crossOrigin="Anonymous"),n.src=e[i],r.appendChild(n)}return{cancel:()=>{}}},e.globeCenterToScreenPoint=function(e){const t=[0,0,0],n=ps(new Float64Array(16));return ms(n,e.pixelMatrix,e.globeMatrix),js(t,t,n),new y(t[0],t[1])},e.globeDenormalizeECEF=Al,e.globeECEFOrigin=function(e,t){const n=[0,0,0];return js(n,n,Ol(yl(t.canonical))),js(n,n,e),n},e.globeMetersToEcef=fl,e.globeNormalizeECEF=Ol,e.globePixelsToTileUnits=function(e,t){return ss/(512*Math.pow(2,e))*Ml(yl(t))},e.globePoleMatrixForTile=function(e,t,n){const r=ps(new Float64Array(16)),i=(t/(1<<e)-.5)*Math.PI*2;return bs(r,n.globeMatrix,i),Float32Array.from(r)},e.globeTileBounds=yl,e.globeTiltAtLngLat=Ll,e.globeToMercatorTransition=Dl,e.globeUseCustomAntiAliasing=function(e,t,n){const r=Dl(n.zoom),i=e.style.map._antialias,o=!!t.extStandardDerivatives,a=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===r&&!i&&!a&&o},e.identity=ps,e.identity$1=qs,e.invert=fs,e.isFullscreen=function(){return!!t.document.fullscreenElement||!!t.document.webkitFullscreenElement},e.isLngLatBehindGlobe=Rl,e.isMapAuthenticated=function(e){return Ne.has(e)},e.isMapboxURL=be,e.isSafariWithAntialiasingBug=function(e){const t=e.navigator?e.navigator.userAgent:null;return!!Y(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=Gl,e.latLngToECEF=Cl,e.len=Us,e.length=Ss,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.lngFromMercatorX=ql,e.loadVectorTile=mm,e.makeRequest=de,e.mapValue=function(e,t,n,r,i){return T((e-t)/(n-t)*(i-r)+r,r,i)},e.mercatorScale=Xl,e.mercatorXfromLng=Zl,e.mercatorYfromLat=Hl,e.mercatorZfromAltitude=Wl,e.mul=_s,e.mul$1=Vs,e.multiply=ms,e.multiply$1=hs,e.multiply$2=Is,e.nextPowerOfTwo=z,e.normalize=Ls,e.normalize$1=Ys,e.normalize$2=Zs,e.number=Pn,e.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*c,e[15]=1,e},e.pbf=Gd,e.perspective=function(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(o=1/(r-i)),e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){const n={};for(let r=0;r<t.length;r++){const i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=wo,e.pointGeometry=g,e.polesInViewport=function(e){const t=ps(new Float64Array(16));ms(t,e.pixelMatrix,e.globeMatrix);const n=[0,dl,0],r=[0,hl,0];return js(n,n,t),js(r,r,t),[n[0]>0&&n[0]<=e.width&&n[1]>0&&n[1]<=e.height&&!Rl(e,new Ul(e.center.lat,90)),r[0]>0&&r[0]<=e.width&&r[1]>0&&r[1]<=e.height&&!Rl(e,new Ul(e.center.lat,-90))]},e.polygonContainsPoint=xc,e.polygonIntersectsBox=wc,e.polygonIntersectsPolygon=dc,e.polygonizeBounds=function(e,t,n=0,r=!0){const i=new y(n,n),o=e.sub(i),a=t.add(i),s=[o,new y(a.x,o.y),a,new y(o.x,a.y)];return r&&s.push(o.clone()),s},e.posAttributes=el,e.postMapLoadEvent=De,e.postPerformanceEvent=Re,e.postTurnstileEvent=Ae,e.potpack=_h,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=_,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:fo,pluginURL:mo}),yo.on("pluginStateChange",e),e},e.removeAuthState=function(e){Ne.delete(e)},e.renderColorRamp=Vc,e.resample=ec,e.rotateX=ys,e.rotateX$1=Gs,e.rotateY=bs,e.rotateY$1=Ks,e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+u*r,e[2]=s*i+d*r,e[3]=l*i+h*r,e[4]=c*i-o*r,e[5]=u*i-a*r,e[6]=d*i-s*r,e[7]=h*i-l*r,e},e.rotateZ$1=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e},e.scale=vs,e.scale$1=$s,e.scale$2=Ps,e.scaleAndAdd=Ds,e.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},e.setCacheLimits=function(e,t){ne=e,re=t},e.setColumn=function(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]},e.setRTLTextPlugin=function(e,t,n=!1){if(fo===co||fo===uo||fo===ho)throw new Error("setRTLTextPlugin cannot be called multiple times.");mo=Ge.resolveURL(e),fo=co,po=t,vo(),n||xo()},e.smoothstep=M,e.spec=et,e.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},e.storeAuthState=function(e,t){t?Ne.add(e):Ne.delete(e)},e.sub=Fs,e.subtract=Ms,e.symbolSize=$d,e.tileAABB=function(e,t,n,r,i,o,a,s,l){if("globe"===l.name)return _l(e,t,new hd(n,r,i));const c=Op({z:n,x:r,y:i},l);return new il([(o+c.x/c.scale)*t,t*(c.y/c.scale),a],[(o+c.x2/c.scale)*t,t*(c.y2/c.scale),s])},e.tileCornersToBounds=kl,e.tileTransform=Op,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},e.transformMat4=js,e.transformMat4$1=Hs,e.transformQuat=Ns,e.transitionTileAABBinECEF=xl,e.translate=gs,e.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=go,e.uniqueId=L,e.updateGlobeVertexNormal=function(e,t,n,r,i){const o=5*t+2;e.float32[o+0]=n,e.float32[o+1]=r,e.float32[o+2]=i},e.validateCustomStyleLayer=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:`layers.${n}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${n}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateFilter=e=>Ui(ki(e)),e.validateFog=e=>Ui(Ri(e)),e.validateLayer=e=>Ui(Mi(e)),e.validateLight=e=>Ui(Di(e)),e.validateSource=e=>Ui(Ai(e)),e.validateStyle=Bi,e.validateTerrain=e=>Ui(Li(e)),e.values=A,e.vectorTile=Lu,e.version=n,e.warnOnce=Z,e.window=t,e.wrap=I})),r(["./shared"],(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){let n="[";for(const r of e)n+=`${t(r)},`;return`${n}]`}let n="{";for(const r of Object.keys(e).sort())n+=`${r}:${t(e[r])},`;return`${n}}`}function n(n){let r="";for(const i of e.refProperties)r+=`/${t(n[i])}`;return r}class r{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,r){for(const n of t)this._layerConfigs[n.id]=n,(this._layers[n.id]=e.createStyleLayer(n)).compileFilter(),this.keyCache[n.id]&&delete this.keyCache[n.id];for(const e of r)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=function(e,t){const r={};for(let o=0;o<e.length;o++){const i=t&&t[e[o].id]||n(e[o]);t&&(t[e[o].id]=i);let a=r[i];a||(a=r[i]=[]),a.push(e[o])}const i=[];for(const n in r)i.push(r[n]);return i}(e.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map((e=>this._layers[e.id])),n=t[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(t)}}}class i{loadTile(t,n){const{uid:r,encoding:i,rawImageData:o,padding:a,buildQuadTree:s}=t,l=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap?this.getImageData(o,a):o;n(null,new e.DEMData(r,l,i,a<1,s))}getImageData(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const n=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}function o(e,t){if(0!==e.length){a(e[0],t);for(var n=1;n<e.length;n++)a(e[n],!t)}}function a(e,t){for(var n=0,r=0,i=0,o=e.length,a=o-1;i<o;a=i++){var s=(e[i][0]-e[a][0])*(e[a][1]+e[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!t&&e.reverse()}var s=e.getDefaultExportFromCjs((function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)o(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)o(t.coordinates[r],n);return t}));const l=e.VectorTileFeature.prototype.toGeoJSON;var c={exports:{}},u=e.pointGeometry,d=e.vectorTile.VectorTileFeature,h=p;function p(e,t){this.options=t||{},this.features=e,this.length=e.length}function f(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}p.prototype.feature=function(e){return new f(this.features[e],this.options.extent)},f.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new u(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},f.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[t,r,n,i]},f.prototype.toGeoJSON=d.prototype.toGeoJSON;var m=e.pbf,g=h;function v(e){var t=new m;return function(e,t){for(var n in e.layers)t.writeMessage(3,y,e.layers[n])}(e,t),t.finish()}function y(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,b,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,E,o[n])}function b(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,x,e),t.writeVarintField(3,n.type),t.writeMessage(4,k,n)}function x(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var l=n.properties[s],c=o[s];if(null!==l){void 0===c&&(r.push(s),o[s]=c=r.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var d=u+":"+l,h=a[d];void 0===h&&(i.push(l),a[d]=h=i.length-1),t.writeVarint(h)}}}function w(e,t){return(t<<3)+(7&e)}function _(e){return e<<1^e>>31}function k(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],c=1;1===r&&(c=l.length),t.writeVarint(w(1,c));for(var u=3===r?l.length-1:l.length,d=0;d<u;d++){1===d&&1!==r&&t.writeVarint(w(2,u-1));var h=l[d].x-i,p=l[d].y-o;t.writeVarint(_(h)),t.writeVarint(_(p)),i+=h,o+=p}3===r&&t.writeVarint(w(7,1))}}function E(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}c.exports=v,c.exports.fromVectorTileJs=v,c.exports.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new g(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return v({layers:n})},c.exports.GeoJSONWrapper=g;var S=e.getDefaultExportFromCjs(c.exports);const C={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},T=Math.fround||(M=new Float32Array(1),e=>(M[0]=+e,M[0]));var M;const I=3,O=5,A=6;class P{constructor(e){this.options=Object.assign(Object.create(C),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:r}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;const o=[];for(let s=0;s<e.length;s++){const t=e[s];if(!t.geometry)continue;const[n,r]=t.geometry.coordinates,i=T(R(n)),a=T(z(r));o.push(i,a,1/0,s,-1,1),this.options.reduce&&o.push(0)}let a=this.trees[r+1]=this._createTree(o);t&&console.timeEnd(i);for(let s=r;s>=n;s--){const e=+Date.now();a=this.trees[s]=this._createTree(this._cluster(a,s)),t&&console.log("z%d: %d clusters in %dms",s,a.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,o],t),a=this.getClusters([-180,r,i,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(R(n),z(o),R(i),z(r)),l=a.data,c=[];for(const u of s){const e=this.stride*u;c.push(l[e+O]>1?D(l,e,this.clusterProps):this.points[l[e+I]])}return c}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.data;if(t*this.stride>=o.length)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o[t*this.stride],o[t*this.stride+1],a),l=[];for(const c of s){const t=c*this.stride;o[t+4]===e&&l.push(o[t+O]>1?D(o,t,this.clusterProps):this.points[o[t+I]])}if(0===l.length)throw new Error(r);return l}getLeaves(e,t,n){const r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/i,c=(n+1+s)/i,u={features:[]};return this._addTileFeatures(r.range((t-s)/i,l,(t+1+s)/i,c),r.data,t,n,i,u),0===t&&this._addTileFeatures(r.range(1-s/i,l,1,c),r.data,i,n,i,u),t===i-1&&this._addTileFeatures(r.range(0,l,s/i,c),r.data,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const o=this.getChildren(t);for(const a of o){const t=a.properties;if(t&&t.cluster?i+t.point_count<=r?i+=t.point_count:i=this._appendLeaves(e,t.cluster_id,n,r,i):i<r?i++:e.push(a),e.length===n)break}return i}_createTree(t){const n=new e.KDBush(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)n.add(t[e],t[e+1]);return n.finish(),n.data=t,n}_addTileFeatures(e,t,n,r,i,o){for(const a of e){const e=a*this.stride,s=t[e+O]>1;let l,c,u;if(s)l=L(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const n=this.points[t[e+I]];l=n.properties;const[r,i]=n.geometry.coordinates;c=R(r),u=z(i)}const d={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(u*i-r))]],tags:l};let h;h=s||this.options.generateId?t[e+I]:this.points[t[e+I]].id,void 0!==h&&(d.id=h),o.features.push(d)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:r,reduce:i,minPoints:o}=this.options,a=n/(r*Math.pow(2,t)),s=e.data,l=[],c=this.stride;for(let u=0;u<s.length;u+=c){if(s[u+2]<=t)continue;s[u+2]=t;const n=s[u],r=s[u+1],d=e.within(s[u],s[u+1],a),h=s[u+O];let p=h;for(const e of d){const n=e*c;s[n+2]>t&&(p+=s[n+O])}if(p>h&&p>=o){let e,o=n*h,a=r*h,f=-1;const m=((u/c|0)<<5)+(t+1)+this.points.length;for(const n of d){const r=n*c;if(s[r+2]<=t)continue;s[r+2]=t;const l=s[r+O];o+=s[r]*l,a+=s[r+1]*l,s[r+4]=m,i&&(e||(e=this._map(s,u,!0),f=this.clusterProps.length,this.clusterProps.push(e)),i(e,this._map(s,r)))}s[u+4]=m,l.push(o/p,a/p,1/0,m,-1,p),i&&l.push(f)}else{for(let e=0;e<c;e++)l.push(s[u+e]);if(p>1)for(const e of d){const n=e*c;if(!(s[n+2]<=t)){s[n+2]=t;for(let e=0;e<c;e++)l.push(s[n+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+O]>1){const r=this.clusterProps[e[t+A]];return n?Object.assign({},r):r}const r=this.points[e[t+I]].properties,i=this.options.map(r);return n&&i===r?Object.assign({},i):i}}function D(e,t,n){return{type:"Feature",id:e[t+I],properties:L(e,t,n),geometry:{type:"Point",coordinates:[(r=e[t],360*(r-.5)),j(e[t+1])]}};var r}function L(e,t,n){const r=e[t+O],i=r>=1e4?`${Math.round(r/1e3)}k`:r>=1e3?Math.round(r/100)/10+"k":r,o=e[t+A],a=-1===o?{}:Object.assign({},n[o]);return Object.assign(a,{cluster:!0,cluster_id:e[t+I],point_count:r,point_count_abbreviated:i})}function R(e){return e/360+.5}function z(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function j(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function N(e,t,n,r){for(var i,o=r,a=n-t>>1,s=n-t,l=e[t],c=e[t+1],u=e[n],d=e[n+1],h=t+3;h<n;h+=3){var p=B(e[h],e[h+1],l,c,u,d);if(p>o)i=h,o=p;else if(p===o){var f=Math.abs(h-a);f<s&&(i=h,s=f)}}o>r&&(i-t>3&&N(e,t,i,r),e[i+2]=o,n-i>3&&N(e,i,n,r))}function B(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((e-n)*a+(t-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=e-n)*a+(s=t-r)*s}function F(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)V(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)V(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)V(e,t[r][i])}(i),i}function V(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function U(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)$(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)$(i[c],s);else if("LineString"===o)Z(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)Z(i[c],s=[],a,!1),e.push(F(l,"LineString",s,t.properties));return}H(i,s,a,!1)}else if("Polygon"===o)H(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<t.geometry.geometries.length;c++)U(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];H(i[c],u,a,!0),s.push(u)}}e.push(F(l,o,s,t.properties))}}function $(e,t){t.push(W(e[0])),t.push(q(e[1])),t.push(0)}function Z(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var l=W(e[s][0]),c=q(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(a+=r?(i*c-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-o,2))),i=l,o=c}var u=t.length-3;t[2]=1,N(t,0,u,n),t[u+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function H(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];Z(e[i],o,n,r),t.push(o)}}function W(e){return e/360+.5}function q(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function G(e,t,n,r,i,o,a,s){if(r/=t,o>=(n/=t)&&a<r)return e;if(a<n||o>=r)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],d=u.geometry,h=u.type,p=0===i?u.minX:u.minY,f=0===i?u.maxX:u.maxY;if(p>=n&&f<r)l.push(u);else if(!(f<n||p>=r)){var m=[];if("Point"===h||"MultiPoint"===h)K(d,m,n,r,i);else if("LineString"===h)Y(d,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===h)J(d,m,n,r,i,!1);else if("Polygon"===h)J(d,m,n,r,i,!0);else if("MultiPolygon"===h)for(var g=0;g<d.length;g++){var v=[];J(d[g],v,n,r,i,!0),v.length&&m.push(v)}if(m.length){if(s.lineMetrics&&"LineString"===h){for(g=0;g<m.length;g++)l.push(F(u.id,h,m[g],u.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),l.push(F(u.id,h,m,u.tags))}}}return l.length?l:null}function K(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function Y(e,t,n,r,i,o,a){for(var s,l,c=X(e),u=0===i?ee:te,d=e.start,h=0;h<e.length-3;h+=3){var p=e[h],f=e[h+1],m=e[h+2],g=e[h+3],v=e[h+4],y=0===i?p:f,b=0===i?g:v,x=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(f-v,2))),y<n?b>n&&(l=u(c,p,f,g,v,n),a&&(c.start=d+s*l)):y>r?b<r&&(l=u(c,p,f,g,v,r),a&&(c.start=d+s*l)):Q(c,p,f,m),b<n&&y>=n&&(l=u(c,p,f,g,v,n),x=!0),b>r&&y<=r&&(l=u(c,p,f,g,v,r),x=!0),!o&&x&&(a&&(c.end=d+s*l),t.push(c),c=X(e)),a&&(d+=s)}var w=e.length-3;p=e[w],f=e[w+1],m=e[w+2],(y=0===i?p:f)>=n&&y<=r&&Q(c,p,f,m),w=c.length-3,o&&w>=3&&(c[w]!==c[0]||c[w+1]!==c[1])&&Q(c,c[0],c[1],c[2]),c.length&&t.push(c)}function X(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function J(e,t,n,r,i,o){for(var a=0;a<e.length;a++)Y(e[a],t,n,r,i,o,!1)}function Q(e,t,n,r){e.push(t),e.push(n),e.push(r)}function ee(e,t,n,r,i,o){var a=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*a),e.push(1),a}function te(e,t,n,r,i,o){var a=(o-n)/(i-n);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function ne(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=re(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(re(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(re(o.geometry[s][c],t));i.push(l)}n.push(F(o.id,a,i,o.tags))}return n}function re(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function ie(e,t){if(e.transformed)return e;var n,r,i,o=1<<e.z,a=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(r=0;r<c.length;r+=2)l.geometry.push(oe(c[r],c[r+1],t,o,a,s));else for(r=0;r<c.length;r++){var d=[];for(i=0;i<c[r].length;i+=2)d.push(oe(c[r][i],c[r][i+1],t,o,a,s));l.geometry.push(d)}}return e.transformed=!0,e}function oe(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function ae(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,se(a,e[s],o,i);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,d=e[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),d>a.maxY&&(a.maxY=d)}return a}function se(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)le(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)le(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)le(a,c[s],e,n,!0,0===s)}if(a.length){var u=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var d in u={},t.tags)u[d]=t.tags[d];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==t.id&&(h.id=t.id),e.features.push(h)}}function le(e,t,n,r,i,o){var a=r*r;if(r>0&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>a)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}(s,o),e.push(s)}}function ce(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)U(n,e.features[r],t,r);else U(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(e,t){var n=t.buffer/t.extent,r=e,i=G(e,1,-1-n,n,0,-1,2,t),o=G(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=G(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=ne(i,1).concat(r)),o&&(r=r.concat(ne(o,-1)))),r}(r,t),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ue(e,t,n){return 32*((1<<e)*n+t)+e}function de(t,n){const r=t.tileID.canonical;if(!this._geoJSONIndex)return n(null,null);const i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return n(null,null);const o=new class{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(t){return new class{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const n of this._feature.geometry)t.push([new e.Point(n[0],n[1])]);return t}{const t=[];for(const n of this._feature.geometry){const r=[];for(const t of n)r.push(new e.Point(t[0],t[1]));t.push(r)}return t}}toGeoJSON(e,t,n){return l.call(this,e,t,n)}}(this._features[t])}}(i.features);let a=S(o);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),n(null,{vectorTile:o,rawData:a.buffer})}ce.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ce.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],l=this.options,c=l.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,d=ue(t,n,r),h=this.tiles[d];if(!h&&(c>1&&console.time("creation"),h=this.tiles[d]=ae(e,t,n,r,l),this.tileCoords.push({z:t,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(h.source=e,i){if(t===l.maxZoom||t===i)continue;var f=1<<i-t;if(n!==Math.floor(o/f)||r!==Math.floor(a/f))continue}else if(t===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,0!==e.length){c>1&&console.time("clipping");var m,g,v,y,b,x,w=.5*l.buffer/l.extent,_=.5-w,k=.5+w,E=1+w;m=g=v=y=null,b=G(e,u,n-w,n+k,0,h.minX,h.maxX,l),x=G(e,u,n+_,n+E,0,h.minX,h.maxX,l),e=null,b&&(m=G(b,u,r-w,r+k,1,h.minY,h.maxY,l),g=G(b,u,r+_,r+E,1,h.minY,h.maxY,l),b=null),x&&(v=G(x,u,r-w,r+k,1,h.minY,h.maxY,l),y=G(x,u,r+_,r+E,1,h.minY,h.maxY,l),x=null),c>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*r),s.push(g||[],t+1,2*n,2*r+1),s.push(v||[],t+1,2*n+1,2*r),s.push(y||[],t+1,2*n+1,2*r+1)}}},ce.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||e>24)return null;var a=1<<e,s=ue(e,t=(t%a+a)%a,n);if(this.tiles[s])return ie(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,c=e,u=t,d=n;!l&&c>0;)c--,u=Math.floor(u/2),d=Math.floor(d/2),l=this.tiles[ue(c,u,d)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,d),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,d,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?ie(this.tiles[s],i):null):null};class he extends e.VectorTileWorkerSource{constructor(e,t,n,r,i){super(e,t,n,r,de),i&&(this.loadGeoJSON=i)}loadData(t,n){const r=t&&t.request,i=r&&r.collectResourceTiming;this.loadGeoJSON(t,((o,a)=>{if(o||!a)return n(o);if("object"!=typeof a)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{s(a,!0);try{if(t.filter){const n=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const r=a.features.filter((e=>n.value.evaluate({zoom:0},e)));a={type:"FeatureCollection",features:r}}this._geoJSONIndex=t.cluster?new P(function({superclusterOptions:t,clusterProperties:n}){if(!n||!t)return t;const r={},i={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(n);for(const l of s){const[t,o]=n[l],a=e.createExpression(o),s=e.createExpression("string"==typeof t?[t,["accumulated"],["get",l]]:t);r[l]=a.value,i[l]=s.value}return t.map=e=>{a.properties=e;const t={};for(const n of s)t[n]=r[n].evaluate(o,a);return t},t.reduce=(e,t)=>{a.properties=t;for(const n of s)o.accumulated=e[n],e[n]=i[n].evaluate(o,a)},t}(t)).load(a.features):function(e,t){return new ce(e,t)}(a,t.geojsonVtOptions)}catch(o){return n(o)}this.loaded={};const l={};if(i){const n=e.getPerformanceMeasurement(r);n&&(l.resourceTiming={},l.resourceTiming[t.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}}))}reloadTile(e,t){const n=this.loaded;return n&&n[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class pe{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:he},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}clearCaches(e,t,n){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],n()}checkIfReady(e,t,n){n()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,n){this.isSpriteLoaded[t]=n;for(const r in this.workerSources[t]){const i=this.workerSources[t][r];for(const t in i)i[t]instanceof e.VectorTileWorkerSource&&(i[t].isSpriteLoaded=n,i[t].fire(new e.Event("isSpriteLoaded")))}}setImages(e,t,n){this.availableImages[e]=t;for(const r in this.workerSources[e]){const n=this.workerSources[e][r];for(const e in n)n[e].availableImages=t}n()}enableTerrain(e,t,n){this.terrain=t,n()}setProjection(t,n){this.projections[t]=e.getProjection(n)}setLayers(e,t,n){this.getLayerIndex(e).replace(t),n()}updateLayers(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}loadTile(t,n,r){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).loadTile(i,r)}loadDEMTile(t,n,r){const i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(i,r)}reloadTile(t,n,r){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).reloadTile(i,r)}abortTile(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}removeTile(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}removeSource(e,t,n){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}loadWorkerSource(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}syncRTLPluginState(t,n,r){try{e.plugin.setState(n);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const n=e.plugin.isParsed();r(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${t}`),n)}}catch(e){r(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t}getWorkerSource(e,t,n){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){const r={send:(t,n,r,i,o,a)=>{this.actor.send(t,n,r,e,o,a)},scheduler:this.actor.scheduler};this.workerSources[e][t][n]=new this.workerSourceTypes[t](r,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])}return this.workerSources[e][t][n]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,n){e.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(e,t,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new pe(self)),pe})),r(["./shared"],(function(e){function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(!t(e[r],n[r]))return!1;return!0}return e===n}var n=r;function r(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===i[t=e&&e.failIfMajorPerformanceCaveat]&&(i[t]=function(e){var t,n=function(e){var t=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}(e);if(!n)return!1;try{t=n.createShader(n.VERTEX_SHADER)}catch(e){return!1}return!(!t||n.isContextLost())&&(n.shaderSource(t,"void main() {}"),n.compileShader(t),!0===n.getShaderParameter(t,n.COMPILE_STATUS))}(t)),i[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var i={};function o(t,n,r){const i=e.window.document.createElement(t);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i}function a(t,n,r){const i=e.window.document.createElementNS("http://www.w3.org/2000/svg",t);for(const e of Object.keys(n))i.setAttributeNS(null,e,n[e]);return r&&r.appendChild(i),i}r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const s=e.window.document&&e.window.document.documentElement.style,l=s&&void 0!==s.userSelect?"userSelect":"WebkitUserSelect";let c;function u(){s&&l&&(c=s[l],s[l]="none")}function d(){s&&l&&(s[l]=c)}function h(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",h,!0)}function p(){e.window.addEventListener("click",h,!0),e.window.setTimeout((()=>{e.window.removeEventListener("click",h,!0)}),0)}function f(e,t){const n=e.getBoundingClientRect();return v(e,n,t)}function m(e,t){const n=e.getBoundingClientRect(),r=[];for(let i=0;i<t.length;i++)r.push(v(e,n,t[i]));return r}function g(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function v(t,n,r){const i=t.offsetWidth===n.width?1:t.offsetWidth/n.width;return new e.Point((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function y(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(e[0]=o*(a=1/a),e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null}function b(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class x extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}hasImage(e){return!!this.getImage(e)}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),r=!1),r}_validateStretch(e,t){if(!e)return!0;let n=0;for(const r of e){if(r[0]<n||r[1]<r[0]||t<r[1])return!1;n=r[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let n=!0;if(!this.isLoaded())for(const r of e)this.images[r]||(n=!1);this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,n){const r={};for(const i of t){this.images[i]||this.fire(new e.Event("styleimagemissing",{id:i}));const t=this.images[i];t?r[i]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,r)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new e.ImagePosition(n,r);this.patterns[t]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture&&this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:n,h:r}=e.potpack(t),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const o in this.patterns){const{bin:t}=this.patterns[o],n=t.x+1,r=t.y+1,a=this.images[o].data,s=a.width,l=a.height;e.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r},{width:s,height:l}),e.RGBAImage.copy(a,i,{x:0,y:l-1},{x:n,y:r-1},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r+l},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:s-1,y:0},{x:n-1,y:r},{width:1,height:l}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:n+s,y:r},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];b(e)&&this.updateImage(t,e)}}}const w=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,n){return function([t,n,r]){const i=e.degToRad(n+90),o=e.degToRad(r);return{x:t*Math.cos(i)*Math.sin(o),y:t*Math.sin(i)*Math.sin(o),z:t*Math.cos(o),azimuthal:n,polar:r}}(t.expression.evaluate(n))}interpolate(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r),azimuthal:e.number(t.azimuthal,n.azimuthal,r),polar:e.number(t.polar,n.polar,r)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)});class _ extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(w),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,n={}){if(!this._validate(e.validateLight,t,n))for(const r in t){const n=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-11),n):this._transitionable.setValue(r,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const k=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)});let E=class extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(k),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(t){for(const n in t){const r=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}};function S(t,n,r,i){const o=e.smoothstep(45,65,r),[a,s]=C(t,i),l=e.length(n);let c=1-Math.min(1,Math.exp((l-a)/(s-a)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*o*t.alpha}function C(e,t){const n=.5/Math.tan(.5*t);return[e.range[0]+n,e.range[1]+n]}const T=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])});class M extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(T),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=n}get state(){const t=this._transform,n="globe"===t.projection.name,r=e.globeToMercatorTransition(t.zoom),i=this.properties.get("range"),o=[.5,3];return{range:n?[e.number(o[0],i[0],r),e.number(o[1],i[1],r)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,n={}){if(!this._validate(e.validateFog,t,n)){for(const n of Object.keys(e.spec.fog))t&&void 0===t[n]&&(t[n]=e.spec.fog[n].default);for(const n in t){const r=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*n.a}getOpacityAtLatLng(t,n){return this._transform.projection.supportsFog?function(t,n,r){const i=e.MercatorCoordinate.fromLngLat(n),o=r.elevation?r.elevation.getAtPointOrZero(i):0,a=[i.x,i.y,o];return e.transformMat4(a,a,r.mercatorFogMatrix),S(t,a,r.pitch,r._fov)}(this.state,t,n):0}getFovAdjustedRange(e){return this._transform.projection.supportsFog?C(this.state,e):[0,1]}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class I{constructor(t,n){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const r=this.workerPool.acquire(this.id);for(let e=0;e<r.length;e++){const t=new I.Actor(r[e],n,this.id);t.name=`Worker ${e}`,this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(t,n,r){e.asyncAll(this.actors,((e,r)=>{e.send(t,n,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove()})),this.actors=[],this.workerPool.release(this.id)}}function O(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}I.Actor=e.Actor;class A{constructor(e,t,n,r){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,r)}static createFromScreenPoints(t,n){let r,i;if(t instanceof e.Point||"number"==typeof t[0]){const o=e.Point.convert(t);r=[o],i=n.isPointAboveHorizon(o)}else{const o=e.Point.convert(t[0]),a=e.Point.convert(t[1]);r=[o,a],i=e.polygonizeBounds(o,a).every((e=>n.isPointAboveHorizon(e)))}return new A(r,n.getCameraPoint(),i,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}bufferedCameraGeometryGlobe(t){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,t),o=this.cameraPoint.clone();switch(3*((o.y>n.y)+(o.y>r.y))+((o.x>n.x)+(o.x>r.x))){case 0:i[0]=o,i[4]=o.clone();break;case 1:i.splice(1,0,o);break;case 2:i[1]=o;break;case 3:i.splice(4,0,o);break;case 5:i.splice(2,0,o);break;case 6:i[3]=o;break;case 7:i.splice(3,0,o);break;case 8:i[2]=o}return i}containsTile(t,n,r,i=0){const o=t.queryPadding/n._pixelsPerMercatorPixel+1,a=r?this._bufferedCameraMercator(o,n):this._bufferedScreenMercator(o,n);let s=t.tileID.wrap+(a.unwrapped?i:0);const l=a.polygon.map((n=>e.getTilePoint(t.tileTransform,n,s)));if(!e.polygonIntersectsBox(l,0,0,e.EXTENT,e.EXTENT))return;s=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);const c=this.screenGeometryMercator.polygon.map((n=>e.getTileVec3(t.tileTransform,n,s))),u=c.map((t=>new e.Point(t[0],t[1]))),d=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),h=e.getTileVec3(t.tileTransform,d,s),p=c.map((t=>{const n=e.sub(t,t,h);return e.normalize(n,n),new e.Ray(h,n)})),f=O(t,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:p,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(m=e.getBounds(l),m.min.x=e.clamp(m.min.x,0,e.EXTENT),m.min.y=e.clamp(m.min.y,0,e.EXTENT),m.max.x=e.clamp(m.max.x,0,e.EXTENT),m.max.y=e.clamp(m.max.y,0,e.EXTENT),m),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:f};var m}_bufferedScreenMercator(e,t){const n=L(e);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{let r;return r="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._screenRaycastCache[n]=r,r}}_bufferedCameraMercator(e,t){const n=L(e);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{let r;return r="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._cameraRaycastCache[n]=r,r}}_projectAndResample(t,n){const r=function(t,n){const r=e.multiply([],n.pixelMatrix,n.globeMatrix),i=[0,-e.GLOBE_RADIUS,0,1],o=[0,e.GLOBE_RADIUS,0,1],a=[0,0,0,1];e.transformMat4$1(i,i,r),e.transformMat4$1(o,o,r),e.transformMat4$1(a,a,r);const s=new e.Point(i[0]/i[3],i[1]/i[3]),l=new e.Point(o[0]/o[3],o[1]/o[3]),c=e.polygonContainsPoint(t,s)&&i[3]<a[3],u=e.polygonContainsPoint(t,l)&&o[3]<a[3];if(!c&&!u)return null;const d=function(e,t,n){for(let r=1;r<e.length;r++){const i=D(t.pointCoordinate3D(e[r-1]).x),o=D(t.pointCoordinate3D(e[r]).x);if(n<0){if(i<o)return{idx:r,t:-i/(o-1-i)}}else if(o<i)return{idx:r,t:(1-i)/(o+1-i)}}return null}(t,n,c?-1:1);if(!d)return null;const{idx:h,t:p}=d;let f=h>1?P(t.slice(0,h),n):[],m=h<t.length?P(t.slice(h),n):[];f=f.map((t=>new e.Point(D(t.x),t.y))),m=m.map((t=>new e.Point(D(t.x),t.y)));const g=[...f];0===g.length&&g.push(m[m.length-1]);const v=e.number(g[g.length-1].y,(0===m.length?f[0]:m[0]).y,p);let y;return y=c?[new e.Point(0,v),new e.Point(0,0),new e.Point(1,0),new e.Point(1,v)]:[new e.Point(1,v),new e.Point(1,1),new e.Point(0,1),new e.Point(0,v)],g.push(...y),0===m.length?g.push(f[0]):g.push(...m),{polygon:g.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:!1}}(t,n);if(r)return r;const i=function(t,n){let r=!1,i=-1/0,o=0;for(let e=0;e<t.length-1;e++)t[e].x>i&&(i=t[e].x,o=e);for(let e=0;e<t.length-1;e++){const n=(o+e)%(t.length-1),i=t[n],a=t[n+1];Math.abs(i.x-a.x)>.5&&(i.x<a.x?(i.x+=1,0===n&&(t[t.length-1].x+=1)):(a.x+=1,n+1===t.length-1&&(t[0].x+=1)),r=!0)}const a=e.mercatorXfromLng(n.center.lng);return r&&a<Math.abs(a-1)&&t.forEach((e=>{e.x-=1})),{polygon:t,unwrapped:r}}(P(t,n).map((t=>new e.Point(D(t.x),t.y))),n);return{polygon:i.polygon.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:i.unwrapped}}}function P(t,n){return e.resample(t,(e=>{const t=n.pointCoordinate3D(e);e.x=t.x,e.y=t.y}),1/256)}function D(e){return e<0?1+e%1:e%1}function L(e){return 100*e|0}function R(t,n,r,i,o){const a=function(r,i){if(r)return o(r);if(i){t.url&&i.tiles&&t.tiles&&delete t.tiles;const r=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(r.vectorLayers=i.vector_layers,r.vectorLayerIds=r.vectorLayers.map((e=>e.id))),r.tiles=n.canonicalizeTileset(r,t.url),o(null,r)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url,null,r,i),e.ResourceType.Source),a):e.exported.frame((()=>a(null,t)))}class z{constructor(t,n,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<o&&t.y>=i&&t.y<a}}class j{constructor(e,t,n){this.context=e;const r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const N={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class B{constructor(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}setVertexAttribPointers(e,t,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[N[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class F{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class V extends F{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class U extends F{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class $ extends F{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Z extends F{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class H extends F{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class W extends F{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class q extends F{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class G extends F{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class K extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class Y extends F{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class X extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class J extends F{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Q extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class ee extends F{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class te extends F{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class ne extends F{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class re extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class ie extends F{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class oe extends F{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}let ae,se=class extends F{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}};class le extends F{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class ce extends F{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class ue extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class de extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class he extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class pe extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class fe extends F{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class me extends F{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class ge extends F{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class ve extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class ye extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class be extends F{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class xe extends be{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class we extends be{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class _e extends we{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ke{constructor(e,t,n,r){this.context=e,this.width=t,this.height=n;const i=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new xe(e,i),r&&(this.depthAttachment=new we(e,i))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Ee{constructor(e,t=!1){if(this.gl=e,this.isWebGL2=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),t){const t=e;this.extVertexArrayObject={createVertexArrayOES:t.createVertexArray.bind(e),deleteVertexArrayOES:t.deleteVertexArray.bind(e),bindVertexArrayOES:t.bindVertexArray.bind(e)}}this.clearColor=new V(this),this.clearDepth=new U(this),this.clearStencil=new $(this),this.colorMask=new Z(this),this.depthMask=new H(this),this.stencilMask=new W(this),this.stencilFunc=new q(this),this.stencilOp=new G(this),this.stencilTest=new K(this),this.depthRange=new Y(this),this.depthTest=new X(this),this.depthFunc=new J(this),this.blend=new Q(this),this.blendFunc=new ee(this),this.blendColor=new te(this),this.blendEquation=new ne(this),this.cullFace=new re(this),this.cullFaceSide=new ie(this),this.frontFace=new oe(this),this.program=new se(this),this.activeTexture=new le(this),this.viewport=new ce(this),this.bindFramebuffer=new ue(this),this.bindRenderbuffer=new de(this),this.bindTexture=new he(this),this.bindVertexBuffer=new pe(this),this.bindElementBuffer=new fe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new me(this),this.pixelStoreUnpack=new ge(this),this.pixelStoreUnpackPremultiplyAlpha=new ve(this),this.pixelStoreUnpackFlipY=new ye(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),t||(this.extTextureHalfFloat=e.getExtension("OES_texture_half_float")),(t||this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t||e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new j(this,e,t)}createVertexBuffer(e,t,n){return new B(this,e,t,n)}createRenderbuffer(e,t,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,n){return new ke(this,e,t,n)}clear({color:e,depth:t,stencil:n}){const r=this.gl;let i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==n&&(i|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),r.clear(i)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(n){t(n.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Se extends e.Evented{constructor(t,n,r,i){if(super(),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(n,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));const n=Array.isArray(this.map._language)?this.map._language.join():this.map._language,r=this.map._worldview;this._tileJSONRequest=R(this._options,this.map._requestManager,n,r,((i,o)=>{this._tileJSONRequest=null,this._loaded=!0,i?(n&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${n}`),r&&2!==r.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${r}`),this.fire(new e.ErrorEvent(i))):o&&(e.extend(this,o),o.bounds&&(this.tileBounds=new z(o.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(o.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(i)}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}loadTile(t,n){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",i,o.bind(this));else if(t.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",i,o.bind(this),void 0,!0);else{const n=e.loadVectorTile.call({deduped:this._deduped},i,((e,n)=>{e||!n?o.call(this,e):(i.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",i,o.bind(this),void 0,!0))}),!0);t.request={cancel:n}}function o(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Ce extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},n),e.extend(this,e.pick(n,["url","scheme","tileSize"]))}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=R(this._options,this.map._requestManager,null,null,((n,r)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new e.ErrorEvent(n)):r&&(e.extend(this,r),r.bounds&&(this.tileBounds=new z(r.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(r.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(n)}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const r=e.exported.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),((r,i,o,a)=>(delete t.request,t.aborted?(t.state="unloaded",n(null)):r?(t.state="errored",n(r)):i?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:a}),t.setTexture(i,this.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),void n(null)):n(null))))}static loadTileData(e,t,n){e.setTexture(t,n)}static unloadTileData(e,t){e.texture&&t.saveTileTexture(e.texture)}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Te(t,n,r,i,o,a,s,l){const c=[t,r,o,n,i,a,1,1,1],u=[s,l,1],d=e.adjoint([],c),[h,p,f]=e.transformMat3(u,u,e.transpose(d,d));return e.multiply$1(c,[h,0,0,0,p,0,0,0,f],c)}class Me extends e.Evented{constructor(e,t,n,r){super(),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=t,this._dirty=!1}load(t,n){this._loaded=n||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((n,r)=>{if(this._imageRequest=null,this._loaded=!0,n)this.fire(new e.ErrorEvent(n));else if(r){const{HTMLImageElement:n}=e.window;this.image=r instanceof n?e.exported.getImageData(r):r,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const n=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const e of t)n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y);const a=Math.max(i-n,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((n+i)/2*l),Math.floor((r+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(t){for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}if(this._boundsArray)return;const n=e.tileTransform(this.tileID,this.map.transform.projection),[r,i,o,a]=this.coordinates.map((t=>{const r=n.projection.project(t[0],t[1]);return e.getTilePoint(n,r)._round()}));this.perspectiveTransform=function(t,n,r,i,o,a,s,l,c,u){const d=Te(0,0,t,0,0,n,t,n),h=Te(r,i,o,a,s,l,c,u);return e.multiply$1(h,e.adjoint(d,d),h),[h[6]/h[8]*t/e.EXTENT,h[7]/h[8]*n/e.EXTENT]}(this.width,this.height,r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y);const s=this._boundsArray=new e.StructArrayLayout4i8;s.emplaceBack(r.x,r.y,0,0),s.emplaceBack(i.x,i.y,e.EXTENT,0),s.emplaceBack(a.x,a.y,0,e.EXTENT),s.emplaceBack(o.x,o.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(s,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,n=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ie={vector:Se,raster:Ce,"raster-dem":class extends Ce{constructor(t,n,r,i){super(t,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(t,n){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,o,a,s){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:a,expires:s});const n=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap&&(null==ae&&(ae=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),ae),r=1-(o.width-e.prevPowerOfTwo(o.width))/2;r<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=n?o:e.exported.getImageData(o,r),c={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:r};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",c,i.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(t){const n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?t.wrap-1:t.wrap,a=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=e.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const t=e.extend({},this.workerOptions),n=this._data;"string"==typeof n?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(n),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(n),this._pendingLoad=this.actor.send(`${this.type}.loadData`,t,((t,n)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else{const t={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(t.resourceTiming=n.resourceTiming[this.id]),this.fire(new e.Event("data",t)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(t,n){const r=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(r,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((e,i)=>(delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(i,this.map.painter,"reloadTile"===r),n(null)))),void 0,"loadTile"===r)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Me{constructor(e,t,n,r){super(e,t,n,r),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const n of t.urls)this.urls.push(this.map._requestManager.transformRequest(n,e.ResourceType.Source).url);e.getVideo(this.urls,((t,n)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Me,canvas:class extends Me{constructor(t,n,r,i){super(t,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}},custom:class extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.type="custom",this._dataType="raster",this._dispatcher=r,this._implementation=n,this.setEventedParent(i),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new e.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new z(this._implementation.bounds,this.minzoom,this.maxzoom)),n.update=this._update.bind(this),n.clearTiles=this._clearTiles.bind(this),n.coveringTiles=this._coveringTiles.bind(this),e.extend(this,e.pick(n,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e)}hasTile(e){if(this._implementation.hasTile){const{x:t,y:n,z:r}=e.canonical;return this._implementation.hasTile({x:t,y:n,z:r})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const{x:r,y:i,z:o}=t.tileID.canonical,a=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:r,y:i,z:o},{signal:a.signal})).then(function(r){return delete t.request,t.aborted?(t.state="unloaded",n(null)):void 0===r?(t.state="errored",n(null)):null===r?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(r)?(this.loadTileData(t,r),t.state="loaded",void n(null)):(t.state="errored",n(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch((e=>{20!==e.code&&(t.state="errored",n(e))})),t.request.cancel=()=>a.abort()}loadTileData(e,t){Ce.loadTileData(e,t,this._map.painter)}unloadTileData(e){Ce.unloadTileData(e,this._map.painter)}unloadTile(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){const{x:t,y:n,z:r}=e.tileID.canonical;this._implementation.unloadTile({x:t,y:n,z:r})}t()}abortTile(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Oe=function(t,n,r,i){const o=new Ie[n.type](t,n,r,i);if(o.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${o.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],o),o};function Ae(t,n){const r=e.identity([]);return e.scale(r,r,[.5*t.width,.5*-t.height,1]),e.translate(r,r,[1,-1,0]),e.multiply(r,r,t.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(r)}function Pe(e,t,n,r,i,o,a,s=!1){const l=e.tilesIn(r,a,s);l.sort(Le);const c=[];for(const d of l)c.push({wrappedTileID:d.tile.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(t,n,e._state,d,i,o,Ae(e.transform,d.tile.tileID),s)});const u=function(e){const t={},n={};for(const r of e){const e=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in e){const r=e[n],i=o[n]=o[n]||{},a=t[n]=t[n]||[];for(const e of r)i[e.featureIndex]||(i[e.featureIndex]=!0,a.push(e))}}return t}(c);for(const d in u)u[d].forEach((t=>{const n=t.feature,r=n.layer;r&&"background"!==r.type&&"sky"!==r.type&&(n.source=r.source,r["source-layer"]&&(n.sourceLayer=r["source-layer"]),n.state=void 0!==n.id?e.getFeatureState(r["source-layer"],n.id):{})}));return u}function De(e,t){const n=e.getRenderableIds().map((t=>e.getTileByID(t))),r=[],i={};for(let o=0;o<n.length;o++){const e=n[o],a=e.tileID.canonical.key;i[a]||(i[a]=!0,e.querySourceFeatures(r,t))}return r}function Le(e,t){const n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function Re(){return null!=po.workerClass?new po.workerClass:new e.window.Worker(po.workerUrl)}const ze="mapboxgl_preloaded_worker_pool";class je{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<je.workerCount;)this.workers.push(new Re);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[ze]}numActive(){return Object.keys(this.active).length}}let Ne;function Be(){return Ne||(Ne=new je),Ne}function Fe(t,n){const r={};for(const e in t)"ref"!==e&&(r[e]=t[e]);return e.refProperties.forEach((e=>{e in n&&(r[e]=n[e])})),r}function Ve(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=Fe(e[n],t[e[n].ref]));return e}je.workerCount=2;const Ue={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function $e(e,t,n){n.push({command:Ue.addSource,args:[e,t[e]]})}function Ze(e,t,n){t.push({command:Ue.removeSource,args:[e]}),n[e]=!0}function He(e,t,n,r){Ze(e,n,r),$e(e,t,n)}function We(e,n,r){let i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;return!0}function qe(e,n,r,i,o,a){let s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function Ge(e){return e.id}function Ke(e,t){return e[t.id]=t,e}class Ye{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let n=1,r=this._distances[n];const i=t*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,a=this._distances[o],s=r-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}class Xe{constructor(e,t,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}_insertBoxCell(e,t,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(e,t,n,r,i,o){this.circleCells[i].push(o)}_query(e,t,n,r,i,o){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];const a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(let e=0;e<this.boxKeys.length;e++)a.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],r=this.circles[3*e+2];a.push({key:this.circleKeys[e],x1:t-r,y1:n-r,x2:t+r,y2:n+r})}return o?a.filter(o):a}return this._forEachCell(e,t,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a}_queryCircle(e,t,n,r,i){const o=e-n,a=e+n,s=t-n,l=t+n;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?c.length>0:c}query(e,t,n,r,i){return this._query(e,t,n,r,!1,i)}hitTest(e,t,n,r,i){return this._query(e,t,n,r,!0,i)}hitTestCircle(e,t,n,r){return this._queryCircle(e,t,n,!0,r)}_queryCell(e,t,n,r,i,o,a,s){const l=a.seenUids,c=this.boxCells[i];if(null!==c){const i=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(e<=i[c+2]&&t<=i[c+3]&&n>=i[c+0]&&r>=i[c+1]&&(!s||s(this.boxKeys[u]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:i[c],y1:i[c+1],x2:i[c+2],y2:i[c+3]})}}}const u=this.circleCells[i];if(null!==u){const i=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(i[u],i[u+1],i[u+2],e,t,n,r)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return o.push(!0),!0;{const e=i[u],t=i[u+1],n=i[u+2];o.push({key:this.circleKeys[c],x1:e-n,y1:t-n,x2:e+n,y2:t+n})}}}}}_queryCellCircle(e,t,n,r,i,o,a,s){const l=a.circle,c=a.seenUids,u=this.boxCells[i];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const n=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!s||s(this.boxKeys[t])))return o.push(!0),!0}}const d=this.circleCells[i];if(null!==d){const e=this.circles;for(const t of d)if(!c.circle[t]){c.circle[t]=!0;const n=3*t;if(this._circlesCollide(e[n],e[n+1],e[n+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[t])))return o.push(!0),!0}}}_forEachCell(e,t,n,r,i,o,a,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(n),d=this._convertToYCellCoord(r);for(let h=l;h<=u;h++)for(let l=c;l<=d;l++)if(i.call(this,e,t,n,r,this.xCellCount*l+h,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,r,i,o){const a=r-e,s=i-t,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(e,t,n,r,i,o,a){const s=(o-r)/2,l=Math.abs(e-(r+s));if(l>s+n)return!1;const c=(a-i)/2,u=Math.abs(t-(i+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const d=l-s,h=u-c;return d*d+h*h<=n*n}}const Je={unknown:0,flipRequired:1,flipNotRequired:2},Qe=Math.tan(85*Math.PI/180);function et(t,n,r,i,o,a,s){const l=e.create();if(r)if("globe"===a.name){const t=e.calculateGlobeLabelMatrix(o,n);e.multiply(l,l,t)}else{const t=y([],s);l[0]=t[0],l[1]=t[1],l[4]=t[2],l[5]=t[3],i||e.rotateZ(l,l,o.angle)}else e.multiply(l,o.labelPlaneMatrix,t);return l}function tt(e,t,n,r,i,o,a){const s=et(e,t,n,r,i,o,a);return"globe"===o.name&&n||(s[2]=s[6]=s[10]=s[14]=0),s}function nt(t,n,r,i,o,a,s){if(r){if("globe"===a.name){const l=et(t,n,r,i,o,a,s);return e.invert(l,l),e.multiply(l,t,l),l}{const n=e.clone(t),r=e.identity([]);return r[0]=s[0],r[1]=s[1],r[4]=s[2],r[5]=s[3],e.multiply(n,n,r),i||e.rotateZ(n,n,-o.angle),n}}return o.glCoordMatrix}function rt(t,n,r,i){const o=[t,n,r,1];r?e.transformMat4$1(o,o,i):ft(o,o,i);const a=o[3];return o[0]/=a,o[1]/=a,o[2]/=a,o}function it(e,t){return Math.min(.5+e/t*.5,1.5)}function ot(e,t){const n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function at(t,n,r,i,o,a,s,l,c,u){const d=r.transform,h=i?t.textSizeData:t.iconSizeData,p=e.evaluateSizeForZoom(h,r.transform.zoom),f="globe"===d.projection.name,m=[256/r.width*2+1,256/r.height*2+1],g=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;g.clear();let v=null;f&&(v=i?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);const y=t.lineVertexArray,b=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,x=r.transform.width/r.transform.height;let w,_=!1;for(let k=0;k<b.length;k++){const i=b.get(k),{numGlyphs:f,writingMode:E}=i;if(E!==e.WritingMode.vertical||_||w===e.WritingMode.horizontal||(_=!0),w=E,(i.hidden||E===e.WritingMode.vertical)&&!_){pt(f,g);continue}_=!1;const S=new e.Point(i.tileAnchorX,i.tileAnchorY);let{x:C,y:T,z:M}=d.projection.projectTilePoint(S.x,S.y,u.canonical);if(c){const[e,t,n]=c(S);C+=e,T+=t,M+=n}const I=[C,T,M,1];if(e.transformMat4$1(I,I,n),!ot(I,m)){pt(f,g);continue}const O=it(r.transform.cameraToCenterDistance,I[3]),A=e.evaluateSizeForFeature(h,p,i),P=s?A/O:A*O,D=rt(C,T,M,o);if(D[3]<=0){pt(f,g);continue}let L={};const R=s?null:c,z=ct(i,P,!1,l,n,o,a,t.glyphOffsetArray,y,g,v,D,S,L,x,R,d.projection,u,s);_=z.useVertical,R&&z.needsFlipping&&(L={}),(z.notEnoughRoom||_||z.needsFlipping&&ct(i,P,!0,l,n,o,a,t.glyphOffsetArray,y,g,v,D,S,L,x,R,d.projection,u,s).notEnoughRoom)&&pt(f,g)}i?(t.text.dynamicLayoutVertexBuffer.updateData(g),v&&t.text.globeExtVertexBuffer.updateData(v)):(t.icon.dynamicLayoutVertexBuffer.updateData(g),v&&t.icon.globeExtVertexBuffer.updateData(v))}function st(e,t,n,r,i,o,a,s,l,c,u,d,h,p,f,m){const{lineStartIndex:g,glyphStartIndex:v,segment:y}=s,b=v+s.numGlyphs,x=g+s.lineLength,w=t.getoffsetX(v),_=t.getoffsetX(b-1),k=ht(e*w,n,r,i,o,a,y,g,x,l,c,u,d,h,!0,p,f,m);if(!k)return null;const E=ht(e*_,n,r,i,o,a,y,g,x,l,c,u,d,h,!0,p,f,m);return E?{first:k,last:E}:null}function lt(t,n,r,i){return t===e.WritingMode.horizontal&&Math.abs(i)>Math.abs(r)?{useVertical:!0}:t===e.WritingMode.vertical?i>0?{needsFlipping:!0}:null:n!==Je.unknown&&function(e,t){return 0===e||Math.abs(t/e)>Qe}(r,i)?n===Je.flipRequired?{needsFlipping:!0}:null:r<0?{needsFlipping:!0}:null}function ct(t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b){const x=n/24,w=t.lineOffsetX*x,_=t.lineOffsetY*x,{lineStartIndex:k,glyphStartIndex:E,numGlyphs:S,segment:C,writingMode:T,flipState:M}=t,I=k+t.lineLength,O=t=>{if(d){const[n,r,i]=t.up,o=u.length;e.updateGlobeVertexNormal(d,o+0,n,r,i),e.updateGlobeVertexNormal(d,o+1,n,r,i),e.updateGlobeVertexNormal(d,o+2,n,r,i),e.updateGlobeVertexNormal(d,o+3,n,r,i)}const[n,r,i]=t.point;e.addDynamicAttributes(u,n,r,i,t.angle)};if(S>1){const e=st(x,l,w,_,r,h,p,t,c,a,f,g,!1,v,y,b);if(!e)return{notEnoughRoom:!0};if(i&&!r){let[n,r,i]=e.first.point,[o,a,l]=e.last.point;[n,r]=rt(n,r,i,s),[o,a]=rt(o,a,l,s);const c=lt(T,M,(o-n)*m,a-r);if(t.flipState=c&&c.needsFlipping?Je.flipRequired:Je.flipNotRequired,c)return c}O(e.first);for(let t=E+1;t<E+S-1;t++){const e=ht(x*l.getoffsetX(t),w,_,r,h,p,C,k,I,c,a,f,g,!1,!1,v,y,b);if(!e)return u.length-=4*(t-E),{notEnoughRoom:!0};O(e)}O(e.last)}else{if(i&&!r){const n=rt(p.x,p.y,0,o),r=k+C+1,i=new e.Point(c.getx(r),c.gety(r)),a=rt(i.x,i.y,0,o),s=a[3]>0?a:dt(p,i,n,1,o,void 0,v,y.canonical),l=lt(T,M,(s[0]-n[0])*m,s[1]-n[1]);if(t.flipState=l&&l.needsFlipping?Je.flipRequired:Je.flipNotRequired,l)return l}const n=ht(x*l.getoffsetX(E),w,_,r,h,p,C,k,I,c,a,f,g,!1,!1,v,y,b);if(!n)return{notEnoughRoom:!0};O(n)}return{}}function ut(e,t,n,r,i){const{x:o,y:a,z:s}=r.projectTilePoint(e.x,e.y,t);if(!i)return rt(o,a,s,n);const[l,c,u]=i(e);return rt(o+l,a+c,s+u,n)}function dt(t,n,r,i,o,a,s,l){const c=ut(t.sub(n)._unit()._add(t),l,o,s,a);return e.sub(c,r,c),e.normalize(c,c),e.scaleAndAdd(c,r,c,i)}function ht(t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y){const b=i?t-n:t+n;let x=b>0?1:-1,w=0;i&&(x*=-1,w=Math.PI),x<0&&(w+=Math.PI);let _=l+s+(x>0?0:1)|0,k=o,E=o,S=0,C=0;const T=Math.abs(b),M=[],I=[];let O=a,A=O;const P=()=>dt(A,O,E,T-S+1,d,p,g,v.canonical);for(;S+C<=T;){if(_+=x,_<l||_>=c)return null;if(E=k,A=O,M.push(E),f&&I.push(A),O=new e.Point(u.getx(_),u.gety(_)),k=h[_],!k){const e=ut(O,v.canonical,d,g,p);k=e[3]>0?h[_]=e:P()}S+=C,C=e.distance(E,k)}m&&p&&(h[_]&&(k=P(),C=e.distance(E,k)),h[_]=k);const D=(T-S)/C,L=O.sub(A)._mult(D)._add(A),R=e.sub([],k,E),z=e.scaleAndAdd([],E,R,D);let j=[0,0,1],N=R[0],B=R[1];if(y&&(j=g.upVector(v.canonical,L.x,L.y),0!==j[0]||0!==j[1]||1!==j[2])){const t=[j[2],0,-j[0]],n=e.cross([],j,t);e.normalize(t,t),e.normalize(n,n),N=e.dot(R,t),B=e.dot(R,n)}if(r){const t=e.cross([],j,R);e.normalize(t,t),e.scaleAndAdd(z,z,t,r*x)}const F=w+Math.atan2(B,N);return M.push(z),f&&I.push(L),{point:z,angle:F,path:M,tilePath:I,up:j}}function pt(e,t){const n=t.length,r=n+4*e;t.resize(r),t.float32.fill(-1/0,4*n,4*r)}function ft(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}const mt=100;class gt{constructor(e,t,n=new Xe(e.width+200,e.height+200,25),r=new Xe(e.width+200,e.height+200,25)){this.transform=e,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+mt,this.screenBottomBoundary=e.height+mt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t}placeCollisionBox(e,t,n,r,i,o,a,s){let l=n.projectedAnchorX,c=n.projectedAnchorY,u=n.projectedAnchorZ;const d=n.elevation,h=n.tileID,p=e.getProjection();if(d&&h){const[e,t,r]=p.upVector(h.canonical,n.tileAnchorX,n.tileAnchorY),i=p.upVectorScale(h.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=e*d*i,c+=t*d*i,u+=r*d*i}const f=this.projectAndGetPerspectiveRatio(a,l,c,u,n.tileID,"globe"===p.name||!!d||this.transform.pitch>0,p),m=o*f.perspectiveRatio,g=(n.x1*t+r.x-n.padding)*m+f.point.x,v=(n.y1*t+r.y-n.padding)*m+f.point.y,y=(n.x2*t+r.x+n.padding)*m+f.point.x,b=(n.y2*t+r.y+n.padding)*m+f.point.y,x=f.perspectiveRatio<=.55||f.occluded;return!this.isInsideGrid(g,v,y,b)||!i&&this.grid.hitTest(g,v,y,b,s)||x?{box:[],offscreen:!1,occluded:f.occluded}:{box:[g,v,y,b],offscreen:this.isOffscreen(g,v,y,b),occluded:!1}}placeCollisionCircles(t,n,r,i,o,a,s,l,c,u,d,h,p,f,m){const g=[],v=this.transform.elevation,y=t.getProjection(),b=v?v.getAtTileOffsetFunc(m,this.transform.center.lat,this.transform.worldSize,y):null,x=new e.Point(r.tileAnchorX,r.tileAnchorY);let{x:w,y:_,z:k}=y.projectTilePoint(x.x,x.y,m.canonical);if(b){const[e,t,n]=b(x);w+=e,_+=t,k+=n}const E="globe"===y.name,S=this.projectAndGetPerspectiveRatio(s,w,_,k,m,E||!!v||this.transform.pitch>0,y),{perspectiveRatio:C}=S,T=(d?a/C:a*C)/e.ONE_EM,M=rt(w,_,k,l),I=S.signedDistanceFromCamera>0?st(T,o,r.lineOffsetX*T,r.lineOffsetY*T,!1,M,x,r,i,l,{},v&&!d?b:null,d&&!!v,y,m,d):null;let O=!1,A=!1,P=!0;if(I&&!S.occluded){const t=.5*p*C+f,r=new e.Point(-100,-100),i=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),o=new Ye,{first:a,last:s}=I,l=a.path.length;let d=[];for(let e=l-1;e>=1;e--)d.push(a.path[e]);for(let e=1;e<s.path.length;e++)d.push(s.path[e]);const m=2.5*t;c&&(d=d.map((([e,t,n],r)=>(b&&!E&&(n=b(r<l-1?a.tilePath[l-1-r]:s.tilePath[r-l+2])[2]),rt(e,t,n,c)))),d.some((e=>e[3]<=0))&&(d=[]));let v=[];if(d.length>0){let t=1/0,n=-1/0,o=1/0,a=-1/0;for(const e of d)t=Math.min(t,e[0]),o=Math.min(o,e[1]),n=Math.max(n,e[0]),a=Math.max(a,e[1]);n>=r.x&&t<=i.x&&a>=r.y&&o<=i.y&&(v=[d.map((t=>new e.Point(t[0],t[1])))],(t<r.x||n>i.x||o<r.y||a>i.y)&&(v=e.clipLine(v,r.x,r.y,i.x,i.y)))}for(const e of v){o.reset(e,.25*t);let r=0;r=o.length<=.5*t?1:Math.ceil(o.paddedLength/m)+1;for(let e=0;e<r;e++){const i=e/Math.max(r-1,1),a=o.lerp(i),s=a.x+mt,l=a.y+mt;g.push(s,l,t,0);const c=s-t,d=l-t,p=s+t,f=l+t;if(P=P&&this.isOffscreen(c,d,p,f),A=A||this.isInsideGrid(c,d,p,f),!n&&this.grid.hitTestCircle(s,l,t,h)&&(O=!0,!u))return{circles:[],offscreen:!1,collisionDetected:O,occluded:!1}}}}return{circles:!u&&O||!A?[]:g,offscreen:P,collisionDetected:O,occluded:S.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const u of t){const t=new e.Point(u.x+mt,u.y+mt);r=Math.min(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y),n.push(t)}const s=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a)),l={},c={};for(const u of s){const t=u.key;if(void 0===l[t.bucketInstanceId]&&(l[t.bucketInstanceId]={}),l[t.bucketInstanceId][t.featureIndex])continue;const r=[new e.Point(u.x1,u.y1),new e.Point(u.x2,u.y1),new e.Point(u.x2,u.y2),new e.Point(u.x1,u.y2)];e.polygonIntersectsPolygon(n,r)&&(l[t.bucketInstanceId][t.featureIndex]=!0,void 0===c[t.bucketInstanceId]&&(c[t.bucketInstanceId]=[]),c[t.bucketInstanceId].push(t.featureIndex))}return c}insertCollisionBox(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,r,i){const o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};for(let s=0;s<e.length;s+=4)o.insertCircle(a,e[s],e[s+1],e[s+2])}projectAndGetPerspectiveRatio(t,n,r,i,o,a,s){const l=[n,r,i,1];let c=!1;if(i||this.transform.pitch>0){if(e.transformMat4$1(l,l,t),this.fogState&&o&&"globe"!==s.name){const t=function(t,n,r,i,o,a){const s=a.calculateFogTileMatrix(o),l=[n,r,i];return e.transformMat4(l,l,s),S(t,l,a.pitch,a._fov)}(this.fogState,n,r,i,o.toUnwrapped(),this.transform);c=t>.9}}else ft(l,l,t);const u=l[3];return{point:new e.Point((l[0]/u+1)/2*this.transform.width+mt,(-l[1]/u+1)/2*this.transform.height+mt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(s)/u*.5,1.5),signedDistanceFromCamera:u,occluded:a&&l[2]>u||c}}isOffscreen(e,t,n,r){return n<mt||e>=this.screenRightBoundary||r<mt||t>this.screenBottomBoundary}isInsideGrid(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}function vt(t,n,r){const i=n.createTileMatrix(t,t.worldSize,r.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,i)}function yt(e,t,n){if(t.projection.name===n.projection.name)return e.projMatrix;const r=n.clone();return r.setProjection(t.projection),vt(r,t.getProjection(),e)}function bt(e,t,n){return t.name===n.projection.name?e.projMatrix:vt(n,t,e)}class xt{constructor(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class wt{constructor(e,t,n,r,i,o=!1){this.text=new xt(e?e.text:null,t,n,i),this.icon=new xt(e?e.icon:null,t,r,i),this.clipped=o}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class _t{constructor(e,t,n,r=!1){this.text=e,this.icon=t,this.skipFade=n,this.clipped=r}}class kt{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class Et{constructor(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class St{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function Ct(t,n,r,i,o){const{horizontalAlign:a,verticalAlign:s}=e.getAnchorAlignment(t),l=-(a-.5)*n,c=-(s-.5)*r,u=e.evaluateVariableOffset(t,i);return new e.Point(l+u[0]*o,c+u[1]*o)}function Tt(t,n,r,i,o){const a=new e.Point(t,n);return r&&a._rotate(i?o:-o),a}class Mt{constructor(e,t,n,r,i){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new gt(this.transform,i),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new St(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,n,r,i){const o=r.getBucket(n),a=r.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=o.layers[0].layout,l=r.collisionBoxArray,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/e.EXTENT,d=r.tileID.toUnwrapped();this.transform.setProjection(o.projection);const h=(p=r.tileID,f=o.getProjection(),m=this.transform,f.name===this.projection?m.calculateProjMatrix(p.toUnwrapped()):vt(m,f,p));var p,f,m;const g="map"===s.get("text-pitch-alignment"),v="map"===s.get("text-rotation-alignment");n.compileFilter();const y=n.dynamicFilter(),b=n.dynamicFilterNeedsFeature(),x=this.transform.calculatePixelsToTileUnitsMatrix(r),w=tt(h,r.tileID.canonical,g,v,this.transform,o.getProjection(),x);let _=null;if(g){const t=nt(h,r.tileID.canonical,g,v,this.transform,o.getProjection(),x);_=e.multiply([],this.transform.labelPlaneMatrix,t)}let k=null;y&&r.latestFeatureIndex&&(k={unwrappedTileID:d,dynamicFilter:y,dynamicFilterNeedsFeature:b,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[o.bucketInstanceId]=new Et(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const E={bucket:o,layout:s,posMatrix:h,textLabelPlaneMatrix:w,labelToScreenMatrix:_,clippingData:k,scale:c,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const e of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=e;t.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:E})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:E})}attemptAnchorPlacement(e,t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v){const{textOffset0:y,textOffset1:b,crossTileID:x}=d,w=[y,b],_=Ct(e,n,r,w,i),k=this.collisionIndex.placeCollisionBox(p,i,t,Tt(_.x,_.y,o,a,this.transform.angle),u,s,l,c.predicate);if(m){const e=p.getSymbolInstanceIconSize(v,this.transform.zoom,d.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(p,e,m,Tt(_.x,_.y,o,a,this.transform.angle),u,s,l,c.predicate).box.length)return}if(k.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[x]&&this.prevPlacement.placements[x]&&this.prevPlacement.placements[x].text&&(t=this.prevPlacement.variableOffsets[x].anchor),this.variableOffsets[x]={textOffset:w,width:n,height:r,anchor:e,textScale:i,prevAnchor:t},this.markUsedJustification(p,e,d,f),p.allowVerticalPlacement&&(this.markUsedOrientation(p,f,d),this.placedOrientations[x]=f),{shift:_,placedGlyphBoxes:k}}}placeLayerBucketPart(t,n,r,i){const{bucket:o,layout:a,posMatrix:s,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:u,textPixelRatio:d,holdingForFade:h,collisionBoxArray:p,partiallyEvaluatedTextSize:f,partiallyEvaluatedIconSize:m,collisionGroup:g}=t.parameters,v=a.get("text-optional"),y=a.get("icon-optional"),b=a.get("text-allow-overlap"),x=a.get("icon-allow-overlap"),w="map"===a.get("text-rotation-alignment"),_="map"===a.get("text-pitch-alignment"),k="none"!==a.get("icon-text-fit"),E="viewport-y"===a.get("symbol-z-order");this.transform.setProjection(o.projection);let S=b&&(x||!o.hasIconData()||y),C=x&&(b||!o.hasTextData()||v);!o.collisionArrays&&p&&o.deserializeCollisionBoxes(p),r&&i&&o.updateCollisionDebugBuffers(this.transform.zoom,p);const T=(t,i,p)=>{const{crossTileID:E,numVerticalGlyphVertices:T}=t;if(u){const r={zoom:this.transform.zoom,pitch:this.transform.pitch};let i=null;if(u.dynamicFilterNeedsFeature){const e=this.retainedQueryData[o.bucketInstanceId];i=u.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,u.dynamicFilter)(r,i,this.retainedQueryData[o.bucketInstanceId].tileID.canonical,new e.Point(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(u.unwrappedTileID)))return this.placements[E]=new _t(!1,!1,!1,!0),void n.add(E)}if(n.has(E))return;if(h)return void(this.placements[E]=new _t(!1,!1,!1));let M=!1,I=!1,O=!0,A=!1,P=!1,D=null,L={box:null,offscreen:null,occluded:null},R={box:null,offscreen:null,occluded:null},z=null,j=null,N=null,B=0,F=0,V=0;p.textFeatureIndex?B=p.textFeatureIndex:t.useRuntimeCollisionCircles&&(B=t.featureIndex),p.verticalTextFeatureIndex&&(F=p.verticalTextFeatureIndex);const U=e=>{e.tileID=this.retainedQueryData[o.bucketInstanceId].tileID;const t=this.transform.elevation;(t||e.elevation)&&(e.elevation=t?t.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0)},$=p.textBox;if($){U($);const n=n=>{let r=e.WritingMode.horizontal;if(o.allowVerticalPlacement&&!n&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[E];e&&(this.placedOrientations[E]=e,r=e,this.markUsedOrientation(o,r,t))}return r},r=(t,n)=>{if(o.allowVerticalPlacement&&T>0&&p.verticalTextBox){for(const r of o.writingModes)if(r===e.WritingMode.vertical?(L=n(),R=L):L=t(),L&&L.box&&L.box.length)break}else L=t()};if(a.get("text-variable-anchor")){let l=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[E]){const e=this.prevPlacement.variableOffsets[E];l.indexOf(e.anchor)>0&&(l=l.filter((t=>t!==e.anchor)),l.unshift(e.anchor))}const c=(e,n,r)=>{const a=o.getSymbolInstanceTextSize(f,t,this.transform.zoom,i),c=(e.x2-e.x1)*a+2*e.padding,u=(e.y2-e.y1)*a+2*e.padding,h=k&&!x?n:null;h&&U(h);let p={box:[],offscreen:!1,occluded:!1};const v=b?2*l.length:l.length;for(let y=0;y<v;++y){const n=this.attemptAnchorPlacement(l[y%l.length],e,c,u,a,w,_,d,s,g,y>=l.length,t,i,o,r,h,f,m);if(n&&(p=n.placedGlyphBoxes,p&&p.box&&p.box.length)){M=!0,D=n.shift;break}}return p};r((()=>c($,p.iconBox,e.WritingMode.horizontal)),(()=>{const t=p.verticalTextBox;return t&&U(t),o.allowVerticalPlacement&&!(L&&L.box&&L.box.length)&&T>0&&t?c(t,p.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),L&&(M=L.box,O=L.offscreen,A=L.occluded);const u=n(!(!L||!L.box));if(!M&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[E];e&&(this.variableOffsets[E]=e,this.markUsedJustification(o,e.anchor,t,u))}}else{const a=(n,r)=>{const a=o.getSymbolInstanceTextSize(f,t,this.transform.zoom,i),l=this.collisionIndex.placeCollisionBox(o,a,n,new e.Point(0,0),b,d,s,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(o,r,t),this.placedOrientations[E]=r),l};r((()=>a($,e.WritingMode.horizontal)),(()=>{const t=p.verticalTextBox;return o.allowVerticalPlacement&&T>0&&t?(U(t),a(t,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),n(!!(L&&L.box&&L.box.length))}}if(z=L,M=z&&z.box&&z.box.length>0,O=z&&z.offscreen,A=z&&z.occluded,t.useRuntimeCollisionCircles){const n=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),i=e.evaluateSizeForFeature(o.textSizeData,f,n),u=a.get("text-padding");j=this.collisionIndex.placeCollisionCircles(o,b,n,o.lineVertexArray,o.glyphOffsetArray,i,s,l,c,r,_,g.predicate,t.collisionCircleDiameter*i/e.ONE_EM,u,this.retainedQueryData[o.bucketInstanceId].tileID),M=b||j.circles.length>0&&!j.collisionDetected,O=O&&j.offscreen,A=j.occluded}if(p.iconFeatureIndex&&(V=p.iconFeatureIndex),p.iconBox){const n=n=>{U(n);const r=k&&D?Tt(D.x,D.y,w,_,this.transform.angle):new e.Point(0,0),i=o.getSymbolInstanceIconSize(m,this.transform.zoom,t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(o,i,n,r,x,d,s,g.predicate)};R&&R.box&&R.box.length&&p.verticalIconBox?(N=n(p.verticalIconBox),I=N.box.length>0):(N=n(p.iconBox),I=N.box.length>0),O=O&&N.offscreen,P=N.occluded}const Z=v||0===t.numHorizontalGlyphVertices&&0===T,H=y||0===t.numIconVertices;if(Z||H?H?Z||(I=I&&M):M=I&&M:I=M=I&&M,M&&z&&z.box&&this.collisionIndex.insertCollisionBox(z.box,a.get("text-ignore-placement"),o.bucketInstanceId,R&&R.box&&F?F:B,g.ID),I&&N&&this.collisionIndex.insertCollisionBox(N.box,a.get("icon-ignore-placement"),o.bucketInstanceId,V,g.ID),j&&(M&&this.collisionIndex.insertCollisionCircles(j.circles,a.get("text-ignore-placement"),o.bucketInstanceId,B,g.ID),r)){const e=o.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new kt);for(let n=0;n<j.circles.length;n+=4)t.circles.push(j.circles[n+0]),t.circles.push(j.circles[n+1]),t.circles.push(j.circles[n+2]),t.circles.push(j.collisionDetected?1:0)}const W="globe"!==o.projection.name;S=S&&(W||!A),C=C&&(W||!P),this.placements[E]=new _t(M||S,I||C,O||o.justReloaded),n.add(E)};if(E){const e=o.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const n=e[t];T(o.symbolInstances.get(n),n,o.collisionArrays[n])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)T(o.symbolInstances.get(e),e,o.collisionArrays[e]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[o.bucketInstanceId];e.invert(t.invProjMatrix,s),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}markUsedJustification(t,n,r,i){const{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:s,verticalPlacedTextSymbolIndex:l,crossTileID:c}=r,u=e.getAnchorJustification(n),d=i===e.WritingMode.vertical?l:"left"===u?o:"center"===u?a:"right"===u?s:-1;o>=0&&(t.text.placedSymbolArray.get(o).crossTileID=d>=0&&o!==d?0:c),a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=d>=0&&a!==d?0:c),s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=d>=0&&s!==d?0:c),l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=d>=0&&l!==d?0:c)}markUsedOrientation(t,n,r){const i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,o=n===e.WritingMode.vertical?n:0,{leftJustifiedTextSymbolIndex:a,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:c}=r,u=t.text.placedSymbolArray;a>=0&&(u.get(a).placedOrientation=i),s>=0&&(u.get(s).placedOrientation=i),l>=0&&(u.get(l).placedOrientation=i),c>=0&&(u.get(c).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const s in this.placements){const e=this.placements[s],t=i[s];t?(this.opacities[s]=new wt(t,r,e.text,e.icon,null,e.clipped),n=n||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[s]=new wt(null,r,e.text,e.icon,e.skipFade,e.clipped),n=n||e.text||e.icon)}for(const s in i){const e=i[s];if(!this.opacities[s]){const t=new wt(e,r,!1,!1);t.isHidden()||(this.opacities[s]=t,n=n||e.text.placed||e.icon.placed)}}for(const s in o)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=o[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n=new Set;for(const r of t){const t=r.getBucket(e);t&&r.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,n,r.collisionBoxArray)}}updateBucketOpacities(t,n,r){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const i=t.layers[0].layout,o=!!t.layers[0].dynamicFilter(),a=new wt(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),c=i.get("text-variable-anchor"),u="map"===i.get("text-rotation-alignment"),d="map"===i.get("text-pitch-alignment"),h="none"!==i.get("icon-text-fit"),p=new wt(null,0,s&&(l||!t.hasIconData()||i.get("icon-optional")),l&&(s||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);const f=(e,t,n)=>{for(let r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)};let m=0;for(let g=0;g<t.symbolInstances.length;g++){const r=t.symbolInstances.get(g),{numHorizontalGlyphVertices:i,numVerticalGlyphVertices:s,crossTileID:l,numIconVertices:v}=r,y=n.has(l);let b=this.opacities[l];y?b=a:b||(b=p,this.opacities[l]=b),n.add(l);const x=i>0||s>0,w=v>0,_=this.placedOrientations[l],k=_===e.WritingMode.vertical,E=_===e.WritingMode.horizontal||_===e.WritingMode.horizontalOnly;if(!x&&!w||b.isHidden()||m++,x){const e=jt(b.text);f(t.text,i,k?Nt:e),f(t.text,s,E?Nt:e);const n=b.text.isHidden(),{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:c,verticalPlacedTextSymbolIndex:u}=r,d=t.text.placedSymbolArray,h=n||k?1:0;o>=0&&(d.get(o).hidden=h),a>=0&&(d.get(a).hidden=h),c>=0&&(d.get(c).hidden=h),u>=0&&(d.get(u).hidden=n||E?1:0);const p=this.variableOffsets[l];p&&this.markUsedJustification(t,p.anchor,r,_);const m=this.placedOrientations[l];m&&(this.markUsedJustification(t,"left",r,m),this.markUsedOrientation(t,m,r))}if(w){const e=jt(b.icon),{placedIconSymbolIndex:n,verticalPlacedIconSymbolIndex:i}=r,o=t.icon.placedSymbolArray,a=b.icon.isHidden()?1:0;n>=0&&(f(t.icon,v,k?Nt:e),o.get(n).hidden=a),i>=0&&(f(t.icon,r.numVerticalIconVertices,E?Nt:e),o.get(i).hidden=a)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const n=t.collisionArrays[g];if(n){let r=new e.Point(0,0),i=!0;if(n.textBox||n.verticalTextBox){if(c){const e=this.variableOffsets[l];e?(r=Ct(e.anchor,e.width,e.height,e.textOffset,e.textScale),u&&r._rotate(d?this.transform.angle:-this.transform.angle)):i=!1}o&&(i=!b.clipped),n.textBox&&It(t.textCollisionBox.collisionVertexArray,b.text.placed,!i||k,r.x,r.y),n.verticalTextBox&&It(t.textCollisionBox.collisionVertexArray,b.text.placed,!i||E,r.x,r.y)}const a=i&&Boolean(!E&&n.verticalIconBox);n.iconBox&&It(t.iconCollisionBox.collisionVertexArray,b.icon.placed,a,h?r.x:0,h?r.y:0),n.verticalIconBox&&It(t.iconCollisionBox.collisionVertexArray,b.icon.placed,!a,h?r.x:0,h?r.y:0)}}}if(t.fullyClipped=0===m,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function It(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}const Ot=Math.pow(2,25),At=Math.pow(2,24),Pt=Math.pow(2,17),Dt=Math.pow(2,16),Lt=Math.pow(2,9),Rt=Math.pow(2,8),zt=Math.pow(2,1);function jt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Ot+t*At+n*Pt+t*Dt+n*Lt+t*Rt+n*zt+t}const Nt=0;class Bt{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(e,t,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;){const e=o[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,n,0===e.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}class Ft{constructor(e,t,n,r,i,o,a,s){this.placement=new Mt(e,i,o,a,s),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(t,n,r){const i=e.exported.now(),o=()=>{const t=e.exported.now()-i;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=n[t[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=i)&&(!e.maxzoom||e.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Bt(e)),this._inProgressLayer.continuePlacement(r[e.source],this.placement,this._showCollisionBoxes,e,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Vt=512/e.EXTENT/2;class Ut{constructor(t,n,r){this.tileID=t,this.bucketInstanceId=r,this.index=new e.KDBush(n.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const i=t.canonical.x*e.EXTENT,o=t.canonical.y*e.EXTENT;for(let e=0;e<n.length;e++){const{key:t,crossTileID:r,tileAnchorX:a,tileAnchorY:s}=n.get(e),l=Math.floor((i+a)*Vt),c=Math.floor((o+s)*Vt);this.index.add(l,c),this.keys.push(t),this.crossTileIDs.push(r)}this.index.finish()}findMatches(t,n,r){const i=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z),o=Vt/Math.pow(2,n.canonical.z-this.tileID.canonical.z),a=n.canonical.x*e.EXTENT,s=n.canonical.y*e.EXTENT;for(let e=0;e<t.length;e++){const n=t.get(e);if(n.crossTileID)continue;const{key:l,tileAnchorX:c,tileAnchorY:u}=n,d=Math.floor((a+c)*o),h=Math.floor((s+u)*o),p=this.index.range(d-i,h-i,d+i,h+i);for(const e of p){const t=this.crossTileIDs[e];if(this.keys[e]===l&&!r.has(t)){r.add(t),n.crossTileID=t;break}}}}}class $t{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Zt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const n in this.indexes){const e=this.indexes[n],r={};for(const n in e){const i=e[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),r[i.tileID.key]=i}this.indexes[n]=r}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let i=0;i<t.symbolInstances.length;i++)t.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]=new Set);const r=this.usedCrossTileIDs[e.overscaledZ];for(const i in this.indexes){const n=this.indexes[i];if(Number(i)>e.overscaledZ)for(const i in n){const o=n[i];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,r)}else{const o=n[e.scaledTo(Number(i)).key];o&&o.findMatches(t.symbolInstances,e,r)}}for(let i=0;i<t.symbolInstances.length;i++){const e=t.symbolInstances.get(i);e.crossTileID||(e.crossTileID=n.generate(),r.add(e.crossTileID))}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Ut(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n of t.crossTileIDs)this.usedCrossTileIDs[e].delete(n)}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}class Ht{constructor(){this.layerIndexes={},this.crossTileIDs=new $t,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n,r){let i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new Zt);let o=!1;const a={};"globe"!==r.name&&i.handleWrapJump(n);for(const s of t){const t=s.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(s.tileID,t,this.crossTileIDs)&&(o=!0),a[t.bucketInstanceId]=!0)}return i.removeStaleBuckets(a)&&(o=!0),o}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const n in this.layerIndexes)t[n]||delete this.layerIndexes[n]}}const Wt=(t,n)=>e.emitValidationErrors(t,n&&n.filter((e=>"source.canvas"!==e.identifier))),qt=e.pick(Ue,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Gt=e.pick(Ue,["setCenter","setZoom","setBearing","setPitch"]),Kt={version:8,layers:[],sources:{}},Yt={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Xt extends e.Evented{constructor(t,n={}){super(),this.map=t,this.dispatcher=new I(Be(),this),this.imageManager=new x,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,n.localFontFamily?e.LocalGlyphMode.all:n.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.crossTileSymbolIndex=new Ht,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const r=this;this._rtlTextPluginCallback=Xt.registerForPluginStateChange((t=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,n)=>{if(e.triggerPluginCompletionEvent(t),n&&n.every((e=>e)))for(const e in r._sourceCaches){const t=r._sourceCaches[e],n=t.getSource().type;"vector"!==n&&"geojson"!==n||t.reload()}}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const n in this._layers){const e=this._layers[n];e.source===t.id&&this._validateLayer(e)}}))}loadURL(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const r="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,n.accessToken);const i=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(i,((t,n)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):n&&this._load(n,r)}))}loadJSON(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==n.validate)}))}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Kt,!1)}_updateLayerCount(e,t){const n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}_load(t,n){if(n&&Wt(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection();for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const r=Ve(this.stylesheet.layers);this._order=r.map((e=>e.id)),this._layers={},this._serializedLayers={};for(const i of r){const t=e.createStyleLayer(i);t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize(),this._updateLayerCount(t,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new _(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(t){this._spriteRequest=function(t,n,r){let i,o,a;const s=e.exported.devicePixelRatio>1?"@2x":"";let l=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),((e,t)=>{l=null,a||(a=e,i=t,u())})),c=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),((e,t)=>{c=null,a||(a=e,o=t,u())}));function u(){if(a)r(a);else if(i&&o){const t=e.exported.getImageData(o),n={};for(const r in i){const{width:o,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:d,stretchY:h,content:p}=i[r],f=new e.RGBAImage({width:o,height:a});e.RGBAImage.copy(t,f,{x:s,y:l},{x:0,y:0},{width:o,height:a}),n[r]={data:f,pixelRatio:u,sdf:c,stretchX:d,stretchY:h,content:p}}r(null,n)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,((t,n)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(n)for(const e in n)this.imageManager.addImage(e,n[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))}))}_validateLayer(t){const n=this.getSource(t.source);if(!n)return;const r=t.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${n.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const n of e){const e=this._layers[n];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return!!this.terrain&&("function"==typeof e.isLayerDraped?e.isLayerDraped():Yt[e.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const n=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(e.length||n.length)&&this._updateWorkerLayers(e,n);for(const t in this._updatedSources){const e=this._updatedSources[t];"reload"===e?this._reloadSource(t):"clear"===e&&this._clearSource(t)}this._updateTilesForChangedImages();for(const r in this._updatedPaintProps)this._layers[r].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const r={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];r[e]=t.used,t.used=!1}for(const e of this._order){const n=this._layers[e];if(n.recalculate(t,this._availableImages),!n.isHidden(t.zoom)){const e=this._getLayerSourceCache(n);e&&(e.used=!0)}const r=this.map.painter;if(r){const e=n.getProgramIds();if(!e)continue;const i=n.getProgramConfiguration(t.zoom);for(const t of e)r.useProgram(t,i)}}for(const i in r){const t=this._sourceCaches[i];r[i]!==t.used&&t.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:t.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),Wt(this,e.validateStyle(n)))return!1;(n=e.clone$1(n)).layers=Ve(n.layers);const r=function(e,n){if(!e)return[{command:Ue.setStyle,args:[n]}];let r=[];try{if(!t(e.version,n.version))return[{command:Ue.setStyle,args:[n]}];t(e.center,n.center)||r.push({command:Ue.setCenter,args:[n.center]}),t(e.zoom,n.zoom)||r.push({command:Ue.setZoom,args:[n.zoom]}),t(e.bearing,n.bearing)||r.push({command:Ue.setBearing,args:[n.bearing]}),t(e.pitch,n.pitch)||r.push({command:Ue.setPitch,args:[n.pitch]}),t(e.sprite,n.sprite)||r.push({command:Ue.setSprite,args:[n.sprite]}),t(e.glyphs,n.glyphs)||r.push({command:Ue.setGlyphs,args:[n.glyphs]}),t(e.transition,n.transition)||r.push({command:Ue.setTransition,args:[n.transition]}),t(e.light,n.light)||r.push({command:Ue.setLight,args:[n.light]}),t(e.fog,n.fog)||r.push({command:Ue.setFog,args:[n.fog]}),t(e.projection,n.projection)||r.push({command:Ue.setProjection,args:[n.projection]});const i={},o=[];!function(e,n,r,i){let o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||Ze(o,r,i));for(o in n){if(!n.hasOwnProperty(o))continue;const a=n[o];e.hasOwnProperty(o)?t(e[o],a)||("geojson"===e[o].type&&"geojson"===a.type&&We(e,n,o)?r.push({command:Ue.setGeoJSONSourceData,args:[o,a.data]}):He(o,n,r,i)):$e(o,n,r)}}(e.sources,n.sources,o,i);const a=[];e.layers&&e.layers.forEach((e=>{e.source&&i[e.source]?r.push({command:Ue.removeLayer,args:[e.id]}):a.push(e)}));let s=e.terrain;s&&i[s.source]&&(r.push({command:Ue.setTerrain,args:[void 0]}),s=void 0),r=r.concat(o),t(s,n.terrain)||r.push({command:Ue.setTerrain,args:[n.terrain]}),function(e,n,r){n=n||[];const i=(e=e||[]).map(Ge),o=n.map(Ge),a=e.reduce(Ke,{}),s=n.reduce(Ke,{}),l=i.slice(),c=Object.create(null);let u,d,h,p,f,m,g;for(u=0,d=0;u<i.length;u++)h=i[u],s.hasOwnProperty(h)?d++:(r.push({command:Ue.removeLayer,args:[h]}),l.splice(l.indexOf(h,d),1));for(u=0,d=0;u<o.length;u++)h=o[o.length-1-u],l[l.length-1-u]!==h&&(a.hasOwnProperty(h)?(r.push({command:Ue.removeLayer,args:[h]}),l.splice(l.lastIndexOf(h,l.length-d),1)):d++,m=l[l.length-u],r.push({command:Ue.addLayer,args:[s[h],m]}),l.splice(l.length-u,0,h),c[h]=!0);for(u=0;u<o.length;u++)if(h=o[u],p=a[h],f=s[h],!c[h]&&!t(p,f))if(t(p.source,f.source)&&t(p["source-layer"],f["source-layer"])&&t(p.type,f.type)){for(g in qe(p.layout,f.layout,r,h,null,Ue.setLayoutProperty),qe(p.paint,f.paint,r,h,null,Ue.setPaintProperty),t(p.filter,f.filter)||r.push({command:Ue.setFilter,args:[h,f.filter]}),t(p.minzoom,f.minzoom)&&t(p.maxzoom,f.maxzoom)||r.push({command:Ue.setLayerZoomRange,args:[h,f.minzoom,f.maxzoom]}),p)p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?qe(p[g],f[g],r,h,g.slice(6),Ue.setPaintProperty):t(p[g],f[g])||r.push({command:Ue.setLayerProperty,args:[h,g,f[g]]}));for(g in f)f.hasOwnProperty(g)&&!p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?qe(p[g],f[g],r,h,g.slice(6),Ue.setPaintProperty):t(p[g],f[g])||r.push({command:Ue.setLayerProperty,args:[h,g,f[g]]}))}else r.push({command:Ue.removeLayer,args:[h]}),m=l[l.lastIndexOf(h)+1],r.push({command:Ue.addLayer,args:[f,m]})}(a,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:Ue.setStyle,args:[n]}]}return r}(this.serialize(),n).filter((e=>!(e.command in Gt)));if(0===r.length)return!1;const i=r.filter((e=>!(e.command in qt)));if(i.length>0)throw new Error(`Unimplemented: ${i.map((e=>e.command)).join(", ")}.`);return r.forEach((e=>{"setTransition"!==e.command&&"setProjection"!==e.command&&this[e.command].apply(this,e.args)})),this.stylesheet=n,this._updateMapProjection(),!0}addImage(t,n){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,n),this._afterImageUpdated(t),this)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,n,r={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateSource,`sources.${t}`,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=Oe(t,n,this.dispatcher,this);i.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:i.serialize(),sourceId:t})));const o=n=>{const r=(n?"symbol:":"other:")+t,o=this._sourceCaches[r]=new e.SourceCache(r,i,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[t]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const n=this.getSource(t);if(!n)throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${i}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const r=this._getSourceCaches(t);for(const i of r)delete this._sourceCaches[i.id],delete this._updatedSources[i.id],i.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i.getSource().id})),i.setEventedParent(null),i.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}_getSources(){const e=[];for(const t in this._otherSourceCaches){const n=this._getSourceCache(t);n&&e.push(n.getSource())}return e}addLayer(t,n,r={}){this._checkLoaded();const i=t.id;if(this.getLayer(i))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" already exists on this map`)));let o;if("custom"===t.type){if(Wt(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateLayer,`layers.${i}`,t,{arrayIndex:-1},r))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`)));this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&s&&"custom"!==o.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,n){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===n)return;const r=this._order.indexOf(t);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const n=this._layers[t];if(!n)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));n.setEventedParent(null),this._updateLayerCount(n,!1);const r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(t,n,r){this._checkLoaded();const i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(n,r,i={}){this._checkLoaded();const o=this.getLayer(n);if(o){if(!t(o.filter,r))return null==r?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(e.validateFilter,`layers.${o.id}.filter`,r,{layerType:o.type},i)||(o.filter=e.clone$1(r),this._updateLayer(o)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){const n=this.getLayer(t);return n&&e.clone$1(n.filter)}setLayoutProperty(n,r,i,o={}){this._checkLoaded();const a=this.getLayer(n);a?t(a.getLayoutProperty(r),i)||(a.setLayoutProperty(r,i,o),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,n){const r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(n,r,i,o={}){this._checkLoaded();const a=this.getLayer(n);a?t(a.getPaintProperty(r),i)||(a.setPaintProperty(r,i,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(e,t){const n=this.getLayer(e);return n&&n.getPaintProperty(t)}setFeatureState(t,n){this._checkLoaded();const r=t.source,i=t.sourceLayer,o=this.getSource(r);if(!o)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const a=o.type;if("geojson"===a&&i)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!i)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(r);for(const e of s)e.setFeatureState(i,t.id,n)}removeFeatureState(t,n){this._checkLoaded();const r=t.source,i=this.getSource(r);if(!i)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=i.type,a="vector"===o?t.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(r);for(const e of s)e.removeFeatureState(a,t.id,n)}getFeatureState(t){this._checkLoaded();const n=t.source,r=t.sourceLayer,i=this.getSource(n);if(i){if("vector"!==i.type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const n=this._sourceCaches[e].getSource();t[n.id]||(t[n.id]=n.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},r=[];for(let o=this._order.length-1;o>=0;o--){const i=this._order[o];if(t(i)){n[i]=o;for(const t of e){const e=t[i];if(e)for(const t of e)r.push(t)}}}r.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=r.length-1;e>=0;e--){const t=r[e].feature;if(n[t.layer.id]<o)break;i.push(t),r.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(t,n,r){n&&n.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of n.layers){const n=this._layers[t];if(!n)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=n&&n.layers?n.layers.some((e=>{const t=this.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),s=A.createFromScreenPoints(t,r);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;n.layers&&!i[t]||o.push(Pe(this._sourceCaches[e],this._layers,this._serializedLayers,s,n,r,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(e,t,n,r,i,o,a){const s={},l=o.queryRenderedSymbols(r),c=[];for(const u of Object.keys(l).map(Number))c.push(a[u]);c.sort(Le);for(const u of c){const n=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],t,u.bucketIndex,u.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in n){const t=s[e]=s[e]||[],r=n[e];r.sort(((e,t)=>{const n=u.featureSortOrder;if(n){const r=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex}));for(const e of r)t.push(e)}}for(const u in s)s[u].forEach((t=>{const r=t.feature,i=n(e[u]);if(!i)return;const o=i.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,n){n&&n.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",n.filter,null,n);const r=this._getSourceCaches(t);let i=[];for(const e of r)i=i.concat(De(e,n));return i}addSourceType(e,t,n){return Xt.getSourceType(e)?n(new Error(`A source type called "${e}" already exists.`)):(Xt.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();const r=this.light.getLight();let i=!1;for(const a in e)if(!t(e[a],r[a])){i=!0;break}if(!i)return;const o=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,n),this.light.updateTransitions(o)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(n,r=1){if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let i=n;if(1===r){if("object"==typeof i.source){const t="terrain-dem-src";this.addSource(t,i.source),i=e.clone$1(i),i=e.extend(i,{source:t})}if(this._validate(e.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&r!==this.terrain.drapeRenderMode){if(!i)return;this._createTerrain(i,r)}else{const n=this.terrain,r=n.get();for(const t of Object.keys(e.spec.terrain))!i.hasOwnProperty(t)&&e.spec.terrain[t].default&&(i[t]=e.spec.terrain[t].default);for(const e in i)if(!t(i[e],r[e])){n.set(i),this.stylesheet.terrain=i;const e=this._setTransitionParameters({duration:0});n.updateTransitions(e);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(e){const t=this.fog=new M(e,this.map.transform);this.stylesheet.fog=e;const n=this._setTransitionParameters({duration:0});t.updateTransitions(n)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const e of this.map._markers)e._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,r=n.get();0===Object.keys(e).length&&n.set(e);for(const i in e)if(!t(e[i],r[i])){n.set(e),this.stylesheet.fog=e;const t=this._setTransitionParameters({duration:0});n.updateTransitions(t);break}}else this._createFog(e);this._markersNeedUpdate=!0}_setTransitionParameters(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter((e=>this.isLayerDraped(this._layers[e]))),t=this._order.filter((e=>!this.isLayerDraped(this._layers[e])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(e,t){const n=this.terrain=new E(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const r=this._setTransitionParameters({duration:0});n.updateTransitions(r)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}_validate(t,n,r,i,o={}){return(!o||!1!==o.validate)&&Wt(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const n of t)n.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const n of t)n.resume(),n.reload()}_reloadSources(){for(const e of this._getSources())e.reload&&e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,n,r,i,o=!1){let a=!1,s=!1;const l={};for(const e of this._order){const n=this._layers[e];if("symbol"!==n.type)continue;if(!l[n.source]){const e=this._getLayerSourceCache(n);if(!e)continue;l[n.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(n,l[n.source],t.center.lng,t.projection);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Ft(t,this._order,o,n,r,i,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();const r=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};r(this._otherSourceCaches[t.source]),r(this._symbolSourceCaches[t.source])}getGlyphs(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}getResource(t,n,r){return e.makeRequest(n,r)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}_isSourceCacheLoaded(t){const n=this._getSourceCaches(t);return 0===n.length?(this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`))),!1):n.every((e=>e.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Xt.getSourceType=function(e){return Ie[e]},Xt.setSourceType=function(e,t){Ie[e]=t},Xt.registerForPluginStateChange=e.registerForPluginStateChange;var Jt="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Qt="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",en="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",tn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",nn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let rn={},on={};const an=[];dn(Jt,an),dn(en,an),dn(tn,an),dn(nn,an),rn=hn("",en),on=hn(nn,tn);const sn=hn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),ln=Jt,cn="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var un={background:hn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:hn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:hn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:hn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:hn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:hn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:hn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:hn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:hn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:hn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:hn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:hn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:hn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:hn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:hn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:hn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:hn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:hn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:hn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:hn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:hn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:hn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:hn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:hn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:hn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:hn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qt),skyboxGradient:hn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qt),skyboxCapture:hn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:hn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:hn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function dn(e,t){const n=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let r of n)if(r=r.trim(),"#"===r[0]&&r.includes("if")&&!r.includes("endif")){r=r.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const e=r.split(" ");for(const n of e)t.includes(n)||t.push(n)}}function hn(e,t){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},o=[...an];return dn(e,o),dn(t,o),{fragmentSource:e=e.replace(n,((e,t,n,r,o)=>(i[o]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nvarying ${n} ${r} ${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = u_${o};\n#endif\n`))),vertexSource:t=t.replace(n,((e,t,n,r,o)=>{const a="float"===r?"vec2":"vec4",s=o.match(/color/)?"color":a;return i[o]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${n} ${a} a_${o};\nvarying ${n} ${r} ${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = a_${o};\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = unpack_mix_${s}(a_${o}, u_${o}_t);\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${n} ${a} a_${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = a_${o};\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = unpack_mix_${s}(a_${o}, u_${o}_t);\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`})),staticAttributes:r,usedDefines:o}}class pn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(e,t,n,r,i,o,a){this.context=e;let s=this.boundPaintVertexBuffers.length!==r.length;for(let c=0;!s&&c<r.length;c++)this.boundPaintVertexBuffers[c]!==r[c]&&(s=!0);let l=this.boundDynamicVertexBuffers.length!==a.length;for(let c=0;!l&&c<a.length;c++)this.boundDynamicVertexBuffers[c]!==a[c]&&(l=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||s||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==o)this.freshBind(t,n,r,i,o,a);else{e.bindVertexArrayOES.set(this.vao);for(const e of a)e&&e.bind();i&&i.dynamicDraw&&i.bind()}}freshBind(e,t,n,r,i,o){let a;const s=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),a=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=o;else{a=l.currentNumAttributes||0;for(let e=s;e<a;e++)c.disableVertexAttribArray(e)}t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(const u of n)u.enableAttributes(c,e),u.bind(),u.setVertexAttribPointers(c,e,i);for(const u of o)u&&(u.enableAttributes(c,e),u.bind(),u.setVertexAttribPointers(c,e,i));r&&r.bind(),l.currentNumAttributes=s}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function fn(t,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new e.MercatorCoordinate(0,i/r).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function mn(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=r.fbo;if(!u)return;t.prepareDrawTile();const d=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const h=((e,t,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:r||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:fn(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}})(t,r,i,t.terrain?n.projMatrix:null);t.prepareDrawProgram(l,d,n.toUnwrapped());const{tileBoundsBuffer:p,tileBoundsIndexBuffer:f,tileBoundsSegments:m}=t.getTileBoundsBuffers(r);d.draw(l,c.TRIANGLES,o,a,s,e.CullFaceMode.disabled,h,i.id,p,f,m)}function gn(t,n,r){if(!n.needsDEMTextureUpload)return;const i=t.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(r.stride);const a=r.getPixels();n.demTexture?n.demTexture.update(a,{premultiply:!1}):n.demTexture=new e.Texture(i,a,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function vn(t,n,r,i,o,a){const s=t.context,l=s.gl;if(!n.dem)return;const c=n.dem;if(s.activeTexture.set(l.TEXTURE1),gn(t,n,c),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let d=n.fbo;if(!d){const t=new e.Texture(s,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),d=n.fbo=s.createFramebuffer(u,u,!0),d.colorAttachment.set(t.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,u,u]);const{tileBoundsBuffer:h,tileBoundsIndexBuffer:p,tileBoundsSegments:f}=t.getMercatorTileBoundsBuffers();t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,e.CullFaceMode.disabled,((t,n)=>{const r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,c),r.id,h,p,f),n.needsHillshadePrepare=!1}const yn=t=>({u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}),bn=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),xn=(e,t,n,r,i,o,a,s,l,c,u,d,h,p,f)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(r),u_merc_matrix:n,u_zoom_transition:i,u_merc_center:o,u_image0:0,u_frustum_tl:a,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:c,u_globe_pos:u,u_globe_radius:d,u_viewport:h,u_grid_matrix:f?Float32Array.from(f):new Float32Array(9),u_skirt_height:p});function wn(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const _n=new class{constructor(){this.operations={}}newMorphing(e,t,n,r,i){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==n.tileID.key&&(t.queued=n)}else this.operations[e]={startTime:r,phase:0,duration:i,from:t,to:n,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},kn={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function En(e){return 6*Math.pow(1.5,22-e)}function Sn(e,t){const n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}const Cn=e=>({u_matrix:e});function Tn(t,n,r,i,o){if(o>0){const a=e.exported.now(),s=(a-t.timeAdded)/o,l=n?(a-n.timeAdded)/o:-1,c=r.getSource(),u=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),d=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),h=d&&t.refreshedUponExpiration?1:e.clamp(d?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}class Mn extends e.SourceCache{constructor(e){const t={type:"raster-dem",maxzoom:e.transform.maxZoom},n=new I(Be(),null),r=Oe("mock-dem",t,n,e.style);super("mock-dem",r,!1),r.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,t){e.state="loaded",t(null)}}class In extends e.SourceCache{constructor(e){const t=Oe("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new I(Be(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,n,r){if(t.freezeTileCoverage)return;this.transform=t;const i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((n,r)=>{if(n[r.key]="",!this._tiles[r.key]){const n=new e.Tile(r,this._source.tileSize*r.overscaleFactor(),t.tileZoom);n.state="loaded",this._tiles[r.key]=n}return n}),{});for(const e in this._tiles)e in i||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const n=Object.values(t);this.renderCachePool.push(...n),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach((e=>e.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class On extends e.OverscaledTileID{constructor(e,t,n){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=n}}class An extends e.Elevation{constructor(t,n){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[r,i,o]=function(t){const n=new e.StructArrayLayout2i4,r=new e.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);const o=e.EXTENT/128,a=e.EXTENT+o/2,s=a+o;for(let c=-o;c<s;c+=o)for(let t=-o;t<s;t+=o){const r=t<0||t>a||c<0||c>a?24575:0,i=e.clamp(Math.round(t),0,e.EXTENT),o=e.clamp(Math.round(c),0,e.EXTENT);n.emplaceBack(i+r,o)}const l=(e,t)=>{const n=t*i+e;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)l(t,e);return[0,129].forEach((e=>{for(let t=0;t<130;t++)l(t,e),l(e,t)})),[n,r,32768]}(),a=t.context;this.gridBuffer=a.createVertexBuffer(r,e.posAttributes.members),this.gridIndexBuffer=a.createIndexBuffer(i),this.gridSegments=e.SegmentVector.simpleSegment(0,0,r.length,i.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,r.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new In(n.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new e.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Mn(n.map)}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(t,n,r){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const i=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const o=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.getScaledDemTileSize();this.sourceCache.update(n,t,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!0,r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((e=>e.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.proxyCoords=n.getIds().map((e=>{const t=n.getTileByID(e).tileID;return t.projMatrix=r.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,n){const r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new e.Point(r.x,r.y);t.sort(((t,n)=>{if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;const r=new e.Point(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),o=new e.Point(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=i.mult(1<<t.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(r)-a.distSqr(o)}))}(i,this.painter),this._previousZoom=r.zoom;const o=this.proxyToSource||{};this.proxyToSource={},i.forEach((e=>{this.proxyToSource[e.key]={}})),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const e in a){const n=a[e];if(!n.used)continue;if(n!==this.sourceCache&&this.resetTileLookupCache(n.id),this._setupProxiedCoordsForOrtho(n,t[e],o),n.usedForTerrain)continue;const r=t[e];n.getSource().reparseOverscaled&&this._assignTerrainTiles(r)}this.proxiedCoords[n.id]=i.map((e=>new On(e,e.key,this.orthoMatrix))),this._assignTerrainTiles(i),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const s={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const n=t.tileID.key;n in s||(this._visibleDemTiles.push(t),s[n]=n)}}_assignTerrainTiles(e){this._initializing||e.forEach((e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)}))}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const n in this.terrainTileForTile){const r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),gn(this.painter,r,i))}}_prepareDemTileUniforms(e,t,n,r){if(!t||null==t.demTexture)return!1;const i=e.tileID.canonical,o=Math.pow(2,t.tileID.canonical.z-i.z),a=r||"";return n[`u_dem_tl${a}`]=[i.x*o%1,i.y*o%1],n[`u_dem_scale${a}`]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,n=t.gl;if(!this._emptyDepthBufferTexture){const r=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,r,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce(((t,n)=>{if(!n.dem)return t;const r=n.dem.tree.minimums[0];return r>0&&e++,t+r}),0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);const r=this._getLoadedAreaMinimum(),i=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(r,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1}),o}setupElevationDraw(t,n,r){const i=this.painter.context,o=i.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(r&&r.morphing&&this._useVertexMorphing){const e=r.morphing.srcDemTile,n=r.morphing.dstDemTile;u=r.morphing.phase,e&&n&&(this._prepareDemTileUniforms(t,e,a,"_prev")&&(c=e),this._prepareDemTileUniforms(t,n,a)&&(l=n))}if(c&&l?(i.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),i.activeTexture.set(o.TEXTURE4),c.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=u):(l=this.terrainTileForTile[t.tileID.key],i.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,l,a)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),i.activeTexture.set(o.TEXTURE3),r&&r.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),a.u_depth_size_inv=[1,1]),r&&r.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=t}if(r&&r.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(i,a),"globe"===this.painter.transform.projection.name){const e=this.globeUniformValues(this.painter.transform,t.tileID.canonical,r&&r.useDenormalizedUpVectorScale);n.setGlobeUniformValues(i,e)}}globeUniformValues(t,n,r){const i=t.projection;return{u_tile_tl_up:i.upVector(n,0,0),u_tile_tr_up:i.upVector(n,e.EXTENT,0),u_tile_br_up:i.upVector(n,e.EXTENT,e.EXTENT),u_tile_bl_up:i.upVector(n,0,e.EXTENT),u_tile_up_scale:r?e.globeMetersToEcef(1):i.upVectorScale(n,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const n=this.painter,r=this.painter.context;0!==t.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,n,r,i,o){if("globe"===t.transform.projection.name)!function(t,n,r,i,o){const a=t.context,s=a.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,d=t.transform,h=e.globeUseCustomAntiAliasing(t,a,d),p=(e,n)=>{if(c===e)return;const r=[kn[e],"PROJECTION_GLOBE_VIEW"];h&&r.push("CUSTOM_ANTIALIASING"),n&&r.push(kn[u]),l=t.useProgram("globeRaster",null,r),c=e},f=t.colorModeForRenderPass(),m=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);_n.update(o);const g=e.calculateGlobeMercatorMatrix(d),v=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],y=u?[!1,!0]:[!1],b=t.globeSharedBuffers,x=[d.width*e.exported.devicePixelRatio,d.height*e.exported.devicePixelRatio],w=Float32Array.from(d.globeMatrix),_={useDenormalizedUpVectorScale:!0};if(y.forEach((u=>{const d=t.transform,h=En(d.zoom)*n.exaggeration();c=-1;const y=u?s.LINES:s.TRIANGLES;for(const c of i){const i=r.getTile(c),k=e.StencilMode.disabled,E=n.prevTerrainTileForTile[c.key],S=n.terrainTileForTile[c.key];wn(E,S)&&_n.newMorphing(c.key,E,S,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const C=_n.getMorphValuesForProxy(c.key),T=C?1:0;C&&e.extend$1(_,{morphing:{srcDemTile:C.from,dstDemTile:C.to,phase:e.easeCubicInOut(C.phase)}});const M=e.tileCornersToBounds(c.canonical),I=e.getLatitudinalLod(M.getCenter().lat),O=e.getGridMatrix(c.canonical,M,I,d.worldSize/d._pixelsPerMercatorPixel),A=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),P=xn(d.projMatrix,w,g,A,e.globeToMercatorTransition(d.zoom),v,d.frustumCorners.TL,d.frustumCorners.TR,d.frustumCorners.BR,d.frustumCorners.BL,d.globeCenterInViewSpace,d.globeRadius,x,h,O);if(p(T,u),n.setupElevationDraw(i,l,_),t.prepareDrawProgram(a,l,c.toUnwrapped()),b){const[n,r,i]=u?b.getWirefameBuffers(t.context,I):b.getGridBuffers(I,0!==h);l.draw(a,y,m,k,f,e.CullFaceMode.backCCW,P,"globe_raster",n,r,i)}}})),b){const o=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];h&&o.push("CUSTOM_ANTIALIASING"),l=t.useProgram("globeRaster",null,o);for(const c of i){const{x:i,y:o,z:u}=c.canonical,h=0===o,p=o===(1<<u)-1,[g,y,w,k]=b.getPoleBuffers(u);if(k&&(h||p)){const o=r.getTile(c);a.activeTexture.set(s.TEXTURE0),o.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);let b=e.globePoleMatrixForTile(u,i,d);const E=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),S=(t,n)=>t.draw(a,s.TRIANGLES,m,e.StencilMode.disabled,f,e.CullFaceMode.disabled,xn(d.projMatrix,b,b,E,0,v,d.frustumCorners.TL,d.frustumCorners.TR,d.frustumCorners.BR,d.frustumCorners.BL,d.globeCenterInViewSpace,d.globeRadius,x,0),"globe_pole_raster",n,w,k);n.setupElevationDraw(o,l,_),t.prepareDrawProgram(a,l,c.toUnwrapped()),h&&S(l,g),p&&(b=e.scale(e.create(),b,[1,-1,1]),S(l,y))}}}}(t,n,r,i,o);else{const a=t.context,s=a.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,d=(e,n)=>{if(c===e)return;const r=[kn[e]];n&&r.push(kn[u]),l=t.useProgram("terrainRaster",null,r),c=e},h=t.colorModeForRenderPass(),p=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);_n.update(o);const f=t.transform,m=En(f.zoom)*n.exaggeration();(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const g=u?s.LINES:s.TRIANGLES,[v,y]=u?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const c of i){const i=r.getTile(c),b=e.StencilMode.disabled,x=n.prevTerrainTileForTile[c.key],w=n.terrainTileForTile[c.key];wn(x,w)&&_n.newMorphing(c.key,x,w,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const _=_n.getMorphValuesForProxy(c.key),k=_?1:0;let E;_&&(E={morphing:{srcDemTile:_.from,dstDemTile:_.to,phase:e.easeCubicInOut(_.phase)}});const S=bn(c.projMatrix,Sn(c.canonical,f.renderWorldCopies)?m/10:m);d(k,u),n.setupElevationDraw(i,l,E),t.prepareDrawProgram(a,l,c.toUnwrapped()),l.draw(a,g,p,b,h,e.CullFaceMode.backCCW,S,"terrain_raster",n.gridBuffer,v,y)}}))}}(n,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const n=this.painter,r=this.painter.context,i=this.proxySourceCache,o=this.proxiedCoords[i.id],a=this._drapedRenderBatches.shift(),s=[],l=n.style.order;let c=0;for(const u of o){const o=i.getTileByID(u.proxyTileKey),d=i.proxyCachedFBO[u.key]?i.proxyCachedFBO[u.key][t]:void 0,h=void 0!==d?i.renderCache[d]:this.pool[c++],p=void 0!==d;if(o.texture=h.tex,p&&!h.dirty){s.push(o.tileID);continue}let f;r.bindFramebuffer.set(h.fb.framebuffer),this.renderedToTile=!1,h.dirty&&(r.clear({color:e.Color.transparent,stencil:0}),h.dirty=!1);for(let e=a.start;e<=a.end;++e){const t=n.style._layers[l[e]];if(t.isHidden(n.transform.zoom))continue;const i=n.style._getLayerSourceCache(t),o=i?this.proxyToSource[u.key][i.id]:[u];if(!o)continue;const a=o;r.viewport.set([0,0,h.fb.width,h.fb.height]),f!==(i?i.id:null)&&(this._setupStencil(h,o,t,i),f=i?i.id:null),n.renderLayer(n,i,t,a)}this.renderedToTile?(h.dirty=!0,s.push(o.tileID)):p||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),a.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return{efficiency:100};let n,r=0,i=0,o=!1;for(let a=0;a<t;++a){const t=e._layers[e.order[a]];this._style.isLayerDraped(t)?(o&&++r,++i):o||(o=!0,n=t.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter((e=>e.dem)).forEach((t=>{e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}raycast(e,t,n){if(!this._visibleDemTiles)return null;const r=this._visibleDemTiles.filter((e=>e.dem)).map((r=>{const i=r.tileID,o=1<<i.overscaledZ,{x:a,y:s}=i.canonical,l=a/o,c=(a+1)/o,u=s/o,d=(s+1)/o;return{minx:l,miny:u,maxx:c,maxy:d,t:r.dem.tree.raycastRoot(l,u,c,d,e,t,n),tile:r}}));r.sort(((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)));for(const i of r){if(null==i.t)return null;const r=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,e,t,n);if(null!=r)return r}return null}_createFBO(){const t=this.painter.context,n=t.gl,r=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);const i=new e.Texture(t,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=t.createFramebuffer(r[0],r[1],!1);return o.colorAttachment.set(i.texture),o.depthAttachment=new _e(t,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return!0;return this._style.order.some((e=>{const t=this._style._layers[e],n=t.isHidden(this.painter.transform.zoom);return"custom"===t.type?!n&&t.shouldRedrape():!n&&t.hasTransition()}))}_clearLineLayersFromRenderCache(){let t=!1;for(const e of this._style._getSources())if(e instanceof Se){t=!0;break}if(!t)return;const n={};for(let r=0;r<this._style.order.length;++r){const t=this._style._layers[this._style.order[r]],i=this._style._getLayerSourceCache(t);if(i&&!n[i.id]&&!t.isHidden(this.painter.transform.zoom)&&"line"===t.type&&t.widthExpression()instanceof e.ZoomDependentExpression){n[i.id]=!0;for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][i.id];if(t)for(const e of t)this._clearRenderCacheForTile(i.id,e)}}}}_clearRasterLayersFromRenderCache(){let e=!1;for(const n in this._style._sourceCaches)if(this._style._sourceCaches[n]._source instanceof Ce){e=!0;break}if(!e)return;const t={};for(let n=0;n<this._style.order.length;++n){const e=this._style._layers[this._style.order[n]],r=this._style._getLayerSourceCache(e);if(!r||t[r.id])continue;if(e.isHidden(this.painter.transform.zoom)||"raster"!==e.type)continue;const i=e.paint.get("raster-fade-duration");for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][r.id];if(e)for(const t of e){const e=Tn(r.getTile(t),r.findLoadedParent(t,0),r,this.painter.transform,i);(1!==e.opacity||0!==e.mix)&&this._clearRenderCacheForTile(r.id,t)}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const n=[];let r,i=0,o=this._style._layers[e[i]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++i<t;)o=this._style._layers[e[i]];for(;i<t;++i){const t=this._style._layers[e[i]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===r&&(r=i):void 0!==r&&(n.push({start:r,end:i-1}),r=void 0))}void 0!==r&&n.push({start:r,end:i-1}),this._drapedRenderBatches=n}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let n=0;n<e.length;++n){const r=Object.values(e[n]);t.renderCachePool.push(...r)}}return}this._clearRasterLayersFromRenderCache();const n=this.proxyCoords,r=this._tilesDirty;for(let o=n.length-1;o>=0;o--){const i=n[o];if(t.getTileByID(i.key),void 0!==t.proxyCachedFBO[i.key]){const n=e[i.key],o=this.proxyToSource[i.key];let a=0;for(const e in o){const t=o[e],i=n[e];if(!i||i.length!==t.length||t.some(((t,n)=>t!==i[n]||r[e]&&r[e].hasOwnProperty(t.key)))){a=-1;break}++a}for(const e in t.proxyCachedFBO[i.key])t.renderCache[t.proxyCachedFBO[i.key][e]].dirty=a<0||a!==Object.values(n).length}}const i=[...this._drapedRenderBatches];i.sort(((e,t)=>t.end-t.start-(e.end-e.start)));for(const o of i)for(const e of n){if(t.proxyCachedFBO[e.key])continue;let n=t.renderCachePool.pop();void 0===n&&t.renderCache.length<50&&(n=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==n&&(t.proxyCachedFBO[e.key]={},t.proxyCachedFBO[e.key][o.start]=n,t.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(e,t,n,r){if(!r||!this._sourceTilesOverlap[r.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,o=i.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let a;if(n.isTileClipped())a=t.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,n){const r=this.painter,i=this.painter.context,o=i.gl;r._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=r.useProgram("clippingMask");for(const s of t){const t=r._tileClippingMaskIDs[s.key]=--n;a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},t,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Cn(s.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}pointCoordinate(t){const n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;const r=[t.x,t.y,1,1];e.transformMat4$1(r,r,n.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;const i=n._camera.position,o=e.mercatorZfromAltitude(1,n.center.lat),a=[i[0],i[1],i[2]/o,0],s=e.subtract([],r.slice(0,3),a);e.normalize(s,s);const l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(a,a,s,l),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const t=this.painter,n=t.context,r=this.proxySourceCache,i=Math.ceil(t.width),o=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const t=n.gl,r=n.createFramebuffer(i,o,!0);n.activeTexture.set(t.TEXTURE0);const a=new e.Texture(n,{width:i,height:o,data:null},t.RGBA);a.bind(t.NEAREST,t.CLAMP_TO_EDGE),r.colorAttachment.set(a.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,o);r.depthAttachment.set(s),this._depthFBO=r,this._depthTexture=a}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,o]),function(t,n,r,i){if("globe"===t.transform.projection.name)return;const o=t.context,a=o.gl;o.clear({depth:1});const s=t.useProgram("terrainDepth"),l=new e.DepthMode(a.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const c of i){const t=r.getTile(c),i=bn(c.projMatrix,0);n.setupElevationDraw(t,s),s.draw(o,a.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,i,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(t,this,r,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,t,n){if(e.getSource()instanceof Me)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const r=this.proxiedCoords[e.id]=[],i=this.proxyCoords;for(let a=0;a<i.length;a++){const t=i[a],o=this._findTileCoveringTileID(t,e);if(o){const i=this._createProxiedId(t,o,n[t.key]&&n[t.key][e.id]);r.push(i),this.proxyToSource[t.key][e.id]=[i]}}let o=!1;for(let a=0;a<t.length;a++){const i=e.getTile(t[a]);if(!i||!i.hasData())continue;const s=this._findTileCoveringTileID(i.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==i.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],a=this._createProxiedId(s.tileID,i,n[s.tileID.key]&&n[s.tileID.key][e.id]);t?t.splice(t.length-1,0,a):this.proxyToSource[s.tileID.key][e.id]=[a],r.push(a),o=!0}}this._sourceTilesOverlap[e.id]=o}_setupProxiedCoordsForImageSource(t,n,r){if(!t.getSource().loaded())return;const i=this.proxiedCoords[t.id]=[],o=this.proxyCoords,a=t.getSource(),s=new e.Point(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e)),{min:new e.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,n)=>{const r=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),o=e.EXTENT/(1<<t.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+o<a+l.min.x||r>a+l.max.x||i+o<s+l.min.y||i>s+l.max.y};for(let e=0;e<o.length;e++){const a=o[e];for(let e=0;e<n.length;e++){const o=t.getTile(n[e]);if(!o||!o.hasData())continue;if(c(a,o.tileID))continue;const s=this._createProxiedId(a,o,r[a.key]&&r[a.key][t.id]),l=this.proxyToSource[a.key][t.id];l?l.push(s):this.proxyToSource[a.key][t.id]=[s],i.push(s)}}}_createProxiedId(t,n,r){let i=this.orthoMatrix;if(r){const e=r.find((e=>e.key===n.tileID.key));if(e)return e}if(n.tileID.key!==t.key){const r=t.canonical.z-n.tileID.canonical.z;let o,a,s;i=e.create();const l=n.tileID.wrap-t.wrap<<t.overscaledZ;r>0?(o=e.EXTENT>>r,a=o*((n.tileID.canonical.x<<r)-t.canonical.x+l),s=o*((n.tileID.canonical.y<<r)-t.canonical.y)):(o=e.EXTENT<<-r,a=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+l<<-r)),s=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-r))),e.ortho(i,0,o,0,o,0,1),e.translate(i,i,[a,s,0])}return new On(n.tileID,t.key,i)}_findTileCoveringTileID(t,n){let r=n.getTile(t);if(r&&r.hasData())return r;const i=this._findCoveringTileCache[n.id],o=i[t.key];if(r=o?n.getTileByID(o):null,r&&r.hasData()||null===o)return r;let a=r?r.tileID:t,s=a.overscaledZ;const l=n.getSource().minzoom,c=[];if(!o){const i=n.getSource().maxzoom;if(t.canonical.z>=i){const r=t.canonical.z-i;n.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,n.transform.tileZoom),a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>r,t.canonical.y>>r)):0!==r&&(s=i,a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>r,t.canonical.y>>r))}a.key!==t.key&&(c.push(a.key),r=n.getTile(a))}const u=e=>{c.forEach((t=>{i[t]=e})),c.length=0};for(s-=1;s>=l&&(!r||!r.hasData());s--){r&&u(r.tileID.key);const e=a.calculateScaledKey(s);if(r=n.getTileByID(e),r&&r.hasData())break;const t=i[e];if(null===t)break;void 0===t?c.push(e):r=n.getTileByID(t)}return u(r?r.tileID.key:null),r&&r.hasData()?r:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(e,t){let n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(t){let n=0;const r=new e.StructArrayLayout2ui4,i=131;for(let e=1;e<129;e++){for(let t=1;t<129;t++)n=e*i+t,r.emplaceBack(n,n+1),r.emplaceBack(n,n+i),r.emplaceBack(n+1,n+i),128===e&&r.emplaceBack(n+i,n+i+1);r.emplaceBack(n+1,n+1+i)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Pn{static cacheKey(e,t,n,r){let i=`${t}${r?r.cacheKey:""}`;for(const o of n)e.usedDefines.includes(o)&&(i+=`/${o}`);return i}constructor(t,n,r,i,o,a){const s=t.gl;this.program=s.createProgram();const l=function(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const r=e[n].split(" ");t.push(r.pop())}return t}(r.staticAttributes),c=i?i.getBinderAttributes():[],u=l.concat(c);let d=i?i.defines():[];d=d.concat(a.map((e=>`#define ${e}`)));const h=t.isWebGL2?"#version 300 es\n":"",p=h+d.concat(t.extStandardDerivatives&&0===h.length?"#extension GL_OES_standard_derivatives : enable\n".concat(cn):cn,cn,ln,sn.fragmentSource,on.fragmentSource,r.fragmentSource).join("\n"),f=h+d.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",ln,sn.vertexSource,on.vertexSource,rn.vertexSource,r.vertexSource).join("\n"),m=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(m,p),s.compileShader(m),s.attachShader(this.program,m);const g=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(g,f),s.compileShader(g),s.attachShader(this.program,g),this.attributes={},this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(s.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);s.linkProgram(this.program),s.deleteShader(g),s.deleteShader(m),this.fixedUniforms=o(t),this.binderUniforms=i?i.getUniforms(t):[],a.includes("TERRAIN")&&(this.terrainUniforms=(t=>({u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}))(t)),a.includes("GLOBE")&&(this.globeUniforms=(t=>({u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}))(t)),a.includes("FOG")&&(this.fogUniforms=(t=>({u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}))(t))}}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e]&&n[e].set(this.program,e,t[e])}}setGlobeUniformValues(e,t){if(!this.globeUniforms)return;const n=this.globeUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e]&&n[e].set(this.program,e,t[e])}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e].set(this.program,e,t[e])}}draw(e,t,n,r,i,o,a,s,l,c,u,d,h,p,f){const m=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(o);for(const v of Object.keys(this.fixedUniforms))this.fixedUniforms[v].set(this.program,v,a[v]);p&&p.setUniforms(this.program,e,this.binderUniforms,d,{zoom:h});const g={[m.LINES]:2,[m.TRIANGLES]:3,[m.LINE_STRIP]:1}[t];for(const v of u.get()){const n=v.vaos||(v.vaos={});(n[s]||(n[s]=new pn)).bind(e,this,l,p?p.getPaintVertexBuffers():[],c,v.vertexOffset,f||[]),m.drawElements(t,v.primitiveLength*g,m.UNSIGNED_SHORT,v.primitiveOffset*g*2)}}}function Dn(e,t){const n=Math.pow(2,t.tileID.overscaledZ),r=t.tileSize*Math.pow(2,e.transform.tileZoom)/n,i=r*(t.tileID.canonical.x+t.tileID.wrap*n),o=r*t.tileID.canonical.y;return{u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/O(t,1,e.transform.tileZoom),u_pixel_coord_upper:[i>>16,o>>16],u_pixel_coord_lower:[65535&i,65535&o]}}const Ln=e.create(),Rn=(t,n,r,i,o,a,s,l,c,u,d)=>{const h=n.style.light,p=h.properties.get("position"),f=[p.x,p.y,p.z],m=e.create$1();"viewport"===h.properties.get("anchor")&&(e.fromRotation(m,-n.transform.angle),e.transformMat3(f,f,m));const g=h.properties.get("color"),v=n.transform,y={u_matrix:t,u_lightpos:f,u_lightintensity:h.properties.get("intensity"),u_lightcolor:[g.r,g.g,g.b],u_vertical_gradient:+r,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ln,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:o,u_edge_radius:a};return"globe"===v.projection.name&&(y.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],y.u_zoom_transition=c,y.u_inv_rot_matrix=d,y.u_merc_center=u,y.u_up_dir=v.projection.upVector(new e.CanonicalTileID(0,0,0),u[0]*e.EXTENT,u[1]*e.EXTENT),y.u_height_lift=l),y},zn=(t,n,r,i,o,a,s,l,c,u,d,h)=>{const p=Rn(t,n,r,i,o,a,s,c,u,d,h),f={u_height_factor:-Math.pow(2,s.overscaledZ)/l.tileSize/8};return e.extend(p,Dn(n,l),f)},jn=e=>({u_matrix:e}),Nn=(t,n,r)=>e.extend(jn(t),Dn(n,r)),Bn=(e,t)=>({u_matrix:e,u_world:t}),Fn=(t,n,r,i)=>e.extend(Nn(t,n,r),{u_world:i}),Vn=e.create(),Un=(t,n,r,i,o,a)=>{const s=t.transform,l="globe"===s.projection.name;let c;if("map"===a.paint.get("circle-pitch-alignment"))if(l){const t=e.globePixelsToTileUnits(s.zoom,n.canonical)*s._pixelsPerMercatorPixel;c=Float32Array.from([t,0,0,t])}else c=s.calculatePixelsToTileUnitsMatrix(r);else c=new Float32Array([s.pixelsToGLUnits[0],0,0,s.pixelsToGLUnits[1]]);const u={u_camera_to_center_distance:s.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.projMatrix,r,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:c,u_inv_rot_matrix:Vn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){u.u_inv_rot_matrix=i,u.u_merc_center=o,u.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],u.u_zoom_transition=e.globeToMercatorTransition(s.zoom);const t=o[0]*e.EXTENT,r=o[1]*e.EXTENT;u.u_up_dir=s.projection.upVector(new e.CanonicalTileID(0,0,0),t,r)}return u},$n=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Zn=(t,n,r,i)=>{const o=e.EXTENT/r.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.getCameraToCenterDistance(i),u_extrude_scale:[n.pixelsToGLUnits[0]/o,n.pixelsToGLUnits[1]/o]}},Hn=(e,t,n=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:n}),Wn=e.create(),qn=(t,n,r,i,o,a,s)=>{const l=t.transform,c="globe"===l.projection.name,u=c?e.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel:O(r,1,a),d={u_matrix:n.projMatrix,u_extrude_scale:u,u_intensity:s,u_inv_rot_matrix:Wn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){d.u_inv_rot_matrix=i,d.u_merc_center=o,d.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],d.u_zoom_transition=e.globeToMercatorTransition(l.zoom);const t=o[0]*e.EXTENT,r=o[1]*e.EXTENT;d.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),t,r)}return d},Gn=(e,t,n,r,i,o,a)=>{const s=e.transform,l=s.calculatePixelsToTileUnitsMatrix(t);return{u_matrix:Xn(e,t,n,r),u_pixels_to_tile_units:l,u_device_pixel_ratio:o,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:i,u_texsize:Jn(n)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Yn(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:a}},Kn=(e,t,n,r,i)=>{const o=e.transform;return{u_matrix:Xn(e,t,n,r),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:o.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:i,u_image:0,u_tile_units_to_pixels:Yn(t,o),u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Yn(e,t){return 1/O(e,1,t.tileZoom)}function Xn(e,t,n,r){return e.translatePosMatrix(r||t.tileID.projMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function Jn(e){const t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}const Qn=(e,t,n,r,i,o)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:er(i.paint.get("raster-hue-rotate")),u_perspective_transform:o};var a,s};function er(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const tr=e.create(),nr=(t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g)=>{const v=o.transform,y={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:v.cameraToCenterDistance,u_rotate_symbol:+r,u_aspect_ratio:v.width/v.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+i,u_texsize:u,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:tr,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:tr,u_up_vector:[0,-1,0]};return"globe"===g.name&&(y.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],y.u_zoom_transition=h,y.u_inv_rot_matrix=f,y.u_merc_center=p,y.u_camera_forward=v._camera.forward(),y.u_ecef_origin=e.globeECEFOrigin(v.globeMatrix,d.toUnwrapped()),y.u_tile_matrix=Float32Array.from(v.globeMatrix),y.u_up_vector=m),y},rr=(t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v)=>e.extend(nr(t,n,r,i,o,a,s,l,c,u,h,p,f,m,g,v),{u_gamma_scale:i?o.transform.cameraToCenterDistance*Math.cos(o.terrain?0:o.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+d}),ir=(t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g)=>e.extend(rr(t,n,r,i,o,a,s,l,!0,c,!0,d,h,p,f,m,g),{u_texsize_icon:u,u_texture_icon:1}),or=(e,t,n)=>({u_matrix:e,u_opacity:t,u_color:n}),ar=(t,n,r,i,o)=>e.extend(function(e,t,n){const r=t.imageManager.getPattern(e.toString()),{width:i,height:o}=t.imageManager.getPixelSize(),a=Math.pow(2,n.tileID.overscaledZ),s=n.tileSize*Math.pow(2,t.transform.tileZoom)/a,l=s*(n.tileID.canonical.x+n.tileID.wrap*a),c=s*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:r.tl,u_pattern_br:r.br,u_texsize:[i,o],u_pattern_size:r.displaySize,u_tile_units_to_pixels:1/O(n,1,t.transform.tileZoom),u_pixel_coord_upper:[l>>16,c>>16],u_pixel_coord_lower:[65535&l,65535&c]}}(i,r,o),{u_matrix:t,u_opacity:n}),sr={fillExtrusion:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}),fillExtrusionPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}),fill:t=>({u_matrix:new e.UniformMatrix4f(t)}),fillPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),fillOutline:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}),fillOutlinePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),circle:t=>({u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),collisionBox:t=>({u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}),collisionCircle:t=>({u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}),debug:t=>({u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}),clippingMask:t=>({u_matrix:new e.UniformMatrix4f(t)}),heatmap:t=>({u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),heatmapTexture:t=>({u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}),hillshade:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}),hillshadePrepare:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}),line:t=>({u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}),linePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}),raster:t=>({u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}),symbolIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}),symbolSDF:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}),symbolTextAndIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}),background:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}),backgroundPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl:new e.Uniform2f(t),u_pattern_br:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_pattern_size:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),terrainRaster:yn,terrainDepth:yn,skybox:t=>({u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxGradient:t=>({u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxCapture:t=>({u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}),globeRaster:t=>({u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_skirt_height:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}),globeAtmosphere:t=>({u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)})};let lr;function cr(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=t.transform,d=t.useProgram("collisionBox"),h=[];let p=0,f=0;for(let w=0;w<i.length;w++){const m=i[w],g=n.getTile(m),v=g.getBucket(r);if(!v)continue;const y=yt(m,v,u);let b=y;0===o[0]&&0===o[1]||(b=t.translatePosMatrix(y,g,o,a));const x=s?v.textCollisionBox:v.iconCollisionBox,_=v.collisionCircleArray;if(_.length>0){const t=e.create(),n=b;e.mul(t,v.placementInvProjMatrix,u.glCoordMatrix),e.mul(t,t,v.placementViewportMatrix),h.push({circleArray:_,circleOffset:f,transform:n,invTransform:t,projection:v.getProjection()}),p+=_.length/4,f=p}x&&(t.terrain&&t.terrain.setupElevationDraw(g,d),d.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Zn(b,u,g,v.getProjection()),r.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,null,u.zoom,null,[x.collisionVertexBuffer,x.collisionVertexBufferExt]))}if(!s||!h.length)return;const m=t.useProgram("collisionCircle"),g=new e.StructArrayLayout2f1f2i16;g.resize(4*p),g._trim();let v=0;for(const e of h)for(let t=0;t<e.circleArray.length/4;t++){const n=4*t,r=e.circleArray[n+0],i=e.circleArray[n+1],o=e.circleArray[n+2],a=e.circleArray[n+3];g.emplace(v++,r,i,o,a,0),g.emplace(v++,r,i,o,a,1),g.emplace(v++,r,i,o,a,2),g.emplace(v++,r,i,o,a,3)}(!lr||lr.length<2*p)&&(lr=function(t){const n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(let e=0;e<n;e++){const t=6*e;r.uint16[t+0]=4*e+0,r.uint16[t+1]=4*e+1,r.uint16[t+2]=4*e+2,r.uint16[t+3]=4*e+2,r.uint16[t+4]=4*e+3,r.uint16[t+5]=4*e+0}return r}(p));const y=l.createIndexBuffer(lr,!0),b=l.createVertexBuffer(g,e.collisionCircleLayout.members,!0);for(const w of h){const n={u_matrix:w.transform,u_inv_matrix:w.invTransform,u_camera_to_center_distance:(x=u).getCameraToCenterDistance(w.projection),u_viewport_size:[x.width,x.height]};m.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,n,r.id,b,y,e.SegmentVector.simpleSegment(0,2*w.circleOffset,w.circleArray.length,w.circleArray.length/2),null,u.zoom)}var x;b.destroy(),y.destroy()}const ur=e.create();function dr({width:t,height:n,anchor:r,textOffset:i,textScale:o},a){const{horizontalAlign:s,verticalAlign:l}=e.getAnchorAlignment(r),c=-(s-.5)*t,u=-(l-.5)*n,d=e.evaluateVariableOffset(r,i);return new e.Point((c/o+d[0])*a,(u/o+d[1])*a)}function hr(t,n,r,i,o,a,s,l,c,u,d){const h=t.text.placedSymbolArray,p=t.text.dynamicLayoutVertexArray,f=t.icon.dynamicLayoutVertexArray,m={},g=t.getProjection(),v=bt(l,g,a),y=a.elevation,b=g.upVectorScale(l.canonical,a.center.lat,a.worldSize).metersToTile;p.clear();for(let x=0;x<h.length;x++){const f=h.get(x),{tileAnchorX:w,tileAnchorY:_,numGlyphs:k}=f,E=f.hidden||!f.crossTileID||t.allowVerticalPlacement&&!f.placedOrientation?null:i[f.crossTileID];if(E){let i=0,h=0,x=0;if(y){const e=y?y.getAtTileOffset(l,w,_):0,[t,n,r]=g.upVector(l.canonical,w,_);i=e*t*b,h=e*n*b,x=e*r*b}let[S,C,T,M]=rt(f.projectedAnchorX+i,f.projectedAnchorY+h,f.projectedAnchorZ+x,r?v:s);const I=it(a.getCameraToCenterDistance(g),M);let O=o.evaluateSizeForFeature(t.textSizeData,u,f)*I/e.ONE_EM;r&&(O*=t.tilePixelRatio/c);const A=dr(E,O);r?(({x:S,y:C,z:T}=g.projectTilePoint(w+A.x,_+A.y,l.canonical)),[S,C,T]=rt(S+i,C+h,T+x,s)):(n&&A._rotate(-a.angle),S+=A.x,C+=A.y,T=0);const P=t.allowVerticalPlacement&&f.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<k;t++)e.addDynamicAttributes(p,S,C,T,P);d&&f.associatedIconIndex>=0&&(m[f.associatedIconIndex]={x:S,y:C,z:T,angle:P})}else pt(k,p)}if(d){f.clear();const n=t.icon.placedSymbolArray;for(let t=0;t<n.length;t++){const r=n.get(t),{numGlyphs:i}=r,o=m[t];if(r.hidden||!o)pt(i,f);else{const{x:t,y:n,z:r,angle:a}=o;for(let o=0;o<i;o++)e.addDynamicAttributes(f,t,n,r,a)}}t.icon.dynamicLayoutVertexBuffer.updateData(f)}t.text.dynamicLayoutVertexBuffer.updateData(p)}function pr(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function fr(t,n,r,i,o,a,s,l,c,u,d,h){const p=t.context,f=p.gl,m=t.transform,g="map"===l,v="map"===c,y=g&&"point"!==r.layout.get("symbol-placement"),b=g&&!v&&!y,x=void 0!==r.layout.get("symbol-sort-key").constantOr(1);let w=!1;const _=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),k=[e.mercatorXfromLng(m.center.lng),e.mercatorYfromLat(m.center.lat)],E=r.layout.get("text-variable-anchor"),S="globe"===m.projection.name,C=[],T=[0,-1,0];let M=T;!S&&!m.mercatorFromTransition||g||(M=function(t){const n=t._camera.getWorldToCamera(t.worldSize,1),r=e.multiply([],n,t.globeMatrix);e.invert(r,r);const i=[0,0,0],o=[0,1,0,0];return e.transformMat4$1(o,o,r),i[0]=o[0],i[1]=o[1],i[2]=o[2],e.normalize(i,i),i}(m));for(const I of i){const i=n.getTile(I),l=i.getBucket(r);if(!l)continue;if("mercator"===l.projection.name&&S)continue;const c=o?l.text:l.icon;if(!c||l.fullyClipped||!c.segments.get().length)continue;const d=c.programConfigurations.get(r.id),h=o||l.sdfIcons,p=o?l.textSizeData:l.iconSizeData,_=v||0!==m.pitch,O=e.evaluateSizeForZoom(p,m.zoom);let A,P,D,L,R=[0,0],z=null;if(o)P=i.glyphAtlasTexture,D=f.LINEAR,A=i.glyphAtlasTexture.size,l.iconsInText&&(R=i.imageAtlasTexture.size,z=i.imageAtlasTexture,L=_||t.options.rotating||t.options.zooming||"composite"===p.kind||"camera"===p.kind?f.LINEAR:f.NEAREST);else{const e=1!==r.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;P=i.imageAtlasTexture,D=h||t.options.rotating||t.options.zooming||e||_?f.LINEAR:f.NEAREST,A=i.imageAtlasTexture.size}const j="globe"===l.projection.name,N=j?M:T,B=j?e.globeToMercatorTransition(m.zoom):0,F=bt(I,l.getProjection(),m),V=m.calculatePixelsToTileUnitsMatrix(i),U=et(F,i.tileID.canonical,v,g,m,l.getProjection(),V),$=t.terrain&&v&&y?e.invert(e.create(),U):ur,Z=nt(F,i.tileID.canonical,v,g,m,l.getProjection(),V),H=E&&l.hasTextData(),W="none"!==r.layout.get("icon-text-fit")&&H&&l.hasIconData();if(y){const e=m.elevation,n=e?e.getAtTileOffsetFunc(I,m.center.lat,m.worldSize,l.getProjection()):null,r=tt(F,i.tileID.canonical,v,g,m,l.getProjection(),V);at(l,F,t,o,r,Z,v,u,n,I)}const q=y||o&&E||W,G=t.translatePosMatrix(F,i,a,s),K=q?ur:U,Y=t.translatePosMatrix(Z,i,a,s,!0),X=l.getProjection().createInversionMatrix(m,I.canonical),J=[];t.terrainRenderModeElevated()&&v&&J.push("PITCH_WITH_MAP_TERRAIN"),j&&J.push("PROJECTION_GLOBE_VIEW"),q&&J.push("PROJECTED_POS_ON_VIEWPORT");const Q=h&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let ee;ee=h?l.iconsInText?ir(p.kind,O,b,v,t,G,K,Y,A,R,I,B,k,X,N,l.getProjection()):rr(p.kind,O,b,v,t,G,K,Y,o,A,!0,I,B,k,X,N,l.getProjection()):nr(p.kind,O,b,v,t,G,K,Y,o,A,I,B,k,X,N,l.getProjection());const te={program:t.useProgram(pr(h,o,l),d,J),buffers:c,uniformValues:ee,atlasTexture:P,atlasTextureIcon:z,atlasInterpolation:D,atlasInterpolationIcon:L,isSDF:h,hasHalo:Q,tile:i,labelPlaneMatrixInv:$};if(x&&l.canOverlap){w=!0;const t=c.segments.get();for(const n of t)C.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:te})}else C.push({segments:c.segments,sortKey:0,state:te})}w&&C.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of C){const n=e.state;if(t.terrain&&t.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!S,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),p.activeTexture.set(f.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,f.CLAMP_TO_EDGE),n.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,mr(n.buffers,e.segments,r,t,n.program,_,d,h,i)),i.u_is_halo=0}mr(n.buffers,e.segments,r,t,n.program,_,d,h,n.uniformValues)}}function mr(t,n,r,i,o,a,s,l,c){const u=i.context,d=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];o.draw(u,u.gl.TRIANGLES,a,s,l,e.CullFaceMode.disabled,c,r.id,t.layoutVertexBuffer,t.indexBuffer,n,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),d)}function gr(t,n,r,i,o,a,s){const l=t.context.gl,c=r.paint.get("fill-pattern"),u=c&&c.constantOr(1);let d,h,p,f,m;s?(h=u&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(h=u?"fillPattern":"fill",d=l.TRIANGLES);for(const g of i){const i=n.getTile(g);if(u&&!i.patternsLoaded())continue;const v=i.getBucket(r);if(!v)continue;t.prepareDrawTile();const y=v.programConfigurations.get(r.id),b=t.useProgram(h,y);u&&(t.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePaintBuffers());const x=c.constantOr(null);if(x&&i.imageAtlas){const e=i.imageAtlas.patternPositions[x.toString()];e&&y.setConstantPatternPositions(e)}const w=t.translatePosMatrix(g.projMatrix,i,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){f=v.indexBuffer2,m=v.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];p="fillOutlinePattern"===h&&u?Fn(w,t,i,e):Bn(w,e)}else f=v.indexBuffer,m=v.segments,p=u?Nn(w,t,i):jn(w);t.prepareDrawProgram(t.context,b,g.toUnwrapped()),b.draw(t.context,d,o,t.stencilModeForClipping(g),a,e.CullFaceMode.disabled,p,r.id,v.layoutVertexBuffer,f,m,r.paint,t.transform.zoom,y)}}function vr(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=t.transform,d=r.paint.get("fill-extrusion-pattern"),h=d.constantOr(1),p=r.paint.get("fill-extrusion-opacity"),f=[r.paint.get("fill-extrusion-ambient-occlusion-intensity"),r.paint.get("fill-extrusion-ambient-occlusion-radius")],m=r.layout.get("fill-extrusion-edge-radius"),g=m>0&&!r.paint.get("fill-extrusion-rounded-roof"),v=g?0:m,y="globe"===u.projection.name?e.fillExtrusionHeightLift():0,b="globe"===u.projection.name,x=b?e.globeToMercatorTransition(u.zoom):0,w=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],_=[];b&&_.push("PROJECTION_GLOBE_VIEW"),f[0]>0&&_.push("FAUX_AO"),g&&_.push("ZERO_ROOF_RADIUS");for(const k of i){const i=n.getTile(k),m=i.getBucket(r);if(!m||m.projection.name!==u.projection.name)continue;const g=m.programConfigurations.get(r.id),E=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",g,_);if(t.terrain){const e=t.terrain;if(t.style.terrainSetForDrapingOnly())e.setupElevationDraw(i,E,{useMeterToDem:!0});else{if(!m.enableTerrain)continue;if(e.setupElevationDraw(i,E,{useMeterToDem:!0}),yr(l,n,k,m,r,e),!m.centroidVertexBuffer){const e=E.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0)}}}h&&(t.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),g.updatePaintBuffers());const S=d.constantOr(null);if(S&&i.imageAtlas){const e=i.imageAtlas.patternPositions[S.toString()];e&&g.setConstantPatternPositions(e)}const C=t.translatePosMatrix(k.projMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),T=u.projection.createInversionMatrix(u,k.canonical),M=r.paint.get("fill-extrusion-vertical-gradient"),I=h?zn(C,t,M,p,f,v,k,i,y,x,w,T):Rn(C,t,M,p,f,v,k,y,x,w,T);t.prepareDrawProgram(l,E,k.toUnwrapped());const O=[];t.terrain&&O.push(m.centroidVertexBuffer),b&&O.push(m.layoutVertexExtBuffer),E.draw(l,l.gl.TRIANGLES,o,a,s,e.CullFaceMode.backCCW,I,r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,r.paint,t.transform.zoom,g,O)}}function yr(t,n,r,i,o,a){const s=[t=>{let n=t.canonical.x-1,r=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,r--),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},t=>{let n=t.canonical.x+1,r=t.wrap;return n===1<<t.canonical.z&&(n=0,r++),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=n.getSource().minzoom,r=e=>{const t=n.getTileByID(e);if(t&&t.hasData())return t.getBucket(o)},i=[0,-1,1];for(const n of i){if(e.overscaledZ+n<t)continue;const i=r(e.calculateScaledKey(e.overscaledZ+n));if(i)return i}},c=[0,0,0],u=(t,n)=>(c[0]=Math.min(t.min.y,n.min.y),c[1]=Math.max(t.max.y,n.max.y),c[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,c),d=(t,n)=>(c[0]=Math.min(t.min.x,n.min.x),c[1]=Math.max(t.max.x,n.max.x),c[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,c),h=[(e,t)=>u(e,t),(e,t)=>u(t,e),(e,t)=>d(e,t),(e,t)=>d(t,e)],p=new e.Point(0,0);let f,m,g;const v=(t,n,i,o,s)=>{const l=[[o?i:t,o?t:i,0],[o?i:n,o?n:i,0]],c=s<0?e.EXTENT+s:s,u=[o?c:(t+n)/2,o?(t+n)/2:c,0];return 0===i&&s<0||0!==i&&s>0?a.getForTilePoints(g,[u],!0,m):l.push(u),a.getForTilePoints(r,l,!0,f),Math.max(l[0][2],l[1][2],u[2])/a.exaggeration()};for(let y=0;y<4;y++){const t=(y<2?1:5)-y,n=i.borders[y];if(0===n.length)continue;const o=g=s[y](r),c=l(o);if(!(c&&c instanceof e.FillExtrusionBucket&&c.enableTerrain))continue;if(i.borderDoneWithNeighborZ[y]===c.canonical.z&&c.borderDoneWithNeighborZ[t]===i.canonical.z)continue;if(m=a.findDEMTileFor(o),!m||!m.dem)continue;if(!f){const e=a.findDEMTileFor(r);if(!e||!e.dem)return;f=e}const u=c.borders[t];let d=0;const b=c.borderDoneWithNeighborZ[t]!==i.canonical.z;if(i.canonical.z===c.canonical.z){for(let r=0;r<n.length;r++){const o=i.featuresOnBorder[n[r]],a=o.borders[y];let s;for(;d<u.length&&(s=c.featuresOnBorder[u[d]],!(s.borders[t][1]>a[0]+3));)b&&c.encodeCentroid(void 0,s,!1),d++;if(s&&d<u.length){const n=d;let r=0;for(;!(s.borders[t][0]>a[1]-3)&&(r++,++d!==u.length);)s=c.featuresOnBorder[u[d]];if(s=c.featuresOnBorder[u[n]],o.intersectsCount()>1||s.intersectsCount()>1||1!==r){1!==r&&(d=n),i.encodeCentroid(void 0,o,!1),b&&c.encodeCentroid(void 0,s,!1);continue}const l=h[y](o,s),f=y%2?e.EXTENT-1:0;p.x=v(l[0],Math.min(e.EXTENT-1,l[1]),f,y<2,l[2]),p.y=0,i.encodeCentroid(p,o,!1),b&&c.encodeCentroid(p,s,!1)}else i.encodeCentroid(void 0,o,!1)}i.borderDoneWithNeighborZ[y]=c.canonical.z,i.needsCentroidUpdate=!0,b&&(c.borderDoneWithNeighborZ[t]=i.canonical.z,c.needsCentroidUpdate=!0)}else{for(const e of n)i.encodeCentroid(void 0,i.featuresOnBorder[e],!1);if(b){for(const e of u)c.encodeCentroid(void 0,c.featuresOnBorder[e],!1);c.borderDoneWithNeighborZ[t]=i.canonical.z,c.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[y]=c.canonical.z,i.needsCentroidUpdate=!0}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}const br=new e.Color(1,0,0,1),xr=new e.Color(0,1,0,1),wr=new e.Color(0,0,1,1),_r=new e.Color(1,0,1,1),kr=new e.Color(0,1,1,1);function Er(t,n,r){const i=t.context,o=t.transform,a=i.gl,s="globe"===o.projection.name,l=s?["PROJECTION_GLOBE_VIEW"]:null;let c=r.projMatrix;if(s&&e.globeToMercatorTransition(o.zoom)>0){const t=e.transitionTileAABBinECEF(r.canonical,o),n=e.globeDenormalizeECEF(t);c=e.multiply(new Float32Array(16),o.globeMatrix,n),e.multiply(c,o.projMatrix,c)}const u=t.useProgram("debug",null,l),d=n.getTileByID(r.key);t.terrain&&t.terrain.setupElevationDraw(d,u);const h=e.DepthMode.disabled,p=e.StencilMode.disabled,f=t.colorModeForRenderPass(),m="$debug";i.activeTexture.set(a.TEXTURE0),t.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),s?d._makeGlobeTileDebugBuffers(t.context,o):d._makeDebugTileBoundsBuffers(t.context,o.projection);const g=d._tileDebugBuffer||t.debugBuffer,v=d._tileDebugIndexBuffer||t.debugIndexBuffer,y=d._tileDebugSegments||t.debugSegments;u.draw(i,a.LINE_STRIP,h,p,f,e.CullFaceMode.disabled,Hn(c,e.Color.red),m,g,v,y,null,null,null,[d._globeTileDebugBorderBuffer]);const b=d.latestRawTileData,x=Math.floor((b&&b.byteLength||0)/1024),w=n.getTile(r).tileSize,_=512/Math.min(w,512)*(r.overscaledZ/o.zoom)*.5;let k=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(k+=` => ${r.overscaledZ}`),k+=` ${x}kb`,function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,k);const E=d._tileDebugTextBuffer||t.debugBuffer,S=d._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,C=d._tileDebugTextSegments||t.debugSegments;u.draw(i,a.TRIANGLES,h,p,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,Hn(c,e.Color.transparent,_),m,E,S,C,null,null,null,[d._globeTileDebugTextBuffer])}function Sr(e,t,n,r){Tr(e,0,t+n/2,e.transform.width,n,r)}function Cr(e,t,n,r){Tr(e,t-n/2,0,n,e.transform.height,r)}function Tr(t,n,r,i,o,a){const s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,o*e.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}const Mr=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ir}=Mr;function Or(e,t,n,r){e.emplaceBack(t,n,r)}class Ar{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Or(this.vertexArray,-1,-1,1),Or(this.vertexArray,1,-1,1),Or(this.vertexArray,-1,1,1),Or(this.vertexArray,1,1,1),Or(this.vertexArray,-1,-1,-1),Or(this.vertexArray,1,-1,-1),Or(this.vertexArray,-1,1,-1),Or(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Ir),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function Pr(t,n,r,i,o,a){const s=t.gl,l=n.paint.get("sky-atmosphere-color"),c=n.paint.get("sky-atmosphere-halo-color"),u=n.paint.get("sky-atmosphere-sun-intensity"),d=((e,t,n,r,i)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(e.fromMat4(e.create$1(),i),o,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,n.skyboxTexture,0),r.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,d,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const Dr=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Lr{constructor(t){const n=new e.StructArrayLayout5f20;n.emplaceBack(-1,1,1,0,0),n.emplaceBack(1,1,1,1,0),n.emplaceBack(1,-1,1,1,1),n.emplaceBack(-1,-1,1,0,1);const r=new e.StructArrayLayout3ui6;r.emplaceBack(0,1,2),r.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(n,Dr.members),this.indexBuffer=t.createIndexBuffer(r),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Rr={symbol:function(t,n,r,i,o){if("translucent"!==t.renderPass)return;const a=e.StencilMode.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,i,o,a,s){const l=n.transform,c="map"===o,u="map"===a;for(const d of t){const t=i.getTile(d),n=t.getBucket(r);if(!n||!n.text||!n.text.segments.get().length)continue;const o=e.evaluateSizeForZoom(n.textSizeData,l.zoom),a=bt(d,n.getProjection(),l),h=l.calculatePixelsToTileUnitsMatrix(t),p=et(a,t.tileID.canonical,u,c,l,n.getProjection(),h),f="none"!==r.layout.get("icon-text-fit")&&n.hasIconData();if(o){const r=Math.pow(2,l.zoom-t.tileID.overscaledZ);hr(n,c,u,s,e.symbolSize,l,p,d,r,o,f)}}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&fr(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&fr(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(cr(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),cr(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,u=c.gl,d=t.transform,h=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),p=e.StencilMode.disabled,f=t.colorModeForRenderPass(),m="globe"===d.projection.name,g=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],v=[];for(let b=0;b<i.length;b++){const o=i[b],a=n.getTile(o),s=a.getBucket(r);if(!s||s.projection.name!==d.projection.name)continue;const c=s.programConfigurations.get(r.id),u=$n(r);m&&u.push("PROJECTION_GLOBE_VIEW");const h=t.useProgram("circle",c,u),p=s.layoutVertexBuffer,f=s.globeExtVertexBuffer,y=s.indexBuffer,x=d.projection.createInversionMatrix(d,o.canonical),w={programConfiguration:c,program:h,layoutVertexBuffer:p,globeExtVertexBuffer:f,indexBuffer:y,uniformValues:Un(t,o,a,x,g,r),tile:a};if(l){const t=s.segments.get();for(const n of t)v.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:w})}else v.push({segments:s.segments,sortKey:0,state:w})}l&&v.sort(((e,t)=>e.sortKey-t.sortKey));const y={useDepthForOcclusion:!m};for(const b of v){const{programConfiguration:n,program:i,layoutVertexBuffer:o,globeExtVertexBuffer:a,indexBuffer:s,uniformValues:l,tile:m}=b.state,g=b.segments;t.terrain&&t.terrain.setupElevationDraw(m,i,y),t.prepareDrawProgram(c,i,m.tileID.toUnwrapped()),i.draw(c,u.TRIANGLES,h,p,f,e.CullFaceMode.disabled,l,r.id,o,s,g,r.paint,d.zoom,n,[a])}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,a=o.gl,s=e.StencilMode.disabled,l=new e.ColorMode([a.ONE,a.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n,r){const i=e.gl,o=t.width*r,a=t.height*r;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,o,a]);let s=n.heatmapFbo;if(!s||s&&(s.width!==o||s.height!==a)){s&&s.destroy();const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),s=n.heatmapFbo=e.createFramebuffer(o,a,!1),function(e,t,n,r,i,o){const a=e.gl;a.texImage2D(a.TEXTURE_2D,0,e.isWebGL2&&e.extRenderToTextureHalfFloat?a.RGBA16F:a.RGBA,i,o,0,a.RGBA,e.extRenderToTextureHalfFloat?e.isWebGL2?a.HALF_FLOAT:e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,0,t,s,o,a)}else i.bindTexture(i.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer)}(o,t,r,"globe"===t.transform.projection.name?.5:.25),o.clear({color:e.Color.transparent});const c=t.transform,u="globe"===c.projection.name,d=u?["PROJECTION_GLOBE_VIEW"]:null,h=u?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,p=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)];for(let f=0;f<i.length;f++){const m=i[f];if(n.hasRenderableParent(m))continue;const g=n.getTile(m),v=g.getBucket(r);if(!v||v.projection.name!==c.projection.name)continue;const y=v.programConfigurations.get(r.id),b=t.useProgram("heatmap",y,d),{zoom:x}=t.transform;t.terrain&&t.terrain.setupElevationDraw(g,b),t.prepareDrawProgram(o,b,m.toUnwrapped());const w=c.projection.createInversionMatrix(c,m.canonical);b.draw(o,a.TRIANGLES,e.DepthMode.disabled,s,l,h,qn(t,m,g,w,p,x,r.paint.get("heatmap-intensity")),r.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,r.paint,t.transform.zoom,y,u?[v.globeExtVertexBuffer]:null)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){const r=t.context,i=r.gl,o=n.heatmapFbo;if(!o)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t,n,r)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}(t,r))},line:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,u=r.paint.get("line-dasharray"),d=u.constantOr(1),h=r.layout.get("line-cap"),p=r.paint.get("line-pattern"),f=p.constantOr(1),m=r.paint.get("line-gradient"),g=f?"linePattern":"line",v=t.context,y=v.gl,b=(e=>{const t=[];Jn(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const n=e.paint.get("line-trim-offset");0===n[0]&&0===n[1]||t.push("RENDER_LINE_TRIM_OFFSET");const r=e.paint.get("line-pattern").constantOr(1),i=1!==e.paint.get("line-opacity").constantOr(1);return!r&&i&&t.push("RENDER_LINE_ALPHA_DISCARD"),t})(r);let x=b.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(x=!1);for(const w of i){const i=n.getTile(w);if(f&&!i.patternsLoaded())continue;const o=i.getBucket(r);if(!o)continue;t.prepareDrawTile();const a=o.programConfigurations.get(r.id),_=t.useProgram(g,a,b),k=p.constantOr(null);if(k&&i.imageAtlas){const e=i.imageAtlas.patternPositions[k.toString()];e&&a.setConstantPatternPositions(e)}const E=u.constantOr(null),S=h.constantOr(null);if(!f&&E&&S&&i.lineAtlas){const e=i.lineAtlas.getDash(E,S);e&&a.setConstantPatternPositions(e)}let[C,T]=r.paint.get("line-trim-offset");if("round"===S||"square"===S){const e=1;C!==T&&(0===C&&(C-=e),1===T&&(T+=e))}const M=t.terrain?w.projMatrix:null,I=f?Kn(t,i,r,M,c):Gn(t,i,r,M,o.lineClipsArray.length,c,[C,T]);if(m){const i=o.gradients[r.id];let a=i.texture;if(r.gradientVersion!==i.version){let s=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=w.canonical.z===r?Math.ceil(1<<t.transform.maxZoom-w.canonical.z):1;s=e.clamp(e.nextPowerOfTwo(o.maxLineLength/e.EXTENT*1024*i),256,v.maxTextureSize)}i.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:i.gradient||void 0,clips:o.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new e.Texture(v,i.gradient,y.RGBA),i.version=r.gradientVersion,a=i.texture}v.activeTexture.set(y.TEXTURE1),a.bind(r.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}d&&(v.activeTexture.set(y.TEXTURE0),i.lineAtlasTexture.bind(y.LINEAR,y.REPEAT),a.updatePaintBuffers()),f&&(v.activeTexture.set(y.TEXTURE0),i.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),a.updatePaintBuffers()),t.prepareDrawProgram(v,_,w.toUnwrapped());const O=n=>{_.draw(v,y.TRIANGLES,s,n,l,e.CullFaceMode.disabled,I,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,r.paint,t.transform.zoom,a,[o.layoutVertexBuffer2])};if(x){const n=t.stencilModeForClipping(w).ref;0===n&&t.terrain&&v.clear({stencil:0});const r={func:y.EQUAL,mask:255};I.u_alpha_discard_threshold=.8,O(new e.StencilMode(r,n,255,y.KEEP,y.KEEP,y.INVERT)),I.u_alpha_discard_threshold=0,O(new e.StencilMode(r,n,255,y.KEEP,y.KEEP,y.KEEP))}else O(t.stencilModeForClipping(w))}x&&(t.resetStencilClippingMasks(),t.terrain&&v.clear({stencil:0}))},fill:function(t,n,r,i){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=t.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(e.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const o=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);gr(t,n,r,i,o,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){const o=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);gr(t,n,r,i,o,s,!0)}},"fill-extrusion":function(t,n,r,i){const o=r.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===t.renderPass){const a=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==o||r.paint.get("fill-extrusion-pattern").constantOr(1))vr(t,n,r,i,a,e.StencilMode.disabled,e.ColorMode.disabled),vr(t,n,r,i,a,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{const o=t.colorModeForRenderPass();vr(t,n,r,i,a,e.StencilMode.disabled,o)}}},hillshade:function(t,n,r,i){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const o=t.context,a=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),s=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,u]="translucent"!==t.renderPass||l?[{},i]:t.stencilConfigForOverlap(i);for(const d of u){const i=n.getTile(d);if(i.needsHillshadePrepare&&"offscreen"===t.renderPass)vn(t,i,r,a,e.StencilMode.disabled,s);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(d):c[d.overscaledZ];mn(t,d,i,r,a,e,s)}}o.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()},raster:function(t,n,r,i,o,a){if("translucent"!==t.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!i.length)return;const s=t.context,l=s.gl,c=n.getSource(),u=t.useProgram("raster"),d=t.colorModeForRenderPass(),h=t.terrain&&t.terrain.renderingToTexture,[p,f]=c instanceof Me||h?[{},i]:t.stencilConfigForOverlap(i),m=f[f.length-1].overscaledZ,g=!t.options.moving;for(const v of f){const i=h?e.DepthMode.disabled:t.depthModeForSublayer(v.overscaledZ-m,1===r.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),o=v.toUnwrapped(),f=n.getTile(v);if(h&&(!f||!f.hasData()))continue;const y=h?v.projMatrix:t.transform.calculateProjMatrix(o,g),b=t.terrain&&h?t.terrain.stencilModeForRTTOverlap(v):p[v.overscaledZ],x=a?0:r.paint.get("raster-fade-duration");f.registerFadeDuration(x);const w=n.findLoadedParent(v,0),_=Tn(f,w,n,t.transform,x);let k,E;t.terrain&&t.terrain.prepareDrawTile();const S="nearest"===r.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),f.texture.bind(S,l.CLAMP_TO_EDGE),s.activeTexture.set(l.TEXTURE1),w?(w.texture.bind(S,l.CLAMP_TO_EDGE),k=Math.pow(2,w.tileID.overscaledZ-f.tileID.overscaledZ),E=[f.tileID.canonical.x*k%1,f.tileID.canonical.y*k%1]):f.texture.bind(S,l.CLAMP_TO_EDGE),f.texture.useMipmap&&s.extTextureFilterAnisotropic&&t.transform.pitch>20&&l.texParameterf(l.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax);const C=Qn(y,E||[0,0],k||1,_,r,c instanceof Me?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(s,u,o),c instanceof Me)c.boundsBuffer&&c.boundsSegments&&u.draw(s,l.TRIANGLES,i,e.StencilMode.disabled,d,e.CullFaceMode.disabled,C,r.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{const{tileBoundsBuffer:n,tileBoundsIndexBuffer:o,tileBoundsSegments:a}=t.getTileBoundsBuffers(f);u.draw(s,l.TRIANGLES,i,b,d,e.CullFaceMode.disabled,C,r.id,n,o,a)}}t.resetStencilClippingMasks()},background:function(t,n,r,i){const o=r.paint.get("background-color"),a=r.paint.get("background-opacity");if(0===a)return;const s=t.context,l=s.gl,c=t.transform,u=c.tileSize,d=r.paint.get("background-pattern");if(t.isPatternMissing(d))return;const h=!d&&1===o.a&&1===a&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==h)return;const p=e.StencilMode.disabled,f=t.depthModeForSublayer(0,"opaque"===h?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),m=t.colorModeForRenderPass(),g=t.useProgram(d?"backgroundPattern":"background");let v,y=i;y||(v=t.getBackgroundTiles(),y=Object.values(v).map((e=>e.tileID))),d&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));for(const b of y){const h=b.toUnwrapped(),y=i?b.projMatrix:t.transform.calculateProjMatrix(h);t.prepareDrawTile();const x=n?n.getTile(b):v?v[b.key]:new e.Tile(b,u,c.zoom,t),w=d?ar(y,a,t,d,{tileID:b,tileSize:u}):or(y,a,o);t.prepareDrawProgram(s,g,h);const{tileBoundsBuffer:_,tileBoundsIndexBuffer:k,tileBoundsSegments:E}=t.getTileBoundsBuffers(x);g.draw(s,l.TRIANGLES,f,p,m,e.CullFaceMode.disabled,w,r.id,_,k,E)}},sky:function(t,n,r){const i=t.transform,o="mercator"===i.projection.name||"globe"===i.projection.name?1:e.smoothstep(7,8,i.zoom),a=r.paint.get("sky-opacity")*o;if(0===a)return;const s=t.context,l=r.paint.get("sky-type"),c=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),u=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?r.needsSkyboxCapture(t)&&(function(t,n,r,i){const o=t.context,a=o.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new Ar(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let e=0;e<6;++e)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);const l=n.getCenter(t,!0),c=t.useProgram("skyboxCapture"),u=new Float64Array(16);e.identity(u),e.rotateY(u,u,.5*-Math.PI),Pr(o,n,c,u,l,0),e.identity(u),e.rotateY(u,u,.5*Math.PI),Pr(o,n,c,u,l,1),e.identity(u),e.rotateX(u,u,.5*-Math.PI),Pr(o,n,c,u,l,2),e.identity(u),e.rotateX(u,u,.5*Math.PI),Pr(o,n,c,u,l,3),e.identity(u),Pr(o,n,c,u,l,4),e.identity(u),e.rotateY(u,u,Math.PI),Pr(o,n,c,u,l,5),o.viewport.set([0,0,t.width,t.height])}(t,r),r.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,r,i,o){const a=t.context,s=a.gl,l=t.transform,c=t.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const u=((e,t,n,r,i)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:r,u_temporal_offset:i}))(l.skyboxMatrix,n.getCenter(t,!1),0,i,o);t.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,c,a,u):"gradient"===l&&"sky"===t.renderPass&&function(t,n,r,i,o){const a=t.context,s=a.gl,l=t.transform,c=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Ar(a)),a.activeTexture.set(s.TEXTURE0);let u=n.colorRampTexture;u||(u=n.colorRampTexture=new e.Texture(a,n.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const d=((t,n,r,i,o)=>({u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(r),u_opacity:i,u_temporal_offset:o}))(l.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),i,o);t.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,d,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,c,a,u)},debug:function(e,t,n){for(let r=0;r<n.length;r++)Er(e,t,n[r])},custom:function(t,n,r,i){const o=t.context,a=r.implementation;if(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes("custom")||t.terrain&&(t.terrain.renderingToTexture||"offscreen"===t.renderPass)&&r.isLayerDraped()){if("offscreen"===t.renderPass){const n=a.prerender;if(n){if(t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),"globe"===t.transform.projection.name){const r=t.transform.pointMerc;n.call(a,o.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[r.x,r.y],t.transform.pixelsPerMeterRatio)}else n.call(a,o.gl,t.transform.customLayerMatrix());o.setDirty(),t.setBaseState()}}else if("translucent"===t.renderPass){if(t.terrain&&t.terrain.renderingToTexture){const n=a.renderToTile;if(n){const r=i[0].canonical,s=new e.MercatorCoordinate(r.x+i[0].wrap*(1<<r.z),r.y,r.z);o.setDepthMode(e.DepthMode.disabled),o.setStencilMode(e.StencilMode.disabled),o.setColorMode(t.colorModeForRenderPass()),t.setCustomLayerDefaults(),n.call(a,o.gl,s),o.setDirty(),t.setBaseState()}return}t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),o.setStencilMode(e.StencilMode.disabled);const n="3d"===a.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);if(o.setDepthMode(n),"globe"===t.transform.projection.name){const n=t.transform.pointMerc;a.render(o.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[n.x,n.y],t.transform.pixelsPerMeterRatio)}else a.render(o.gl,t.transform.customLayerMatrix());o.setDirty(),t.setBaseState(),o.bindFramebuffer.set(null)}}else e.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class zr{constructor(t,n,r=!1){this.context=new Ee(t,r),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(e,t){const n=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new An(this,e));const r=this._terrain;this.transform.elevation=n?r:null,r.update(e,this.transform,t)}_updateFog(e){const t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,r]=t.getFovAdjustedRange(this.transform._fov);if(n>r)return void(this.transform.fogCullDistSq=null);const i=n+.78*(r-n);this.transform.fogCullDistSq=i*i}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,n){if(this.width=t*e.exported.devicePixelRatio,this.height=n*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize()}setup(){const t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(e.EXTENT,0,e.EXTENT,0),o.emplaceBack(0,e.EXTENT,0,e.EXTENT),o.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(o,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a);const s=new e.StructArrayLayout1ui2;for(const e of[0,1,3,2,0])s.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Lr(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Cn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(t,n,r){if(!n||this.currentStencilSource===n.id||!t.isTileClipped()||!r||0===r.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(const t of r)if(void 0===this._tileClippingMaskIDs[t.key]){e=!0;break}if(!e)return}this.currentStencilSource=n.id;const i=this.context,o=i.gl;this.nextStencilID+r.length>256&&this.clearStencil(),i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const s of r){const t=n.getTile(s),r=this._tileClippingMaskIDs[s.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:c,tileBoundsSegments:u}=this.getTileBoundsBuffers(t);a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},r,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Cn(s.projMatrix),"$clipping",l,c,u)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(t){const n=this.context.gl,r=t.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const t={};for(let r=0;r<o;r++)t[r+i]=new e.StencilMode({func:n.GEQUAL,mask:255},r+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[t,r]}return[{[i]:e.StencilMode.disabled},r]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,n,r){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,n){this.style=t,this.options=n,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const r=this.style.order,i=this.style._sourceCaches;for(const e in i){const t=i[e];t.used&&t.prepare(this.context)}const o={},a={},s={};for(const e in i){const t=i[e];o[e]=t.getVisibleCoordinates(),a[e]=o[e].slice().reverse(),s[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<r.length;e++)if(this.style._layers[r[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),!e.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const e of r){const n=this.style._layers[e],r=t._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const i=r?a[r.id]:void 0;("custom"===n.type||n.isSky()||i&&i.length)&&this.renderLayer(this,r,n,i)}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon];const l=this.terrain;if(l&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&l.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky())continue;const i=n?a[n.id]:void 0;this._renderTileClippingMasks(e,n,i),this.renderLayer(this,n,e,i)}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,n){const r=t.context,i=r.gl,o=t.transform,a=new e.DepthMode(i.LEQUAL,e.DepthMode.ReadOnly,[0,1]),s=t.useProgram("globeAtmosphere",null,"globe"===o.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=e.globeToMercatorTransition(o.zoom),c=n.properties.get("color").toArray01(),u=n.properties.get("high-color").toArray01(),d=n.properties.get("space-color").toArray01PremultipliedAlpha(),h=e.identity$1([]);e.rotateY$1(h,h,-e.degToRad(o._center.lng)),e.rotateX$1(h,h,e.degToRad(o._center.lat)),e.rotateZ$1(h,h,o.angle),e.rotateX$1(h,h,-o._pitch);const p=e.fromQuat(new Float32Array(16),h),f=e.mapValue(n.properties.get("star-intensity"),0,1,0,.25),m=5e-4,g=e.mapValue(n.properties.get("horizon-blend"),0,1,m,.25),v=e.globeUseCustomAntiAliasing(t,r,o)&&g===m?o.worldSize/(2*Math.PI*1.025)-1:o.globeRadius,y=t.frameCounter/1e3%1,b=e.length(o.globeCenterInViewSpace),x=Math.sqrt(Math.pow(b,2)-Math.pow(v,2)),w=Math.acos(x/b),_=((t,n,r,i,o,a,s,l,c,u,d,h,p,f)=>({u_frustum_tl:t,u_frustum_tr:n,u_frustum_br:r,u_frustum_bl:i,u_horizon:o,u_transition:a,u_fadeout_range:s,u_color:l,u_high_color:c,u_space_color:u,u_star_intensity:d,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:h,u_horizon_angle:p,u_rotation_matrix:f}))(o.frustumCorners.TL,o.frustumCorners.TR,o.frustumCorners.BR,o.frustumCorners.BL,o.frustumCorners.horizon,l,g,c,u,d,f,y,w,p);t.prepareDrawProgram(r,s);const k=t.atmosphereBuffer;k&&s.draw(r,i.TRIANGLES,a,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,_,"skybox",k.vertexBuffer,k.indexBuffer,k.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,n,e,n?a[n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=n?("symbol"===e.type?s:a)[n.id]:void 0;this._renderTileClippingMasks(e,n,n?o[n.id]:void 0),this.renderLayer(this,n,e,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let n=null;e.values(this.style._layers).forEach((e=>{const r=t._getLayerSourceCache(e);r&&!e.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<r.getSource().maxzoom)&&(n=r)})),n&&this.options.showTileBoundaries&&Rr.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;Sr(e,e.transform.height-(t.top||0),3,br),Sr(e,t.bottom||0,3,xr),Cr(e,t.left||0,3,wr),Cr(e,e.transform.width-(t.right||0),3,_r);const n=e.transform.centerPoint;!function(e,t,n,r){Tr(e,t-1,n-10,2,20,r),Tr(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,kr)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(n.type)||e.terrain&&"custom"===n.type)&&Rr[n.type](e,t,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){const e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){const t={};for(const n in e){const r=e[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=o}return t}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;const t=this.context.extTimerQuery;let n=0;for(const r of e)n+=t.getQueryObjectEXT(r,t.QUERY_RESULT_EXT)/1e6,t.deleteQueryEXT(r);return n}translatePosMatrix(t,n,r,i,o){if(!r[0]&&!r[1])return t;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}const s=[o?r[0]:O(n,r[0],this.transform.zoom),o?r[1]:O(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,r=[];return this.terrainRenderModeElevated()&&r.push("TERRAIN"),"globe"===this.transform.projection.name&&r.push("GLOBE"),t&&r.push("ZERO_EXAGGERATION"),n&&!e&&0!==n.getOpacity(this.transform.pitch)&&r.push("FOG"),e&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}useProgram(e,t,n){this.cache=this.cache||{};const r=n||[],i=this.currentGlobalDefines().concat(r),o=Pn.cacheKey(un[e],e,i,t);return this.cache[o]||(this.cache[o]=new Pn(this.context,e,un[e],t,sr[e],i)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(t,n,r){if(this.terrain&&this.terrain.renderingToTexture)return;const i=this.style.fog;if(i){const o=i.getOpacity(this.transform.pitch),a=((t,n,r,i,o,a,s,l,c,u,d)=>{const h=t.transform,p=n.properties.get("color").toArray01();p[3]=i;const f=t.frameCounter/1e3%1;return{u_fog_matrix:r?h.calculateFogTileMatrix(r):t.identityMat,u_fog_range:n.getFovAdjustedRange(h._fov),u_fog_color:p,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:f,u_frustum_tl:o,u_frustum_tr:a,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:u,u_viewport:d,u_globe_transition:e.globeToMercatorTransition(h.zoom),u_is_globe:+("globe"===h.projection.name)}})(this,i,r,o,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);n.setFogUniformValues(t,a)}}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){const e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,n=this._backgroundTiles={},r=this.transform.coveringTiles({tileSize:512});for(const i of r)n[i.key]=t[i.key]||new e.Tile(i,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}}class jr{constructor(e=0,t=0,n=0,r=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=r}interpolate(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this}getCenter(t,n){const r=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.Point(r,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new jr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Nr(t,n){const r=e.getColumn(t,3);e.fromQuat(t,n),e.setColumn(t,3,r)}function Br(t,n){const r=e.identity$1([]);return e.rotateZ$1(r,r,-n),e.rotateX$1(r,r,-t),r}function Fr(t,n){const r=[t[0],t[1],0],i=[n[0],n[1],0];if(e.length(r)>=1e-15){const t=e.normalize([],r);e.scale$2(i,t,e.dot(i,t)),n[0]=i[0],n[1]=i[1]}const o=e.cross([],n,t);if(e.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return Br(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),a)}class Vr{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){if(t){const n=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(n.x=e.wrap(n.x,0,1)),this._position=n}else this._position=null}lookAtPoint(t,n){if(this.orientation=null,!this.position)return;const r=this.position,i=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,o=e.MercatorCoordinate.fromLngLat(t,i),a=[o.x-r.x,o.y-r.y,o.z-r.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=Fr(a,n)}setPitchBearing(t,n){this.orientation=Br(e.degToRad(t),e.degToRad(-n))}}class Ur{constructor(t,n){this._transform=e.identity([]),this.orientation=n,this.position=t}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var n;t&&e.setColumn(this._transform,3,[(n=t)[0],n[1],n[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||e.identity$1([]),t&&Nr(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Br(e,t),Nr(this._transform,this._orientation)}forward(){const t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,n){const r=new Float64Array(16);return e.invert(r,this.getWorldToCamera(t,n)),r}getWorldToCameraPosition(t,n,r){const i=this.position;e.scale$2(i,i,-t);const o=new Float64Array(16);return e.fromScaling(o,[r,r,r]),e.translate(o,o,i),o[10]*=n,o}getWorldToCamera(t,n){const r=new Float64Array(16),i=new Float64Array(4),o=this.position;return e.conjugate(i,this._orientation),e.scale$2(o,o,-t),e.fromQuat(r,i),e.translate(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}getCameraToClipPerspective(t,n,r,i){const o=new Float64Array(16);return e.perspective(o,t,n,r,i),o}getDistanceToElevation(t,n=!1){const r=0===t?0:e.mercatorZfromAltitude(t,n?e.latFromMercatorY(this.position[1]):this.position[1]),i=this.forward();return(r-this.position[2])/i[2]}clone(){return new Ur([...this.position],[...this.orientation])}}function $r(t,n){const r=Hr(t.projection,t.zoom,t.width,t.height),i=function(t,n,r,i,o){const a=new e.LngLat(r.lng-180*Wr,r.lat),s=new e.LngLat(r.lng+180*Wr,r.lat),l=t.project(a.lng,a.lat),c=t.project(s.lng,s.lat),u=-Math.atan2(c.y-l.y,c.x-l.x),d=e.MercatorCoordinate.fromLngLat(r);d.y=e.clamp(d.y,-1+Wr,1-Wr);const h=d.toLngLat(),p=t.project(h.lng,h.lat),f=e.MercatorCoordinate.fromLngLat(h);f.x+=Wr;const m=f.toLngLat(),g=t.project(m.lng,m.lat),v=Gr(g.x-p.x,g.y-p.y,u),y=e.MercatorCoordinate.fromLngLat(h);y.y+=Wr;const b=y.toLngLat(),x=t.project(b.lng,b.lat),w=Gr(x.x-p.x,x.y-p.y,u),_=Math.abs(v.x)/Math.abs(w.y),k=e.identity([]);e.rotateZ(k,k,-u*(1-(o?0:i)));const E=e.identity([]);return e.scale(E,E,[1,1-(1-_)*i,1]),E[4]=-w.x/w.y*i,e.rotateZ(E,E,u),e.multiply(E,k,E),E}(t.projection,0,t.center,r,n),o=Zr(t);return e.scale(i,i,[o,o,1]),i}function Zr(t){const n=t.projection,r=Hr(t.projection,t.zoom,t.width,t.height),i=qr(n,t.center),o=qr(n,e.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*o)}function Hr(t,n,r,i,o=1/0){const a=t.range;if(!a)return 0;const s=Math.min(o,Math.max(r,i)),l=Math.log(s/1024)/Math.LN2;return e.smoothstep(a[0]+l,a[1]+l,n)}const Wr=1/4e4;function qr(t,n){const r=e.clamp(n.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=new e.LngLat(n.lng-180*Wr,r),o=new e.LngLat(n.lng+180*Wr,r),a=t.project(i.lng,r),s=t.project(o.lng,r),l=e.MercatorCoordinate.fromLngLat(i),c=e.MercatorCoordinate.fromLngLat(o),u=s.x-a.x,d=s.y-a.y,h=c.x-l.x,p=c.y-l.y,f=Math.sqrt((h*h+p*p)/(u*u+d*d));return Math.log(f)/Math.LN2}function Gr(e,t,n){const r=Math.cos(n),i=Math.sin(n);return{x:e*r-t*i,y:e*i+t*r}}class Kr{constructor(t,n,r,i,o,a,s){this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setProjection(a),this.setMaxBounds(s),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new jr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Ur,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const e=new Kr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(e,t=!1){const n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(e||n)&&this._constrainCamera(t),this._calcMatrices()}getProjection(){return e.pick(this.projection,["name","center","parallels"])}setProjection(n){this.projectionOptions=n||{name:"mercator"};const r=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);const i=!t(r,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});const n=t!==this.projection.name;return n&&this._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.Point(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const n=-t*Math.PI/180;var r;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(r=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=r*-s+o*l,e[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop();let i=0,o=0;for(let a=0;a<n.length;a++){const s=new e.Point(n[a][0]*this.width,r+n[a][1]*(this.height-r)),l=t.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*c,o+=c}return 0===o?NaN:i/o}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*t,r=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),o=Math.max(r-n,i);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let r;r=t.z<this._camera.position[2]?[n.x,n.y,n.z]:[t.x,t.y,t.z];const i=e.length(e.sub([],this._camera.position,r));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){const r=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,n=new Vr;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const n=e.transformQuat([],[0,0,-1],t),r=e.transformQuat([],[0,-1,0],t);if(r[2]<0)return!1;const i=Fr(n,r);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(t){const n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/r,i/n),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const n=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const r=this.pointCoordinate(new e.Point(0,0)),i=this.pointCoordinate(new e.Point(this.width,0)),o=this.pointCoordinate(new e.Point(this.width,this.height)),a=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),c=1;for(let u=s-c;u<=l+c;u++)0!==u&&n.push(new e.UnwrappedTileID(u,t))}return n}coveringTiles(t){let n=this.coveringZoomLevel(t);const r=n,i=this.elevation&&!t.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);const a=this.locationCoordinate(this.center),s=this.center.lat,l=1<<n,c=[l*a.x,l*a.y,0],u="globe"===this.projection.name,d=!u,h=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,d),p=u?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),f=l*e.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),g=[l*p.x,l*p.y,m*(d?1:f)],v=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),y=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,b=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,x=t.isTerrainDEM?-b:this._elevation?this._elevation.getMinElevationBelowMSL():0,w=this.projection.isReprojectedInTileSpace?Zr(this):1,_=t=>{const n=1/4e4,r=new e.MercatorCoordinate(t.x+n,t.y,t.z),i=new e.MercatorCoordinate(t.x,t.y+n,t.z),o=t.toLngLat(),a=r.toLngLat(),s=i.toLngLat(),l=this.locationCoordinate(o),c=this.locationCoordinate(a),u=this.locationCoordinate(s),d=Math.hypot(c.x-l.x,c.y-l.y),h=Math.hypot(u.x-l.x,u.y-l.y);return Math.sqrt(d*h)*w/n},k=t=>{const n=b,r=x;return{aabb:e.tileAABB(this,l,0,0,0,t,r,n,this.projection),zoom:0,x:0,y:0,minZ:r,maxZ:n,wrap:t,fullyVisible:!1}},E=[];let S=[];const C=n,T=t.reparseOverscaled?r:n,M=e=>e*e,I=M((m-this._centerAltitude)*f),O=e=>{if(!this._elevation||!e.tileID||!o)return;const t=this._elevation.getMinMaxForTile(e.tileID),n=e.aabb;t?(n.min[2]=t.min,n.max[2]=t.max,n.center[2]=(n.min[2]+n.max[2])/2):(e.shouldSplit=A(e),e.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},A=t=>{if(t.zoom<y)return!0;if(t.zoom===C)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const n=t.aabb.distanceX(g),o=t.aabb.distanceY(g);let a=I,l=1;if(u){a=M(t.aabb.distanceZ(g));const n=Math.pow(2,t.zoom),r=e.latFromMercatorY((t.y+1)/n),i=e.latFromMercatorY(t.y/n),o=Math.min(Math.max(s,r),i),c=e.circumferenceAtLatitude(o)/e.circumferenceAtLatitude(s);if(l=o===s?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,c/this._mercatorScaleRatio),this.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===C-1&&c>=.9)return!0}else if(i&&(a=M(t.aabb.distanceZ(g)*f)),this.projection.isReprojectedInTileSpace&&r<=5){const n=Math.pow(2,t.zoom),r=_(new e.MercatorCoordinate((t.x+.5)/n,(t.y+.5)/n));l=r>.85?1:r}const c=n*n+o*o+a,d=M((1<<C-t.zoom)*v*l*((e,t)=>{if(t*M(.707)<e)return 1;const n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(a,I),c));return c<d};if(this.renderWorldCopies)for(let e=1;e<=3;e++)E.push(k(-e)),E.push(k(e));for(E.push(k(0));E.length>0;){const r=E.pop(),a=r.x,s=r.y;let d=r.fullyVisible;if(!d){const e=r.aabb.intersects(h);if(0===e)continue;d=2===e}if(r.zoom!==C&&A(r))for(let t=0;t<4;t++){const n=(a<<1)+t%2,c=(s<<1)+(t>>1),h={aabb:o?r.aabb.quadrant(t):e.tileAABB(this,l,r.zoom+1,n,c,r.wrap,r.minZ,r.maxZ,this.projection),zoom:r.zoom+1,x:n,y:c,wrap:r.wrap,fullyVisible:d,tileID:void 0,shouldSplit:void 0,minZ:r.minZ,maxZ:r.maxZ};i&&!u&&(h.tileID=new e.OverscaledTileID(r.zoom+1===C?T:r.zoom+1,r.wrap,r.zoom+1,n,c),O(h)),E.push(h)}else{const i=r.zoom===C?T:r.zoom;if(t.minzoom&&t.minzoom>i)continue;const o=c[0]-(.5+a+(r.wrap<<r.zoom))*(1<<n-r.zoom),l=c[1]-.5-s,u=r.tileID?r.tileID:new e.OverscaledTileID(i,r.wrap,r.zoom,a,s);S.push({tileID:u,distanceSq:o*o+l*l})}}if(this.fogCullDistSq){const n=this.fogCullDistSq,r=this.horizonLineFromTop();S=S.filter((i=>{const o=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],s=this.calculateFogTileMatrix(i.tileID.toUnwrapped());e.transformMat4$1(o,o,s),e.transformMat4$1(a,a,s);const l=e.getAABBPointSquareDist(o,a);if(0===l)return!0;let c=!1;const u=this._elevation;if(u&&l>n&&0!==r){const n=this.calculateProjMatrix(i.tileID.toUnwrapped());let o;t.isTerrainDEM||(o=u.getMinMaxForTile(i.tileID)),o||(o={min:x,max:b});const a=e.furthestTileCorner(this.rotation),s=[a[0]*e.EXTENT,a[1]*e.EXTENT,o.max];e.transformMat4(s,s,n),c=(1-s[1])*this.height*.5<r}return l<n||c}))}return S.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const n=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=this.projection.project(t.lng,n);return new e.Point(r.x*this.worldSize,r.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/e.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(t,n){let r,i;const o=this.centerPoint;if("globe"===this.projection.name){const e=this.worldSize;r=(n.x-o.x)/e,i=(n.y-o.y)/e}else{const e=this.pointCoordinate(n),t=this.pointCoordinate(o);r=e.x-t.x,i=e.y-t.y}const a=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(a.x-r,a.y-i))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this.projection.locationPoint(this,e,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t,n){const r=n?e.mercatorZfromAltitude(n,t.lat):void 0,i=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(i.x,i.y,r)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,n){const r=null!=n?n:this._centerAltitude,i=[t.x,t.y,0,1],o=[t.x,t.y,1,1];e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(o,o,this.pixelMatrixInverse);const a=o[3];e.scale$1(i,i,1/i[3]),e.scale$1(o,o,1/a);const s=i[2],l=o[2];return{p0:i,p1:o,t:s===l?0:(r-s)/(l-s)}}screenPointToMercatorRay(t){const n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];return e.transformMat4$1(n,n,this.pixelMatrixInverse),e.transformMat4$1(r,r,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(r,r,1/r[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(r,r,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],r,n)))}rayIntersectionCoordinate(t){const{p0:n,p1:r,t:i}=t,o=e.mercatorZfromAltitude(n[2],this._center.lat),a=e.mercatorZfromAltitude(r[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],r[0],i)/this.worldSize,e.number(n[1],r[1],i)/this.worldSize,e.number(o,a,i))}pointCoordinate(e,t=this._centerAltitude){return this.projection.pointCoordinate(this,e.x,e.y,t)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);let n=this.projection.pointCoordinate3D(this,t.x,t.y);if(n)return new e.MercatorCoordinate(n[0],n[1],n[2]);let r=0,i=this.horizonLineFromTop();if(t.y>i)return this.pointCoordinate(t);const o=.02*i,a=t.clone();for(let s=0;s<10&&i-r>o;s++){a.y=e.number(r,i,.66);const t=this.projection.pointCoordinate3D(this,a.x,a.y);t?(i=a.y,n=t):r=a.y}return n?new e.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}isPointOnSurface(t){if(t.y<0||t.y>this.height||t.x<0||t.x>this.width)return!1;if(this.elevation||this.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(t);const n=this.pointCoordinate(t);return n.y>=0&&n.y<=1}_coordinatePoint(t,n){const r=n&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,r+t.toAltitude(),1];return e.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new e.Point(i[0]/i[3],i[1]/i[3]):new e.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:t,left:n}=this._edgeInsets,r=this.height-this._edgeInsets.bottom,i=this.width-this._edgeInsets.right,o=this.pointLocation3D(new e.Point(n,t)),a=this.pointLocation3D(new e.Point(i,t)),s=this.pointLocation3D(new e.Point(i,r)),l=this.pointLocation3D(new e.Point(n,r));let c=Math.min(o.lng,a.lng,s.lng,l.lng),u=Math.max(o.lng,a.lng,s.lng,l.lng),d=Math.min(o.lat,a.lat,s.lat,l.lat),h=Math.max(o.lat,a.lat,s.lat,l.lat);const p=Math.pow(2,-this.zoom)/16*270,f="globe"===this.projection.name?1:4,m=(t,n,r,i,o)=>{const a=(t+r)/2,s=(n+i)/2,l=new e.Point(a,s),{lng:g,lat:v}=this.pointLocation3D(l),y=Math.max(0,c-g,d-v,g-u,v-h);c=Math.min(c,g),u=Math.max(u,g),d=Math.min(d,v),h=Math.max(h,v),(o<f||y>p)&&(m(t,n,a,s,o+1),m(a,s,r,i,o+1))};if(m(n,t,i,t,1),m(i,t,i,r,1),m(i,r,n,r,1),m(n,r,n,t,1),"globe"===this.projection.name){const[t,n]=e.polesInViewport(this);t?(h=90,u=180,c=-180):n&&(d=-90,u=180,c=-180)}return new e.LngLatBounds(new e.LngLat(c,d),new e.LngLat(u,h))}_getBoundsRectangular(t,n){const{top:r,left:i}=this._edgeInsets,o=this.height-this._edgeInsets.bottom,a=this.width-this._edgeInsets.right,s=new e.Point(i,r),l=new e.Point(a,r),c=new e.Point(a,o),u=new e.Point(i,o);let d=this.pointCoordinate(s,t),h=this.pointCoordinate(l,t);const p=this.pointCoordinate(c,n),f=this.pointCoordinate(u,n),m=(e,t)=>(t.y-e.y)/(t.x-e.x);return d.y>1&&h.y>=0?d=new e.MercatorCoordinate((1-f.y)/m(f,d)+f.x,1):d.y<0&&h.y<=1&&(d=new e.MercatorCoordinate(-f.y/m(f,d)+f.x,0)),h.y>1&&d.y>=0?h=new e.MercatorCoordinate((1-p.y)/m(p,h)+p.x,1):h.y<0&&d.y<=1&&(h=new e.MercatorCoordinate(-p.y/m(p,h)+p.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(d)).extend(this.coordinateLocation(h)).extend(this.coordinateLocation(f)).extend(this.coordinateLocation(p))}_getBoundsRectangularTerrain(){const e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);const t=e.visibleDemTiles.reduce(((e,t)=>{if(t.dem){const n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(e=!0){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,n):n}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,t){return this.projection.createTileMatrix(this,t,e)}calculateDistanceTileData(t){const n=t.key,r=this._distanceTileDataCache;if(r[n])return r[n];const i=t.canonical,o=1/this.height,a=this.cameraWorldSize,s=a/this.zoomScale(i.z),l=(i.x+Math.pow(2,i.z)*t.wrap)*s,c=i.y*s,u=this.point;u.x*=a/this.worldSize,u.y*=a/this.worldSize;const d=this.angle,h=Math.sin(-d),p=-Math.cos(-d);return r[n]={bearing:[h,p],center:[(u.x-l)*o,(u.y-c)*o],scale:s/e.EXTENT*o},r[n]}calculateFogTileMatrix(t){const n=t.key,r=this._fogTileMatrixCache;if(r[n])return r[n];const i=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.multiply(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}calculateProjMatrix(t,n=!1){const r=t.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];const o=this.calculatePosMatrix(t,this.worldSize);return e.multiply(o,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,o),i[r]=new Float32Array(o),i[r]}calculatePixelsToTileUnitsMatrix(t){const n=t.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];const i=function(t,n){const{scale:r}=t.tileTransform,i=r*e.EXTENT/(t.tileSize*Math.pow(2,n.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return o=new Float32Array(4),l=(a=n.inverseAdjustmentMatrix)[1],c=a[2],u=a[3],h=(s=[i,i])[1],o[0]=a[0]*(d=s[0]),o[1]=l*d,o[2]=c*h,o[3]=u*h,o;var o,a,s,l,c,u,d,h}(t,this);return r[n]=i,r[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const t=1/this.worldSize,n=e.fromScaling([],[t,t,t]);return e.multiply(n,n,this.globeMatrix),n}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const t=this._elevation;this._updateCameraState();const n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=this._camera.forward(),o=e.mercatorZfromAltitude(1,this._center.lat);r[2]/=o,i[2]/=o,e.normalize(i,i);const a=t.raycast(r,i,t.exaggeration());if(a){const t=e.scaleAndAdd([],r,i,a),n=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),s=(n.z+e.length([n.x-r[0],n.y-r[1],n.z-r[2]*o]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(s),this._centerAltitude=n.toAltitude(),this._center=this.coordinateLocation(n),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(t=!1){if(!this._elevation)return;const n=this._elevation,r=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(r),o=n.getAtPointOrZero(new e.MercatorCoordinate(...i)),a=this.pixelsPerMeter/this.worldSize*o,s=this._minimumHeightOverTerrain(),l=i[2]-a;if(l<=s)if(l<0||t){const t=this.locationCoordinate(this._center,this._centerAltitude),n=[i[0],i[1],t.z-i[2]],r=e.length(n);n[2]-=(s-l)/this._pixelsPerMercatorPixel;const o=e.length(n);if(0===o)return;e.scale$2(n,n,r/o*this._pixelsPerMercatorPixel),this._camera.position=[i[0],i[1],t.z*this._pixelsPerMercatorPixel-n[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const n=this.center;return n.lat=e.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(n.lng=e.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}const n=this._unmodified,{x:r,y:i}=this.point;let o=0,a=r,s=i;const l=this.width/2,c=this.height/2,u=this.worldMinY*this.scale,d=this.worldMaxY*this.scale;if(i-c<u&&(s=u+c),i+c>d&&(s=d-c),d-u<this.height&&(o=Math.max(o,this.height/(d-u)),s=(d+u)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,n=this.worldSize/2-(e+t)/2;a=(r+n+this.worldSize)%this.worldSize-n,a-l<e&&(a=e+l),a+l>t&&(a=t-l),t-e<this.width&&(o=Math.max(o,this.width/(t-e)),a=(t+e)/2)}a===r&&s===i||(this.center=this.unproject(new e.Point(a,s))),o&&(this.zoom+=this.scaleZoom(o)),this._constrainCamera(),this._unmodified=n,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));const r=Hr(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,r),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const i="meters"===this.projection.zAxisUnit?n:1,o=this._camera.getWorldToCamera(this.worldSize,i),a=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);a[8]=2*-t.x/this.width,a[9]=2*t.y/this.height;let s=e.mul([],a,o);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),n=e.identity([]);e.translate(n,n,[t.x*this.worldSize,t.y*this.worldSize,0]),e.multiply(n,n,$r(this)),e.translate(n,n,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.multiply(s,s,n),this.inverseAdjustmentMatrix=function(e){const t=$r(e,!0);return y([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],s,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=s,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const l=e.invert([],a);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(l,this.horizonLineFromTop(),this.height);const c=new Float32Array(16);e.identity(c),e.scale(c,c,[1,-1,1]),e.rotateX(c,c,this._pitch),e.rotateZ(c,c,this.angle);const u=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),d=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;u[8]=2*-t.x/this.width,u[9]=2*(t.y+d)/this.height,this.skyboxMatrix=e.multiply(c,u,c);const h=this.point,p=h.x,f=h.y,m=this.width%2/2,g=this.height%2/2,v=Math.cos(this.angle),b=Math.sin(this.angle),x=p-Math.round(p)+v*m+b*g,w=f-Math.round(f)+v*g+b*m,_=new Float64Array(s);if(e.translate(_,_,[x>.5?x-1:x,w>.5?w-1:w,0]),this.alignedProjMatrix=_,s=e.create(),e.scale(s,s,[this.width/2,-this.height/2,1]),e.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=e.create(),e.scale(s,s,[1,-1,1]),e.translate(s,s,[-1,-1,0]),e.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},s=e.invert(new Float64Array(16),this.pixelMatrix),!s)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=s,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);const t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(t,t,o),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,o=[t,t,n];e.scale$2(o,o,i),e.scale$2(r,r,-1),e.multiply$2(r,r,o);const a=e.create();e.translate(a,a,r),e.scale(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,n,i)}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),r=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-n[0]*i,r.y/this.worldSize-n[1]*i,e/this.worldSize*this._centerAltitude-n[2]*i]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=this._camera.position[2],i=t[2];let o=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(o=Math.min((n-r)/i,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,o),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,n=this._camera.forward(),{pitch:r,bearing:i}=this._camera.getPitchBearing(),o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),s=Math.max((t[2]-o)/Math.cos(r),a),l=this._zoomFromMercatorZ(s);e.scaleAndAdd(t,t,n,s),this._pitch=e.clamp(r,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(i,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}zoomFromMercatorZAdjusted(t){let n=0,r=e.GLOBE_ZOOM_THRESHOLD_MAX,i=0,o=1/0;for(;r-n>1e-6&&r>n;){const e=n+.5*(r-n),a=this.tileSize*Math.pow(2,e),s=this.getCameraToCenterDistance(this.projection,e,a),l=this.scaleZoom(s/(t*this.tileSize)),c=Math.abs(e-l);c<o&&(o=c,i=e),e<l?n=e:r=e}return i}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(t,n){const r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),o=Math.min(t.y,n.y),a=Math.max(t.y,n.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new e.Point(r,o),new e.Point(i,a),new e.Point(r,a),new e.Point(i,o)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const e of s){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const n=this.rayIntersectionCoordinate(t);if(n.x<l||n.y<0||n.x>c||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.Point(0,0),new e.Point(this.width,this.height))}zoomDeltaToMovement(t,n){const r=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}getCameraPoint(){if("globe"===this.projection.name){const t=function([t,n,r],i){const o=[t,n,r,1];e.transformMat4$1(o,o,i);const a=o[3]=Math.max(o[3],1e-6);return o[0]/=a,o[1]/=a,o[2]/=a,o}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.Point(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))}}getCameraToCenterDistance(e,t=this.zoom,n=this.worldSize){const r=Hr(e,t,this.width,this.height,1024),i=e.pixelSpaceConversion(this.center.lat,n,r);return.5/Math.tan(.5*this._fov)*this.height*i}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}function Yr(e,t){let n=!1,r=null;const i=()=>{r=null,n&&(e(),r=setTimeout(i,t),n=!1)};return()=>(n=!0,r||i(),r)}class Xr{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Yr(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const t=this._map;if(!t)return"";const n=Jr(t);if(this._hashName){const t=this._hashName;let r=!1;const i=e.window.location.hash.slice(1).split("&").map((e=>{const i=e.split("=")[0];return i===t?(r=!0,`${i}=${n}`):e})).filter((e=>e));return r||i.push(`${t}=${n}`),`#${i.join("&")}`}return`#${n}`}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((e=>e.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._map;if(!e)return!1;const t=this._getCurrentHash();if(t.length>=3&&!t.some((e=>isNaN(e)))){const n=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:n,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}function Jr(e,t){const n=e.getCenter(),r=Math.round(100*e.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,l=e.getBearing(),c=e.getPitch();let u=t?`/${a}/${s}/${r}`:`${r}/${s}/${a}`;return(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+=`/${Math.round(c)}`),u}const Qr={linearity:.3,easing:e.bezier(0,0,.3,1)},ei=e.extend({deceleration:2500,maxSpeed:1400},Qr),ti=e.extend({deceleration:20,maxSpeed:1400},Qr),ni=e.extend({deceleration:1e3,maxSpeed:360},Qr),ri=e.extend({deceleration:1e3,maxSpeed:90},Qr);class ii{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,n=e.exported.now();for(;t.length>0&&n-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._map._prefersReducedMotion())return;if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)n.zoom+=e.zoomDelta||0,n.bearing+=e.bearingDelta||0,n.pitch+=e.pitchDelta||0,e.panDelta&&n.pan._add(e.panDelta),e.around&&(n.around=e.around),e.pinchAround&&(n.pinchAround=e.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=ai(n.pan.mag(),r,e.extend({},ei,t||{}));i.offset=n.pan.mult(o.amount/n.pan.mag()),i.center=this._map.transform.center,oi(i,o)}if(n.zoom){const e=ai(n.zoom,r,ti);i.zoom=this._map.transform.zoom+e.amount,oi(i,e)}if(n.bearing){const t=ai(n.bearing,r,ni);i.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),oi(i,t)}if(n.pitch){const e=ai(n.pitch,r,ri);i.pitch=this._map.transform.pitch+e.amount,oi(i,e)}if(i.zoom||i.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),i.noMoveStart=!0,i}}function oi(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function ai(t,n,r){const{maxSpeed:i,linearity:o,deceleration:a}=r,s=e.clamp(t*o/(n/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class si extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,r,i={}){const o=f(n.getCanvasContainer(),r),a=n.unproject(o);super(t,e.extend({point:o,lngLat:a,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}}class li extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,r){const i="touchend"===t?r.changedTouches:r.touches,o=m(n.getCanvasContainer(),i),a=o.map((e=>n.unproject(e))),s=o.reduce(((e,t,n,r)=>e.add(t.div(r.length))),new e.Point(0,0));super(t,{points:o,point:s,lngLats:a,lngLat:n.unproject(s),originalEvent:r}),this._defaultPrevented=!1}}class ci extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}}class ui{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){this._mousedownPos=void 0}wheel(e){return this._firePreventable(new ci(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new si(e.type,this._map,e))}mouseup(e){this._map.fire(new si(e.type,this._map,e))}preclick(t){const n=e.extend({},t);n.type="preclick",this._map.fire(new si(n.type,this._map,n))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new si(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new si(e.type,this._map,e))}mouseover(e){this._map.fire(new si(e.type,this._map,e))}mouseout(e){this._map.fire(new si(e.type,this._map,e))}touchstart(e){return this._firePreventable(new li(e.type,this._map,e))}touchmove(e){this._map.fire(new li(e.type,this._map,e))}touchend(e){this._map.fire(new li(e.type,this._map,e))}touchcancel(e){this._map.fire(new li(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class di{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(e){this._map.fire(new si(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new si("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new si(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hi{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(u(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t,r=this._startPos,i=this._lastPos;if(!r||!i||i.equals(n)||!this._box&&n.dist(r)<this._clickTolerance)return;this._lastPos=n,this._box||(this._box=o("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const a=Math.min(r.x,n.x),s=Math.max(r.x,n.x),l=Math.min(r.y,n.y),c=Math.max(r.y,n.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${a}px,${l}px)`,this._box.style.width=s-a+"px",this._box.style.height=c-l+"px")}))}mouseupWindow(t,n){if(!this._active)return;const r=this._startPos,i=n;if(r&&0===t.button){if(this.reset(),p(),r.x!==i.x||r.y!==i.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),d(),delete this._startPos,delete this._lastPos}_fireEvent(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}function pi(e,t){const n={};for(let r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}class fi{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){const n=new e.Point(0,0);for(const e of t)n._add(e);return n.div(t.length)}(n),this.touches=pi(r,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const r=pi(n,t);for(const i in this.touches){const e=r[i];(!e||e.dist(this.touches[i])>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class mi{constructor(e){this.singleTap=new fi(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const r=this.singleTap.touchend(e,t,n);if(r){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class gi{constructor(){this._zoomIn=new mi({numTouches:1,numTaps:2}),this._zoomOut=new mi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,t,n){const r=this._zoomIn.touchend(e,t,n),i=this._zoomOut.touchend(e,t,n);return r?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(r)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const vi={0:1,2:2};class yi{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const n=g(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}mousemoveWindow(e,t){const n=this._lastPoint;if(n)if(e.preventDefault(),null!=this._eventButton&&function(e,t){const n=vi[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}mouseupWindow(e){this._lastPoint&&g(e)===this._eventButton&&(this._moved&&p(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bi extends yi{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class xi extends yi{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(e){e.preventDefault()}}class wi extends yi{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(e){e.preventDefault()}}class _i{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(t,n,r){if(this._active&&!(r.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===r.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,n,r)}}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,n,r){r.length>0&&(this._active=!0);const i=pi(r,n),o=new e.Point(0,0),a=new e.Point(0,0);let s=0;for(const e in i){const t=i[e],n=this._touches[e];n&&(o._add(t),a._add(t.sub(n)),s++,i[e]=t)}if(this._touches=i,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class ki{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(e){}_move(e,t,n){return{}}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){const r=this._firstTwoTouches;if(!r)return;e.preventDefault();const[i,o]=r,a=Ei(n,t,i),s=Ei(n,t,o);if(!a||!s)return;const l=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],l,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,o=Ei(n,t,r),a=Ei(n,t,i);o&&a||(this._active&&p(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ei(e,t,n){for(let r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function Si(e,t){return Math.log(e/t)/Math.LN2}class Ci extends ki{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Si(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Si(this._distance,n),pinchAround:t}}}function Ti(e,t){return 180*e.angleWith(t)/Math.PI}class Mi extends ki{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const n=this._vector;if(this._vector=e[0].sub(e[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ti(this._vector,n),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;const r=Ti(e,n);return Math.abs(r)<t}}function Ii(e){return Math.abs(e.y)>Math.abs(e.x)}class Oi extends ki{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(e){this._lastPoints=e,Ii(e[0].sub(e[1]))&&(this._valid=!1)}_move(t,n,r){const i=this._lastPoints;if(!i)return;const o=t[0].sub(i[0]),a=t[1].sub(i[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&r.touches.length<3||(this._valid=this.gestureBeginsVertically(o,a,r.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(o.y+a.y)/2*-.5})}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const r=e.mag()>=2,i=t.mag()>=2;if(!r&&!i)return;if(!r||!i)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return Ii(e)&&Ii(t)&&o}}const Ai={panStep:100,bearingStep:15,pitchStep:10};class Pi{constructor(){const e=Ai;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,n=0,r=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Di,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Di(e){return e*(2-e)}const Li=4.000244140625;class Ri{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const r=e.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Li==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=f(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;"wheel"===this._type&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const n=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>Li?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==r&&(r=1/r);const i=n(),o=Math.pow(2,i),a="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=i,this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:n(),i=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&i&&o){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),n=o(t);a=e.number(i,r,n),t<1?this._frameId||(this._frameId=!0):s=!0}else a=r,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let n=e.ease;if(this._prevEase){const t=this._prevEase,r=(e.exported.now()-t.start)/t.duration,i=t.easing(r+.01)-t.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=e.bezier(o,a,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class zi{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ji{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,t){return e.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ni{constructor(){this._tap=new mi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bi{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Fi{constructor(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Vi{constructor(e,t,n,r){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ui=e=>e.zoom||e.drag||e.pitch||e.rotate;class $i extends e.Event{}class Zi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,n){const r=e.sub([],n,t);this.radius=e.length(r[2]<0?e.div([],r,this.constants):[r[0],r[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const n=e.scale$2([],t,this.radius);if(n[2]>0){const t=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),r=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),i=e.add([],n,e.scale$2([],e.sub([],e.add([],r,t),n),2));n[0]=i[0],n[1]=i[1]}return n}}function Hi(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Wi{constructor(t,n){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ii(t),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Zi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),e.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[i,o,a]of this._listeners)i.addEventListener(o,i===e.window.document?this.handleWindowEvent:this.handleEvent,a)}destroy(){for(const[t,n,r]of this._listeners)t.removeEventListener(n,t===e.window.document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(e){const t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new ui(t,e));const r=t.boxZoom=new hi(t,e);this._add("boxZoom",r);const i=new gi,o=new ji;t.doubleClickZoom=new zi(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const a=new Ni;this._add("tapDragZoom",a);const s=t.touchPitch=new Oi(t);this._add("touchPitch",s);const l=new xi(e),c=new wi(e);t.dragRotate=new Fi(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new bi(e),d=new _i(t,e);t.dragPan=new Bi(n,u,d),this._add("mousePan",u),this._add("touchPan",d,["touchZoom","touchRotate"]);const h=new Mi,p=new Ci;t.touchZoomRotate=new Vi(n,p,h,a),this._add("touchRotate",h,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new di(t));const f=t.scrollZoom=new Ri(t,this);this._add("scrollZoom",f,["mousePan"]);const m=t.keyboard=new Pi;this._add("keyboard",m);for(const g of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[g]&&t[g].enable(e[g])}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ui(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(e,t,n){for(const r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}handleEvent(e,t){this._updatingCamera=!0;const n="renderFrame"===e.type,r=n?void 0:e,i={needsRenderFrame:!1},o={},a={},s=e.touches?this._getMapTouches(e.touches):void 0,l=s?m(this._el,s):n?void 0:f(this._el,e);for(const{handlerName:d,handler:h,allowed:p}of this._handlers){if(!h.isEnabled())continue;let n;this._blockedByActive(a,p,d)?h.reset():h[t||e.type]&&(n=h[t||e.type](e,l,s),this.mergeHandlerResult(i,o,n,d,r),n&&n.needsRenderFrame&&this._triggerRenderFrame()),(n||h.isActive())&&(a[d]=h)}const c={};for(const d in this._previousActiveHandlers)a[d]||(c[d]=r);this._previousActiveHandlers=a,(Object.keys(c).length||Hi(i))&&(this._changes.push([i,o,c]),this._triggerRenderFrame()),(Object.keys(a).length||Hi(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=i;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(t,n,r,i,o){if(!r)return;e.extend(t,r);const a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}_applyChanges(){const t={},n={},r={};for(const[i,o,a]of this._changes)i.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(i.panDelta)),i.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(t.around=i.around),void 0!==i.aroundCoord&&(t.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(t.pinchAround=i.pinchAround),i.noInertia&&(t.noInertia=i.noInertia),e.extend(n,o),e.extend(r,a);this._updateMapTransform(t,n,r),this._changes=[]}_updateMapTransform(t,n,r){const i=this._map,o=i.transform,a=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!Hi(t)){const e=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",e!==o.zoom&&this._map._update(!0)}if(o._isCameraConstrained&&i._stop(!0),!Hi(t))return void this._fireEvents(n,r,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:d,aroundCoord:h,pinchAround:p}=t;o._isCameraConstrained&&(l>0&&(l=0),o._isCameraConstrained=!1),void 0!==p&&(d=p),(l||(e=>n[e]&&!this._eventsInProgress[e])("drag"))&&d&&(this._dragOrigin=a(o.pointCoordinate3D(d)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",i._stop(!0),d=d||i.transform.centerPoint,c&&(o.bearing+=c),u&&(o.pitch+=u),o._updateCameraState();const f=[0,0,0];if(s)if("mercator"===o.projection.name){const e=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(d).dir),t=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(d.sub(s)).dir);f[0]=t[0]-e[0],f[1]=t[1]-e[1]}else{const t=o.pointCoordinate(d);if("globe"===o.projection.name){s=s.rotate(-o.angle);const n=o._pixelsPerMercatorPixel/o.worldSize;f[0]=-s.x*e.mercatorScale(e.latFromMercatorY(t.y))*n,f[1]=-s.y*e.mercatorScale(o.center.lat)*n}else{const e=o.pointCoordinate(d.sub(s));t&&e&&(f[0]=e.x-t.x,f[1]=e.y-t.y)}}const m=o.zoom,g=[0,0,0];if(l){const t=a(h||o.pointCoordinate3D(d)),n={dir:e.normalize([],e.sub([],t,o._camera.position))};if(n.dir[2]<0){const r=o.zoomDeltaToMovement(t,l);e.scale$2(g,n.dir,r)}}const v=e.add(f,f,g);o._translateCameraConstrained(v),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,r,!0)}_fireEvents(t,n,r){const i=Ui(this._eventsInProgress),o=Ui(t),a={};for(const e in t){const{originalEvent:n}=t[e];this._eventsInProgress[e]||(a[`${e}start`]=n),this._eventsInProgress[e]=t[e]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const e in a)this._fireEvent(e,a[e]);o&&this._fireEvent("move",o.originalEvent);for(const e in t){const{originalEvent:n}=t[e];this._fireEvent(e,n)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:r}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=n[t]||r,s[`${e}end`]=l)}for(const e in s)this._fireEvent(e,s[e]);const c=Ui(this._eventsInProgress);if(r&&(i||o)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(n(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{this._frameId=void 0,this.handleEvent(new $i("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const qi="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Gi extends e.Evented{constructor(t,n){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=n.bearingSnap,this._respectPrefersReducedMotion=!1!==n.respectPrefersReducedMotion,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,n,r){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)}panTo(t,n,r){return this.easeTo(e.extend({center:t},n),r)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)}resetNorth(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}resetNorthPitch(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,n){t=e.LngLatBounds.convert(t);const r=n&&n.bearing||0,i=n&&n.pitch||0,o=t.getNorthWest(),a=t.getSouthEast();return this._cameraForBounds(this.transform,o,a,r,i,n)}_extendCameraOptions(t){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(n,t.padding),t}_minimumAABBFrustumDistance(e,t){const n=t.max[0]-t.min[0],r=t.max[1]-t.min[1];return n/r>e.aspect?n/(2*Math.tan(.5*e.fovX)*e.aspect):r/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(t,n,r,i,o,a){const s=t.clone(),l=this._extendCameraOptions(a);s.bearing=i,s.pitch=o;const c=e.LngLat.convert(n),u=e.LngLat.convert(r),d=.5*(c.lat+u.lat),h=.5*(c.lng+u.lng),p=e.latLngToECEF(d,h),f=e.normalize([],p),m=e.normalize([],e.cross([],f,[0,1,0])),g=e.cross([],m,f),v=[m[0],m[1],m[2],0,g[0],g[1],g[2],0,f[0],f[1],f[2],0,0,0,0,1],y=[p,e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(u.lat,c.lng),e.latLngToECEF(u.lat,u.lng),e.latLngToECEF(c.lat,u.lng),e.latLngToECEF(d,c.lng),e.latLngToECEF(d,u.lng),e.latLngToECEF(c.lat,h),e.latLngToECEF(u.lat,h)];let b=e.Aabb.fromPoints(y.map((t=>[e.dot(m,t),e.dot(g,t),e.dot(f,t)])));const x=e.transformMat4([],b.center,v);0===e.squaredLength(x)&&e.set(x,0,0,1),e.normalize(x,x),e.scale$2(x,x,e.GLOBE_RADIUS),s.center=e.ecefToLatLng(x);const w=s.getWorldToCameraMatrix(),_=e.invert(new Float64Array(16),w);b=e.Aabb.applyTransform(b,e.multiply([],w,v)),e.transformMat4(x,x,w);const k=.5*(b.max[2]-b.min[2]),E=this._minimumAABBFrustumDistance(s,b),S=e.scale$2([],[0,0,1],k),C=e.add(S,x,S),T=E+(0===s.pitch?0:e.distance(x,C)),M=s.globeCenterInViewSpace,I=e.sub([],x,[M[0],M[1],M[2]]);e.normalize(I,I),e.scale$2(I,I,T);const O=e.add([],x,I);e.transformMat4(O,O,_);const A=e.earthRadius/e.GLOBE_RADIUS,P=e.length(O),D=e.mercatorZfromAltitude(Math.max(P*A-e.earthRadius,Number.EPSILON),0),L=Math.min(s.zoomFromMercatorZAdjusted(D),l.maxZoom);return L>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"mercator"}),s.zoom=L,this._cameraForBounds(s,n,r,i,o,a)):{center:s.center,zoom:L,bearing:i,pitch:o}}queryTerrainElevation(t,n){const r=this.transform.elevation;return r?(n=e.extend({},{exaggerated:!0},n),r.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,n.exaggerated)):null}_cameraForBounds(t,n,r,i,o,a){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,n,r,i,o,a);const s=t.clone(),l=this._extendCameraOptions(a),c=s.padding;s.bearing=i,s.pitch=o;const u=e.LngLat.convert(n),d=e.LngLat.convert(r),h=new e.LngLat(u.lng,d.lat),p=new e.LngLat(d.lng,u.lat),f=s.project(u),m=s.project(d),g=this.queryTerrainElevation(u),v=this.queryTerrainElevation(d),y=this.queryTerrainElevation(h),b=this.queryTerrainElevation(p),x=[[f.x,f.y,Math.min(g||0,v||0,y||0,b||0)],[m.x,m.y,Math.max(g||0,v||0,y||0,b||0)]];let w=e.Aabb.fromPoints(x);const _=s.getWorldToCameraMatrix(),k=e.invert(new Float64Array(16),_);w=e.Aabb.applyTransform(w,_);const E=e.sub([],w.max,w.min),S=c.left||0,C=c.right||0,T=c.bottom||0,M=c.top||0,{left:I,right:O,top:A,bottom:P}=l.padding,D=.5*(S+C),L=.5*(M+T),R=Math.min(s.scaleZoom(s.scale*Math.min((s.width-(S+C+I+O))/E[0],(s.height-(T+M+P+A))/E[1])),l.maxZoom),z=s.scale/s.zoomScale(R);w=new e.Aabb([w.min[0]-(I+D)*z,w.min[1]-(P+L)*z,w.min[2]],[w.max[0]+(O+D)*z,w.max[1]+(A+L)*z,w.max[2]]);const j=.5*E[2],N=this._minimumAABBFrustumDistance(s,w),B=[0,0,1,0];e.transformMat4$1(B,B,_),e.normalize$2(B,B);const F=e.scale$2([],B,N+j),V=e.add([],w.center,F),U=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new e.Point(l.offset.x,l.offset.y):e.Point.convert(l.offset)).rotate(-e.degToRad(i));w.center[0]-=U.x*z,w.center[1]+=U.y*z,e.transformMat4(w.center,w.center,k),e.transformMat4(V,V,k);const $=[w.center[0],w.center[1],V[2]*s.pixelsPerMeter];e.scale$2($,$,1/s.worldSize);const Z=e.lngFromMercatorX($[0]),H=e.latFromMercatorY($[1]),W=Math.min(s._zoomFromMercatorZ($[2]),l.maxZoom),q=new e.LngLat(Z,H);return s.mercatorFromTransition&&W<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"globe"}),s.zoom=W,this._cameraForBounds(s,n,r,i,o,a)):{center:q,zoom:W,bearing:i,pitch:o}}fitBounds(e,t,n){const r=this.cameraForBounds(e,t);return this._fitInternal(r,t,n)}fitScreenCoordinates(t,n,r,i,o){const a=e.Point.convert(t),s=e.Point.convert(n),l=new e.Point(Math.min(a.x,s.x),Math.min(a.y,s.y)),c=new e.Point(Math.max(a.x,s.x),Math.max(a.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(a,s))return this;const u=this.transform.pointLocation3D(l),d=this.transform.pointLocation3D(c),h=this.transform.pointLocation3D(new e.Point(l.x,c.y)),p=this.transform.pointLocation3D(new e.Point(c.x,l.y)),f=[Math.min(u.lng,d.lng,h.lng,p.lng),Math.min(u.lat,d.lat,h.lat,p.lat)],m=[Math.max(u.lng,d.lng,h.lng,p.lng),Math.max(u.lat,d.lat,h.lat,p.lat)],g=i&&i.pitch?i.pitch:this.getPitch(),v=this._cameraForBounds(this.transform,f,m,r,g,i);return this._fitInternal(v,i,o)}_fitInternal(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(t,n){this.stop();const r=t.preloadOnly?this.transform.clone():this.transform;let i=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),t.preloadOnly?(this._preloadTiles(r),this):(this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),o&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),a&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(qi),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,n){const r=this.transform;if(!r.projection.supportsFreeCamera)return e.warnOnce(qi),this;this.stop();const i=r.zoom,o=r.pitch,a=r.bearing;r.setFreeCameraOptions(t);const s=i!==r.zoom,l=o!==r.pitch,c=a!==r.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),s&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),c&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),l&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}easeTo(t,n){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||this._prefersReducedMotion(t))&&(t.duration=0);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,d="padding"in t?t.padding:r.padding,h=e.Point.convert(t.offset);let p,f,m;if("globe"===r.projection.name){const n=e.MercatorCoordinate.fromLngLat(r.center),i=h.rotate(-r.angle);n.x+=i.x/r.worldSize,n.y+=i.y/r.worldSize;const o=n.toLngLat(),a=e.LngLat.convert(t.center||o);this._normalizeCenter(a),p=r.centerPoint.add(i),f=new e.Point(n.x,n.y).mult(r.worldSize),m=new e.Point(e.mercatorXfromLng(a.lng),e.mercatorYfromLat(a.lat)).mult(r.worldSize).sub(f)}else{p=r.centerPoint.add(h);const n=r.pointLocation(p),i=e.LngLat.convert(t.center||n);this._normalizeCenter(i),f=r.project(n),m=r.project(i).sub(f)}const g=r.zoomScale(l-i);let v,y;t.around&&(v=e.LngLat.convert(t.around),y=r.locationPoint(v));const b=this._zooming||l!==i,x=this._rotating||o!==c,w=this._pitching||u!==a,_=!r.isPaddingEqual(d),k=r=>k=>{if(b&&(r.zoom=e.number(i,l,k)),x&&(r.bearing=e.number(o,c,k)),w&&(r.pitch=e.number(a,u,k)),_&&(r.interpolatePadding(s,d,k),p=r.centerPoint.add(h)),v)r.setLocationAtPoint(v,y);else{const e=r.zoomScale(r.zoom-i),t=l>i?Math.min(2,g):Math.max(.5,g),n=Math.pow(t,1-k),o=r.unproject(f.add(m.mult(k*n)).mult(e));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,p)}return t.preloadOnly||this._fireMoveEvents(n),r};if(t.preloadOnly){const e=this._emulate(k,t.duration,r);return this._preloadTiles(e),this}const E={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=b,this._rotating=x,this._pitching=w,this._padding=_,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,E),this._ease(k(r),(e=>{r.recenterOnTerrain(),this._afterEase(n,e)}),t),this}_prepareEase(t,n,r={}){this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,n){if(this._easeId&&n&&this._easeId===n)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),o&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,n){if(this._prefersReducedMotion(t)){const r=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,r.minZoom,r.maxZoom):i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,d="padding"in t?t.padding:r.padding,h=r.zoomScale(l-i),p=e.Point.convert(t.offset);let f=r.centerPoint.add(p);const m=r.pointLocation(f),g=e.LngLat.convert(t.center||m);this._normalizeCenter(g);const v=r.project(m),y=r.project(g).sub(v);let b=t.curve;const x=Math.max(r.width,r.height),w=x/h,_=y.mag();if("minZoom"in t){const n=e.clamp(Math.min(t.minZoom,i,l),r.minZoom,r.maxZoom),o=x/r.zoomScale(n-i);b=Math.sqrt(o/_*2)}const k=b*b;function E(e){const t=(w*w-x*x+(e?-1:1)*k*k*_*_)/(2*(e?w:x)*k*_);return Math.log(Math.sqrt(t*t+1)-t)}function S(e){return(Math.exp(e)-Math.exp(-e))/2}function C(e){return(Math.exp(e)+Math.exp(-e))/2}const T=E(0);let M=function(e){return C(T)/C(T+b*e)},I=function(e){return x*((C(T)*(S(t=T+b*e)/C(t))-S(T))/k)/_;var t},O=(E(1)-T)/b;if(Math.abs(_)<1e-6||!isFinite(O)){if(Math.abs(x-w)<1e-6)return this.easeTo(t,n);const e=w<x?-1:1;O=Math.abs(Math.log(w/x))/b,I=function(){return 0},M=function(t){return Math.exp(e*b*t)}}t.duration="duration"in t?+t.duration:1e3*O/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const A=o!==c,P=u!==a,D=!r.isPaddingEqual(d),L=r=>h=>{const m=h*O,b=1/M(m);r.zoom=1===h?l:i+r.scaleZoom(b),A&&(r.bearing=e.number(o,c,h)),P&&(r.pitch=e.number(a,u,h)),D&&(r.interpolatePadding(s,d,h),f=r.centerPoint.add(p));const x=1===h?g:r.unproject(v.add(y.mult(I(m))).mult(b));return r.setLocationAtPoint(r.renderWorldCopies?x.wrap():x,f),r._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(n),r};if(t.preloadOnly){const e=this._emulate(L,t.duration,r);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=A,this._pitching=P,this._padding=D,this._prepareEase(n,!1),this._ease(L(r),(()=>this._afterEase(n)),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.exported.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,n){t=e.wrap(t,-180,180);const r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.maxBounds)return;const n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}_prefersReducedMotion(t){return this._respectPrefersReducedMotion&&e.exported.prefersReducedMotion&&!(t&&t.essential)}_emulate(e,t,n){const r=Math.ceil(15*t/1e3),i=[],o=e(n.clone());for(let a=0;a<=r;a++){const e=o(a/r);i.push(e.clone())}return i}}class Ki{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o("button","mapboxgl-ctrl-attrib-button",this._container),o("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString(`AttributionControl.${t}`);e.setAttribute("aria-label",n),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const r=n.reduce(((e,t,r)=>(t.value&&(e+=`${t.key}=${t.value}${r<n.length-1?"&":""}`),e)),"?");t.href=`${e.config.FEEDBACK_URL}/${r}#${Jr(this._map,!0)}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const r in t){const n=t[r];if(n.used){const t=n.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,n)=>{for(let r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Yi{constructor(){e.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(e){this._map=e,this._container=o("div","mapboxgl-ctrl");const t=o("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class Xi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const r of n)if(r.id===e)return void(r.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Ji(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){const i=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),a=360*Math.ceil(Math.abs(t.lng-r.center.lng)/360),s=r.locationPoint(t).distSqr(n),l=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(l||Math.abs(i.lng-r.center.lng)<a)?t=i:r.locationPoint(o).distSqr(n)<s&&(l||Math.abs(o.lng-r.center.lng)<a)&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){const e=r.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=r.width&&e.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}const Qi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class eo extends e.Evented{constructor(t,n){if(super(),(t instanceof e.window.HTMLElement||n)&&(t=e.extend({element:t},n)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)this._element=t.element,this._offset=e.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=o("div");const n=41,r=27,i=a("svg",{display:"block",height:n*this._scale+"px",width:r*this._scale+"px",viewBox:`0 0 ${r} ${n}`},this._element),s=a("radialGradient",{id:"shadowGradient"},a("defs",{},i));a("stop",{offset:"10%","stop-opacity":.4},s),a("stop",{offset:"100%","stop-opacity":.05},s),a("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},i),a("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},i),a("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},i),a("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},i),this._offset=e.Point.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()}));const r=this._element.classList;for(const e in Qi)r.remove(`mapboxgl-marker-anchor-${e}`);r.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const e=this._map,t=this._pos;if(!e||!t)return!1;const n=e.unproject(t),r=e.getFreeCameraOptions();if(!r.position)return!1;const i=r.position.toLngLat();return i.distanceTo(n)<.9*i.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const n=this._pos;if(!n||n.x<0||n.x>t.transform.width||n.y<0||n.y>t.transform.height)return void this._clearFadeTimer();const r=t.unproject(n);let i;t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?i=0:(i=1-t._queryFogOpacity(r),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(i*=this._occludedOpacity)),this._element.style.opacity=`${i}`,this._element.style.pointerEvents=i>0?"auto":"none",this._popup&&this._popup._setOpacity(i),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const e=this._pos;if(!e||!this._map)return;const t=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${e.x}px,${e.y}px)\n            ${Qi[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${t.x}px,${t.y}px)\n        `}_calculateXYTransform(){const t=this._pos,n=this._map,r=this.getPitchAlignment();if(!n||!t||"map"!==r)return"";if(!n._showingGlobe()){const e=n.getPitch();return e?`rotateX(${e}deg)`:""}const i=e.radToDeg(e.globeTiltAtLngLat(n.transform,this._lngLat)),o=t.sub(e.globeCenterToScreenPoint(n.transform)),a=Math.abs(o.x)+Math.abs(o.y);if(0===a)return"";const s=i/a;return`rotateX(${-o.y*s}deg) rotateY(${o.x*s}deg)`}_calculateZTransform(){const t=this._pos,n=this._map;if(!n||!t)return"";let r=0;const i=this.getRotationAlignment();if("map"===i)if(n._showingGlobe()){const t=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),i=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(t);r=e.radToDeg(Math.atan2(i.y,i.x))-90}else r=-n.getBearing();else if("horizon"===i){const i=e.smoothstep(4,6,n.getZoom()),o=e.globeCenterToScreenPoint(n.transform);o.y+=i*n.transform.height;const a=t.sub(o),s=e.radToDeg(Math.atan2(a.y,a.x));r=(s>90?s-270:s+90)*(1-i)}return r+=this._rotation,r?`rotateZ(${r}deg)`:""}_update(t){e.window.cancelAnimationFrame(this._updateFrameId);const n=this._map;n&&(n.transform.renderWorldCopies&&(this._lngLat=Ji(this._lngLat,this._pos,n.transform)),this._pos=n.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),n._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(n._showingGlobe()||n.getTerrain()||n.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(t){return this._offset=e.Point.convert(t),this._update(),this}_onMove(t){const n=this._map;if(!n)return;const r=this._pointerdownPos,i=this._positionDelta;if(r&&i){if(!this._isDragging){const e=this._clickTolerance||n._clickTolerance;if(t.point.dist(r)<e)return;this._isDragging=!0}this._pos=t.point.sub(i),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){const t=this._map,n=this._pos;t&&n&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(n),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}setDraggable(e){this._draggable=!!e;const t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const to={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},no=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ro(t=new e.Point(0,0),n="bottom"){if("number"==typeof t){const r=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(n){case"top":return new e.Point(0,t);case"top-left":return new e.Point(r,r);case"top-right":return new e.Point(-r,r);case"bottom":return new e.Point(0,-t);case"bottom-left":return new e.Point(r,-r);case"bottom-right":return new e.Point(-r,-r);case"left":return new e.Point(t,0);case"right":return new e.Point(-t,0)}return new e.Point(0,0)}return t instanceof e.Point||Array.isArray(t)?e.Point.convert(t):e.Point.convert(t[n]||[0,0])}class io{constructor(e){this.jumpTo(e)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const n=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,t,n){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+n}}const oo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},ao={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},so={showCompass:!0,showZoom:!0,visualizePitch:!1};class lo{constructor(t,n,r=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new xi({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,r&&(this.mousePitch=new wi({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),u()}move(e,t){const n=this.map,r=this.mouseRotate.mousemoveWindow(e,t),i=r&&r.bearingDelta;if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){const r=this.mousePitch.mousemoveWindow(e,t),i=r&&r.pitchDelta;i&&n.setPitch(n.getPitch()+i)}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){d(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),f(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,f(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=m(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=m(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const co={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},uo={maxWidth:100,unit:"metric"},ho={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},po={version:e.version,supported:n,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Gi{constructor(t){if(e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},ao,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Kr(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._useWebGL2=t.useWebGL2,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._language=this._parseLanguage(t.language),this._worldview=t.worldview,this._renderTaskQueue=new Xi,this._domRenderTaskQueue=new Xi,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.uniqueId(),this._locale=e.extend({},oo,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._performanceMetricsCollection=t.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new io(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(this._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Wi(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this._hash=t.hash&&new Xr("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),t.attributionControl&&this.addControl(new Ki({customAttribution:t.customAttribution})),this._logoControl=new Yi,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event(`${t.dataType}data`,t))})),this.on("dataloading",(t=>{this.fire(new e.Event(`${t.dataType}dataloading`,t))}))}_getMapId(){return this._mapId}addControl(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=t.onAdd(this);this._controls.push(t);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),n&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(t){return"auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map((t=>"auto"===t?e.window.navigator.language:t)):t}setLanguage(e){const t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();for(const n of this._controls)n._setLanguage&&n._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const t=this.transform,n=t.projection.name;let r;"globe"===n&&t.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(t.setMercatorFromTransition(),r=!0):"mercator"===n&&t.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(t.setProjection({name:"globe"}),r=!0),r&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(e,t){return this._updateProjection(e||t||{name:"mercator"})}_updateProjection(t){let n;if(n="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),n){this.painter.clearBackgroundTiles();for(const e in this.style._sourceCaches)this.style._sourceCaches[e].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.Point.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let r=!1;const i=i=>{const o=t.filter((e=>this.getLayer(e))),a=o.length?this.queryRenderedFeatures(i.point,{layers:o}):[];a.length?r||(r=!0,n.call(this,new si(e,this,i.originalEvent,{features:a}))):r=!1},o=()=>{r=!1};return{layers:new Set(t),listener:n,delegates:{mousemove:i,mouseout:o}}}if("mouseleave"===e||"mouseout"===e){let r=!1;const i=i=>{const o=t.filter((e=>this.getLayer(e)));(o.length?this.queryRenderedFeatures(i.point,{layers:o}):[]).length?r=!0:r&&(r=!1,n.call(this,new si(e,this,i.originalEvent)))},o=t=>{r&&(r=!1,n.call(this,new si(e,this,t.originalEvent)))};return{layers:new Set(t),listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=e=>{const r=t.filter((e=>this.getLayer(e))),i=r.length?this.queryRenderedFeatures(e.point,{layers:r}):[];i.length&&(e.features=i,n.call(this,e),delete e.features)};return{layers:new Set(t),listener:n,delegates:{[e]:r}}}}on(e,t,n){if(void 0===n)return super.on(e,t);Array.isArray(t)||(t=[t]);const r=this._createDelegatedListener(e,t,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r);for(const i in r.delegates)this.on(i,r.delegates[i]);return this}once(e,t,n){if(void 0===n)return super.once(e,t);Array.isArray(t)||(t=[t]);const r=this._createDelegatedListener(e,t,n);for(const i in r.delegates)this.once(i,r.delegates[i]);return this}off(e,t,n){if(void 0===n)return super.off(e,t);t=new Set(Array.isArray(t)?t:[t]);const r=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0},i=this._delegatedListeners?this._delegatedListeners[e]:void 0;return i&&(e=>{for(let i=0;i<e.length;i++){const o=e[i];if(o.listener===n&&r(o.layers,t)){for(const e in o.delegates)this.off(e,o.delegates[e]);return e.splice(i,1),this}}})(i),this}queryRenderedFeatures(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.Point||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}isPointOnSurface(t){const{name:n}=this.transform.projection;return"globe"!==n&&"mercator"!==n&&e.warnOnce(`${n} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(e.Point.convert(t))}setStyle(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(t,n))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new Xt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Xt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,n){if("string"==typeof t){const r=this._requestManager.normalizeStyleURL(t),i=this._requestManager.transformRequest(r,e.ResourceType.Style);e.getJSON(i,((t,r)=>{t?this.fire(new e.ErrorEvent(t)):r&&this._updateDiff(r,n)}))}else"object"==typeof t&&this._updateDiff(t,n)}_updateDiff(t,n){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(t,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const n=e[t]._tiles;for(const e in n){const t=n[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,n){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,n,{pixelRatio:r=1,sdf:i=!1,stretchX:o,stretchY:a,content:s}={}){if(this._lazyInitEmptyStyle(),n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap){const{width:l,height:c,data:u}=e.exported.getImageData(n);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:c}=n,u=n;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u.data)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:u}),u.onAdd&&u.onAdd(this,t)}}updateImage(t,n){const r=this.style.getImage(t);if(!r)return void this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap?e.exported.getImageData(n):n,{width:o,height:a}=i;void 0!==o&&void 0!==a?o===r.data.width&&a===r.data.height?(r.data.replace(i.data,!(n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap)),this.style.updateImage(t,r)):this.fire(new e.ErrorEvent(new Error(`The width and height of the updated image (${o}, ${a})\n                must be that same as the previous version of the image\n                (${r.data.width}, ${r.data.height})`))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),((t,r)=>{n(t,r instanceof e.window.HTMLImageElement?e.exported.getImageData(r):r)}))}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t,n={}){return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n,r={}){return this.style.setPaintProperty(e,t,n,r),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n,r={}){return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const t=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let r,i,o,a=this._container;for(;a&&(!i||!o);){const t=e.window.getComputedStyle(a).transform;t&&"none"!==t&&(r=t.match(/matrix.*\((.+)\)/)[1].split(", "),r[0]&&"0"!==r[0]&&"1"!==r[0]&&(i=r[0]),r[3]&&"0"!==r[3]&&"1"!==r[3]&&(o=r[3])),a=a.parentElement}this._containerWidth=i?Math.abs(t/i):t,this._containerHeight=o?Math.abs(n/o):n}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=o("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=o("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=o("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const n=this._controlContainer=o("div","mapboxgl-control-container",e),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{r[e]=o("div",`mapboxgl-ctrl-${e}`,n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,n){const r=e.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(t),this._canvas.height=r*Math.ceil(n),this._canvas.style.width=`${t}px`,this._canvas.style.height=`${n}px`}_addMarker(e){this._markers.push(e)}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}_addPopup(e){this._popups.push(e)}_removePopup(e){const t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}_setupPainter(){const t=e.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._useWebGL2&&this._canvas.getContext("webgl2",t),i=r||this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);i?(this._useWebGL2&&!r&&e.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),e.storeAuthState(i,!0),this.painter=new zr(i,this.transform,!!r),this.on("data",(e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(i)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}_render(t){let n;const r=this.painter.context.extTimerQuery,i=e.exported.now();if(this.listens("gpu-timing-frame")&&(n=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;this._updateProjectionTransition();const o=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,n=this.transform.pitch,r=e.exported.now(),i=new e.EvaluationParameters(t,{now:r,fadeDuration:o,pitch:n,transition:this.style.getTransition()});this.style.update(i)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let a=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),a=this._updateAverageElevation(i),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):a=this._updateAverageElevation(i),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){const t=e.exported.now()-i;r.endQueryEXT(r.TIME_ELAPSED_EXT,n),setTimeout((()=>{const o=r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:o})),e.window.performance.mark("frame-gpu",{startTime:i,detail:{gpuTime:o}})}),50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:n}))}),50)}if(this.listens("gpu-timing-deferred-render")){const t=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const n=this.painter.queryGpuTimeDeferredRender(t);this.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:n}))}),50)}const s=this._sourcesDirty||this._styleDirty||this._placementDirty||a;if(s||this._repaint)this.triggerRepaint();else{const t=!this.isMoving()&&this.loaded();if(t&&(a=this._updateAverageElevation(i,!0)),a)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||s||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(e){for(const t of this._markers)e&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!e||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update()}_updateAverageElevation(e,t=!1){const n=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let r=this.transform.sampleAverageElevation(),i=!1;this.transform.elevation&&(i=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(r)?r=0:this._averageElevationLastSampledAt=e;const o=Math.abs(t-r);if(o>1){if(this._isInitialLoad||i)return this._averageElevation.jumpTo(r),n(r);this._averageElevation.easeTo(r,e,300)}else if(o>1e-4)return this._averageElevation.jumpTo(r),n(r)}return!!this._averageElevation.isEasing(e)&&n(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof Yi&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const e=this._isDragging();this.painter.updateTerrain(this.style,e)}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const n=this.painter.context.gl,r=n.createFramebuffer();function i(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);const t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}_canvasPixelComparison(e,t,n){let r=n[1]-n[0];const i=e.length/4;for(let o=0;o<t.length;o++){const a=t[o];let s=0;for(let t=0;t<a.length;t+=4)a[t]===e[t]&&a[t+1]===e[t+1]&&a[t+2]===e[t+2]&&a[t+3]===e[t+3]&&(s+=1);r+=(n[o+2]-n[o+1])*(1-s/i)}return r}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)})))}_preloadTiles(t){const n=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(n,((e,n)=>e._preloadTiles(t,n)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}_onVisibilityChange(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}_setCacheLimits(t,n){e.setCacheLimits(t,n)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},so,t),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(e=>{this._map&&this._map.zoomIn({},{originalEvent:e})})),o("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(e=>{this._map&&this._map.zoomOut({},{originalEvent:e})})),o("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(e=>{const t=this._map;t&&(this.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=o("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map;if(!e)return;const t=e.getZoom(),n=t===e.getMaxZoom(),r=t===e.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}_rotateCompassArrow(){const e=this._map;if(!e)return;const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5)}) rotateX(${e.transform.pitch}deg) rotateZ(${e.transform.angle*(180/Math.PI)}deg)`:`rotate(${e.transform.angle*(180/Math.PI)}deg)`;e._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t)}))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new lo(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(e,t){const n=o("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}_setButtonTitle(e,t){if(!this._map)return;const n=this._map._getUIString(`NavigationControl.${t}`);e.setAttribute("aria-label",n),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({geolocation:e.window.navigator.geolocation},co,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Yr(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(e){return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(t){const n=(e=!!this.options.geolocation)=>{this._supportsGeolocation=e,t(e)};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((e=>n("denied"!==e.state))).catch((()=>n())):n()}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return!!t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),o=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}_updateMarker(t){if(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map.transform,n=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,r=Math.ceil(2*this._accuracy*n);this._circleElement.style.width=`${r}px`,this._circleElement.style.height=`${r}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=o("button","mapboxgl-ctrl-geolocate",this._container),o("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o("div","mapboxgl-user-location"),this._dotElement.appendChild(o("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(o("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new eo({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=o("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new eo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))}))}}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e&&t()})).catch(console.error):t()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ki,ScaleControl:class{constructor(t){this.options=e.extend({},uo,t),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(e){return!1}}(),e.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const e=this.options.maxWidth||100,t=this._map,n=t._containerHeight/2,r=t._containerWidth/2-e/2,i=t.unproject([r,n]),o=t.unproject([r+e,n]),a=i.distanceTo(o);if("imperial"===this.options.unit){const t=3.2808*a;t>5280?this._setScale(e,t/5280,"mile"):this._setScale(e,t,"foot")}else"nautical"===this.options.unit?this._setScale(e,a/1852,"nautical-mile"):a>=1e3?this._setScale(e,a/1e3,"kilometer"):this._setScale(e,a,"meter")}_setScale(e,t,n){this._map._requestDomTask((()=>{const r=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(t),i=r/t;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==n?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:n}).format(r):`${r}&nbsp;${ho[n]}`,this._container.style.width=e*i+"px"}))}onAdd(e){return this._map=e,this._language=e.getLanguage(),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(e){this._language=e,this._update()}setUnit(e){this.options.unit=e,this._update()}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=o("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(to),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[])}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();const n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const n=e.window.document.createDocumentFragment(),r=e.window.document.createElement("body");let i;for(r.innerHTML=t;i=r.firstChild,i;)n.appendChild(i);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=o("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){const e=this._closeButton=o("button","mapboxgl-popup-close-button",t);e.type="button",e.setAttribute("aria-label","Close popup"),e.setAttribute("aria-hidden","true"),e.innerHTML="&#215;",e.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}_onMouseEvent(e){this._update(e.point)}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._map,n=this._container,r=this._pos;if(!t||!n||!r)return"bottom";const i=n.offsetWidth,o=n.offsetHeight,a=r.x<i/2,s=r.x>t.transform.width-i/2;if(r.y+e<o)return a?"top-left":s?"top-right":"top";if(r.y>t.transform.height-o){if(a)return"bottom-left";if(s)return"bottom-right"}return a?"left":s?"right":"bottom"}_updateClassList(){const e=this._container;if(!e)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}_update(t){const n=this._map,r=this._content;if(!n||!this._lngLat&&!this._trackPointer||!r)return;let i=this._container;if(i||(i=this._container=o("div","mapboxgl-popup",n.getContainer()),this._tip=o("div","mapboxgl-popup-tip",i),i.appendChild(r)),this.options.maxWidth&&i.style.maxWidth!==this.options.maxWidth&&(i.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ji(this._lngLat,this._pos,n.transform)),!this._trackPointer||t){const e=this._pos=this._trackPointer&&t?t:n.project(this._lngLat),r=ro(this.options.offset),i=this._anchor=this._getAnchor(r.y),o=ro(this.options.offset,i),a=e.add(o).round();n._requestDomTask((()=>{this._container&&i&&(this._container.style.transform=`${Qi[i]} translate(${a.x}px,${a.y}px)`)}))}if(!this._marker&&n._showingGlobe()){const t=e.isLngLatBehindGlobe(n.transform,this._lngLat)?0:1;this._setOpacity(t)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(no);e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._container&&(this._container.style.opacity=`${e}`),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}},Marker:eo,Style:Xt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Vr,Evented:e.Evented,config:e.config,prewarm:function(){Be().acquire(ze)},clearPrewarmedResources:function(){const e=Ne;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(ze),Ne=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return je.workerCount},set workerCount(e){je.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return po}));var i=n;return i}()}(nI);const rI=i(nI.exports);function iI(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function oI(e){return!!e&&!!e[HI]}function aI(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===WI}(e)||Array.isArray(e)||!!e[ZI]||!!(null===(t=e.constructor)||void 0===t?void 0:t[ZI])||hI(e)||pI(e))}function sI(e,t,n){void 0===n&&(n=!1),0===lI(e)?(n?Object.keys:qI)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function lI(e){var t=e[HI];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:hI(e)?2:pI(e)?3:0}function cI(e,t){return 2===lI(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uI(e,t,n){var r=lI(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function dI(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function hI(e){return FI&&e instanceof Map}function pI(e){return VI&&e instanceof Set}function fI(e){return e.o||e.t}function mI(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=GI(e);delete t[HI];for(var n=qI(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function gI(e,t){return void 0===t&&(t=!1),yI(e)||oI(e)||!aI(e)||(lI(e)>1&&(e.set=e.add=e.clear=e.delete=vI),Object.freeze(e),t&&sI(e,(function(e,t){return gI(t,!0)}),!0)),e}function vI(){iI(2)}function yI(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function bI(e){var t=KI[e];return t||iI(18,e),t}function xI(){return NI}function wI(e,t){t&&(bI("Patches"),e.u=[],e.s=[],e.v=t)}function _I(e){kI(e),e.p.forEach(SI),e.p=null}function kI(e){e===NI&&(NI=e.l)}function EI(e){return NI={p:[],l:NI,h:e,m:!0,_:0}}function SI(e){var t=e[HI];0===t.i||1===t.i?t.j():t.g=!0}function CI(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||bI("ES5").S(t,e,r),r?(n[HI].P&&(_I(t),iI(4)),aI(e)&&(e=TI(t,e),t.l||II(t,e)),t.u&&bI("Patches").M(n[HI].t,e,t.u,t.s)):e=TI(t,n,[]),_I(t),t.u&&t.v(t.u,t.s),e!==$I?e:void 0}function TI(e,t,n){if(yI(t))return t;var r=t[HI];if(!r)return sI(t,(function(i,o){return MI(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return II(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=mI(r.k):r.o,o=i,a=!1;3===r.i&&(o=new Set(i),i.clear(),a=!0),sI(o,(function(t,o){return MI(e,r,i,t,o,n,a)})),II(e,i,!1),n&&e.u&&bI("Patches").N(r,n,e.u,e.s)}return r.o}function MI(e,t,n,r,i,o,a){if(oI(i)){var s=TI(e,i,o&&t&&3!==t.i&&!cI(t.R,r)?o.concat(r):void 0);if(uI(n,r,s),!oI(s))return;e.m=!1}else a&&n.add(i);if(aI(i)&&!yI(i)){if(!e.h.D&&e._<1)return;TI(e,i),t&&t.A.l||II(e,i)}}function II(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&gI(t,n)}function OI(e,t){var n=e[HI];return(n?fI(n):e)[t]}function AI(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function PI(e){e.P||(e.P=!0,e.l&&PI(e.l))}function DI(e){e.o||(e.o=mI(e.t))}function LI(e,t,n){var r=hI(t)?bI("MapSet").F(t,n):pI(t)?bI("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:xI(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=YI;n&&(i=[r],o=XI);var a=Proxy.revocable(i,o),s=a.revoke,l=a.proxy;return r.k=l,r.j=s,l}(t,n):bI("ES5").J(t,n);return(n?n.A:xI()).p.push(r),r}function RI(e){return oI(e)||iI(22,e),function e(t){if(!aI(t))return t;var n,r=t[HI],i=lI(t);if(r){if(!r.P&&(r.i<4||!bI("ES5").K(r)))return r.t;r.I=!0,n=zI(t,i),r.I=!1}else n=zI(t,i);return sI(n,(function(t,i){r&&function(e,t){return 2===lI(e)?e.get(t):e[t]}(r.t,t)===i||uI(n,t,e(i))})),3===i?new Set(n):n}(e)}function zI(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return mI(e)}var jI,NI,BI="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),FI="undefined"!=typeof Map,VI="undefined"!=typeof Set,UI="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,$I=BI?Symbol.for("immer-nothing"):((jI={})["immer-nothing"]=!0,jI),ZI=BI?Symbol.for("immer-draftable"):"__$immer_draftable",HI=BI?Symbol.for("immer-state"):"__$immer_state",WI=""+Object.prototype.constructor,qI="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,GI=Object.getOwnPropertyDescriptors||function(e){var t={};return qI(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},KI={},YI={get:function(e,t){if(t===HI)return e;var n=fI(e);if(!cI(n,t))return function(e,t,n){var r,i=AI(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!aI(r)?r:r===OI(e.t,t)?(DI(e),e.o[t]=LI(e.A.h,r,e)):r},has:function(e,t){return t in fI(e)},ownKeys:function(e){return Reflect.ownKeys(fI(e))},set:function(e,t,n){var r=AI(fI(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=OI(fI(e),t),o=null==i?void 0:i[HI];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(dI(n,i)&&(void 0!==n||cI(e.t,t)))return!0;DI(e),PI(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==OI(e.t,t)||t in e.t?(e.R[t]=!1,DI(e),PI(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=fI(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){iI(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){iI(12)}},XI={};sI(YI,(function(e,t){XI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),XI.deleteProperty=function(e,t){return XI.set.call(this,e,t,void 0)},XI.set=function(e,t,n){return YI.set.call(this,e[0],t,n,e[0])};var JI=function(){function e(e){var t=this;this.O=UI,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var a;if("function"!=typeof n&&iI(6),void 0!==r&&"function"!=typeof r&&iI(7),aI(e)){var s=EI(t),l=LI(t,e,void 0),c=!0;try{a=n(l),c=!1}finally{c?_I(s):kI(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return wI(s,r),CI(e,s)}),(function(e){throw _I(s),e})):(wI(s,r),CI(a,s))}if(!e||"object"!=typeof e){if(void 0===(a=n(e))&&(a=e),a===$I&&(a=void 0),t.D&&gI(a,!0),r){var u=[],d=[];bI("Patches").M(e,a,u,d),r(u,d)}return a}iI(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,o=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,i]})):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){aI(e)||iI(8),oI(e)&&(e=RI(e));var t=EI(this),n=LI(this,e,void 0);return n[HI].C=!0,kI(t),n},t.finishDraft=function(e,t){var n=(e&&e[HI]).A;return wI(n,t),CI(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!UI&&iI(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=bI("Patches").$;return oI(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),QI=new JI,eO=QI.produce;function tO(e){return tO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tO(e)}function nO(e){var t=function(e,t){if("object"!==tO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==tO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===tO(t)?t:String(t)}function rO(e,t,n){return(t=nO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iO(Object(n),!0).forEach((function(t){rO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aO(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}QI.produceWithPatches.bind(QI),QI.setAutoFreeze.bind(QI),QI.setUseProxies.bind(QI),QI.applyPatches.bind(QI),QI.createDraft.bind(QI),QI.finishDraft.bind(QI);var sO="function"==typeof Symbol&&Symbol.observable||"@@observable",lO=function(){return Math.random().toString(36).substring(7).split("").join(".")},cO={INIT:"@@redux/INIT"+lO(),REPLACE:"@@redux/REPLACE"+lO(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+lO()}};function uO(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(aO(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(aO(1));return n(uO)(e,t)}if("function"!=typeof e)throw new Error(aO(2));var i=e,o=t,a=[],s=a,l=!1;function c(){s===a&&(s=a.slice())}function u(){if(l)throw new Error(aO(3));return o}function d(e){if("function"!=typeof e)throw new Error(aO(4));if(l)throw new Error(aO(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(aO(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),a=null}}}function h(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(aO(7));if(void 0===e.type)throw new Error(aO(8));if(l)throw new Error(aO(9));try{l=!0,o=i(o,e)}finally{l=!1}for(var t=a=s,n=0;n<t.length;n++)(0,t[n])();return e}return h({type:cO.INIT}),(r={dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(aO(10));i=e,h({type:cO.REPLACE})}})[sO]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(aO(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[sO]=function(){return this},e},r}function dO(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var o,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:cO.INIT}))throw new Error(aO(12));if(void 0===n(void 0,{type:cO.PROBE_UNKNOWN_ACTION()}))throw new Error(aO(13))}))}(n)}catch($A){o=$A}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},s=0;s<a.length;s++){var l=a[s],c=n[l],u=e[l],d=c(u,t);if(void 0===d)throw t&&t.type,new Error(aO(14));i[l]=d,r=r||d!==u}return(r=r||a.length!==Object.keys(e).length)?i:e}}function hO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function pO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(aO(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return r=hO.apply(void 0,o)(n.dispatch),oO(oO({},n),{},{dispatch:r})}}}var fO="NOT_FOUND",mO=function(e,t){return e===t};function gO(e,t){var n,r,i="object"==typeof t?t:{equalityCheck:t},o=i.equalityCheck,a=void 0===o?mO:o,s=i.maxSize,l=void 0===s?1:s,c=i.resultEqualityCheck,u=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}}(a),d=1===l?(n=u,{get:function(e){return r&&n(r.key,e)?r.value:fO},put:function(e,t){r={key:e,value:t}},getEntries:function(){return r?[r]:[]},clear:function(){r=void 0}}):function(e,t){var n=[];function r(e){var r=n.findIndex((function(n){return t(e,n.key)}));if(r>-1){var i=n[r];return r>0&&(n.splice(r,1),n.unshift(i)),i.value}return fO}return{get:r,put:function(t,i){r(t)===fO&&(n.unshift({key:t,value:i}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(l,u);function h(){var t=d.get(arguments);if(t===fO){if(t=e.apply(null,arguments),c){var n=d.getEntries().find((function(e){return c(e.value,t)}));n&&(t=n.value)}d.put(arguments,t)}return t}return h.clearCache=function(){return d.clear()},h}function vO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o,a=0,s={memoizeOptions:void 0},l=r.pop();if("object"==typeof l&&(s=l,l=r.pop()),"function"!=typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var c=s.memoizeOptions,u=void 0===c?n:c,d=Array.isArray(u)?u:[u],h=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}(r),p=e.apply(void 0,[function(){return a++,l.apply(null,arguments)}].concat(d)),f=e((function(){for(var e=[],t=h.length,n=0;n<t;n++)e.push(h[n].apply(null,arguments));return o=p.apply(null,e)}));return Object.assign(f,{resultFunc:l,memoizedResultFunc:p,dependencies:h,lastResult:function(){return o},recomputations:function(){return a},resetRecomputations:function(){return a=0}}),f}}var yO=vO(gO);function bO(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}var xO=bO();xO.withExtraArgument=bO;const wO=xO;var _O=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kO=globalThis&&globalThis.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch($A){o=[6,$A],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},EO=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},SO=Object.defineProperty,CO=Object.defineProperties,TO=Object.getOwnPropertyDescriptors,MO=Object.getOwnPropertySymbols,IO=Object.prototype.hasOwnProperty,OO=Object.prototype.propertyIsEnumerable,AO=function(e,t,n){return t in e?SO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},PO=function(e,t){for(var n in t||(t={}))IO.call(t,n)&&AO(e,n,t[n]);if(MO)for(var r=0,i=MO(t);r<i.length;r++)n=i[r],OO.call(t,n)&&AO(e,n,t[n]);return e},DO=function(e,t){return CO(e,TO(t))},LO="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?hO:hO.apply(null,arguments)},RO=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return _O(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,EO([void 0],e[0].concat(this)))):new(t.bind.apply(t,EO([void 0],e.concat(this))))},t}(Array),zO=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return _O(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,EO([void 0],e[0].concat(this)))):new(t.bind.apply(t,EO([void 0],e.concat(this))))},t}(Array);function jO(e){return aI(e)?eO(e,(function(){})):e}function NO(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t;e.immutableCheck,e.serializableCheck;var r=new RO;return n&&(function(e){return"boolean"==typeof e}(n)?r.push(wO):r.push(wO.withExtraArgument(n.extraArgument))),r}(e)}}function BO(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return PO(PO({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function FO(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"==typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function VO(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:jO(e.initialState),i=e.reducers||{},o=Object.keys(i),a={},s={},l={};function c(){var t="function"==typeof e.extraReducers?FO(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,o=t[1],a=void 0===o?[]:o,l=t[2],c=void 0===l?void 0:l,u=PO(PO({},i),s);return function(e,t,n,r){void 0===n&&(n=[]);var i,o="function"==typeof t?FO(t):[t,n,r],a=o[0],s=o[1],l=o[2];if(function(e){return"function"==typeof e}(e))i=function(){return jO(e())};else{var c=jO(e);i=function(){return c}}function u(e,t){void 0===e&&(e=i());var n=EO([a[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[l]),n.reduce((function(e,n){if(n){var r;if(oI(e))return void 0===(r=n(e,t))?e:r;if(aI(e))return eO(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return u.getInitialState=i,u}(r,(function(e){for(var t in u)e.addCase(t,u[t]);for(var n=0,r=a;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return o.forEach((function(e){var n,r,o=i[e],c=function(e,t){return e+"/"+t}(t,e);"reducer"in o?(n=o.reducer,r=o.prepare):n=o,a[e]=n,s[c]=n,l[e]=r?BO(c,r):BO(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:l,caseReducers:a,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}var UO=["name","message","stack","code"],$O=function(e,t){this.payload=e,this.meta=t},ZO=function(e,t){this.payload=e,this.meta=t},HO=function(e){if("object"==typeof e&&null!==e){for(var t={},n=0,r=UO;n<r.length;n++){var i=r[n];"string"==typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};function WO(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}!function(){function e(e,t,n){var r=BO(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:DO(PO({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=BO(e+"/pending",(function(e,t,n){return{payload:void 0,meta:DO(PO({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),o=BO(e+"/rejected",(function(e,t,r,i,o){return{payload:i,error:(n&&n.serializeError||HO)(e||"Rejected"),meta:DO(PO({},o||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),a="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(s,l,c){var u,d=(null==n?void 0:n.idGenerator)?n.idGenerator(e):function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t}(),h=new a;function p(e){u=e,h.abort()}var f=function(){return a=this,f=null,m=function(){var a,f,m,g,v,y;return kO(this,(function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),g=null==(a=null==n?void 0:n.condition)?void 0:a.call(n,e,{getState:l,extra:c}),null===(x=g)||"object"!=typeof x||"function"!=typeof x.then?[3,2]:[4,g];case 1:g=b.sent(),b.label=2;case 2:if(!1===g||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return v=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:u||"Aborted"})}))})),s(i(d,e,null==(f=null==n?void 0:n.getPendingMeta)?void 0:f.call(n,{requestId:d,arg:e},{getState:l,extra:c}))),[4,Promise.race([v,Promise.resolve(t(e,{dispatch:s,getState:l,extra:c,requestId:d,signal:h.signal,abort:p,rejectWithValue:function(e,t){return new $O(e,t)},fulfillWithValue:function(e,t){return new ZO(e,t)}})).then((function(t){if(t instanceof $O)throw t;return t instanceof ZO?r(t.payload,d,e,t.meta):r(t,d,e)}))])];case 3:return m=b.sent(),[3,5];case 4:return y=b.sent(),m=y instanceof $O?o(null,d,e,y.payload,y.meta):o(y,d,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&o.match(m)&&m.meta.condition||s(m),[2,m]}var x}))},new Promise((function(e,t){var n=function(e){try{i(m.next(e))}catch($A){t($A)}},r=function(e){try{i(m.throw(e))}catch($A){t($A)}},i=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(n,r)};i((m=m.apply(a,f)).next())}));var a,f,m}();return Object.assign(f,{abort:p,requestId:d,arg:e,unwrap:function(){return f.then(WO)}})}}),{pending:i,rejected:o,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();var qO="listenerMiddleware";BO(qO+"/add"),BO(qO+"/removeAll"),BO(qO+"/remove"),"function"==typeof queueMicrotask&&queueMicrotask.bind("undefined"!=typeof window?window:"undefined"!=typeof global?global:globalThis),function(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[HI];return YI.get(t,e)},set:function(t){var n=this[HI];YI.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][HI];if(!i.P)switch(i.i){case 5:r(i)&&PI(i);break;case 4:n(i)&&PI(i)}}}function n(e){for(var t=e.t,n=e.k,r=qI(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==HI){var a=t[o];if(void 0===a&&!cI(t,o))return!0;var s=n[o],l=s&&s[HI];if(l?l.t!==a:!dI(s,a))return!0}}var c=!!t[HI];return r.length!==qI(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};!function(e,t){KI[e]||(KI[e]=t)}("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=GI(n);delete o[HI];for(var a=qI(o),s=0;s<a.length;s++){var l=a[s];o[l]=e(l,t||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:xI(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,HI,{value:o,writable:!0}),i},S:function(e,n,i){i?oI(n)&&n[HI].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[HI];if(n){var i=n.t,o=n.k,a=n.R,s=n.i;if(4===s)sI(o,(function(t){t!==HI&&(void 0!==i[t]||cI(i,t)?a[t]||e(o[t]):(a[t]=!0,PI(n)))})),sI(i,(function(e){void 0!==o[e]||cI(o,e)||(a[e]=!1,PI(n))}));else if(5===s){if(r(n)&&(PI(n),a.length=!0),o.length<i.length)for(var l=o.length;l<i.length;l++)a[l]=!1;else for(var c=i.length;c<o.length;c++)a[c]=!0;for(var u=Math.min(o.length,i.length),d=0;d<u;d++)o.hasOwnProperty(d)||(a[d]=!0),void 0===a[d]&&e(o[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}();const GO=VO({name:"channel",initialState:{channels:{},channelId:null},reducers:{addChannels:(e,t)=>{t.payload.forEach((t=>{e.channels[t.id]=t}))},activateChannel:(e,t)=>{e.channelId=t.payload}}}),{addChannels:KO,activateChannel:YO}=GO.actions,XO=GO.reducer,JO=e=>e.channel.channels,QO=yO(((e,t)=>JO(e)),((e,t)=>t),((e,t)=>e[t])),eA=VO({name:"user",initialState:{users:{},userId:null},reducers:{addUsers:(e,t)=>{t.payload.forEach((t=>{e.users[t.id]=t}))},setAppUserId:(e,t)=>{e.userId=t.payload}}}),{addUsers:tA,setAppUserId:nA}=eA.actions,rA=eA.reducer;yO(((e,t)=>(e=>e.user.users)(e)),((e,t)=>t),((e,t)=>e[t]));const iA=e=>e.user.userId?e.user.users[e.user.userId]:null;var oA={exports:{}},aA={},sA=U,lA="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},cA=sA.useState,uA=sA.useEffect,dA=sA.useLayoutEffect,hA=sA.useDebugValue;function pA(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lA(e,n)}catch(ZA){return!0}}var fA="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=cA({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return dA((function(){i.value=n,i.getSnapshot=t,pA(i)&&o({inst:i})}),[e,n,t]),uA((function(){return pA(i)&&o({inst:i}),e((function(){pA(i)&&o({inst:i})}))}),[e]),hA(n),n};aA.useSyncExternalStore=void 0!==sA.useSyncExternalStore?sA.useSyncExternalStore:fA,oA.exports=aA;var mA=oA.exports,gA={exports:{}},vA={},yA=U,bA=mA,xA="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},wA=bA.useSyncExternalStore,_A=yA.useRef,kA=yA.useEffect,EA=yA.useMemo,SA=yA.useDebugValue;vA.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=_A(null);if(null===o.current){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=EA((function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==i&&a.hasValue){var t=a.value;if(i(t,e))return s=t}return s=e}if(t=s,xA(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,s=n)}var o,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var s=wA(e,o[0],o[1]);return kA((function(){a.hasValue=!0,a.value=s}),[s]),SA(s),s},gA.exports=vA;var CA=gA.exports;let TA=function(e){e()};const MA=()=>TA,IA=Symbol.for(`react-redux-context-${U.version}`),OA=globalThis,AA=new Proxy({},new Proxy({},{get(e,t){const n=function(){let e=OA[IA];return e||(e=U.createContext(null),OA[IA]=e),e}();return(e,...r)=>Reflect[t](n,...r)}}));function PA(e=AA){return function(){return U.useContext(e)}}const DA=PA();let LA=()=>{throw new Error("uSES not initialized!")};const RA=(e,t)=>e===t;function zA(e=AA){const t=e===AA?DA:PA(e);return function(e,n={}){const{equalityFn:r=RA,stabilityCheck:i,noopCheck:o}="function"==typeof n?{equalityFn:n}:n,{store:a,subscription:s,getServerState:l,stabilityCheck:c,noopCheck:u}=t();U.useRef(!0);const d=U.useCallback({[e.name]:t=>e(t)}[e.name],[e,c,i]),h=LA(s.addNestedSub,a.getState,l||a.getState,d,r);return U.useDebugValue(h),h}}const jA=zA();var NA,BA={},FA=Symbol.for("react.element"),VA=Symbol.for("react.portal"),UA=Symbol.for("react.fragment"),$A=Symbol.for("react.strict_mode"),ZA=Symbol.for("react.profiler"),HA=Symbol.for("react.provider"),WA=Symbol.for("react.context"),qA=Symbol.for("react.server_context"),GA=Symbol.for("react.forward_ref"),KA=Symbol.for("react.suspense"),YA=Symbol.for("react.suspense_list"),XA=Symbol.for("react.memo"),JA=Symbol.for("react.lazy"),QA=Symbol.for("react.offscreen");
/**
             * @license React
             * react-is.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */function eP(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case FA:switch(e=e.type){case UA:case ZA:case $A:case KA:case YA:return e;default:switch(e=e&&e.$$typeof){case qA:case WA:case GA:case JA:case XA:case HA:return e;default:return t}}case VA:return t}}}NA=Symbol.for("react.module.reference"),BA.ContextConsumer=WA,BA.ContextProvider=HA,BA.Element=FA,BA.ForwardRef=GA,BA.Fragment=UA,BA.Lazy=JA,BA.Memo=XA,BA.Portal=VA,BA.Profiler=ZA,BA.StrictMode=$A,BA.Suspense=KA,BA.SuspenseList=YA,BA.isAsyncMode=function(){return!1},BA.isConcurrentMode=function(){return!1},BA.isContextConsumer=function(e){return eP(e)===WA},BA.isContextProvider=function(e){return eP(e)===HA},BA.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===FA},BA.isForwardRef=function(e){return eP(e)===GA},BA.isFragment=function(e){return eP(e)===UA},BA.isLazy=function(e){return eP(e)===JA},BA.isMemo=function(e){return eP(e)===XA},BA.isPortal=function(e){return eP(e)===VA},BA.isProfiler=function(e){return eP(e)===ZA},BA.isStrictMode=function(e){return eP(e)===$A},BA.isSuspense=function(e){return eP(e)===KA},BA.isSuspenseList=function(e){return eP(e)===YA},BA.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===UA||e===ZA||e===$A||e===KA||e===YA||e===QA||"object"==typeof e&&null!==e&&(e.$$typeof===JA||e.$$typeof===XA||e.$$typeof===HA||e.$$typeof===WA||e.$$typeof===GA||e.$$typeof===NA||void 0!==e.getModuleId)},BA.typeOf=eP;const tP={notify(){},get:()=>[]};function nP(e,t){let n,r=tP;function i(){a.onStateChange&&a.onStateChange()}function o(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){const e=MA();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}const a={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=tP)},getListeners:()=>r};return a}const rP="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?U.useLayoutEffect:U.useEffect;function iP({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",noopCheck:o="once"}){const a=U.useMemo((()=>{const t=nP(e);return{store:e,subscription:t,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:o}}),[e,r,i,o]),s=U.useMemo((()=>e.getState()),[e]);rP((()=>{const{subscription:t}=a;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),s!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}}),[a,s]);const l=t||AA;return $.createElement(l.Provider,{value:a},n)}function oP(e=AA){const t=e===AA?DA:PA(e);return function(){const{store:e}=t();return e}}const aP=oP();function sP(e=AA){const t=e===AA?aP:oP(e);return function(){return t().dispatch}}const lP=sP();var cP;(e=>{LA=e})(CA.useSyncExternalStoreWithSelector),cP=sd.unstable_batchedUpdates,TA=cP;const uP=VO({name:"auth",initialState:{interval:null,isInitialized:!1},reducers:{setRefreshInterval:(e,t)=>{e.interval=t.payload},setIsInitialized:(e,t)=>{e.isInitialized=t.payload}}}),{setRefreshInterval:dP,setIsInitialized:hP}=uP.actions,pP=uP.reducer,fP=e=>e.auth.interval,mP=e=>e.auth.isInitialized,gP=VO({name:"deal",initialState:{dealId:null,deals:{}},reducers:{addDeals:(e,t)=>{t.payload.forEach((t=>{e.deals[t.id]=t}))}}}),{addDeals:vP}=gP.actions,yP=gP.reducer,bP=e=>e.deal.deals,xP=yO(((e,t)=>bP(e)),((e,t)=>t),((e,t)=>e[t])),wP=function(e){var t,n=NO(),r=e||{},i=r.reducer,o=void 0===i?void 0:i,a=r.middleware,s=void 0===a?n():a,l=r.devTools,c=void 0===l||l,u=r.preloadedState,d=void 0===u?void 0:u,h=r.enhancers,p=void 0===h?void 0:h;if("function"==typeof o)t=o;else{if(!function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=dO(o)}var f=s;"function"==typeof f&&(f=f(n));var m=pO.apply(void 0,f),g=hO;c&&(g=LO(PO({trace:!1},"object"==typeof c&&c)));var v=new zO(m),y=v;return Array.isArray(p)?y=EO([m],p):"function"==typeof p&&(y=p(v)),uO(t,d,g.apply(void 0,y))}({reducer:{auth:pP,channel:XO,deal:yP,user:rA}}),_P=lP,kP=jA,EP=VM`
  mutation GetChannels($lng: Float!, $lat: Float!) {
    getChannels(lng: $lng, lat: $lat) {
      id
      name
      detail
      ownerId
      lat
      lng
      createdAt
      updatedAt
      deletedAt
    }
  }
`,SP=VM`
  mutation CreateChannel($lng: Float!, $lat: Float!) {
    createChannel(lng: $lng, lat: $lat) {
      id
      name
      detail
      ownerId
      lat
      lng
      createdAt
      updatedAt
      deletedAt
    }
  }
`;rI.accessToken="pk.eyJ1Ijoid2VpaHoiLCJhIjoiY2xlNjVuaWI1MDJjcjNybXJsbGo4bXgyMiJ9.w_9vD530_V81gcdS-yZOLw";const CP=({channel:e,joinChannel:t})=>Q("div",{className:"popup",style:{marginTop:5},children:[J("div",{style:{fontSize:24,fontWeight:"bold",display:"flex",flexDirection:"row",justifyContent:"center"},children:e.name}),J(iw,{style:{marginTop:10,display:"flex",flexDirection:"row",justifyContent:"center"},children:J(gw,{onClick:t,style:{color:"var(--ion-color-primary)",border:"1px solid var(--ion-color-primary)",borderRadius:"5px",fontWeight:"bold"},children:"JOIN CHANNEL"})})]}),TP=({createChannel:e})=>J("div",{className:"popup",style:{marginTop:5},children:J(iw,{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:J(gw,{onClick:e,style:{color:"var(--ion-color-primary)",border:"1px solid var(--ion-color-primary)",borderRadius:"5px",fontWeight:"bold"},children:"CREATE CHANNEL"})})}),MP=()=>{var e,t;const n=_P(),r=t_();kP(iA);const[i]=tI(SP,{onError:e=>{console.log(e)},onCompleted:e=>{console.log(e),n(KO([e.createChannel])),n(YO(e.createChannel.id)),r.push("/map/channel/"+e.createChannel.id)}}),o=()=>{var e,t;i({variables:{lng:null===(e=h.current)||void 0===e?void 0:e.getLngLat().lng,lat:null===(t=h.current)||void 0===t?void 0:t.getLngLat().lat}})},[a,s]=U.useState(-70.9),[l,c]=U.useState(42.35),[u,d]=U.useState(9),h=U.useRef(null),p=U.useRef(null),f=U.useRef(null),m=kP(JO),[g,v]=U.useState(!1),[y,b]=U.useState(!1),x=e=>()=>{r.push("/map/channel/"+e),n(YO(e))};U.useEffect((()=>{var e,t;console.log("adding source",null===(e=f.current)||void 0===e?void 0:e.loaded(),y,null===(t=f.current)||void 0===t?void 0:t.getSource("channels")),f.current&&g&&y&&!f.current.getSource("channels")&&(f.current.addSource("channels",{type:"geojson",data:{type:"FeatureCollection",features:Object.values(m).map((e=>({type:"Feature",properties:{id:e.id},geometry:{type:"Point",coordinates:[e.lng,e.lat]}})))},cluster:!0,clusterMaxZoom:14,clusterRadius:30}),f.current.addLayer({id:"clusters",type:"circle",source:"channels",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#f4900c",10,"#f4900c"],"circle-radius":["step",["get","point_count"],20,10,30,100,40,1e3,50]}}),f.current.addLayer({id:"cluster-count",type:"symbol",source:"channels",filter:["has","point_count"],layout:{"text-field":["get","point_count"],"text-font":["Open Sans Semibold"],"text-size":12}}),f.current.addLayer({id:"unclustered-point",type:"circle",source:"channels",filter:["!",["has","point_count"]],paint:{"circle-color":"#f4900c","circle-radius":10,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),f.current.on("click","clusters",(e=>{var t,n,r,i;e.clickOnLayer=!0,null===(t=h.current)||void 0===t||t.remove();const o=null===(n=f.current)||void 0===n?void 0:n.queryRenderedFeatures(e.point,{layers:["clusters"]});if(!o)return;const a=null===(r=o[0].properties)||void 0===r?void 0:r.cluster_id;(null===(i=f.current)||void 0===i?void 0:i.getSource("channels")).getClusterExpansionZoom(a,((e,t)=>{var n;e||null===(n=f.current)||void 0===n||n.easeTo({center:o[0].geometry.coordinates,zoom:t})}))})),f.current.on("click","unclustered-point",(e=>{var t,n;if(e.clickOnLayer=!0,null===(t=h.current)||void 0===t||t.remove(),!e.features)return;const r=e.features[0].geometry.coordinates.slice(),i=null===(n=e.features[0].properties)||void 0===n?void 0:n.id;for(;Math.abs(e.lngLat.lng-r[0])>180;)r[0]+=e.lngLat.lng>r[0]?360:-360;const o=document.createElement("div");cd(o).render(J(CP,{channel:m[i],joinChannel:x(i)})),new rI.Popup({offset:15,focusAfterOpen:!0,closeButton:!1}).setLngLat(r).setDOMContent(o).addTo(f.current)})),f.current.on("mouseenter","clusters",(()=>{f.current&&(f.current.getCanvas().style.cursor="pointer")})),f.current.on("mouseleave","clusters",(()=>{f.current&&(f.current.getCanvas().style.cursor="")})),f.current.on("mouseenter","unclustered-point",(()=>{f.current&&(f.current.getCanvas().style.cursor="pointer")})),f.current.on("mouseleave","unclustered-point",(()=>{f.current&&(f.current.getCanvas().style.cursor="")})),b(!1))}),[g,y,m,null===(e=f.current)||void 0===e?void 0:e.getSource("channels")]);const[w]=tI(EP,{onError:e=>{console.log(e)},onCompleted:e=>{console.log(e),b(!0),n(KO(e.getChannels))}});return U.useEffect((()=>{var e;w({variables:{lng:a,lat:l}}),null===(e=f.current)||void 0===e||e.resize()}),[]),U.useEffect((()=>{var e,t;null!==(e=h.current)&&void 0!==e&&e.getPopup().isOpen()||null===(t=h.current)||void 0===t||t.togglePopup()}),[null===(t=h.current)||void 0===t?void 0:t.getPopup().isOpen()]),U.useEffect((()=>{f.current||(f.current=new rI.Map({container:p.current,style:"mapbox://styles/mapbox/streets-v12",center:[a,l],zoom:u,trackResize:!0}),f.current.on("load",(function(){var e;console.log("map loaded"),null===(e=f.current)||void 0===e||e.resize(),v(!0)})),f.current.on("move",(()=>{f.current&&(s(f.current.getCenter().lng),c(f.current.getCenter().lat),d(f.current.getZoom()))})),f.current.on("click",(e=>{setTimeout((()=>{if(console.log("click on map"),!e.clickOnLayer)if(h.current)h.current.setLngLat(e.lngLat).addTo(f.current),h.current.getPopup().isOpen()||h.current.togglePopup();else{const t=document.createElement("div");cd(t).render(J(TP,{createChannel:o})),h.current=new rI.Marker({color:"#f4900c"}).setLngLat(e.lngLat).setPopup(new rI.Popup({offset:40,focusAfterOpen:!0,closeButton:!1}).setDOMContent(t)).addTo(f.current).togglePopup(),h.current.getElement().addEventListener("click",(e=>{var t;e.stopPropagation(),null===(t=h.current)||void 0===t||t.remove()}))}}),100)})))})),J(Rw,{children:J(ow,{fullscreen:!0,style:{position:"relative"},children:J("div",{ref:p,className:"map-container",style:{opacity:g?1:0,height:"100%"}})})})};function IP(e){return Uint8Array.from(window.atob(e),(e=>e.charCodeAt(0)))}const OP=({deal:e})=>{const[t,n]=U.useState("");U.useEffect((()=>{const t=IP(e.image.data),r=new Blob([t],{type:"image/jpeg"}),i=URL.createObjectURL(r);return n(i),()=>{URL.revokeObjectURL(i)}}),[]);const r="/deal/deal/"+e.id;return Q(vw,{routerLink:r,style:{margin:"auto",marginBottom:10,padding:10,maxWidth:420,color:"var(--ion-color-secondary-contrast)",backgroundColor:"var(--ion-color-primary-contrast)"},children:[J("h1",{style:{marginTop:0,marginBottom:10,fontWeight:"bold",fontSize:32,display:"flex",flexDirection:"row",justifyContent:"center"},children:e.name}),J("img",{src:t,style:{width:"100%",borderRadius:5}}),J("h3",{style:{margin:5,display:"flex",flexDirection:"row",justifyContent:"center"},children:e.detail}),Q("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",padding:10},children:[Q("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.quantity," available @"]}),J(iw,{children:Q(gw,{routerLink:r,style:{backgroundColor:"",borderRadius:5,border:"1px solid"},children:["$",e.price]})})]})]})},AP=VM`
  mutation GetDeals {
    getDeals {
      id
      vendorId
      name
      detail
      quantity
      price
      image {
        data
      }
    }
  }
`,PP=()=>{const e=t_(),t=_P(),{authModal:n}=U.useContext(zZ),r=kP(iA),i=kP(bP),[o]=tI(AP,{onError:e=>{console.log(e)},onCompleted:e=>{console.log(e),t(vP(e.getDeals))}});return U.useEffect((()=>{o()}),[]),J(Rw,{children:Q(ow,{fullscreen:!0,children:[J("div",{style:{padding:10,backgroundColor:"#222222",minHeight:"100%"},children:Object.values(i).map((e=>J(OP,{deal:e},"deal"+e.id)))}),J(aw,{vertical:"bottom",horizontal:"end",slot:"fixed",children:J(yw,{onClick:()=>{var t;null!=r&&r.id?e.push("/deal/create"):null===(t=n.current)||void 0===t||t.present()},size:"small",style:{boxShadow:"0 5px 15px rgb(0 0 0 / 0.2)",borderRadius:"50%"},children:J(Xw,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M256 112v288M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>"})})})]})})};function DP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DP(Object(n),!0).forEach((function(t){zP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RP(e){return RP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RP(e)}function zP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return NP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?NP(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var BP=function(e){var t=$.useRef(e);return $.useEffect((function(){t.current=e}),[e]),t.current},FP=function(e){return null!==e&&"object"===RP(e)},VP="[object Object]",UP=function e(t,n){if(!FP(t)||!FP(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var i=Object.prototype.toString.call(t)===VP;if(i!==(Object.prototype.toString.call(n)===VP))return!1;if(!i&&!r)return t===n;var o=Object.keys(t),a=Object.keys(n);if(o.length!==a.length)return!1;for(var s={},l=0;l<o.length;l+=1)s[o[l]]=!0;for(var c=0;c<a.length;c+=1)s[a[c]]=!0;var u=Object.keys(s);if(u.length!==o.length)return!1;var d=t,h=n;return u.every((function(t){return e(d[t],h[t])}))},$P=function(e,t,n){return FP(e)?Object.keys(e).reduce((function(r,i){var o=!FP(t)||!UP(e[i],t[i]);return n.includes(i)?(o&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),r):o?LP(LP({},r||{}),{},zP({},i,e[i])):r}),null):null},ZP=function(e){if(null===e||FP(t=e)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment)return e;var t;throw new Error("Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},HP=function(e){if(function(e){return FP(e)&&"function"==typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(ZP)};var t=ZP(e);return null===t?{tag:"empty"}:{tag:"sync",stripe:t}},WP=$.createContext(null);WP.displayName="ElementsContext";var qP=$.createContext(null);qP.displayName="CartElementContext";var GP=function(e){var t=e.stripe,n=e.options,r=e.children,i=$.useMemo((function(){return HP(t)}),[t]),o=jP($.useState(null),2),a=o[0],s=o[1],l=jP($.useState(null),2),c=l[0],u=l[1],d=jP($.useState((function(){return{stripe:"sync"===i.tag?i.stripe:null,elements:"sync"===i.tag?i.stripe.elements(n):null}})),2),h=d[0],p=d[1];$.useEffect((function(){var e=!0,t=function(e){p((function(t){return t.stripe?t:{stripe:e,elements:e.elements(n)}}))};return"async"!==i.tag||h.stripe?"sync"!==i.tag||h.stripe||t(i.stripe):i.stripePromise.then((function(n){n&&e&&t(n)})),function(){e=!1}}),[i,h,n]);var f=BP(t);$.useEffect((function(){null!==f&&f!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")}),[f,t]);var m=BP(n);return $.useEffect((function(){if(h.elements){var e=$P(n,m,["clientSecret","fonts"]);e&&h.elements.update(e)}}),[n,m,h.elements]),$.useEffect((function(){var e=h.stripe;e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"2.1.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.1.1",url:"https://stripe.com/docs/stripe-js/react"}))}),[h.stripe]),$.createElement(WP.Provider,{value:h},$.createElement(qP.Provider,{value:{cart:a,setCart:s,cartState:c,setCartState:u}},r))};GP.propTypes={stripe:gd.any,options:gd.object};var KP=function(e){return function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e}($.useContext(WP),e)},YP=function(e){return function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e}($.useContext(qP),e)};gd.func.isRequired;var XP=function(e,t,n){var r=!!n,i=$.useRef(n);$.useEffect((function(){i.current=n}),[n]),$.useEffect((function(){if(!r||!e)return function(){};var n=function(){i.current&&i.current.apply(i,arguments)};return e.on(t,n),function(){e.off(t,n)}}),[r,t,e,i])},JP=function(e,t){var n,r="".concat((n=e).charAt(0).toUpperCase()+n.slice(1),"Element"),i=t?function(e){KP("mounts <".concat(r,">")),YP("mounts <".concat(r,">"));var t=e.id,n=e.className;return $.createElement("div",{id:t,className:n})}:function(t){var n,i=t.id,o=t.className,a=t.options,s=void 0===a?{}:a,l=t.onBlur,c=t.onFocus,u=t.onReady,d=t.onChange,h=t.onEscape,p=t.onClick,f=t.onLoadError,m=t.onLoaderStart,g=t.onNetworksChange,v=t.onCheckout,y=t.onLineItemClick,b=t.onConfirm,x=t.onCancel,w=t.onShippingAddressChange,_=t.onShippingRateChange,k=KP("mounts <".concat(r,">")).elements,E=jP($.useState(null),2),S=E[0],C=E[1],T=$.useRef(null),M=$.useRef(null),I=YP("mounts <".concat(r,">")),O=I.setCart,A=I.setCartState;XP(S,"blur",l),XP(S,"focus",c),XP(S,"escape",h),XP(S,"click",p),XP(S,"loaderror",f),XP(S,"loaderstart",m),XP(S,"networkschange",g),XP(S,"lineitemclick",y),XP(S,"confirm",b),XP(S,"cancel",x),XP(S,"shippingaddresschange",w),XP(S,"shippingratechange",_),"cart"===e?n=function(e){A(e),u&&u(e)}:u&&(n="expressCheckout"===e?u:function(){u(S)}),XP(S,"ready",n),XP(S,"change","cart"===e?function(e){A(e),d&&d(e)}:d),XP(S,"checkout","cart"===e?function(e){A(e),v&&v(e)}:v),$.useLayoutEffect((function(){if(null===T.current&&k&&null!==M.current){var t=k.create(e,s);"cart"===e&&O&&O(t),T.current=t,C(t),t.mount(M.current)}}),[k,s,O]);var P=BP(s);return $.useEffect((function(){if(T.current){var e=$P(s,P,["paymentRequest"]);e&&T.current.update(e)}}),[s,P]),$.useLayoutEffect((function(){return function(){if(T.current&&"function"==typeof T.current.destroy)try{T.current.destroy(),T.current=null}catch(e){}}}),[]),$.createElement("div",{id:i,className:o,ref:M})};return i.propTypes={id:gd.string,className:gd.string,onChange:gd.func,onBlur:gd.func,onFocus:gd.func,onReady:gd.func,onEscape:gd.func,onClick:gd.func,onLoadError:gd.func,onLoaderStart:gd.func,onNetworksChange:gd.func,onCheckout:gd.func,onLineItemClick:gd.func,onConfirm:gd.func,onCancel:gd.func,onShippingAddressChange:gd.func,onShippingRateChange:gd.func,options:gd.object},i.displayName=r,i.__elementType=e,i},QP="undefined"==typeof window;JP("auBankAccount",QP),JP("card",QP),JP("cardNumber",QP),JP("cardExpiry",QP),JP("cardCvc",QP),JP("fpxBank",QP),JP("iban",QP),JP("idealBank",QP),JP("p24Bank",QP),JP("epsBank",QP);var eD=JP("payment",QP);JP("expressCheckout",QP),JP("paymentRequestButton",QP);var tD=JP("linkAuthentication",QP);JP("address",QP),JP("shippingAddress",QP),JP("cart",QP),JP("paymentMethodMessaging",QP),JP("affirmMessage",QP),JP("afterpayClearpayMessage",QP);var nD="https://js.stripe.com/v3",rD=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,iD="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",oD=null,aD=function(e){return null!==oD||(oD=new Promise((function(t,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&e&&console.warn(iD),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(nD,'"]')),t=0;t<e.length;t++){var n=e[t];if(rD.test(n.src))return n}return null}();r&&e?console.warn(iD):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(nD).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(i){return void n(i)}else t(null)}))),oD},sD=Promise.resolve().then((function(){return aD(null)})),lD=!1;sD.catch((function(e){lD||console.warn(e)}));const cD=({deal:e})=>{const t=KP("calls useStripe()").stripe,n=KP("calls useElements()").elements,[r,i]=U.useState(""),[o,a]=U.useState(""),[s,l]=U.useState(!1);return U.useEffect((()=>{if(!t)return;const e=new URLSearchParams(window.location.search).get("payment_intent_client_secret");e&&t.retrievePaymentIntent(e).then((({paymentIntent:e})=>{switch(null==e?void 0:e.status){case"succeeded":a("Payment succeeded!");break;case"processing":a("Your payment is processing.");break;case"requires_payment_method":a("Your payment was not successful, please try again.");break;default:a("Something went wrong.")}}))}),[t]),Q(vw,{style:{margin:0,backgroundColor:"white",padding:10},children:[Q("div",{style:{fontSize:24,marginBottom:10},children:["$",e.price]}),J(tD,{id:"link-authentication-element",onChange:e=>{var t;return i(null==e||null===(t=e.target)||void 0===t?void 0:t.value)}}),J(eD,{id:"payment-element",options:{layout:"tabs"}}),J("div",{style:{paddingTop:10},children:J(gw,{disabled:s||!t||!n,onClick:async e=>{if(e.preventDefault(),!t||!n)return;l(!0);const{error:r}=await t.confirmPayment({elements:n,confirmParams:{return_url:"https://jamn.io/home"}});"card_error"===r.type||"validation_error"===r.type?a(r.message||""):a("An unexpected error occurred."),l(!1)},children:J("span",{id:"button-text",children:s?J("div",{className:"spinner",id:"spinner"}):"PAY NOW"})})}),o&&J("div",{id:"payment-message",children:o})]})},uD=VM`
  mutation CreatePaymentIntent($price: Int!) {
    createPaymentIntent(price: $price)
  }
`,dD=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];lD=!0;var r=Date.now();return sD.then((function(e){return function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.54.1",startTime:t})}(r,n),r}(e,t,r)}))}("pk_test_51NKshHEepGte6R38JUzw5SLrUnIZpJfotvPkvwfT6VVnMjNkRxzLFPDOJzVP8fFqMjIIOj2iZ29oFBvjSJsQNI3E00ex7nypzU"),hD=({deal:e})=>{const[t,n]=U.useState(""),[r]=tI(uD,{onError:e=>{console.log(e)},onCompleted:e=>{console.log(e),n(e.createPaymentIntent)}});return U.useEffect((()=>{r({variables:{price:100*e.price}})}),[]),t?J(GP,{options:{clientSecret:t,appearance:{theme:"stripe"}},stripe:dD,children:J(cD,{deal:e})}):null},pD=({match:e})=>{const t=kP(iA),n=kP((t=>xP(t,parseInt(e.params.id)))),[r,i]=U.useState("");return U.useEffect((()=>{if(!n)return;const e=IP(n.image.data),t=new Blob([e],{type:"image/jpeg"}),r=URL.createObjectURL(t);return i(r),()=>{URL.revokeObjectURL(r)}}),[null==n?void 0:n.id]),n?J(Rw,{children:Q(ow,{fullscreen:!0,children:[Q("div",{style:{display:"flex",flexDirection:"row",justifyContent:"start",marginLeft:5,marginTop:5},children:[J(iw,{style:{display:"inline-flex",flexDirection:"column",justifyContent:"center"},children:J(gw,{routerLink:"/deal",style:{},children:J(Xw,{icon:x_})})}),J("div",{style:{display:"inline-flex",fontSize:32,fontWeight:"bold",flexDirection:"column",justifyContent:"center"},children:n.name})]}),Q("div",{style:{margin:"auto",maxWidth:420,padding:20,paddingTop:0},children:[J("img",{src:r,style:{marginTop:15,width:"100%",borderRadius:5}}),J("h3",{style:{},children:n.detail}),(null==t?void 0:t.id)&&n.quantity>0&&n.vendorId!==(null==t?void 0:t.id)&&J(hD,{deal:n})]})]})}):null};var fD,mD,gD={exports:{}},vD={exports:{}};fD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mD={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&mD.rotl(e,8)|4278255360&mD.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=mD.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var r=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?t.push(fD.charAt(r>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,r=0;n<e.length;r=++n%4)0!=r&&t.push((fD.indexOf(e.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|fD.indexOf(e.charAt(n))>>>6-2*r);return t}},vD.exports=mD;var yD=vD.exports,bD={utf8:{stringToBytes:function(e){return bD.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(bD.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}},xD=bD,wD=function(e){return null!=e&&(_D(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&_D(e.slice(0,0))}(e)||!!e._isBuffer)};function _D(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}!function(){var e=yD,t=xD.utf8,n=wD,r=xD.bin,i=function(o,a){o.constructor==String?o=a&&"binary"===a.encoding?r.stringToBytes(o):t.stringToBytes(o):n(o)?o=Array.prototype.slice.call(o,0):Array.isArray(o)||o.constructor===Uint8Array||(o=o.toString());for(var s=e.bytesToWords(o),l=8*o.length,c=1732584193,u=-271733879,d=-1732584194,h=271733878,p=0;p<s.length;p++)s[p]=16711935&(s[p]<<8|s[p]>>>24)|4278255360&(s[p]<<24|s[p]>>>8);s[l>>>5]|=128<<l%32,s[14+(l+64>>>9<<4)]=l;var f=i._ff,m=i._gg,g=i._hh,v=i._ii;for(p=0;p<s.length;p+=16){var y=c,b=u,x=d,w=h;c=f(c,u,d,h,s[p+0],7,-680876936),h=f(h,c,u,d,s[p+1],12,-389564586),d=f(d,h,c,u,s[p+2],17,606105819),u=f(u,d,h,c,s[p+3],22,-1044525330),c=f(c,u,d,h,s[p+4],7,-176418897),h=f(h,c,u,d,s[p+5],12,1200080426),d=f(d,h,c,u,s[p+6],17,-1473231341),u=f(u,d,h,c,s[p+7],22,-45705983),c=f(c,u,d,h,s[p+8],7,1770035416),h=f(h,c,u,d,s[p+9],12,-1958414417),d=f(d,h,c,u,s[p+10],17,-42063),u=f(u,d,h,c,s[p+11],22,-1990404162),c=f(c,u,d,h,s[p+12],7,1804603682),h=f(h,c,u,d,s[p+13],12,-40341101),d=f(d,h,c,u,s[p+14],17,-1502002290),c=m(c,u=f(u,d,h,c,s[p+15],22,1236535329),d,h,s[p+1],5,-165796510),h=m(h,c,u,d,s[p+6],9,-1069501632),d=m(d,h,c,u,s[p+11],14,643717713),u=m(u,d,h,c,s[p+0],20,-373897302),c=m(c,u,d,h,s[p+5],5,-701558691),h=m(h,c,u,d,s[p+10],9,38016083),d=m(d,h,c,u,s[p+15],14,-660478335),u=m(u,d,h,c,s[p+4],20,-405537848),c=m(c,u,d,h,s[p+9],5,568446438),h=m(h,c,u,d,s[p+14],9,-1019803690),d=m(d,h,c,u,s[p+3],14,-187363961),u=m(u,d,h,c,s[p+8],20,1163531501),c=m(c,u,d,h,s[p+13],5,-1444681467),h=m(h,c,u,d,s[p+2],9,-51403784),d=m(d,h,c,u,s[p+7],14,1735328473),c=g(c,u=m(u,d,h,c,s[p+12],20,-1926607734),d,h,s[p+5],4,-378558),h=g(h,c,u,d,s[p+8],11,-2022574463),d=g(d,h,c,u,s[p+11],16,1839030562),u=g(u,d,h,c,s[p+14],23,-35309556),c=g(c,u,d,h,s[p+1],4,-1530992060),h=g(h,c,u,d,s[p+4],11,1272893353),d=g(d,h,c,u,s[p+7],16,-155497632),u=g(u,d,h,c,s[p+10],23,-1094730640),c=g(c,u,d,h,s[p+13],4,681279174),h=g(h,c,u,d,s[p+0],11,-358537222),d=g(d,h,c,u,s[p+3],16,-722521979),u=g(u,d,h,c,s[p+6],23,76029189),c=g(c,u,d,h,s[p+9],4,-640364487),h=g(h,c,u,d,s[p+12],11,-421815835),d=g(d,h,c,u,s[p+15],16,530742520),c=v(c,u=g(u,d,h,c,s[p+2],23,-995338651),d,h,s[p+0],6,-198630844),h=v(h,c,u,d,s[p+7],10,1126891415),d=v(d,h,c,u,s[p+14],15,-1416354905),u=v(u,d,h,c,s[p+5],21,-57434055),c=v(c,u,d,h,s[p+12],6,1700485571),h=v(h,c,u,d,s[p+3],10,-1894986606),d=v(d,h,c,u,s[p+10],15,-1051523),u=v(u,d,h,c,s[p+1],21,-2054922799),c=v(c,u,d,h,s[p+8],6,1873313359),h=v(h,c,u,d,s[p+15],10,-30611744),d=v(d,h,c,u,s[p+6],15,-1560198380),u=v(u,d,h,c,s[p+13],21,1309151649),c=v(c,u,d,h,s[p+4],6,-145523070),h=v(h,c,u,d,s[p+11],10,-1120210379),d=v(d,h,c,u,s[p+2],15,718787259),u=v(u,d,h,c,s[p+9],21,-343485551),c=c+y>>>0,u=u+b>>>0,d=d+x>>>0,h=h+w>>>0}return e.endian([c,u,d,h])};i._ff=function(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},i._gg=function(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},i._hh=function(e,t,n,r,i,o,a){var s=e+(t^n^r)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},i._ii=function(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+(i>>>0)+a;return(s<<o|s>>>32-o)+t},i._blocksize=16,i._digestsize=16,gD.exports=function(t,n){if(null==t)throw new Error("Illegal argument "+t);var o=e.wordsToBytes(i(t,n));return n&&n.asBytes?o:n&&n.asString?r.bytesToString(o):e.bytesToHex(o)}}();const kD=i(gD.exports),ED=()=>{const e=kP(iA);return J(sw,{children:Q(dw,{style:{position:"fixed",paddingTop:pw("ios")?50:0},children:[J(uw,{size:"large",children:"JAMN"}),Q(iw,{slot:"end",style:{marginRight:10},children:[J(gw,{id:"auth-modal-button",style:{display:null!=e&&e.id?"none":"block"},children:J(Xw,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M258.9 48C141.92 46.42 46.42 141.92 48 258.9c1.56 112.19 92.91 203.54 205.1 205.1 117 1.6 212.48-93.9 210.88-210.88C462.44 140.91 371.09 49.56 258.9 48zm126.42 327.25a4 4 0 01-6.14-.32 124.27 124.27 0 00-32.35-29.59C321.37 329 289.11 320 256 320s-65.37 9-90.83 25.34a124.24 124.24 0 00-32.35 29.58 4 4 0 01-6.14.32A175.32 175.32 0 0180 259c-1.63-97.31 78.22-178.76 175.57-179S432 158.81 432 256a175.32 175.32 0 01-46.68 119.25z'/><path d='M256 144c-19.72 0-37.55 7.39-50.22 20.82s-19 32-17.57 51.93C191.11 256 221.52 288 256 288s64.83-32 67.79-71.24c1.48-19.74-4.8-38.14-17.68-51.82C293.39 151.44 275.59 144 256 144z'/></svg>"})}),J(gw,{id:"account-modal-button",style:{display:null!=e&&e.id?"block":"none"},children:J(rw,{style:{width:30,height:30,cursor:"pointer"},children:J("img",{src:`https://www.gravatar.com/avatar/${kD((null==e?void 0:e.id.toString())||"")}?d=retro`})})})]})]})})},SD=U.createContext(null);function CD({clientId:e,nonce:t,onScriptLoadSuccess:n,onScriptLoadError:r,children:i}){const o=function(e={}){const{nonce:t,onScriptLoadSuccess:n,onScriptLoadError:r}=e,[i,o]=U.useState(!1),a=U.useRef(n);a.current=n;const s=U.useRef(r);return s.current=r,U.useEffect((()=>{const e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=t,e.onload=()=>{var e;o(!0),null===(e=a.current)||void 0===e||e.call(a)},e.onerror=()=>{var e;o(!1),null===(e=s.current)||void 0===e||e.call(s)},document.body.appendChild(e),()=>{document.body.removeChild(e)}}),[t]),i}({nonce:t,onScriptLoadSuccess:n,onScriptLoadError:r}),a=U.useMemo((()=>({clientId:e,scriptLoadedSuccessfully:o})),[e,o]);return $.createElement(SD.Provider,{value:a},i)}function TD(e){var t;return null!==(t=null==e?void 0:e.clientId)&&void 0!==t?t:null==e?void 0:e.client_id}const MD={large:40,medium:32,small:20};function ID({onSuccess:e,onError:t,useOneTap:n,promptMomentNotification:r,type:i="standard",theme:o="outline",size:a="large",text:s,shape:l,logo_alignment:c,width:u,locale:d,click_listener:h,containerProps:p,...f}){const m=U.useRef(null),{clientId:g,scriptLoadedSuccessfully:v}=function(){const e=U.useContext(SD);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),y=U.useRef(e);y.current=e;const b=U.useRef(t);b.current=t;const x=U.useRef(r);return x.current=r,U.useEffect((()=>{var e,t,r,p,w,_,k,E,S;if(v)return null===(r=null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===r||r.initialize({client_id:g,callback:e=>{var t;if(!(null==e?void 0:e.credential))return null===(t=b.current)||void 0===t?void 0:t.call(b);const{credential:n,select_by:r}=e;y.current({credential:n,clientId:TD(e),select_by:r})},...f}),null===(_=null===(w=null===(p=null===window||void 0===window?void 0:window.google)||void 0===p?void 0:p.accounts)||void 0===w?void 0:w.id)||void 0===_||_.renderButton(m.current,{type:i,theme:o,size:a,text:s,shape:l,logo_alignment:c,width:u,locale:d,click_listener:h}),n&&(null===(S=null===(E=null===(k=null===window||void 0===window?void 0:window.google)||void 0===k?void 0:k.accounts)||void 0===E?void 0:E.id)||void 0===S||S.prompt(x.current)),()=>{var e,t,r;n&&(null===(r=null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===r||r.cancel())}}),[g,v,n,i,o,a,s,l,c,u,d]),$.createElement("div",{...p,ref:m,style:{height:MD[a],...null==p?void 0:p.style}})}/*! Capacitor: https://capacitorjs.com/ - MIT License */const OD=e=>e.CapacitorPlatforms=(e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return n.addPlatform=(e,t)=>{n.platforms.set(e,t)},n.setPlatform=e=>{n.platforms.has(e)&&(n.currentPlatform=n.platforms.get(e))},n})(e),AD=OD("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});var PD;AD.addPlatform,AD.setPlatform,function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(PD||(PD={}));class DD extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}e("q",DD);const LD=e=>{var t,n,r,i,o;const a=e.CapacitorCustomPlatform||null,s=e.Capacitor||{},l=s.Plugins=s.Plugins||{},c=e.CapacitorPlatforms,u=(null===(t=null==c?void 0:c.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==a?a.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e)),d=(null===(n=null==c?void 0:c.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==u()),h=(null===(r=null==c?void 0:c.currentPlatform)||void 0===r?void 0:r.isPluginAvailable)||(e=>{const t=f.get(e);return!!(null==t?void 0:t.platforms.has(u()))||!!p(e)}),p=(null===(i=null==c?void 0:c.currentPlatform)||void 0===i?void 0:i.getPluginHeader)||(e=>{var t;return null===(t=s.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))}),f=new Map,m=(null===(o=null==c?void 0:c.currentPlatform)||void 0===o?void 0:o.registerPlugin)||((e,t={})=>{const n=f.get(e);if(n)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),n.proxy;const r=u(),i=p(e);let o;const c=n=>{let l;const c=(...c)=>{const u=(async()=>(!o&&r in t?o=o="function"==typeof t[r]?await t[r]():t[r]:null!==a&&!o&&"web"in t&&(o=o="function"==typeof t.web?await t.web():t.web),o))().then((t=>{const o=((t,n)=>{var o,a;if(!i){if(t)return null===(a=t[n])||void 0===a?void 0:a.bind(t);throw new DD(`"${e}" plugin is not implemented on ${r}`,PD.Unimplemented)}{const r=null==i?void 0:i.methods.find((e=>n===e.name));if(r)return"promise"===r.rtype?t=>s.nativePromise(e,n.toString(),t):(t,r)=>s.nativeCallback(e,n.toString(),t,r);if(t)return null===(o=t[n])||void 0===o?void 0:o.bind(t)}})(t,n);if(o){const e=o(...c);return l=null==e?void 0:e.remove,e}throw new DD(`"${e}.${n}()" is not implemented on ${r}`,PD.Unimplemented)}));return"addListener"===n&&(u.remove=async()=>l()),u};return c.toString=()=>`${n.toString()}() { [capacitor code] }`,Object.defineProperty(c,"name",{value:n,writable:!1,configurable:!1}),c},d=c("addListener"),h=c("removeListener"),m=(e,t)=>{const n=d({eventName:e},t),r=async()=>{const r=await n;h({eventName:e,callbackId:r},t)},i=new Promise((e=>n.then((()=>e({remove:r})))));return i.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},i},g=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return i?m:d;case"removeListener":return h;default:return c(t)}}});return l[e]=g,f.set(e,{name:e,proxy:g,platforms:new Set([...Object.keys(t),...i?[r]:[]])}),g});return s.convertFileSrc||(s.convertFileSrc=e=>e),s.getPlatform=u,s.handleError=t=>e.console.error(t),s.isNativePlatform=d,s.isPluginAvailable=h,s.pluginMethodNoop=(e,t,n)=>Promise.reject(`${n} does not have an implementation of "${t}".`),s.registerPlugin=m,s.Exception=DD,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s.platform=s.getPlatform(),s.isNative=s.isNativePlatform(),s},RD=e=>e.Capacitor=LD(e),zD=RD("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),jD=zD.registerPlugin;zD.Plugins;class ND{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n);const r=async()=>this.removeListener(e,t),i=Promise.resolve({remove:r});return Object.defineProperty(i,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()}}),i}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const n=this.listeners[e];n&&n.forEach((e=>e(t)))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new zD.Exception(e,PD.Unimplemented)}unavailable(e="not available"){return new zD.Exception(e,PD.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}e("W",ND);const BD=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),FD=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class VD extends ND{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach((e=>{if(e.length<=0)return;let[n,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=FD(n).trim(),r=FD(r).trim(),t[n]=r})),t}async setCookie(e){try{const t=BD(e.key),n=BD(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${r}; path=${i}; ${o};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}jD("CapacitorCookies",{web:()=>new VD});const UD=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=((e={})=>{const t=Object.keys(e),n=Object.keys(e).map((e=>e.toLocaleLowerCase()));return n.reduce(((n,r,i)=>(n[r]=e[t[i]],n)),{})})(e.headers),i=r["content-type"]||"";if("string"==typeof e.data)n.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(e.data||{}))t.set(n,r);n.body=t.toString()}else if(i.includes("multipart/form-data")){const t=new FormData;if(e.data instanceof FormData)e.data.forEach(((e,n)=>{t.append(n,e)}));else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(i.includes("application/json")||"object"==typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class $D extends ND{async request(e){const t=UD(e,e.webFetchExtra),n=((e,t=!0)=>e?Object.entries(e).reduce(((e,n)=>{const[r,i]=n;let o,a;return Array.isArray(i)?(a="",i.forEach((e=>{o=t?encodeURIComponent(e):e,a+=`${r}=${o}&`})),a.slice(0,-1)):(o=t?encodeURIComponent(i):i,a=`${r}=${o}`),`${e}&${a}`}),"").substr(1):null)(e.params,e.shouldEncodeUrlParams),r=n?`${e.url}?${n}`:e.url,i=await fetch(r,t),o=i.headers.get("content-type")||"";let a,s,{responseType:l="text"}=i.ok?e:{};switch(o.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":s=await i.blob(),a=await(async e=>new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},r.onerror=e=>n(e),r.readAsDataURL(e)})))(s);break;case"json":a=await i.json();break;default:a=await i.text()}const c={};return i.headers.forEach(((e,t)=>{c[t]=e})),{data:a,headers:c,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}jD("CapacitorHttp",{web:()=>new $D});const ZD=jD("Preferences",{web:()=>Qh((()=>t.import("./web-legacy-86beab64.js"))).then((e=>new e.PreferencesWeb))}),HD="www.jamn.io",WD="ACCESS_TOKEN",qD="REFRESH_TOKEN",GD=VM`
  mutation Refresh($refreshToken: String!) {
    refresh(refreshToken: $refreshToken) {
      user {
        id
        phone
        isAdmin
      }
      accessToken
    }
  }
`;function KD(){const e=_P(),t=kP(fP),[n]=tI(GD,{onError:n=>{console.log(n),t&&clearInterval(t),e(hP(!0)),e(dP(null)),e(nA(null))},onCompleted:t=>{console.log(t),e(hP(!0)),e(tA([t.refresh.user])),e(nA(t.refresh.user.id)),ZD.set({key:WD,value:t.refresh.accessToken})}}),r=async()=>{const{value:t}=await ZD.get({key:qD});t?n({variables:{refreshToken:t}}):(e(hP(!0)),e(dP(null)),e(nA(null)))};return{refreshToken:r,refreshTokenInterval:()=>{const t=setInterval(r,24e4);e(dP(t))}}}const YD=VM`
  fragment UserFields on User {
    id
    email
    phone
    isAdmin
  }
`,XD=VM`
  mutation GoogleAuth($credential: String!) {
    googleAuth(credential: $credential) {
      user {
        ...UserFields
      }
      accessToken
      refreshToken
    }
  }
  ${YD}
`;var JD={exports:{}};!function(e,t){e.exports=function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(8)},function(e,t,n){e.exports=n(6)()},function(t,n){t.exports=e},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return decodeURIComponent(e.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent(t).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=r(n(2)),u=r(n(1)),d=r(n(5)),h=r(n(3)),p=function(){var e=!1;try{e=!!(window.navigator&&window.navigator.standalone||navigator.userAgent.match("CriOS")||navigator.userAgent.match(/mobile/i))}catch(t){}return e},f=function(e){function t(){var e,n,r;i(this,t);for(var a=arguments.length,l=Array(a),c=0;c<a;c++)l[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={isSdkLoaded:!1,isProcessing:!1},r.responseApi=function(e){window.FB.api("/me",{locale:r.props.language,fields:r.props.fields},(function(t){s(t,e),r.props.callback(t)}))},r.checkLoginState=function(e){r.setStateIfMounted({isProcessing:!1}),e.authResponse?r.responseApi(e.authResponse):r.props.onFailure?r.props.onFailure({status:e.status}):r.props.callback({status:e.status})},r.checkLoginAfterRefresh=function(e){"connected"===e.status?r.checkLoginState(e):window.FB.login((function(e){return r.checkLoginState(e)}),!0)},r.click=function(e){if(r.state.isSdkLoaded&&!r.state.isProcessing&&!r.props.isDisabled){r.setState({isProcessing:!0});var t=r.props,n=t.scope,i=t.appId,o=t.onClick,a=t.returnScopes,s=t.responseType,l=t.redirectUri,c=t.disableMobileRedirect,u=t.authType,h=t.state;if("function"!=typeof o||(o(e),!e.defaultPrevented)){var p={client_id:i,redirect_uri:l,state:h,return_scopes:a,scope:n,response_type:s,auth_type:u};if(r.props.isMobile&&!c)window.location.href="https://www.facebook.com/dialog/oauth"+(0,d.default)(p);else{if(!window.FB)return void(r.props.onFailure&&r.props.onFailure({status:"facebookNotLoaded"}));window.FB.login(r.checkLoginState,{scope:n,return_scopes:a,auth_type:p.auth_type})}}}},o(r,n)}return a(t,e),l(t,[{key:"componentDidMount",value:function(){if(this._isMounted=!0,document.getElementById("facebook-jssdk"))this.sdkLoaded();else{this.setFbAsyncInit(),this.loadSdkAsynchronously();var e=document.getElementById("fb-root");e||((e=document.createElement("div")).id="fb-root",document.body.appendChild(e))}}},{key:"componentWillReceiveProps",value:function(e){this.state.isSdkLoaded&&e.autoLoad&&!this.props.autoLoad&&window.FB.getLoginStatus(this.checkLoginAfterRefresh)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"setStateIfMounted",value:function(e){this._isMounted&&this.setState(e)}},{key:"setFbAsyncInit",value:function(){var e=this,t=this.props,n=t.appId,r=t.xfbml,i=t.cookie,o=t.version,a=t.autoLoad;window.fbAsyncInit=function(){window.FB.init({version:"v"+o,appId:n,xfbml:r,cookie:i}),e.setStateIfMounted({isSdkLoaded:!0}),(a||e.isRedirectedFromFb())&&window.FB.getLoginStatus(e.checkLoginAfterRefresh)}}},{key:"isRedirectedFromFb",value:function(){var e=window.location.search;return(0,h.default)(e,"code")||(0,h.default)(e,"granted_scopes")}},{key:"sdkLoaded",value:function(){this.setState({isSdkLoaded:!0})}},{key:"loadSdkAsynchronously",value:function(){var e=this.props.language;!function(t,n,r){var i=t.getElementsByTagName(n)[0],o=i,a=i;t.getElementById(r)||((a=t.createElement(n)).id=r,a.src="https://connect.facebook.net/"+e+"/sdk.js",o.parentNode.insertBefore(a,o))}(document,"script","facebook-jssdk")}},{key:"render",value:function(){var e=this.props.render;if(!e)throw new Error("ReactFacebookLogin requires a render prop to render");var t={onClick:this.click,isDisabled:!!this.props.isDisabled,isProcessing:this.state.isProcessing,isSdkLoaded:this.state.isSdkLoaded};return this.props.render(t)}}]),t}(c.default.Component);f.propTypes={isDisabled:u.default.bool,callback:u.default.func.isRequired,appId:u.default.string.isRequired,xfbml:u.default.bool,cookie:u.default.bool,authType:u.default.string,scope:u.default.string,state:u.default.string,responseType:u.default.string,returnScopes:u.default.bool,redirectUri:u.default.string,autoLoad:u.default.bool,disableMobileRedirect:u.default.bool,isMobile:u.default.bool,fields:u.default.string,version:u.default.string,language:u.default.string,onClick:u.default.func,onFailure:u.default.func,render:u.default.func.isRequired},f.defaultProps={redirectUri:"undefined"!=typeof window?window.location.href:"/",scope:"public_profile,email",returnScopes:!1,xfbml:!1,cookie:!1,authType:"",fields:"name",version:"2.3",language:"en_US",disableMobileRedirect:!1,isMobile:p(),onFailure:null,state:"facebookdirect",responseType:"code"},t.default=f},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"?"+Object.keys(e).map((function(t){return t+"="+encodeURIComponent(e[t])})).join("&")}},function(e,t,n){function r(){}var i=n(7);e.exports=function(){function e(e,t,n,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t){var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=r(n(2)),u=r(n(1)),d=r(n(9)),h=r(n(4)),p=function(e){return["button","input","select","textarea","optgroup","option","fieldset"].indexOf((e+"").toLowerCase())>=0},f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"style",value:function(){var e=this.constructor.defaultProps.cssClass;return this.props.cssClass===e&&c.default.createElement("style",{dangerouslySetInnerHTML:{__html:d.default}})}},{key:"containerStyle",value:function(e){var t=e.isProcessing,n=e.isSdkLoaded,r=e.isDisabled,i={transition:"opacity 0.5s"};return(t||!n||r)&&(i.opacity=.6),s(i,this.props.containerStyle)}},{key:"renderOwnButton",value:function(e){var t=this.props,n=t.cssClass,r=t.size,i=t.icon,o=t.textButton,a=t.typeButton,l=t.buttonStyle,u=e.onClick,d="string"==typeof i,h={};return e.isDisabled&&p(this.props.tag)&&(h.disabled=!0),c.default.createElement("span",{style:this.containerStyle(e)},d&&c.default.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"}),c.default.createElement(this.props.tag,s({type:a,className:n+" "+r,style:l,onClick:u},h),i&&d&&c.default.createElement("i",{className:"fa "+i}),i&&!d&&i,o),this.style())}},{key:"render",value:function(){var e=this;return c.default.createElement(h.default,s({},this.props,{render:function(t){return e.renderOwnButton(t)}}))}}]),t}(c.default.Component);f.propTypes={textButton:u.default.string,typeButton:u.default.string,size:u.default.string,cssClass:u.default.string,icon:u.default.any,containerStyle:u.default.object,buttonStyle:u.default.object,tag:u.default.oneOfType([u.default.node,u.default.func])},f.defaultProps={textButton:"Login with Facebook",typeButton:"button",size:"metro",fields:"name",cssClass:"kep-login-facebook",tag:"button"},t.default=f},function(e,t,n){(t=e.exports=n(10)()).push([e.id,".kep-login-facebook{font-family:Helvetica,sans-serif;font-weight:700;-webkit-font-smoothing:antialiased;color:#fff;cursor:pointer;display:inline-block;font-size:calc(.27548vw + 12.71074px);text-decoration:none;text-transform:uppercase;transition:background-color .3s,border-color .3s;background-color:#4c69ba;border:calc(.06887vw + .67769px) solid #4c69ba;padding:calc(.34435vw + 13.38843px) calc(.34435vw + 18.38843px)}.kep-login-facebook.small{padding:calc(.34435vw + 3.38843px) calc(.34435vw + 8.38843px)}.kep-login-facebook.medium{padding:calc(.34435vw + 8.38843px) calc(.34435vw + 13.38843px)}.kep-login-facebook.metro{border-radius:0}.kep-login-facebook .fa{margin-right:calc(.34435vw + 3.38843px)}",""]),t.locals={"kep-login-facebook":"kep-login-facebook",small:"small",medium:"medium",metro:"metro",fa:"fa"}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}}])}(U)}(JD);const QD=i(JD.exports),eL=VM`
  mutation FacebookAuth($credential: String!) {
    facebookAuth(credential: $credential) {
      user {
        ...UserFields
      }
      accessToken
      refreshToken
    }
  }
  ${YD}
`,tL=VM`
  mutation phoneLogin($phone: String!) {
    phoneLogin(phone: $phone) {
      ...UserFields
    }
  }
  ${YD}
`,nL=VM`
  mutation emailLogin($email: String!) {
    emailLogin(email: $email) {
      ...UserFields
    }
  }
  ${YD}
`,rL=({setPendingUser:e})=>{const[t,n]=U.useState(""),[r,i]=U.useState(!1),[o,a]=U.useState(""),[s,l]=U.useState(!1),[c,u]=U.useState(!1),{authModal:d}=U.useContext(zZ),h=(()=>{const e=_P(),{authModal:t}=U.useContext(zZ),{refreshTokenInterval:n}=KD(),[r]=tI(XD,{onError:e=>{console.error(e)},onCompleted:async r=>{var i;console.log(r),r.googleAuth.user.id&&(null===(i=t.current)||void 0===i||i.dismiss(),e(tA([r.googleAuth.user])),e(nA(r.googleAuth.user.id)),await ZD.set({key:WD,value:r.googleAuth.accessToken}),await ZD.set({key:qD,value:r.googleAuth.refreshToken}),n())}});return async e=>{e&&await r({variables:{credential:e}})}})(),p=(()=>{const e=_P(),{authModal:t}=U.useContext(zZ),{refreshTokenInterval:n}=KD(),[r]=tI(eL,{onError:e=>{console.error(e)},onCompleted:async r=>{var i;console.log(r),r.facebookAuth.user.id&&(null===(i=t.current)||void 0===i||i.dismiss(),e(tA([r.facebookAuth.user])),e(nA(r.facebookAuth.user.id)),await ZD.set({key:WD,value:r.facebookAuth.accessToken}),await ZD.set({key:qD,value:r.facebookAuth.refreshToken}),n())}});return async e=>{e&&await r({variables:{credential:e}})}})(),[f]=tI(nL,{onError:e=>{console.log(e),u(!1)},onCompleted:t=>{console.log(t),u(!1),t.emailLogin.id&&(n(""),a(""),e(t.emailLogin))}}),[m]=tI(tL,{onError:e=>{console.log(e),u(!1)},onCompleted:t=>{console.log(t),u(!1),t.phoneLogin.id&&(n(""),a(""),e(t.phoneLogin))}});return J(ow,{fullscreen:!0,children:Q("div",{style:{padding:30,paddingTop:0},children:[J(iw,{style:{marginBottom:40},children:J(gw,{onClick:()=>{var e;null===(e=d.current)||void 0===e||e.dismiss()},style:{border:"1px solid",borderRadius:5,fontSize:20,fontWeight:"bold",height:40},children:J("span",{style:{padding:10},children:"BACK"})})}),J("div",{style:{textAlign:"center"},children:"Choose your preferred login method:"}),J("div",{style:{marginTop:30,display:"flex",flexDirection:"column",justifyContent:"center"},children:Q("div",{style:{paddingLeft:10,border:"1px solid",borderRadius:5,margin:"auto",width:240,display:"flex"},children:[J(lw,{type:"tel",placeholder:"888-888-8888",onIonInput:e=>{const t=e.target.value;a(t),/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(t)?l(!0):l(!1)},clearInput:!0,value:o}),J(iw,{children:J(gw,{disabled:!s||c,onClick:()=>{u(!0);const e=o.replace(/[^0-9]/g,"");m({variables:{phone:e}})},children:J(Xw,{icon:w_,size:"small"})})})]})}),J("div",{style:{marginBottom:30,paddingTop:30,display:"flex",flexDirection:"column",justifyContent:"center"},children:Q("div",{style:{paddingLeft:10,border:"1px solid",borderRadius:5,margin:"auto",width:240,display:"flex"},children:[J(lw,{type:"email",placeholder:"email@domain.com",clearInput:!0,onIonInput:e=>{const t=e.target.value;n(t),/\S+@\S+\.\S+/.test(t)?i(!0):i(!1)},value:t}),J(iw,{children:J(gw,{disabled:!r||c,onClick:()=>{u(!0);const e=t.trim();f({variables:{email:e}})},children:J(Xw,{icon:w_,size:"small"})})})]})}),J("div",{style:{display:"flex",justifyContent:"center"},children:J(ID,{onSuccess:e=>{console.log(e),h(e.credential)},onError:()=>{console.log("Login failed")},useOneTap:!1,text:"continue_with",width:220})}),J("div",{style:{display:"flex",justifyContent:"center",padding:30},children:J(QD,{appId:"1483086142451421",autoLoad:!1,fields:"name,email,picture",scope:"public_profile, email",textButton:"Continue with Facebook",disableMobileRedirect:!0,onClick:()=>{},callback:e=>{console.log(e),p(e.accessToken)}})})]})})},iL=VM`
  mutation Verify($id: Int!, $code: String!) {
    verify(id: $id, code: $code) {
      user {
        ...UserFields
      }
      accessToken
      refreshToken
    }
  }
  ${YD}
`,oL=VM`
  mutation Resend($phone: String, $email: String) {
    resend(phone: $phone, email: $email) {
      ...UserFields
    }
  }
  ${YD}
`,aL=({pendingUser:e,setPendingUser:t})=>{const n=_P(),{authModal:r}=U.useContext(zZ),[i,o]=U.useState(""),[a,s]=U.useState(!1),{refreshTokenInterval:l}=KD(),[c]=tI(iL,{onError:e=>{console.log(e),"Invalid verification code"===e.message&&s(!0)},onCompleted:async e=>{var i;console.log(e),e.verify.user.id&&(t(null),null===(i=r.current)||void 0===i||i.dismiss(),n(tA([e.verify.user])),n(nA(e.verify.user.id)),await ZD.set({key:WD,value:e.verify.accessToken}),await ZD.set({key:qD,value:e.verify.refreshToken}),l())}}),[u,d]=U.useState(!1),[h]=tI(oL,{onError:e=>{console.log(e)},onCompleted:e=>{console.log(e),e.resend.id&&(d(!0),setTimeout((()=>{d(!1)}),3e3))}});return J(ow,{fullscreen:!0,children:Q("div",{children:[Q("div",{style:{margin:30},children:["A ",J("b",{children:"verification code"})," has been ",e.email?"emailed":"texted"," to"]}),Q("div",{style:{margin:30,fontWeight:"bold",fontSize:24},children:[e.email?e.email:null,e.phone?Q("div",{children:["+1 ",e.phone.slice(0,3)," ",e.phone.slice(3,6)," ",e.phone.slice(-4)]}):null]}),J("div",{style:{margin:30},children:"Enter this code to login."}),J("div",{style:{margin:30,paddingLeft:10,paddingRight:10,border:"1px solid",borderRadius:5,marginTop:30,width:160},children:J(lw,{type:"number",placeholder:"123456",onIonInput:e=>{const t=e.target.value;o(t),s(!1)},value:i,style:{fontSize:24}})}),Q(iw,{style:{margin:30,display:"flex",flexDirection:"column",alignItems:"start"},children:[J(gw,{disabled:6!==i.length,onClick:()=>{const t=i.replace(/[^0-9]/g,"").trim();c({variables:{id:e.id,code:t}})},style:{border:"1px solid",borderRadius:5,fontSize:24,fontWeight:"bold",height:50,marginBottom:10},children:a?"INVALID CODE...":"LOGIN"}),J(gw,{disabled:u,onClick:()=>{h({variables:{phone:e.phone,email:e.email}})},style:{border:"1px solid",borderRadius:5,fontSize:24,fontWeight:"bold",height:50,marginBottom:10},children:u?"CODE SENT...":"RESEND CODE"}),J(gw,{onClick:()=>{t(null)},style:{border:"1px solid",borderRadius:5,fontSize:24,fontWeight:"bold",height:50},children:"BACK"})]})]})})},sL=()=>{const{authModal:e}=U.useContext(zZ),t=kP(iA),n=kP(mP),{refreshToken:r,refreshTokenInterval:i}=KD(),[o,a]=U.useState(null);return U.useEffect((()=>{n?t&&i():(console.log("initializing"),r())}),[n]),Q(kw,{trigger:"auth-modal-button",ref:e,backdropDismiss:!1,children:[J(sw,{style:{fontWeight:"bold",fontSize:40,margin:20},children:"LOG IN"}),o?J(aL,{pendingUser:o,setPendingUser:a}):J(rL,{setPendingUser:a})]})},lL=VM`
  mutation Logout {
    logout
  }
`,cL=()=>{const e=_P(),t=kP(iA),n=kP(fP),[r]=tI(lL,{onError:e=>{console.log(e)},onCompleted:e=>{console.log(e)}}),i=U.useRef(null);return Q(kw,{ref:i,trigger:"account-modal-button",children:[J(sw,{style:{fontWeight:"bold",fontSize:40}}),Q(ow,{children:[Q("div",{style:{fontWeight:"bold",fontSize:20,margin:25},children:[null==t?void 0:t.name,J("br",{}),null==t?void 0:t.email,J("br",{}),null!=t&&t.phone?Q("div",{children:["+1 ",null==t?void 0:t.phone.slice(0,3)," ",null==t?void 0:t.phone.slice(3,6)," ",null==t?void 0:t.phone.slice(-4)]}):null]}),Q(iw,{style:{display:"flex",flexDirection:"column",alignItems:"start",margin:20},children:[J(gw,{onClick:async()=>{var t;null===(t=i.current)||void 0===t||t.dismiss(),r(),n&&(clearInterval(n),e(dP(null))),await ZD.remove({key:WD}),await ZD.remove({key:qD}),e(nA(null))},style:{fontWeight:"bold",fontSize:24,border:"1px solid",borderRadius:5,height:50},children:"LOGOUT"}),J(gw,{onClick:()=>{var e;null===(e=i.current)||void 0===e||e.dismiss()},style:{fontWeight:"bold",fontSize:24,border:"1px solid",borderRadius:5,height:50,marginTop:10},children:"BACK"})]})]})]})};var uL,dL;!function(e){e.Documents="DOCUMENTS",e.Data="DATA",e.Library="LIBRARY",e.Cache="CACHE",e.External="EXTERNAL",e.ExternalStorage="EXTERNAL_STORAGE"}(uL||(uL={})),e("E",dL),function(e){e.UTF8="utf8",e.ASCII="ascii",e.UTF16="utf16"}(dL||e("E",dL={}));const hL=jD("Filesystem",{web:()=>Qh((()=>t.import("./web-legacy-7b4f05d5.js"))).then((e=>new e.FilesystemWeb))});var pL,fL,mL;e("C",pL),function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"}(pL||e("C",pL={})),e("o",fL),function(e){e.Rear="REAR",e.Front="FRONT"}(fL||e("o",fL={})),function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"}(mL||(mL={}));const gL=jD("Camera",{web:()=>Qh((()=>t.import("./web-legacy-3a30e2a6.js"))).then((e=>new e.CameraWeb))});function vL(){const e=async(e,t)=>{let n;n=pw("hybrid")?(await hL.readFile({path:e.path})).data:await async function(e){const t=await fetch(e),n=await t.blob();return new Promise(((e,t)=>{const r=new FileReader;r.onerror=t,r.onload=()=>{"string"==typeof r.result?e(r.result):t("method did not return a string")},r.readAsDataURL(n)}))}(e.webPath);const r=await hL.writeFile({path:t,data:n,directory:uL.Data});return pw("hybrid")?{filepath:r.uri,webviewPath:zD.convertFileSrc(r.uri)}:{filepath:t,webviewPath:e.webPath}},[t,n]=U.useState();return{photo:t,takePhoto:async()=>{const t=await gL.getPhoto({resultType:mL.Uri,source:pL.Camera,quality:100}),r=(new Date).getTime()+".jpeg",i=await e(t,r);n(i),ZD.set({key:"photos",value:JSON.stringify(i)})}}}const yL=()=>{const e=t_(),[t,n]=U.useState(""),[r,i]=U.useState(""),[o,a]=U.useState(0),[s,l]=U.useState(0),{photo:c,takePhoto:u}=vL();return J(Rw,{children:J(ow,{fullscreen:!0,children:Q("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:[J(sw,{style:{margin:20,alignItems:"center"},children:J("h1",{children:"CREATE A DEAL"})}),Q("div",{style:{margin:20,marginTop:0,maxWidth:420},children:[Q(bw,{style:{display:"flex",justifyContent:"space-between"},children:[J(cw,{children:"Photo: "}),J(iw,{children:J(gw,{onClick:()=>u(),children:J(Xw,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M350.54 148.68l-26.62-42.06C318.31 100.08 310.62 96 302 96h-92c-8.62 0-16.31 4.08-21.92 10.62l-26.62 42.06C155.85 155.23 148.62 160 140 160H80a32 32 0 00-32 32v192a32 32 0 0032 32h352a32 32 0 0032-32V192a32 32 0 00-32-32h-59c-8.65 0-16.85-4.77-22.46-11.32z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='256' cy='272' r='80' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M124 158v-22h-24v22' class='ionicon-fill-none ionicon-stroke-width'/></svg>"})})})]}),J(bw,{style:{display:c?"flex":"none"},children:c&&J("img",{src:c.webviewPath,style:{borderRadius:5}})}),Q(bw,{style:{display:"flex"},children:[J(cw,{children:"Name: "}),J(lw,{type:"text",value:t,onIonChange:e=>n(e.target.value)})]}),Q(bw,{style:{display:"flex"},children:[J(cw,{children:"Detail: "}),J(lw,{type:"text",value:r,onIonChange:e=>i(e.target.value)})]}),Q(bw,{style:{display:"flex"},children:[J(cw,{children:"Quantity: "}),J(lw,{type:"number",value:o,onIonChange:e=>a(e.target.value)})]}),Q(bw,{style:{display:"flex"},children:[J(cw,{children:"Price: "}),J(lw,{type:"number",placeholder:"Price",value:s,onIonChange:e=>l(e.target.value)})]}),Q(iw,{style:{marginTop:20,display:"flex",flexDirection:"column",alignItems:"start"},children:[J(gw,{onClick:async()=>{if(!c)return;const n=IP((await hL.readFile({path:c.filepath,directory:uL.Data})).data),i=new Blob([n],{type:"image/jpeg"}),a=new FormData;a.append("file",i),a.append("name",t),a.append("detail",r),a.append("quantity",o.toString()),a.append("price",s.toString());const l=await ZD.get({key:WD});fetch(HD+"/deals/add-deal",{method:"POST",body:a,headers:{accesstoken:l.value||""}}).then((t=>{console.log(t),e.push("/home")})).catch((e=>{console.error(e)}))},style:{border:"1px solid",borderRadius:5,height:50,fontWeight:"bold",fontSize:24},children:"SUBMIT"}),J(gw,{routerLink:"/deal",style:{marginTop:10,border:"1px solid",borderRadius:5,height:50,fontWeight:"bold",fontSize:24},children:"BACK"})]})]})]})})})};xL.sessions=new Map,xL.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){let e=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),t=33;return window.navigator.userAgent.match("Linux")&&(t=35),e>=26&&e<=t||xL.extension.isInstalled()}return!0};var bL={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(e){let t=window.setTimeout((function(){let t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',e(t)}),1e3);this.cache[t]=e,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){let e={};this.cache=e,window.addEventListener("message",(function(t){if(t.origin==window.location.origin)if("janusGotScreen"==t.data.type&&e[t.data.id]){let n=e[t.data.id];if(delete e[t.data.id],""===t.data.sourceId){let e=new Error("NavigatorUserMediaError");e.name="You cancelled the request for permission, giving up...",n(e)}else n(null,t.data.sourceId)}else"janusGetScreenPending"==t.data.type&&window.clearTimeout(t.data.id)}))}};function xL(e){if((e=e||{}).success="function"==typeof e.success?e.success:xL.noop,e.error="function"==typeof e.error?e.error:xL.noop,e.destroyed="function"==typeof e.destroyed?e.destroyed:xL.noop,!xL.initDone)return e.error("Library not initialized"),{};if(!xL.isWebrtcSupported())return e.error("WebRTC not supported by this browser"),{};if(xL.log("Library initialized: "+xL.initDone),!e.server)return e.error("Invalid server url"),{};let t=!1,n=null,r={},i=null,o=null,a=0,s=e.server;xL.isArray(s)?(xL.log("Multiple servers provided ("+s.length+"), will use the first that works"),s=null,o=e.server,xL.debug(o)):0===s.indexOf("ws")?(t=!0,xL.log("Using WebSockets to contact Janus: "+s)):(t=!1,xL.log("Using REST API to contact Janus: "+s));let l=e.iceServers||[{urls:"stun:stun.l.google.com:19302"}],c=e.iceTransportPolicy,u=e.bundlePolicy,d=!1;void 0!==e.withCredentials&&null!==e.withCredentials&&(d=!0===e.withCredentials);let h=10;void 0!==e.max_poll_events&&null!==e.max_poll_events&&(h=e.max_poll_events),h<1&&(h=1);let p=null;void 0!==e.token&&null!==e.token&&(p=e.token);let f=null;void 0!==e.apisecret&&null!==e.apisecret&&(f=e.apisecret),this.destroyOnUnload=!0,void 0!==e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);let m=25e3;void 0!==e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(m=e.keepAlivePeriod),isNaN(m)&&(m=25e3);let g=6e4;function v(e){let t={high:9e5,medium:3e5,low:1e5};return null!=e&&(e.high&&(t.high=e.high),e.medium&&(t.medium=e.medium),e.low&&(t.low=e.low)),t}void 0!==e.longPollTimeout&&null!==e.longPollTimeout&&(g=e.longPollTimeout),isNaN(g)&&(g=6e4);let y=!1,b=null,x=new Map,w=this,_=0,k=new Map;function E(){if(null==b)return;if(xL.debug("Long poll..."),!y)return void xL.warn("Is the server down? (connected=false)");let t=s+"/"+b+"?rid="+(new Date).getTime();h&&(t=t+"&maxev="+h),p&&(t=t+"&token="+encodeURIComponent(p)),f&&(t=t+"&apisecret="+encodeURIComponent(f)),xL.httpAPICall(t,{verb:"GET",withCredentials:d,success:S,timeout:g,error:function(t,n){if(xL.error(t+":",n),_++,_>3)return y=!1,void e.error("Lost connection to the server (is it down?)");E()}})}function S(e,r){if(_=0,t||null==b||!0===r||E(),t||!xL.isArray(e))if("keepalive"!==e.janus)if("server_info"!==e.janus)if("ack"!==e.janus)if("success"!==e.janus)if("trickle"===e.janus){const t=e.sender;if(!t)return void xL.warn("Missing sender...");const n=x.get(t);if(!n)return void xL.debug("This handle is not attached to this session");let r=e.candidate;xL.debug("Got a trickled candidate on session "+b),xL.debug(r);let i=n.webrtcStuff;i.pc&&i.remoteSdp?(xL.debug("Adding remote candidate:",r),r&&!0!==r.completed?i.pc.addIceCandidate(r):i.pc.addIceCandidate(xL.endOfCandidates)):(xL.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),i.candidates||(i.candidates=[]),i.candidates.push(r),xL.debug(i.candidates))}else{if("webrtcup"===e.janus){xL.debug("Got a webrtcup event on session "+b),xL.debug(e);const t=e.sender;if(!t)return void xL.warn("Missing sender...");const n=x.get(t);return n?void n.webrtcState(!0):void xL.debug("This handle is not attached to this session")}if("hangup"===e.janus){xL.debug("Got a hangup event on session "+b),xL.debug(e);const t=e.sender;if(!t)return void xL.warn("Missing sender...");const n=x.get(t);if(!n)return void xL.debug("This handle is not attached to this session");n.webrtcState(!1,e.reason),n.hangup()}else if("detached"===e.janus){xL.debug("Got a detached event on session "+b),xL.debug(e);const t=e.sender;if(!t)return void xL.warn("Missing sender...");const n=x.get(t);if(!n)return;n.ondetached(),n.detach()}else if("media"===e.janus){xL.debug("Got a media event on session "+b),xL.debug(e);const t=e.sender;if(!t)return void xL.warn("Missing sender...");const n=x.get(t);if(!n)return void xL.debug("This handle is not attached to this session");n.mediaState(e.type,e.receiving,e.mid)}else if("slowlink"===e.janus){xL.debug("Got a slowlink event on session "+b),xL.debug(e);const t=e.sender;if(!t)return void xL.warn("Missing sender...");const n=x.get(t);if(!n)return void xL.debug("This handle is not attached to this session");n.slowLink(e.uplink,e.lost,e.mid)}else{if("error"===e.janus){xL.error("Ooops: "+e.error.code+" "+e.error.reason),xL.debug(e);let t=e.transaction;if(t){let n=k.get(t);n&&n(e),k.delete(t)}return}if("event"===e.janus){xL.debug("Got a plugin event on session "+b),xL.debug(e);const t=e.sender;if(!t)return void xL.warn("Missing sender...");let n=e.plugindata;if(!n)return void xL.warn("Missing plugindata...");xL.debug("  -- Event is coming from "+t+" ("+n.plugin+")");let r=n.data;xL.debug(r);const i=x.get(t);if(!i)return void xL.warn("This handle is not attached to this session");let o=e.jsep;o&&(xL.debug("Handling SDP as well..."),xL.debug(o));let a=i.onmessage;a?(xL.debug("Notifying application..."),a(r,o)):xL.debug("No provided notification callback")}else{if("timeout"===e.janus)return xL.error("Timeout on session "+b),xL.debug(e),void(t&&n.close(3504,"Gateway timeout"));xL.warn("Unknown message/event  '"+e.janus+"' on session "+b),xL.debug(e)}}}else{xL.debug("Got a success on session "+b),xL.debug(e);const t=e.transaction;if(t){const n=k.get(t);n&&n(e),k.delete(t)}}else{xL.debug("Got an ack on session "+b),xL.debug(e);const t=e.transaction;if(t){const n=k.get(t);n&&n(e),k.delete(t)}}else{xL.debug("Got info on the Janus instance"),xL.debug(e);const t=e.transaction;if(t){const n=k.get(t);n&&n(e),k.delete(t)}}else xL.vdebug("Got a keepalive on session "+b);else for(let t=0;t<e.length;t++)S(e[t],!0)}function C(){if(!s||!t||!y)return;i=setTimeout(C,m);let e={janus:"keepalive",session_id:b,transaction:xL.randomString(12)};p&&(e.token=p),f&&(e.apisecret=f),n.send(JSON.stringify(e))}function T(l){let c=xL.randomString(12),u={janus:"create",transaction:c};if(l.reconnect&&(y=!1,u.janus="claim",u.session_id=b,n&&(n.onopen=null,n.onerror=null,n.onclose=null,i&&(clearTimeout(i),i=null))),p&&(u.token=p),f&&(u.apisecret=f),!s&&xL.isArray(o)&&(s=o[a],0===s.indexOf("ws")?(t=!0,xL.log("Server #"+(a+1)+": trying WebSockets to contact Janus ("+s+")")):(t=!1,xL.log("Server #"+(a+1)+": trying REST API to contact Janus ("+s+")"))),t){n=xL.newWebSocket(s,"janus-protocol"),r={error:function(){if(xL.error("Error connecting to the Janus WebSockets server... "+s),xL.isArray(o)&&!l.reconnect)return a++,a===o.length?void l.error("Error connecting to any of the provided Janus servers: Is the server down?"):(s=null,void setTimeout((function(){T(l)}),200));l.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){k.set(c,(function(e){if(xL.debug(e),"success"!==e.janus)return xL.error("Ooops: "+e.error.code+" "+e.error.reason),void l.error(e.error.reason);i=setTimeout(C,m),y=!0,b=e.session_id?e.session_id:e.data.id,l.reconnect?xL.log("Claimed session: "+b):xL.log("Created session: "+b),xL.sessions.set(b,w),l.success()})),n.send(JSON.stringify(u))},message:function(e){S(JSON.parse(e.data))},close:function(){s&&y&&(y=!1,e.error("Lost connection to the server (is it down?)"))}};for(let e in r)n.addEventListener(e,r[e])}else xL.httpAPICall(s,{verb:"POST",withCredentials:d,body:u,success:function(e){if(xL.debug(e),"success"!==e.janus)return xL.error("Ooops: "+e.error.code+" "+e.error.reason),void l.error(e.error.reason);y=!0,b=e.session_id?e.session_id:e.data.id,l.reconnect?xL.log("Claimed session: "+b):xL.log("Created session: "+b),xL.sessions.set(b,w),E(),l.success()},error:function(e,t){if(xL.error(e+":",t),xL.isArray(o)&&!l.reconnect)return a++,a===o.length?void l.error("Error connecting to any of the provided Janus servers: Is the server down?"):(s=null,void setTimeout((function(){T(l)}),200));""===t?l.error(e+": Is the server down?"):t&&t.error?l.error(e+": "+t.error.message):l.error(e+": "+t)}})}function M(e,r){if((r=r||{}).success="function"==typeof r.success?r.success:xL.noop,r.error="function"==typeof r.error?r.error:xL.noop,!y)return xL.warn("Is the server down? (connected=false)"),void r.error("Is the server down? (connected=false)");let i=x.get(e);if(!i||!i.webrtcStuff)return xL.warn("Invalid handle"),void r.error("Invalid handle");let o=r.message,a=r.jsep,l=xL.randomString(12),c={janus:"message",body:o,transaction:l};if(i.token&&(c.token=i.token),f&&(c.apisecret=f),a){c.jsep={type:a.type,sdp:a.sdp},a.e2ee&&(c.jsep.e2ee=!0),"hml"!==a.rid_order&&"lmh"!==a.rid_order||(c.jsep.rid_order=a.rid_order),a.force_relay&&(c.jsep.force_relay=!0);let e=null,t=i.webrtcStuff;if(t.pc){let n=t.pc.getTransceivers();if(n&&n.length>0)for(let t in n){let r=n[t];if(r&&r.sender&&r.sender.track&&"video"===r.sender.track.kind){let n=r.sender.getParameters();n&&n.encodings&&n.encodings[0]&&n.encodings[0].scalabilityMode&&(e||(e=[]),e.push({mindex:parseInt(t),mid:r.mid,svc:n.encodings[0].scalabilityMode}))}}}e&&(c.jsep.svc=e)}if(xL.debug("Sending message to plugin (handle="+e+"):"),xL.debug(c),t)return c.session_id=b,c.handle_id=e,k.set(l,(function(e){if(xL.debug("Message sent!"),xL.debug(e),"success"===e.janus){let t=e.plugindata;if(!t)return xL.warn("Request succeeded, but missing plugindata..."),void r.success();xL.log("Synchronous transaction successful ("+t.plugin+")");let n=t.data;return xL.debug(n),void r.success(n)}"ack"===e.janus?r.success():e.error?(xL.error("Ooops: "+e.error.code+" "+e.error.reason),r.error(e.error.code+" "+e.error.reason)):(xL.error("Unknown error"),r.error("Unknown error"))})),void n.send(JSON.stringify(c));xL.httpAPICall(s+"/"+b+"/"+e,{verb:"POST",withCredentials:d,body:c,success:function(e){if(xL.debug("Message sent!"),xL.debug(e),"success"===e.janus){let t=e.plugindata;if(!t)return xL.warn("Request succeeded, but missing plugindata..."),void r.success();xL.log("Synchronous transaction successful ("+t.plugin+")");let n=t.data;return xL.debug(n),void r.success(n)}"ack"===e.janus?r.success():e.error?(xL.error("Ooops: "+e.error.code+" "+e.error.reason),r.error(e.error.code+" "+e.error.reason)):(xL.error("Unknown error"),r.error("Unknown error"))},error:function(e,t){xL.error(e+":",t),r.error(e+": "+t)}})}function I(e,r){if(!y)return void xL.warn("Is the server down? (connected=false)");let i=x.get(e);if(!i||!i.webrtcStuff)return void xL.warn("Invalid handle");let o={janus:"trickle",candidate:r,transaction:xL.randomString(12)};if(i.token&&(o.token=i.token),f&&(o.apisecret=f),xL.vdebug("Sending trickle candidate (handle="+e+"):"),xL.vdebug(o),t)return o.session_id=b,o.handle_id=e,void n.send(JSON.stringify(o));xL.httpAPICall(s+"/"+b+"/"+e,{verb:"POST",withCredentials:d,body:o,success:function(e){xL.vdebug("Candidate sent!"),xL.vdebug(e),"ack"===e.janus||xL.error("Ooops: "+e.error.code+" "+e.error.reason)},error:function(e,t){xL.error(e+":",t)}})}function O(e,t,n,r,i){let o=x.get(e);if(!o||!o.webrtcStuff)return void xL.warn("Invalid handle");let a=o.webrtcStuff;if(!a.pc)return void xL.warn("Invalid PeerConnection");let s=function(e){xL.log("Received state change on data channel:",e);let t=e.target.label,n=e.target.protocol,r=a.dataChannel[t]?a.dataChannel[t].readyState:"null";if(xL.log("State change on <"+t+"> data channel: "+r),"open"===r){if(a.dataChannel[t].pending&&a.dataChannel[t].pending.length>0){xL.log("Sending pending messages on <"+t+">:",a.dataChannel[t].pending.length);for(let e of a.dataChannel[t].pending)xL.log("Sending data on data channel <"+t+">"),xL.debug(e),a.dataChannel[t].send(e);a.dataChannel[t].pending=[]}o.ondataopen(t,n)}};if(r)a.dataChannel[t]=r;else{let e=a.dataChannelOptions;n&&(e.protocol=n),a.dataChannel[t]=a.pc.createDataChannel(t,e)}a.dataChannel[t].onmessage=function(e){xL.log("Received message on data channel:",e);let t=e.target.label;o.ondata(e.data,t)},a.dataChannel[t].onopen=s,a.dataChannel[t].onclose=s,a.dataChannel[t].onerror=function(e){xL.error("Got error on data channel:",e)},a.dataChannel[t].pending=[],i&&a.dataChannel[t].pending.push(i)}function A(e,t){(t=t||{}).success="function"==typeof t.success?t.success:xL.noop,t.error="function"==typeof t.error?t.error:xL.noop;let n=x.get(e);if(!n||!n.webrtcStuff)return xL.warn("Invalid handle"),void t.error("Invalid handle");let r=n.webrtcStuff,i=t.text||t.data;if(!i)return xL.warn("Invalid data"),void t.error("Invalid data");let o=t.label?t.label:xL.dataChanDefaultLabel;return r.dataChannel[o]?"open"!==r.dataChannel[o].readyState?(r.dataChannel[o].pending.push(i),void t.success()):(xL.log("Sending data on data channel <"+o+">"),xL.debug(i),r.dataChannel[o].send(i),void t.success()):(O(e,o,t.protocol,!1,i,t.protocol),void t.success())}function P(e,t){(t=t||{}).success="function"==typeof t.success?t.success:xL.noop,t.error="function"==typeof t.error?t.error:xL.noop;let n=x.get(e);if(!n||!n.webrtcStuff)return xL.warn("Invalid handle"),void t.error("Invalid handle");let r=n.webrtcStuff;if(!r.dtmfSender){if(r.pc){let e=r.pc.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));if(!e)return xL.warn("Invalid DTMF configuration (no audio track)"),void t.error("Invalid DTMF configuration (no audio track)");r.dtmfSender=e.dtmf,r.dtmfSender&&(xL.log("Created DTMF Sender"),r.dtmfSender.ontonechange=function(e){xL.debug("Sent DTMF tone: "+e.tone)})}if(!r.dtmfSender)return xL.warn("Invalid DTMF configuration"),void t.error("Invalid DTMF configuration")}let i=t.dtmf;if(!i)return xL.warn("Invalid DTMF parameters"),void t.error("Invalid DTMF parameters");let o=i.tones;if(!o)return xL.warn("Invalid DTMF string"),void t.error("Invalid DTMF string");let a="number"==typeof i.duration?i.duration:500,s="number"==typeof i.gap?i.gap:50;xL.debug("Sending DTMF string "+o+" (duration "+a+"ms, gap "+s+"ms)"),r.dtmfSender.insertDTMF(o,a,s),t.success()}function D(e,r){(r=r||{}).success="function"==typeof r.success?r.success:xL.noop,r.error="function"==typeof r.error?r.error:xL.noop;let i=!0===r.noRequest;xL.log("Destroying handle "+e+" (only-locally="+i+")"),q(e);let o=x.get(e);if(!o||o.detached)return x.delete(e),void r.success();if(o.detached=!0,i)return x.delete(e),void r.success();if(!y)return xL.warn("Is the server down? (connected=false)"),void r.error("Is the server down? (connected=false)");let a={janus:"detach",transaction:xL.randomString(12)};if(o.token&&(a.token=o.token),f&&(a.apisecret=f),t)return a.session_id=b,a.handle_id=e,n.send(JSON.stringify(a)),x.delete(e),void r.success();xL.httpAPICall(s+"/"+b+"/"+e,{verb:"POST",withCredentials:d,body:a,success:function(t){xL.log("Destroyed handle:"),xL.debug(t),"success"!==t.janus&&xL.error("Ooops: "+t.error.code+" "+t.error.reason),x.delete(e),r.success()},error:function(t,n){xL.error(t+":",n),x.delete(e),r.success()}})}function L(e,t){let n=x.get(e);if(!n||!n.webrtcStuff)throw xL.warn("Invalid handle"),"Invalid handle";let r=n.webrtcStuff;if(r.pc)return;let i={iceServers:l,iceTransportPolicy:c,bundlePolicy:u,sdpSemantics:"unified-plan"},o=!1;if(t.tracks)for(let a of t.tracks)if(a.transforms&&(a.transforms.sender||a.transforms.receiver)){o=!0;break}RTCRtpSender&&(RTCRtpSender.prototype.createEncodedStreams||RTCRtpSender.prototype.createEncodedAudioStreams&&RTCRtpSender.prototype.createEncodedVideoStreams)&&o&&(r.insertableStreams=!0,i.forceEncodedAudioInsertableStreams=!0,i.forceEncodedVideoInsertableStreams=!0,i.encodedInsertableStreams=!0),xL.log("Creating PeerConnection"),r.pc=new RTCPeerConnection(i),xL.debug(r.pc),r.pc.getStats&&(r.volume={},r.bitrate.value="0 kbits/sec"),xL.log("Preparing local SDP and gathering candidates (trickle="+r.trickle+")"),r.pc.oniceconnectionstatechange=function(){r.pc&&n.iceState(r.pc.iceConnectionState)},r.pc.onicecandidate=function(n){if(!n.candidate||n.candidate.candidate&&n.candidate.candidate.indexOf("endOfCandidates")>0)xL.log("End of candidates."),r.iceDone=!0,!0===r.trickle?I(e,{completed:!0}):function(e,t){(t=t||{}).success="function"==typeof t.success?t.success:xL.noop,t.error="function"==typeof t.error?t.error:xL.noop;let n=x.get(e);if(!n||!n.webrtcStuff)return void xL.warn("Invalid handle, not sending anything");let r=n.webrtcStuff;xL.log("Sending offer/answer SDP..."),r.mySdp?(r.mySdp={type:r.pc.localDescription.type,sdp:r.pc.localDescription.sdp},!1===r.trickle&&(r.mySdp.trickle=!1),xL.debug(t),r.sdpSent=!0,t.success(r.mySdp)):xL.warn("Local SDP instance is invalid, not sending anything...")}(e,t);else{let t={candidate:n.candidate.candidate,sdpMid:n.candidate.sdpMid,sdpMLineIndex:n.candidate.sdpMLineIndex};!0===r.trickle&&I(e,t)}},r.pc.ontrack=function(e){if(xL.log("Handling Remote Track",e),!e.streams)return;if(!e.track)return;let t=e.transceiver?e.transceiver.mid:e.track.id;try{n.onremotetrack(e.track,t,!0,{reason:"created"})}catch($A){xL.error("Error calling onremotetrack",$A)}if(e.track.onended)return;let i=null;xL.log("Adding onended callback to track:",e.track),e.track.onended=function(e){xL.log("Remote track removed:",e),clearTimeout(i);let t=r.pc?r.pc.getTransceivers():null,o=t?t.find((t=>t.receiver.track===e.target)):null,a=o?o.mid:e.target.id;try{n.onremotetrack(e.target,a,!1,{reason:"ended"})}catch($A){xL.error("Error calling onremotetrack on removal",$A)}},e.track.onmute=function(e){xL.log("Remote track muted:",e),i||(i=setTimeout((function(){xL.log("Removing remote track");let t=r.pc?r.pc.getTransceivers():null,o=t?t.find((t=>t.receiver.track===e.target)):null,a=o?o.mid:e.target.id;try{n.onremotetrack(e.target,a,!1,{reason:"mute"})}catch($A){xL.error("Error calling onremotetrack on mute",$A)}i=null}),2520))},e.track.onunmute=function(e){if(xL.log("Remote track flowing again:",e),null!=i)clearTimeout(i),i=null;else try{let t=r.pc?r.pc.getTransceivers():null,i=t?t.find((t=>t.receiver.track===e.target)):null,o=i?i.mid:e.target.id;n.onremotetrack(e.target,o,!0,{reason:"unmute"})}catch($A){xL.error("Error calling onremotetrack on unmute",$A)}}}}async function R(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:xL.noop,n.error="function"==typeof n.error?n.error:W;let r=n.jsep;if(t&&r)return xL.error("Provided a JSEP to a createOffer"),void n.error("Provided a JSEP to a createOffer");if(!(t||r&&r.type&&r.sdp))return xL.error("A valid JSEP is required for createAnswer"),void n.error("A valid JSEP is required for createAnswer");if(n.media&&!n.tracks){if(n.tracks=xL.mediaToTracks(n.media),!0===n.simulcast||!0===n.simulcast2||n.svc)for(let e of n.tracks)if("video"===e.type){!0===n.simulcast||!0===n.simulcast2?e.simulcast=!0:n.svc&&(e.svc=n.svc);break}xL.warn("Deprecated media object passed, use tracks instead. Automatically translated to:",n.tracks)}if(n.tracks&&!Array.isArray(n.tracks))return xL.error("Tracks must be an array"),void n.error("Tracks must be an array");let i=x.get(e);if(!i||!i.webrtcStuff)return xL.warn("Invalid handle"),void n.error("Invalid handle");let o=i.webrtcStuff;var a;o.trickle=(a=n.trickle,xL.debug("isTrickleEnabled:",a),!1!==a);try{if(L(e,n),t&&await N(e,n),r){if(await o.pc.setRemoteDescription(r),xL.log("Remote description accepted!"),o.remoteSdp=r.sdp,o.candidates&&o.candidates.length>0){for(let e=0;e<o.candidates.length;e++){let t=o.candidates[e];xL.debug("Adding remote candidate:",t),t&&!0!==t.completed?o.pc.addIceCandidate(t):o.pc.addIceCandidate(xL.endOfCandidates)}o.candidates=[]}await N(e,n);let t=await async function(e,t){(t=t||{}).customizeSdp="function"==typeof t.customizeSdp?t.customizeSdp:xL.noop;let n=x.get(e);if(!n||!n.webrtcStuff)throw xL.warn("Invalid handle"),"Invalid handle";let r=n.webrtcStuff;xL.log("Creating answer (iceDone="+r.iceDone+")");let i=await r.pc.createAnswer();xL.debug(i);let o={type:"answer",sdp:i.sdp};return t.customizeSdp(o),i.sdp=o.sdp,xL.log("Setting local description"),r.mySdp={type:"answer",sdp:i.sdp},await r.pc.setLocalDescription(i),r.iceDone||r.trickle?(r.insertableStreams&&(i.e2ee=!0),i):(xL.log("Waiting for all candidates..."),null)}(e,n);n.success(t)}else{let t=await async function(e,t){(t=t||{}).customizeSdp="function"==typeof t.customizeSdp?t.customizeSdp:xL.noop;let n=x.get(e);if(!n||!n.webrtcStuff)throw xL.warn("Invalid handle"),"Invalid handle";let r=n.webrtcStuff;xL.log("Creating offer (iceDone="+r.iceDone+")");let i={},o=!0===t.iceRestart;o&&(i.iceRestart=!0),xL.debug(i);let a=await r.pc.createOffer(i);xL.debug(a);let s={type:"offer",sdp:a.sdp};return t.customizeSdp(s),a.sdp=s.sdp,xL.log("Setting local description"),r.mySdp={type:"offer",sdp:a.sdp},await r.pc.setLocalDescription(a),r.mediaConstraints=i,r.iceDone||r.trickle?(r.insertableStreams&&(a.e2ee=!0),a):(xL.log("Waiting for all candidates..."),null)}(e,n);n.success(t)}}catch(s){xL.error(s),n.error(s)}}function z(e,t){(t=t||{}).success="function"==typeof t.success?t.success:xL.noop,t.error="function"==typeof t.error?t.error:W,t.customizeSdp="function"==typeof t.customizeSdp?t.customizeSdp:xL.noop;let n=t.jsep,r=x.get(e);if(!r||!r.webrtcStuff)return xL.warn("Invalid handle"),void t.error("Invalid handle");let i=r.webrtcStuff;if(n){if(!i.pc)return xL.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void t.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");t.customizeSdp(n),i.pc.setRemoteDescription(n).then((function(){if(xL.log("Remote description accepted!"),i.remoteSdp=n.sdp,i.candidates&&i.candidates.length>0){for(let e=0;e<i.candidates.length;e++){let t=i.candidates[e];xL.debug("Adding remote candidate:",t),t&&!0!==t.completed?i.pc.addIceCandidate(t):i.pc.addIceCandidate(xL.endOfCandidates)}i.candidates=[]}t.success()}),t.error)}else t.error("Invalid JSEP")}async function j(e,t){if((t=t||{}).success="function"==typeof t.success?t.success:xL.noop,t.error="function"==typeof t.error?t.error:xL.noop,t.tracks&&!Array.isArray(t.tracks))return xL.error("Tracks must be an array"),void t.error("Tracks must be an array");for(let r of t.tracks)(r.add||!r.replace&&!r.remove)&&(r.replace=!0);try{await N(e,t),t.success()}catch(n){xL.error(n),t.error(n)}}async function N(e,t){let n=x.get(e);if(!n||!n.webrtcStuff)throw xL.warn("Invalid handle, not sending anything"),"Invalid handle";let r=n.webrtcStuff;if(!r.pc)throw xL.warn("Invalid PeerConnection"),"Invalid PeerConnection";let i=t.tracks;if(!i||!Array.isArray(i)||0===i.length)return;let o=!1,a={};for(let u of i){if(delete u.gumGroup,!u.type||!["audio","video"].includes(u.type))continue;if(!u.capture||u.capture instanceof MediaStreamTrack)continue;let e=u.group?u.group:"default";a[e]||(a[e]={}),a[e][u.type]||(u.gumGroup=e,a[e][u.type]=u)}let s=Object.keys(a);for(let u of s){let e=a[u];e.audio&&e.video||(e.audio&&delete e.audio.gumGroup,e.video&&delete e.video.gumGroup,delete a[u])}let l=!!t.jsep;for(let u of i){if(!u.type){xL.warn("Missing track type:",u);continue}if("data"===u.type){if(r.pc.ondatachannel){xL.warn("Data channel exists already, not creating another one");continue}xL.log("Creating default data channel"),O(e,xL.dataChanDefaultLabel,null,!1),r.pc.ondatachannel=function(t){xL.log("Data channel created by Janus:",t),O(e,t.channel.label,t.channel.protocol,t.channel)};continue}if(void 0!==u.add&&null!==u.add||void 0!==u.remove&&null!==u.remove||void 0!==u.replace&&null!==u.replace||(u.add=!0),u.add&&u.remove||u.add&&u.remove&&u.replace){xL.warn("Conflicting actions for track, ignoring:",u);continue}u.add&&u.replace?(xL.warn("Both add and replace provided, falling back to replace:",u),delete u.add):u.remove&&u.replace&&(xL.warn("Both remove and replace provided, falling back to remove:",u),delete u.replace);let t=u.type;"screen"===u.type&&(t="video");let i=null,s=null;if(i=u.mid?r.pc.getTransceivers().find((e=>e.mid===u.mid&&e.receiver.track.kind===t)):r.pc.getTransceivers().find((e=>e.receiver.track.kind===t)),u.replace||u.remove){if(!i){xL.warn("Couldn't find a transceiver for track:",u);continue}if(!i.sender){xL.warn("No sender in the transceiver for track:",u);continue}s=i.sender}if(l&&!i&&(i=r.pc.getTransceivers().find((e=>e.receiver.track.kind===t)),!i)){xL.warn("Couldn't find a transceiver for track:",u);continue}let d=null,h=null;if((u.remove||u.replace)&&(xL.log("Removing track from PeerConnection",u),h=s.track?s.track.id:null,await s.replaceTrack(null),h&&r.myStream)){let e=null;if("audio"===t&&r.myStream.getAudioTracks()&&r.myStream.getAudioTracks().length)for(let t of r.myStream.getAudioTracks())t.id===h&&(e=t,xL.log("Removing audio track:",e));else if("video"===t&&r.myStream.getVideoTracks()&&r.myStream.getVideoTracks().length)for(let t of r.myStream.getVideoTracks())t.id===h&&(e=t,xL.log("Removing video track:",e));if(e){try{r.myStream.removeTrack(e),n.onlocaltrack(e,!1)}catch($A){xL.error("Error calling onlocaltrack on removal for renegotiation",$A)}if(!0!==e.dontStop)try{e.stop()}catch($A){}}}if(u.capture){if(u.gumGroup&&a[u.gumGroup]&&a[u.gumGroup].stream){let e=a[u.gumGroup].stream;d="audio"===u.type?e.getAudioTracks()[0]:e.getVideoTracks()[0],delete a[u.gumGroup].stream,delete a[u.gumGroup],delete u.gumGroup}else if(u.capture instanceof MediaStreamTrack)d=u.capture;else{o||(o=!0,n.consentDialog(!0));let e=xL.trackConstraints(u),t=null;if("audio"===u.type||"video"===u.type){if(u.gumGroup){let t="audio"===u.type?"video":"audio";if(a[u.gumGroup]&&a[u.gumGroup][t]){let n=a[u.gumGroup][t],r=xL.trackConstraints(n);e[t]=r[t]}}t=await navigator.mediaDevices.getUserMedia(e),u.gumGroup&&e.audio&&e.video&&(a[u.gumGroup].stream=t,delete u.gumGroup)}else t=await navigator.mediaDevices.getDisplayMedia(e);d="audio"===u.type?t.getAudioTracks()[0]:t.getVideoTracks()[0]}if(u.replace){await s.replaceTrack(d);let e="sendrecv";!1!==u.recv&&"inactive"!==i.direction&&"sendonly"!==i.direction||(e="sendonly"),i.setDirection?i.setDirection(e):i.direction=e}else{if(r.myStream||(r.myStream=new MediaStream),"audio"===t||!u.simulcast&&!u.svc)s=r.pc.addTrack(d,r.myStream),i=r.pc.getTransceivers().find((e=>e.sender===s));else if(u.simulcast){if("firefox"!==xL.webRTCAdapter.browserDetails.browser){xL.log("Enabling rid-based simulcasting:",d);let e=v(u.simulcastMaxBitrates);i=r.pc.addTransceiver(d,{direction:"sendrecv",streams:[r.myStream],sendEncodings:u.sendEncodings||[{rid:"h",active:!0,scalabilityMode:"L1T2",maxBitrate:e.high},{rid:"m",active:!0,scalabilityMode:"L1T2",maxBitrate:e.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,scalabilityMode:"L1T2",maxBitrate:e.low,scaleResolutionDownBy:4}]})}else if(xL.log("Enabling Simulcasting for Firefox (RID)"),i=r.pc.addTransceiver(d,{direction:"sendrecv",streams:[r.myStream]}),s=i?i.sender:null,s){let e=s.getParameters();e||(e={});let t=v(u.simulcastMaxBitrates);e.encodings=u.sendEncodings||[{rid:"h",active:!0,maxBitrate:t.high},{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:t.low,scaleResolutionDownBy:4}],s.setParameters(e)}}else xL.log("Enabling SVC ("+u.svc+"):",d),i=r.pc.addTransceiver(d,{direction:"sendrecv",streams:[r.myStream],sendEncodings:[{scalabilityMode:u.svc}]});if(s||(s=i?i.sender:null),u.codec)if("firefox"===xL.webRTCAdapter.browserDetails.browser)xL.warn("setCodecPreferences not supported in Firefox, ignoring codec for track:",u);else if("string"!=typeof u.codec)xL.warn("Invalid codec value, ignoring for track:",u);else{let e=t+"/"+u.codec.toLowerCase(),n=RTCRtpReceiver.getCapabilities(t).codecs.filter((function(t){return t.mimeType.toLowerCase()===e}));if(n&&0!==n.length){if(i)try{i.setCodecPreferences(n)}catch(c){xL.warn("Failed enforcing codec for this "+t+" track:",c)}}else xL.warn("Codec not supported in this browser for this track, ignoring:",u)}if(u.bitrate)if(u.simulcast||u.svc)xL.warn("Ignoring bitrate for simulcast/SVC track, use sendEncodings for that");else if(isNaN(u.bitrate)||u.bitrate<0)xL.warn("Ignoring invalid bitrate for track:",u);else if(s){let e=s.getParameters();e&&e.encodings&&0!==e.encodings.length?(e.encodings[0].maxBitrate=u.bitrate,await s.setParameters(e)):xL.warn("No encodings in the sender parameters, ignoring bitrate for track:",u)}if("video"===t&&u.framerate)if(u.simulcast||u.svc)xL.warn("Ignoring framerate for simulcast/SVC track, use sendEncodings for that");else if(isNaN(u.framerate)||u.framerate<0)xL.warn("Ignoring invalid framerate for track:",u);else if(s){let e=s.getParameters();e&&e.encodings&&0!==e.encodings.length?(e.encodings[0].maxFramerate=u.framerate,await s.setParameters(e)):xL.warn("No encodings in the sender parameters, ignoring framerate for track:",u)}if(u.transforms){if(s&&u.transforms.sender){let e=null;RTCRtpSender.prototype.createEncodedStreams?e=s.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===t?e=s.createEncodedAudioStreams():"video"===t&&(e=s.createEncodedVideoStreams())),e&&(e.readableStream&&e.writableStream?e.readableStream.pipeThrough(u.transforms.sender).pipeTo(e.writableStream):e.readable&&e.writable&&e.readable.pipeThrough(u.transforms.sender).pipeTo(e.writable))}if(i&&i.receiver&&u.transforms.receiver){let e=null;RTCRtpReceiver.prototype.createEncodedStreams?e=i.receiver.createEncodedStreams():(RTCRtpReceiver.prototype.createAudioEncodedStreams||RTCRtpReceiver.prototype.createEncodedVideoStreams)&&("audio"===t?e=i.receiver.createEncodedAudioStreams():"video"===t&&(e=i.receiver.createEncodedVideoStreams())),e&&(e.readableStream&&e.writableStream?e.readableStream.pipeThrough(u.transforms.receiver).pipeTo(e.writableStream):e.readable&&e.writable&&e.readable.pipeThrough(u.transforms.receiver).pipeTo(e.writable))}}}d&&!0===u.dontStop&&(d.dontStop=!0)}else if(u.recv&&(i||(i=r.pc.addTransceiver(t)),i)){if(u.codec)if("firefox"===xL.webRTCAdapter.browserDetails.browser)xL.warn("setCodecPreferences not supported in Firefox, ignoring codec for track:",u);else if("string"!=typeof u.codec)xL.warn("Invalid codec value, ignoring for track:",u);else{let e=t+"/"+u.codec.toLowerCase(),n=RTCRtpReceiver.getCapabilities(t).codecs.filter((function(t){return t.mimeType.toLowerCase()===e}));if(n&&0!==n.length)try{i.setCodecPreferences(n)}catch(c){xL.warn("Failed enforcing codec for this "+t+" track:",c)}else xL.warn("Codec not supported in this browser for this track, ignoring:",u)}if(i.receiver&&u.transforms&&u.transforms.receiver){let e=null;RTCRtpReceiver.prototype.createEncodedStreams?e=i.receiver.createEncodedStreams():(RTCRtpReceiver.prototype.createAudioEncodedStreams||RTCRtpReceiver.prototype.createEncodedVideoStreams)&&("audio"===t?e=i.receiver.createEncodedAudioStreams():"video"===t&&(e=i.receiver.createEncodedVideoStreams())),e&&(e.readableStream&&e.writableStream?e.readableStream.pipeThrough(u.transforms.receiver).pipeTo(e.writableStream):e.readable&&e.writable&&e.readable.pipeThrough(u.transforms.receiver).pipeTo(e.writable))}}if(d){r.myStream.addTrack(d),d.onended=function(e){xL.log("Local track removed:",e);try{n.onlocaltrack(e.target,!1)}catch($A){xL.error("Error calling onlocaltrack following end",$A)}};try{n.onlocaltrack(d,!0)}catch($A){xL.error("Error calling onlocaltrack for track add",$A)}}if(i){let e=i.direction,t=null,n=d&&i.sender.track,r=!1!==u.recv&&i.receiver.track;n&&r?t="sendrecv":n&&!r?t="sendonly":!n&&r?t="recvonly":n||r||(t="inactive"),t&&t!==e&&(xL.warn("Changing direction of transceiver to "+t+" (was "+e+")",u),i.setDirection?i.setDirection(t):i.direction=t)}}o&&n.consentDialog(!1)}function B(e){let t=x.get(e);if(!t||!t.webrtcStuff)return xL.warn("Invalid handle"),null;let n=t.webrtcStuff;if(!n.pc)return xL.warn("Invalid PeerConnection"),null;let r=[],i=n.pc.getTransceivers();for(let o of i){let e=null;o.sender&&o.sender.track&&(e={mid:o.mid},e.type=o.sender.track.kind,e.id=o.sender.track.id,e.label=o.sender.track.label),e&&r.push(e)}return r}function F(e){let t=x.get(e);if(!t||!t.webrtcStuff)return xL.warn("Invalid handle"),null;let n=t.webrtcStuff;if(!n.pc)return xL.warn("Invalid PeerConnection"),null;let r=[],i=n.pc.getTransceivers();for(let o of i){let e=null;o.receiver&&o.receiver.track&&(e={mid:o.mid},e.type=o.receiver.track.kind,e.id=o.receiver.track.id,e.label=o.receiver.track.label),e&&r.push(e)}return r}function V(e,t,n,r){r="function"==typeof r?r:xL.noop;let i=x.get(e);if(!i||!i.webrtcStuff)return xL.warn("Invalid handle"),void r(0);let o=n?"remote":"local",a=i.webrtcStuff;if(a.volume[o]||(a.volume[o]={value:0}),a.pc&&a.pc.getStats&&("chrome"===xL.webRTCAdapter.browserDetails.browser||"safari"===xL.webRTCAdapter.browserDetails.browser)){let e=a.pc;if(t){let i=a.pc.getTransceivers().find((e=>e.mid===t&&"audio"===e.receiver.track.kind));if(!i)return xL.warn("No audio transceiver with mid "+t),void r(0);if(n&&!i.receiver)return xL.warn("Remote transceiver track unavailable"),void r(0);if(!n&&!i.sender)return xL.warn("Local transceiver track unavailable"),void r(0);e=n?i.receiver:i.sender}return e.getStats().then((function(e){e.forEach((function(e){e&&"audio"===e.kind&&(n&&!e.remoteSource||!n&&"media-source"!==e.type||r(e.audioLevel?e.audioLevel:0))}))})),a.volume[o].value}return xL.warn("Getting the "+o+" volume unsupported by browser"),void r(0)}function U(e,t,n){let r=x.get(e);if(!r||!r.webrtcStuff)return xL.warn("Invalid handle"),!0;let i=r.webrtcStuff;if(!i.pc)return xL.warn("Invalid PeerConnection"),!0;if(!i.myStream)return xL.warn("Invalid local MediaStream"),!0;if(n){if(!i.myStream.getVideoTracks()||0===i.myStream.getVideoTracks().length)return xL.warn("No video track"),!0;if(t){let e=i.pc.getTransceivers().find((e=>e.mid===t&&"video"===e.receiver.track.kind));return e?e.sender&&e.sender.track?!e.sender.track.enabled:(xL.warn("No video sender with mid "+t),!0):(xL.warn("No video transceiver with mid "+t),!0)}return!i.myStream.getVideoTracks()[0].enabled}if(!i.myStream.getAudioTracks()||0===i.myStream.getAudioTracks().length)return xL.warn("No audio track"),!0;if(t){let e=i.pc.getTransceivers().find((e=>e.mid===t&&"audio"===e.receiver.track.kind));return e?e.sender&&e.sender.track?!e.sender.track.enabled:(xL.warn("No audio sender with mid "+t),!0):(xL.warn("No audio transceiver with mid "+t),!0)}return!i.myStream.getAudioTracks()[0].enabled}function $(e,t,n,r){let i=x.get(e);if(!i||!i.webrtcStuff)return xL.warn("Invalid handle"),!1;let o=i.webrtcStuff;if(!o.pc)return xL.warn("Invalid PeerConnection"),!1;if(!o.myStream)return xL.warn("Invalid local MediaStream"),!1;if(n){if(!o.myStream.getVideoTracks()||0===o.myStream.getVideoTracks().length)return xL.warn("No video track"),!1;if(t){let e=o.pc.getTransceivers().find((e=>e.mid===t&&"video"===e.receiver.track.kind));if(!e)return xL.warn("No video transceiver with mid "+t),!1;if(!e.sender||!e.sender.track)return xL.warn("No video sender with mid "+t),!1;e.sender.track.enabled=!r}else for(const e of o.myStream.getVideoTracks())e.enabled=!r}else{if(!o.myStream.getAudioTracks()||0===o.myStream.getAudioTracks().length)return xL.warn("No audio track"),!1;if(t){let e=o.pc.getTransceivers().find((e=>e.mid===t&&"audio"===e.receiver.track.kind));if(!e)return xL.warn("No audio transceiver with mid "+t),!1;if(!e.sender||!e.sender.track)return xL.warn("No audio sender with mid "+t),!1;e.sender.track.enabled=!r}else for(const e of o.myStream.getAudioTracks())e.enabled=!r}return!0}function Z(e,t){let n=x.get(e);if(!n||!n.webrtcStuff)return xL.warn("Invalid handle"),"Invalid handle";let r=n.webrtcStuff;if(!r.pc)return"Invalid PeerConnection";if(r.pc.getStats){let e=r.pc,n=t||"default";if(t){let n=r.pc.getTransceivers().find((e=>e.mid===t&&"video"===e.receiver.track.kind));if(!n)return xL.warn("No video transceiver with mid "+t),"No video transceiver with mid "+t;if(!n.receiver)return xL.warn("No video receiver with mid "+t),"No video receiver with mid "+t;e=n.receiver}return r.bitrate[n]||(r.bitrate[n]={timer:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,value:"0 kbits/sec"}),r.bitrate[n].timer?r.bitrate[n].value:(xL.log("Starting bitrate timer"+(t?" for mid "+t:"")+" (via getStats)"),r.bitrate[n].timer=setInterval((function(){e.getStats().then((function(e){e.forEach((function(e){if(!e)return;let t=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t)if(r.bitrate[n].bsnow=e.bytesReceived,r.bitrate[n].tsnow=e.timestamp,null===r.bitrate[n].bsbefore||null===r.bitrate[n].tsbefore)r.bitrate[n].bsbefore=r.bitrate[n].bsnow,r.bitrate[n].tsbefore=r.bitrate[n].tsnow;else{let e=r.bitrate[n].tsnow-r.bitrate[n].tsbefore;"safari"===xL.webRTCAdapter.browserDetails.browser&&(e/=1e3);let t=Math.round(8*(r.bitrate[n].bsnow-r.bitrate[n].bsbefore)/e);"safari"===xL.webRTCAdapter.browserDetails.browser&&(t=parseInt(t/1e3)),r.bitrate[n].value=t+" kbits/sec",r.bitrate[n].bsbefore=r.bitrate[n].bsnow,r.bitrate[n].tsbefore=r.bitrate[n].tsnow}}))}))}),1e3),"0 kbits/sec")}return xL.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser"}function H(e,t,n){let r=x.get(e);if(!r||!r.webrtcStuff)return void xL.warn("Invalid handle");let i=r.webrtcStuff;if(!i.pc)return void xL.warn("Invalid PeerConnection");let o=i.pc.getTransceivers().find((e=>e.mid===t));if(!o)return void xL.warn("No transceiver with mid",t);if(!o.sender)return void xL.warn("No sender for transceiver with mid",t);let a=o.sender.getParameters();a&&a.encodings&&0!==a.encodings.length?a.encodings.length>1?xL.warn("Ignoring bitrate for simulcast track, use sendEncodings for that"):isNaN(n)||n<0?xL.warn("Invalid bitrate (must be a positive integer)"):(a.encodings[0].maxBitrate=n,o.sender.setParameters(a)):xL.warn("No parameters encodings")}function W(e){xL.error("WebRTC error:",e)}function q(e,r){xL.log("Cleaning WebRTC stuff");let i=x.get(e);if(!i)return;let o=i.webrtcStuff;if(o){if(!0===r){let r={janus:"hangup",transaction:xL.randomString(12)};i.token&&(r.token=i.token),f&&(r.apisecret=f),xL.debug("Sending hangup request (handle="+e+"):"),xL.debug(r),t?(r.session_id=b,r.handle_id=e,n.send(JSON.stringify(r))):xL.httpAPICall(s+"/"+b+"/"+e,{verb:"POST",withCredentials:d,body:r})}o.volume&&(o.volume.local&&o.volume.local.timer&&clearInterval(o.volume.local.timer),o.volume.remote&&o.volume.remote.timer&&clearInterval(o.volume.remote.timer));for(let e in o.bitrate)o.bitrate[e].timer&&clearInterval(o.bitrate[e].timer);o.bitrate={},!o.streamExternal&&o.myStream&&(xL.log("Stopping local stream tracks"),xL.stopAllTracks(o.myStream)),o.streamExternal=!1,o.myStream=null;try{o.pc.close()}catch($A){}o.pc=null,o.candidates=null,o.mySdp=null,o.remoteSdp=null,o.iceDone=!1,o.dataChannel={},o.dtmfSender=null,o.insertableStreams=!1}i.oncleanup()}T(e),this.getServer=function(){return s},this.isConnected=function(){return y},this.reconnect=function(e){(e=e||{}).success="function"==typeof e.success?e.success:xL.noop,e.error="function"==typeof e.error?e.error:xL.noop,e.reconnect=!0,T(e)},this.getSessionId=function(){return b},this.getInfo=function(e){!function(e){if((e=e||{}).success="function"==typeof e.success?e.success:xL.noop,e.error="function"==typeof e.error?e.error:xL.noop,xL.log("Getting info on Janus instance"),!y)return xL.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");let r=xL.randomString(12),i={janus:"info",transaction:r};if(p&&(i.token=p),f&&(i.apisecret=f),t)return k.set(r,(function(t){xL.log("Server info:"),xL.debug(t),"server_info"!==t.janus&&xL.error("Ooops: "+t.error.code+" "+t.error.reason),e.success(t)})),void n.send(JSON.stringify(i));xL.httpAPICall(s,{verb:"POST",withCredentials:d,body:i,success:function(t){xL.log("Server info:"),xL.debug(t),"server_info"!==t.janus&&xL.error("Ooops: "+t.error.code+" "+t.error.reason),e.success(t)},error:function(t,n){xL.error(t+":",n),""===n?e.error(t+": Is the server down?"):e.error(t+": "+n)}})}(e)},this.destroy=function(o){!function(o){(o=o||{}).success="function"==typeof o.success?o.success:xL.noop,o.error="function"==typeof o.error?o.error:xL.noop;let a=!0===o.unload,l=!0;void 0!==o.notifyDestroyed&&null!==o.notifyDestroyed&&(l=!0===o.notifyDestroyed);let c=!0===o.cleanupHandles;if(xL.log("Destroying session "+b+" (unload="+a+")"),!b)return xL.warn("No session to destroy"),o.success(),void(l&&e.destroyed());if(c)for(const e of x.keys())D(e,{noRequest:!0});if(!y)return xL.warn("Is the server down? (connected=false)"),b=null,void o.success();let u={janus:"destroy",transaction:xL.randomString(12)};if(p&&(u.token=p),f&&(u.apisecret=f),a)return t?(n.onclose=null,n.close(),n=null):navigator.sendBeacon(s+"/"+b,JSON.stringify(u)),xL.log("Destroyed session:"),b=null,y=!1,o.success(),void(l&&e.destroyed());if(t){u.session_id=b;let t=function(){for(let e in r)n.removeEventListener(e,r[e]);n.removeEventListener("message",a),n.removeEventListener("error",s),i&&clearTimeout(i),n.close()},a=function(n){let r=JSON.parse(n.data);r.session_id==u.session_id&&r.transaction==u.transaction&&(t(),o.success(),l&&e.destroyed())},s=function(){t(),o.error("Failed to destroy the server: Is the server down?"),l&&e.destroyed()};return n.addEventListener("message",a),n.addEventListener("error",s),void(1===n.readyState?n.send(JSON.stringify(u)):s())}xL.httpAPICall(s+"/"+b,{verb:"POST",withCredentials:d,body:u,success:function(t){xL.log("Destroyed session:"),xL.debug(t),b=null,y=!1,"success"!==t.janus&&xL.error("Ooops: "+t.error.code+" "+t.error.reason),o.success(),l&&e.destroyed()},error:function(t,n){xL.error(t+":",n),b=null,y=!1,o.success(),l&&e.destroyed()}})}(o)},this.attach=function(e){!function(e){if((e=e||{}).success="function"==typeof e.success?e.success:xL.noop,e.error="function"==typeof e.error?e.error:xL.noop,e.dataChannelOptions=e.dataChannelOptions||{ordered:!0},e.consentDialog="function"==typeof e.consentDialog?e.consentDialog:xL.noop,e.iceState="function"==typeof e.iceState?e.iceState:xL.noop,e.mediaState="function"==typeof e.mediaState?e.mediaState:xL.noop,e.webrtcState="function"==typeof e.webrtcState?e.webrtcState:xL.noop,e.slowLink="function"==typeof e.slowLink?e.slowLink:xL.noop,e.onmessage="function"==typeof e.onmessage?e.onmessage:xL.noop,e.onlocaltrack="function"==typeof e.onlocaltrack?e.onlocaltrack:xL.noop,e.onremotetrack="function"==typeof e.onremotetrack?e.onremotetrack:xL.noop,e.ondata="function"==typeof e.ondata?e.ondata:xL.noop,e.ondataopen="function"==typeof e.ondataopen?e.ondataopen:xL.noop,e.oncleanup="function"==typeof e.oncleanup?e.oncleanup:xL.noop,e.ondetached="function"==typeof e.ondetached?e.ondetached:xL.noop,!y)return xL.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");let r=e.plugin;if(!r)return xL.error("Invalid plugin"),void e.error("Invalid plugin");let i=e.opaqueId,o=e.loopIndex,a=e.token?e.token:p,l=xL.randomString(12),c={janus:"attach",plugin:r,opaque_id:i,loop_index:o,transaction:l};if(a&&(c.token=a),f&&(c.apisecret=f),t)return k.set(l,(function(t){if(xL.debug(t),"success"!==t.janus)return xL.error("Ooops: "+t.error.code+" "+t.error.reason),void e.error("Ooops: "+t.error.code+" "+t.error.reason);let n=t.data.id;xL.log("Created handle: "+n);let i={session:w,plugin:r,id:n,token:a,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:e.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return n},getPlugin:function(){return r},getVolume:function(e,t){return V(n,e,!0,t)},getRemoteVolume:function(e,t){return V(n,e,!0,t)},getLocalVolume:function(e,t){return V(n,e,!1,t)},isAudioMuted:function(e){return U(n,e,!1)},muteAudio:function(e){return $(n,e,!1,!0)},unmuteAudio:function(e){return $(n,e,!1,!1)},isVideoMuted:function(e){return U(n,e,!0)},muteVideo:function(e){return $(n,e,!0,!0)},unmuteVideo:function(e){return $(n,e,!0,!1)},getBitrate:function(e){return Z(n,e)},setMaxBitrate:function(e,t){return H(n,e,t)},send:function(e){M(n,e)},data:function(e){A(n,e)},dtmf:function(e){P(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){R(n,!0,e)},createAnswer:function(e){R(n,!1,e)},handleRemoteJsep:function(e){z(n,e)},replaceTracks:function(e){j(n,e)},getLocalTracks:function(){return B(n)},getRemoteTracks:function(){return F(n)},onlocaltrack:e.onlocaltrack,onremotetrack:e.onremotetrack,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){q(n,!0===e)},detach:function(e){D(n,e)}};x.set(n,i),e.success(i)})),c.session_id=b,void n.send(JSON.stringify(c));xL.httpAPICall(s+"/"+b,{verb:"POST",withCredentials:d,body:c,success:function(t){if(xL.debug(t),"success"!==t.janus)return xL.error("Ooops: "+t.error.code+" "+t.error.reason),void e.error("Ooops: "+t.error.code+" "+t.error.reason);let n=t.data.id;xL.log("Created handle: "+n);let i={session:w,plugin:r,id:n,token:a,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:e.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return n},getPlugin:function(){return r},getVolume:function(e,t){return V(n,e,!0,t)},getRemoteVolume:function(e,t){return V(n,e,!0,t)},getLocalVolume:function(e,t){return V(n,e,!1,t)},isAudioMuted:function(e){return U(n,e,!1)},muteAudio:function(e){return $(n,e,!1,!0)},unmuteAudio:function(e){return $(n,e,!1,!1)},isVideoMuted:function(e){return U(n,e,!0)},muteVideo:function(e){return $(n,e,!0,!0)},unmuteVideo:function(e){return $(n,e,!0,!1)},getBitrate:function(e){return Z(n,e)},setMaxBitrate:function(e,t){return H(n,e,t)},send:function(e){M(n,e)},data:function(e){A(n,e)},dtmf:function(e){P(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){R(n,!0,e)},createAnswer:function(e){R(n,!1,e)},handleRemoteJsep:function(e){z(n,e)},replaceTracks:function(e){j(n,e)},getLocalTracks:function(){return B(n)},getRemoteTracks:function(){return F(n)},onlocaltrack:e.onlocaltrack,onremotetrack:e.onremotetrack,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){q(n,!0===e)},detach:function(e){D(n,e)}};x.set(n,i),e.success(i)},error:function(t,n){xL.error(t+":",n),""===n?e.error(t+": Is the server down?"):e.error(t+": "+n)}})}(e)}}xL.useDefaultDependencies=function(e){let t=e&&e.fetch||fetch,n=e&&e.Promise||Promise,r=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new r(e,t)},extension:e&&e.extension||bL,isArray:function(e){return Array.isArray(e)},webRTCAdapter:e&&e.adapter||adapter,httpAPICall:function(e,r){let i={method:r.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===r.verb&&(i.headers["Content-Type"]="application/json"),void 0!==r.withCredentials&&(i.credentials=!0===r.withCredentials?"include":r.withCredentials?r.withCredentials:"omit"),r.body&&(i.body=JSON.stringify(r.body));let o=t(e,i).catch((function(e){return n.reject({message:"Probably a network error, is the server down?",error:e})}));if(r.timeout){let e=new n((function(e,t){let n=setTimeout((function(){return clearTimeout(n),t({message:"Request timed out",timeout:r.timeout})}),r.timeout)}));o=n.race([o,e])}return o.then((function(e){return e.ok?typeof r.success==typeof xL.noop?e.json().then((function(e){try{r.success(e)}catch(t){xL.error("Unhandled httpAPICall success callback error",t)}}),(function(t){return n.reject({message:"Failed to parse response body",error:t,response:e})})):void 0:n.reject({message:"API call failed",response:e})})).catch((function(e){typeof r.error==typeof xL.noop&&r.error(e.message||"<< internal error >>",e)})),o}}},xL.useOldDependencies=function(e){let t=e&&e.jQuery||jQuery,n=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new n(e,t)},isArray:function(e){return t.isArray(e)},extension:e&&e.extension||bL,webRTCAdapter:e&&e.adapter||adapter,httpAPICall:function(e,n){let r=void 0!==n.body?{contentType:"application/json",data:JSON.stringify(n.body)}:{},i=void 0!==n.withCredentials?{xhrFields:{withCredentials:n.withCredentials}}:{};return t.ajax(t.extend(r,i,{url:e,type:n.verb,cache:!1,dataType:"json",async:n.async,timeout:n.timeout,success:function(e){typeof n.success==typeof xL.noop&&n.success(e)},error:function(e,t,r){typeof n.error==typeof xL.noop&&n.error(t,r)}}))}}},xL.mediaToTracks=function(e){let t=[];if(e){if(!e.keepAudio&&!1!==e.audio&&(void 0===e.audio||e.audio||e.audioSend||e.audioRecv||e.addAudio||e.replaceAudio||e.removeAudio)){let n={type:"audio"};e.removeAudio?n.remove=!0:(e.addAudio?n.add=!0:e.replaceAudio&&(n.replace=!0),!1!==e.audioSend&&(n.capture=e.audio||!0),!1!==e.audioRecv&&(n.recv=!0)),(n.remove||n.capture||n.recv)&&t.push(n)}if(!e.keepVideo&&!1!==e.video&&(void 0===e.video||e.video||e.videoSend||e.videoRecv||e.addVideo||e.replaceVideo||e.removeVideo)){let n={type:"video"};e.removeVideo?n.remove=!0:(e.addVideo?n.add=!0:e.replaceVideo&&(n.replace=!0),!1!==e.videoSend&&(n.capture=e.video||!0,["screen","window","desktop"].includes(n.capture)&&(n.type="screen",n.capture={video:{}},e.screenshareFrameRate&&(n.capture.frameRate=e.screenshareFrameRate),e.screenshareHeight&&(n.capture.height=e.screenshareHeight),e.screenshareWidth&&(n.capture.width=e.screenshareWidth))),!1!==e.videoRecv&&(n.recv=!0)),(n.remove||n.capture||n.recv)&&t.push(n)}e.data&&t.push({type:"data"})}else t.push({type:"audio",capture:!0,recv:!0}),t.push({type:"video",capture:!0,recv:!0});return t},xL.trackConstraints=function(e){let t={};if(!e||!e.capture)return t;if("audio"===e.type)t.audio=e.capture;else if("video"===e.type)if((e.simulcast||e.svc)&&!0===e.capture&&(e.capture="hires"),!0===e.capture||"object"==typeof e.capture)t.video=e.capture;else{let n=0,r=0;"lowres"===e.capture?(n=320,r=240):"lowres-16:9"===e.capture?(n=320,r=180):"hires"===e.capture||"hires-16:9"===e.capture||"hdres"===e.capture?(n=1280,r=720):"fhdres"===e.capture?(n=1920,r=1080):"4kres"===e.capture?(n=3840,r=2160):"stdres"===e.capture?(n=640,r=480):"stdres-16:9"===e.capture?(n=640,r=360):(xL.log("Default video setting is stdres 4:3"),n=640,r=480),t.video={width:{ideal:n},height:{ideal:r}}}else"screen"===e.type&&(t.video=e.capture);return t},xL.noop=function(){},xL.dataChanDefaultLabel="JanusDataChannel",xL.endOfCandidates=null,xL.stopAllTracks=function(e){try{let t=e.getTracks();for(let e of t)xL.log(e),e&&!0!==e.dontStop&&e.stop()}catch($A){}},xL.init=function(e){if((e=e||{}).callback="function"==typeof e.callback?e.callback:xL.noop,xL.initDone)e.callback();else{if(void 0===console.log&&(console.log=function(){}),xL.trace=xL.noop,xL.debug=xL.noop,xL.vdebug=xL.noop,xL.log=xL.noop,xL.warn=xL.noop,xL.error=xL.noop,!0===e.debug||"all"===e.debug)xL.trace=console.trace.bind(console),xL.debug=console.debug.bind(console),xL.vdebug=console.debug.bind(console),xL.log=console.log.bind(console),xL.warn=console.warn.bind(console),xL.error=console.error.bind(console);else if(Array.isArray(e.debug))for(let i of e.debug)switch(i){case"trace":xL.trace=console.trace.bind(console);break;case"debug":xL.debug=console.debug.bind(console);break;case"vdebug":xL.vdebug=console.debug.bind(console);break;case"log":xL.log=console.log.bind(console);break;case"warn":xL.warn=console.warn.bind(console);break;case"error":xL.error=console.error.bind(console)}xL.log("Initializing library");let t=e.dependencies||xL.useDefaultDependencies();xL.isArray=t.isArray,xL.webRTCAdapter=t.webRTCAdapter,xL.httpAPICall=t.httpAPICall,xL.newWebSocket=t.newWebSocket,xL.extension=t.extension,xL.extension.init(),xL.listDevices=function(e,t){e="function"==typeof e?e:xL.noop,t||(t={audio:!0,video:!0}),xL.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(t).then((function(t){navigator.mediaDevices.enumerateDevices().then((function(n){xL.debug(n),e(n),xL.stopAllTracks(t)}))})).catch((function(t){xL.error(t),e([])})):(xL.warn("navigator.mediaDevices unavailable"),e([]))},xL.attachMediaStream=function(e,t){try{e.srcObject=t}catch($A){try{e.src=URL.createObjectURL(t)}catch($A){xL.error("Error attaching stream to element",$A)}}},xL.reattachMediaStream=function(e,t){try{e.srcObject=t.srcObject}catch($A){try{e.src=t.src}catch($A){xL.error("Error reattaching stream to element",$A)}}};let n=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0?"pagehide":"beforeunload",r=window["on"+n];if(window.addEventListener(n,(function(){xL.log("Closing window");for(const[e,t]of xL.sessions)t&&t.destroyOnUnload&&(xL.log("Destroying session "+e),t.destroy({unload:!0,notifyDestroyed:!1}));r&&"function"==typeof r&&r()})),xL.safariVp8=!1,xL.safariVp9=!1,"safari"===xL.webRTCAdapter.browserDetails.browser&&xL.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(let e of RTCRtpSender.getCapabilities("video").codecs)e&&e.mimeType&&"video/vp8"===e.mimeType.toLowerCase()?xL.safariVp8=!0:e&&e.mimeType&&"video/vp9"===e.mimeType.toLowerCase()&&(xL.safariVp9=!0);xL.safariVp8?xL.log("This version of Safari supports VP8"):xL.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{let e=new RTCPeerConnection({});e.createOffer({offerToReceiveVideo:!0}).then((function(t){xL.safariVp8=-1!==t.sdp.indexOf("VP8"),xL.safariVp9=-1!==t.sdp.indexOf("VP9"),xL.safariVp8?xL.log("This version of Safari supports VP8"):xL.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),e.close(),e=null}))}xL.initDone=!0,e.callback()}},xL.isWebrtcSupported=function(){return!!window.RTCPeerConnection},xL.isGetUserMediaAvailable=function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},xL.randomString=function(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="";for(let r=0;r<e;r++){let e=Math.floor(Math.random()*t.length);n+=t.charAt(e)}return n};let wL=!0,_L=!0;function kL(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function EL(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function SL(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(wL=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function CL(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(_L=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function TL(){if("object"==typeof window){if(wL)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function ML(e,t){_L&&console.warn(e+" is deprecated, please use "+t+" instead.")}function IL(e){return"[object Object]"===Object.prototype.toString.call(e)}function OL(e){return IL(e)?Object.keys(e).reduce((function(t,n){const r=IL(e[n]),i=r?OL(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})}),{}):e}function AL(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?AL(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{AL(e,e.get(t),n)}))})))}function PL(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&AL(e,n,i)}))})),i}const DL=TL;function LL(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const a=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{n=n.filter((e=>"videoinput"===e.kind));let a=n.find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!a&&n.length&&t.includes("back")&&(a=n[n.length-1]),a&&(e.video.deviceId=o.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=r(e.video),DL("chrome: "+JSON.stringify(e)),i(e)}))}e.video=r(e.video)}return DL("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(o(e))))))}}}function RL(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function zL(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else EL(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function jL(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function NL(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])})).then(n,r)}}function BL(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>PL(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),EL(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>PL(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function FL(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{const t=this.getSenders().find((t=>t.track===e));if(t)throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function VL(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return FL(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{const t=this.getSenders().find((t=>t.track===e));if(t)throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const i=this.getSenders().find((e=>e.track===t));if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=s.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function UL(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function $L(e,t){EL(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}const ZL=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:$L,shimAddTrackRemoveTrack:VL,shimAddTrackRemoveTrackWithNative:FL,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:jL,shimGetStats:NL,shimGetUserMedia:LL,shimMediaStream:RL,shimOnTrack:zL,shimPeerConnection:UL,shimSenderReceiverGetStats:BL},Symbol.toStringTag,{value:"Module"}));function HL(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){ML("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function WL(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function qL(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch($A){if("TypeError"!==$A.name)throw $A;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,o)}}function GL(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function KL(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),EL(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function YL(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){ML("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function XL(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function JL(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function QL(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function eR(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function tR(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}const nR=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:JL,shimCreateAnswer:tR,shimCreateOffer:eR,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:QL,shimGetUserMedia:HL,shimOnTrack:WL,shimPeerConnection:qL,shimRTCDataChannel:XL,shimReceiverGetStats:KL,shimRemoveStream:YL,shimSenderGetStats:GL},Symbol.toStringTag,{value:"Module"}));function rR(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function iR(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function oR(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let s=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){const r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}function aR(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(sR(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function sR(e){return e&&void 0!==e.video?Object.assign({},e,{video:OL(e.video)}):e}function lR(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];void 0===r.urls&&r.url?(ML("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function cR(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function uR(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function dR(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const hR=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:dR,shimCallbacksAPI:oR,shimConstraints:sR,shimCreateOfferLegacy:uR,shimGetUserMedia:aR,shimLocalStreamsAPI:rR,shimRTCIceServerUrls:lR,shimRemoteStreamsAPI:iR,shimTrackEventTransceiver:cR},Symbol.toStringTag,{value:"Module"}));var pR={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substring(e.indexOf(" ")+1).split(";");for(let i=0;i<r.length;i++)n=r[i].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(let o=3;o<r.length;o++){const i=r[o],a=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(a){const r=t.parseRtpMap(a),o=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(r.parameters=o.length?t.parseFmtp(o[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const i=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{i.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let i=0;return n.codecs.forEach((e=>{e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),o=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),s=a.length>0&&a[0].ssrc;let l;const c=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));c.length>0&&c[0].length>1&&c[0][0]===s&&(l=c[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&l&&(t.rtx={ssrc:l}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:s,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&s&&n.push({ssrc:s});let u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substring(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=u}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const a=t.matchPrefix(e,"a=sctpmap:");if(a.length>0){const e=a[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){let i;const o=void 0!==n?n:2;return i=e||t.generateSessionId(),"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let t=0;t<r.length;t++)switch(r[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t}(pR);var fR=pR.exports;const mR=i(fR),gR=r({__proto__:null,default:mR},[fR]);function vR(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){const n=new t(e),r=mR.parseCandidate(e.candidate);for(const e in r)e in n||Object.defineProperty(n,e,{value:r[e]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,EL(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function yR(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||EL(e,"icecandidate",(e=>{if(e.candidate){const t=mR.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function bR(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=mR.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=mR.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),r=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=mR.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substring(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],e);let i;i=0===n&&0===r?Number.POSITIVE_INFINITY:0===n||0===r?Math.max(n,r):Math.min(n,r);const o={};Object.defineProperty(o,"maxMessageSize",{get:()=>i}),this._sctp=o}return n.apply(this,arguments)}}function xR(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},EL(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function wR(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function _R(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function kR(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function ER(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}return e.sdp||"offer"!==e.type&&"answer"!==e.type?n.apply(this,[e]):("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}const SR=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:_R,shimAddIceCandidateNullOrEmpty:kR,shimConnectionState:wR,shimMaxMessageSize:bR,shimParameterlessSetLocalDescription:ER,shimRTCIceCandidate:vR,shimRTCIceCandidateRelayProtocol:yR,shimSendThrowTypeError:xR},Symbol.toStringTag,{value:"Module"})),CR=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=TL,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=kL(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=kL(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=kL(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:SR,extractVersion:kL,disableLog:SL,disableWarnings:CL,sdp:gR};switch(r.browser){case"chrome":if(!ZL||!UL||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=ZL,kR(e,r),ER(e),LL(e,r),RL(e),UL(e,r),zL(e),VL(e,r),jL(e),NL(e),BL(e),$L(e,r),vR(e),yR(e),wR(e),bR(e,r),xR(e),_R(e,r);break;case"firefox":if(!nR||!qL||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=nR,kR(e,r),ER(e),HL(e,r),qL(e,r),WL(e),YL(e),GL(e),KL(e),XL(e),JL(e),QL(e),eR(e),tR(e),vR(e),wR(e),bR(e,r),xR(e);break;case"safari":if(!hR||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=hR,kR(e,r),ER(e),lR(e),uR(e),oR(e),rR(e),iR(e),cR(e),aR(e),dR(e),vR(e),yR(e),bR(e,r),xR(e),_R(e,r);break;default:n("Unsupported browser!")}return i}({window:"undefined"==typeof window?void 0:window});let TR=null,MR=null,IR="videoroomtest-"+xL.randomString(12),OR=1234,AR=null,PR=null,DR=null,LR=null,RR=null,zR={},jR={},NR={},BR={},FR={},VR={},UR={},$R={},ZR=[],HR={},WR={},qR="h264",GR=!1;const KR=({channel:e})=>{_P();const{joinRoom:t,disconnect:n,authModal:r,refresh:i}=U.useContext(zZ),o=kP(iA),[a,s]=U.useState([]),[l,c]=U.useState([]),u=e=>t=>{t&&(t.srcObject=e,t.play(),d.current.push(t))},d=U.useRef([]);return Q("div",{style:{display:"flex",justifyContent:"space-around",flexWrap:"wrap"},children:[Q("div",{style:{margin:"auto",maxWidth:420,padding:20,paddingTop:0},children:[J("div",{children:a.map((e=>J("div",{children:e.label},"cam-"+e.deviceId)))}),J("div",{children:l.map((e=>J("div",{children:e.label},"mic-"+e.deviceId)))})]}),Object.entries(UR).map((([e,t])=>Q("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[J("video",{ref:u(t),playsInline:!0,autoPlay:!0,muted:!0,style:{width:"calc(80% - 40px)",maxWidth:420,borderRadius:5}}),Q("div",{children:[null==o?void 0:o.id," (YOU)"]})]},"local-"+e))),Object.entries($R).map((([e,t])=>(console.log("stream",t),t?Q("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[J("video",{ref:u(t),playsInline:!0,autoPlay:!0,muted:!0,style:{width:"calc(80% - 40px)",maxWidth:420,borderRadius:5}}),J("div",{children:zR[e]})]},"remote-"+e):null))),Q(iw,{style:{position:"fixed",bottom:20,width:100,left:"calc(50% - 50px)",display:"flex",flexDirection:"column",justifyContent:"center"},children:[J(gw,{onClick:()=>{d.current.reduce((async(e,t)=>(await e,t.play())),Promise.resolve())},children:"Play"}),J(gw,{onClick:()=>{var n;o?e&&t(e.id,o.id,o.name||"anon"):null===(n=r.current)||void 0===n||n.present()},style:{borderRadius:20,backgroundColor:"green",color:"white",fontSize:20,padding:10,height:50,width:240,fontWeight:"bold"},children:"JOIN VIDEO CALL"})]})]})};var YR={exports:{}},XR={exports:{}};/*! For license information please see excalidraw.production.min.js.LICENSE.txt */!function(e,t){self,e.exports=function(e,t){return function(){var n,r,i,o,a={45:function(e,t,n){function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}n.d(t,{Z:function(){return i}})},6233:function(e,t){var n;n=function(e){e.version="0.3.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}(),n="undefined"!=typeof Buffer;function r(e){for(var n=-1,r=0,i=e.length-7;r<i;)n=(n=(n=(n=(n=(n=(n=(n=n>>>8^t[255&(n^e[r++])])>>>8^t[255&(n^e[r++])])>>>8^t[255&(n^e[r++])])>>>8^t[255&(n^e[r++])])>>>8^t[255&(n^e[r++])])>>>8^t[255&(n^e[r++])])>>>8^t[255&(n^e[r++])])>>>8^t[255&(n^e[r++])];for(;r<i+7;)n=n>>>8^t[255&(n^e[r++])];return-1^n}e.table=t,e.bstr=function(e){if(e.length>32768&&n)return r(new Buffer(e));for(var i=-1,o=e.length-1,a=0;a<o;)i=t[255&(i^e.charCodeAt(a++))]^i>>>8,i=t[255&(i^e.charCodeAt(a++))]^i>>>8;return a===o&&(i=i>>>8^t[255&(i^e.charCodeAt(a))]),-1^i},e.buf=function(e){if(e.length>1e4)return r(e);for(var n=-1,i=0,o=e.length-3;i<o;)n=(n=(n=(n=n>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])])>>>8^t[255&(n^e[i++])];for(;i<o+3;)n=n>>>8^t[255&(n^e[i++])];return-1^n},e.str=function(e){for(var n,r,i=-1,o=0,a=e.length;o<a;)(n=e.charCodeAt(o++))<128?i=i>>>8^t[255&(i^n)]:n<2048?i=(i=i>>>8^t[255&(i^(192|n>>6&31))])>>>8^t[255&(i^(128|63&n))]:n>=55296&&n<57344?(n=64+(1023&n),r=1023&e.charCodeAt(o++),i=(i=(i=(i=i>>>8^t[255&(i^(240|n>>8&7))])>>>8^t[255&(i^(128|n>>2&63))])>>>8^t[255&(i^(128|r>>6&15|3&n))])>>>8^t[255&(i^(128|63&r))]):i=(i=(i=i>>>8^t[255&(i^(224|n>>12&15))])>>>8^t[255&(i^(128|n>>6&63))])>>>8^t[255&(i^(128|63&n))];return-1^i}},"undefined"==typeof DO_NOT_EXPORT_CRC?n(t):n({})},4739:function(e,t,n){n.d(t,{Dv:function(){return B},KO:function(){return V},Vv:function(){return _},b9:function(){return F},cn:function(){return N},zt:function(){return z}});var r=n(9787);const i=Symbol(),o=e=>!!e[i],a=e=>{var t,n;null==(n=(t=e[i]).c)||n.call(t)},s=(e,t)=>{const n=e[i].o,r=t[i].o;return n===r||e===r||o(n)&&s(n,t)},l=e=>{const t={o:e,c:null},n=new Promise((n=>{t.c=()=>{t.c=null,n()},e.then(t.c,t.c)}));return n[i]=t,n};var c=Object.defineProperty,u=Object.defineProperties,d=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,m=(e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const g=e=>"init"in e,v="r",y="w",b="c",x="s",w=e=>{const t=new WeakMap,n=new WeakMap,r=new Map;let c,w;if(c=new Set,w=new Set,e)for(const[i,o]of e){const e={v:o,r:0,d:new Map};Object.freeze(e),g(i)||console.warn("Found initial value for derived atom which can cause unexpected behavior",i),t.set(i,e)}const _=new WeakMap,k=new WeakMap,E=e=>{let t=k.get(e);return t||(t=new Map,k.set(e,t)),t},S=(e,n)=>{if(e){const t=E(e);let r=t.get(n);return r||(r=S(e.p,n),r&&("p"in r&&r.p.then((()=>t.delete(n))),t.set(n,r))),r}return t.get(n)},C=(e,n,i)=>{if(Object.freeze(i),e)E(e).set(n,i);else{const e=t.get(n);t.set(n,i),r.has(n)||r.set(n,e)}},T=(e,t=new Map,n)=>{if(!n)return t;const r=new Map;let i=!1;return n.forEach((n=>{var o;const a=(null==(o=S(e,n))?void 0:o.r)||0;r.set(n,a),t.get(n)!==a&&(i=!0)})),t.size!==r.size||i?r:t},M=(e,t,n,r,i)=>{const o=S(e,t);if(o){if(i&&(!("p"in o)||!s(o.p,i)))return o;"p"in o&&a(o.p)}const l={v:n,r:(null==o?void 0:o.r)||0,d:T(e,null==o?void 0:o.d,r)};return o&&"v"in o&&Object.is(o.v,n)?l.d===o.d||l.d.size===o.d.size&&Array.from(l.d.keys()).every((e=>o.d.has(e)))||Promise.resolve().then((()=>{U(e)})):(++l.r,l.d.has(t)&&(l.d=new Map(l.d).set(t,l.r))),C(e,t,l),l},I=(e,t,n,r,i)=>{const o=S(e,t);if(o){if(i&&(!("p"in o)||!s(o.p,i)))return o;"p"in o&&a(o.p)}const l={e:n,r:(null==o?void 0:o.r)||0,d:T(e,null==o?void 0:o.d,r)};return C(e,t,l),l},O=(e,t,n,r)=>{const i=S(e,t);if(i&&"p"in i){if(s(i.p,n))return i;a(i.p)}((e,t,n)=>{let r=_.get(t);r||(r=new Map,_.set(t,r)),n.then((()=>{r.get(e)===n&&(r.delete(e),r.size||_.delete(t))})),r.set(e,n)})(e,t,n);const o={p:n,r:(null==i?void 0:i.r)||0,d:T(e,null==i?void 0:i.d,r)};return C(e,t,o),o},A=(e,t,n,r)=>{if(n instanceof Promise){const i=l(n.then((n=>{M(e,t,n,r,i),U(e)})).catch((n=>{if(n instanceof Promise)return o(n)?n.then((()=>{D(e,t,!0)})):n;I(e,t,n,r,i),U(e)})));return O(e,t,i,r)}return M(e,t,n,r)},P=(e,t)=>{const n=S(e,t);if(n){"p"in n&&a(n.p);const o=(r=((e,t)=>{for(var n in t||(t={}))p.call(t,n)&&m(e,n,t[n]);if(h)for(var n of h(t))f.call(t,n)&&m(e,n,t[n]);return e})({},n),i={i:n.r},u(r,d(i)));C(e,t,o)}else console.warn("[Bug] could not invalidate non existing atom",t);var r,i},D=(e,t,r)=>{if(!r){const r=S(e,t);if(r){if(r.r!==r.i&&"p"in r&&r.p[i].c)return r;if(r.d.forEach(((r,i)=>{if(i!==t)if(n.has(i)){const t=S(e,i);t&&t.r===t.i&&D(e,i)}else D(e,i)})),Array.from(r.d).every((([t,n])=>{const r=S(e,t);return r&&"v"in r&&r.r===n})))return r}}const o=new Set;try{const n=t.read((n=>{o.add(n);const r=n===t?S(e,n):D(e,n);if(r){if("e"in r)throw r.e;if("p"in r)throw r.p;return r.v}if(g(n))return n.init;throw new Error("no atom init")}));return A(e,t,n,o)}catch(n){if(n instanceof Promise){const i=l(n);return O(e,t,i,o)}return I(e,t,n,o)}},L=(e,t)=>D(t,e),R=(e,t)=>!t.l.size&&(!t.t.size||1===t.t.size&&t.t.has(e)),z=(e,t)=>{const r=n.get(t);null==r||r.t.forEach((n=>{n!==t&&(P(e,n),z(e,n))}))},j=(e,t,n)=>{let r=!0;const i=(t,n)=>{const r=D(e,t);if("e"in r)throw r.e;if("p"in r){if(null==n?void 0:n.unstable_promise)return r.p.then((()=>i(t,n)));throw console.info("Reading pending atom state in write operation. We throw a promise for now.",t),r.p}if("v"in r)return r.v;throw console.warn("[Bug] no value found while reading atom in write operation. This is probably a bug.",t),new Error("no value found")},o=t.write(i,((n,i)=>{let o;if(n===t){if(!g(n))throw new Error("atom not writable");const t=(e=>{const t=new Set,n=_.get(e);return n&&(_.delete(e),n.forEach(((e,n)=>{a(e),t.add(n)}))),t})(n);t.forEach((t=>{t!==e&&A(t,n,i)})),A(e,n,i),z(e,n)}else o=j(e,n,i);return r||U(e),o}),n);return r=!1,e=void 0,o},N=(e,t,n)=>{const r=j(n,e,t);return U(n),r},B=(e,t)=>{const r={t:new Set(t&&[t]),l:new Set};if(n.set(e,r),w.add(e),D(void 0,e).d.forEach(((t,r)=>{const i=n.get(r);i?i.t.add(e):r!==e&&B(r,e)})),(e=>!!e.write)(e)&&e.onMount){const t=t=>N(e,t),n=e.onMount(t);n&&(r.u=n)}return r},F=e=>{var t;const r=null==(t=n.get(e))?void 0:t.u;r&&r(),n.delete(e),w.delete(e);const i=S(void 0,e);i?i.d.forEach(((t,r)=>{if(r!==e){const t=n.get(r);t&&(t.t.delete(e),R(r,t)&&F(r))}})):console.warn("[Bug] could not find atom state to unmount",e)},V=(e,t,r)=>{const i=new Set(t.d.keys());null==r||r.forEach(((t,r)=>{if(i.has(r))return void i.delete(r);const o=n.get(r);o&&(o.t.delete(e),R(r,o)&&F(r))})),i.forEach((t=>{const r=n.get(t);r?r.t.add(e):n.has(e)&&B(t,e)}))},U=e=>{if(e)E(e).forEach(((r,i)=>{if(r!==t.get(i)){const t=n.get(i);null==t||t.l.forEach((t=>t(e)))}}));else{for(;r.size;){const e=Array.from(r);r.clear(),e.forEach((([e,t])=>{const r=S(void 0,e);r&&r.d!==(null==t?void 0:t.d)&&V(e,r,null==t?void 0:t.d);const i=n.get(e);null==i||i.l.forEach((e=>e()))}))}c.forEach((e=>e()))}},$=(e,n)=>{n&&(e=>{E(e).forEach(((e,n)=>{const r=t.get(n);(e.r>((null==r?void 0:r.r)||0)||"v"in e&&e.r===(null==r?void 0:r.r)&&e.d!==(null==r?void 0:r.d))&&(t.set(n,e),e.d!==(null==r?void 0:r.d)&&V(n,e,null==r?void 0:r.d))}))})(n),U(void 0)},Z=(e,t)=>{const r=(e=>{let t=n.get(e);return t||(t=B(e)),t})(e).l;return r.add(t),()=>{r.delete(t),(e=>{const t=n.get(e);t&&R(e,t)&&F(e)})(e)}},H=(e,t)=>{for(const[n,r]of e)g(n)&&(A(t,n,r),z(t,n));U(t)};return{[v]:L,[y]:N,[b]:$,[x]:Z,h:H,n:e=>(c.add(e),()=>{c.delete(e)}),l:()=>w.values(),a:e=>t.get(e),m:e=>n.get(e)}},_=e=>{const t=w(e),n=e=>new Promise(((r,i)=>{const o=t.r(e);"e"in o?i(o.e):r("p"in o?o.p.then((()=>n(e))):o.v)}));return{get:e=>{const n=t.r(e);if("e"in n)throw n.e;if(!("p"in n))return n.v},asyncGet:n,set:(e,n)=>t.w(e,n),sub:(e,n)=>t.s(e,n),SECRET_INTERNAL_store:t}},k=(e,t)=>({s:t?t(e).SECRET_INTERNAL_store:w(e)}),E=new Map,S=e=>(E.has(e)||E.set(e,(0,r.createContext)(k())),E.get(e));var C=Object.defineProperty,T=Object.defineProperties,M=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,P=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,D=(e,t)=>{for(var n in t||(t={}))O.call(t,n)&&P(e,n,t[n]);if(I)for(var n of I(t))A.call(t,n)&&P(e,n,t[n]);return e};const L=e=>e.debugLabel||e.toString(),R=([e,t])=>Object.fromEntries(t.flatMap((t=>{var n,r;const i=null==(n=e.m)?void 0:n.call(e,t);if(!i)return[];const o=i.t,a=(null==(r=e.a)?void 0:r.call(e,t))||{};return[[L(t),(s=D(D(D({},"e"in a&&{error:a.e}),"p"in a&&{promise:a.p}),"v"in a&&{value:a.v}),l={dependents:Array.from(o).map(L)},T(s,M(l)))]];var s,l}))),z=({children:e,initialValues:t,scope:n,unstable_createStore:i,unstable_enableVersionedWrite:o})=>{const[a,s]=(0,r.useState)();(0,r.useEffect)((()=>{a&&(l.current.s.c(null,a),delete a.p)}),[a]);const l=(0,r.useRef)();l.current||(l.current=k(t,i),o&&(l.current.w=e=>{s((t=>{const n=t?{p:t}:{};return e(n),n}))})),o||(e=>{const{s:t}=e,[n,i]=(0,r.useState)([]);(0,r.useEffect)((()=>{var e;const n=()=>{var e;i(Array.from((null==(e=t.l)?void 0:e.call(t))||[]))},r=null==(e=t.n)?void 0:e.call(t,n);return n(),r}),[t]),(0,r.useDebugValue)([t,n],R)})(l.current);const c=S(n);return(0,r.createElement)(c.Provider,{value:l.current},e)};let j=0;function N(e,t){const n="atom"+ ++j,r={toString:()=>n};return"function"==typeof e?r.read=e:(r.init=e,r.read=e=>e(r),r.write=(e,t,n)=>t(r,"function"==typeof n?n(e(r)):n)),t&&(r.write=t),r}function B(e,t){const n=S(t),{s:i}=(0,r.useContext)(n),o=(0,r.useCallback)((t=>{const n=i.r(e,t);if("e"in n)throw n.e;if("p"in n)throw n.p;if("v"in n)return n.v;throw new Error("no atom value")}),[i,e]),[[a,s,l],c]=(0,r.useReducer)((0,r.useCallback)(((t,n)=>{const r=o(n);return Object.is(t[1],r)&&t[2]===e?t:[n,r,e]}),[o,e]),void 0,(()=>{const t=void 0;return[t,o(t),e]}));return l!==e&&c(void 0),(0,r.useEffect)((()=>{const t=i.s(e,c);return c(void 0),t}),[i,e]),(0,r.useEffect)((()=>{i.c(e,a)})),(0,r.useDebugValue)(s),s}function F(e,t){const n=S(t),{s:i,w:o}=(0,r.useContext)(n);return(0,r.useCallback)((t=>{if(!("write"in e))throw new Error("not writable atom");const n=n=>i.w(e,t,n);return o?o(n):n()}),[i,o,e])}function V(e,t){return"scope"in e&&(console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),t=e.scope),[B(e,t),F(e,t)]}},200:function(e,t,n){var r="Expected a function",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,d=c||u||Function("return this")(),h=Object.prototype.toString,p=Math.max,f=Math.min,m=function(){return d.Date.now()};function g(e,t,n){var i,o,a,s,l,c,u=0,d=!1,h=!1,g=!0;if("function"!=typeof e)throw new TypeError(r);function b(t){var n=i,r=o;return i=o=void 0,u=t,s=e.apply(r,n)}function x(e){return u=e,l=setTimeout(_,t),d?b(e):s}function w(e){var n=e-c;return void 0===c||n>=t||n<0||h&&e-u>=a}function _(){var e=m();if(w(e))return k(e);l=setTimeout(_,function(e){var n=t-(e-c);return h?f(n,a-(e-u)):n}(e))}function k(e){return l=void 0,g&&i?b(e):(i=o=void 0,s)}function E(){var e=m(),n=w(e);if(i=arguments,o=this,c=e,n){if(void 0===l)return x(c);if(h)return l=setTimeout(_,t),b(c)}return void 0===l&&(l=setTimeout(_,t)),s}return t=y(t)||0,v(n)&&(d=!!n.leading,a=(h="maxWait"in n)?p(y(n.maxWait)||0,t):a,g="trailing"in n?!!n.trailing:g),E.cancel=function(){void 0!==l&&clearTimeout(l),u=0,i=c=o=l=void 0},E.flush=function(){return void 0===l?s:k(m())},E}function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=a.test(e);return n||s.test(e)?l(e.slice(2),n?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(r);return v(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),g(e,t,{leading:i,maxWait:t,trailing:o})}},2744:function(e,t,n){var r={};(0,n(9187).assign)(r,n(4395),n(578),n(2684)),e.exports=r},4395:function(e,t,n){var r=n(7651),i=n(9187),o=n(8592),a=n(5604),s=n(249),l=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var u;if(u="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,u)))throw new Error(a[n]);this._dict_set=!0}}function u(e,t){var n=new c(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}c.prototype.push=function(e,t){var n,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(c),s.next_out=0,s.avail_out=c),1!==(n=r.deflate(s,a))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==a||(this.onEnd(0),s.avail_out=0,!0)},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=c,t.deflate=u,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,u(e,t)}},578:function(e,t,n){var r=n(7823),i=n(9187),o=n(8592),a=n(2684),s=n(5604),l=n(249),c=n(9968),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);if(this.header=new c,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==a.Z_OK))throw new Error(s[n])}function h(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(e,t){var n,s,l,c,d,h=this.strm,p=this.options.chunkSize,f=this.options.dictionary,m=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?h.input=o.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(p),h.next_out=0,h.avail_out=p),(n=r.inflate(h,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&f&&(n=r.inflateSetDictionary(this.strm,f)),n===a.Z_BUF_ERROR&&!0===m&&(n=a.Z_OK,m=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&n!==a.Z_STREAM_END&&(0!==h.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(h.output,h.next_out),c=h.next_out-l,d=o.buf2string(h.output,l),h.next_out=c,h.avail_out=p-c,c&&i.arraySet(h.output,h.output,l,c,0),this.onData(d)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(m=!0)}while((h.avail_in>0||0===h.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),h.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=h,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.ungzip=h},9187:function(e,t){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(e[i]=n[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(n)},8592:function(e,t,n){var r=n(9187),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,t.string2buf=function(e){var t,n,i,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),a=0,o=0;a<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,i,o,s=t||e.length,c=new Array(2*s);for(r=0,n=0;n<s;)if((i=e[n++])<128)c[r++]=i;else if((o=a[i])>4)c[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<s;)i=i<<6|63&e[n++],o--;o>1?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},3693:function(e){e.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},2684:function(e){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},8464:function(e){var t=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,n,r,i){var o=t,a=i+r;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^n[s])];return-1^e}},7651:function(e,t,n){var r,i=n(9187),o=n(8676),a=n(3693),s=n(8464),l=n(5604),c=-2,u=258,d=262,h=103,p=113,f=666;function m(e,t){return e.msg=l[t],t}function g(e){return(e<<1)-(e>4?9:0)}function v(e){for(var t=e.length;--t>=0;)e[t]=0}function y(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function b(e,t){o._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,y(e.strm)}function x(e,t){e.pending_buf[e.pending++]=t}function w(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function _(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-d?e.strstart-(e.w_size-d):0,c=e.window,h=e.w_mask,p=e.prev,f=e.strstart+u,m=c[o+a-1],g=c[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+a]===g&&c[n+a-1]===m&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<f);if(r=u-(f-o),o=f-u,r>a){if(e.match_start=t,a=r,r>=s)break;m=c[o+a-1],g=c[o+a]}}}while((t=p[t&h])>l&&0!=--i);return a<=e.lookahead?a:e.lookahead}function k(e){var t,n,r,o,l,c,u,h,p,f,m=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-d)){i.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=m?r-m:0}while(--n);t=n=m;do{r=e.prev[--t],e.prev[t]=r>=m?r-m:0}while(--n);o+=m}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,h=e.strstart+e.lookahead,p=o,f=void 0,(f=c.avail_in)>p&&(f=p),n=0===f?0:(c.avail_in-=f,i.arraySet(u,c.input,c.next_in,f,h),1===c.state.wrap?c.adler=a(c.adler,u,f,h):2===c.state.wrap&&(c.adler=s(c.adler,u,f,h)),c.next_in+=f,c.total_in+=f,f),e.lookahead+=n,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<d&&0!==e.strm.avail_in)}function E(e,t){for(var n,r;;){if(e.lookahead<d){if(k(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-d&&(e.match_length=_(e,n)),e.match_length>=3)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function S(e,t){for(var n,r,i;;){if(e.lookahead<d){if(k(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-d&&(e.match_length=_(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(b(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&b(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function C(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function T(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),v(this.dyn_ltree),v(this.dyn_dtree),v(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),v(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),v(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function M(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:p,e.adler=2===t.wrap?0:1,t.last_flush=0,o._tr_init(t),0):m(e,c)}function I(e){var t,n=M(e);return 0===n&&((t=e.state).window_size=2*t.w_size,v(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function O(e,t,n,r,o,a){if(!e)return c;var s=1;if(-1===t&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>9||8!==n||r<8||r>15||t<0||t>9||a<0||a>4)return m(e,c);8===r&&(r=9);var l=new T;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,I(e)}r=[new C(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(k(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,b(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-d&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(b(e,!1),e.strm.avail_out),1)})),new C(4,4,8,4,E),new C(4,5,16,8,E),new C(4,6,32,32,E),new C(4,4,16,16,S),new C(8,16,32,32,S),new C(8,16,128,128,S),new C(8,32,128,256,S),new C(32,128,258,1024,S),new C(32,258,258,4096,S)],t.deflateInit=function(e,t){return O(e,t,8,15,8,0)},t.deflateInit2=O,t.deflateReset=I,t.deflateResetKeep=M,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?c:(e.state.gzhead=t,0):c},t.deflate=function(e,t){var n,i,a,l;if(!e||!e.state||t>5||t<0)return e?m(e,c):c;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===f&&4!==t)return m(e,0===e.avail_out?-5:c);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,x(i,31),x(i,139),x(i,8),i.gzhead?(x(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),x(i,255&i.gzhead.time),x(i,i.gzhead.time>>8&255),x(i,i.gzhead.time>>16&255),x(i,i.gzhead.time>>24&255),x(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),x(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(x(i,255&i.gzhead.extra.length),x(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(x(i,0),x(i,0),x(i,0),x(i,0),x(i,0),x(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),x(i,3),i.status=p);else{var d=8+(i.w_bits-8<<4)<<8;d|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(d|=32),d+=31-d%31,i.status=p,w(i,d),0!==i.strstart&&(w(i,e.adler>>>16),w(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),y(e),a=i.pending,i.pending!==i.pending_buf_size));)x(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),y(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,x(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),y(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,x(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.status=h)}else i.status=h;if(i.status===h&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&y(e),i.pending+2<=i.pending_buf_size&&(x(i,255&e.adler),x(i,e.adler>>8&255),e.adler=0,i.status=p)):i.status=p),0!==i.pending){if(y(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&g(t)<=g(n)&&4!==t)return m(e,-5);if(i.status===f&&0!==e.avail_in)return m(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&i.status!==f){var _=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(k(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,a,s=e.window;;){if(e.lookahead<=u){if(k(e),e.lookahead<=u&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=e.strstart+u;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=u-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=o._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if(3!==_&&4!==_||(i.status=f),1===_||3===_)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===_&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(v(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),y(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(x(i,255&e.adler),x(i,e.adler>>8&255),x(i,e.adler>>16&255),x(i,e.adler>>24&255),x(i,255&e.total_in),x(i,e.total_in>>8&255),x(i,e.total_in>>16&255),x(i,e.total_in>>24&255)):(w(i,e.adler>>>16),w(i,65535&e.adler)),y(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==h&&t!==p&&t!==f?m(e,c):(e.state=null,t===p?m(e,-3):0):c},t.deflateSetDictionary=function(e,t){var n,r,o,s,l,u,d,h,p=t.length;if(!e||!e.state)return c;if(2===(s=(n=e.state).wrap)||1===s&&42!==n.status||n.lookahead)return c;for(1===s&&(e.adler=a(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(v(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,t,p-n.w_size,n.w_size,0),t=h,p=n.w_size),l=e.avail_in,u=e.next_in,d=e.input,e.avail_in=p,e.next_in=0,e.input=t,k(n);n.lookahead>=3;){r=n.strstart,o=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--o);n.strstart=r,n.lookahead=2,k(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=u,e.input=d,e.avail_in=l,n.wrap=s,0},t.deflateInfo="pako deflate (from Nodeca project)"},9968:function(e){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},9365:function(e){e.exports=function(e,t){var n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,y,b,x,w,_,k,E,S,C;n=e.state,r=e.next_in,S=e.input,i=r+(e.avail_in-5),o=e.next_out,C=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,h=n.window,p=n.hold,f=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{f<15&&(p+=S[r++]<<f,f+=8,p+=S[r++]<<f,f+=8),b=m[p&v];t:for(;;){if(p>>>=x=b>>>24,f-=x,0==(x=b>>>16&255))C[o++]=65535&b;else{if(!(16&x)){if(0==(64&x)){b=m[(65535&b)+(p&(1<<x)-1)];continue t}if(32&x){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,(x&=15)&&(f<x&&(p+=S[r++]<<f,f+=8),w+=p&(1<<x)-1,p>>>=x,f-=x),f<15&&(p+=S[r++]<<f,f+=8,p+=S[r++]<<f,f+=8),b=g[p&y];n:for(;;){if(p>>>=x=b>>>24,f-=x,!(16&(x=b>>>16&255))){if(0==(64&x)){b=g[(65535&b)+(p&(1<<x)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(_=65535&b,f<(x&=15)&&(p+=S[r++]<<f,(f+=8)<x&&(p+=S[r++]<<f,f+=8)),(_+=p&(1<<x)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=x,f-=x,_>(x=o-a)){if((x=_-x)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(k=0,E=h,0===d){if(k+=c-x,x<w){w-=x;do{C[o++]=h[k++]}while(--x);k=o-_,E=C}}else if(d<x){if(k+=c+d-x,(x-=d)<w){w-=x;do{C[o++]=h[k++]}while(--x);if(k=0,d<w){w-=x=d;do{C[o++]=h[k++]}while(--x);k=o-_,E=C}}}else if(k+=d-x,x<w){w-=x;do{C[o++]=h[k++]}while(--x);k=o-_,E=C}for(;w>2;)C[o++]=E[k++],C[o++]=E[k++],C[o++]=E[k++],w-=3;w&&(C[o++]=E[k++],w>1&&(C[o++]=E[k++]))}else{k=o-_;do{C[o++]=C[k++],C[o++]=C[k++],C[o++]=C[k++],w-=3}while(w>2);w&&(C[o++]=C[k++],w>1&&(C[o++]=C[k++]))}break}}break}}while(r<i&&o<s);r-=w=f>>3,p&=(1<<(f-=w<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=f}},7823:function(e,t,n){var r=n(9187),i=n(3693),o=n(8464),a=n(9365),s=n(6446),l=-2,c=12,u=30;function d(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):l}function f(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,p(e)):l}function m(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?l:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,f(e))):l}function g(e,t){var n,r;return e?(r=new h,e.state=r,r.window=null,0!==(n=m(e,t))&&(e.state=null),n):l}var v,y,b=!0;function x(e){if(b){var t;for(v=new r.Buf32(512),y=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,v,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,y,0,e.work,{bits:5}),b=!1}e.lencode=v,e.lenbits=9,e.distcode=y,e.distbits=5}function w(e,t,n,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),r.arraySet(a.window,t,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}t.inflateReset=f,t.inflateReset2=m,t.inflateResetKeep=p,t.inflateInit=function(e){return g(e,15)},t.inflateInit2=g,t.inflate=function(e,t){var n,h,p,f,m,g,v,y,b,_,k,E,S,C,T,M,I,O,A,P,D,L,R,z,j=0,N=new r.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;(n=e.state).mode===c&&(n.mode=13),m=e.next_out,p=e.output,v=e.avail_out,f=e.next_in,h=e.input,g=e.avail_in,y=n.hold,b=n.bits,_=g,k=v,L=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}if(2&n.wrap&&35615===y){n.check=0,N[0]=255&y,N[1]=y>>>8&255,n.check=o(n.check,N,2,0),y=0,b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&y)<<8)+(y>>8))%31){e.msg="incorrect header check",n.mode=u;break}if(8!=(15&y)){e.msg="unknown compression method",n.mode=u;break}if(b-=4,D=8+(15&(y>>>=4)),0===n.wbits)n.wbits=D;else if(D>n.wbits){e.msg="invalid window size",n.mode=u;break}n.dmax=1<<D,e.adler=n.check=1,n.mode=512&y?10:c,y=0,b=0;break;case 2:for(;b<16;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}if(n.flags=y,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=u;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=u;break}n.head&&(n.head.text=y>>8&1),512&n.flags&&(N[0]=255&y,N[1]=y>>>8&255,n.check=o(n.check,N,2,0)),y=0,b=0,n.mode=3;case 3:for(;b<32;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}n.head&&(n.head.time=y),512&n.flags&&(N[0]=255&y,N[1]=y>>>8&255,N[2]=y>>>16&255,N[3]=y>>>24&255,n.check=o(n.check,N,4,0)),y=0,b=0,n.mode=4;case 4:for(;b<16;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}n.head&&(n.head.xflags=255&y,n.head.os=y>>8),512&n.flags&&(N[0]=255&y,N[1]=y>>>8&255,n.check=o(n.check,N,2,0)),y=0,b=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}n.length=y,n.head&&(n.head.extra_len=y),512&n.flags&&(N[0]=255&y,N[1]=y>>>8&255,n.check=o(n.check,N,2,0)),y=0,b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((E=n.length)>g&&(E=g),E&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,h,f,E,D)),512&n.flags&&(n.check=o(n.check,h,E,f)),g-=E,f+=E,n.length-=E),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===g)break e;E=0;do{D=h[f+E++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D))}while(D&&E<g);if(512&n.flags&&(n.check=o(n.check,h,E,f)),g-=E,f+=E,D)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===g)break e;E=0;do{D=h[f+E++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D))}while(D&&E<g);if(512&n.flags&&(n.check=o(n.check,h,E,f)),g-=E,f+=E,D)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}if(y!==(65535&n.check)){e.msg="header crc mismatch",n.mode=u;break}y=0,b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=c;break;case 10:for(;b<32;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}e.adler=n.check=d(y),y=0,b=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=m,e.avail_out=v,e.next_in=f,e.avail_in=g,n.hold=y,n.bits=b,2;e.adler=n.check=1,n.mode=c;case c:if(5===t||6===t)break e;case 13:if(n.last){y>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}switch(n.last=1&y,b-=1,3&(y>>>=1)){case 0:n.mode=14;break;case 1:if(x(n),n.mode=20,6===t){y>>>=2,b-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=u}y>>>=2,b-=2;break;case 14:for(y>>>=7&b,b-=7&b;b<32;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}if((65535&y)!=(y>>>16^65535)){e.msg="invalid stored block lengths",n.mode=u;break}if(n.length=65535&y,y=0,b=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(E=n.length){if(E>g&&(E=g),E>v&&(E=v),0===E)break e;r.arraySet(p,h,f,E,m),g-=E,f+=E,v-=E,m+=E,n.length-=E;break}n.mode=c;break;case 17:for(;b<14;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}if(n.nlen=257+(31&y),y>>>=5,b-=5,n.ndist=1+(31&y),y>>>=5,b-=5,n.ncode=4+(15&y),y>>>=4,b-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=u;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}n.lens[B[n.have++]]=7&y,y>>>=3,b-=3}for(;n.have<19;)n.lens[B[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},L=s(0,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,L){e.msg="invalid code lengths set",n.mode=u;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;M=(j=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,I=65535&j,!((T=j>>>24)<=b);){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}if(I<16)y>>>=T,b-=T,n.lens[n.have++]=I;else{if(16===I){for(z=T+2;b<z;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}if(y>>>=T,b-=T,0===n.have){e.msg="invalid bit length repeat",n.mode=u;break}D=n.lens[n.have-1],E=3+(3&y),y>>>=2,b-=2}else if(17===I){for(z=T+3;b<z;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}b-=T,D=0,E=3+(7&(y>>>=T)),y>>>=3,b-=3}else{for(z=T+7;b<z;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}b-=T,D=0,E=11+(127&(y>>>=T)),y>>>=7,b-=7}if(n.have+E>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=u;break}for(;E--;)n.lens[n.have++]=D}}if(n.mode===u)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=u;break}if(n.lenbits=9,R={bits:n.lenbits},L=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,L){e.msg="invalid literal/lengths set",n.mode=u;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},L=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,L){e.msg="invalid distances set",n.mode=u;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(g>=6&&v>=258){e.next_out=m,e.avail_out=v,e.next_in=f,e.avail_in=g,n.hold=y,n.bits=b,a(e,k),m=e.next_out,p=e.output,v=e.avail_out,f=e.next_in,h=e.input,g=e.avail_in,y=n.hold,b=n.bits,n.mode===c&&(n.back=-1);break}for(n.back=0;M=(j=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,I=65535&j,!((T=j>>>24)<=b);){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}if(M&&0==(240&M)){for(O=T,A=M,P=I;M=(j=n.lencode[P+((y&(1<<O+A)-1)>>O)])>>>16&255,I=65535&j,!(O+(T=j>>>24)<=b);){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}y>>>=O,b-=O,n.back+=O}if(y>>>=T,b-=T,n.back+=T,n.length=I,0===M){n.mode=26;break}if(32&M){n.back=-1,n.mode=c;break}if(64&M){e.msg="invalid literal/length code",n.mode=u;break}n.extra=15&M,n.mode=22;case 22:if(n.extra){for(z=n.extra;b<z;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}n.length+=y&(1<<n.extra)-1,y>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;M=(j=n.distcode[y&(1<<n.distbits)-1])>>>16&255,I=65535&j,!((T=j>>>24)<=b);){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}if(0==(240&M)){for(O=T,A=M,P=I;M=(j=n.distcode[P+((y&(1<<O+A)-1)>>O)])>>>16&255,I=65535&j,!(O+(T=j>>>24)<=b);){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}y>>>=O,b-=O,n.back+=O}if(y>>>=T,b-=T,n.back+=T,64&M){e.msg="invalid distance code",n.mode=u;break}n.offset=I,n.extra=15&M,n.mode=24;case 24:if(n.extra){for(z=n.extra;b<z;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}n.offset+=y&(1<<n.extra)-1,y>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=u;break}n.mode=25;case 25:if(0===v)break e;if(E=k-v,n.offset>E){if((E=n.offset-E)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=u;break}E>n.wnext?(E-=n.wnext,S=n.wsize-E):S=n.wnext-E,E>n.length&&(E=n.length),C=n.window}else C=p,S=m-n.offset,E=n.length;E>v&&(E=v),v-=E,n.length-=E;do{p[m++]=C[S++]}while(--E);0===n.length&&(n.mode=21);break;case 26:if(0===v)break e;p[m++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===g)break e;g--,y|=h[f++]<<b,b+=8}if(k-=v,e.total_out+=k,n.total+=k,k&&(e.adler=n.check=n.flags?o(n.check,p,k,m-k):i(n.check,p,k,m-k)),k=v,(n.flags?y:d(y))!==n.check){e.msg="incorrect data check",n.mode=u;break}y=0,b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===g)break e;g--,y+=h[f++]<<b,b+=8}if(y!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=u;break}y=0,b=0}n.mode=29;case 29:L=1;break e;case u:L=-3;break e;case 31:return-4;default:return l}return e.next_out=m,e.avail_out=v,e.next_in=f,e.avail_in=g,n.hold=y,n.bits=b,(n.wsize||k!==e.avail_out&&n.mode<u&&(n.mode<27||4!==t))&&w(e,e.output,e.next_out,k-e.avail_out)?(n.mode=31,-4):(_-=e.avail_in,k-=e.avail_out,e.total_in+=_,e.total_out+=k,n.total+=k,n.wrap&&k&&(e.adler=n.check=n.flags?o(n.check,p,k,e.next_out-k):i(n.check,p,k,e.next_out-k)),e.data_type=n.bits+(n.last?64:0)+(n.mode===c?128:0)+(20===n.mode||15===n.mode?256:0),(0===_&&0===k||4===t)&&0===L&&(L=-5),L)},t.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?l:(n.head=t,t.done=!1,0):l},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?l:11===n.mode&&i(1,t,r,0)!==n.check?-3:w(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):l},t.inflateInfo="pako inflate (from Nodeca project)"},6446:function(e,t,n){var r=n(9187),i=15,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,c,u,d,h,p){var f,m,g,v,y,b,x,w,_,k=p.bits,E=0,S=0,C=0,T=0,M=0,I=0,O=0,A=0,P=0,D=0,L=null,R=0,z=new r.Buf16(16),j=new r.Buf16(16),N=null,B=0;for(E=0;E<=i;E++)z[E]=0;for(S=0;S<c;S++)z[t[n+S]]++;for(M=k,T=i;T>=1&&0===z[T];T--);if(M>T&&(M=T),0===T)return u[d++]=20971520,u[d++]=20971520,p.bits=1,0;for(C=1;C<T&&0===z[C];C++);for(M<C&&(M=C),A=1,E=1;E<=i;E++)if(A<<=1,(A-=z[E])<0)return-1;if(A>0&&(0===e||1!==T))return-1;for(j[1]=0,E=1;E<i;E++)j[E+1]=j[E]+z[E];for(S=0;S<c;S++)0!==t[n+S]&&(h[j[t[n+S]]++]=S);if(0===e?(L=N=h,b=19):1===e?(L=o,R-=257,N=a,B-=257,b=256):(L=s,N=l,b=-1),D=0,S=0,E=C,y=d,I=M,O=0,g=-1,v=(P=1<<M)-1,1===e&&P>852||2===e&&P>592)return 1;for(;;){x=E-O,h[S]<b?(w=0,_=h[S]):h[S]>b?(w=N[B+h[S]],_=L[R+h[S]]):(w=96,_=0),f=1<<E-O,C=m=1<<I;do{u[y+(D>>O)+(m-=f)]=x<<24|w<<16|_|0}while(0!==m);for(f=1<<E-1;D&f;)f>>=1;if(0!==f?(D&=f-1,D+=f):D=0,S++,0==--z[E]){if(E===T)break;E=t[n+h[S]]}if(E>M&&(D&v)!==g){for(0===O&&(O=M),y+=C,A=1<<(I=E-O);I+O<T&&!((A-=z[I+O])<=0);)I++,A<<=1;if(P+=1<<I,1===e&&P>852||2===e&&P>592)return 1;u[g=D&v]=M<<24|I<<16|y-d|0}}return 0!==D&&(u[y+D]=E-O<<24|64<<16|0),p.bits=M,0}},5604:function(e){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},8676:function(e,t,n){var r=n(9187);function i(e){for(var t=e.length;--t>=0;)e[t]=0}var o=256,a=286,s=30,l=15,c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);i(p);var f=new Array(60);i(f);var m=new Array(512);i(m);var g=new Array(256);i(g);var v=new Array(29);i(v);var y,b,x,w=new Array(s);function _(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function k(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function E(e){return e<256?m[e]:m[256+(e>>>7)]}function S(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function C(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,S(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function T(e,t,n){C(e,n[2*t],n[2*t+1])}function M(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function I(e,t,n){var r,i,o=new Array(16),a=0;for(r=1;r<=l;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=M(o[s]++,s))}}function O(e){var t;for(t=0;t<a;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function A(e){e.bi_valid>8?S(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function P(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function D(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&P(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!P(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function L(e,t,n){var r,i,a,s,l=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===r?T(e,i,t):(T(e,(a=g[i])+o+1,t),0!==(s=c[a])&&C(e,i-=v[a],s),T(e,a=E(--r),n),0!==(s=u[a])&&C(e,r-=w[a],s))}while(l<e.last_lit);T(e,256,t)}function R(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)D(e,o,n);i=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],D(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,D(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,c=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,h=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,m=t.stat_desc.max_length,g=0;for(o=0;o<=l;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(o=c[2*c[2*(r=e.heap[n])+1]+1]+1)>m&&(o=m,g++),c[2*r+1]=o,r>u||(e.bl_count[o]++,a=0,r>=f&&(a=p[r-f]),s=c[2*r],e.opt_len+=s*(o+a),h&&(e.static_len+=s*(d[2*r+1]+a)));if(0!==g){do{for(o=m-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[m]--,g-=2}while(g>0);for(o=m;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>u||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}(e,t),I(o,u,e.bl_count)}function z(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<l&&i===a||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,0===a?(l=138,c=3):i===a?(l=6,c=3):(l=7,c=4))}function j(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<l&&i===a)){if(s<c)do{T(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(T(e,i,e.bl_tree),s--),T(e,16,e.bl_tree),C(e,s-3,2)):s<=10?(T(e,17,e.bl_tree),C(e,s-3,3)):(T(e,18,e.bl_tree),C(e,s-11,7));s=0,o=i,0===a?(l=138,c=3):i===a?(l=6,c=3):(l=7,c=4)}}i(w);var N=!1;function B(e,t,n,i){C(e,0+(i?1:0),3),function(e,t,n,i){A(e),i&&(S(e,n),S(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){N||(function(){var e,t,n,r,i,o=new Array(16);for(n=0,r=0;r<28;r++)for(v[r]=n,e=0;e<1<<c[r];e++)g[n++]=r;for(g[n-1]=r,i=0,r=0;r<16;r++)for(w[r]=i,e=0;e<1<<u[r];e++)m[i++]=r;for(i>>=7;r<s;r++)for(w[r]=i<<7,e=0;e<1<<u[r]-7;e++)m[256+i++]=r;for(t=0;t<=l;t++)o[t]=0;for(e=0;e<=143;)p[2*e+1]=8,e++,o[8]++;for(;e<=255;)p[2*e+1]=9,e++,o[9]++;for(;e<=279;)p[2*e+1]=7,e++,o[7]++;for(;e<=287;)p[2*e+1]=8,e++,o[8]++;for(I(p,287,o),e=0;e<s;e++)f[2*e+1]=5,f[2*e]=M(e,5);y=new _(p,c,257,a,l),b=new _(f,u,0,s,l),x=new _(new Array(0),d,0,19,7)}(),N=!0),e.l_desc=new k(e.dyn_ltree,y),e.d_desc=new k(e.dyn_dtree,b),e.bl_desc=new k(e.bl_tree,x),e.bi_buf=0,e.bi_valid=0,O(e)},t._tr_stored_block=B,t._tr_flush_block=function(e,t,n,r){var i,a,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<o;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),R(e,e.l_desc),R(e,e.d_desc),s=function(e){var t;for(z(e,e.dyn_ltree,e.l_desc.max_code),z(e,e.dyn_dtree,e.d_desc.max_code),R(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*h[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?B(e,t,n,r):4===e.strategy||a===i?(C(e,2+(r?1:0),3),L(e,p,f)):(C(e,4+(r?1:0),3),function(e,t,n,r){var i;for(C(e,t-257,5),C(e,n-1,5),C(e,r-4,4),i=0;i<r;i++)C(e,e.bl_tree[2*h[i]+1],3);j(e,e.dyn_ltree,t-1),j(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),L(e,e.dyn_ltree,e.dyn_dtree)),O(e),r&&A(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(g[n]+o+1)]++,e.dyn_dtree[2*E(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){C(e,2,3),T(e,256,p),function(e){16===e.bi_valid?(S(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},249:function(e){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},9066:function(e){e.exports=function(e){e.data&&e.name&&(e=e.data);for(var t=!0,n="",r="",i=0;i<e.length;i++){var o=e[i];if(t)o?r+=String.fromCharCode(o):t=!1;else{if(!o)throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content");n+=String.fromCharCode(o)}}return{keyword:r,text:n}}},9686:function(e){e.exports=function(e,t){if(e=String(e),t=String(t),!/^[\x00-\xFF]+$/.test(e)||!/^[\x00-\xFF]+$/.test(t))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(e.length>=80)throw new Error('Keyword "'+e+'" is longer than the 79-character limit imposed by the PNG specification');for(var n,r=e.length+t.length+1,i=new Uint8Array(r),o=0,a=0;a<e.length;a++){if(!(n=e.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt keywords");i[o++]=n}i[o++]=0;for(var s=0;s<t.length;s++){if(!(n=t.charCodeAt(s)))throw new Error("0x00 character is not permitted in tEXt content");i[o++]=n}return{name:"tEXt",data:i}}},1194:function(e,t,n){t.encode=n(9686),t.decode=n(9066)},3434:function(e,t,n){var r=n(5714),i=n(6233);e.exports=function(e){var t,n=8,l=n;for(t=0;t<e.length;t++)n+=e[t].data.length,n+=12;var c=new Uint8Array(n);for(c[0]=137,c[1]=80,c[2]=78,c[3]=71,c[4]=13,c[5]=10,c[6]=26,c[7]=10,t=0;t<e.length;t++){var u=e[t],d=u.name,h=u.data,p=h.length,f=[d.charCodeAt(0),d.charCodeAt(1),d.charCodeAt(2),d.charCodeAt(3)];s[0]=p,c[l++]=o[3],c[l++]=o[2],c[l++]=o[1],c[l++]=o[0],c[l++]=f[0],c[l++]=f[1],c[l++]=f[2],c[l++]=f[3];for(var m=0;m<p;)c[l++]=h[m++];var g=f.concat(r(h)),v=i.buf(g);a[0]=v,c[l++]=o[3],c[l++]=o[2],c[l++]=o[1],c[l++]=o[0]}return c};var o=new Uint8Array(4),a=new Int32Array(o.buffer),s=new Uint32Array(o.buffer)},2983:function(e,t,n){var r=n(6233);e.exports=function(e){if(137!==e[0])throw new Error("Invalid .png file header");if(80!==e[1])throw new Error("Invalid .png file header");if(78!==e[2])throw new Error("Invalid .png file header");if(71!==e[3])throw new Error("Invalid .png file header");if(13!==e[4])throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(10!==e[5])throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(26!==e[6])throw new Error("Invalid .png file header");if(10!==e[7])throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var t=!1,n=[],s=8;s<e.length;){i[3]=e[s++],i[2]=e[s++],i[1]=e[s++],i[0]=e[s++];var l=a[0]+4,c=new Uint8Array(l);c[0]=e[s++],c[1]=e[s++],c[2]=e[s++],c[3]=e[s++];var u=String.fromCharCode(c[0])+String.fromCharCode(c[1])+String.fromCharCode(c[2])+String.fromCharCode(c[3]);if(!n.length&&"IHDR"!==u)throw new Error("IHDR header missing");if("IEND"===u){t=!0,n.push({name:u,data:new Uint8Array(0)});break}for(var d=4;d<l;d++)c[d]=e[s++];i[3]=e[s++],i[2]=e[s++],i[1]=e[s++],i[0]=e[s++];var h=o[0];if(r.buf(c)!==h)throw new Error("CRC values for "+u+" header do not match, PNG file is likely corrupted");var p=new Uint8Array(c.buffer.slice(4));n.push({name:u,data:p})}if(!t)throw new Error(".png file ended prematurely: no IEND header was found");return n};var i=new Uint8Array(4),o=new Int32Array(i.buffer),a=new Uint32Array(i.buffer)},1493:function(e,t,n){function r(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function i(e,t,n){const i=r(t,n);if(0===i)return r(e,t);let a=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i;return a=Math.max(0,Math.min(1,a)),r(e,o(t,n,a))}function o(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function a(e,t,n,i){const s=i||[];if(function(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let a=3*r[0]-2*n[0]-o[0];a*=a;let s=3*r[1]-2*n[1]-o[1];s*=s;let l=3*i[0]-2*o[0]-n[0];l*=l;let c=3*i[1]-2*o[1]-n[1];return c*=c,a<l&&(a=l),s<c&&(s=c),a+s}(e,t)<n){const n=e[t+0];s.length?(l=s[s.length-1],c=n,Math.sqrt(r(l,c))>1&&s.push(n)):s.push(n),s.push(e[t+3])}else{const r=.5,i=e[t+0],l=e[t+1],c=e[t+2],u=e[t+3],d=o(i,l,r),h=o(l,c,r),p=o(c,u,r),f=o(d,h,r),m=o(h,p,r),g=o(f,m,r);a([i,d,f,g],0,n,s),a([g,m,p,u],0,n,s)}var l,c;return s}function s(e,t){return l(e,0,e.length,t)}function l(e,t,n,r,o){const a=o||[],s=e[t],c=e[n-1];let u=0,d=1;for(let l=t+1;l<n-1;++l){const t=i(e[l],s,c);t>u&&(u=t,d=l)}return Math.sqrt(u)>r?(l(e,t,d+1,r,a),l(e,d,n,r,a)):(a.length||a.push(s),a.push(c)),a}function c(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++)a(e,3*o,t,r);return n&&n>0?l(r,0,r.length,n):r}n.d(t,{o:function(){return s},s:function(){return c}})},6094:function(e,t,n){var r=n(9787),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},4512:function(e,t,n){e.exports=n(6094)},8152:function(e,t,n){function r(){return Math.floor(Math.random()*2**31)}n.d(t,{W:function(){return r},k:function(){return i}});class i{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}},8234:function(e,t,n){function r(e,t,n){if(e&&e.length){const[r,i]=t,o=Math.PI/180*n,a=Math.cos(o),s=Math.sin(o);e.forEach((e=>{const[t,n]=e;e[0]=(t-r)*a-(n-i)*s+r,e[1]=(t-r)*s+(n-i)*a+i}))}}function i(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}function o(e,t){const n=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=4*t.strokeWidth),i=Math.max(i,.1);const o=[0,0];if(n)for(const s of e)r(s,o,n);const a=function(e,t){const n=[];for(const s of e){const e=[...s];e[0].join(",")!==e[e.length-1].join(",")&&e.push([e[0][0],e[0][1]]),e.length>2&&n.push(e)}const r=[];t=Math.max(t,.1);const i=[];for(const s of n)for(let e=0;e<s.length-1;e++){const t=s[e],n=s[e+1];if(t[1]!==n[1]){const e=Math.min(t[1],n[1]);i.push({ymin:e,ymax:Math.max(t[1],n[1]),x:e===t[1]?t[0]:n[0],islope:(n[0]-t[0])/(n[1]-t[1])})}}if(i.sort(((e,t)=>e.ymin<t.ymin?-1:e.ymin>t.ymin?1:e.x<t.x?-1:e.x>t.x?1:e.ymax===t.ymax?0:(e.ymax-t.ymax)/Math.abs(e.ymax-t.ymax))),!i.length)return r;let o=[],a=i[0].ymin;for(;o.length||i.length;){if(i.length){let e=-1;for(let t=0;t<i.length&&!(i[t].ymin>a);t++)e=t;i.splice(0,e+1).forEach((e=>{o.push({s:a,edge:e})}))}if(o=o.filter((e=>!(e.edge.ymax<=a))),o.sort(((e,t)=>e.edge.x===t.edge.x?0:(e.edge.x-t.edge.x)/Math.abs(e.edge.x-t.edge.x))),o.length>1)for(let e=0;e<o.length;e+=2){const t=e+1;if(t>=o.length)break;const n=o[e].edge,i=o[t].edge;r.push([[Math.round(n.x),a],[Math.round(i.x),a]])}a+=t,o.forEach((e=>{e.edge.x=e.edge.x+t*e.edge.islope}))}return r}(e,i);if(n){for(const t of e)r(t,o,-n);!function(e,t,n){const i=[];e.forEach((e=>i.push(...e))),r(i,t,n)}(a,o,-n)}return a}n.d(t,{Z:function(){return G}});class a{constructor(e){this.helper=e}fillPolygons(e,t){return this._fillPolygons(e,t)}_fillPolygons(e,t){const n=o(e,t);return{type:"fillSketch",ops:this.renderLines(n,t)}}renderLines(e,t){const n=[];for(const r of e)n.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],t));return n}}class s extends a{fillPolygons(e,t){let n=t.hachureGap;n<0&&(n=4*t.strokeWidth),n=Math.max(n,.1);const r=o(e,Object.assign({},t,{hachureGap:n})),a=Math.PI/180*t.hachureAngle,s=[],l=.5*n*Math.cos(a),c=.5*n*Math.sin(a);for(const[o,u]of r)i([o,u])&&s.push([[o[0]-l,o[1]+c],[...u]],[[o[0]+l,o[1]-c],[...u]]);return{type:"fillSketch",ops:this.renderLines(s,t)}}}class l extends a{fillPolygons(e,t){const n=this._fillPolygons(e,t),r=Object.assign({},t,{hachureAngle:t.hachureAngle+90}),i=this._fillPolygons(e,r);return n.ops=n.ops.concat(i.ops),n}}class c{constructor(e){this.helper=e}fillPolygons(e,t){const n=o(e,t=Object.assign({},t,{hachureAngle:0}));return this.dotsOnLines(n,t)}dotsOnLines(e,t){const n=[];let r=t.hachureGap;r<0&&(r=4*t.strokeWidth),r=Math.max(r,.1);let o=t.fillWeight;o<0&&(o=t.strokeWidth/2);const a=r/4;for(const s of e){const e=i(s),l=e/r,c=Math.ceil(l)-1,u=e-c*r,d=(s[0][0]+s[1][0])/2-r/4,h=Math.min(s[0][1],s[1][1]);for(let i=0;i<c;i++){const e=h+u+i*r,s=d-a+2*Math.random()*a,l=e-a+2*Math.random()*a,c=this.helper.ellipse(s,l,o,o,t);n.push(...c.ops)}}return{type:"fillSketch",ops:n}}}class u{constructor(e){this.helper=e}fillPolygons(e,t){const n=o(e,t);return{type:"fillSketch",ops:this.dashedLine(n,t)}}dashedLine(e,t){const n=t.dashOffset<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashOffset,r=t.dashGap<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashGap,o=[];return e.forEach((e=>{const a=i(e),s=Math.floor(a/(n+r)),l=(a+r-s*(n+r))/2;let c=e[0],u=e[1];c[0]>u[0]&&(c=e[1],u=e[0]);const d=Math.atan((u[1]-c[1])/(u[0]-c[0]));for(let i=0;i<s;i++){const e=i*(n+r),a=e+n,s=[c[0]+e*Math.cos(d)+l*Math.cos(d),c[1]+e*Math.sin(d)+l*Math.sin(d)],u=[c[0]+a*Math.cos(d)+l*Math.cos(d),c[1]+a*Math.sin(d)+l*Math.sin(d)];o.push(...this.helper.doubleLineOps(s[0],s[1],u[0],u[1],t))}})),o}}class d{constructor(e){this.helper=e}fillPolygons(e,t){const n=t.hachureGap<0?4*t.strokeWidth:t.hachureGap,r=t.zigzagOffset<0?n:t.zigzagOffset,i=o(e,t=Object.assign({},t,{hachureGap:n+r}));return{type:"fillSketch",ops:this.zigzagLines(i,r,t)}}zigzagLines(e,t,n){const r=[];return e.forEach((e=>{const o=i(e),a=Math.round(o/(2*t));let s=e[0],l=e[1];s[0]>l[0]&&(s=e[1],l=e[0]);const c=Math.atan((l[1]-s[1])/(l[0]-s[0]));for(let i=0;i<a;i++){const e=2*i*t,o=2*(i+1)*t,a=Math.sqrt(2*Math.pow(t,2)),l=[s[0]+e*Math.cos(c),s[1]+e*Math.sin(c)],u=[s[0]+o*Math.cos(c),s[1]+o*Math.sin(c)],d=[l[0]+a*Math.cos(c+Math.PI/4),l[1]+a*Math.sin(c+Math.PI/4)];r.push(...this.helper.doubleLineOps(l[0],l[1],d[0],d[1],n),...this.helper.doubleLineOps(d[0],d[1],u[0],u[1],n))}})),r}}const h={};var p=n(8152);const f={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function m(e,t){return e.type===t}function g(e){const t=[],n=function(e){const t=new Array;for(;""!==e;)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:0,text:RegExp.$1},e=e.substr(RegExp.$1.length);else{if(!e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];t[t.length]={type:1,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length)}return t[t.length]={type:2,text:""},t}(e);let r="BOD",i=0,o=n[i];for(;!m(o,2);){let a=0;const s=[];if("BOD"===r){if("M"!==o.text&&"m"!==o.text)return g("M0,0"+e);i++,a=f[o.text],r=o.text}else m(o,1)?a=f[r]:(i++,a=f[o.text],r=o.text);if(!(i+a<n.length))throw new Error("Path data ended short");for(let e=i;e<i+a;e++){const t=n[e];if(!m(t,1))throw new Error("Param not a number: "+r+","+t.text);s[s.length]=+t.text}if("number"!=typeof f[r])throw new Error("Bad segment: "+r);{const e={key:r,data:s};t.push(e),i+=a,o=n[i],"M"===r&&(r="L"),"m"===r&&(r="l")}}return t}function v(e){let t=0,n=0,r=0,i=0;const o=[];for(const{key:a,data:s}of e)switch(a){case"M":o.push({key:"M",data:[...s]}),[t,n]=s,[r,i]=s;break;case"m":t+=s[0],n+=s[1],o.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":o.push({key:"L",data:[...s]}),[t,n]=s;break;case"l":t+=s[0],n+=s[1],o.push({key:"L",data:[t,n]});break;case"C":o.push({key:"C",data:[...s]}),t=s[4],n=s[5];break;case"c":{const e=s.map(((e,r)=>r%2?e+n:e+t));o.push({key:"C",data:e}),t=e[4],n=e[5];break}case"Q":o.push({key:"Q",data:[...s]}),t=s[2],n=s[3];break;case"q":{const e=s.map(((e,r)=>r%2?e+n:e+t));o.push({key:"Q",data:e}),t=e[2],n=e[3];break}case"A":o.push({key:"A",data:[...s]}),t=s[5],n=s[6];break;case"a":t+=s[5],n+=s[6],o.push({key:"A",data:[s[0],s[1],s[2],s[3],s[4],t,n]});break;case"H":o.push({key:"H",data:[...s]}),t=s[0];break;case"h":t+=s[0],o.push({key:"H",data:[t]});break;case"V":o.push({key:"V",data:[...s]}),n=s[0];break;case"v":n+=s[0],o.push({key:"V",data:[n]});break;case"S":o.push({key:"S",data:[...s]}),t=s[2],n=s[3];break;case"s":{const e=s.map(((e,r)=>r%2?e+n:e+t));o.push({key:"S",data:e}),t=e[2],n=e[3];break}case"T":o.push({key:"T",data:[...s]}),t=s[0],n=s[1];break;case"t":t+=s[0],n+=s[1],o.push({key:"T",data:[t,n]});break;case"Z":case"z":o.push({key:"Z",data:[]}),t=r,n=i}return o}function y(e){const t=[];let n="",r=0,i=0,o=0,a=0,s=0,l=0;for(const{key:c,data:u}of e){switch(c){case"M":t.push({key:"M",data:[...u]}),[r,i]=u,[o,a]=u;break;case"C":t.push({key:"C",data:[...u]}),r=u[4],i=u[5],s=u[2],l=u[3];break;case"L":t.push({key:"L",data:[...u]}),[r,i]=u;break;case"H":r=u[0],t.push({key:"L",data:[r,i]});break;case"V":i=u[0],t.push({key:"L",data:[r,i]});break;case"S":{let e=0,o=0;"C"===n||"S"===n?(e=r+(r-s),o=i+(i-l)):(e=r,o=i),t.push({key:"C",data:[e,o,...u]}),s=u[0],l=u[1],r=u[2],i=u[3];break}case"T":{const[e,o]=u;let a=0,c=0;"Q"===n||"T"===n?(a=r+(r-s),c=i+(i-l)):(a=r,c=i);const d=r+2*(a-r)/3,h=i+2*(c-i)/3,p=e+2*(a-e)/3,f=o+2*(c-o)/3;t.push({key:"C",data:[d,h,p,f,e,o]}),s=a,l=c,r=e,i=o;break}case"Q":{const[e,n,o,a]=u,c=r+2*(e-r)/3,d=i+2*(n-i)/3,h=o+2*(e-o)/3,p=a+2*(n-a)/3;t.push({key:"C",data:[c,d,h,p,o,a]}),s=e,l=n,r=o,i=a;break}case"A":{const e=Math.abs(u[0]),n=Math.abs(u[1]),o=u[2],a=u[3],s=u[4],l=u[5],c=u[6];0===e||0===n?(t.push({key:"C",data:[r,i,l,c,l,c]}),r=l,i=c):r===l&&i===c||(x(r,i,l,c,e,n,o,a,s).forEach((function(e){t.push({key:"C",data:e})})),r=l,i=c);break}case"Z":t.push({key:"Z",data:[]}),r=o,i=a}n=c}return t}function b(e,t,n){return[e*Math.cos(n)-t*Math.sin(n),e*Math.sin(n)+t*Math.cos(n)]}function x(e,t,n,r,i,o,a,s,l,c){const u=(d=a,Math.PI*d/180);var d;let h=[],p=0,f=0,m=0,g=0;if(c)[p,f,m,g]=c;else{[e,t]=b(e,t,-u),[n,r]=b(n,r,-u);const a=(e-n)/2,c=(t-r)/2;let d=a*a/(i*i)+c*c/(o*o);d>1&&(d=Math.sqrt(d),i*=d,o*=d);const h=i*i,v=o*o,y=h*v-h*c*c-v*a*a,x=h*c*c+v*a*a,w=(s===l?-1:1)*Math.sqrt(Math.abs(y/x));m=w*i*c/o+(e+n)/2,g=w*-o*a/i+(t+r)/2,p=Math.asin(parseFloat(((t-g)/o).toFixed(9))),f=Math.asin(parseFloat(((r-g)/o).toFixed(9))),e<m&&(p=Math.PI-p),n<m&&(f=Math.PI-f),p<0&&(p=2*Math.PI+p),f<0&&(f=2*Math.PI+f),l&&p>f&&(p-=2*Math.PI),!l&&f>p&&(f-=2*Math.PI)}let v=f-p;if(Math.abs(v)>120*Math.PI/180){const e=f,t=n,s=r;f=l&&f>p?p+120*Math.PI/180*1:p+120*Math.PI/180*-1,h=x(n=m+i*Math.cos(f),r=g+o*Math.sin(f),t,s,i,o,a,0,l,[f,e,m,g])}v=f-p;const y=Math.cos(p),w=Math.sin(p),_=Math.cos(f),k=Math.sin(f),E=Math.tan(v/4),S=4/3*i*E,C=4/3*o*E,T=[e,t],M=[e+S*w,t-C*y],I=[n+S*k,r-C*_],O=[n,r];if(M[0]=2*T[0]-M[0],M[1]=2*T[1]-M[1],c)return[M,I,O].concat(h);{h=[M,I,O].concat(h);const e=[];for(let t=0;t<h.length;t+=3){const n=b(h[t][0],h[t][1],u),r=b(h[t+1][0],h[t+1][1],u),i=b(h[t+2][0],h[t+2][1],u);e.push([n[0],n[1],r[0],r[1],i[0],i[1]])}return e}}const w={randOffset:function(e,t){return D(e,t)},randOffsetWithRange:function(e,t,n){return P(e,t,n)},ellipse:function(e,t,n,r,i){return T(e,t,i,C(n,r,i)).opset},doubleLineOps:function(e,t,n,r,i){return L(e,t,n,r,i,!0)}};function _(e,t,n,r,i){return{type:"path",ops:L(e,t,n,r,i)}}function k(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let t=0;t<r-1;t++)i.push(...L(e[t][0],e[t][1],e[t+1][0],e[t+1][1],n));return t&&i.push(...L(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}return 2===r?_(e[0][0],e[0][1],e[1][0],e[1][1],n):{type:"path",ops:[]}}function E(e,t,n,r,i){return function(e,t){return k(e,!0,t)}([[e,t],[e+n,t],[e+n,t+r],[e,t+r]],i)}function S(e,t){let n=z(e,1*(1+.2*t.roughness),t);if(!t.disableMultiStroke){const r=z(e,1.5*(1+.22*t.roughness),function(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}(t));n=n.concat(r)}return{type:"path",ops:n}}function C(e,t,n){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),o=2*Math.PI/i;let a=Math.abs(e/2),s=Math.abs(t/2);const l=1-n.curveFitting;return a+=D(a*l,n),s+=D(s*l,n),{increment:o,rx:a,ry:s}}function T(e,t,n,r){const[i,o]=N(r.increment,e,t,r.rx,r.ry,1,r.increment*P(.1,P(.4,1,n),n),n);let a=j(i,null,n);if(!n.disableMultiStroke&&0!==n.roughness){const[i]=N(r.increment,e,t,r.rx,r.ry,1.5,0,n),o=j(i,null,n);a=a.concat(o)}return{estimatedPoints:o,opset:{type:"path",ops:a}}}function M(e,t,n,r,i,o,a,s,l){const c=e,u=t;let d=Math.abs(n/2),h=Math.abs(r/2);d+=D(.01*d,l),h+=D(.01*h,l);let p=i,f=o;for(;p<0;)p+=2*Math.PI,f+=2*Math.PI;f-p>2*Math.PI&&(p=0,f=2*Math.PI);const m=2*Math.PI/l.curveStepCount,g=Math.min(m/2,(f-p)/2),v=B(g,c,u,d,h,p,f,1,l);if(!l.disableMultiStroke){const e=B(g,c,u,d,h,p,f,1.5,l);v.push(...e)}return a&&(s?v.push(...L(c,u,c+d*Math.cos(p),u+h*Math.sin(p),l),...L(c,u,c+d*Math.cos(f),u+h*Math.sin(f),l)):v.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+d*Math.cos(p),u+h*Math.sin(p)]})),{type:"path",ops:v}}function I(e,t){const n=[];for(const r of e)if(r.length){const e=t.maxRandomnessOffset||0,i=r.length;if(i>2){n.push({op:"move",data:[r[0][0]+D(e,t),r[0][1]+D(e,t)]});for(let o=1;o<i;o++)n.push({op:"lineTo",data:[r[o][0]+D(e,t),r[o][1]+D(e,t)]})}}return{type:"fillPath",ops:n}}function O(e,t){return function(e,t){let n=e.fillStyle||"hachure";if(!h[n])switch(n){case"zigzag":h[n]||(h[n]=new s(t));break;case"cross-hatch":h[n]||(h[n]=new l(t));break;case"dots":h[n]||(h[n]=new c(t));break;case"dashed":h[n]||(h[n]=new u(t));break;case"zigzag-line":h[n]||(h[n]=new d(t));break;default:n="hachure",h[n]||(h[n]=new a(t))}return h[n]}(t,w).fillPolygons(e,t)}function A(e){return e.randomizer||(e.randomizer=new p.k(e.seed||0)),e.randomizer.next()}function P(e,t,n,r=1){return n.roughness*r*(A(n)*(t-e)+e)}function D(e,t,n=1){return P(-e,e,t,n)}function L(e,t,n,r,i,o=!1){const a=o?i.disableMultiStrokeFill:i.disableMultiStroke,s=R(e,t,n,r,i,!0,!1);if(a)return s;const l=R(e,t,n,r,i,!0,!0);return s.concat(l)}function R(e,t,n,r,i,o,a){const s=Math.pow(e-n,2)+Math.pow(t-r,2),l=Math.sqrt(s);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let u=i.maxRandomnessOffset||0;u*u*100>s&&(u=l/10);const d=u/2,h=.2+.2*A(i);let p=i.bowing*i.maxRandomnessOffset*(r-t)/200,f=i.bowing*i.maxRandomnessOffset*(e-n)/200;p=D(p,i,c),f=D(f,i,c);const m=[],g=()=>D(d,i,c),v=()=>D(u,i,c),y=i.preserveVertices;return o&&(a?m.push({op:"move",data:[e+(y?0:g()),t+(y?0:g())]}):m.push({op:"move",data:[e+(y?0:D(u,i,c)),t+(y?0:D(u,i,c))]})),a?m.push({op:"bcurveTo",data:[p+e+(n-e)*h+g(),f+t+(r-t)*h+g(),p+e+2*(n-e)*h+g(),f+t+2*(r-t)*h+g(),n+(y?0:g()),r+(y?0:g())]}):m.push({op:"bcurveTo",data:[p+e+(n-e)*h+v(),f+t+(r-t)*h+v(),p+e+2*(n-e)*h+v(),f+t+2*(r-t)*h+v(),n+(y?0:v()),r+(y?0:v())]}),m}function z(e,t,n){const r=[];r.push([e[0][0]+D(t,n),e[0][1]+D(t,n)]),r.push([e[0][0]+D(t,n),e[0][1]+D(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+D(t,n),e[i][1]+D(t,n)]),i===e.length-1&&r.push([e[i][0]+D(t,n),e[i][1]+D(t,n)]);return j(r,null,n)}function j(e,t,n){const r=e.length,i=[];if(r>3){const o=[],a=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let t=1;t+2<r;t++){const n=e[t];o[0]=[n[0],n[1]],o[1]=[n[0]+(a*e[t+1][0]-a*e[t-1][0])/6,n[1]+(a*e[t+1][1]-a*e[t-1][1])/6],o[2]=[e[t+1][0]+(a*e[t][0]-a*e[t+2][0])/6,e[t+1][1]+(a*e[t][1]-a*e[t+2][1])/6],o[3]=[e[t+1][0],e[t+1][1]],i.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]]})}if(t&&2===t.length){const e=n.maxRandomnessOffset;i.push({op:"lineTo",data:[t[0]+D(e,n),t[1]+D(e,n)]})}}else 3===r?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):2===r&&i.push(...L(e[0][0],e[0][1],e[1][0],e[1][1],n));return i}function N(e,t,n,r,i,o,a,s){const l=[],c=[];if(0===s.roughness){e/=4,c.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let o=0;o<=2*Math.PI;o+=e){const e=[t+r*Math.cos(o),n+i*Math.sin(o)];l.push(e),c.push(e)}c.push([t+r*Math.cos(0),n+i*Math.sin(0)]),c.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const u=D(.5,s)-Math.PI/2;c.push([D(o,s)+t+.9*r*Math.cos(u-e),D(o,s)+n+.9*i*Math.sin(u-e)]);const d=2*Math.PI+u-.01;for(let a=u;a<d;a+=e){const e=[D(o,s)+t+r*Math.cos(a),D(o,s)+n+i*Math.sin(a)];l.push(e),c.push(e)}c.push([D(o,s)+t+r*Math.cos(u+2*Math.PI+.5*a),D(o,s)+n+i*Math.sin(u+2*Math.PI+.5*a)]),c.push([D(o,s)+t+.98*r*Math.cos(u+a),D(o,s)+n+.98*i*Math.sin(u+a)]),c.push([D(o,s)+t+.9*r*Math.cos(u+.5*a),D(o,s)+n+.9*i*Math.sin(u+.5*a)])}return[c,l]}function B(e,t,n,r,i,o,a,s,l){const c=o+D(.1,l),u=[];u.push([D(s,l)+t+.9*r*Math.cos(c-e),D(s,l)+n+.9*i*Math.sin(c-e)]);for(let d=c;d<=a;d+=e)u.push([D(s,l)+t+r*Math.cos(d),D(s,l)+n+i*Math.sin(d)]);return u.push([t+r*Math.cos(a),n+i*Math.sin(a)]),u.push([t+r*Math.cos(a),n+i*Math.sin(a)]),j(u,null,l)}function F(e,t,n,r,i,o,a,s){const l=[],c=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3];let u=[0,0];const d=s.disableMultiStroke?1:2,h=s.preserveVertices;for(let p=0;p<d;p++)0===p?l.push({op:"move",data:[a[0],a[1]]}):l.push({op:"move",data:[a[0]+(h?0:D(c[0],s)),a[1]+(h?0:D(c[0],s))]}),u=h?[i,o]:[i+D(c[p],s),o+D(c[p],s)],l.push({op:"bcurveTo",data:[e+D(c[p],s),t+D(c[p],s),n+D(c[p],s),r+D(c[p],s),u[0],u[1]]});return l}function V(e){return[...e]}var U=n(1493);const $="none";class Z{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return(0,p.W)()}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,t,n){return{shape:e,sets:t||[],options:n||this.defaultOptions}}line(e,t,n,r,i){const o=this._o(i);return this._d("line",[_(e,t,n,r,o)],o)}rectangle(e,t,n,r,i){const o=this._o(i),a=[],s=E(e,t,n,r,o);if(o.fill){const i=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];"solid"===o.fillStyle?a.push(I([i],o)):a.push(O([i],o))}return o.stroke!==$&&a.push(s),this._d("rectangle",a,o)}ellipse(e,t,n,r,i){const o=this._o(i),a=[],s=C(n,r,o),l=T(e,t,o,s);if(o.fill)if("solid"===o.fillStyle){const n=T(e,t,o,s).opset;n.type="fillPath",a.push(n)}else a.push(O([l.estimatedPoints],o));return o.stroke!==$&&a.push(l.opset),this._d("ellipse",a,o)}circle(e,t,n,r){const i=this.ellipse(e,t,n,n,r);return i.shape="circle",i}linearPath(e,t){const n=this._o(t);return this._d("linearPath",[k(e,!1,n)],n)}arc(e,t,n,r,i,o,a=!1,s){const l=this._o(s),c=[],u=M(e,t,n,r,i,o,a,!0,l);if(a&&l.fill)if("solid"===l.fillStyle){const a=Object.assign({},l);a.disableMultiStroke=!0;const s=M(e,t,n,r,i,o,!0,!1,a);s.type="fillPath",c.push(s)}else c.push(function(e,t,n,r,i,o,a){const s=e,l=t;let c=Math.abs(n/2),u=Math.abs(r/2);c+=D(.01*c,a),u+=D(.01*u,a);let d=i,h=o;for(;d<0;)d+=2*Math.PI,h+=2*Math.PI;h-d>2*Math.PI&&(d=0,h=2*Math.PI);const p=(h-d)/a.curveStepCount,f=[];for(let m=d;m<=h;m+=p)f.push([s+c*Math.cos(m),l+u*Math.sin(m)]);return f.push([s+c*Math.cos(h),l+u*Math.sin(h)]),f.push([s,l]),O([f],a)}(e,t,n,r,i,o,l));return l.stroke!==$&&c.push(u),this._d("arc",c,l)}curve(e,t){const n=this._o(t),r=[],i=S(e,n);if(n.fill&&n.fill!==$&&e.length>=3){const t=function(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(3===n)r.push(V(e[0]),V(e[1]),V(e[2]),V(e[2]));else{const n=[];n.push(e[0],e[0]);for(let t=1;t<e.length;t++)n.push(e[t]),t===e.length-1&&n.push(e[t]);const i=[],o=1-t;r.push(V(n[0]));for(let e=1;e+2<n.length;e++){const t=n[e];i[0]=[t[0],t[1]],i[1]=[t[0]+(o*n[e+1][0]-o*n[e-1][0])/6,t[1]+(o*n[e+1][1]-o*n[e-1][1])/6],i[2]=[n[e+1][0]+(o*n[e][0]-o*n[e+2][0])/6,n[e+1][1]+(o*n[e][1]-o*n[e+2][1])/6],i[3]=[n[e+1][0],n[e+1][1]],r.push(i[1],i[2],i[3])}}return r}(e),i=(0,U.s)(t,10,(1+n.roughness)/2);"solid"===n.fillStyle?r.push(I([i],n)):r.push(O([i],n))}return n.stroke!==$&&r.push(i),this._d("curve",r,n)}polygon(e,t){const n=this._o(t),r=[],i=k(e,!0,n);return n.fill&&("solid"===n.fillStyle?r.push(I([e],n)):r.push(O([e],n))),n.stroke!==$&&r.push(i),this._d("polygon",r,n)}path(e,t){const n=this._o(t),r=[];if(!e)return this._d("path",r,n);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const i=n.fill&&"transparent"!==n.fill&&n.fill!==$,o=n.stroke!==$,a=!!(n.simplification&&n.simplification<1),s=function(e,t,n){const r=y(v(g(e))),i=[];let o=[],a=[0,0],s=[];const l=()=>{s.length>=4&&o.push(...(0,U.s)(s,t)),s=[]},c=()=>{l(),o.length&&(i.push(o),o=[])};for(const{key:d,data:h}of r)switch(d){case"M":c(),a=[h[0],h[1]],o.push(a);break;case"L":l(),o.push([h[0],h[1]]);break;case"C":if(!s.length){const e=o.length?o[o.length-1]:a;s.push([e[0],e[1]])}s.push([h[0],h[1]]),s.push([h[2],h[3]]),s.push([h[4],h[5]]);break;case"Z":l(),o.push([a[0],a[1]])}if(c(),!n)return i;const u=[];for(const d of i){const e=(0,U.o)(d,n);e.length&&u.push(e)}return u}(e,1,a?4-4*n.simplification:(1+n.roughness)/2);return i&&("solid"===n.fillStyle?r.push(I(s,n)):r.push(O(s,n))),o&&(a?s.forEach((e=>{r.push(k(e,!1,n))})):r.push(function(e,t){const n=y(v(g(e))),r=[];let i=[0,0],o=[0,0];for(const{key:a,data:s}of n)switch(a){case"M":{const e=1*(t.maxRandomnessOffset||0),n=t.preserveVertices;r.push({op:"move",data:s.map((r=>r+(n?0:D(e,t))))}),o=[s[0],s[1]],i=[s[0],s[1]];break}case"L":r.push(...L(o[0],o[1],s[0],s[1],t)),o=[s[0],s[1]];break;case"C":{const[e,n,i,a,l,c]=s;r.push(...F(e,n,i,a,l,c,o,t)),o=[l,c];break}case"Z":r.push(...L(o[0],o[1],i[0],i[1],t)),o=[i[0],i[1]]}return{type:"path",ops:r}}(e,n))),this._d("path",r,n)}opsToPath(e,t){let n="";for(const r of e.ops){const e="number"==typeof t&&t>=0?r.data.map((e=>+e.toFixed(t))):r.data;switch(r.op){case"move":n+=`M${e[0]} ${e[1]} `;break;case"bcurveTo":n+=`C${e[0]} ${e[1]}, ${e[2]} ${e[3]}, ${e[4]} ${e[5]} `;break;case"lineTo":n+=`L${e[0]} ${e[1]} `}}return n.trim()}toPaths(e){const t=e.sets||[],n=e.options||this.defaultOptions,r=[];for(const i of t){let e=null;switch(i.type){case"path":e={d:this.opsToPath(i),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:$};break;case"fillPath":e={d:this.opsToPath(i),stroke:$,strokeWidth:0,fill:n.fill||$};break;case"fillSketch":e=this.fillSketch(i,n)}e&&r.push(e)}return r}fillSketch(e,t){let n=t.fillWeight;return n<0&&(n=t.strokeWidth/2),{d:this.opsToPath(e),stroke:t.fill||$,strokeWidth:n,fill:$}}}class H{constructor(e,t){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new Z(t)}draw(e){const t=e.sets||[],n=e.options||this.getDefaultOptions(),r=this.ctx,i=e.options.fixedDecimalPlaceDigits;for(const o of t)switch(o.type){case"path":r.save(),r.strokeStyle="none"===n.stroke?"transparent":n.stroke,r.lineWidth=n.strokeWidth,n.strokeLineDash&&r.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(r.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(r,o,i),r.restore();break;case"fillPath":{r.save(),r.fillStyle=n.fill||"";const t="curve"===e.shape||"polygon"===e.shape||"path"===e.shape?"evenodd":"nonzero";this._drawToContext(r,o,i,t),r.restore();break}case"fillSketch":this.fillSketch(r,o,n)}}fillSketch(e,t,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2),e.save(),n.fillLineDash&&e.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(e.lineDashOffset=n.fillLineDashOffset),e.strokeStyle=n.fill||"",e.lineWidth=r,this._drawToContext(e,t,n.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,t,n,r="nonzero"){e.beginPath();for(const i of t.ops){const t="number"==typeof n&&n>=0?i.data.map((e=>+e.toFixed(n))):i.data;switch(i.op){case"move":e.moveTo(t[0],t[1]);break;case"bcurveTo":e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]);break;case"lineTo":e.lineTo(t[0],t[1])}}"fillPath"===t.type?e.fill(r):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,t,n,r,i){const o=this.gen.line(e,t,n,r,i);return this.draw(o),o}rectangle(e,t,n,r,i){const o=this.gen.rectangle(e,t,n,r,i);return this.draw(o),o}ellipse(e,t,n,r,i){const o=this.gen.ellipse(e,t,n,r,i);return this.draw(o),o}circle(e,t,n,r){const i=this.gen.circle(e,t,n,r);return this.draw(i),i}linearPath(e,t){const n=this.gen.linearPath(e,t);return this.draw(n),n}polygon(e,t){const n=this.gen.polygon(e,t);return this.draw(n),n}arc(e,t,n,r,i,o,a=!1,s){const l=this.gen.arc(e,t,n,r,i,o,a,s);return this.draw(l),l}curve(e,t){const n=this.gen.curve(e,t);return this.draw(n),n}path(e,t){const n=this.gen.path(e,t);return this.draw(n),n}}const W="http://www.w3.org/2000/svg";class q{constructor(e,t){this.svg=e,this.gen=new Z(t)}draw(e){const t=e.sets||[],n=e.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,i=r.createElementNS(W,"g"),o=e.options.fixedDecimalPlaceDigits;for(const a of t){let t=null;switch(a.type){case"path":t=r.createElementNS(W,"path"),t.setAttribute("d",this.opsToPath(a,o)),t.setAttribute("stroke",n.stroke),t.setAttribute("stroke-width",n.strokeWidth+""),t.setAttribute("fill","none"),n.strokeLineDash&&t.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&t.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":t=r.createElementNS(W,"path"),t.setAttribute("d",this.opsToPath(a,o)),t.setAttribute("stroke","none"),t.setAttribute("stroke-width","0"),t.setAttribute("fill",n.fill||""),"curve"!==e.shape&&"polygon"!==e.shape||t.setAttribute("fill-rule","evenodd");break;case"fillSketch":t=this.fillSketch(r,a,n)}t&&i.appendChild(t)}return i}fillSketch(e,t,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2);const i=e.createElementNS(W,"path");return i.setAttribute("d",this.opsToPath(t,n.fixedDecimalPlaceDigits)),i.setAttribute("stroke",n.fill||""),i.setAttribute("stroke-width",r+""),i.setAttribute("fill","none"),n.fillLineDash&&i.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&i.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),i}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,t){return this.gen.opsToPath(e,t)}line(e,t,n,r,i){const o=this.gen.line(e,t,n,r,i);return this.draw(o)}rectangle(e,t,n,r,i){const o=this.gen.rectangle(e,t,n,r,i);return this.draw(o)}ellipse(e,t,n,r,i){const o=this.gen.ellipse(e,t,n,r,i);return this.draw(o)}circle(e,t,n,r){const i=this.gen.circle(e,t,n,r);return this.draw(i)}linearPath(e,t){const n=this.gen.linearPath(e,t);return this.draw(n)}polygon(e,t){const n=this.gen.polygon(e,t);return this.draw(n)}arc(e,t,n,r,i,o,a=!1,s){const l=this.gen.arc(e,t,n,r,i,o,a,s);return this.draw(l)}curve(e,t){const n=this.gen.curve(e,t);return this.draw(n)}path(e,t){const n=this.gen.path(e,t);return this.draw(n)}}var G={canvas:(e,t)=>new H(e,t),svg:(e,t)=>new q(e,t),generator:e=>new Z(e),newSeed:()=>Z.newSeed()}},5714:function(e){e.exports=function(e,t,n){var r=[],i=e.length;if(0===i)return r;var o=t<0?Math.max(0,t+i):t||0;for(void 0!==n&&(i=n<0?n+i:n);i-- >o;)r[i-o]=e[i];return r}},5422:function(e,t,n){var r=n(487),i=n.n(r),o=n(631),a=n.n(o),s=n(2052),l=n.n(s),c=n(4010),u=n.n(c),d=n(1469),h=n.n(d),p=n(9329),f=n.n(p),m=n(2044),g={};g.styleTagTransform=f(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=h(),i()(m.Z,g),m.Z&&m.Z.locals&&m.Z.locals},487:function(e){var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},a=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],u=o[c]||0,d="".concat(c," ").concat(u);o[c]=u+1;var h=n(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=i(p,r);r.byIndex=s,t.splice(s,0,{identifier:d,updater:f,references:1})}a.push(d)}return a}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var s=n(o[a]);t[s].references--}for(var l=r(e,i),c=0;c<o.length;c++){var u=n(o[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=l}}},2052:function(e){var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},1469:function(e){e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},4010:function(e,t,n){e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},631:function(e){e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},9329:function(e){e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},2173:function(e,t,n){var r=n(9787),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,a=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return s((function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})}),[e,n,t]),a((function(){return c(i)&&u({inst:i}),e((function(){c(i)&&u({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},5917:function(e,t,n){var r=n(9787),i=n(1374),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c((function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(a=e,s=n)}var a,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var p=a(e,d[0],d[1]);return l((function(){h.hasValue=!0,h.value=p}),[p]),u(p),p}},1374:function(e,t,n){e.exports=n(2173)},5668:function(e,t,n){e.exports=n(5917)},940:function(e,t,n){var r={"./ar-SA.json":[7822,2091],"./bg-BG.json":[1203,1628],"./bn-BD.json":[8525,7429],"./ca-ES.json":[510,5130],"./cs-CZ.json":[7605,6265],"./da-DK.json":[2392,1790],"./de-DE.json":[2853,3082],"./el-GR.json":[9876,1513],"./en.json":[1463],"./es-ES.json":[9952,8759],"./eu-ES.json":[5658,8081],"./fa-IR.json":[3747,5330],"./fi-FI.json":[9490,3512],"./fr-FR.json":[7830,3682],"./gl-ES.json":[5199,2943],"./he-IL.json":[1994,2312],"./hi-IN.json":[4646,9828],"./hu-HU.json":[6373,7368],"./id-ID.json":[3247,3808],"./it-IT.json":[3257,6239],"./ja-JP.json":[198,1204],"./kab-KAB.json":[228,9551],"./kk-KZ.json":[8972,22],"./ko-KR.json":[7596,6844],"./ku-TR.json":[2508,3031],"./lt-LT.json":[3755,8340],"./lv-LV.json":[2327,6768],"./mr-IN.json":[5297,3397],"./my-MM.json":[7704,1477],"./nb-NO.json":[1167,2359],"./nl-NL.json":[290,3024],"./nn-NO.json":[4481,3885],"./oc-FR.json":[2284,1690],"./pa-IN.json":[5383,3162],"./percentages.json":[4451],"./pl-PL.json":[3661,3674],"./pt-BR.json":[8881,3721],"./pt-PT.json":[5622,5395],"./ro-RO.json":[2013,5089],"./ru-RU.json":[2253,8124],"./si-LK.json":[5497,1302],"./sk-SK.json":[4570,8750],"./sl-SI.json":[1984,6071],"./sv-SE.json":[6006,8534],"./ta-IN.json":[3952,2404],"./th-TH.json":[2596,537],"./tr-TR.json":[7315,4977],"./uk-UA.json":[334,7759],"./vi-VN.json":[456,4e3],"./zh-CN.json":[1037,4680],"./zh-HK.json":[5334,7920],"./zh-TW.json":[931,3421]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(i,19)}))}i.keys=function(){return Object.keys(r)},i.id=940,e.exports=i},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},6479:function(e,t,n){var r=n(7316);e.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},7316:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}},4295:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o),s=n(1667),l=n.n(s),c=new URL(n(3940),n.b),u=new URL(n(3147),n.b),d=new URL(n(8303),n.b),h=new URL(n(1273),n.b),p=new URL(n(9577),n.b),f=new URL(n(9729),n.b),m=a()(i()),g=l()(c),v=l()(u),y=l()(d),b=l()(h),x=l()(p),w=l()(f);m.push([e.id,'@font-face{font-family:"Virgil";src:url('+g+');font-display:swap}@font-face{font-family:"Cascadia";src:url('+v+');font-display:swap}@font-face{font-family:"Assistant";src:url('+y+');font-display:swap;font-weight:400}@font-face{font-family:"Assistant";src:url('+b+');font-display:swap;font-weight:500}@font-face{font-family:"Assistant";src:url('+x+');font-display:swap;font-weight:600}@font-face{font-family:"Assistant";src:url('+w+");font-display:swap;font-weight:700}",""]),t.Z=m},6086:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".zoom-actions,.undo-redo-buttons{background-color:var(--island-bg-color);border-radius:var(--border-radius-lg)}.zoom-button,.undo-redo-buttons button{border:1px solid var(--default-border-color) !important;border-radius:0 !important;background-color:rgba(0,0,0,0) !important;font-size:.875rem !important;width:var(--lg-button-size);height:var(--lg-button-size)}.zoom-button svg,.undo-redo-buttons button svg{width:var(--lg-icon-size) !important;height:var(--lg-icon-size) !important}.zoom-button .ToolIcon__icon,.undo-redo-buttons button .ToolIcon__icon{width:100%;height:100%}.reset-zoom-button{border-left:0 !important;border-right:0 !important;padding:0 .625rem !important;width:3.75rem !important;justify-content:center;color:var(--text-primary-color)}.zoom-out-button{border-top-left-radius:var(--border-radius-lg) !important;border-bottom-left-radius:var(--border-radius-lg) !important}:root[dir=rtl] .zoom-out-button{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.zoom-out-button .ToolIcon__icon{border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}.zoom-in-button{border-top-right-radius:var(--border-radius-lg) !important;border-bottom-right-radius:var(--border-radius-lg) !important}:root[dir=rtl] .zoom-in-button{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.zoom-in-button .ToolIcon__icon{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.undo-redo-buttons .undo-button-container button{border-top-left-radius:var(--border-radius-lg) !important;border-bottom-left-radius:var(--border-radius-lg) !important;border-right:0 !important}:root[dir=rtl] .undo-redo-buttons .undo-button-container button{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.undo-redo-buttons .undo-button-container button .ToolIcon__icon{border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}.undo-redo-buttons .redo-button-container button{border-top-right-radius:var(--border-radius-lg) !important;border-bottom-right-radius:var(--border-radius-lg) !important}:root[dir=rtl] .undo-redo-buttons .redo-button-container button{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.undo-redo-buttons .redo-button-container button .ToolIcon__icon{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}",""]),t.Z=a},3729:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .Avatar{width:1.25rem;height:1.25rem;position:relative;border-radius:100%;outline-offset:2px;display:flex;justify-content:center;align-items:center;color:#fff;cursor:pointer;font-size:.625rem;font-weight:500;line-height:1}.excalidraw .Avatar-img{width:100%;height:100%;border-radius:100%}.excalidraw .Avatar::before{content:"";position:absolute;top:-3px;right:-3px;bottom:-3px;left:-3px;border:1px solid var(--avatar-border-color);border-radius:100%}',""]),t.Z=a},3137:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o),s=n(1667),l=n.n(s),c=new URL(n(7984),n.b),u=new URL(n(1639),n.b),d=a()(i()),h=l()(c),p=l()(u);d.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw{--theme-filter: none;--button-destructive-bg-color: #ffe3e3;--button-destructive-color: #c92a2a;--button-gray-1: #e9ecef;--button-gray-2: #ced4da;--button-gray-3: #adb5bd;--button-special-active-bg-color: #ebfbee;--dialog-border-color: var(--color-gray-20);--dropdown-icon: url("+h+");--focus-highlight-color: #a5d8ff;--icon-fill-color: var(--color-gray-80);--icon-green-fill-color: #2b8a3e;--default-bg-color: #ffffff;--input-bg-color: #ffffff;--input-border-color: #ced4da;--input-hover-bg-color: #f1f3f5;--input-label-color: #495057;--island-bg-color: rgba(255, 255, 255, 0.96);--keybinding-color: var(--color-gray-40);--link-color: #1c7ed6;--overlay-bg-color: rgba(255, 255, 255, 0.88);--popup-bg-color: #ffffff;--popup-secondary-bg-color: #f1f3f5;--popup-text-color: #000000;--popup-text-inverted-color: #ffffff;--sab: env(safe-area-inset-bottom);--sal: env(safe-area-inset-left);--sar: env(safe-area-inset-right);--sat: env(safe-area-inset-top);--select-highlight-color: #339af0;--shadow-island: 0px 7px 14px rgba(0, 0, 0, 0.05), 0px 0px 3.12708px rgba(0, 0, 0, 0.0798), 0px 0px 0.931014px rgba(0, 0, 0, 0.1702);--button-hover-bg: var(--color-gray-10);--default-border-color: var(--color-gray-30);--default-button-size: 2rem;--default-icon-size: 1rem;--lg-button-size: 2.25rem;--lg-icon-size: 1rem;--editor-container-padding: 1rem;--scrollbar-thumb: var(--button-gray-2);--scrollbar-thumb-hover: var(--button-gray-3);--modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--avatar-border-color: var(--color-gray-20);--sidebar-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--sidebar-border-color: var(--color-gray-20);--sidebar-bg-color: #fff;--library-dropdown-shadow: 0px 15px 6px rgba(0, 0, 0, 0.01), 0px 8px 5px rgba(0, 0, 0, 0.05), 0px 4px 4px rgba(0, 0, 0, 0.09), 0px 1px 2px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);--space-factor: 0.25rem;--text-primary-color: var(--color-gray-80);--color-selection: #6965db;--color-primary: #6965db;--color-primary-darker: #5b57d1;--color-primary-darkest: #4a47b1;--color-primary-light: #e3e2fe;--color-gray-10: #f5f5f5;--color-gray-20: #ebebeb;--color-gray-30: #d6d6d6;--color-gray-40: #b8b8b8;--color-gray-50: #999999;--color-gray-60: #7a7a7a;--color-gray-70: #5c5c5c;--color-gray-80: #3d3d3d;--color-gray-85: #242424;--color-gray-90: #1e1e1e;--color-gray-100: #121212;--color-warning: #fceeca;--color-text-warning: var(--text-primary-color);--color-danger: #db6965;--color-promo: #e70078;--border-radius-md: 0.375rem;--border-radius-lg: 0.5rem}@media screen and (min-device-width: 1921px){.excalidraw{--lg-button-size: 2.5rem;--lg-icon-size: 1.25rem;--default-button-size: 2.25rem;--default-icon-size: 1.25rem}}.excalidraw.theme--dark.theme--dark-background-none{background:none}.excalidraw.theme--dark{--theme-filter: invert(93%) hue-rotate(180deg);--button-destructive-bg-color: #5a0000;--button-destructive-color: #ffa8a8;--button-gray-1: #363636;--button-gray-2: #272727;--button-gray-3: #222;--button-special-active-bg-color: #204624;--dialog-border-color: var(--color-gray-80);--dropdown-icon: url("+p+");--focus-highlight-color: #228be6;--icon-fill-color: var(--color-gray-40);--icon-green-fill-color: #69db7c;--default-bg-color: #121212;--input-bg-color: #121212;--input-border-color: #2e2e2e;--input-hover-bg-color: #181818;--input-label-color: #e9ecef;--island-bg-color: #262627;--keybinding-color: var(--color-gray-60);--link-color: #4dabf7;--overlay-bg-color: rgba(52, 58, 64, 0.12);--popup-bg-color: #2c2c2c;--popup-secondary-bg-color: #222;--popup-text-color: #ced4da;--popup-text-inverted-color: #2c2c2c;--select-highlight-color: #4dabf7;--text-primary-color: var(--color-gray-40);--button-hover-bg: var(--color-gray-80);--default-border-color: var(--color-gray-80);--shadow-island: 0px 13px 33px rgba(0, 0, 0, 0.07), 0px 4.13px 9.94853px rgba(0, 0, 0, 0.0456112), 0px 1.13px 4.13211px rgba(0, 0, 0, 0.035), 0px 0.769896px 1.4945px rgba(0, 0, 0, 0.0243888);--modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--avatar-border-color: var(--color-gray-85);--sidebar-border-color: var(--color-gray-85);--sidebar-bg-color: #191919;--scrollbar-thumb: #343a40;--scrollbar-thumb-hover: #495057;--color-selection: #3530c4;--color-primary: #a8a5ff;--color-primary-darker: #b2aeff;--color-primary-darkest: #beb9ff;--color-primary-light: #4f4d6f;--color-text-warning: var(--color-gray-80);--color-danger: #ffa8a5;--color-promo: #d297ff}.excalidraw .excalidraw-button{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--text-primary-color))}.excalidraw .excalidraw-button svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.excalidraw .excalidraw-button:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--default-border-color))}.excalidraw .excalidraw-button:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.excalidraw .excalidraw-button.active{background-color:var(--color-primary-light);border-color:var(--color-primary-light)}.excalidraw .excalidraw-button.active:hover{background-color:var(--color-primary-light)}.excalidraw .excalidraw-button.active svg{color:var(--button-color, var(--color-primary-darker))}",""]),t.Z=d},4241:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .Card{display:flex;flex-direction:column;align-items:center;max-width:290px;margin:1em;text-align:center}.excalidraw .Card .Card-icon{font-size:2.6em;display:flex;flex:0 0 auto;padding:1.4rem;border-radius:50%;background:var(--card-color);color:#fff}.excalidraw .Card .Card-icon svg{width:2.8rem;height:2.8rem}.excalidraw .Card .Card-details{font-size:.96em;min-height:90px;padding:0 1em;margin-bottom:auto}.excalidraw .Card .Card-button.ToolIcon_type_button{height:2.5rem;margin-top:1em;margin-bottom:.3em;background-color:var(--card-color)}.excalidraw .Card .Card-button.ToolIcon_type_button:hover{background-color:var(--card-color-darker)}.excalidraw .Card .Card-button.ToolIcon_type_button:active{background-color:var(--card-color-darkest)}.excalidraw .Card .Card-button.ToolIcon_type_button .ToolIcon__label{color:#fff}.excalidraw .Card .Card-button.ToolIcon_type_button .Spinner{--spinner-color: #fff}",""]),t.Z=a},6029:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .Checkbox{margin:4px .3em;display:flex;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.excalidraw .Checkbox:hover:not(.is-checked) .Checkbox-box:not(:focus){box-shadow:0 0 0 2px #4dabf7}.excalidraw .Checkbox:hover:not(.is-checked) .Checkbox-box:not(:focus) svg{display:block;opacity:.3}.excalidraw .Checkbox:active .Checkbox-box{box-shadow:0 0 2px 1px inset #1c7ed6 !important}.excalidraw .Checkbox:hover .Checkbox-box{background-color:rgba(208,235,255,.2)}.excalidraw .Checkbox.is-checked .Checkbox-box{background-color:#d0ebff}.excalidraw .Checkbox.is-checked .Checkbox-box svg{display:block}.excalidraw .Checkbox.is-checked:hover .Checkbox-box{background-color:#a5d8ff}.excalidraw .Checkbox .Checkbox-box{width:22px;height:22px;padding:0;flex:0 0 auto;margin:0 1em;display:flex;align-items:center;justify-content:center;box-shadow:0 0 0 2px #1c7ed6;background-color:rgba(0,0,0,0);border-radius:4px;color:#1c7ed6;border:0}.excalidraw .Checkbox .Checkbox-box:focus{box-shadow:0 0 0 3px #1c7ed6}.excalidraw .Checkbox .Checkbox-box svg{display:none;width:16px;height:16px;stroke-width:3px}.excalidraw .Checkbox .Checkbox-label{display:flex;align-items:center}.excalidraw .Checkbox .excalidraw-tooltip-icon{width:1em;height:1em}",""]),t.Z=a},2345:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o),s=n(1667),l=n.n(s),c=new URL(n(9669),n.b),u=a()(i()),d=l()(c);u.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .color-picker{background:var(--popup-bg-color);border:0 solid rgba(255,255,255,.25);box-shadow:rgba(0,0,0,.25) 0 1px 4px;border-radius:4px;position:absolute}:root[dir=ltr] .excalidraw .color-picker{left:-5.5px}:root[dir=rtl] .excalidraw .color-picker{right:-5.5px}.excalidraw .color-picker-control-container{display:grid;grid-template-columns:auto 1fr;align-items:center;-webkit-column-gap:.5rem;column-gap:.5rem}.excalidraw .color-picker-control-container+.popover{position:static}.excalidraw .color-picker-popover-container{margin-top:-0.25rem}:root[dir=ltr] .excalidraw .color-picker-popover-container{margin-left:.5rem}:root[dir=rtl] .excalidraw .color-picker-popover-container{margin-left:-3rem}.excalidraw .color-picker-triangle{width:0;height:0;border-style:solid;border-width:0 9px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) var(--popup-bg-color);position:absolute;top:10px}:root[dir=ltr] .excalidraw .color-picker-triangle{-webkit-transform:rotate(270deg);transform:rotate(270deg);left:-14px}:root[dir=rtl] .excalidraw .color-picker-triangle{-webkit-transform:rotate(90deg);transform:rotate(90deg);right:-14px}.excalidraw .color-picker-triangle-shadow{border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,.1)}:root[dir=ltr] .excalidraw .color-picker-triangle-shadow{left:-14px}:root[dir=rtl] .excalidraw .color-picker-triangle-shadow{right:-16px}.excalidraw .color-picker-content--default{padding:.5rem;display:grid;grid-template-columns:repeat(5, auto);grid-gap:.5rem;border-radius:4px}.excalidraw .color-picker-content--default:focus{outline:none;box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .color-picker-content--canvas{display:flex;flex-direction:column;padding:.25rem}.excalidraw .color-picker-content--canvas-title{color:#868e96;font-size:12px;padding:0 .25rem}.excalidraw .color-picker-content--canvas-colors{padding:.5rem 0}.excalidraw .color-picker-content--canvas-colors .color-picker-swatch{margin:0 .25rem}.excalidraw .color-picker-content .color-input-container{grid-column:1/span 5}.excalidraw .color-picker-swatch{position:relative;height:1.875rem;width:1.875rem;cursor:pointer;border-radius:4px;margin:0;box-sizing:border-box;border:1px solid #ddd;background-color:currentColor !important;-webkit-filter:var(--theme-filter);filter:var(--theme-filter)}.excalidraw .color-picker-swatch:focus{box-shadow:0 0 4px 1px currentColor;border-color:var(--select-highlight-color)}.excalidraw .color-picker-transparent{border-radius:4px;box-shadow:rgba(0,0,0,.1) 0 0 0 1px inset;position:absolute;top:0;right:0;bottom:0;left:0}.excalidraw .color-picker-transparent,.excalidraw .color-picker-label-swatch{background:url("+d+') left center}.excalidraw .color-picker-hash{height:var(--default-button-size);flex-shrink:0;padding:.5rem .5rem .5rem .75rem;border:1px solid var(--default-border-color);border-right:0;box-sizing:border-box;color:var(--input-label-color);display:flex;align-items:center;justify-content:center;position:relative}:root[dir=ltr] .excalidraw .color-picker-hash{border-radius:var(--border-radius-lg) 0 0 var(--border-radius-lg)}:root[dir=rtl] .excalidraw .color-picker-hash{border-radius:0 var(--border-radius-lg) var(--border-radius-lg) 0;border-right:1px solid var(--default-border-color);border-left:0}.excalidraw .color-input-container{display:flex}.excalidraw .color-input-container:focus-within{box-shadow:0 0 0 1px var(--color-primary-darkest);border-radius:var(--border-radius-lg)}.excalidraw .color-picker-input{box-sizing:border-box;width:100%;margin:0;font-size:.875rem;background-color:rgba(0,0,0,0);color:var(--text-primary-color);border:0;outline:none;height:var(--default-button-size);border:1px solid var(--default-border-color);border-left:0;letter-spacing:.4px;padding:.5rem;padding-left:.25rem;-webkit-appearance:none;appearance:none}:root[dir=ltr] .excalidraw .color-picker-input{border-radius:0 var(--border-radius-lg) var(--border-radius-lg) 0}:root[dir=rtl] .excalidraw .color-picker-input{border-radius:var(--border-radius-lg) 0 0 var(--border-radius-lg);border-left:1px solid var(--default-border-color);border-right:0}.excalidraw .color-picker-input:focus-visible{box-shadow:none}.excalidraw .color-picker-label-swatch-container{border:1px solid var(--default-border-color);border-radius:var(--border-radius-lg);width:var(--default-button-size);height:var(--default-button-size);box-sizing:border-box;overflow:hidden}.excalidraw .color-picker-label-swatch{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--text-primary-color));background-color:var(--swatch-color) !important;overflow:hidden;position:relative;-webkit-filter:var(--theme-filter);filter:var(--theme-filter);border:0 !important}.excalidraw .color-picker-label-swatch svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.excalidraw .color-picker-label-swatch:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--default-border-color))}.excalidraw .color-picker-label-swatch:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.excalidraw .color-picker-label-swatch.active{background-color:var(--color-primary-light);border-color:var(--color-primary-light)}.excalidraw .color-picker-label-swatch.active:hover{background-color:var(--color-primary-light)}.excalidraw .color-picker-label-swatch.active svg{color:var(--button-color, var(--color-primary-darker))}.excalidraw .color-picker-label-swatch:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:var(--swatch-color)}.excalidraw .color-picker-keybinding{position:absolute;bottom:2px;font-size:.7em}:root[dir=ltr] .excalidraw .color-picker-keybinding{right:2px}:root[dir=rtl] .excalidraw .color-picker-keybinding{left:2px}.excalidraw--mobile.excalidraw .color-picker-keybinding{display:none}.excalidraw .color-picker-type-canvasBackground .color-picker-keybinding{color:#aaa}.excalidraw .color-picker-type-elementBackground .color-picker-keybinding{color:#fff}.excalidraw .color-picker-swatch[aria-label=transparent] .color-picker-keybinding{color:#aaa}.excalidraw .color-picker-type-elementStroke .color-picker-keybinding{color:#d4d4d4}.excalidraw.theme--dark .color-picker-type-elementBackground .color-picker-keybinding{color:#000}.excalidraw.theme--dark .color-picker-swatch[aria-label=transparent] .color-picker-keybinding{color:#000}',""]),t.Z=u},9393:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .confirm-dialog-buttons{display:flex;-webkit-column-gap:.5rem;column-gap:.5rem;justify-content:flex-end}",""]),t.Z=a},6578:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .context-menu{position:relative;border-radius:4px;box-shadow:0 3px 10px rgba(0,0,0,.2);padding:0;list-style:none;-webkit-user-select:none;user-select:none;margin:-0.25rem 0 0 .125rem;padding:.5rem 0;background-color:var(--popup-secondary-bg-color);border:1px solid var(--button-gray-3);cursor:default}.excalidraw .context-menu button{color:var(--popup-text-color)}.excalidraw .context-menu-item{position:relative;width:100%;min-width:9.5rem;margin:0;padding:.25rem 1rem .25rem 1.25rem;text-align:start;border-radius:0;background-color:rgba(0,0,0,0);border:none;white-space:nowrap;display:grid;grid-template-columns:1fr .2fr;align-items:center}.excalidraw .context-menu-item.checkmark::before{position:absolute;left:6px;margin-bottom:1px;content:""}.excalidraw .context-menu-item.dangerous .context-menu-item__label{color:#f03e3e}.excalidraw .context-menu-item .context-menu-item__label{justify-self:start;-webkit-margin-end:20px;margin-inline-end:20px}.excalidraw .context-menu-item .context-menu-item__shortcut{justify-self:end;opacity:.6;font-family:inherit;font-size:.7rem}.excalidraw .context-menu-item:hover{color:var(--popup-bg-color);background-color:var(--select-highlight-color)}.excalidraw .context-menu-item:hover.dangerous{background-color:#fa5252}.excalidraw .context-menu-item:hover.dangerous .context-menu-item__label{color:var(--popup-bg-color)}.excalidraw .context-menu-item:focus{z-index:1}.excalidraw--mobile.excalidraw .context-menu-item{display:block}.excalidraw--mobile.excalidraw .context-menu-item .context-menu-item__label{-webkit-margin-end:0;margin-inline-end:0}.excalidraw--mobile.excalidraw .context-menu-item .context-menu-item__shortcut{display:none}.excalidraw .context-menu-item-separator{border:none;border-top:1px solid #adb5bd}',""]),t.Z=a},9482:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .Dialog{-webkit-user-select:text;user-select:text;cursor:auto}.excalidraw .Dialog__title{margin:0;text-align:left;font-size:1.25rem;border-bottom:1px solid var(--dialog-border-color);padding:0 0 .75rem;margin-bottom:1.5rem}",""]),t.Z=a},6148:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".excalidraw .Dialog__action-button{position:relative;display:flex;-webkit-column-gap:.5rem;column-gap:.5rem;align-items:center;padding:.5rem 1.5rem;border:1px solid var(--default-border-color);background-color:rgba(0,0,0,0);height:3rem;border-radius:var(--border-radius-lg);letter-spacing:.4px;color:inherit;font-family:inherit;font-size:.875rem;font-weight:600;-webkit-user-select:none;user-select:none}.excalidraw .Dialog__action-button svg{display:block;width:1rem;height:1rem}.excalidraw .Dialog__action-button--danger{background-color:var(--color-danger);border-color:var(--color-danger);color:#fff}.excalidraw .Dialog__action-button--primary{background-color:var(--color-primary);border-color:var(--color-primary);color:#fff}.excalidraw.theme--dark .Dialog__action-button--danger{color:var(--color-gray-100)}.excalidraw.theme--dark .Dialog__action-button--primary{color:var(--color-gray-100)}",""]),t.Z=a},7955:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o),s=n(1667),l=n.n(s),c=new URL(n(9669),n.b),u=a()(i()),d=l()(c);u.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .ExportDialog__preview{--preview-padding: calc(var(--space-factor) * 4);background:url("+d+") left center;text-align:center;padding:var(--preview-padding);margin-bottom:calc(var(--space-factor)*3);display:flex;justify-content:center;align-items:center}.excalidraw .ExportDialog__preview canvas{max-width:calc(100% - var(--preview-padding)*2);max-height:25rem}.excalidraw.theme--dark .ExportDialog__preview canvas{-webkit-filter:none;filter:none}.excalidraw .ExportDialog__actions{width:100%;display:flex;grid-gap:calc(var(--space-factor)*2);align-items:top;justify-content:space-between}.excalidraw--mobile.excalidraw .ExportDialog{display:flex;flex-direction:column}.excalidraw--mobile.excalidraw .ExportDialog__actions{flex-direction:column;align-items:center}.excalidraw--mobile.excalidraw .ExportDialog__actions>*{margin-bottom:calc(var(--space-factor)*3)}.excalidraw--mobile.excalidraw .ExportDialog__preview canvas{max-height:30vh}.excalidraw--mobile.excalidraw .ExportDialog__dialog,.excalidraw--mobile.excalidraw .ExportDialog__dialog .Island{height:100%;box-sizing:border-box}.excalidraw--mobile.excalidraw .ExportDialog__dialog .Island{overflow-y:auto}.excalidraw .ExportDialog--json .ExportDialog-cards{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));justify-items:center;row-gap:2em}@media(max-width: 460px){.excalidraw .ExportDialog--json .ExportDialog-cards{grid-template-columns:repeat(auto-fit, minmax(240px, 1fr))}.excalidraw .ExportDialog--json .ExportDialog-cards .Card-details{min-height:40px}}.excalidraw .ExportDialog--json .ExportDialog-cards .ProjectName{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:1em auto;align-items:flex-start;flex-direction:column}.excalidraw .ExportDialog--json .ExportDialog-cards .ProjectName .TextInput{width:auto}.excalidraw .ExportDialog--json .ExportDialog-cards .ProjectName-label{margin:.625em 0;font-weight:bold}.excalidraw button.ExportDialog-imageExportButton{border:0;width:5rem;height:5rem;margin:0 .2em;padding:0;display:flex;align-items:center;justify-content:center;border-radius:1rem;background-color:var(--button-color);box-shadow:0 3px 5px -1px rgba(0,0,0,.28),0 6px 10px 0 rgba(0,0,0,.14);font-family:Cascadia;font-size:1.8em;color:#fff}.excalidraw button.ExportDialog-imageExportButton:hover{background-color:var(--button-color-darker)}.excalidraw button.ExportDialog-imageExportButton:active{background-color:var(--button-color-darkest);box-shadow:none}.excalidraw button.ExportDialog-imageExportButton svg{width:.9em}",""]),t.Z=u},3195:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .FixedSideContainer{position:absolute;pointer-events:none}.excalidraw .FixedSideContainer>*{pointer-events:all}.excalidraw .FixedSideContainer_side_top{left:var(--editor-container-padding);top:var(--editor-container-padding);right:var(--editor-container-padding);bottom:var(--editor-container-padding);z-index:2}.excalidraw .FixedSideContainer_side_top.zen-mode{right:42px}",""]),t.Z=a},2978:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .HelpDialog .Modal__content{max-width:960px}.excalidraw .HelpDialog h3{margin:1.5rem 0;font-weight:bold;font-size:1.125rem}.excalidraw .HelpDialog__header{display:flex;flex-wrap:wrap;gap:.75rem}.excalidraw .HelpDialog__btn{display:flex;-webkit-column-gap:.5rem;column-gap:.5rem;align-items:center;border:1px solid var(--default-border-color);padding:.625rem 1rem;border-radius:var(--border-radius-lg);color:var(--text-primary-color);font-weight:600;font-size:.75rem;letter-spacing:.4px}.excalidraw .HelpDialog__btn:hover{text-decoration:none}.excalidraw .HelpDialog__link-icon{line-height:0}.excalidraw .HelpDialog__link-icon svg{width:1rem;height:1rem}.excalidraw .HelpDialog__islands-container{display:grid;grid-column-gap:1.5rem;grid-row-gap:2rem}@media screen and (min-width: 1024px){.excalidraw .HelpDialog__islands-container{grid-template-columns:1fr 1fr}}@media screen and (min-width: 1024px){.excalidraw .HelpDialog__island--tools{grid-area:1/1/2/2}.excalidraw .HelpDialog__island--view{grid-area:2/1/3/2}.excalidraw .HelpDialog__island--editor{grid-area:1/2/3/3}}.excalidraw .HelpDialog__island h4{font-size:1rem;font-weight:bold;margin:0;margin-bottom:.625rem}.excalidraw .HelpDialog__island-content{border:1px solid var(--dialog-border-color);border-radius:var(--border-radius-lg)}.excalidraw .HelpDialog__shortcut{border-bottom:1px solid var(--dialog-border-color);padding:.375rem .75rem;display:flex;justify-content:space-between;align-items:center;font-size:.875rem;-webkit-column-gap:.5rem;column-gap:.5rem}.excalidraw .HelpDialog__shortcut:last-child{border-bottom:none}.excalidraw .HelpDialog__key-container{display:flex;align-items:center;-webkit-column-gap:.25rem;column-gap:.25rem;flex-shrink:0}.excalidraw .HelpDialog__key{display:flex;box-sizing:border-box;font-size:.625rem;background-color:var(--color-primary-light);border-radius:var(--border-radius-md);padding:.5rem;word-break:keep-all;align-items:center;font-family:inherit;line-height:1}",""]),t.Z=a},1587:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .HintViewer{pointer-events:none;box-sizing:border-box;position:absolute;display:flex;justify-content:center;left:0;top:100%;max-width:100%;width:100%;margin-top:.5rem;text-align:center;color:var(--color-gray-40);font-size:.75rem}.excalidraw--mobile.excalidraw .HintViewer{position:static;padding-right:2rem}.excalidraw .HintViewer>span{padding:.25rem}.excalidraw.theme--dark .HintViewer{color:var(--color-gray-60)}",""]),t.Z=a},9478:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .picker-container{display:inline-block;box-sizing:border-box;margin-right:.25rem}.excalidraw .picker{background:var(--popup-bg-color);border:0 solid rgba(255,255,255,.25);box-shadow:rgba(0,0,0,.25) 2px 2px 4px 2px;border-radius:4px;position:absolute}.excalidraw .picker-container button,.excalidraw .picker button{position:relative;display:flex;align-items:center;justify-content:center}.excalidraw .picker-container button:focus-visible,.excalidraw .picker button:focus-visible{outline:rgba(0,0,0,0);background-color:var(--button-gray-2)}.excalidraw .picker-container button:focus-visible svg,.excalidraw .picker button:focus-visible svg{opacity:1}.excalidraw .picker-container button:hover,.excalidraw .picker button:hover{background-color:var(--button-gray-2)}.excalidraw .picker-container button:active,.excalidraw .picker button:active{background-color:var(--button-gray-3)}.excalidraw .picker-container button:disabled,.excalidraw .picker button:disabled{cursor:not-allowed}.excalidraw .picker-container button svg,.excalidraw .picker button svg{margin:0;width:36px;height:18px;pointer-events:none}.excalidraw .picker button{padding:.25rem .28rem .35rem .25rem}.excalidraw .picker-triangle{width:0;height:0;position:relative;top:-10px;z-index:10}:root[dir=ltr] .excalidraw .picker-triangle{left:12px}:root[dir=rtl] .excalidraw .picker-triangle{right:12px}.excalidraw .picker-triangle:before{content:"";position:absolute;border-style:solid;border-width:0 9px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,.1);top:-1px}.excalidraw .picker-triangle:after{content:"";position:absolute;border-style:solid;border-width:0 9px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) var(--popup-bg-color)}.excalidraw .picker-content{padding:.5rem;display:grid;grid-template-columns:repeat(3, auto);grid-gap:.5rem;border-radius:4px}:root[dir=rtl] .excalidraw .picker-content{padding:.4rem}.excalidraw .picker-keybinding{position:absolute;bottom:2px;font-size:.7em;color:var(--keybinding-color)}:root[dir=ltr] .excalidraw .picker-keybinding{right:2px}:root[dir=rtl] .excalidraw .picker-keybinding{left:2px}.excalidraw--mobile.excalidraw .picker-keybinding{display:none}.excalidraw .picker-type-canvasBackground .picker-keybinding{color:#aaa}.excalidraw .picker-type-elementBackground .picker-keybinding{color:#fff}.excalidraw .picker-swatch[aria-label=transparent] .picker-keybinding{color:#aaa}.excalidraw .picker-type-elementStroke .picker-keybinding{color:#d4d4d4}.excalidraw.theme--dark .picker-type-elementBackground .picker-keybinding{color:#000}.excalidraw.theme--dark .picker-swatch[aria-label=transparent] .picker-keybinding{color:#000}',""]),t.Z=a},7369:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".excalidraw .Island{--padding: 0;box-sizing:border-box;background-color:var(--island-bg-color);box-shadow:var(--shadow-island);border-radius:var(--border-radius-lg);padding:calc(var(--padding)*var(--space-factor));position:relative;transition:box-shadow .5s ease-in-out}.excalidraw .Island.zen-mode{box-shadow:none}",""]),t.Z=a},1434:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .layer-ui__wrapper.animate{transition:width .1s ease-in-out}.excalidraw .layer-ui__wrapper{position:absolute;width:100%;height:100%;pointer-events:none;z-index:var(--zIndex-layerUI)}.excalidraw .layer-ui__wrapper__top-right{display:flex;gap:.75rem}.excalidraw .layer-ui__wrapper__footer{width:100%}.excalidraw .layer-ui__wrapper__footer-right{z-index:100;display:flex}.excalidraw .layer-ui__wrapper .zen-mode-transition{transition:-webkit-transform .5s ease-in-out;transition:transform .5s ease-in-out;transition:transform .5s ease-in-out, -webkit-transform .5s ease-in-out}:root[dir=ltr] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-left{-webkit-transform:translate(-999px, 0);transform:translate(-999px, 0)}:root[dir=ltr] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-right{-webkit-transform:translate(999px, 0);transform:translate(999px, 0)}:root[dir=rtl] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-left{-webkit-transform:translate(999px, 0);transform:translate(999px, 0)}:root[dir=rtl] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-right{-webkit-transform:translate(-999px, 0);transform:translate(-999px, 0)}.excalidraw .layer-ui__wrapper .zen-mode-transition.layer-ui__wrapper__footer-left--transition-bottom{-webkit-transform:translate(0, 92px);transform:translate(0, 92px)}.excalidraw .layer-ui__wrapper .disable-zen-mode{height:30px;position:absolute;bottom:10px;font-size:10px;padding:10px;font-weight:500;opacity:0;visibility:hidden;transition:visibility 0s linear 0s,opacity .5s}[dir=ltr] .excalidraw .layer-ui__wrapper .disable-zen-mode{right:15px}[dir=rtl] .excalidraw .layer-ui__wrapper .disable-zen-mode{left:15px}.excalidraw .layer-ui__wrapper .disable-zen-mode--visible{opacity:1;visibility:visible;transition:visibility 0s linear 300ms,opacity .5s;transition-delay:.8s}.excalidraw .layer-ui__wrapper .layer-ui__wrapper__footer-left,.excalidraw .layer-ui__wrapper .layer-ui__wrapper__footer-right,.excalidraw .layer-ui__wrapper .disable-zen-mode--visible{pointer-events:all}.excalidraw .layer-ui__wrapper .layer-ui__wrapper__footer-right{margin-top:auto;margin-bottom:auto}",""]),t.Z=a},2316:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.library-button{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--text-primary-color));background-color:var(--island-bg-color);width:auto;height:var(--lg-button-size);display:flex;align-items:center;gap:.5rem;line-height:0;font-size:.75rem;letter-spacing:.4px}.library-button svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.library-button:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--default-border-color))}.library-button:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.library-button.active{background-color:var(--color-primary-light);border-color:var(--color-primary-light)}.library-button.active:hover{background-color:var(--color-primary-light)}.library-button.active svg{color:var(--button-color, var(--color-primary-darker))}.library-button svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}.library-button__label{display:none}@media screen and (min-width: 1024px){.library-button__label{display:block}}",""]),t.Z=a},8923:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".excalidraw .layer-ui__library-sidebar{display:flex;flex-direction:column}.excalidraw .layer-ui__library{display:flex;flex-direction:column;flex:1 1 auto}.excalidraw .layer-ui__library .layer-ui__library-header{display:flex;align-items:center;width:100%;margin:2px 0 15px 0}.excalidraw .layer-ui__library .layer-ui__library-header .Spinner{margin-right:1rem}.excalidraw .layer-ui__library .layer-ui__library-header button{margin:0 2px}.excalidraw .layer-ui__sidebar .library-menu-items-container{height:100%;width:100%}.excalidraw .library-actions-counter{background-color:var(--color-primary);color:var(--color-primary-light);font-weight:bold;display:flex;align-items:center;justify-content:center;border-radius:50%;width:1rem;height:1rem;position:absolute;bottom:-0.25rem;right:-0.25rem;font-size:.625rem;pointer-events:none}.excalidraw .layer-ui__library-message{padding:2rem;min-width:200px;display:flex;flex-direction:column;align-items:center;flex-grow:1;justify-content:center}.excalidraw .layer-ui__library-message span{font-size:.8em}.excalidraw .publish-library-success .Dialog__content{display:flex;flex-direction:column}.excalidraw .publish-library-success-close.ToolIcon_type_button{background-color:#228be6;align-self:flex-end}.excalidraw .publish-library-success-close.ToolIcon_type_button:hover{background-color:#1971c2}.excalidraw .publish-library-success-close.ToolIcon_type_button .ToolIcon__icon{width:auto;font-size:1rem;color:#fff;padding:0 .5rem}.excalidraw .library-menu-browse-button{margin:1rem auto;padding:.875rem 1rem;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative;border-radius:var(--border-radius-lg);background-color:var(--color-primary);color:#fff;text-align:center;white-space:nowrap;text-decoration:none !important;font-weight:600;font-size:.75rem}.excalidraw .library-menu-browse-button:hover{background-color:var(--color-primary-darker)}.excalidraw .library-menu-browse-button:active{background-color:var(--color-primary-darkest)}.excalidraw.theme--dark .library-menu-browse-button{color:var(--color-gray-100)}.excalidraw .library-menu-browse-button--mobile{min-height:22px;margin-left:auto}.excalidraw .library-menu-browse-button--mobile a{padding-right:0}.excalidraw .layer-ui__sidebar__header .dropdown-menu.dropdown-menu--mobile{top:100%}.excalidraw .layer-ui__sidebar__header .dropdown-menu .dropdown-menu-container{--gap: 0;z-index:1;position:absolute;top:100%;left:0;width:196px;box-shadow:var(--library-dropdown-shadow);border-radius:var(--border-radius-lg);padding:.25rem .5rem}:root[dir=rtl] .excalidraw .layer-ui__sidebar__header .dropdown-menu .dropdown-menu-container{right:0;left:auto}",""]),t.Z=a},6440:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".excalidraw{--container-padding-y: 1.5rem;--container-padding-x: 0.75rem}.excalidraw .library-menu-items__no-items{text-align:center;color:var(--color-gray-70);line-height:1.5;font-size:.875rem;width:100%}.excalidraw .library-menu-items__no-items__label{color:var(--color-primary);font-weight:bold;font-size:1.125rem;margin-bottom:.75rem}.excalidraw.theme--dark .library-menu-items__no-items{color:var(--color-gray-40)}.excalidraw .library-menu-items-container{display:flex;flex-grow:1;flex-shrink:1;flex-basis:0;overflow-y:auto;flex-direction:column;height:100%;justify-content:center;margin:0;border-bottom:1px solid var(--sidebar-border-color);position:relative}.excalidraw .library-menu-items-container__row{display:grid;grid-template-columns:repeat(4, 1fr);gap:1rem}.excalidraw .library-menu-items-container__items{row-gap:.5rem;padding:var(--container-padding-y) var(--container-padding-x);flex:1;overflow-y:auto;overflow-x:hidden;margin-bottom:1rem}.excalidraw .library-menu-items-container__header{color:var(--color-primary);font-size:1.125rem;font-weight:bold;margin-bottom:.75rem}.excalidraw .library-menu-items-container__header--excal{margin-top:2.5rem}.excalidraw .library-menu-items-container .separator{width:100%;display:flex;align-items:center;font-weight:500;font-size:.9rem;margin:.6em .2em;color:var(--text-primary-color)}",""]),t.Z=a},2701:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .library-unit{align-items:center;border:1px solid rgba(0,0,0,0);display:flex;justify-content:center;position:relative;width:55px;height:55px;box-sizing:border-box;border-radius:var(--border-radius-lg)}.excalidraw .library-unit--hover{border-color:var(--color-primary)}.excalidraw .library-unit--selected{border-color:var(--color-primary);border-width:1px}.excalidraw .library-unit__dragger{display:flex;align-items:center;justify-content:center;height:100%;width:100%}.excalidraw .library-unit__dragger>svg{-webkit-filter:var(--theme-filter);filter:var(--theme-filter);flex-grow:1;max-height:100%;max-width:100%}.excalidraw .library-unit__checkbox-container,.excalidraw .library-unit__checkbox-container:hover,.excalidraw .library-unit__checkbox-container:active{align-items:center;background:none;border:none;color:var(--icon-fill-color);display:flex;justify-content:center;margin:0;padding:.5rem;position:absolute;left:2rem;bottom:2rem;cursor:pointer}.excalidraw .library-unit__checkbox-container input,.excalidraw .library-unit__checkbox-container:hover input,.excalidraw .library-unit__checkbox-container:active input{cursor:pointer}.excalidraw .library-unit__checkbox{position:absolute;top:.125rem;right:.125rem;margin:0}.excalidraw .library-unit__checkbox .Checkbox-box{margin:0;width:1rem;height:1rem;border-radius:4px;background-color:var(--color-primary-light);border:1px solid var(--color-primary);box-shadow:none !important;padding:2px}.excalidraw .library-unit__checkbox.Checkbox:hover .Checkbox-box{background-color:var(--color-primary-light)}.excalidraw .library-unit__checkbox.is-checked .Checkbox-box{background-color:var(--color-primary) !important}.excalidraw .library-unit__checkbox.is-checked .Checkbox-box svg{color:var(--color-primary-light)}.excalidraw .library-unit__removeFromLibrary>svg{height:16px;width:16px}.excalidraw .library-unit__adder{-webkit-transform:scale(1);transform:scale(1);-webkit-animation:library-unit__adder-animation 1s ease-in infinite;animation:library-unit__adder-animation 1s ease-in infinite;position:absolute;width:1.5rem;height:1.5rem;background-color:var(--color-primary);border-radius:var(--border-radius-md);display:flex;justify-content:center;align-items:center;pointer-events:none}.excalidraw .library-unit__adder svg{color:var(--color-primary-light);width:1rem;height:1rem}.excalidraw .library-unit:active .library-unit__adder{-webkit-animation:none;animation:none;-webkit-transform:scale(0.8);transform:scale(0.8)}.excalidraw .library-unit__active{cursor:pointer}@-webkit-keyframes library-unit__adder-animation{0%{-webkit-transform:scale(0.85);transform:scale(0.85)}50%{-webkit-transform:scale(1);transform:scale(1)}100%{-webkit-transform:scale(0.85);transform:scale(0.85)}}@keyframes library-unit__adder-animation{0%{-webkit-transform:scale(0.85);transform:scale(0.85)}50%{-webkit-transform:scale(1);transform:scale(1)}100%{-webkit-transform:scale(0.85);transform:scale(0.85)}}",""]),t.Z=a},6843:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw.excalidraw-modal-container{position:absolute;z-index:10}.excalidraw .Modal{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;overflow:auto;padding:calc(var(--space-factor)*10)}.excalidraw .Modal .Island{padding:2.5rem !important}.excalidraw .Modal__background{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1;background-color:rgba(18,18,18,.2)}.excalidraw .Modal__content{position:relative;z-index:2;width:100%;max-width:var(--max-width);max-height:100%;opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px);-webkit-animation:Modal__content_fade-in .1s ease-out .05s forwards;animation:Modal__content_fade-in .1s ease-out .05s forwards;position:relative;overflow-y:auto;background:var(--island-bg-color);border:1px solid var(--dialog-border-color);box-shadow:var(--modal-shadow);border-radius:6px;box-sizing:border-box}.excalidraw .Modal__content:focus{outline:none}.excalidraw--mobile.excalidraw .Modal__content{max-width:100%;border:0;border-radius:0}@-webkit-keyframes Modal__content_fade-in{from{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes Modal__content_fade-in{from{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}.excalidraw .Modal__close{color:var(--icon-fill-color);margin:0;padding:.375rem;position:absolute;top:1rem;right:1rem;border:0;background-color:rgba(0,0,0,0);line-height:0;cursor:pointer}.excalidraw .Modal__close svg{width:1.5rem;height:1.5rem}.excalidraw--mobile.excalidraw .Modal{padding:0}.excalidraw--mobile.excalidraw .Modal__content{position:absolute;top:0;left:0;right:0;bottom:0}",""]),t.Z=a},8461:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw--mobile.excalidraw .PasteChartDialog .Island{display:flex;flex-direction:column}.excalidraw .PasteChartDialog .container{display:flex;align-items:center;justify-content:space-around;flex-wrap:wrap}.excalidraw--mobile.excalidraw .PasteChartDialog .container{flex-direction:column;justify-content:center}.excalidraw .PasteChartDialog .ChartPreview{margin:8px;text-align:center;width:192px;height:128px;border-radius:2px;padding:1px;border:1px solid #ced4da;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0)}.excalidraw .PasteChartDialog .ChartPreview div{display:inline-block}.excalidraw .PasteChartDialog .ChartPreview svg{max-height:120px;max-width:186px}.excalidraw .PasteChartDialog .ChartPreview:hover{padding:0;border:2px solid #339af0}",""]),t.Z=a},9935:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".excalidraw .popover{position:absolute;z-index:10;padding:5px 0 5px;outline:none}",""]),t.Z=a},532:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".ProjectName{margin:auto;display:flex;align-items:center}.ProjectName .TextInput{height:calc(1rem - 3px);width:200px;overflow:hidden;text-align:center;margin-left:8px;text-overflow:ellipsis}.ProjectName .TextInput--readonly{background:none;border:none;width:auto;max-width:200px;padding-left:2px}.ProjectName .TextInput--readonly:hover{background:none}",""]),t.Z=a},7589:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .publish-library__fields{display:flex;flex-direction:column}.excalidraw .publish-library__fields label{padding:1em 0;display:flex;justify-content:space-between;align-items:center}.excalidraw .publish-library__fields label span{font-weight:500;font-size:1rem;color:#868e96}.excalidraw .publish-library__fields label input,.excalidraw .publish-library__fields label textarea{width:70%;padding:.6em;font-family:var(--ui-font)}.excalidraw .publish-library__fields label .required{color:#e03131;margin:.2rem}.excalidraw .publish-library__buttons{display:flex;padding:.2rem 0;justify-content:flex-end;gap:.5rem}.excalidraw .publish-library__buttons .ToolIcon__icon{min-width:2.5rem;width:auto;font-size:1rem}.excalidraw .publish-library__buttons .ToolIcon_type_button{margin-left:1rem;padding:0 .5rem}.excalidraw .publish-library__buttons--confirm.ToolIcon_type_button{background-color:#228be6}.excalidraw .publish-library__buttons--confirm.ToolIcon_type_button:hover{background-color:#1971c2}.excalidraw .publish-library__buttons--cancel.ToolIcon_type_button{background-color:#adb5bd}.excalidraw .publish-library__buttons--cancel.ToolIcon_type_button:hover{background-color:#868e96}.excalidraw .publish-library__buttons .ToolIcon__icon{color:#fff}.excalidraw .publish-library__buttons .ToolIcon__icon .Spinner{--spinner-color: #fff}.excalidraw .publish-library__buttons .ToolIcon__icon .Spinner svg{padding:.5rem}.excalidraw .publish-library .selected-library-items{display:flex;flex-wrap:wrap}.excalidraw .publish-library .selected-library-items .single-library-item-wrapper{width:9rem}.excalidraw .publish-library-warning{color:#fa5252}.excalidraw .publish-library-note{padding:1em 0;font-style:italic;font-size:14px;display:block}.excalidraw .single-library-item{position:relative}.excalidraw .single-library-item-status{position:absolute;top:.3rem;left:.3rem;font-size:.7rem;color:#f03e3e;background:rgba(255,255,255,.9);padding:.1rem .2rem;border-radius:.2rem}.excalidraw .single-library-item__svg{background-color:#fff;padding:.3rem;width:7.5rem;height:7.5rem;border:1px solid var(--button-gray-2)}.excalidraw .single-library-item__svg svg{width:100%;height:100%}.excalidraw .single-library-item .ToolIcon__icon{background-color:#fff;width:auto;height:auto;margin:0 .5rem}.excalidraw .single-library-item .ToolIcon,.excalidraw .single-library-item .ToolIcon_type_button:hover{background-color:#fff}.excalidraw .single-library-item .required,.excalidraw .single-library-item .error{color:#e03131;font-weight:bold;font-size:1rem;margin:.2rem}.excalidraw .single-library-item .error{font-weight:500;margin:0;padding:.3em 0}.excalidraw .single-library-item--remove{position:absolute;top:.2rem;right:1rem}.excalidraw .single-library-item--remove .ToolIcon__icon{margin:0}.excalidraw .single-library-item--remove .ToolIcon__icon{background-color:#fa5252}.excalidraw .single-library-item--remove .ToolIcon__icon:hover{background-color:#f03e3e}.excalidraw .single-library-item--remove .ToolIcon__icon:active{background-color:#e03131}.excalidraw .single-library-item--remove svg{color:#fff;padding:.26rem;border-radius:.3em;width:1rem;height:1rem}",""]),t.Z=a},8208:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .Sidebar__close-btn,.excalidraw .Sidebar__pin-btn,.excalidraw .Sidebar__dropdown-btn{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--text-primary-color));width:var(--lg-button-size);height:var(--lg-button-size);padding:0}.excalidraw .Sidebar__close-btn svg,.excalidraw .Sidebar__pin-btn svg,.excalidraw .Sidebar__dropdown-btn svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.excalidraw .Sidebar__close-btn:hover,.excalidraw .Sidebar__pin-btn:hover,.excalidraw .Sidebar__dropdown-btn:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--default-border-color))}.excalidraw .Sidebar__close-btn:active,.excalidraw .Sidebar__pin-btn:active,.excalidraw .Sidebar__dropdown-btn:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.excalidraw .Sidebar__close-btn.active,.excalidraw .Sidebar__pin-btn.active,.excalidraw .Sidebar__dropdown-btn.active{background-color:var(--color-primary-light);border-color:var(--color-primary-light)}.excalidraw .Sidebar__close-btn.active:hover,.excalidraw .Sidebar__pin-btn.active:hover,.excalidraw .Sidebar__dropdown-btn.active:hover{background-color:var(--color-primary-light)}.excalidraw .Sidebar__close-btn.active svg,.excalidraw .Sidebar__pin-btn.active svg,.excalidraw .Sidebar__dropdown-btn.active svg{color:var(--button-color, var(--color-primary-darker))}.excalidraw .Sidebar__close-btn svg,.excalidraw .Sidebar__pin-btn svg,.excalidraw .Sidebar__dropdown-btn svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}.excalidraw .Sidebar__pin-btn--pinned{background-color:var(--color-primary);border-color:var(--color-primary)}.excalidraw .Sidebar__pin-btn--pinned svg{color:#fff}.excalidraw .Sidebar__pin-btn--pinned:hover,.excalidraw .Sidebar__pin-btn--pinned:active{background-color:var(--color-primary-darker)}.excalidraw.theme--dark .Sidebar__pin-btn--pinned svg{color:var(--color-gray-90)}.excalidraw .layer-ui__sidebar{position:absolute;top:0;bottom:0;right:0;z-index:5;margin:0;background-color:var(--sidebar-bg-color);box-shadow:var(--sidebar-shadow);overflow:hidden;border-radius:0;width:calc(302px - var(--space-factor) * 2);border-left:1px solid var(--sidebar-border-color);padding:0;box-sizing:border-box}:root[dir=rtl] .excalidraw .layer-ui__sidebar{left:0;right:auto}.excalidraw .layer-ui__sidebar--docked{box-shadow:none}:root[dir=rtl] .excalidraw .layer-ui__sidebar{border-right:1px solid var(--sidebar-border-color);border-left:0}.excalidraw .layer-ui__sidebar .Island{box-shadow:none}.excalidraw .layer-ui__sidebar .ToolIcon__icon{border-radius:var(--border-radius-md)}.excalidraw .layer-ui__sidebar .ToolIcon__icon__close .Modal__close{width:calc(var(--space-factor)*7);height:calc(var(--space-factor)*7);display:flex;justify-content:center;align-items:center;color:var(--color-text)}.excalidraw .layer-ui__sidebar .Island{--padding: 0;background-color:var(--island-bg-color);border-radius:var(--border-radius-lg);padding:calc(var(--padding)*var(--space-factor));position:relative;transition:box-shadow .5s ease-in-out}.excalidraw .layer-ui__sidebar__header{box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;width:100%;padding:1rem;border-bottom:1px solid var(--sidebar-border-color)}.excalidraw .layer-ui__sidebar__header__buttons{display:flex;align-items:center;gap:.625rem}",""]),t.Z=a},5892:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".excalidraw .Spinner{display:flex;align-items:center;justify-content:center;height:100%;margin-left:auto;margin-right:auto;--spinner-color: var(--icon-fill-color)}.excalidraw .Spinner svg{-webkit-animation:rotate 1.6s linear infinite;animation:rotate 1.6s linear infinite;-webkit-transform-origin:center center;transform-origin:center center}.excalidraw .Spinner circle{stroke:var(--spinner-color);-webkit-animation:dash 1.6s linear 0s infinite;animation:dash 1.6s linear 0s infinite;stroke-linecap:round}@-webkit-keyframes rotate{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes dash{0%{stroke-dasharray:1,300;stroke-dashoffset:0}50%{stroke-dasharray:150,300;stroke-dashoffset:-200}100%{stroke-dasharray:1,300;stroke-dashoffset:-280}}@keyframes dash{0%{stroke-dasharray:1,300;stroke-dashoffset:0}50%{stroke-dasharray:150,300;stroke-dashoffset:-200}100%{stroke-dasharray:1,300;stroke-dashoffset:-280}}",""]),t.Z=a},3874:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".excalidraw .Stack{--gap: 0;display:grid;gap:calc(var(--space-factor)*var(--gap))}.excalidraw .Stack_vertical{grid-template-columns:auto;grid-auto-flow:row;grid-auto-rows:-webkit-min-content;grid-auto-rows:min-content}.excalidraw .Stack_horizontal{grid-template-rows:auto;grid-auto-flow:column;grid-auto-columns:-webkit-min-content;grid-auto-columns:min-content}",""]),t.Z=a},2681:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .Stats{position:absolute;top:64px;right:12px;font-size:12px;z-index:10;pointer-events:all}.excalidraw .Stats h3{margin:0 24px 8px 0;white-space:nowrap}.excalidraw .Stats .close{float:right;height:16px;width:16px;cursor:pointer}.excalidraw .Stats .close svg{width:100%;height:100%}.excalidraw .Stats table{width:100%}.excalidraw .Stats table th{border-bottom:1px solid var(--input-border-color);padding:4px}.excalidraw .Stats table tr td:nth-child(2){min-width:24px;text-align:right}:root[dir=rtl] .excalidraw .Stats{left:12px;right:initial}:root[dir=rtl] .excalidraw .Stats h3{margin:0 0 8px 24px}:root[dir=rtl] .excalidraw .Stats .close{float:left}",""]),t.Z=a},6759:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .TextInput{display:inline-block}",""]),t.Z=a},9650:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .Toast{-webkit-animation:fade-in .5s;animation:fade-in .5s;background-color:var(--button-gray-1);border-radius:4px;bottom:10px;box-sizing:border-box;cursor:default;left:50%;margin-left:-150px;padding:4px 0;position:absolute;text-align:center;width:300px;z-index:999999}.excalidraw .Toast .Toast__message{padding:0 1.6rem;color:var(--popup-text-color);white-space:pre-wrap}.excalidraw .Toast .close{position:absolute;top:0;right:0;padding:.4rem}.excalidraw .Toast .close .ToolIcon__icon{width:1.2rem;height:1.2rem}@-webkit-keyframes fade-in{from{opacity:0}to{opacity:1}}@keyframes fade-in{from{opacity:0}to{opacity:1}}",""]),t.Z=a},2044:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .ToolIcon{border-radius:var(--border-radius-lg);display:inline-flex;align-items:center;position:relative;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;user-select:none}.excalidraw .ToolIcon__hidden{display:none !important}.excalidraw .ToolIcon.fillable .ToolIcon_type_radio:checked+.ToolIcon__icon,.excalidraw .ToolIcon.fillable .ToolIcon_type_checkbox:checked+.ToolIcon__icon{--icon-fill-color: var(--color-primary-darker)}.excalidraw .ToolIcon.fillable .ToolIcon_type_radio:checked+.ToolIcon__icon svg,.excalidraw .ToolIcon.fillable .ToolIcon_type_checkbox:checked+.ToolIcon__icon svg{fill:var(--icon-fill-color)}.excalidraw .ToolIcon .ToolIcon_type_radio:checked+.ToolIcon__icon,.excalidraw .ToolIcon .ToolIcon_type_checkbox:checked+.ToolIcon__icon{background:var(--color-primary-light);--keybinding-color: var(--color-gray-60)}.excalidraw .ToolIcon .ToolIcon_type_radio:checked+.ToolIcon__icon svg,.excalidraw .ToolIcon .ToolIcon_type_checkbox:checked+.ToolIcon__icon svg{color:var(--color-primary-darker)}.excalidraw .ToolIcon .ToolIcon__keybinding{bottom:4px;right:4px}.excalidraw .ToolIcon .ToolIcon__icon:hover{background:var(--button-hover-bg)}.excalidraw .ToolIcon .ToolIcon__icon:active{background:var(--button-hover-bg);border:1px solid var(--color-primary-darkest)}.excalidraw .ToolIcon--plain{background-color:rgba(0,0,0,0)}.excalidraw .ToolIcon--plain .ToolIcon__icon{width:2rem;height:2rem}.excalidraw .ToolIcon_type_radio,.excalidraw .ToolIcon_type_checkbox{position:absolute;opacity:0;pointer-events:none}.excalidraw .ToolIcon__icon{box-sizing:border-box;width:var(--default-button-size);height:var(--default-button-size);color:var(--icon-fill-color);display:flex;justify-content:center;align-items:center;border-radius:var(--border-radius-lg)}.excalidraw .ToolIcon__icon+.ToolIcon__label{-webkit-margin-start:0;margin-inline-start:0}.excalidraw .ToolIcon__icon svg{position:relative;width:var(--default-icon-size);height:var(--default-icon-size);color:var(--icon-fill-color)}.excalidraw .ToolIcon__label{display:flex;align-items:center;color:var(--icon-fill-color);font-family:var(--ui-font);margin:0 .8em;text-overflow:ellipsis}.excalidraw .ToolIcon__label .Spinner{margin-left:.6em}.excalidraw .ToolIcon_size_small .ToolIcon__icon{width:2rem;height:2rem;font-size:.8em}.excalidraw .ToolIcon_type_button,.excalidraw .Modal .ToolIcon_type_button,.excalidraw .ToolIcon_type_button{padding:0;border:none;margin:0;font-size:inherit;background-color:initial}.excalidraw .ToolIcon_type_button:focus-visible,.excalidraw .Modal .ToolIcon_type_button:focus-visible,.excalidraw .ToolIcon_type_button:focus-visible{box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .ToolIcon_type_button.ToolIcon--selected,.excalidraw .Modal .ToolIcon_type_button.ToolIcon--selected,.excalidraw .ToolIcon_type_button.ToolIcon--selected{background-color:var(--button-gray-2)}.excalidraw .ToolIcon_type_button.ToolIcon--selected:active,.excalidraw .Modal .ToolIcon_type_button.ToolIcon--selected:active,.excalidraw .ToolIcon_type_button.ToolIcon--selected:active{background-color:var(--button-gray-3)}.excalidraw .ToolIcon_type_button:active,.excalidraw .Modal .ToolIcon_type_button:active,.excalidraw .ToolIcon_type_button:active{background-color:var(--button-gray-3)}.excalidraw .ToolIcon_type_button--show,.excalidraw .Modal .ToolIcon_type_button--show,.excalidraw .ToolIcon_type_button--show{visibility:visible}.excalidraw .ToolIcon_type_button--hide,.excalidraw .Modal .ToolIcon_type_button--hide,.excalidraw .ToolIcon_type_button--hide{display:none !important}.excalidraw .ToolIcon_type_floating{background-color:rgba(0,0,0,0)}.excalidraw .ToolIcon_type_floating:hover{background-color:rgba(0,0,0,0)}.excalidraw .ToolIcon_type_floating:active{background-color:rgba(0,0,0,0)}.excalidraw .ToolIcon_type_floating .ToolIcon__icon{background-color:var(--button-gray-1);width:2rem;height:2rem}.excalidraw .ToolIcon_type_floating .ToolIcon__icon:hover{background-color:var(--button-gray-2)}.excalidraw .ToolIcon_type_floating .ToolIcon__icon:active{background-color:var(--button-gray-3)}.excalidraw .ToolIcon__keybinding{position:absolute;bottom:2px;right:3px;font-size:.625rem;color:var(--keybinding-color);font-family:var(--ui-font);-webkit-user-select:none;user-select:none}:root[dir=ltr] .excalidraw .unlocked-icon{left:2px}:root[dir=rtl] .excalidraw .unlocked-icon{right:2px}.excalidraw .App-toolbar-container .ToolIcon__icon{width:var(--lg-button-size);height:var(--lg-button-size)}.excalidraw .App-toolbar-container .ToolIcon__icon svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}",""]),t.Z=a},9144:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .App-toolbar.zen-mode .ToolIcon__keybinding,.excalidraw .App-toolbar.zen-mode .HintViewer{display:none}.excalidraw .App-toolbar__divider{width:1px;height:1.5rem;align-self:center;background-color:var(--default-border-color);margin:0 .5rem}",""]),t.Z=a},6626:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw-tooltip{position:fixed;z-index:1000;padding:8px;border-radius:6px;box-sizing:border-box;pointer-events:none;word-wrap:break-word;background:#000;line-height:1.5;text-align:center;font-size:13px;font-weight:500;color:#fff;display:none}.excalidraw-tooltip.excalidraw-tooltip--visible{display:block}.excalidraw-tooltip-wrapper{display:flex}.excalidraw-tooltip-icon{width:.9em;height:.9em;margin-left:5px;margin-top:1px;display:flex}.excalidraw--mobile.excalidraw-tooltip-icon{display:none}",""]),t.Z=a},6359:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".excalidraw .UserList{pointer-events:none;padding:var(--space-factor) var(--space-factor) var(--space-factor) var(--space-factor);display:flex;flex-wrap:wrap;justify-content:flex-end;align-items:center;gap:.625rem;max-height:140px;max-width:290px;overflow:hidden}.excalidraw .UserList:empty{display:none}.excalidraw .UserList>*{pointer-events:all}.excalidraw .UserList_mobile{padding:0;justify-content:normal;margin:.5rem 0}",""]),t.Z=a},7399:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .dropdown-menu{position:absolute;top:100%;margin-top:.25rem}.excalidraw .dropdown-menu--mobile{bottom:55px;top:auto;left:0;width:100%;display:flex;flex-direction:column;row-gap:.75rem}.excalidraw .dropdown-menu--mobile .dropdown-menu-container{padding:8px 8px;box-sizing:border-box;background-color:var(--island-bg-color);box-shadow:var(--shadow-island);border-radius:var(--border-radius-lg);position:relative;transition:box-shadow .5s ease-in-out}.excalidraw .dropdown-menu--mobile .dropdown-menu-container.zen-mode{box-shadow:none}.excalidraw .dropdown-menu .dropdown-menu-container{background-color:#fff !important;max-height:calc(100vh - 150px);overflow-y:auto;--gap: 2}.excalidraw .dropdown-menu .dropdown-menu-item-base{display:flex;padding:0 .625rem;-webkit-column-gap:.625rem;column-gap:.625rem;font-size:.875rem;color:var(--color-gray-100);width:100%;box-sizing:border-box;font-weight:normal;font-family:inherit}.excalidraw .dropdown-menu .dropdown-menu-item{background-color:rgba(0,0,0,0);border:0;align-items:center;height:2rem;cursor:pointer;border-radius:var(--border-radius-md)}@media screen and (min-width: 1921px){.excalidraw .dropdown-menu .dropdown-menu-item{height:2.25rem}}.excalidraw .dropdown-menu .dropdown-menu-item__text{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.excalidraw .dropdown-menu .dropdown-menu-item__shortcut{-webkit-margin-start:auto;margin-inline-start:auto;opacity:.5}.excalidraw .dropdown-menu .dropdown-menu-item:hover{background-color:var(--button-hover-bg);text-decoration:none}.excalidraw .dropdown-menu .dropdown-menu-item svg{width:1rem;height:1rem;display:block}.excalidraw .dropdown-menu .dropdown-menu-item-custom{margin-top:.5rem}.excalidraw .dropdown-menu .dropdown-menu-group-title{font-size:14px;text-align:left;margin:10px 0;font-weight:500}.excalidraw.theme--dark .dropdown-menu-item{color:var(--color-gray-40)}.excalidraw.theme--dark .dropdown-menu-container{background-color:var(--color-gray-90) !important}.excalidraw .dropdown-menu-button{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--text-primary-color));background-color:var(--island-bg-color);width:var(--lg-button-size);height:var(--lg-button-size)}.excalidraw .dropdown-menu-button svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.excalidraw .dropdown-menu-button:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--default-border-color))}.excalidraw .dropdown-menu-button:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.excalidraw .dropdown-menu-button.active{background-color:var(--color-primary-light);border-color:var(--color-primary-light)}.excalidraw .dropdown-menu-button.active:hover{background-color:var(--color-primary-light)}.excalidraw .dropdown-menu-button.active svg{color:var(--button-color, var(--color-primary-darker))}.excalidraw .dropdown-menu-button svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}.excalidraw .dropdown-menu-button--mobile{border:none;margin:0;padding:0;width:var(--default-button-size);height:var(--default-button-size)}",""]),t.Z=a},8793:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".footer-center{pointer-events:none;display:flex;width:100%;justify-content:flex-start}.footer-center>*{pointer-events:all}",""]),t.Z=a},3397:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .collab-button{--button-bg: var(--color-primary);--button-color: white;--button-border: var(--color-primary);--button-width: var(--lg-button-size);--button-height: var(--lg-button-size);--button-hover-bg: var(--color-primary-darker);--button-hover-border: var(--color-primary-darker);--button-active-bg: var(--color-primary-darker);flex-shrink:0}.excalidraw .collab-button.active.active{background-color:#0fb884;border-color:#0fb884}.excalidraw .collab-button.active.active svg{color:#fff}.excalidraw .collab-button.active.active:hover,.excalidraw .collab-button.active.active:active{background-color:#0fb884;border-color:#0fb884}.excalidraw.theme--dark .collab-button{color:var(--color-gray-90)}.excalidraw .CollabButton.is-collaborating{background-color:var(--button-special-active-bg-color)}.excalidraw .CollabButton.is-collaborating .ToolIcon__icon svg,.excalidraw .CollabButton.is-collaborating .ToolIcon__label{color:var(--icon-green-fill-color)}.excalidraw .CollabButton-collaborators{min-width:1em;min-height:1em;line-height:1;position:absolute;bottom:-5px;padding:3px;border-radius:50%;background-color:#b2f2bb;color:#2b8a3e;font-size:.6rem;font-family:"Cascadia"}:root[dir=ltr] .excalidraw .CollabButton-collaborators{right:-5px}:root[dir=rtl] .excalidraw .CollabButton-collaborators{left:-5px}',""]),t.Z=a},4343:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".excalidraw .ActiveFile .ActiveFile__fileName{display:flex;align-items:center}.excalidraw .ActiveFile .ActiveFile__fileName span{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:9.3em}.excalidraw .ActiveFile .ActiveFile__fileName svg{width:1.15em;-webkit-margin-end:.3em;margin-inline-end:.3em;-webkit-transform:scaleY(0.9);transform:scaleY(0.9)}",""]),t.Z=a},1569:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,'.excalidraw .virgil{font-family:"Virgil"}.excalidraw .welcome-screen-decor{pointer-events:none;color:var(--color-gray-40)}.excalidraw.theme--dark .welcome-screen-decor{color:var(--color-gray-60)}@media(max-height: 599px){.excalidraw .welcome-screen-decor-hint{display:none !important}}@media(max-width: 1024px),(max-width: 800px){.excalidraw .welcome-screen-decor-hint .welcome-screen-decor--help,.excalidraw .welcome-screen-decor-hint .welcome-screen-decor--menu{display:none}}.excalidraw .welcome-screen-decor-hint--help{display:flex;position:absolute;right:0;bottom:100%}:root[dir=rtl] .excalidraw .welcome-screen-decor-hint--help{left:0;right:auto}.excalidraw .welcome-screen-decor-hint--help svg{margin-top:.5rem;width:85px;height:71px;-webkit-transform:scaleX(-1) rotate(80deg);transform:scaleX(-1) rotate(80deg)}:root[dir=rtl] .excalidraw .welcome-screen-decor-hint--help svg{-webkit-transform:rotate(80deg);transform:rotate(80deg)}.excalidraw .welcome-screen-decor-hint--toolbar{position:absolute;top:100%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);margin-top:2.5rem;display:flex;align-items:baseline}.excalidraw .welcome-screen-decor-hint--toolbar .welcome-screen-decor-hint__label{width:120px;position:relative;top:-0.5rem}.excalidraw .welcome-screen-decor-hint--toolbar svg{width:38px;height:78px}:root[dir=rtl] .excalidraw .welcome-screen-decor-hint--toolbar svg{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.excalidraw .welcome-screen-decor-hint--menu{position:absolute;width:320px;font-size:1rem;top:100%;margin-top:.25rem;-webkit-margin-start:.6rem;margin-inline-start:.6rem;display:flex;align-items:flex-end;gap:.5rem}.excalidraw .welcome-screen-decor-hint--menu svg{width:41px;height:94px}:root[dir=rtl] .excalidraw .welcome-screen-decor-hint--menu svg{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@media(max-width: 860px){.excalidraw .welcome-screen-decor-hint--menu .welcome-screen-decor-hint__label{max-width:160px}}.excalidraw .welcome-screen-center{display:flex;flex-direction:column;gap:2rem;justify-content:center;align-items:center;position:absolute;pointer-events:none;left:1rem;top:1rem;right:1rem;bottom:1rem}.excalidraw .welcome-screen-center__logo{display:flex;align-items:center;-webkit-column-gap:.75rem;column-gap:.75rem;font-size:2.25rem}.excalidraw .welcome-screen-center__logo svg{width:1.625rem;height:auto}.excalidraw .welcome-screen-center__heading{font-size:1.125rem;text-align:center}.excalidraw .welcome-screen-menu{display:flex;flex-direction:column;gap:2px;justify-content:center;align-items:center}.excalidraw .welcome-screen-menu-item{box-sizing:border-box;pointer-events:all;color:var(--color-gray-50);font-size:.875rem;width:100%;min-width:300px;max-width:400px;display:grid;align-items:center;justify-content:space-between;background:none;border:none;padding:.75rem;border-radius:var(--border-radius-md);grid-template-columns:calc(var(--default-icon-size) + .5rem) 1fr 3rem}.excalidraw .welcome-screen-menu-item__text{display:flex;align-items:center;margin-right:auto;text-align:left;-webkit-column-gap:.5rem;column-gap:.5rem}.excalidraw .welcome-screen-menu-item__icon{width:var(--default-icon-size);height:var(--default-icon-size)}.excalidraw .welcome-screen-menu-item__shortcut{margin-left:auto;color:var(--color-gray-40);font-size:.75rem}.excalidraw:not(:active) .welcome-screen-menu-item:hover{text-decoration:none;background:var(--color-gray-10)}.excalidraw:not(:active) .welcome-screen-menu-item:hover .welcome-screen-menu-item__shortcut{color:var(--color-gray-50)}.excalidraw:not(:active) .welcome-screen-menu-item:hover .welcome-screen-menu-item__text{color:var(--color-gray-100)}.excalidraw .welcome-screen-menu-item:active{background:var(--color-gray-20)}.excalidraw .welcome-screen-menu-item:active .welcome-screen-menu-item__shortcut{color:var(--color-gray-50)}.excalidraw .welcome-screen-menu-item:active .welcome-screen-menu-item__text{color:var(--color-gray-100)}.excalidraw .welcome-screen-menu-item:active--promo{color:var(--color-promo) !important}.excalidraw .welcome-screen-menu-item:active--promo:hover .welcome-screen-menu-item__text{color:var(--color-promo) !important}.excalidraw.theme--dark .welcome-screen-menu-item{color:var(--color-gray-60)}.excalidraw.theme--dark .welcome-screen-menu-item__shortcut{color:var(--color-gray-60)}.excalidraw.theme--dark:not(:active) .welcome-screen-menu-item:hover{background:var(--color-gray-85)}.excalidraw.theme--dark:not(:active) .welcome-screen-menu-item:hover .welcome-screen-menu-item__shortcut{color:var(--color-gray-50)}.excalidraw.theme--dark:not(:active) .welcome-screen-menu-item:hover .welcome-screen-menu-item__text{color:var(--color-gray-10)}.excalidraw.theme--dark .welcome-screen-menu-item:active{background-color:var(--color-gray-90)}.excalidraw.theme--dark .welcome-screen-menu-item:active .welcome-screen-menu-item__text{color:var(--color-gray-10)}@media(max-height: 599px){.excalidraw .welcome-screen-center{margin-top:4rem}}@media(min-height: 600px)and (max-height: 900px){.excalidraw .welcome-screen-center{margin-top:8rem}}@media(max-height: 500px),(max-width: 320px){.excalidraw .welcome-screen-center{display:none}}',""]),t.Z=a},9915:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".visually-hidden{position:absolute !important;height:1px;width:1px;overflow:hidden;clip:rect(1px, 1px, 1px, 1px);white-space:nowrap;-webkit-user-select:none;user-select:none}.LoadingMessage{position:absolute;top:0;right:0;bottom:0;left:0;z-index:999;display:flex;flex-direction:column;align-items:center;justify-content:center;pointer-events:none}.LoadingMessage .Spinner{font-size:2.8em}.LoadingMessage .LoadingMessage-text{margin-top:1em;font-size:.8em}.LoadingMessage--dark{background-color:#121212;color:#ced4da}",""]),t.Z=a},9310:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o),s=n(1667),l=n.n(s),c=new URL(n(7984),n.b),u=new URL(n(1639),n.b),d=a()(i()),h=l()(c),p=l()(u);d.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}:export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw{--theme-filter: none;--button-destructive-bg-color: #ffe3e3;--button-destructive-color: #c92a2a;--button-gray-1: #e9ecef;--button-gray-2: #ced4da;--button-gray-3: #adb5bd;--button-special-active-bg-color: #ebfbee;--dialog-border-color: var(--color-gray-20);--dropdown-icon: url("+h+");--focus-highlight-color: #a5d8ff;--icon-fill-color: var(--color-gray-80);--icon-green-fill-color: #2b8a3e;--default-bg-color: #ffffff;--input-bg-color: #ffffff;--input-border-color: #ced4da;--input-hover-bg-color: #f1f3f5;--input-label-color: #495057;--island-bg-color: rgba(255, 255, 255, 0.96);--keybinding-color: var(--color-gray-40);--link-color: #1c7ed6;--overlay-bg-color: rgba(255, 255, 255, 0.88);--popup-bg-color: #ffffff;--popup-secondary-bg-color: #f1f3f5;--popup-text-color: #000000;--popup-text-inverted-color: #ffffff;--sab: env(safe-area-inset-bottom);--sal: env(safe-area-inset-left);--sar: env(safe-area-inset-right);--sat: env(safe-area-inset-top);--select-highlight-color: #339af0;--shadow-island: 0px 7px 14px rgba(0, 0, 0, 0.05), 0px 0px 3.12708px rgba(0, 0, 0, 0.0798), 0px 0px 0.931014px rgba(0, 0, 0, 0.1702);--button-hover-bg: var(--color-gray-10);--default-border-color: var(--color-gray-30);--default-button-size: 2rem;--default-icon-size: 1rem;--lg-button-size: 2.25rem;--lg-icon-size: 1rem;--editor-container-padding: 1rem;--scrollbar-thumb: var(--button-gray-2);--scrollbar-thumb-hover: var(--button-gray-3);--modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--avatar-border-color: var(--color-gray-20);--sidebar-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--sidebar-border-color: var(--color-gray-20);--sidebar-bg-color: #fff;--library-dropdown-shadow: 0px 15px 6px rgba(0, 0, 0, 0.01), 0px 8px 5px rgba(0, 0, 0, 0.05), 0px 4px 4px rgba(0, 0, 0, 0.09), 0px 1px 2px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);--space-factor: 0.25rem;--text-primary-color: var(--color-gray-80);--color-selection: #6965db;--color-primary: #6965db;--color-primary-darker: #5b57d1;--color-primary-darkest: #4a47b1;--color-primary-light: #e3e2fe;--color-gray-10: #f5f5f5;--color-gray-20: #ebebeb;--color-gray-30: #d6d6d6;--color-gray-40: #b8b8b8;--color-gray-50: #999999;--color-gray-60: #7a7a7a;--color-gray-70: #5c5c5c;--color-gray-80: #3d3d3d;--color-gray-85: #242424;--color-gray-90: #1e1e1e;--color-gray-100: #121212;--color-warning: #fceeca;--color-text-warning: var(--text-primary-color);--color-danger: #db6965;--color-promo: #e70078;--border-radius-md: 0.375rem;--border-radius-lg: 0.5rem}@media screen and (min-device-width: 1921px){.excalidraw{--lg-button-size: 2.5rem;--lg-icon-size: 1.25rem;--default-button-size: 2.25rem;--default-icon-size: 1.25rem}}.excalidraw.theme--dark.theme--dark-background-none{background:none}.excalidraw.theme--dark{--theme-filter: invert(93%) hue-rotate(180deg);--button-destructive-bg-color: #5a0000;--button-destructive-color: #ffa8a8;--button-gray-1: #363636;--button-gray-2: #272727;--button-gray-3: #222;--button-special-active-bg-color: #204624;--dialog-border-color: var(--color-gray-80);--dropdown-icon: url("+p+');--focus-highlight-color: #228be6;--icon-fill-color: var(--color-gray-40);--icon-green-fill-color: #69db7c;--default-bg-color: #121212;--input-bg-color: #121212;--input-border-color: #2e2e2e;--input-hover-bg-color: #181818;--input-label-color: #e9ecef;--island-bg-color: #262627;--keybinding-color: var(--color-gray-60);--link-color: #4dabf7;--overlay-bg-color: rgba(52, 58, 64, 0.12);--popup-bg-color: #2c2c2c;--popup-secondary-bg-color: #222;--popup-text-color: #ced4da;--popup-text-inverted-color: #2c2c2c;--select-highlight-color: #4dabf7;--text-primary-color: var(--color-gray-40);--button-hover-bg: var(--color-gray-80);--default-border-color: var(--color-gray-80);--shadow-island: 0px 13px 33px rgba(0, 0, 0, 0.07), 0px 4.13px 9.94853px rgba(0, 0, 0, 0.0456112), 0px 1.13px 4.13211px rgba(0, 0, 0, 0.035), 0px 0.769896px 1.4945px rgba(0, 0, 0, 0.0243888);--modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--avatar-border-color: var(--color-gray-85);--sidebar-border-color: var(--color-gray-85);--sidebar-bg-color: #191919;--scrollbar-thumb: #343a40;--scrollbar-thumb-hover: #495057;--color-selection: #3530c4;--color-primary: #a8a5ff;--color-primary-darker: #b2aeff;--color-primary-darkest: #beb9ff;--color-primary-light: #4f4d6f;--color-text-warning: var(--color-gray-80);--color-danger: #ffa8a5;--color-promo: #d297ff}:root{--zIndex-canvas: 1;--zIndex-wysiwyg: 2;--zIndex-layerUI: 3}.excalidraw{--ui-font: Assistant, system-ui, BlinkMacSystemFont, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;font-family:var(--ui-font);position:relative;overflow:hidden;color:var(--text-primary-color);display:flex;top:0;bottom:0;left:0;right:0;height:100%;width:100%;-webkit-user-select:none;user-select:none}.excalidraw button{cursor:pointer}.excalidraw:focus{outline:none}.excalidraw a{font-weight:500;text-decoration:none;color:var(--link-color)}.excalidraw a:hover{text-decoration:underline}.excalidraw canvas{touch-action:none;image-rendering:pixelated;image-rendering:-moz-crisp-edges;z-index:var(--zIndex-canvas)}.excalidraw__canvas{position:absolute}.excalidraw.theme--dark canvas{-webkit-filter:var(--theme-filter);filter:var(--theme-filter)}.excalidraw .FixedSideContainer{padding-top:var(--sat, 0);padding-right:var(--sar, 0);padding-bottom:var(--sab, 0);padding-left:var(--sal, 0)}.excalidraw .panelRow{display:flex;justify-content:space-between}.excalidraw .panelColumn{display:flex;flex-direction:column;row-gap:.75rem}.excalidraw .panelColumn h3,.excalidraw .panelColumn legend,.excalidraw .panelColumn .control-label{margin:0;margin-bottom:.25rem;font-size:.75rem;color:var(--text-primary-color);font-weight:normal;display:block}.excalidraw .panelColumn .control-label input{display:block;width:100%}.excalidraw .panelColumn legend{padding:0}.excalidraw .panelColumn .iconSelectList{flex-wrap:wrap;position:relative}.excalidraw .panelColumn .buttonList{flex-wrap:wrap;display:flex;-webkit-column-gap:.5rem;column-gap:.5rem;row-gap:.5rem}.excalidraw .panelColumn .buttonList label{font-size:.75rem}.excalidraw .panelColumn .buttonList input[type=radio],.excalidraw .panelColumn .buttonList input[type=button]{opacity:0;position:absolute;pointer-events:none}.excalidraw .panelColumn .buttonList .iconRow{margin-top:8px}.excalidraw .panelColumn fieldset{margin:0;padding:0;border:none}.excalidraw .divider{width:1px;background-color:#e9ecef;margin:1px}.excalidraw .welcome-screen-menu-item:focus-visible,.excalidraw .dropdown-menu-item:focus-visible,.excalidraw button:focus-visible,.excalidraw .buttonList label:focus-within,.excalidraw input:focus-visible{outline:rgba(0,0,0,0);box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .buttonList .ToolIcon__icon{all:unset !important;display:flex !important}.excalidraw .buttonList button{background-color:rgba(0,0,0,0)}.excalidraw .buttonList label,.excalidraw .buttonList button,.excalidraw .buttonList .zIndexButton{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--text-primary-color));padding:0}.excalidraw .buttonList label svg,.excalidraw .buttonList button svg,.excalidraw .buttonList .zIndexButton svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.excalidraw .buttonList label:hover,.excalidraw .buttonList button:hover,.excalidraw .buttonList .zIndexButton:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--default-border-color))}.excalidraw .buttonList label:active,.excalidraw .buttonList button:active,.excalidraw .buttonList .zIndexButton:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.excalidraw .buttonList label.active,.excalidraw .buttonList button.active,.excalidraw .buttonList .zIndexButton.active{background-color:var(--color-primary-light);border-color:var(--color-primary-light)}.excalidraw .buttonList label.active:hover,.excalidraw .buttonList button.active:hover,.excalidraw .buttonList .zIndexButton.active:hover{background-color:var(--color-primary-light)}.excalidraw .buttonList label.active svg,.excalidraw .buttonList button.active svg,.excalidraw .buttonList .zIndexButton.active svg{color:var(--button-color, var(--color-primary-darker))}.excalidraw .buttonList label svg,.excalidraw .buttonList button svg,.excalidraw .buttonList .zIndexButton svg{width:var(--default-icon-size);height:var(--default-icon-size)}.excalidraw .App-top-bar{z-index:var(--zIndex-layerUI);display:flex;flex-direction:column;align-items:center}.excalidraw .App-bottom-bar{position:absolute;top:0;bottom:0;left:0;right:0;--bar-padding: calc(4 * var(--space-factor));padding-top:max(var(--bar-padding), var(--sat,0));padding-right:var(--sar, 0);padding-bottom:var(--sab, 0);padding-left:var(--sal, 0);z-index:4;display:flex;align-items:flex-end;pointer-events:none}.excalidraw .App-bottom-bar>.Island{width:100%;max-width:100%;min-width:100%;box-sizing:border-box;max-height:100%;display:flex;flex-direction:column;pointer-events:initial}.excalidraw .App-bottom-bar>.Island .panelColumn{padding:8px 8px 0 8px}.excalidraw .App-toolbar{width:100%}.excalidraw .App-toolbar .eraser.ToolIcon:hover{--icon-fill-color: #fff;--keybinding-color: #fff}.excalidraw .App-toolbar .eraser.active{background-color:var(--color-primary)}.excalidraw .App-toolbar-content{display:flex;align-items:center;justify-content:space-between;padding:8px}.excalidraw .App-mobile-menu{width:100%;overflow-x:visible;overflow-y:auto;box-sizing:border-box;margin-bottom:var(--bar-padding)}.excalidraw .App-menu{display:grid;color:var(--icon-fill-color)}.excalidraw .shapes-section{display:flex;justify-content:center;pointer-events:none !important}.excalidraw .shapes-section>*{pointer-events:all}.excalidraw .App-menu_top{grid-template-columns:1fr 2fr 1fr;grid-gap:2rem;align-items:flex-start;cursor:default;pointer-events:none !important}@media(min-width: 1536px){.excalidraw .App-menu_top{grid-template-columns:1fr 1fr 1fr;grid-gap:3rem}}.excalidraw .layer-ui__wrapper:not(.disable-pointerEvents) .App-menu_top>*{pointer-events:all}.excalidraw .App-menu_top>*:first-child{justify-self:flex-start}.excalidraw .App-menu_top>*:last-child{justify-self:flex-end}.excalidraw .App-menu_bottom{position:absolute;bottom:1rem;display:flex;justify-content:space-between;align-items:flex-start;cursor:default;pointer-events:none !important;box-sizing:border-box;padding:0 1rem}.excalidraw .App-menu_bottom--transition-left section{width:185px}.excalidraw .App-menu_bottom section{display:flex}.excalidraw .App-menu_bottom>*:first-child{justify-self:flex-start}.excalidraw .App-menu_bottom>*:last-child{justify-self:flex-end}.excalidraw .App-menu_left{grid-template-rows:1fr auto 1fr;height:100%}.excalidraw .App-menu_right{grid-template-rows:1fr;height:100%}.excalidraw .App-menu__left{overflow-y:auto;padding:.75rem;width:202px;box-sizing:border-box;position:absolute}.excalidraw .dropdown-select{height:1.5rem;padding:0;-webkit-padding-start:.5rem;padding-inline-start:.5rem;-webkit-padding-end:1.5rem;padding-inline-end:1.5rem;color:var(--icon-fill-color);background-color:var(--button-gray-1);border-radius:var(--space-factor);border:1px solid var(--button-gray-2);font-size:.8rem;outline:none;-webkit-appearance:none;appearance:none;background-image:var(--dropdown-icon);background-repeat:no-repeat;background-position:right .7rem top 50%,0 0;background-size:.65em auto,100%}:root[dir=rtl] .excalidraw .dropdown-select{background-position:left .7rem top 50%,0 0}.excalidraw .dropdown-select:focus{box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .dropdown-select:hover{background-color:var(--button-gray-2)}.excalidraw .dropdown-select:active{background-color:var(--button-gray-2)}.excalidraw .dropdown-select__language{height:2rem;background-color:var(--island-bg-color);border-color:var(--default-border-color) !important;cursor:pointer}.excalidraw .dropdown-select__language:hover{background-color:var(--island-bg-color)}.excalidraw .disable-zen-mode{border-radius:var(--border-radius-lg);background-color:var(--color-gray-20);border:1px solid var(--color-gray-30);padding:10px 20px}.excalidraw .disable-zen-mode:hover{background-color:var(--color-gray-30)}.excalidraw .scroll-back-to-content{border-radius:var(--border-radius-lg);background-color:var(--island-bg-color);color:var(--icon-fill-color);border:1px solid var(--default-border-color);padding:10px 20px;position:absolute;left:50%;bottom:30px;-webkit-transform:translateX(-50%);transform:translateX(-50%);pointer-events:all}.excalidraw .scroll-back-to-content:hover{background-color:var(--button-hover-bg)}.excalidraw .scroll-back-to-content:active{border:1px solid var(--color-primary-darkest)}.excalidraw .help-icon{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--text-primary-color));background-color:var(--island-bg-color);width:var(--lg-button-size);height:var(--lg-button-size)}.excalidraw .help-icon svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.excalidraw .help-icon:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--default-border-color))}.excalidraw .help-icon:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.excalidraw .help-icon.active{background-color:var(--color-primary-light);border-color:var(--color-primary-light)}.excalidraw .help-icon.active:hover{background-color:var(--color-primary-light)}.excalidraw .help-icon.active svg{color:var(--button-color, var(--color-primary-darker))}.excalidraw .help-icon svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}.excalidraw .reset-zoom-button{font-family:var(--ui-font)}.excalidraw .finalize-button{display:grid;grid-auto-flow:column;gap:.4em;margin-top:auto;margin-bottom:auto;-webkit-margin-start:.6em;margin-inline-start:.6em}.excalidraw .undo-redo-buttons,.excalidraw .eraser-buttons{display:grid;grid-auto-flow:column;margin-top:auto;margin-bottom:auto;-webkit-margin-start:.6em;margin-inline-start:.6em}.excalidraw--mobile.excalidraw aside{display:none}.excalidraw--mobile.excalidraw .scroll-back-to-content{bottom:calc(80px + var(--sab, 0));z-index:-1}:root[dir=rtl] .excalidraw .rtl-mirror{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.excalidraw .zen-mode-visibility{visibility:visible;opacity:1;height:auto;width:auto;transition:opacity .5s}.excalidraw .zen-mode-visibility.zen-mode-visibility--hidden{visibility:hidden;opacity:0;height:0;width:0;transition:opacity .5s}.excalidraw .disable-pointerEvents{pointer-events:none !important}.excalidraw.excalidraw--view-mode .App-menu{display:flex;justify-content:space-between}.excalidraw input[type=text],.excalidraw textarea:not(.excalidraw-wysiwyg){color:var(--text-primary-color);border:1.5px solid var(--input-border-color);padding:.75rem;white-space:nowrap;border-radius:var(--space-factor);background-color:var(--input-bg-color)}.excalidraw input[type=text]:not(:focus):hover,.excalidraw textarea:not(.excalidraw-wysiwyg):not(:focus):hover{background-color:var(--input-hover-bg-color)}.excalidraw input[type=text]:focus,.excalidraw textarea:not(.excalidraw-wysiwyg):focus{outline:none;box-shadow:0 0 0 2px var(--focus-highlight-color)}@media print{.excalidraw .App-bottom-bar,.excalidraw .FixedSideContainer,.excalidraw .layer-ui__wrapper{display:none}}.excalidraw ::-webkit-scrollbar{width:3px;height:3px}.excalidraw ::-webkit-scrollbar-thumb{background:var(--scrollbar-thumb);border-radius:10px}.excalidraw ::-webkit-scrollbar-thumb:hover{background:var(--scrollbar-thumb-hover)}.excalidraw ::-webkit-scrollbar-thumb:active{background:var(--scrollbar-thumb)}.excalidraw .mobile-misc-tools-container{position:absolute;top:calc(5rem - var(--editor-container-padding));right:calc(var(--editor-container-padding)*-1);display:flex;flex-direction:column;border:1px solid var(--sidebar-border-color);border-top-left-radius:var(--border-radius-lg);border-bottom-left-radius:var(--border-radius-lg);border-right:0;overflow:hidden;background-color:var(--island-bg-color)}.excalidraw .mobile-misc-tools-container .ToolIcon__icon{border-radius:0}.excalidraw .mobile-misc-tools-container .library-button{border:0}.excalidraw .App-toolbar--mobile{overflow-x:auto;max-width:90vw}.excalidraw .App-toolbar--mobile .ToolIcon__keybinding{display:none}.excalidraw .UserList-Wrapper{margin:0;padding:0;border:none;text-align:left}.excalidraw .UserList-Wrapper legend{display:block;font-size:.75rem;font-weight:400;margin:0 0 .25rem;padding:0}.ErrorSplash.excalidraw{min-height:100vh;padding:20px 0;overflow:auto;display:flex;align-items:center;justify-content:center;-webkit-user-select:text;user-select:text}.ErrorSplash.excalidraw .ErrorSplash-messageContainer{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;background-color:#ffe3e3;border:3px solid #c92a2a}.ErrorSplash.excalidraw .ErrorSplash-paragraph{margin:15px 0;max-width:600px}.ErrorSplash.excalidraw .ErrorSplash-paragraph.align-center{text-align:center}.ErrorSplash.excalidraw .bigger,.ErrorSplash.excalidraw .bigger button{font-size:1.1em}.ErrorSplash.excalidraw .smaller,.ErrorSplash.excalidraw .smaller button{font-size:.9em}.ErrorSplash.excalidraw .ErrorSplash-details{display:flex;flex-direction:column;align-items:flex-start}.ErrorSplash.excalidraw .ErrorSplash-details textarea{width:100%;margin:10px 0;font-family:"Cascadia";font-size:.8em}',""]),t.Z=d},6464:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,"",""]),a.locals={themeFilter:"invert(93%) hue-rotate(180deg)",rightSidebarWidth:"302px"},t.Z=a},5260:function(e,t,n){var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw-hyperlinkContainer{display:flex;align-items:center;justify-content:space-between;position:absolute;box-shadow:0px 2px 4px 0 rgba(0,0,0,.3);z-index:100;background:var(--island-bg-color);border-radius:var(--border-radius-md);box-sizing:border-box;min-height:42px}.excalidraw-hyperlinkContainer-input,.excalidraw-hyperlinkContainer button{z-index:100}.excalidraw-hyperlinkContainer-input,.excalidraw-hyperlinkContainer-link{height:24px;padding:0 8px;line-height:24px;font-size:.9rem;font-weight:500;font-family:var(--ui-font)}.excalidraw-hyperlinkContainer-input{width:18rem;border:none;background-color:rgba(0,0,0,0);color:var(--text-primary-color);outline:none;border:none;box-shadow:none !important}.excalidraw-hyperlinkContainer-link{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:15rem}.excalidraw-hyperlinkContainer button{color:#228be6;background-color:rgba(0,0,0,0) !important;font-weight:500}.excalidraw-hyperlinkContainer button.excalidraw-hyperlinkContainer--remove{color:#c92a2a}.excalidraw-hyperlinkContainer .d-none{display:none}.excalidraw-hyperlinkContainer--remove .ToolIcon__icon svg{color:#fa5252}.excalidraw-hyperlinkContainer .ToolIcon__icon{width:2rem;height:2rem}.excalidraw-hyperlinkContainer__buttons{flex:0 0 auto}",""]),t.Z=a},3645:function(e){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&a[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},1667:function(e){e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},8081:function(e){e.exports=function(e){return e[1]}},202:function(e,t,n){n.d(t,{JQ:function(){return w},vD:function(){return b},y7:function(){return y}});var r=n(1930),i=n(7169),o=n(2335),a=n(1047),s=n(1935),l=n(5710),c=n(6906),u=n(1974),d=n(75),h=n(6340),p=n(7901);function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=(0,p.z)({name:"unbindText",contextItemLabel:"labels.unbindText",trackEvent:{category:"element"},predicate:function(e,t){return(0,d.eD)(e,t).some((function(e){return(0,u.Xo)(e)}))},perform:function(e,t){return(0,d.eD)((0,a.Lm)(e),t).forEach((function(e){var t=(0,l.WJ)(e);if(t){var n,r=(0,l.X1)(t.originalText,(0,h.mO)(t),t.lineHeight),i=r.width,o=r.height,a=r.baseline,u=(0,c.eR)(e.id);(0,c.kT)(e.id);var d=(0,l.FE)(e,t),p=d.x,f=d.y;(0,s.DR)(t,{containerId:null,width:i,height:o,baseline:a,text:t.originalText,x:p,y:f}),(0,s.DR)(e,{boundElements:null===(n=e.boundElements)||void 0===n?void 0:n.filter((function(e){return e.id!==t.id})),height:u||e.height})}})),{elements:e,appState:t,commitToHistory:!0}}}),b=(0,p.z)({name:"bindText",contextItemLabel:"labels.bindText",trackEvent:{category:"element"},predicate:function(e,t){var n=(0,d.eD)(e,t);if(2===n.length){var r,i=(0,a.iB)(n[0])||(0,a.iB)(n[1]);if((0,u.mG)(n[0])?r=n[0]:(0,u.mG)(n[1])&&(r=n[1]),i&&r&&null===(0,l.WJ)(r))return!0}return!1},perform:function(e,t){var n,r,h=(0,d.eD)((0,a.Lm)(e),t);(0,a.iB)(h[0])&&(0,u.mG)(h[1])?(n=h[0],r=h[1]):(n=h[1],r=h[0]),(0,s.DR)(n,{containerId:r.id,verticalAlign:o.oX.MIDDLE,textAlign:o.I8.CENTER}),(0,s.DR)(r,{boundElements:(r.boundElements||[]).concat({type:"text",id:n.id})});var p=r.height;return(0,l.oN)(n,r),(0,c.h_)(r.id,p),{elements:x(e,r,n),appState:v(v({},t),{},{selectedElementIds:(0,i.Z)({},r.id,!0)}),commitToHistory:!0}}}),x=function(e,t,n){var r=e.slice(),i=r.findIndex((function(e){return e.id===n.id}));r.splice(i,1);var o=r.findIndex((function(e){return e.id===t.id}));return r.splice(o+1,0,n),r},w=(0,p.z)({name:"wrapTextInContainer",contextItemLabel:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:function(e,t){var n=(0,d.eD)(e,t),r=n.every((function(e){return(0,a.iB)(e)}));return n.length>0&&r},perform:function(e,t){var n,i=(0,d.eD)((0,a.Lm)(e),t),c=e.slice(),h={},p=f(i);try{var m=function(){var e=n.value;if((0,a.iB)(e)){var i,d=(0,a.Up)({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[].concat((0,r.Z)(e.boundElements||[]),[{id:e.id,type:"text"}]),angle:e.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:"round"===t.currentItemRoundness?{type:(0,u.QI)("rectangle")?o.a6.ADAPTIVE_RADIUS:o.a6.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:e.x-o.gK,y:e.y-o.gK,width:(0,l.NS)(e.width,"rectangle"),height:(0,l.NS)(e.height,"rectangle"),groupIds:e.groupIds});if(null!==(i=e.boundElements)&&void 0!==i&&i.length){var p=e.boundElements.filter((function(e){return"arrow"===e.type})).map((function(e){return e.id}));c.filter((function(e){return p.includes(e.id)})).forEach((function(t){var n,r,i=t.startBinding,o=t.endBinding;(null===(n=i)||void 0===n?void 0:n.elementId)===e.id&&(i=v(v({},i),{},{elementId:d.id})),(null===(r=o)||void 0===r?void 0:r.elementId)===e.id&&(o=v(v({},o),{},{elementId:d.id})),(i||o)&&(0,s.DR)(t,{startBinding:i,endBinding:o},!1)}))}(0,s.DR)(e,{containerId:d.id,verticalAlign:o.oX.MIDDLE,boundElements:null,textAlign:o.I8.CENTER},!1),(0,l.oN)(e,d),c=function(e,t,n){var r=e.slice(),i=r.findIndex((function(e){return e.id===t.id}));r.splice(i,1);var o=r.findIndex((function(e){return e.id===n.id}));return r.splice(o,0,t),r}([].concat((0,r.Z)(c),[d]),d,e),h[d.id]=!0}};for(p.s();!(n=p.n()).done;)m()}catch(e){p.e(e)}finally{p.f()}return{elements:c,appState:v(v({},t),{},{selectedElementIds:h}),commitToHistory:!0}}})},2416:function(e,t,n){n.d(t,{CZ:function(){return S},Lo:function(){return E},Zp:function(){return M},eF:function(){return I},md:function(){return T},mo:function(){return k}});var r=n(2577),i=n(7169),o=n(4499),a=n(3646),s=n(1319),l=n(2335),c=n(1047),u=n(8211),d=n(6066),h=n(75),p=n(2264),f=n(746),m=n(6340),g=n(7901),v=n(1894),y=n(1935),b=n(8897),x=n(4512);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,g.z)({name:"changeViewBackgroundColor",trackEvent:!1,predicate:function(e,t,n,r){return!!r.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled},perform:function(e,t,n){return{appState:_(_({},t),n),commitToHistory:!!n.viewBackgroundColor}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,x.jsx)("div",{style:{position:"relative"},children:(0,x.jsx)(o.z,{label:(0,u.t)("labels.canvasBackground"),type:"canvasBackground",color:n.viewBackgroundColor,onChange:function(e){return r({viewBackgroundColor:e})},isActive:"canvasColorPicker"===n.openPopup,setActive:function(e){return r({openPopup:e?"canvasColorPicker":null})},"data-testid":"canvas-background-picker",elements:t,appState:n})})}});var k=(0,g.z)({name:"clearCanvas",trackEvent:{category:"canvas"},predicate:function(e,t,n,r){return!!r.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled},perform:function(e,t,n,r){return r.imageCache.clear(),{elements:e.map((function(e){return(0,y.BE)(e,{isDeleted:!0})})),appState:_(_({},(0,b.im)()),{},{files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,showStats:t.showStats,pasteDialog:t.pasteDialog,activeTool:"image"===t.activeTool.type?_(_({},t.activeTool),{},{type:"selection"}):t.activeTool}),commitToHistory:!0}}}),E=(0,g.z)({name:"zoomIn",viewMode:!0,trackEvent:{category:"canvas"},perform:function(e,t,n,r){return{appState:_(_({},t),(0,f.E)({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:(0,h.j)(t.zoom.value+l.V4)},t)),commitToHistory:!1}},PanelComponent:function(e){var t=e.updateData;return(0,x.jsx)(s.V,{type:"button",className:"zoom-in-button zoom-button",icon:a.Sd,title:"".concat((0,u.t)("buttons.zoomIn"),"  ").concat((0,m.uY)("CtrlOrCmd++")),"aria-label":(0,u.t)("buttons.zoomIn"),onClick:function(){t(null)}})},keyTest:function(e){return(e.code===d.aU.EQUAL||e.code===d.aU.NUM_ADD)&&(e[d.tW.CTRL_OR_CMD]||e.shiftKey)}}),S=(0,g.z)({name:"zoomOut",viewMode:!0,trackEvent:{category:"canvas"},perform:function(e,t,n,r){return{appState:_(_({},t),(0,f.E)({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:(0,h.j)(t.zoom.value-l.V4)},t)),commitToHistory:!1}},PanelComponent:function(e){var t=e.updateData;return(0,x.jsx)(s.V,{type:"button",className:"zoom-out-button zoom-button",icon:a.xL,title:"".concat((0,u.t)("buttons.zoomOut"),"  ").concat((0,m.uY)("CtrlOrCmd+-")),"aria-label":(0,u.t)("buttons.zoomOut"),onClick:function(){t(null)}})},keyTest:function(e){return(e.code===d.aU.MINUS||e.code===d.aU.NUM_SUBTRACT)&&(e[d.tW.CTRL_OR_CMD]||e.shiftKey)}}),C=((0,g.z)({name:"resetZoom",viewMode:!0,trackEvent:{category:"canvas"},perform:function(e,t,n,r){return{appState:_(_({},t),(0,f.E)({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:(0,h.j)(1)},t)),commitToHistory:!1}},PanelComponent:function(e){var t=e.updateData,n=e.appState;return(0,x.jsx)(v.u,{label:(0,u.t)("buttons.resetZoom"),style:{height:"100%"},children:(0,x.jsxs)(s.V,{type:"button",className:"reset-zoom-button zoom-button",title:(0,u.t)("buttons.resetZoom"),"aria-label":(0,u.t)("buttons.resetZoom"),onClick:function(){t(null)},children:[(100*n.zoom.value).toFixed(0),"%"]})})},keyTest:function(e){return(e.code===d.aU.ZERO||e.code===d.aU.NUM_ZERO)&&(e[d.tW.CTRL_OR_CMD]||e.shiftKey)}}),function(e,t){var n=(0,r.Z)(e,4),i=n[0],o=n[1],a=n[2],s=n[3],c=a-i,u=t.width/c,d=s-o,h=t.height/d,p=Math.min(u,h),f=Math.floor(p/l.V4)*l.V4;return Math.min(Math.max(f,l.Zj),1)}),T=function(e,t,n){var i=(0,c.Lm)(e),o=(0,h.eD)(i,t),a=n&&o.length>0?(0,c.KP)(o):(0,c.KP)(i),s={value:C(a,{width:t.width,height:t.height})},l=(0,r.Z)(a,4),u=l[0],d=l[1],f=(u+l[2])/2,m=(d+l[3])/2;return{appState:_(_(_({},t),(0,p.s)({scenePoint:{x:f,y:m},viewportDimensions:{width:t.width,height:t.height},zoom:s})),{},{zoom:s}),commitToHistory:!1}},M=((0,g.z)({name:"zoomToSelection",trackEvent:{category:"canvas"},perform:function(e,t){return T(e,t,!0)},keyTest:function(e){return e.code===d.aU.TWO&&e.shiftKey&&!e.altKey&&!e[d.tW.CTRL_OR_CMD]}}),(0,g.z)({name:"zoomToFit",viewMode:!0,trackEvent:{category:"canvas"},perform:function(e,t){return T(e,t,!1)},keyTest:function(e){return e.code===d.aU.ONE&&e.shiftKey&&!e.altKey&&!e[d.tW.CTRL_OR_CMD]}}),(0,g.z)({name:"toggleTheme",viewMode:!0,trackEvent:{category:"canvas"},perform:function(e,t,n){return{appState:_(_({},t),{},{theme:n||(t.theme===l.C6.LIGHT?l.C6.DARK:l.C6.LIGHT)}),commitToHistory:!1}},keyTest:function(e){return e.altKey&&e.shiftKey&&e.code===d.aU.D},predicate:function(e,t,n,r){return!!r.props.UIOptions.canvasActions.toggleTheme}})),I=((0,g.z)({name:"toggleEraserTool",trackEvent:{category:"toolbar"},perform:function(e,t){var n;return n=(0,b.EN)(t)?(0,m.Om)(t,_(_({},t.activeTool.lastActiveTool||{type:"selection"}),{},{lastActiveToolBeforeEraser:null})):(0,m.Om)(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:_(_({},t),{},{selectedElementIds:{},selectedGroupIds:{},activeTool:n}),commitToHistory:!0}},keyTest:function(e){return e.key===d.tW.E}}),(0,g.z)({name:"toggleHandTool",trackEvent:{category:"toolbar"},perform:function(e,t,n,r){var i;return(0,b.l$)(t)?i=(0,m.Om)(t,_(_({},t.activeTool.lastActiveTool||{type:"selection"}),{},{lastActiveToolBeforeEraser:null})):(i=(0,m.Om)(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),(0,m.KJ)(r.canvas,l.oc.GRAB)),{appState:_(_({},t),{},{selectedElementIds:{},selectedGroupIds:{},activeTool:i}),commitToHistory:!0}},keyTest:function(e){return e.key===d.tW.H}}))},4688:function(e,t,n){n.d(t,{FA:function(){return _},ZM:function(){return w},jK:function(){return k},uN:function(){return b},yQ:function(){return x},zp:function(){return E}});var r=n(7169),i=n(8950),o=n(2975),a=n.n(o),s=n(6066),l=n(7901),c=n(6665),u=n(533),d=n(1868),h=n(9485),p=n(1047),f=n(8211);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v,y,b=(0,l.z)({name:"copy",trackEvent:{category:"element"},perform:function(e,t,n,r){var i=(0,d.eD)(e,t,!0);return(0,c.vQ)(i,t,r.files),{commitToHistory:!1}},predicate:function(e,t,n,r){return r.device.isMobile&&!!navigator.clipboard},contextItemLabel:"labels.copy",keyTest:void 0}),x=(0,l.z)({name:"paste",trackEvent:{category:"element"},perform:function(e,t,n,r){return r.pasteFromClipboard(null),{commitToHistory:!1}},predicate:function(e,t,n,r){return r.device.isMobile&&!!navigator.clipboard},contextItemLabel:"labels.paste",keyTest:void 0}),w=(0,l.z)({name:"cut",trackEvent:{category:"element"},perform:function(e,t,n,r){return b.perform(e,t,n,r),u.X.perform(e,t)},predicate:function(e,t,n,r){return r.device.isMobile&&!!navigator.clipboard},contextItemLabel:"labels.cut",keyTest:function(e){return e[s.tW.CTRL_OR_CMD]&&e.key===s.tW.X}}),_=(0,l.z)({name:"copyAsSvg",trackEvent:{category:"element"},perform:(v=(0,i.Z)(a().mark((function e(t,n,r,i){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.canvas){e.next=2;break}return e.abrupt("return",{commitToHistory:!1});case 2:return o=(0,d.eD)((0,p.Lm)(t),n,!0),e.prev=3,e.next=6,(0,h.p1)("clipboard-svg",o.length?o:(0,p.Lm)(t),n,i.files,n);case 6:return e.abrupt("return",{commitToHistory:!1});case 9:return e.prev=9,e.t0=e.catch(3),console.error(e.t0),e.abrupt("return",{appState:g(g({},n),{},{errorMessage:e.t0.message}),commitToHistory:!1});case 13:case"end":return e.stop()}}),e,null,[[3,9]])}))),function(e,t,n,r){return v.apply(this,arguments)}),predicate:function(e){return c.wx&&e.length>0},contextItemLabel:"labels.copyAsSvg"}),k=(0,l.z)({name:"copyAsPng",trackEvent:{category:"element"},perform:(y=(0,i.Z)(a().mark((function e(t,n,r,i){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.canvas){e.next=2;break}return e.abrupt("return",{commitToHistory:!1});case 2:return o=(0,d.eD)((0,p.Lm)(t),n,!0),e.prev=3,e.next=6,(0,h.p1)("clipboard",o.length?o:(0,p.Lm)(t),n,i.files,n);case 6:return e.abrupt("return",{appState:g(g({},n),{},{toast:{message:(0,f.t)("toast.copyToClipboardAsPng",{exportSelection:o.length?(0,f.t)("toast.selection"):(0,f.t)("toast.canvas"),exportColorScheme:n.exportWithDarkMode?(0,f.t)("buttons.darkMode"):(0,f.t)("buttons.lightMode")})}}),commitToHistory:!1});case 9:return e.prev=9,e.t0=e.catch(3),console.error(e.t0),e.abrupt("return",{appState:g(g({},n),{},{errorMessage:e.t0.message}),commitToHistory:!1});case 13:case"end":return e.stop()}}),e,null,[[3,9]])}))),function(e,t,n,r){return y.apply(this,arguments)}),predicate:function(e){return c.vt&&e.length>0},contextItemLabel:"labels.copyAsPng",keyTest:function(e){return e.code===s.aU.C&&e.altKey&&e.shiftKey}}),E=(0,l.z)({name:"copyText",trackEvent:{category:"element"},perform:function(e,t){var n=(0,d.eD)((0,p.Lm)(e),t,!0).reduce((function(e,t){return(0,p.iB)(t)&&e.push(t.text),e}),[]).join("\n\n");return(0,c.dd)(n),{commitToHistory:!1}},predicate:function(e,t){return c.wx&&(0,d.eD)(e,t,!0).some(p.iB)},contextItemLabel:"labels.copyText"})},533:function(e,t,n){n.d(t,{X:function(){return w}});var r=n(7169),i=n(75),o=n(6066),a=n(1319),s=n(8211),l=n(7901),c=n(1047),u=n(1935),d=n(242),h=n(6938),p=n(8290),f=n(1974),m=n(6340),g=n(3646),v=n(4512);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e,t){if(e.editingGroupId){var n=(0,d.Fb)((0,c.Lm)(t),e.editingGroupId);if(n.length)return b(b({},e),{},{selectedElementIds:(0,r.Z)({},n[0].id,!0)})}return e},w=(0,l.z)({name:"deleteSelectedElements",trackEvent:{category:"element",action:"delete"},perform:function(e,t){if(t.editingLinearElement){var n=t.editingLinearElement,r=n.elementId,o=n.selectedPointsIndices,a=n.startBindingElement,s=n.endBindingElement,l=h._.getElement(r);if(!l)return!1;if(null==o)return!1;if(l.points.length<2){var d=e.map((function(e){return e.id===l.id?(0,u.BE)(e,{isDeleted:!0}):e}));return{elements:d,appState:b(b({},x(t,d)),{},{editingLinearElement:null}),commitToHistory:!1}}var g={startBindingElement:null!=o&&o.includes(0)?null:a,endBindingElement:null!=o&&o.includes(l.points.length-1)?null:s};return h._.deletePoints(l,o),{elements:e,appState:b(b({},t),{},{editingLinearElement:b(b(b({},t.editingLinearElement),g),{},{selectedPointsIndices:(null==o?void 0:o[0])>0?[o[0]-1]:[0]})}),commitToHistory:!0}}var v=function(e,t){return{elements:e.map((function(e){return t.selectedElementIds[e.id]||(0,f.Xh)(e)&&t.selectedElementIds[e.containerId]?(0,u.BE)(e,{isDeleted:!0}):e})),appState:b(b({},t),{},{selectedElementIds:{}})}}(e,t),y=v.elements,w=v.appState;return(0,p.$q)(y,e.filter((function(e){var n=e.id;return t.selectedElementIds[n]}))),{elements:y,appState:b(b({},w=x(w,y)),{},{activeTool:(0,m.Om)(t,{type:"selection"}),multiElement:null}),commitToHistory:(0,i.N)((0,c.Lm)(e),t)}},contextItemLabel:"labels.delete",keyTest:function(e,t,n){return(e.key===o.tW.BACKSPACE||e.key===o.tW.DELETE)&&!e[o.tW.CTRL_OR_CMD]},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,v.jsx)(a.V,{type:"button",icon:g.XH,title:(0,s.t)("labels.delete"),"aria-label":(0,s.t)("labels.delete"),onClick:function(){return r(null)},visible:(0,i.N)((0,c.Lm)(t),n)})}})},8671:function(e,t,n){n.d(t,{_d:function(){return te},mM:function(){return ee},ns:function(){return Q}});var r=n(8950),i=n(2577),o=n(7169),a=n(2975),s=n.n(a),l=n(3646),c=n(487),u=n.n(c),d=n(631),h=n.n(d),p=n(2052),f=n.n(p),m=n(4010),g=n.n(m),v=n(1469),y=n.n(v),b=n(9329),x=n.n(b),w=n(6759),_={};_.styleTagTransform=x(),_.setAttributes=g(),_.insert=f().bind(null,"head"),_.domAPI=h(),_.insertStyleElement=y(),u()(w.Z,_),w.Z&&w.Z.locals&&w.Z.locals;var k=n(9787),E=n(6340),S=n(532),C={};C.styleTagTransform=x(),C.setAttributes=g(),C.insert=f().bind(null,"head"),C.domAPI=h(),C.insertStyleElement=y(),u()(S.Z,C),S.Z&&S.Z.locals&&S.Z.locals;var T=n(2134),M=n(4512),I=function(e){var t=(0,T.J0)().id,n=(0,k.useState)(e.value),r=(0,i.Z)(n,2),o=r[0],a=r[1];return(0,M.jsxs)("div",{className:"ProjectName",children:[(0,M.jsx)("label",{className:"ProjectName-label",htmlFor:"filename",children:"".concat(e.label).concat(e.isNameEditable?"":":")}),e.isNameEditable?(0,M.jsx)("input",{type:"text",className:"TextInput",onBlur:function(t){(0,E.qz)(t.target);var n=t.target.value;n!==e.value&&e.onChange(n)},onKeyDown:function(e){if("Enter"===e.key){if(e.preventDefault(),e.nativeEvent.isComposing||229===e.keyCode)return;e.currentTarget.blur()}},id:"".concat(t,"-filename"),value:o,onChange:function(e){return a(e.target.value)}}):(0,M.jsx)("span",{className:"TextInput TextInput--readonly",id:"".concat(t,"-filename"),children:e.value})]})},O=n(1319),A=n(1894),P=(n(5422),n(8211)),D=n(2335),L=function(e){var t=e.title||("dark"===e.value?(0,P.t)("buttons.lightMode"):(0,P.t)("buttons.darkMode"));return(0,M.jsx)(O.V,{type:"icon",icon:e.value===D.C6.LIGHT?R.MOON:R.SUN,title:t,"aria-label":t,onClick:function(){return e.onChange(e.value===D.C6.DARK?D.C6.LIGHT:D.C6.DARK)},"data-testid":"toggle-dark-mode"})},R={SUN:(0,M.jsx)("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:(0,M.jsx)("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:(0,M.jsx)("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:(0,M.jsx)("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},z=n(9485),j=n(1047),N=n(434);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(){var e=(0,r.Z)(s().mark((function e(t,n,r){var i,o,a,l,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(i=n).exportBackground,a=i.viewBackgroundColor,l=i.name,c=i.fileHandle,u=(0,N.Qk)(c),c&&(0,N.DQ)(u)){e.next=4;break}throw new Error("fileHandle should exist and should be of type svg or png when resaving");case 4:return n=F(F({},n),{},{exportEmbedScene:!0}),e.next=7,(0,z.p1)(u,(0,j.Lm)(t),n,r,{exportBackground:o,viewBackgroundColor:a,name:l,fileHandle:c});case 7:return e.abrupt("return",{fileHandle:c});case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),U=n(6066),$=n(7901),Z=n(3807),H=n(4162),W=n(75),q=n(1393);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,$.z)({name:"changeProjectName",trackEvent:!1,perform:function(e,t,n){return{appState:K(K({},t),{},{name:n}),commitToHistory:!1}},PanelComponent:function(e){var t=e.appState,n=e.updateData,r=e.appProps;return(0,M.jsx)(I,{label:(0,P.t)("labels.fileTitle"),value:t.name||"Unnamed",onChange:function(e){return n(e)},isNameEditable:void 0===r.name&&!t.viewModeEnabled})}}),(0,$.z)({name:"changeExportScale",trackEvent:{category:"export",action:"scale"},perform:function(e,t,n){return{appState:K(K({},t),{},{exportScale:n}),commitToHistory:!1}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData,o=(0,j.Lm)(t),a=(0,W.N)(o,n)?(0,W.eD)(o,n):o;return(0,M.jsx)(M.Fragment,{children:D.ZB.map((function(e){var t=(0,H.Cg)(a,D.qy,e),o=(0,i.Z)(t,2),s=o[0],l=o[1],c="".concat((0,P.t)("buttons.scale")," ").concat(e,"x (").concat(s,"x").concat(l,")");return(0,M.jsx)(O.V,{size:"small",type:"radio",icon:"".concat(e,"x"),name:"export-canvas-scale",title:c,"aria-label":c,id:"export-canvas-scale",checked:e===n.exportScale,onChange:function(){return r(e)}},e)}))})}}),(0,$.z)({name:"changeExportBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:function(e,t,n){return{appState:K(K({},t),{},{exportBackground:n}),commitToHistory:!1}},PanelComponent:function(e){var t=e.appState,n=e.updateData;return(0,M.jsx)(Z.o,{checked:t.exportBackground,onChange:function(e){return n(e)},children:(0,P.t)("labels.withBackground")})}}),(0,$.z)({name:"changeExportEmbedScene",trackEvent:{category:"export",action:"embedScene"},perform:function(e,t,n){return{appState:K(K({},t),{},{exportEmbedScene:n}),commitToHistory:!1}},PanelComponent:function(e){var t=e.appState,n=e.updateData;return(0,M.jsxs)(Z.o,{checked:t.exportEmbedScene,onChange:function(e){return n(e)},children:[(0,P.t)("labels.exportEmbedScene"),(0,M.jsx)(A.u,{label:(0,P.t)("labels.exportEmbedScene_details"),long:!0,children:(0,M.jsx)("div",{className:"excalidraw-tooltip-icon",children:l.Vl})})]})}});var Y,X,J,Q=(0,$.z)({name:"saveToActiveFile",trackEvent:{category:"export"},predicate:function(e,t,n,r){return!!r.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled},perform:(Y=(0,r.Z)(s().mark((function e(t,n,r,i){var o,a,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!!n.fileHandle,e.prev=1,!(0,N.g8)(n.fileHandle)){e.next=8;break}return e.next=5,V(t,n,i.files);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,(0,z.Um)(t,n,i.files);case 10:e.t0=e.sent;case 11:return a=e.t0,l=a.fileHandle,e.abrupt("return",{commitToHistory:!1,appState:K(K({},n),{},{fileHandle:l,toast:o?{message:null!=l&&l.name?(0,P.t)("toast.fileSavedToFilename").replace("{filename}",'"'.concat(l.name,'"')):(0,P.t)("toast.fileSaved")}:null})});case 16:return e.prev=16,e.t1=e.catch(1),"AbortError"!==(null===e.t1||void 0===e.t1?void 0:e.t1.name)?console.error(e.t1):console.warn(e.t1),e.abrupt("return",{commitToHistory:!1});case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),function(e,t,n,r){return Y.apply(this,arguments)}),keyTest:function(e){return e.key===U.tW.S&&e[U.tW.CTRL_OR_CMD]&&!e.shiftKey}}),ee=(0,$.z)({name:"saveFileToDisk",viewMode:!0,trackEvent:{category:"export"},perform:(X=(0,r.Z)(s().mark((function e(t,n,r,i){var o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,z.Um)(t,K(K({},n),{},{fileHandle:null}),i.files);case 3:return o=e.sent,a=o.fileHandle,e.abrupt("return",{commitToHistory:!1,appState:K(K({},n),{},{fileHandle:a})});case 8:return e.prev=8,e.t0=e.catch(0),"AbortError"!==(null===e.t0||void 0===e.t0?void 0:e.t0.name)?console.error(e.t0):console.warn(e.t0),e.abrupt("return",{commitToHistory:!1});case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(e,t,n,r){return X.apply(this,arguments)}),keyTest:function(e){return e.key===U.tW.S&&e.shiftKey&&e[U.tW.CTRL_OR_CMD]},PanelComponent:function(e){var t=e.updateData;return(0,M.jsx)(O.V,{type:"button",icon:l.po,title:(0,P.t)("buttons.saveAs"),"aria-label":(0,P.t)("buttons.saveAs"),showAriaLabel:(0,T.Fy)().isMobile,hidden:!q.kr,onClick:function(){return t(null)},"data-testid":"save-as-button"})}}),te=(0,$.z)({name:"loadScene",trackEvent:{category:"export"},predicate:function(e,t,n,r){return!!r.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled},perform:(J=(0,r.Z)(s().mark((function e(t,n,r,i){var o,a,l,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,z.n8)(n,t);case 3:return o=e.sent,a=o.elements,l=o.appState,c=o.files,e.abrupt("return",{elements:a,appState:l,files:c,commitToHistory:!0});case 10:if(e.prev=10,e.t0=e.catch(0),"AbortError"!==(null===e.t0||void 0===e.t0?void 0:e.t0.name)){e.next=15;break}return console.warn(e.t0),e.abrupt("return",!1);case 15:return e.abrupt("return",{elements:t,appState:K(K({},n),{},{errorMessage:e.t0.message}),files:i.files,commitToHistory:!1});case 16:case"end":return e.stop()}}),e,null,[[0,10]])}))),function(e,t,n,r){return J.apply(this,arguments)}),keyTest:function(e){return e[U.tW.CTRL_OR_CMD]&&e.key===U.tW.O}});(0,$.z)({name:"exportWithDarkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:function(e,t,n){return{appState:K(K({},t),{},{exportWithDarkMode:n}),commitToHistory:!1}},PanelComponent:function(e){var t=e.appState,n=e.updateData;return(0,M.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:(0,M.jsx)(L,{value:t.exportWithDarkMode?D.C6.DARK:D.C6.LIGHT,onChange:function(e){n(e===D.C6.DARK)},title:(0,P.t)("labels.toggleExportColorScheme")})})}})},6208:function(e,t,n){n.d(t,{Tu:function(){return Y},Zq:function(){return X}});var r=n(1930),i=n(7169),o=n(7047),a=n(45),s=n(4512),l=function(e){return(0,s.jsx)("div",{className:"buttonList buttonListIcon",children:e.options.map((function(t){var n;return"button"===e.type?(0,s.jsx)("button",{onClick:function(n){return e.onClick(t.value,n)},className:(0,a.Z)({active:null!==(n=t.active)&&void 0!==n?n:e.value===t.value}),"data-testid":t.testId,title:t.text,children:t.icon},t.text):(0,s.jsxs)("label",{className:(0,a.Z)({active:e.value===t.value}),title:t.text,children:[(0,s.jsx)("input",{type:"radio",name:e.group,onChange:function(){return e.onChange(t.value)},checked:e.value===t.value,"data-testid":t.testId}),t.icon]},t.text)}))})},c=n(4499),u=n(2577),d=n(9787),h=n.n(d),p=n(2891),f=n(487),m=n.n(f),g=n(631),v=n.n(g),y=n(2052),b=n.n(y),x=n(4010),w=n.n(x),_=n(1469),k=n.n(_),E=n(9329),S=n.n(E),C=n(9478),T={};T.styleTagTransform=S(),T.setAttributes=w(),T.insert=b().bind(null,"head"),T.domAPI=v(),T.insertStyleElement=k(),m()(C.Z,T),C.Z&&C.Z.locals&&C.Z.locals;var M=n(6066),I=n(8211);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){var t=e.options,n=e.value,r=e.label,i=e.onChange,o=e.onClose,l=h().useRef(),c=h().useRef(),u=h().useRef(null);return h().useEffect((function(){c.current?c.current.focus():u.current&&u.current.focus()}),[]),(0,s.jsx)("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":r,onKeyDown:function(e){var n=t.find((function(t){return t.keyBinding===e.key.toLowerCase()}));if(e.metaKey||e.altKey||e.ctrlKey||!n)if(e.key===M.tW.TAB)setTimeout((function(){c.current!==document.activeElement&&o()}),0);else if((0,M.Wl)(e.key)){var r=document.activeElement,i=(0,I.G3)().rtl,a=Array.prototype.indexOf.call(u.current.children,r);if(-1!==a){var s=t.length,l=a;switch(e.key){case i?M.tW.ARROW_LEFT:M.tW.ARROW_RIGHT:case M.tW.ARROW_DOWN:l=(a+1)%s;break;case i?M.tW.ARROW_RIGHT:M.tW.ARROW_LEFT:case M.tW.ARROW_UP:l=(s+a-1)%s}u.current.children[l].focus()}e.preventDefault()}else e.key!==M.tW.ESCAPE&&e.key!==M.tW.ENTER||(e.preventDefault(),o());else{var d=t.indexOf(n);u.current.children[d].focus(),e.preventDefault()}e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()},children:(0,s.jsx)("div",{className:"picker-content",ref:u,children:t.map((function(e,t){return(0,s.jsxs)("button",{className:(0,a.Z)("picker-option",{active:n===e.value}),onClick:function(t){t.currentTarget.focus(),i(e.value)},title:"".concat(e.text,"  ").concat(e.keyBinding.toUpperCase()),"aria-label":e.text||"none","aria-keyshortcuts":e.keyBinding,ref:function(r){r&&0===t&&(l.current=r),r&&e.value===n&&(c.current=r)},onFocus:function(){i(e.value)},children:[e.icon,(0,s.jsx)("span",{className:"picker-keybinding",children:e.keyBinding})]},e.text)}))})})}function D(e){var t,n=e.value,r=e.label,i=e.options,o=e.onChange,a=e.group,l=void 0===a?"":a,c=h().useState(!1),d=(0,u.Z)(c,2),f=d[0],m=d[1],g=h().useRef(null),v=(0,I.G3)().rtl;return(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{name:l,className:f?"active":"","aria-label":r,onClick:function(){return m(!f)},ref:g,children:null===(t=i.find((function(e){return e.value===n})))||void 0===t?void 0:t.icon}),(0,s.jsx)(h().Suspense,{fallback:"",children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.J,A(A({onCloseRequest:function(e){return e.target!==g.current&&m(!1)}},v?{right:5.5}:{left:-5.5}),{},{children:(0,s.jsx)(P,{options:i,value:n,label:r,onChange:o,onClose:function(){var e;m(!1),null===(e=g.current)||void 0===e||e.focus()}})})),(0,s.jsx)("div",{className:"picker-triangle"})]}):null})]})}var L=n(3646),R=n(2335),z=n(1047),j=n(1935),N=n(5710),B=n(1974),F=n(6954),V=n(75),U=n(8120),$=n(6340),Z=n(7901);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(0,$.xn)((0,V.eD)(e,t,r));return e.map((function(e){var r;return i.get(e.id)||e.id===(null===(r=t.editingElement)||void 0===r?void 0:r.id)?n(e):e}))},G=function(e,t,n,r){var i,o,a=t.editingElement,s=(0,z.Lm)(e);return null!==(i=null!==(o=a&&n(a))&&void 0!==o?o:(0,V.N)(s,t)?(0,V.PR)(s,t,n):r)&&void 0!==i?i:null},K=function(e,t,n,i){var o=new Set;return{elements:q(e,t,(function(e){if((0,z.iB)(e)){var t=n(e);o.add(t);var r=(0,j.BE)(e,{fontSize:t});return(0,z.oN)(r,(0,N.tl)(e)),i=e,a=r,(0,B.Xh)(a)?a:(0,j.DR)(a,{x:"left"===i.textAlign?i.x:i.x+(i.width-a.width)/("center"===i.textAlign?2:1),y:i.y+(i.height-a.height)/2},!1)}var i,a;return e}),!0),appState:W(W({},t),{},{currentItemFontSize:1===o.size?(0,r.Z)(o)[0]:null!=i?i:t.currentItemFontSize}),commitToHistory:!0}},Y=((0,Z.z)({name:"changeStrokeColor",trackEvent:!1,perform:function(e,t,n){return W(W({},n.currentItemStrokeColor&&{elements:q(e,t,(function(e){return(0,U.PD)(e.type)?(0,j.BE)(e,{strokeColor:n.currentItemStrokeColor}):e}),!0)}),{},{appState:W(W({},t),n),commitToHistory:!!n.currentItemStrokeColor})},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{"aria-hidden":"true",children:(0,I.t)("labels.stroke")}),(0,s.jsx)(c.z,{type:"elementStroke",label:(0,I.t)("labels.stroke"),color:G(t,n,(function(e){return e.strokeColor}),n.currentItemStrokeColor),onChange:function(e){return r({currentItemStrokeColor:e})},isActive:"strokeColorPicker"===n.openPopup,setActive:function(e){return r({openPopup:e?"strokeColorPicker":null})},elements:t,appState:n})]})}}),(0,Z.z)({name:"changeBackgroundColor",trackEvent:!1,perform:function(e,t,n){return W(W({},n.currentItemBackgroundColor&&{elements:q(e,t,(function(e){return(0,j.BE)(e,{backgroundColor:n.currentItemBackgroundColor})}))}),{},{appState:W(W({},t),n),commitToHistory:!!n.currentItemBackgroundColor})},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{"aria-hidden":"true",children:(0,I.t)("labels.background")}),(0,s.jsx)(c.z,{type:"elementBackground",label:(0,I.t)("labels.background"),color:G(t,n,(function(e){return e.backgroundColor}),n.currentItemBackgroundColor),onChange:function(e){return r({currentItemBackgroundColor:e})},isActive:"backgroundColorPicker"===n.openPopup,setActive:function(e){return r({openPopup:e?"backgroundColorPicker":null})},elements:t,appState:n})]})}}),(0,Z.z)({name:"changeFillStyle",trackEvent:!1,perform:function(e,t,n,r){return(0,o.L)("element","changeFillStyle","".concat(n," (").concat(r.device.isMobile?"mobile":"desktop",")")),{elements:q(e,t,(function(e){return(0,j.BE)(e,{fillStyle:n})})),appState:W(W({},t),{},{currentItemFillStyle:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData,i=(0,V.eD)(t,n),o=i.length>0&&i.every((function(e){return"zigzag"===e.fillStyle}));return(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("legend",{children:(0,I.t)("labels.fill")}),(0,s.jsx)(l,{type:"button",options:[{value:"hachure",text:"".concat(o?(0,I.t)("labels.zigzag"):(0,I.t)("labels.hachure")," (").concat((0,$.uY)("Alt-Click"),")"),icon:o?L.lF:L.a0,active:!!o||void 0},{value:"cross-hatch",text:(0,I.t)("labels.crossHatch"),icon:L.np},{value:"solid",text:(0,I.t)("labels.solid"),icon:L.X7}],value:G(t,n,(function(e){return e.fillStyle}),n.currentItemFillStyle),onClick:function(e,t){var n=t.altKey&&"hachure"===e&&i.every((function(e){return"hachure"===e.fillStyle}))?"zigzag":e;r(n)}})]})}}),(0,Z.z)({name:"changeStrokeWidth",trackEvent:!1,perform:function(e,t,n){return{elements:q(e,t,(function(e){return(0,j.BE)(e,{strokeWidth:n})})),appState:W(W({},t),{},{currentItemStrokeWidth:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("legend",{children:(0,I.t)("labels.strokeWidth")}),(0,s.jsx)(l,{group:"stroke-width",options:[{value:1,text:(0,I.t)("labels.thin"),icon:L.ZA},{value:2,text:(0,I.t)("labels.bold"),icon:L.Wl},{value:4,text:(0,I.t)("labels.extraBold"),icon:L.m9}],value:G(t,n,(function(e){return e.strokeWidth}),n.currentItemStrokeWidth),onChange:function(e){return r(e)}})]})}}),(0,Z.z)({name:"changeSloppiness",trackEvent:!1,perform:function(e,t,n){return{elements:q(e,t,(function(e){return(0,j.BE)(e,{seed:(0,F.LU)(),roughness:n})})),appState:W(W({},t),{},{currentItemRoughness:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("legend",{children:(0,I.t)("labels.sloppiness")}),(0,s.jsx)(l,{group:"sloppiness",options:[{value:0,text:(0,I.t)("labels.architect"),icon:L.bf},{value:1,text:(0,I.t)("labels.artist"),icon:L.kM},{value:2,text:(0,I.t)("labels.cartoonist"),icon:L.W2}],value:G(t,n,(function(e){return e.roughness}),n.currentItemRoughness),onChange:function(e){return r(e)}})]})}}),(0,Z.z)({name:"changeStrokeStyle",trackEvent:!1,perform:function(e,t,n){return{elements:q(e,t,(function(e){return(0,j.BE)(e,{strokeStyle:n})})),appState:W(W({},t),{},{currentItemStrokeStyle:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("legend",{children:(0,I.t)("labels.strokeStyle")}),(0,s.jsx)(l,{group:"strokeStyle",options:[{value:"solid",text:(0,I.t)("labels.strokeStyle_solid"),icon:L.ZA},{value:"dashed",text:(0,I.t)("labels.strokeStyle_dashed"),icon:L.a5},{value:"dotted",text:(0,I.t)("labels.strokeStyle_dotted"),icon:L.aT}],value:G(t,n,(function(e){return e.strokeStyle}),n.currentItemStrokeStyle),onChange:function(e){return r(e)}})]})}}),(0,Z.z)({name:"changeOpacity",trackEvent:!1,perform:function(e,t,n){return{elements:q(e,t,(function(e){return(0,j.BE)(e,{opacity:n})}),!0),appState:W(W({},t),{},{currentItemOpacity:n}),commitToHistory:!0}},PanelComponent:function(e){var t,n=e.elements,r=e.appState,i=e.updateData;return(0,s.jsxs)("label",{className:"control-label",children:[(0,I.t)("labels.opacity"),(0,s.jsx)("input",{type:"range",min:"0",max:"100",step:"10",onChange:function(e){return i(+e.target.value)},value:null!==(t=G(n,r,(function(e){return e.opacity}),r.currentItemOpacity))&&void 0!==t?t:void 0})]})}}),(0,Z.z)({name:"changeFontSize",trackEvent:!1,perform:function(e,t,n){return K(e,t,(function(){return n}),n)},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("legend",{children:(0,I.t)("labels.fontSize")}),(0,s.jsx)(l,{group:"font-size",options:[{value:16,text:(0,I.t)("labels.small"),icon:L.q0,testId:"fontSize-small"},{value:20,text:(0,I.t)("labels.medium"),icon:L.nq,testId:"fontSize-medium"},{value:28,text:(0,I.t)("labels.large"),icon:L.tW,testId:"fontSize-large"},{value:36,text:(0,I.t)("labels.veryLarge"),icon:L.OA,testId:"fontSize-veryLarge"}],value:G(t,n,(function(e){if((0,z.iB)(e))return e.fontSize;var t=(0,N.WJ)(e);return t?t.fontSize:null}),n.currentItemFontSize||R.n5),onChange:function(e){return r(e)}})]})}}),(0,Z.z)({name:"decreaseFontSize",trackEvent:!1,perform:function(e,t,n){return K(e,t,(function(e){return Math.round(1/1.1*e.fontSize)}))},keyTest:function(e){return e[M.tW.CTRL_OR_CMD]&&e.shiftKey&&(e.key===M.tW.CHEVRON_LEFT||e.key===M.tW.COMMA)}})),X=(0,Z.z)({name:"increaseFontSize",trackEvent:!1,perform:function(e,t,n){return K(e,t,(function(e){return Math.round(1.1*e.fontSize)}))},keyTest:function(e){return e[M.tW.CTRL_OR_CMD]&&e.shiftKey&&(e.key===M.tW.CHEVRON_RIGHT||e.key===M.tW.PERIOD)}});(0,Z.z)({name:"changeFontFamily",trackEvent:!1,perform:function(e,t,n){return{elements:q(e,t,(function(e){if((0,z.iB)(e)){var t=(0,j.BE)(e,{fontFamily:n,lineHeight:(0,N.PT)(n)});return(0,z.oN)(t,(0,N.tl)(e)),t}return e}),!0),appState:W(W({},t),{},{currentItemFontFamily:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData,i=[{value:R.ut.Virgil,text:(0,I.t)("labels.handDrawn"),icon:L.Pm},{value:R.ut.Helvetica,text:(0,I.t)("labels.normal"),icon:L.vo},{value:R.ut.Cascadia,text:(0,I.t)("labels.code"),icon:L.z6}];return(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("legend",{children:(0,I.t)("labels.fontFamily")}),(0,s.jsx)(l,{group:"font-family",options:i,value:G(t,n,(function(e){if((0,z.iB)(e))return e.fontFamily;var t=(0,N.WJ)(e);return t?t.fontFamily:null}),n.currentItemFontFamily||R.rk),onChange:function(e){return r(e)}})]})}}),(0,Z.z)({name:"changeTextAlign",trackEvent:!1,perform:function(e,t,n){return{elements:q(e,t,(function(e){if((0,z.iB)(e)){var t=(0,j.BE)(e,{textAlign:n});return(0,z.oN)(t,(0,N.tl)(e)),t}return e}),!0),appState:W(W({},t),{},{currentItemTextAlign:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("legend",{children:(0,I.t)("labels.textAlign")}),(0,s.jsx)(l,{group:"text-align",options:[{value:"left",text:(0,I.t)("labels.left"),icon:L.rr,testId:"align-left"},{value:"center",text:(0,I.t)("labels.center"),icon:L.o3,testId:"align-horizontal-center"},{value:"right",text:(0,I.t)("labels.right"),icon:L.oT,testId:"align-right"}],value:G(t,n,(function(e){if((0,z.iB)(e))return e.textAlign;var t=(0,N.WJ)(e);return t?t.textAlign:null}),n.currentItemTextAlign),onChange:function(e){return r(e)}})]})}}),(0,Z.z)({name:"changeVerticalAlign",trackEvent:{category:"element"},perform:function(e,t,n){return{elements:q(e,t,(function(e){if((0,z.iB)(e)){var t=(0,j.BE)(e,{verticalAlign:n});return(0,z.oN)(t,(0,N.tl)(e)),t}return e}),!0),appState:W({},t),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,s.jsx)("fieldset",{children:(0,s.jsx)(l,{group:"text-align",options:[{value:R.oX.TOP,text:(0,I.t)("labels.alignTop"),icon:(0,s.jsx)(L.EO,{theme:n.theme}),testId:"align-top"},{value:R.oX.MIDDLE,text:(0,I.t)("labels.centerVertically"),icon:(0,s.jsx)(L.P7,{theme:n.theme}),testId:"align-middle"},{value:R.oX.BOTTOM,text:(0,I.t)("labels.alignBottom"),icon:(0,s.jsx)(L.aA,{theme:n.theme}),testId:"align-bottom"}],value:G(t,n,(function(e){if((0,z.iB)(e)&&e.containerId)return e.verticalAlign;var t=(0,N.WJ)(e);return t?t.verticalAlign:null})),onChange:function(e){return r(e)}})})}}),(0,Z.z)({name:"changeRoundness",trackEvent:!1,perform:function(e,t,n){return{elements:q(e,t,(function(e){return(0,j.BE)(e,{roundness:"round"===n?{type:(0,B.QI)(e.type)?R.a6.ADAPTIVE_RADIUS:R.a6.PROPORTIONAL_RADIUS}:null})})),appState:W(W({},t),{},{currentItemRoundness:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData,i=(0,V.Zs)((0,z.Lm)(t),n).some((function(e){var t;return(null===(t=e.roundness)||void 0===t?void 0:t.type)===R.a6.LEGACY}));return(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("legend",{children:(0,I.t)("labels.edges")}),(0,s.jsx)(l,{group:"edges",options:[{value:"sharp",text:(0,I.t)("labels.sharp"),icon:L.wr},{value:"round",text:(0,I.t)("labels.round"),icon:L.DS}],value:G(t,n,(function(e){return i?null:e.roundness?"round":"sharp"}),(0,V.sh)(n.activeTool.type)&&n.currentItemRoundness||null),onChange:function(e){return r(e)}})]})}}),(0,Z.z)({name:"changeArrowhead",trackEvent:!1,perform:function(e,t,n){return{elements:q(e,t,(function(e){if((0,B.bt)(e)){var t=n.position,r=n.type;if("start"===t)return(0,j.BE)(e,{startArrowhead:r});if("end"===t)return(0,j.BE)(e,{endArrowhead:r})}return e})),appState:W(W({},t),{},(0,i.Z)({},"start"===n.position?"currentItemStartArrowhead":"currentItemEndArrowhead",n.type)),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData,i=(0,I.G3)().rtl;return(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("legend",{children:(0,I.t)("labels.arrowheads")}),(0,s.jsxs)("div",{className:"iconSelectList buttonList",children:[(0,s.jsx)(D,{label:"arrowhead_start",options:[{value:null,text:(0,I.t)("labels.arrowhead_none"),icon:L.fr,keyBinding:"q"},{value:"arrow",text:(0,I.t)("labels.arrowhead_arrow"),icon:(0,s.jsx)(L.il,{flip:!i}),keyBinding:"w"},{value:"bar",text:(0,I.t)("labels.arrowhead_bar"),icon:(0,s.jsx)(L.m,{flip:!i}),keyBinding:"e"},{value:"dot",text:(0,I.t)("labels.arrowhead_dot"),icon:(0,s.jsx)(L.tn,{flip:!i}),keyBinding:"r"},{value:"triangle",text:(0,I.t)("labels.arrowhead_triangle"),icon:(0,s.jsx)(L.j8,{flip:!i}),keyBinding:"t"}],value:G(t,n,(function(e){return(0,B.bt)(e)&&(0,V.Un)(e.type)?e.startArrowhead:n.currentItemStartArrowhead}),n.currentItemStartArrowhead),onChange:function(e){return r({position:"start",type:e})}}),(0,s.jsx)(D,{label:"arrowhead_end",group:"arrowheads",options:[{value:null,text:(0,I.t)("labels.arrowhead_none"),keyBinding:"q",icon:L.fr},{value:"arrow",text:(0,I.t)("labels.arrowhead_arrow"),keyBinding:"w",icon:(0,s.jsx)(L.il,{flip:i})},{value:"bar",text:(0,I.t)("labels.arrowhead_bar"),keyBinding:"e",icon:(0,s.jsx)(L.m,{flip:i})},{value:"dot",text:(0,I.t)("labels.arrowhead_dot"),keyBinding:"r",icon:(0,s.jsx)(L.tn,{flip:i})},{value:"triangle",text:(0,I.t)("labels.arrowhead_triangle"),icon:(0,s.jsx)(L.j8,{flip:i}),keyBinding:"t"}],value:G(t,n,(function(e){return(0,B.bt)(e)&&(0,V.Un)(e.type)?e.endArrowhead:n.currentItemEndArrowhead}),n.currentItemEndArrowhead),onChange:function(e){return r({position:"end",type:e})}})]})]})}})},4958:function(e,t,n){n.d(t,{u:function(){return l}});var r=n(7169),i=n(7901),o=n(6066);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=(0,i.z)({name:"stats",viewMode:!0,trackEvent:{category:"menu"},perform:function(e,t){return{appState:s(s({},t),{},{showStats:!this.checked(t)}),commitToHistory:!1}},checked:function(e){return e.showStats},contextItemLabel:"stats.title",keyTest:function(e){return!e[o.tW.CTRL_OR_CMD]&&e.altKey&&e.code===o.aU.SLASH}})},6710:function(e,t,n){n.d(t,{FL:function(){return Ue},vD:function(){return mt.vD},yA:function(){return C},BZ:function(){return M},mo:function(){return K.mo},uN:function(){return st.uN},jK:function(){return st.jK},FA:function(){return st.FA},pw:function(){return oe},ZM:function(){return st.ZM},X9:function(){return r.X},xF:function(){return q},pL:function(){return ee},jl:function(){return tt},kt:function(){return nt},EQ:function(){return ve},nz:function(){return gt.nz},_d:function(){return te._d},W3:function(){return ae},ns:function(){return te.ns},Yy:function(){return R},V:function(){return S},zi:function(){return T},jY:function(){return ce},Pb:function(){return ut},Qs:function(){return kt},iL:function(){return bt},u0:function(){return ft.u},Zp:function(){return K.Zp},JN:function(){return pt},y7:function(){return mt.y7},s:function(){return ye},zp:function(){return st.zp}});var r=n(533),i=n(1930),o=n(1935),a=n(242),s=n(75),l=n(1564),c=n(6340),u=function(e,t){for(var n=[],r=[],i=null,o=-1,a=(0,c.xn)((0,s.eD)(e,t,!0));++o<e.length;)a.get(e[o].id)?(r.length&&(n=n.concat(r),r=[]),n.push(o),i=o+1):e[o].isDeleted&&i===o?(i=o+1,r.push(o)):r=[];return n},d=function(e,t,n){if("containerId"in e&&e.containerId){if("left"!==n)return t.indexOf(e);var r=l.Z.getScene(e).getElement(e.containerId);if(r)return t.indexOf(r)}else{var i,o,a=null===(i=e.boundElements)||void 0===i||null===(o=i.find((function(e){return"arrow"!==e.type})))||void 0===o?void 0:o.id;if(a){if("left"===n)return t.indexOf(e);var s=l.Z.getScene(e).getElement(a);if(s)return t.indexOf(s)}}},h=function(e,t){return t.reduce((function(t,n){var r=e[n];return t[r.id]=r,t}),{})},p=function(e,t,n){var r,s,l=u(t,e),p=h(t,l),f=(s=0,(r=l).reduce((function(e,t,n){return n>0&&r[n-1]!==t-1&&(s=++s),(e[s]||(e[s]=[])).push(t),e}),[]));return"right"===n&&(f=f.reverse()),f.forEach((function(r,o){var s=r[0],l=r[r.length-1],u="left"===n?s:l,h=function(e,t,n,r){var i,o=t[n],s=function(t){return!t.isDeleted&&(!e.editingGroupId||t.groupIds.includes(e.editingGroupId))},l="left"===r?(0,c.qr)(t,s,Math.max(0,n-1)):(0,c.cx)(t,s,n+1),u=t[l];if(!u)return-1;if(e.editingGroupId){var h;if((null==o?void 0:o.groupIds.join(""))===(null==u?void 0:u.groupIds.join("")))return null!==(h=d(u,t,r))&&void 0!==h?h:l;if(null==u||!u.groupIds.includes(e.editingGroupId))return-1}if(!u.groupIds.length)return null!==(i=d(u,t,r))&&void 0!==i?i:l;var p=e.editingGroupId?u.groupIds[u.groupIds.indexOf(e.editingGroupId)-1]:u.groupIds[u.groupIds.length-1],f=(0,a.Fb)(t,p);return f.length?"left"===r?t.indexOf(f[0]):t.indexOf(f[f.length-1]):l}(e,t,u,n);if(-1!==h&&u!==h){var p="left"===n?t.slice(0,h):t.slice(0,s),f=t.slice(s,l+1),m="left"===n?t.slice(h,s):t.slice(l+1,h+1),g="left"===n?t.slice(l+1):t.slice(h+1);t="left"===n?[].concat((0,i.Z)(p),(0,i.Z)(f),(0,i.Z)(m),(0,i.Z)(g)):[].concat((0,i.Z)(p),(0,i.Z)(m),(0,i.Z)(f),(0,i.Z)(g))}})),t.map((function(e){return p[e.id]?(0,o.ZP)(e):e}))},f=function(e,t,n){var r,s,l=u(e,t),c=h(e,l),d=[];if("left"===n){if(t.editingGroupId){var p=(0,a.Fb)(e,t.editingGroupId);if(!p.length)return e;r=e.indexOf(p[0])}else r=0;s=l[l.length-1]}else{if(t.editingGroupId){var f=(0,a.Fb)(e,t.editingGroupId);if(!f.length)return e;s=e.indexOf(f[f.length-1])}else s=e.length-1;r=l[0]}for(var m=r;m<s+1;m++)l.includes(m)||d.push(e[m]);var g=Object.values(c).map((function(e){return(0,o.ZP)(e)})),v=e.slice(0,r),y=e.slice(s+1);return"left"===n?[].concat((0,i.Z)(v),(0,i.Z)(g),d,(0,i.Z)(y)):[].concat((0,i.Z)(v),d,(0,i.Z)(g),(0,i.Z)(y))},m=function(e,t){return p(t,e,"left")},g=function(e,t){return p(t,e,"right")},v=function(e,t){return f(e,t,"left")},y=function(e,t){return f(e,t,"right")},b=n(6066),x=n(8211),w=n(7901),_=n(3646),k=n(2335),E=n(4512),S=(0,w.z)({name:"sendBackward",trackEvent:{category:"element"},perform:function(e,t){return{elements:m(e,t),appState:t,commitToHistory:!0}},contextItemLabel:"labels.sendBackward",keyPriority:40,keyTest:function(e){return e[b.tW.CTRL_OR_CMD]&&!e.shiftKey&&e.code===b.aU.BRACKET_LEFT},PanelComponent:function(e){var t=e.updateData;return e.appState,(0,E.jsx)("button",{type:"button",className:"zIndexButton",onClick:function(){return t(null)},title:"".concat((0,x.t)("labels.sendBackward"),"  ").concat((0,c.uY)("CtrlOrCmd+[")),children:_.Gc})}}),C=(0,w.z)({name:"bringForward",trackEvent:{category:"element"},perform:function(e,t){return{elements:g(e,t),appState:t,commitToHistory:!0}},contextItemLabel:"labels.bringForward",keyPriority:40,keyTest:function(e){return e[b.tW.CTRL_OR_CMD]&&!e.shiftKey&&e.code===b.aU.BRACKET_RIGHT},PanelComponent:function(e){var t=e.updateData;return e.appState,(0,E.jsx)("button",{type:"button",className:"zIndexButton",onClick:function(){return t(null)},title:"".concat((0,x.t)("labels.bringForward"),"  ").concat((0,c.uY)("CtrlOrCmd+]")),children:_.t5})}}),T=(0,w.z)({name:"sendToBack",trackEvent:{category:"element"},perform:function(e,t){return{elements:v(e,t),appState:t,commitToHistory:!0}},contextItemLabel:"labels.sendToBack",keyTest:function(e){return k.Um?e[b.tW.CTRL_OR_CMD]&&e.altKey&&e.code===b.aU.BRACKET_LEFT:e[b.tW.CTRL_OR_CMD]&&e.shiftKey&&e.code===b.aU.BRACKET_LEFT},PanelComponent:function(e){var t=e.updateData;return e.appState,(0,E.jsx)("button",{type:"button",className:"zIndexButton",onClick:function(){return t(null)},title:"".concat((0,x.t)("labels.sendToBack"),"  ").concat(k.Um?(0,c.uY)("CtrlOrCmd+Alt+["):(0,c.uY)("CtrlOrCmd+Shift+[")),children:_.pw})}}),M=(0,w.z)({name:"bringToFront",trackEvent:{category:"element"},perform:function(e,t){return{elements:y(e,t),appState:t,commitToHistory:!0}},contextItemLabel:"labels.bringToFront",keyTest:function(e){return k.Um?e[b.tW.CTRL_OR_CMD]&&e.altKey&&e.code===b.aU.BRACKET_RIGHT:e[b.tW.CTRL_OR_CMD]&&e.shiftKey&&e.code===b.aU.BRACKET_RIGHT},PanelComponent:function(e){var t=e.updateData;return e.appState,(0,E.jsx)("button",{type:"button",className:"zIndexButton",onClick:function(e){return t(null)},title:"".concat((0,x.t)("labels.bringToFront"),"  ").concat(k.Um?(0,c.uY)("CtrlOrCmd+Alt+]"):(0,c.uY)("CtrlOrCmd+Shift+]")),children:_.IN})}}),I=n(7169),O=n(1047),A=n(1974),P=n(6938);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,I.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=(0,w.z)({name:"selectAll",trackEvent:{category:"canvas"},perform:function(e,t,n,r){if(t.editingLinearElement)return!1;var i=e.reduce((function(e,t){return t.isDeleted||(0,O.iB)(t)&&t.containerId||t.locked||(e[t.id]=!0),e}),{});return{appState:(0,a.bO)(L(L({},t),{},{selectedLinearElement:1===Object.keys(i).length&&(0,A.bt)(e[0])?new P._(e[0],r.scene):null,editingGroupId:null,selectedElementIds:i}),(0,O.Lm)(e)),commitToHistory:!0}},contextItemLabel:"labels.selectAll",keyTest:function(e){return e[b.tW.CTRL_OR_CMD]&&e.key===b.tW.A}}),z=n(1319),j=n(8290),N=n(5710);function B(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V=function(e){var t=e.slice(),n=new Set,r=function e(t){var n,r,o,a=null===(n=t[0])||void 0===n||null===(r=n.groupIds)||void 0===r?void 0:r.join(""),s=[t[0]],l=[],c=B(t.slice(1));try{for(c.s();!(o=c.n()).done;){var u,d=o.value;(null===(u=d.groupIds)||void 0===u?void 0:u.join(""))===a?s.push(d):l.push(d)}}catch(e){c.e(e)}finally{c.f()}return l.length?[].concat(s,(0,i.Z)(e(l))):s},o=new Map;return t.forEach((function(e,i){var a;if(!o.has(e.id))if(null!==(a=e.groupIds)&&void 0!==a&&a.length){var s,l=e.groupIds[e.groupIds.length-1],c=t.slice(i).filter((function(e){var t,n=null==e||null===(t=e.groupIds)||void 0===t?void 0:t.some((function(e){return e===l}));return n&&o.set(e.id,!0),n})),u=B(r(c));try{for(u.s();!(s=u.n()).done;){var d=s.value;n.add(d)}}catch(e){u.e(e)}finally{u.f()}}else n.add(e)})),n.size!==e.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),e):(0,i.Z)(n)},U=function(e){var t=function(e){var t=(0,c.I4)(e),n=e.slice(),r=new Set;return n.forEach((function(e,i){var o;if(e)if(null!==(o=e.boundElements)&&void 0!==o&&o.length)r.add(e),n[i]=null,e.boundElements.forEach((function(e){var i=t.get(e.id);i&&"text"===e.type&&(r.add(i[0]),n[i[1]]=null)}));else if("text"===e.type&&e.containerId){var a,s=t.get(e.containerId);null!=s&&null!==(a=s[0].boundElements)&&void 0!==a&&a.find((function(t){return t.id===e.id}))||(r.add(e),n[i]=null)}else r.add(e),n[i]=null})),r.size!==e.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),e):(0,i.Z)(r)}(V(e));return t};function $(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,I.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=(0,w.z)({name:"duplicateSelection",trackEvent:{category:"element"},perform:function(e,t){if(t.editingLinearElement){var n=P._.duplicateSelectedPoints(t);return!!n&&{elements:e,appState:n.appState,commitToHistory:!0}}return W(W({},G(e,t)),{},{commitToHistory:!0})},contextItemLabel:"labels.duplicateSelection",keyTest:function(e){return e[b.tW.CTRL_OR_CMD]&&e.key===b.tW.D},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,E.jsx)(z.V,{type:"button",icon:_.NA,title:"".concat((0,x.t)("labels.duplicateSelection"),"  ").concat((0,c.uY)("CtrlOrCmd+D")),"aria-label":(0,x.t)("labels.duplicateSelection"),onClick:function(){return r(null)},visible:(0,s.N)((0,O.Lm)(t),n)})}}),G=function(e,t){for(var n=U(e),r=new Map,o=[],l=[],u=new Map,d=function(e){var n=(0,O.Sy)(t.editingGroupId,r,e,{x:e.x+k.k/2,y:e.y+k.k/2});return u.set(e.id,n.id),l.push(e),o.push(n),n},h=(0,c.xn)((0,s.eD)(n,t,!0)),p=new Map,f=function(e){var t,n=$(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;p.set(r.id,!0)}}catch(e){n.e(e)}finally{n.f()}return e},m=[],g=-1;++g<n.length;){var v=n[g];if(!p.get(v.id)){var y=(0,N.WJ)(v);if(h.get(v.id)){if(v.groupIds.length||y){var b=(0,a.yO)(t,v);if(b){var x=(0,a.Fb)(n,b);m.push.apply(m,(0,i.Z)(f([].concat((0,i.Z)(x),(0,i.Z)(x.map((function(e){return d(e)})))))));continue}if(y){m.push.apply(m,(0,i.Z)(f([v,y,d(v),d(y)])));continue}}m.push.apply(m,(0,i.Z)(f([v,d(v)])))}else m.push.apply(m,(0,i.Z)(f([v])))}}var w=[],_=new Map;for(g=m.length;--g>=0;){var E=m[g];_.get(E.id)||(_.set(E.id,!0),w.push(E))}var S=w.reverse();return(0,N.P7)(m,l,u),(0,j.ek)(m,l,u),{elements:S,appState:(0,a.bO)(W(W({},t),{},{selectedGroupIds:{},selectedElementIds:o.reduce((function(e,t){return(0,A.Xh)(t)||(e[t.id]=!0),e}),{})}),(0,O.Lm)(S))}},K=(n(6208),n(2416)),Y=n(2577),X=n(6552);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,I.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee=(0,w.z)({name:"finalize",trackEvent:!1,perform:function(e,t,n,r){var i,a=r.canvas,s=r.focusContainer,u=r.scene;if(t.editingLinearElement){var d=t.editingLinearElement,h=d.elementId,p=d.startBindingElement,f=d.endBindingElement,m=P._.getElement(h);if(m)return(0,A.Mn)(m)&&(0,j.HG)(m,p,f),{elements:m.points.length<2||(0,O.QD)(m)?e.filter((function(e){return e.id!==m.id})):void 0,appState:Q(Q({},t),{},{cursorButton:"up",editingLinearElement:null}),commitToHistory:!0}}var g=e,v=t.pendingImageElementId&&u.getElement(t.pendingImageElementId);v&&(0,o.DR)(v,{isDeleted:!0},!1),window.document.activeElement instanceof HTMLElement&&s();var y,b=t.multiElement?t.multiElement:"freedraw"===(null===(i=t.editingElement)||void 0===i?void 0:i.type)?t.editingElement:null;if(b){if("freedraw"!==b.type&&"touch"!==t.lastPointerDownWith){var x=b.points,w=b.lastCommittedPoint;w&&x[x.length-1]===w||(0,o.DR)(b,{points:b.points.slice(0,-1)})}(0,O.QD)(b)&&(g=g.slice(0,-1));var _=(0,X.g6)(b.points,t.zoom.value);if(("line"===b.type||"freedraw"===b.type)&&_){var k=b.points,E=k[0];(0,o.DR)(b,{points:k.map((function(e,t){return t===k.length-1?[E[0],E[1]]:e}))})}if((0,A.Mn)(b)&&!_&&b.points.length>1){var S=P._.getPointAtIndexGlobalCoordinates(b,-1),C=(0,Y.Z)(S,2),T=C[0],M=C[1];(0,j.R)(b,t,l.Z.getScene(b),{x:T,y:M})}t.activeTool.locked||"freedraw"===t.activeTool.type||(t.selectedElementIds[b.id]=!0)}return(t.activeTool.locked||"freedraw"===t.activeTool.type)&&b||(0,c.z8)(a),y="eraser"===t.activeTool.type?(0,c.Om)(t,Q(Q({},t.activeTool.lastActiveTool||{type:"selection"}),{},{lastActiveToolBeforeEraser:null})):(0,c.Om)(t,{type:"selection"}),{elements:g,appState:Q(Q({},t),{},{cursorButton:"up",activeTool:(t.activeTool.locked||"freedraw"===t.activeTool.type)&&b?t.activeTool:y,draggingElement:null,multiElement:null,editingElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:b&&!t.activeTool.locked&&"freedraw"!==t.activeTool.type?Q(Q({},t.selectedElementIds),{},(0,I.Z)({},b.id,!0)):t.selectedElementIds,selectedLinearElement:b&&(0,A.bt)(b)?new P._(b,u):t.selectedLinearElement,pendingImageElementId:null}),commitToHistory:"freedraw"===t.activeTool.type}},keyTest:function(e,t){return e.key===b.tW.ESCAPE&&(null!==t.editingLinearElement||!t.draggingElement&&null===t.multiElement)||(e.key===b.tW.ESCAPE||e.key===b.tW.ENTER)&&null!==t.multiElement},PanelComponent:function(e){var t=e.appState,n=e.updateData,r=e.data;return(0,E.jsx)(z.V,{type:"button",icon:_.$c,title:(0,x.t)("buttons.done"),"aria-label":(0,x.t)("buttons.done"),onClick:n,visible:null!=t.multiElement,size:(null==r?void 0:r.size)||"medium"})}}),te=n(8671);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,I.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie="{}",oe=(0,w.z)({name:"copyStyles",trackEvent:{category:"element"},perform:function(e,t){var n=[],r=e.find((function(e){return t.selectedElementIds[e.id]}));if(n.push(r),r&&(0,A.Xo)(r)){var i=(0,N.WJ)(r);n.push(i)}return r&&(ie=JSON.stringify(n)),{appState:re(re({},t),{},{toast:{message:(0,x.t)("toast.copyStyles")}}),commitToHistory:!1}},contextItemLabel:"labels.copyStyles",keyTest:function(e){return e[b.tW.CTRL_OR_CMD]&&e.altKey&&e.code===b.aU.C}}),ae=(0,w.z)({name:"pasteStyles",trackEvent:{category:"element"},perform:function(e,t){var n=JSON.parse(ie),r=n[0],i=n[1];if(!(0,O.r2)(r))return{elements:e,commitToHistory:!1};var a=(0,s.eD)(e,t,!0),l=a.map((function(e){return e.id}));return{elements:e.map((function(e){if(l.includes(e.id)){var t,n,s,c,u,d,h,p=r;if((0,O.iB)(e)&&e.containerId&&(p=i),!p)return e;var f=(0,o.BE)(e,{backgroundColor:null===(t=p)||void 0===t?void 0:t.backgroundColor,strokeWidth:null===(n=p)||void 0===n?void 0:n.strokeWidth,strokeColor:null===(s=p)||void 0===s?void 0:s.strokeColor,strokeStyle:null===(c=p)||void 0===c?void 0:c.strokeStyle,fillStyle:null===(u=p)||void 0===u?void 0:u.fillStyle,opacity:null===(d=p)||void 0===d?void 0:d.opacity,roughness:null===(h=p)||void 0===h?void 0:h.roughness,roundness:p.roundness?(0,A.eK)(p.roundness.type,e)?p.roundness:(0,A.UQ)(e):null});if((0,O.iB)(f)){var m,g,v,y=(null===(m=p)||void 0===m?void 0:m.fontSize)||k.n5,b=(null===(g=p)||void 0===g?void 0:g.fontFamily)||k.rk,x=null;(f=(0,o.BE)(f,{fontSize:y,fontFamily:b,textAlign:(null===(v=p)||void 0===v?void 0:v.textAlign)||k.Hg,lineHeight:p.lineHeight||(0,N.PT)(b)})).containerId&&(x=a.find((function(e){return(0,O.iB)(f)&&e.id===f.containerId}))||null),(0,O.oN)(f,x)}return"arrow"===f.type&&(f=(0,o.BE)(f,{startArrowhead:p.startArrowhead,endArrowhead:p.endArrowhead})),f}return e})),commitToHistory:!0}},contextItemLabel:"labels.pasteStyles",keyTest:function(e){return e[b.tW.CTRL_OR_CMD]&&e.altKey&&e.code===b.aU.V}});function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,I.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,w.z)({name:"toggleCanvasMenu",trackEvent:{category:"menu"},perform:function(e,t){return{appState:le(le({},t),{},{openMenu:"canvas"===t.openMenu?null:"canvas"}),commitToHistory:!1}},PanelComponent:function(e){var t=e.appState,n=e.updateData;return(0,E.jsx)(z.V,{type:"button",icon:_.RY,"aria-label":(0,x.t)("buttons.menu"),onClick:n,selected:"canvas"===t.openMenu})}}),(0,w.z)({name:"toggleEditMenu",trackEvent:{category:"menu"},perform:function(e,t){return{appState:le(le({},t),{},{openMenu:"shape"===t.openMenu?null:"shape"}),commitToHistory:!1}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,E.jsx)(z.V,{visible:(0,O.RT)(n,(0,O.Lm)(t)),type:"button",icon:_.DG,"aria-label":(0,x.t)("buttons.edit"),onClick:r,selected:"shape"===n.openMenu})}}),(0,w.z)({name:"toggleFullScreen",viewMode:!0,trackEvent:{category:"canvas",predicate:function(e){return!(0,c.rB)()}},perform:function(){return(0,c.rB)()||(0,c.wo)(),(0,c.rB)()&&(0,c.Pr)(),{commitToHistory:!1}},keyTest:function(e){return e.key===b.tW.F&&!e[b.tW.CTRL_OR_CMD]}});var ce=(0,w.z)({name:"toggleShortcuts",viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:function(e,t,n,r){var i=r.focusContainer;return"help"===t.openDialog&&i(),{appState:le(le({},t),{},{openDialog:"help"===t.openDialog?null:"help"}),commitToHistory:!1}},keyTest:function(e){return e.key===b.tW.QUESTION_MARK}}),ue=n(6655),de=n(6954);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,I.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ge=function(e,t){var n=(0,s.eD)((0,O.Lm)(e),t,!0);return n.length>=2&&!function(e){if(e.length>=2){var t,n=fe(e[0].groupIds);try{var r=function(){var n=t.value;if(e.reduce((function(e,t){return e&&(0,a.Nd)(t,n)}),!0))return{v:!0}};for(n.s();!(t=n.n()).done;){var i=r();if("object"===(0,ue.Z)(i))return i.v}}catch(e){n.e(e)}finally{n.f()}}return!1}(n)},ve=(0,w.z)({name:"group",trackEvent:{category:"element"},perform:function(e,t){var n=(0,s.eD)((0,O.Lm)(e),t,!0);if(n.length<2)return{appState:t,elements:e,commitToHistory:!1};var r=(0,a.iJ)(t);if(1===r.length){var l=r[0],u=new Set((0,a.Fb)(e,l).map((function(e){return e.id}))),d=new Set(n.map((function(e){return e.id})));if(new Set([].concat((0,i.Z)(Array.from(u)),(0,i.Z)(Array.from(d)))).size===u.size)return{appState:t,elements:e,commitToHistory:!1}}var h=(0,de.kb)(),p=(0,c.xn)(n),f=e.map((function(e){return p.get(e.id)?(0,o.BE)(e,{groupIds:(0,a.S_)(e.groupIds,h,t.editingGroupId)}):e})),m=(0,a.Fb)(f,h),g=m[m.length-1],v=f.lastIndexOf(g),y=f.slice(v+1),b=f.slice(0,v).filter((function(e){return!(0,a.Nd)(e,h)})),x=[].concat((0,i.Z)(b),(0,i.Z)(m),(0,i.Z)(y));return{appState:(0,a.F$)(h,pe(pe({},t),{},{selectedGroupIds:{}}),(0,O.Lm)(x)),elements:x,commitToHistory:!0}},contextItemLabel:"labels.group",predicate:function(e,t){return ge(e,t)},keyTest:function(e){return!e.shiftKey&&e[b.tW.CTRL_OR_CMD]&&e.key===b.tW.G},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,E.jsx)(z.V,{hidden:!ge(t,n),type:"button",icon:(0,E.jsx)(_.BF,{theme:n.theme}),onClick:function(){return r(null)},title:"".concat((0,x.t)("labels.group"),"  ").concat((0,c.uY)("CtrlOrCmd+G")),"aria-label":(0,x.t)("labels.group"),visible:(0,s.N)((0,O.Lm)(t),n)})}}),ye=(0,w.z)({name:"ungroup",trackEvent:{category:"element"},perform:function(e,t){if(0===(0,a.iJ)(t).length)return{appState:t,elements:e,commitToHistory:!1};var n=[],r=e.map((function(e){(0,A.Xh)(e)&&n.push(e.id);var r=(0,a.h6)(e.groupIds,t.selectedGroupIds);return r.length===e.groupIds.length?e:(0,o.BE)(e,{groupIds:r})})),i=(0,a.bO)(pe(pe({},t),{},{selectedGroupIds:{}}),(0,O.Lm)(r));return n.forEach((function(e){return i.selectedElementIds[e]=!1})),{appState:i,elements:r,commitToHistory:!0}},keyTest:function(e){return e.shiftKey&&e[b.tW.CTRL_OR_CMD]&&e.key===b.tW.G.toUpperCase()},contextItemLabel:"labels.ungroup",predicate:function(e,t){return(0,a.iJ)(t).length>0},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,E.jsx)(z.V,{type:"button",hidden:0===(0,a.iJ)(n).length,icon:(0,E.jsx)(_.RJ,{theme:n.theme}),onClick:function(){return r(null)},title:"".concat((0,x.t)("labels.ungroup"),"  ").concat((0,c.uY)("CtrlOrCmd+Shift+G")),"aria-label":(0,x.t)("labels.ungroup"),visible:(0,s.N)((0,O.Lm)(t),n)})}}),be=n(8982),xe=n(487),we=n.n(xe),_e=n(631),ke=n.n(_e),Ee=n(2052),Se=n.n(Ee),Ce=n(4010),Te=n.n(Ce),Me=n(1469),Ie=n.n(Me),Oe=n(9329),Ae=n.n(Oe),Pe=n(3729),De={};De.styleTagTransform=Ae(),De.setAttributes=Te(),De.insert=Se().bind(null,"head"),De.domAPI=ke(),De.insertStyleElement=Ie(),we()(Pe.Z,De),Pe.Z&&Pe.Z.locals&&Pe.Z.locals;var Le=n(9787),Re=function(e){var t=e.color,n=e.onClick,r=e.name,i=e.src,o=(0,be.f)(r),a=(0,Le.useState)(!1),s=(0,Y.Z)(a,2),l=s[0],c=s[1],u=!l&&i,d=u?void 0:{background:t};return(0,E.jsx)("div",{className:"Avatar",style:d,onClick:n,children:u?(0,E.jsx)("img",{className:"Avatar-img",src:i,alt:o,referrerPolicy:"no-referrer",onError:function(){return c(!0)}}):o})},ze=n(2264);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){(0,I.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,w.z)({name:"goToCollaborator",viewMode:!0,trackEvent:{category:"collab"},perform:function(e,t,n){var r=n;return r?{appState:Ne(Ne(Ne({},t),(0,ze.s)({scenePoint:r,viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})),{},{openMenu:"canvas"===t.openMenu?null:t.openMenu}),commitToHistory:!1}:{appState:t,commitToHistory:!1}},PanelComponent:function(e){var t=e.appState,n=e.updateData,r=e.data,i=(0,Y.Z)(r,2),o=i[0],a=i[1],s=(0,be.X)(o,t),l=s.background,c=s.stroke;return(0,E.jsx)(Re,{color:l,border:c,onClick:function(){return n(a.pointer)},name:a.username||"",src:a.avatarUrl})}});var Be=n(2791);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){(0,I.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue=(0,w.z)({name:"addToLibrary",trackEvent:{category:"element"},perform:function(e,t,n,r){var o=(0,s.eD)((0,O.Lm)(e),t,!0);return o.some((function(e){return"image"===e.type}))?{commitToHistory:!1,appState:Ve(Ve({},t),{},{errorMessage:"Support for adding images to the library coming soon!"})}:r.library.getLatestLibrary().then((function(e){return r.library.setLibrary([{id:(0,de.kb)(),status:"unpublished",elements:o.map(Be.OL),created:Date.now()}].concat((0,i.Z)(e)))})).then((function(){return{commitToHistory:!1,appState:Ve(Ve({},t),{},{toast:{message:(0,x.t)("toast.addedToLibrary")}})}})).catch((function(e){return{commitToHistory:!1,appState:Ve(Ve({},t),{},{errorMessage:e.message})}}))},contextItemLabel:"labels.addToLibrary"}),$e=n(8925);function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){(0,I.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We=function(e,t,n){var r=n.axis,i=n.position,o=(0,$e.v2)(e),a="x"===r?["minX","maxX"]:["minY","maxY"],s=(0,Y.Z)(a,2),l=s[0],c=s[1];return He(He({},{x:0,y:0}),{},"start"===i?(0,I.Z)({},r,t[l]-o[l]):"end"===i?(0,I.Z)({},r,t[c]-o[c]):(0,I.Z)({},r,(t[l]+t[c])/2-(o[l]+o[c])/2))},qe=function(e,t){return(0,s.eD)((0,O.Lm)(e),t).length>1},Ge=function(e,t,n){var r=function(e,t){var n=(0,a.AI)(e),r=(0,$e.v2)(e);return n.flatMap((function(e){var n=We(e,r,t);return e.map((function(e){return(0,o.BE)(e,{x:e.x+n.x,y:e.y+n.y})}))}))}((0,s.eD)((0,O.Lm)(e),t),n),i=(0,c.xn)(r);return e.map((function(e){return i.get(e.id)||e}))};function Ke(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(0,w.z)({name:"alignTop",trackEvent:{category:"element"},perform:function(e,t){return{appState:t,elements:Ge(e,t,{position:"start",axis:"y"}),commitToHistory:!0}},keyTest:function(e){return e[b.tW.CTRL_OR_CMD]&&e.shiftKey&&e.key===b.tW.ARROW_UP},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,E.jsx)(z.V,{hidden:!qe(t,n),type:"button",icon:_.Ct,onClick:function(){return r(null)},title:"".concat((0,x.t)("labels.alignTop"),"  ").concat((0,c.uY)("CtrlOrCmd+Shift+Up")),"aria-label":(0,x.t)("labels.alignTop"),visible:(0,s.N)((0,O.Lm)(t),n)})}}),(0,w.z)({name:"alignBottom",trackEvent:{category:"element"},perform:function(e,t){return{appState:t,elements:Ge(e,t,{position:"end",axis:"y"}),commitToHistory:!0}},keyTest:function(e){return e[b.tW.CTRL_OR_CMD]&&e.shiftKey&&e.key===b.tW.ARROW_DOWN},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,E.jsx)(z.V,{hidden:!qe(t,n),type:"button",icon:_.HL,onClick:function(){return r(null)},title:"".concat((0,x.t)("labels.alignBottom"),"  ").concat((0,c.uY)("CtrlOrCmd+Shift+Down")),"aria-label":(0,x.t)("labels.alignBottom"),visible:(0,s.N)((0,O.Lm)(t),n)})}}),(0,w.z)({name:"alignLeft",trackEvent:{category:"element"},perform:function(e,t){return{appState:t,elements:Ge(e,t,{position:"start",axis:"x"}),commitToHistory:!0}},keyTest:function(e){return e[b.tW.CTRL_OR_CMD]&&e.shiftKey&&e.key===b.tW.ARROW_LEFT},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,E.jsx)(z.V,{hidden:!qe(t,n),type:"button",icon:_.xs,onClick:function(){return r(null)},title:"".concat((0,x.t)("labels.alignLeft"),"  ").concat((0,c.uY)("CtrlOrCmd+Shift+Left")),"aria-label":(0,x.t)("labels.alignLeft"),visible:(0,s.N)((0,O.Lm)(t),n)})}}),(0,w.z)({name:"alignRight",trackEvent:{category:"element"},perform:function(e,t){return{appState:t,elements:Ge(e,t,{position:"end",axis:"x"}),commitToHistory:!0}},keyTest:function(e){return e[b.tW.CTRL_OR_CMD]&&e.shiftKey&&e.key===b.tW.ARROW_RIGHT},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,E.jsx)(z.V,{hidden:!qe(t,n),type:"button",icon:_.mh,onClick:function(){return r(null)},title:"".concat((0,x.t)("labels.alignRight"),"  ").concat((0,c.uY)("CtrlOrCmd+Shift+Right")),"aria-label":(0,x.t)("labels.alignRight"),visible:(0,s.N)((0,O.Lm)(t),n)})}}),(0,w.z)({name:"alignVerticallyCentered",trackEvent:{category:"element"},perform:function(e,t){return{appState:t,elements:Ge(e,t,{position:"center",axis:"y"}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,E.jsx)(z.V,{hidden:!qe(t,n),type:"button",icon:_.ST,onClick:function(){return r(null)},title:(0,x.t)("labels.centerVertically"),"aria-label":(0,x.t)("labels.centerVertically"),visible:(0,s.N)((0,O.Lm)(t),n)})}}),(0,w.z)({name:"alignHorizontallyCentered",trackEvent:{category:"element"},perform:function(e,t){return{appState:t,elements:Ge(e,t,{position:"center",axis:"x"}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,E.jsx)(z.V,{hidden:!qe(t,n),type:"button",icon:_.gK,onClick:function(){return r(null)},title:(0,x.t)("labels.centerHorizontally"),"aria-label":(0,x.t)("labels.centerHorizontally"),visible:(0,s.N)((0,O.Lm)(t),n)})}});var Xe=function(e,t){return(0,s.eD)((0,O.Lm)(e),t).length>1},Je=function(e,t,n){var r=function(e,t){var n,r="x"===t.axis?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],i=(0,Y.Z)(r,4),s=i[0],l=i[1],c=i[2],u=i[3],d=(0,$e.v2)(e),h=(0,a.AI)(e).map((function(e){return[e,(0,$e.v2)(e)]})).sort((function(e,t){return e[1][l]-t[1][l]})),p=0,f=Ke(h);try{for(f.s();!(n=f.n()).done;)p+=n.value[1][u]}catch(e){f.e(e)}finally{f.f()}var m=(d[u]-p)/(h.length-1);if(m<0){var g=h.findIndex((function(e){return e[1][s]===d[s]})),v=h.findIndex((function(e){return e[1][c]===d[c]})),y=(h[v][1][l]-h[g][1][l])/(h.length-1),b=h[g][1][l];return h.flatMap((function(e,n){var r=(0,Y.Z)(e,2),i=r[0],a=r[1],s={x:0,y:0};return n!==g&&n!==v&&(b+=y,s[t.axis]=b-a[l]),i.map((function(e){return(0,o.BE)(e,{x:e.x+s.x,y:e.y+s.y})}))}))}var x=d[s];return h.flatMap((function(e){var n=(0,Y.Z)(e,2),r=n[0],i=n[1],a={x:0,y:0};return a[t.axis]=x-i[s],x+=m,x+=i[u],r.map((function(e){return(0,o.BE)(e,{x:e.x+a.x,y:e.y+a.y})}))}))}((0,s.eD)((0,O.Lm)(e),t),n),i=(0,c.xn)(r);return e.map((function(e){return i.get(e.id)||e}))},Qe=((0,w.z)({name:"distributeHorizontally",trackEvent:{category:"element"},perform:function(e,t){return{appState:t,elements:Je(e,t,{space:"between",axis:"x"}),commitToHistory:!0}},keyTest:function(e){return!e[b.tW.CTRL_OR_CMD]&&e.altKey&&e.code===b.aU.H},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,E.jsx)(z.V,{hidden:!Xe(t,n),type:"button",icon:_.uD,onClick:function(){return r(null)},title:"".concat((0,x.t)("labels.distributeHorizontally"),"  ").concat((0,c.uY)("Alt+H")),"aria-label":(0,x.t)("labels.distributeHorizontally"),visible:(0,s.N)((0,O.Lm)(t),n)})}}),(0,w.z)({name:"distributeVertically",trackEvent:{category:"element"},perform:function(e,t){return{appState:t,elements:Je(e,t,{space:"between",axis:"y"}),commitToHistory:!0}},keyTest:function(e){return!e[b.tW.CTRL_OR_CMD]&&e.altKey&&e.code===b.aU.V},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return(0,E.jsx)(z.V,{hidden:!Xe(t,n),type:"button",icon:_.W5,onClick:function(){return r(null)},title:"".concat((0,x.t)("labels.distributeVertically"),"  ").concat((0,c.uY)("Alt+V")),"aria-label":(0,x.t)("labels.distributeVertically"),visible:(0,s.N)((0,O.Lm)(t),n)})}}),n(8634)),et=n(267),tt=(0,w.z)({name:"flipHorizontal",trackEvent:{category:"element"},perform:function(e,t){return{elements:rt(e,t,"horizontal"),appState:t,commitToHistory:!0}},keyTest:function(e){return e.shiftKey&&"KeyH"===e.code},contextItemLabel:"labels.flipHorizontal",predicate:function(e,t){return function(e,t){var n=(0,s.eD)((0,O.Lm)(e),t);return 1===n.length&&"text"!==n[0].type}(e,t)}}),nt=(0,w.z)({name:"flipVertical",trackEvent:{category:"element"},perform:function(e,t){return{elements:rt(e,t,"vertical"),appState:t,commitToHistory:!0}},keyTest:function(e){return e.shiftKey&&"KeyV"===e.code&&!e[b.tW.CTRL_OR_CMD]},contextItemLabel:"labels.flipVertical",predicate:function(e,t){return function(e,t){return 1===(0,s.eD)((0,O.Lm)(e),t).length}(e,t)}}),rt=function(e,t,n){var r=(0,s.eD)((0,O.Lm)(e),t);if(r.length>1)return e;var i=it(r,t,n),o=(0,c.xn)(i);return e.map((function(e){return o.get(e.id)||e}))},it=function(e,t,n){return e.forEach((function(e){ot(e,t),"vertical"===n&&at(e,Math.PI)})),e},ot=function(e,t){var n=e.x,r=e.y,i=e.width,a=e.height,s=(0,Qe.LW)(e.angle);(0,o.DR)(e,{angle:(0,Qe.LW)(0)});var l=(0,et.PC)(e,t.zoom),c=!0,u=l.nw;if(u||(c=!1,u=l.ne)){var d,h=0;(0,A.bt)(e)&&e.points.length<3&&(h=2*e.points.reduce((function(e,t){return Math.max(e,t[0])}),0)-e.width),(0,A.bt)(e)&&(d=(0,$e.Ut)(e,e.points));var p=(0,$e.qf)(e);if((0,A.bt)(e)&&e.points.length<3){for(var f=1;f<e.points.length;f++)P._.movePoints(e,[{index:f,point:[-e.points[f][0],e.points[f][1]]}]);P._.normalizePoints(e)}else{var m=d?d[2]-d[0]:p[2]-p[0],g=d?[d[0],d[1]]:[p[0],p[1]];(0,Qe.l2)((new Map).set(e.id,e),!1,e,c?"nw":"ne",!0,c?g[0]+m:g[0]-m,g[1])}var v=(0,Qe.LW)(2*Math.PI-s);if(v<0&&(v=(0,Qe.LW)(v+2*Math.PI)),(0,o.DR)(e,{angle:v}),(0,o.DR)(e,{x:n+h,y:r,width:i,height:a}),(0,j.Ww)(e),d&&(0,A.bt)(e)){var y=(0,$e.Ut)(e,e.points),b=d[0]-y[0]+(d[2]-y[2]);(0,o.DR)(e,{x:e.x+.5*b,y:e.y,width:i,height:a})}}else(0,o.DR)(e,{angle:s})},at=function(e,t){var n=e.x,r=e.y,i=(0,Qe.LW)(e.angle+t);i<0&&(i=(0,Qe.LW)(2*Math.PI+i)),(0,o.DR)(e,{angle:i}),(0,o.DR)(e,{x:n,y:r})},st=n(4688);function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){(0,I.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ut=(0,w.z)({name:"gridMode",viewMode:!0,trackEvent:{category:"canvas",predicate:function(e){return!e.gridSize}},perform:function(e,t){return{appState:ct(ct({},t),{},{gridSize:this.checked(t)?null:k.k}),commitToHistory:!1}},checked:function(e){return null!==e.gridSize},predicate:function(e,t,n){return void 0===n.gridModeEnabled},contextItemLabel:"labels.showGrid",keyTest:function(e){return e[b.tW.CTRL_OR_CMD]&&e.code===b.aU.QUOTE}});function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){(0,I.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pt=(0,w.z)({name:"zenMode",viewMode:!0,trackEvent:{category:"canvas",predicate:function(e){return!e.zenModeEnabled}},perform:function(e,t){return{appState:ht(ht({},t),{},{zenModeEnabled:!this.checked(t)}),commitToHistory:!1}},checked:function(e){return e.zenModeEnabled},predicate:function(e,t,n){return void 0===n.zenModeEnabled},contextItemLabel:"buttons.zenMode",keyTest:function(e){return!e[b.tW.CTRL_OR_CMD]&&e.altKey&&e.code===b.aU.Z}}),ft=n(4958),mt=n(202),gt=n(4929);function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){(0,I.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bt=(0,w.z)({name:"toggleLock",trackEvent:{category:"element"},perform:function(e,t){var n=(0,s.eD)(e,t,!0);if(!n.length)return!1;var r=xt(n),i=(0,c.xn)(n),a="lock"===r;return{elements:e.map((function(e){return i.has(e.id)?(0,o.BE)(e,{locked:a}):e})),appState:yt(yt({},t),{},{selectedLinearElement:a?null:t.selectedLinearElement}),commitToHistory:!0}},contextItemLabel:function(e,t){var n=(0,s.eD)(e,t,!1);return 1===n.length?n[0].locked?"labels.elementLock.unlock":"labels.elementLock.lock":"lock"===xt(n)?"labels.elementLock.lockAll":"labels.elementLock.unlockAll"},keyTest:function(e,t,n){return e.key.toLocaleLowerCase()===b.tW.L&&e[b.tW.CTRL_OR_CMD]&&e.shiftKey&&(0,s.eD)(n,t,!1).length>0}}),xt=function(e){return e.some((function(e){return!e.locked}))?"lock":"unlock"};function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){(0,I.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kt=(0,w.z)({name:"toggleLinearEditor",trackEvent:{category:"element"},predicate:function(e,t){var n=(0,s.eD)(e,t);return!(1!==n.length||!(0,A.bt)(n[0]))},perform:function(e,t,n,r){var i,o=(0,s.eD)((0,O.Lm)(e),t,!0)[0],a=(null===(i=t.editingLinearElement)||void 0===i?void 0:i.elementId)===o.id?null:new P._(o,r.scene);return{appState:_t(_t({},t),{},{editingLinearElement:a}),commitToHistory:!1}},contextItemLabel:function(e,t){var n,r=(0,s.eD)((0,O.Lm)(e),t,!0)[0];return(null===(n=t.editingLinearElement)||void 0===n?void 0:n.elementId)===r.id?"labels.lineEditor.exit":"labels.lineEditor.edit"}})},7901:function(e,t,n){n.d(t,{N:function(){return r},z:function(){return i}});var r=[],i=function(e){return r=r.concat(e),e}},785:function(e,t,n){n.d(t,{C:function(){return s}});var r=n(2335),i=n(8211),o=n(6340),a={toggleTheme:[(0,o.uY)("Shift+Alt+D")],saveScene:[(0,o.uY)("CtrlOrCmd+S")],loadScene:[(0,o.uY)("CtrlOrCmd+O")],clearCanvas:[(0,o.uY)("CtrlOrCmd+Delete")],imageExport:[(0,o.uY)("CtrlOrCmd+Shift+E")],cut:[(0,o.uY)("CtrlOrCmd+X")],copy:[(0,o.uY)("CtrlOrCmd+C")],paste:[(0,o.uY)("CtrlOrCmd+V")],copyStyles:[(0,o.uY)("CtrlOrCmd+Alt+C")],pasteStyles:[(0,o.uY)("CtrlOrCmd+Alt+V")],selectAll:[(0,o.uY)("CtrlOrCmd+A")],deleteSelectedElements:[(0,o.uY)("Delete")],duplicateSelection:[(0,o.uY)("CtrlOrCmd+D"),(0,o.uY)("Alt+".concat((0,i.t)("helpDialog.drag")))],sendBackward:[(0,o.uY)("CtrlOrCmd+[")],bringForward:[(0,o.uY)("CtrlOrCmd+]")],sendToBack:[r.Um?(0,o.uY)("CtrlOrCmd+Alt+["):(0,o.uY)("CtrlOrCmd+Shift+[")],bringToFront:[r.Um?(0,o.uY)("CtrlOrCmd+Alt+]"):(0,o.uY)("CtrlOrCmd+Shift+]")],copyAsPng:[(0,o.uY)("Shift+Alt+C")],copyAsSvg:[],group:[(0,o.uY)("CtrlOrCmd+G")],ungroup:[(0,o.uY)("CtrlOrCmd+Shift+G")],gridMode:[(0,o.uY)("CtrlOrCmd+'")],zenMode:[(0,o.uY)("Alt+Z")],stats:[(0,o.uY)("Alt+/")],addToLibrary:[],flipHorizontal:[(0,o.uY)("Shift+H")],flipVertical:[(0,o.uY)("Shift+V")],viewMode:[(0,o.uY)("Alt+R")],hyperlink:[(0,o.uY)("CtrlOrCmd+K")],toggleLock:[(0,o.uY)("CtrlOrCmd+Shift+L")]},s=function(e){var t=a[e];return t&&t.length>0?t[0]:""}},7047:function(e,t,n){n.d(t,{L:function(){return r}});var r=function(e,t,n,r){try{if("undefined"==typeof window||{REACT_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",REACT_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",REACT_APP_LIBRARY_URL:"https://libraries.excalidraw.com",REACT_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",REACT_APP_PORTAL_URL:"https://portal.excalidraw.com",REACT_APP_WS_SERVER_URL:"",REACT_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',REACT_APP_GOOGLE_ANALYTICS_ID:"UA-387204-13",REACT_APP_MATOMO_URL:"https://excalidraw.matomo.cloud/",REACT_APP_CDN_MATOMO_TRACKER_URL:"//cdn.matomo.cloud/excalidraw.matomo.cloud/matomo.js",REACT_APP_MATOMO_SITE_ID:"1",REACT_APP_PLUS_APP:"https://app.excalidraw.com",PKG_NAME:"@excalidraw/excalidraw",PKG_VERSION:"0.15.2",IS_EXCALIDRAW_NPM_PACKAGE:!0}.JEST_WORKER_ID)return;window.gtag&&window.gtag("event",t,{event_category:e,event_label:n,value:r}),window._paq&&window._paq.push(["trackEvent",e,t,n,r])}catch(e){console.error("error during analytics",e)}}},8897:function(e,t,n){n.d(t,{EN:function(){return p},eS:function(){return h},im:function(){return l},l$:function(){return f},s:function(){return d}});var r=n(5284),i=n(2335),o=n(8211),a=n(6340),s=i.ZB.includes(devicePixelRatio)?devicePixelRatio:1,l=function(){return{showWelcomeScreen:!1,theme:i.C6.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:i.HN.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:i.HN.fillStyle,currentItemFontFamily:i.rk,currentItemFontSize:i.n5,currentItemOpacity:i.HN.opacity,currentItemRoughness:i.HN.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:i.HN.strokeColor,currentItemRoundness:"round",currentItemStrokeStyle:i.HN.strokeStyle,currentItemStrokeWidth:i.HN.strokeWidth,currentItemTextAlign:i.Hg,cursorButton:"up",draggingElement:null,editingElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:i.HN.locked,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:s,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:null,isBindingEnabled:!0,isSidebarDocked:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:"".concat((0,o.t)("labels.untitled"),"-").concat((0,a.Fc)()),contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},selectedGroupIds:{},selectionElement:null,shouldCacheIgnoreZoom:!1,showStats:!1,startBoundElement:null,suggestedBindings:[],toast:null,viewBackgroundColor:r.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,pendingImageElementId:null,showHyperlinkPopup:!1,selectedLinearElement:null}},c={showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},draggingElement:{browser:!1,export:!1,server:!1},editingElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},isSidebarDocked:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},showStats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},pendingImageElementId:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1}},u=function(e,t){for(var n={},r=0,i=Object.keys(e);r<i.length;r++){var o=i[r],a=c[o];if(null!=a&&a[t]){var s=e[o];n[o]=s}}return n},d=function(e){return u(e,"export")},h=function(e){return u(e,"server")},p=function(e){return"eraser"===e.activeTool.type},f=function(e){return"hand"===e.activeTool.type}},5674:function(e,t,n){n.d(t,{dz:function(){return _},i$:function(){return y},ps:function(){return T}});var r=n(1930),i=n(7169),o=n(2577),a=n(56),s=n(2335),l=n(1047),c=n(6954);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=32,m=12,g=256,v="NOT_SPREADSHEET",y="VALID_SPREADSHEET",b=function(e){var t=/^([-+]?)[$]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat("".concat((t[1]||t[2])+t[3]).replace(/,/g,"")):null},x=function(e,t){return e.slice(1).every((function(e){return null!==b(e[t])}))},w=function(e){var t=e[0].length;if(t>2)return{type:v,reason:"More than 2 columns"};if(1===t){if(!x(e,0))return{type:v,reason:"Value is not numeric"};var n=null===b(e[0][0]),r=(n?e.slice(1):e).map((function(e){return b(e[0])}));return r.length<2?{type:v,reason:"Less than two rows"}:{type:y,spreadsheet:{title:n?e[0][0]:null,labels:null,values:r}}}var i=x(e,0),a=x(e,1);if(!i&&!a)return{type:v,reason:"Value is not numeric"};var s=a?[0,1]:[1,0],l=(0,o.Z)(s,2),c=l[0],u=l[1],d=null===b(e[0][u]),h=d?e.slice(1):e;return h.length<2?{type:v,reason:"Less than 2 rows"}:{type:y,spreadsheet:{title:d?e[0][u]:null,labels:h.map((function(e){return e[c]})),values:h.map((function(e){return b(e[u])}))}}},_=function(e){var t=e.trim().split("\n").map((function(e){return e.trim().split("\t")}));if(t.length&&2!==t[0].length&&(t=e.trim().split("\n").map((function(e){return e.trim().split(",")}))),0===t.length)return{type:v,reason:"No values"};var n=t[0].length;if(!t.every((function(e){return e.length===n})))return{type:v,reason:"All rows don't have same number of columns"};var r=w(t);if(r.type!==y){var i=w(function(e){for(var t=[],n=0;n<e[0].length;n++){for(var r=[],i=0;i<e.length;i++)r.push(e[i][n]);t.push(r)}return t}(t));if(i.type===y)return i}return r},k=a.Z.elementBackground.slice(2,a.Z.elementBackground.length),E={strokeColor:a.Z.elementStroke[0]},S=function(e){return{chartWidth:44*e.values.length+m,chartHeight:280}},C=function(e,t,n,i,o,c){var u=S(e),d=u.chartWidth,h=u.chartHeight,v=e.title?(0,l.VL)(p(p({backgroundColor:o,groupIds:[i]},E),{},{text:e.title,x:t+d/2,y:n-g-24-s.n5,roundness:null,textAlign:"center"})):null,y=c?(0,l.Up)(p(p({backgroundColor:o,groupIds:[i]},E),{},{type:"rectangle",x:t,y:n-h,width:d,height:h,strokeColor:a.Z.elementStroke[0],fillStyle:"solid",opacity:6})):null;return[].concat((0,r.Z)(y?[y]:[]),(0,r.Z)(v?[v]:[]),(0,r.Z)(function(e,t,n,r,i){var o;return(null===(o=e.labels)||void 0===o?void 0:o.map((function(e,o){return(0,l.VL)(p(p({groupIds:[r],backgroundColor:i},E),{},{text:e.length>8?"".concat(e.slice(0,5),"..."):e,x:t+44*o+24,y:n+6,width:f,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"}))})))||[]}(e,t,n,i,o)),(0,r.Z)(function(e,t,n,i,o){var a=(0,l.VL)(p(p({groupIds:[i],backgroundColor:o},E),{},{x:t-m,y:n-m,text:"0",textAlign:"right"}));return[a,(0,l.VL)(p(p({groupIds:[i],backgroundColor:o},E),{},{x:t-m,y:n-g-a.height/2,text:Math.max.apply(Math,(0,r.Z)(e.values)).toLocaleString(),textAlign:"right"}))]}(e,t,n,i,o)),(0,r.Z)(function(e,t,n,r,i){var o=S(e),a=o.chartWidth,s=o.chartHeight;return[(0,l.y8)(p(p({backgroundColor:i,groupIds:[r]},E),{},{type:"line",x:t,y:n,startArrowhead:null,endArrowhead:null,width:a,points:[[0,0],[a,0]]})),(0,l.y8)(p(p({backgroundColor:i,groupIds:[r]},E),{},{type:"line",x:t,y:n,startArrowhead:null,endArrowhead:null,height:s,points:[[0,0],[0,-s]]})),(0,l.y8)(p(p({backgroundColor:i,groupIds:[r]},E),{},{type:"line",x:t,y:n-g-m,startArrowhead:null,endArrowhead:null,strokeStyle:"dotted",width:a,opacity:50,points:[[0,0],[a,0]]}))]}(e,t,n,i,o)))},T=function(e,t,n,i){return"line"===e?function(e,t,n){var i,o=Math.max.apply(Math,(0,r.Z)(e.values)),a=(0,c.kb)(),d=k[Math.floor(Math.random()*k.length)],h=0,f=[],v=u(e.values);try{for(v.s();!(i=v.n()).done;){var y=i.value,b=44*h,x=-y/o*g;f.push([b,x]),h++}}catch(e){v.e(e)}finally{v.f()}var w=Math.max.apply(Math,(0,r.Z)(f.map((function(e){return e[0]})))),_=Math.max.apply(Math,(0,r.Z)(f.map((function(e){return e[1]})))),S=Math.min.apply(Math,(0,r.Z)(f.map((function(e){return e[0]})))),T=Math.min.apply(Math,(0,r.Z)(f.map((function(e){return e[1]})))),M=(0,l.y8)(p(p({backgroundColor:d,groupIds:[a]},E),{},{type:"line",x:t+m+16,y:n-m,startArrowhead:null,endArrowhead:null,height:_-T,width:w-S,strokeWidth:2,points:f})),I=e.values.map((function(e,r){var i=44*r+6,s=-e/o*g+6;return(0,l.Up)(p(p({backgroundColor:d,groupIds:[a]},E),{},{fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+i+16,y:n+s-24,width:m,height:m}))})),O=e.values.map((function(e,r){var i=44*r+6,s=e/o*g+6+m;return(0,l.y8)(p(p({backgroundColor:d,groupIds:[a]},E),{},{type:"line",x:t+i+16+6,y:n-s,startArrowhead:null,endArrowhead:null,height:s,strokeStyle:"dotted",opacity:50,points:[[0,0],[0,s]]}))}));return[].concat((0,r.Z)(C(e,t,n,a,d,"production"===s.Vi.DEVELOPMENT)),[M],(0,r.Z)(O),(0,r.Z)(I))}(t,n,i):function(e,t,n){var i=Math.max.apply(Math,(0,r.Z)(e.values)),o=(0,c.kb)(),a=k[Math.floor(Math.random()*k.length)],u=e.values.map((function(e,r){var s=e/i*g;return(0,l.Up)(p(p({backgroundColor:a,groupIds:[o]},E),{},{type:"rectangle",x:t+44*r+m,y:n-s-m,width:f,height:s}))}));return[].concat((0,r.Z)(u),(0,r.Z)(C(e,t,n,o,a,"production"===s.Vi.DEVELOPMENT)))}(t,n,i)}},8982:function(e,t,n){n.d(t,{X:function(){return i},f:function(){return o}});var r=n(56),i=function(e,t){if(null!=t&&t.collaborators){var n=t.collaborators.get(e);if(null!=n&&n.color)return n.color}var i=e.split("").reduce((function(e,t){return e+t.charCodeAt(0)}),0),o=r.Z.elementBackground.slice(3),a=r.Z.elementStroke.slice(3);return{background:o[i%o.length],stroke:a[i%a.length]}},o=function(e){return null!=e&&e.trim()?e.trim()[0].toUpperCase():"?"}},6665:function(e,t,n){n.d(t,{dd:function(){return C},mQ:function(){return E},uR:function(){return S},vQ:function(){return x},vt:function(){return y},wx:function(){return v}});var r=n(7169),i=n(8950),o=n(2975),a=n.n(o),s=n(4162),l=n(5674),c=n(2335),u=n(1974),d=n(6340);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f="",m=!1,g="clipboard"in navigator&&"readText"in navigator.clipboard,v="clipboard"in navigator&&"writeText"in navigator.clipboard,y="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,b=function(e){return!(![c.r8.excalidraw,c.r8.excalidrawClipboard].includes(null==e?void 0:e.type)||!Array.isArray(e.elements))},x=function(){var e=(0,i.Z)(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={type:c.r8.excalidrawClipboard,elements:t,files:r?t.reduce((function(e,t){return(0,u.wi)(t)&&r[t.fileId]&&(e[t.fileId]=r[t.fileId]),e}),{}):void 0},o=JSON.stringify(i),f=o,e.prev=3,m=!1,e.next=7,C(o);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),m=!0,console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),w=function(){if(!f)return{};try{return JSON.parse(f)}catch(e){return console.error(e),{}}},_=function(e){var t=(0,l.dz)(e);return t.type===l.i$?{spreadsheet:t.spreadsheet}:null},k=function(){var e=(0,i.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=5;break}e.t0=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/plain"),e.next=11;break;case 5:if(e.t1=g,!e.t1){e.next=10;break}return e.next=9,navigator.clipboard.readText();case 9:e.t1=e.sent;case 10:e.t0=e.t1;case 11:return r=e.t0,e.abrupt("return",(r||"").trim());case 15:return e.prev=15,e.t2=e.catch(0),e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)(a().mark((function e(t){var n,r,i,o,l,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],e.next=3,k(t);case 3:if((r=e.sent)&&(n||!r.includes(s.oj))){e.next=6;break}return e.abrupt("return",w());case 6:if(!(i=!n&&_(r))){e.next=9;break}return e.abrupt("return",i);case 9:if(o=w(),e.prev=10,l=JSON.parse(r),!b(l)){e.next=14;break}return e.abrupt("return",{elements:l.elements,files:l.files,text:n?JSON.stringify(l.elements,null,2):void 0});case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(10);case 18:return e.abrupt("return",m&&o.elements?p(p({},o),{},{text:n?JSON.stringify(o.elements,null,2):void 0}):{text:r});case 19:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.write([new window.ClipboardItem((0,r.Z)({},c.LO.png,t))]);case 3:case 21:e.next=24;break;case 5:if(e.prev=5,e.t0=e.catch(0),!(0,d.y8)(t)){e.next=23;break}return e.t1=navigator.clipboard,e.t2=window.ClipboardItem,e.t3=r.Z,e.t4={},e.t5=c.LO.png,e.next=15,t;case 15:return e.t6=e.sent,e.t7=(0,e.t3)(e.t4,e.t5,e.t6),e.t8=new e.t2(e.t7),e.t9=[e.t8],e.next=21,e.t1.write.call(e.t1,e.t9);case 23:throw e.t0;case 24:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,i.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,!v){e.next=11;break}return e.prev=2,e.next=5,navigator.clipboard.writeText(t||"");case 5:n=!0,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:if(n||T(t||" ")){e.next=13;break}throw new Error("couldn't copy");case 13:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),T=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;n.style.top="".concat(r,"px"),n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);var i=!1;try{n.select(),n.setSelectionRange(0,n.value.length),i=document.execCommand("copy")}catch(e){console.error(e)}return n.remove(),i}},56:function(e,t,n){var r=n(1930),i=n(5284),o=function(e){return[i.red[e],i.pink[e],i.grape[e],i.violet[e],i.indigo[e],i.blue[e],i.cyan[e],i.teal[e],i.green[e],i.lime[e],i.yellow[e],i.orange[e]]};t.Z={canvasBackground:[i.white,i.gray[0],i.gray[1]].concat((0,r.Z)(o(0))),elementBackground:["transparent",i.gray[4],i.gray[6]].concat((0,r.Z)(o(6))),elementStroke:[i.black,i.gray[8],i.gray[7]].concat((0,r.Z)(o(9)))}},6798:function(e,t,n){n.d(t,{o:function(){return h},w:function(){return d}});var r=n(2577),i=n(4739),o=n(6710),a=n(8211),s=n(9487),l=n(2134),c=n(7046),u=n(4512),d=(0,i.cn)(null),h=function(){var e=(0,i.KO)(d,s.yE),t=(0,r.Z)(e,2),n=t[0],h=t[1],p=(0,l.eh)();return n&&"clearCanvas"===n?(0,u.jsx)(c.Z,{onConfirm:function(){p.executeAction(o.mo),h(null)},onCancel:function(){return h(null)},title:(0,a.t)("clearCanvasDialog.title"),children:(0,u.jsxs)("p",{className:"clear-canvas__content",children:[" ",(0,a.t)("alerts.clearReset")]})}):null}},2134:function(e,t,n){n.d(t,{ZP:function(){return Zr},Fy:function(){return xr},eh:function(){return Sr},gF:function(){return kr},J0:function(){return wr},bd:function(){return _r},n9:function(){return Er}});var r=n(6655),i=n(2577),o=n(1930),a=n(8950),s=n(8821),l=n(5169),c=n(3173),u=n(2248),d=n(7245),h=n(2312),p=n(7169),f=n(2975),m=n.n(f),g=n(9787),v=n.n(g),y=n(5156),b=n(8234),x=n(45),w=n(5605),_=n(6710),k=n(3646),E=n(1319),S=n(8211),C=n(6066),T=n(1935),M=n(8290),I=n(6340),O=n(2335),A=n(4512);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=function(e,t,n){var r=!1;if(!(t.multiElement||t.resizingElement||t.editingElement||t.draggingElement)){var i=n();if(null===i)return{commitToHistory:r};var o=(0,I.xn)(e),a=i.elements,s=(0,I.xn)(a),l=e.filter((function(e){return!s.has(e.id)})),c=a.map((function(e){return(0,T.BE)(o.get(e.id)||e,e)})).concat(l.map((function(e){return(0,T.BE)(e,{isDeleted:!0})})));return(0,M.$q)(c,l),{elements:c,appState:D(D({},t),i.appState),commitToHistory:r,syncHistory:!0}}return{commitToHistory:r}},R=n(7047),z=function(e,t,n,i,o,a){if(e.trackEvent)try{"object"===(0,r.Z)(e.trackEvent)&&(!e.trackEvent.predicate||e.trackEvent.predicate(n,i,a))&&(0,R.L)(e.trackEvent.category,e.trackEvent.action||e.name,"".concat(t," (").concat(o.device.isMobile?"mobile":"desktop",")"))}catch(e){console.error("error while logging action:",e)}},j=function(){function e(t,n,r,i){var o=this;(0,s.Z)(this,e),this.actions={},this.renderAction=function(e,t){var n=o.app.props.UIOptions.canvasActions;if(o.actions[e]&&"PanelComponent"in o.actions[e]&&(!(e in n)||n[e])){var r=o.actions[e],i=r.PanelComponent;i.displayName="PanelComponent";var a=o.getElementsIncludingDeleted(),s=o.getAppState();return(0,A.jsx)(i,{elements:o.getElementsIncludingDeleted(),appState:o.getAppState(),updateData:function(e){z(r,"ui",s,a,o.app,e),o.updater(r.perform(o.getElementsIncludingDeleted(),o.getAppState(),e,o.app))},appProps:o.app.props,data:t})}return null},this.isActionEnabled=function(e){var t=o.getElementsIncludingDeleted(),n=o.getAppState();return!e.predicate||e.predicate(t,n,o.app.props,o.app)},this.updater=function(e){if(!e||!("then"in e))return t(e);e.then((function(e){return t(e)}))},this.getAppState=n,this.getElementsIncludingDeleted=r,this.app=i}return(0,l.Z)(e,[{key:"registerAction",value:function(e){this.actions[e.name]=e}},{key:"registerAll",value:function(e){var t=this;e.forEach((function(e){return t.registerAction(e)}))}},{key:"handleKeyDown",value:function(e){var t=this,n=this.app.props.UIOptions.canvasActions,r=Object.values(this.actions).sort((function(e,t){return(t.keyPriority||0)-(e.keyPriority||0)})).filter((function(r){return(!(r.name in n)||n[r.name])&&r.keyTest&&r.keyTest(e,t.getAppState(),t.getElementsIncludingDeleted())}));if(1!==r.length)return r.length>1&&console.warn("Canceling as multiple actions match this shortcut",r),!1;var i=r[0];if(this.getAppState().viewModeEnabled&&!0!==i.viewMode)return!1;var o=this.getElementsIncludingDeleted(),a=this.getAppState();return z(i,"keyboard",a,o,this.app,null),e.preventDefault(),e.stopPropagation(),this.updater(r[0].perform(o,a,null,this.app)),!0}},{key:"executeAction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",n=this.getElementsIncludingDeleted(),r=this.getAppState(),i=null;z(e,t,r,n,this.app,i),this.updater(e.perform(n,r,i,this.app))}}]),e}(),N=n(7901),B=n(8897),F=n(6665),V=n(9485),U=n(7053),$=n(679),Z=n(1047),H=n(6938),W=n(2791),q=n(1974),G=function(e){var t=Array.from(e.values());return{x:Y(t,(function(e){return e.x}))/t.length,y:Y(t,(function(e){return e.y}))/t.length}},K=function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return Math.hypot(n.x-r.x,n.y-r.y)},Y=function(e,t){return e.reduce((function(e,n){return e+t(n)}),0)},X=n(242);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee=function(e){return{selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,viewBackgroundColor:e.viewBackgroundColor,editingLinearElement:e.editingLinearElement,editingGroupId:e.editingGroupId,name:e.name}},te=function(){function e(){var t=this;(0,s.Z)(this,e),this.elementCache=new Map,this.recording=!0,this.stateHistory=[],this.redoStack=[],this.lastEntry=null,this.generateEntry=function(e,n){return t.dehydrateHistoryEntry({appState:ee(e),elements:n.reduce((function(t,n){if((0,q.bt)(n)&&e.multiElement&&e.multiElement.id===n.id){if(e.multiElement&&e.multiElement.id===n.id&&n.points.length<2)return t;t.push(Q(Q({},n),{},{points:n.lastCommittedPoint!==n.points[n.points.length-1]?n.points.slice(0,-1):n.points}))}else t.push(n);return t}),[])})}}return(0,l.Z)(e,[{key:"hydrateHistoryEntry",value:function(e){var t=this,n=e.appState,r=e.elements;return{appState:JSON.parse(n),elements:r.map((function(e){var n,r=null===(n=t.elementCache.get(e.id))||void 0===n?void 0:n.get(e.versionNonce);if(!r)throw new Error("Element not found: ".concat(e.id,":").concat(e.versionNonce));return r}))}}},{key:"dehydrateHistoryEntry",value:function(e){var t=this,n=e.appState,r=e.elements;return{appState:JSON.stringify(n),elements:r.map((function(e){t.elementCache.has(e.id)||t.elementCache.set(e.id,new Map);var n=t.elementCache.get(e.id);return n.has(e.versionNonce)||n.set(e.versionNonce,(0,W.OL)(e)),{id:e.id,versionNonce:e.versionNonce}}))}}},{key:"getSnapshotForTest",value:function(){var e=this;return{recording:this.recording,stateHistory:this.stateHistory.map((function(t){return e.hydrateHistoryEntry(t)})),redoStack:this.redoStack.map((function(t){return e.hydrateHistoryEntry(t)}))}}},{key:"clear",value:function(){this.stateHistory.length=0,this.redoStack.length=0,this.lastEntry=null,this.elementCache.clear()}},{key:"shouldCreateEntry",value:function(e){var t,n=this.lastEntry;if(!n)return!0;if(e.elements.length!==n.elements.length)return!0;for(var r=e.elements.length-1;r>-1;r--){var i=e.elements[r],o=n.elements[r];if(!i||!o||i.id!==o.id||i.versionNonce!==o.versionNonce)return!0}for(t in e.appState){var a,s;if(("editingLinearElement"!==t||(null===(a=e.appState[t])||void 0===a?void 0:a.elementId)!==(null===(s=n.appState[t])||void 0===s?void 0:s.elementId))&&"selectedElementIds"!==t&&"selectedGroupIds"!==t&&e.appState[t]!==n.appState[t])return!0}return!1}},{key:"pushEntry",value:function(e,t){var n=this.generateEntry(e,t),r=this.hydrateHistoryEntry(n);if(r){if(!this.shouldCreateEntry(r))return;this.stateHistory.push(n),this.lastEntry=r,this.clearRedoStack()}}},{key:"clearRedoStack",value:function(){this.redoStack.splice(0,this.redoStack.length)}},{key:"redoOnce",value:function(){if(0===this.redoStack.length)return null;var e=this.redoStack.pop();return void 0!==e?(this.stateHistory.push(e),this.hydrateHistoryEntry(e)):null}},{key:"undoOnce",value:function(){if(1===this.stateHistory.length)return null;var e=this.stateHistory.pop(),t=this.stateHistory[this.stateHistory.length-1];return void 0!==e?(this.redoStack.push(e),this.hydrateHistoryEntry(t)):null}},{key:"setCurrentState",value:function(e,t){this.lastEntry=this.hydrateHistoryEntry(this.generateEntry(e,t))}},{key:"resumeRecording",value:function(){this.recording=!0}},{key:"record",value:function(e,t){this.recording&&(this.pushEntry(e,t),this.recording=!1)}}]),e}(),ne=n(6552),re=n(3547),ie=n(3063),oe=n(75),ae=n(1564),se=n(746),le=[{icon:k.zu,value:"selection",key:C.tW.V,numericKey:C.tW[1],fillable:!0},{icon:k.OW,value:"rectangle",key:C.tW.R,numericKey:C.tW[2],fillable:!0},{icon:k.nb,value:"diamond",key:C.tW.D,numericKey:C.tW[3],fillable:!0},{icon:k.Re,value:"ellipse",key:C.tW.O,numericKey:C.tW[4],fillable:!0},{icon:k.e0,value:"arrow",key:C.tW.A,numericKey:C.tW[5],fillable:!0},{icon:k.zb,value:"line",key:C.tW.L,numericKey:C.tW[6],fillable:!0},{icon:k.Pm,value:"freedraw",key:[C.tW.P,C.tW.X],numericKey:C.tW[7],fillable:!1},{icon:k.VL,value:"text",key:C.tW.T,numericKey:C.tW[8],fillable:!1},{icon:k.XB,value:"image",key:null,numericKey:C.tW[9],fillable:!1},{icon:k.$q,value:"eraser",key:C.tW.E,numericKey:C.tW[0],fillable:!1}],ce=n(2891),ue=n(487),de=n.n(ue),he=n(631),pe=n.n(he),fe=n(2052),me=n.n(fe),ge=n(4010),ve=n.n(ge),ye=n(1469),be=n.n(ye),xe=n(9329),we=n.n(xe),_e=n(6578),ke={};ke.styleTagTransform=we(),ke.setAttributes=ve(),ke.insert=me().bind(null,"head"),ke.domAPI=pe(),ke.insertStyleElement=be(),de()(_e.Z,ke),_e.Z&&_e.Z.locals&&_e.Z.locals;var Ee=n(785),Se="separator",Ce=v().memo((function(e){var t=e.actionManager,n=e.items,r=e.top,i=e.left,o=kr(),a=Er(),s=_r(),l=n.reduce((function(e,n){return!n||n!==Se&&n.predicate&&!n.predicate(s,o,t.app.props,t.app)||e.push(n),e}),[]);return(0,A.jsx)(ce.J,{onCloseRequest:function(){return a({contextMenu:null})},top:r,left:i,fitInViewport:!0,offsetLeft:o.offsetLeft,offsetTop:o.offsetTop,viewportWidth:o.width,viewportHeight:o.height,children:(0,A.jsx)("ul",{className:"context-menu",onContextMenu:function(e){return e.preventDefault()},children:l.map((function(e,n){var r;if(e===Se)return l[n-1]&&l[n-1]!==Se?(0,A.jsx)("hr",{className:"context-menu-item-separator"},n):null;var i=e.name,c="";return e.contextItemLabel&&(c="function"==typeof e.contextItemLabel?(0,S.t)(e.contextItemLabel(s,o)):(0,S.t)(e.contextItemLabel)),(0,A.jsx)("li",{"data-testid":i,onClick:function(){a({contextMenu:null},(function(){t.executeAction(e,"contextMenu")}))},children:(0,A.jsxs)("button",{className:(0,x.Z)("context-menu-item",{dangerous:"deleteSelectedElements"===i,checkmark:null===(r=e.checked)||void 0===r?void 0:r.call(e,o)}),children:[(0,A.jsx)("div",{className:"context-menu-item__label",children:c}),(0,A.jsx)("kbd",{className:"context-menu-item__shortcut",children:i?(0,Ee.C)(i):""})]})},n)}))})})})),Te=n(2726),Me=n(7239),Ie=n(8120),Oe=n(6086),Ae={};Ae.styleTagTransform=we(),Ae.setAttributes=ve(),Ae.insert=me().bind(null,"head"),Ae.domAPI=pe(),Ae.insertStyleElement=be(),de()(Oe.Z,Ae),Oe.Z&&Oe.Z.locals&&Oe.Z.locals;var Pe=n(1894),De=n(5710);function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ne=function(e){var t,n=e.appState,r=e.elements,i=e.renderAction,o=(0,oe.Zs)((0,Z.Lm)(r),n),a=!1;2===o.length&&((0,q.Xo)(o[0])||(0,q.Xo)(o[1]))&&(a=!0);var s,l=Boolean(n.editingElement),c=xr(),u="rtl"===document.documentElement.getAttribute("dir"),d=(0,oe.$b)(n.activeTool.type)||o.some((function(e){return(0,oe.$b)(e.type)&&!(0,I.Qm)(e.backgroundColor)})),h=(0,oe.$b)(n.activeTool.type)||o.some((function(e){return(0,oe.$b)(e.type)})),p=1===o.length||a,f=(null===(t=o[0])||void 0===t?void 0:t.type)||null,m=ze(o);try{for(m.s();!(s=m.n()).done;)if(s.value.type!==f){f=null;break}}catch(e){m.e(e)}finally{m.f()}return(0,A.jsxs)("div",{className:"panelColumn",children:[(0,A.jsx)("div",{children:((0,Ie.PD)(n.activeTool.type)&&"image"!==n.activeTool.type&&"image"!==f||o.some((function(e){return(0,Ie.PD)(e.type)})))&&i("changeStrokeColor")}),h&&(0,A.jsx)("div",{children:i("changeBackgroundColor")}),d&&i("changeFillStyle"),((0,oe.Zd)(n.activeTool.type)||o.some((function(e){return(0,oe.Zd)(e.type)})))&&i("changeStrokeWidth"),("freedraw"===n.activeTool.type||o.some((function(e){return"freedraw"===e.type})))&&i("changeStrokeShape"),((0,oe.M9)(n.activeTool.type)||o.some((function(e){return(0,oe.M9)(e.type)})))&&(0,A.jsxs)(A.Fragment,{children:[i("changeStrokeStyle"),i("changeSloppiness")]}),((0,oe.sh)(n.activeTool.type)||o.some((function(e){return(0,oe.sh)(e.type)})))&&(0,A.jsx)(A.Fragment,{children:i("changeRoundness")}),((0,oe.bZ)(n.activeTool.type)||o.some((function(e){return(0,oe.bZ)(e.type)})))&&(0,A.jsxs)(A.Fragment,{children:[i("changeFontSize"),i("changeFontFamily"),(0,De.aV)(o)&&i("changeTextAlign")]}),(0,De.cn)(o)&&i("changeVerticalAlign"),((0,oe.Un)(n.activeTool.type)||o.some((function(e){return(0,oe.Un)(e.type)})))&&(0,A.jsx)(A.Fragment,{children:i("changeArrowhead")}),i("changeOpacity"),(0,A.jsxs)("fieldset",{children:[(0,A.jsx)("legend",{children:(0,S.t)("labels.layers")}),(0,A.jsxs)("div",{className:"buttonList",children:[i("sendToBack"),i("sendBackward"),i("bringToFront"),i("bringForward")]})]}),o.length>1&&!a&&(0,A.jsxs)("fieldset",{children:[(0,A.jsx)("legend",{children:(0,S.t)("labels.align")}),(0,A.jsxs)("div",{className:"buttonList",children:[u?(0,A.jsxs)(A.Fragment,{children:[i("alignRight"),i("alignHorizontallyCentered"),i("alignLeft")]}):(0,A.jsxs)(A.Fragment,{children:[i("alignLeft"),i("alignHorizontallyCentered"),i("alignRight")]}),o.length>2&&i("distributeHorizontally"),(0,A.jsx)("div",{style:{flexBasis:"100%",height:0}}),(0,A.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[i("alignTop"),i("alignVerticallyCentered"),i("alignBottom"),o.length>2&&i("distributeVertically")]})]})]}),!l&&o.length>0&&(0,A.jsxs)("fieldset",{children:[(0,A.jsx)("legend",{children:(0,S.t)("labels.actions")}),(0,A.jsxs)("div",{className:"buttonList",children:[!c.isMobile&&i("duplicateSelection"),!c.isMobile&&i("deleteSelectedElements"),i("group"),i("ungroup"),p&&i("hyperlink")]})]})]})},Be=function(e){var t=e.canvas,n=e.activeTool,r=e.setAppState,i=e.onImageAction,o=e.appState;return(0,A.jsx)(A.Fragment,{children:le.map((function(e,a){var s=e.value,l=e.icon,c=e.key,u=e.numericKey,d=e.fillable,h=(0,S.t)("toolBar.".concat(s)),p=c&&(0,I.Oo)("string"==typeof c?c:c[0]),f=p?"".concat(p," ").concat((0,S.t)("helpDialog.or")," ").concat(u):"".concat(u);return(0,A.jsx)(E.V,{className:(0,x.Z)("Shape",{fillable:d}),type:"radio",icon:l,checked:n.type===s,name:"editor-current-shape",title:"".concat((0,I.Oo)(h),"  ").concat(f),keyBindingLabel:u||p,"aria-label":(0,I.Oo)(h),"aria-keyshortcuts":f,"data-testid":"toolbar-".concat(s),onPointerDown:function(e){var t=e.pointerType;o.penDetected||"pen"!==t||r({penDetected:!0,penMode:!0})},onChange:function(e){var n=e.pointerType;o.activeTool.type!==s&&(0,R.L)("toolbar",s,"ui");var a=(0,I.Om)(o,{type:s});r({activeTool:a,multiElement:null,selectedElementIds:{}}),(0,I.Uk)(t,Re(Re({},o),{},{activeTool:a})),"image"===s&&i({pointerType:n})}},s)}))})},Fe=function(e){var t=e.renderAction;return e.zoom,(0,A.jsx)(Me.Z.Col,{gap:1,className:"zoom-actions",children:(0,A.jsxs)(Me.Z.Row,{align:"center",children:[t("zoomOut"),t("resetZoom"),t("zoomIn")]})})},Ve=function(e){var t=e.renderAction,n=e.className;return(0,A.jsxs)("div",{className:"undo-redo-buttons ".concat(n),children:[(0,A.jsx)("div",{className:"undo-button-container",children:(0,A.jsx)(Pe.u,{label:(0,S.t)("buttons.undo"),children:t("undo")})}),(0,A.jsx)("div",{className:"redo-button-container",children:(0,A.jsxs)(Pe.u,{label:(0,S.t)("buttons.redo"),children:[" ",t("redo")]})})]})},Ue=function(e){var t=e.actionManager,n=e.showExitZenModeBtn;return(0,A.jsx)("button",{className:(0,x.Z)("disable-zen-mode",{"disable-zen-mode--visible":n}),onClick:function(){return t.executeAction(_.JN)},children:(0,S.t)("buttons.exitZenMode")})},$e=function(e){var t=e.renderAction,n=e.className;return(0,A.jsx)("div",{className:"finalize-button ".concat(n),children:t("finalize",{size:"small"})})},Ze=n(8396),He=function(e){var t=e.children,n=e.onClose,r=(0,g.useState)(!!t),o=(0,i.Z)(r,2),a=o[0],s=o[1],l=wr().container,c=v().useCallback((function(){s(!1),n&&n(),null==l||l.focus()}),[n,l]);return(0,A.jsx)(A.Fragment,{children:a&&(0,A.jsx)(Ze.V,{small:!0,onCloseRequest:c,title:(0,S.t)("errorDialog.title"),children:(0,A.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:t})})})},We=n(434),qe=n(7955),Ge={};Ge.styleTagTransform=we(),Ge.setAttributes=ve(),Ge.insert=me().bind(null,"head"),Ge.domAPI=pe(),Ge.insertStyleElement=be(),de()(qe.Z,Ge),qe.Z&&qe.Z.locals&&qe.Z.locals;var Ke=n(5284),Ye=n(3807),Xe=n(1393),Je=n(3024),Qe="filter"in document.createElement("canvas").getContext("2d"),et=function(){return(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{children:(0,S.t)("canvasError.cannotShowPreview")}),(0,A.jsx)("p",{children:(0,A.jsx)("span",{children:(0,S.t)("canvasError.canvasTooBig")})}),(0,A.jsxs)("em",{children:["(",(0,S.t)("canvasError.canvasTooBigTip"),")"]})]})},tt=function(e){var t,n=e.children,r=e.title,i=e.onClick,o=e.color,a=e.shade,s=void 0===a?6:a;return(0,A.jsx)("button",{className:"ExportDialog-imageExportButton",style:(t={},(0,p.Z)(t,"--button-color",Ke[o][s]),(0,p.Z)(t,"--button-color-darker",Ke[o][s+1]),(0,p.Z)(t,"--button-color-darkest",Ke[o][s+2]),t),title:r,"aria-label":r,onClick:i,children:n})},nt=function(e){var t=e.elements,n=e.appState,r=e.files,o=e.exportPadding,a=void 0===o?O.qy:o,s=e.actionManager,l=e.onExportToPng,c=e.onExportToSvg,u=e.onExportToClipboard,d=(0,oe.N)(t,n),h=(0,g.useState)(d),p=(0,i.Z)(h,2),f=p[0],m=p[1],v=(0,g.useRef)(null),y=(0,g.useState)(null),b=(0,i.Z)(y,2),x=b[0],w=b[1],_=f?(0,oe.eD)(t,n,!0):t;return(0,g.useEffect)((function(){m(d)}),[d]),(0,g.useEffect)((function(){var e=v.current;if(e){var t=e.offsetWidth;t&&(0,Je.NL)({elements:_,appState:n,files:r,exportPadding:a,maxWidthOrHeight:t}).then((function(t){return w(null),(0,We._c)(t).then((function(){e.replaceChildren(t)}))})).catch((function(e){console.error(e),w(e)}))}}),[n,r,_,a]),(0,A.jsxs)("div",{className:"ExportDialog",children:[(0,A.jsx)("div",{className:"ExportDialog__preview",ref:v,children:x&&(0,A.jsx)(et,{})}),Qe&&s.renderAction("exportWithDarkMode"),(0,A.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr"},children:(0,A.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(190px, 1fr))",overflow:"hidden"},children:[s.renderAction("changeExportBackground"),d&&(0,A.jsx)(Ye.o,{checked:f,onChange:function(e){return m(e)},children:(0,S.t)("labels.onlySelected")}),s.renderAction("changeExportEmbedScene")]})}),(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:".6em"},children:[(0,A.jsx)(Me.Z.Row,{gap:2,children:s.renderAction("changeExportScale")}),(0,A.jsx)("p",{style:{marginLeft:"1em",userSelect:"none"},children:(0,S.t)("buttons.scale")})]}),(0,A.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:".6em 0"},children:!Xe.kr&&s.renderAction("changeProjectName")}),(0,A.jsxs)(Me.Z.Row,{gap:2,justifyContent:"center",style:{margin:"2em 0"},children:[(0,A.jsx)(tt,{color:"indigo",title:(0,S.t)("buttons.exportToPng"),"aria-label":(0,S.t)("buttons.exportToPng"),onClick:function(){return l(_)},children:"PNG"}),(0,A.jsx)(tt,{color:"red",title:(0,S.t)("buttons.exportToSvg"),"aria-label":(0,S.t)("buttons.exportToSvg"),onClick:function(){return c(_)},children:"SVG"}),(F.vt||O.vU)&&(0,A.jsx)(tt,{title:(0,S.t)("buttons.copyPngToClipboard"),onClick:function(){return u(_)},color:"gray",shade:7,children:k.BR})]})]})},rt=function(e){var t=e.elements,n=e.appState,r=e.setAppState,i=e.files,o=e.exportPadding,a=void 0===o?O.qy:o,s=e.actionManager,l=e.onExportToPng,c=e.onExportToSvg,u=e.onExportToClipboard,d=v().useCallback((function(){r({openDialog:null})}),[r]);return(0,A.jsx)(A.Fragment,{children:"imageExport"===n.openDialog&&(0,A.jsx)(Ze.V,{onCloseRequest:d,title:(0,S.t)("buttons.exportImage"),children:(0,A.jsx)(nt,{elements:t,appState:n,files:i,exportPadding:a,actionManager:s,onExportToPng:l,onExportToSvg:c,onExportToClipboard:u,onCloseRequest:d})})})},it=n(3195),ot={};ot.styleTagTransform=we(),ot.setAttributes=ve(),ot.insert=me().bind(null,"head"),ot.domAPI=pe(),ot.insertStyleElement=be(),de()(it.Z,ot),it.Z&&it.Z.locals&&it.Z.locals;var at=function(e){var t=e.children,n=e.side,r=e.className;return(0,A.jsx)("div",{className:(0,x.Z)("FixedSideContainer","FixedSideContainer_side_".concat(n),r),children:t})},st=n(1587),lt={};lt.styleTagTransform=we(),lt.setAttributes=ve(),lt.insert=me().bind(null,"head"),lt.domAPI=pe(),lt.insertStyleElement=be(),de()(st.Z,lt),st.Z&&st.Z.locals&&st.Z.locals;var ct=function(e){var t=function(e){var t=e.appState,n=e.elements,r=e.isMobile,i=e.device,o=t.activeTool,a=t.isResizing,s=t.isRotating,l=t.lastPointerDownWith,c=null!==t.multiElement;if("library"===t.openSidebar&&!i.canDeviceFitSidebar)return null;if((0,B.EN)(t))return(0,S.t)("hints.eraserRevert");if("arrow"===o.type||"line"===o.type)return c?(0,S.t)("hints.linearElementMulti"):(0,S.t)("hints.linearElement");if("freedraw"===o.type)return(0,S.t)("hints.freeDraw");if("text"===o.type)return(0,S.t)("hints.text");if("image"===t.activeTool.type&&t.pendingImageElementId)return(0,S.t)("hints.placeImage");var u=(0,oe.eD)(n,t);if(a&&"mouse"===l&&1===u.length){var d=u[0];return(0,q.bt)(d)&&2===d.points.length?(0,S.t)("hints.lockAngle"):(0,q.pC)(d)?(0,S.t)("hints.resizeImage"):(0,S.t)("hints.resize")}if(s&&"mouse"===l)return(0,S.t)("hints.rotate");if(1===u.length&&(0,q.iB)(u[0]))return(0,S.t)("hints.text_selected");if(t.editingElement&&(0,q.iB)(t.editingElement))return(0,S.t)("hints.text_editing");if("selection"===o.type){var h;if("selection"===(null===(h=t.draggingElement)||void 0===h?void 0:h.type)&&!t.editingElement&&!t.editingLinearElement)return(0,S.t)("hints.deepBoxSelect");if(!u.length&&!r)return(0,S.t)("hints.canvasPanning")}if(1===u.length){if((0,q.bt)(u[0]))return t.editingLinearElement?t.editingLinearElement.selectedPointsIndices?(0,S.t)("hints.lineEditor_pointSelected"):(0,S.t)("hints.lineEditor_nothingSelected"):(0,S.t)("hints.lineEditor_info");if((0,q.mG)(u[0]))return(0,S.t)("hints.bindTextToElement")}return null}({appState:e.appState,elements:e.elements,isMobile:e.isMobile,device:e.device});return t?(t=(0,I.uY)(t),(0,A.jsx)("div",{className:"HintViewer",children:(0,A.jsx)("span",{children:t})})):null},ut=n(1881),dt=n(5440),ht=(n(5422),{CHECKED:k.FC,UNCHECKED:k._C}),pt=function(e){return(0,A.jsxs)("label",{className:(0,x.Z)("ToolIcon ToolIcon__lock","ToolIcon_size_".concat("medium"),{"is-mobile":e.isMobile}),title:"".concat(e.title,"  Q"),children:[(0,A.jsx)("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-lock"}),(0,A.jsx)("div",{className:"ToolIcon__icon",children:e.checked?ht.CHECKED:ht.UNCHECKED})]})},ft=["heading","children"];function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vt=function(e){var t=e.heading,n=e.children,r=(0,Te.Z)(e,ft),i=wr().id,o=(0,A.jsx)("h2",{className:"visually-hidden",id:"".concat(i,"-").concat(t,"-title"),children:(0,S.t)("headings.".concat(t))});return(0,A.jsx)("section",gt(gt({},r),{},{"aria-labelledby":"".concat(i,"-").concat(t,"-title"),children:"function"==typeof n?n(o):(0,A.jsxs)(A.Fragment,{children:[o,n]})}))},yt=n(756),bt=n(2316),xt={};xt.styleTagTransform=we(),xt.setAttributes=ve(),xt.insert=me().bind(null,"head"),xt.domAPI=pe(),xt.insertStyleElement=be(),de()(bt.Z,xt),bt.Z&&bt.Z.locals&&bt.Z.locals;var wt=function(e){var t=e.appState,n=e.setAppState,r=e.isMobile,i=xr(),o=!r;return t.isSidebarDocked&&"library"===t.openSidebar?null:(0,A.jsxs)("label",{title:"".concat((0,I.Oo)((0,S.t)("toolBar.library"))),children:[(0,A.jsx)("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:"editor-library",onChange:function(e){var t;null===(t=document.querySelector(".layer-ui__wrapper"))||void 0===t||t.classList.remove("animate");var r=e.target.checked;n({openSidebar:r?"library":null}),r&&(0,R.L)("library","toggleLibrary (open)","toolbar (".concat(i.isMobile?"mobile":"desktop",")"))},checked:"library"===t.openSidebar,"aria-label":(0,I.Oo)((0,S.t)("toolBar.library")),"aria-keyshortcuts":"0"}),(0,A.jsxs)("div",{className:"library-button",children:[(0,A.jsx)("div",{children:k.Vq}),o&&(0,A.jsx)("div",{className:"library-button__label",children:(0,S.t)("toolBar.library")})]})]})},_t=function(e){return e.penDetected?(0,A.jsxs)("label",{className:(0,x.Z)("ToolIcon ToolIcon__penMode","ToolIcon_size_".concat("medium"),{"is-mobile":e.isMobile}),title:"".concat(e.title),children:[(0,A.jsx)("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),(0,A.jsx)("div",{className:"ToolIcon__icon",children:k.tb})]}):null},kt=n(8925),Et=n(2681),St={};St.styleTagTransform=we(),St.setAttributes=ve(),St.insert=me().bind(null,"head"),St.domAPI=pe(),St.insertStyleElement=be(),de()(Et.Z,St),Et.Z&&Et.Z.locals&&Et.Z.locals;var Ct=function(e){var t,n=(0,kt.KP)(e.elements),r=(0,oe.Zs)(e.elements,e.appState),i=(0,kt.KP)(r);return(0,A.jsx)("div",{className:"Stats",children:(0,A.jsxs)(ut.W,{padding:2,children:[(0,A.jsx)("div",{className:"close",onClick:e.onClose,children:k.Tw}),(0,A.jsx)("h3",{children:(0,S.t)("stats.title")}),(0,A.jsx)("table",{children:(0,A.jsxs)("tbody",{children:[(0,A.jsx)("tr",{children:(0,A.jsx)("th",{colSpan:2,children:(0,S.t)("stats.scene")})}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:(0,S.t)("stats.elements")}),(0,A.jsx)("td",{children:e.elements.length})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:(0,S.t)("stats.width")}),(0,A.jsx)("td",{children:Math.round(n[2])-Math.round(n[0])})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:(0,S.t)("stats.height")}),(0,A.jsx)("td",{children:Math.round(n[3])-Math.round(n[1])})]}),1===r.length&&(0,A.jsx)("tr",{children:(0,A.jsx)("th",{colSpan:2,children:(0,S.t)("stats.element")})}),r.length>1&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("tr",{children:(0,A.jsx)("th",{colSpan:2,children:(0,S.t)("stats.selected")})}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:(0,S.t)("stats.elements")}),(0,A.jsx)("td",{children:r.length})]})]}),r.length>0&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:"x"}),(0,A.jsx)("td",{children:Math.round(i[0])})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:"y"}),(0,A.jsx)("td",{children:Math.round(i[1])})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:(0,S.t)("stats.width")}),(0,A.jsx)("td",{children:Math.round(i[2]-i[0])})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:(0,S.t)("stats.height")}),(0,A.jsx)("td",{children:Math.round(i[3]-i[1])})]})]}),1===r.length&&(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:(0,S.t)("stats.angle")}),(0,A.jsx)("td",{children:"".concat(Math.round(180*r[0].angle/Math.PI),"")})]}),null===(t=e.renderCustomStats)||void 0===t?void 0:t.call(e,e.elements,e.appState)]})})]})})},Tt=function(e){return(0,A.jsx)(E.V,{className:(0,x.Z)("Shape",{fillable:!1}),type:"radio",icon:k.Hk,name:"editor-current-shape",checked:e.checked,title:"".concat(e.title,"  H"),keyBindingLabel:e.isMobile?void 0:C.tW.H.toLocaleUpperCase(),"aria-label":"".concat(e.title,"  H"),"aria-keyshortcuts":C.tW.H,"data-testid":"toolbar-hand",onChange:function(){var t;return null===(t=e.onChange)||void 0===t?void 0:t.call(e)}})},Mt=n(8888);function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ot=function(e){var t=e.appState,n=e.elements,r=e.actionManager,i=e.setAppState,o=e.onLockToggle,a=e.onHandToolToggle,s=e.onPenModeToggle,l=e.canvas,c=e.onImageAction,u=e.renderTopRightUI,d=e.renderCustomStats,h=e.renderSidebars,f=e.device,m=e.renderWelcomeScreen,g=(0,Mt.R6)(),v=g.welcomeScreenCenterTunnel,y=g.mainMenuTunnel;return(0,A.jsxs)(A.Fragment,{children:[h(),!t.viewModeEnabled&&(0,A.jsxs)(at,{side:"top",className:"App-top-bar",children:[m&&(0,A.jsx)(v.Out,{}),(0,A.jsx)(vt,{heading:"shapes",children:function(e){return(0,A.jsx)(Me.Z.Col,{gap:4,align:"center",children:(0,A.jsxs)(Me.Z.Row,{gap:1,className:"App-toolbar-container",children:[(0,A.jsxs)(ut.W,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[e,(0,A.jsx)(Me.Z.Row,{gap:1,children:(0,A.jsx)(Be,{appState:t,canvas:l,activeTool:t.activeTool,setAppState:i,onImageAction:function(e){var t=e.pointerType;c({insertOnCanvasDirectly:"mouse"!==t})}})})]}),u&&u(!0,t),(0,A.jsxs)("div",{className:"mobile-misc-tools-container",children:[!t.viewModeEnabled&&(0,A.jsx)(wt,{appState:t,setAppState:i,isMobile:!0}),(0,A.jsx)(_t,{checked:t.penMode,onChange:s,title:(0,S.t)("toolBar.penMode"),isMobile:!0,penDetected:t.penDetected}),(0,A.jsx)(pt,{checked:t.activeTool.locked,onChange:o,title:(0,S.t)("toolBar.lock"),isMobile:!0}),(0,A.jsx)(Tt,{checked:(0,B.l$)(t),onChange:function(){return a()},title:(0,S.t)("toolBar.hand"),isMobile:!0})]})]})})}}),(0,A.jsx)(ct,{appState:t,elements:n,isMobile:!0,device:f})]}),!t.openMenu&&t.showStats&&(0,A.jsx)(Ct,{appState:t,setAppState:i,elements:n,onClose:function(){r.executeAction(_.u0)},renderCustomStats:d}),(0,A.jsx)("div",{className:"App-bottom-bar",style:{marginBottom:yt.nn+2*yt.WM,marginLeft:yt.nn+2*yt.WM,marginRight:yt.nn+2*yt.WM},children:(0,A.jsxs)(ut.W,{padding:0,children:["shape"===t.openMenu&&!t.viewModeEnabled&&(0,Z.RT)(t,n)?(0,A.jsx)(vt,{className:"App-mobile-menu",heading:"selectedShapeActions",children:(0,A.jsx)(Ne,{appState:t,elements:n,renderAction:r.renderAction})}):null,(0,A.jsxs)("footer",{className:"App-toolbar",children:[t.viewModeEnabled?(0,A.jsx)("div",{className:"App-toolbar-content",children:(0,A.jsx)(y.Out,{})}):(0,A.jsxs)("div",{className:"App-toolbar-content",children:[(0,A.jsx)(y.Out,{}),r.renderAction("toggleEditMenu"),r.renderAction("undo"),r.renderAction("redo"),r.renderAction(t.multiElement?"finalize":"duplicateSelection"),r.renderAction("deleteSelectedElements")]}),t.scrolledOutside&&!t.openMenu&&"library"!==t.openSidebar&&(0,A.jsx)("button",{className:"scroll-back-to-content",onClick:function(){i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,oe.W)(n,t,l)))},children:(0,S.t)("buttons.scrollBackToContent")})]})]})})]})},At=n(5674),Pt=n(4162),Dt=n(8461),Lt={};Lt.styleTagTransform=we(),Lt.setAttributes=ve(),Lt.insert=me().bind(null,"head"),Lt.domAPI=pe(),Lt.insertStyleElement=be(),de()(Dt.Z,Lt),Dt.Z&&Dt.Z.locals&&Dt.Z.locals;var Rt=function(e){var t=(0,g.useRef)(null),n=(0,g.useState)(null),r=(0,i.Z)(n,2),o=r[0],s=r[1];return(0,g.useLayoutEffect)((function(){if(e.spreadsheet){var n,r=(0,At.ps)(e.chartType,e.spreadsheet,0,0);s(r);var i=t.current;return(0,a.Z)(m().mark((function t(){var o;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Pt.$D)(r,{exportBackground:!1,viewBackgroundColor:Ke.white},null);case 2:n=t.sent,null===(o=n.querySelector(".style-fonts"))||void 0===o||o.remove(),i.replaceChildren(),i.appendChild(n),e.selected&&i.parentNode.focus();case 7:case"end":return t.stop()}}),t)})))(),function(){i.replaceChildren()}}}),[e.spreadsheet,e.chartType,e.selected]),(0,A.jsx)("button",{className:"ChartPreview",onClick:function(){o&&e.onClick(e.chartType,o)},children:(0,A.jsx)("div",{ref:t})})},zt=function(e){var t=e.setAppState,n=e.appState,r=e.onClose,i=e.onInsertChart,o=v().useCallback((function(){r&&r()}),[r]),a=function(e,n){i(n),(0,R.L)("magic","chart",e),t({currentChartType:e,pasteDialog:{shown:!1,data:null}})};return(0,A.jsx)(Ze.V,{small:!0,onCloseRequest:o,title:(0,S.t)("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:(0,A.jsxs)("div",{className:"container",children:[(0,A.jsx)(Rt,{chartType:"bar",spreadsheet:n.pasteDialog.data,selected:"bar"===n.currentChartType,onClick:a}),(0,A.jsx)(Rt,{chartType:"line",spreadsheet:n.pasteDialog.data,selected:"line"===n.currentChartType,onClick:a})]})})},jt=n(2978),Nt={};function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}Nt.styleTagTransform=we(),Nt.setAttributes=ve(),Nt.insert=me().bind(null,"head"),Nt.domAPI=pe(),Nt.insertStyleElement=be(),de()(jt.Z,Nt),jt.Z&&jt.Z.locals&&jt.Z.locals;var Ft=m().mark(Wt);function Vt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ut(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $t=function(){return(0,A.jsxs)("div",{className:"HelpDialog__header",children:[(0,A.jsxs)("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw#documentation",target:"_blank",rel:"noopener noreferrer",children:[(0,S.t)("helpDialog.documentation"),(0,A.jsx)("div",{className:"HelpDialog__link-icon",children:k.h0})]}),(0,A.jsxs)("a",{className:"HelpDialog__btn",href:"https://blog.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:[(0,S.t)("helpDialog.blog"),(0,A.jsx)("div",{className:"HelpDialog__link-icon",children:k.h0})]}),(0,A.jsxs)("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[(0,S.t)("helpDialog.github"),(0,A.jsx)("div",{className:"HelpDialog__link-icon",children:k.h0})]})]})},Zt=function(e){return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("h3",{children:e.title}),(0,A.jsx)("div",{className:"HelpDialog__islands-container",children:e.children})]})},Ht=function(e){return(0,A.jsxs)("div",{className:"HelpDialog__island ".concat(e.className),children:[(0,A.jsx)("h4",{className:"HelpDialog__island-title",children:e.caption}),(0,A.jsx)("div",{className:"HelpDialog__island-content",children:e.children})]})};function Wt(e,t){var n,r,i,o;return m().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=!0,r=Vt(e),a.prev=2,r.s();case 4:if((i=r.n()).done){a.next=14;break}if(o=i.value,n){a.next=9;break}return a.next=9,t;case 9:return n=!1,a.next=12,o;case 12:a.next=4;break;case 14:a.next=19;break;case 16:a.prev=16,a.t0=a.catch(2),r.e(a.t0);case 19:return a.prev=19,r.f(),a.finish(19);case 22:case"end":return a.stop()}}),Ft,null,[[2,16,19,22]])}var qt=function(e){var t=e.label,n=e.shortcuts,r=e.isOr,i=void 0===r||r,a=n.map((function(e){return(e.endsWith("++")?[].concat((0,o.Z)(e.slice(0,-2).split("+")),["+"]):e.split("+")).map((function(e){return(0,A.jsx)(Gt,{children:(t=e,t.replace(/\b[a-z]\b/,(function(e){return e.toUpperCase()})))},e);var t}))}));return(0,A.jsxs)("div",{className:"HelpDialog__shortcut",children:[(0,A.jsx)("div",{children:t}),(0,A.jsx)("div",{className:"HelpDialog__key-container",children:(0,o.Z)(Wt(a,i?(0,S.t)("helpDialog.or"):null))})]})},Gt=function(e){return(0,A.jsx)("kbd",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:"HelpDialog__key"},e))},Kt=function(e){var t=e.onClose,n=v().useCallback((function(){t&&t()}),[t]);return(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(Ze.V,{onCloseRequest:n,title:(0,S.t)("helpDialog.title"),className:"HelpDialog",children:[(0,A.jsx)($t,{}),(0,A.jsxs)(Zt,{title:(0,S.t)("helpDialog.shortcuts"),children:[(0,A.jsxs)(Ht,{className:"HelpDialog__island--tools",caption:(0,S.t)("helpDialog.tools"),children:[(0,A.jsx)(qt,{label:(0,S.t)("toolBar.hand"),shortcuts:[C.tW.H]}),(0,A.jsx)(qt,{label:(0,S.t)("toolBar.selection"),shortcuts:[C.tW.V,C.tW[1]]}),(0,A.jsx)(qt,{label:(0,S.t)("toolBar.rectangle"),shortcuts:[C.tW.R,C.tW[2]]}),(0,A.jsx)(qt,{label:(0,S.t)("toolBar.diamond"),shortcuts:[C.tW.D,C.tW[3]]}),(0,A.jsx)(qt,{label:(0,S.t)("toolBar.ellipse"),shortcuts:[C.tW.O,C.tW[4]]}),(0,A.jsx)(qt,{label:(0,S.t)("toolBar.arrow"),shortcuts:[C.tW.A,C.tW[5]]}),(0,A.jsx)(qt,{label:(0,S.t)("toolBar.line"),shortcuts:[C.tW.L,C.tW[6]]}),(0,A.jsx)(qt,{label:(0,S.t)("toolBar.freedraw"),shortcuts:[C.tW.P,C.tW[7]]}),(0,A.jsx)(qt,{label:(0,S.t)("toolBar.text"),shortcuts:[C.tW.T,C.tW[8]]}),(0,A.jsx)(qt,{label:(0,S.t)("toolBar.image"),shortcuts:[C.tW[9]]}),(0,A.jsx)(qt,{label:(0,S.t)("toolBar.eraser"),shortcuts:[C.tW.E,C.tW[0]]}),(0,A.jsx)(qt,{label:(0,S.t)("helpDialog.editLineArrowPoints"),shortcuts:[(0,I.uY)("CtrlOrCmd+Enter")]}),(0,A.jsx)(qt,{label:(0,S.t)("helpDialog.editText"),shortcuts:[(0,I.uY)("Enter")]}),(0,A.jsx)(qt,{label:(0,S.t)("helpDialog.textNewLine"),shortcuts:[(0,I.uY)("Enter"),(0,I.uY)("Shift+Enter")]}),(0,A.jsx)(qt,{label:(0,S.t)("helpDialog.textFinish"),shortcuts:[(0,I.uY)("Esc"),(0,I.uY)("CtrlOrCmd+Enter")]}),(0,A.jsx)(qt,{label:(0,S.t)("helpDialog.curvedArrow"),shortcuts:["A",(0,S.t)("helpDialog.click"),(0,S.t)("helpDialog.click"),(0,S.t)("helpDialog.click")],isOr:!1}),(0,A.jsx)(qt,{label:(0,S.t)("helpDialog.curvedLine"),shortcuts:["L",(0,S.t)("helpDialog.click"),(0,S.t)("helpDialog.click"),(0,S.t)("helpDialog.click")],isOr:!1}),(0,A.jsx)(qt,{label:(0,S.t)("toolBar.lock"),shortcuts:[C.tW.Q]}),(0,A.jsx)(qt,{label:(0,S.t)("helpDialog.preventBinding"),shortcuts:[(0,I.uY)("CtrlOrCmd")]}),(0,A.jsx)(qt,{label:(0,S.t)("toolBar.link"),shortcuts:[(0,I.uY)("CtrlOrCmd+K")]})]}),(0,A.jsxs)(Ht,{className:"HelpDialog__island--view",caption:(0,S.t)("helpDialog.view"),children:[(0,A.jsx)(qt,{label:(0,S.t)("buttons.zoomIn"),shortcuts:[(0,I.uY)("CtrlOrCmd++")]}),(0,A.jsx)(qt,{label:(0,S.t)("buttons.zoomOut"),shortcuts:[(0,I.uY)("CtrlOrCmd+-")]}),(0,A.jsx)(qt,{label:(0,S.t)("buttons.resetZoom"),shortcuts:[(0,I.uY)("CtrlOrCmd+0")]}),(0,A.jsx)(qt,{label:(0,S.t)("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),(0,A.jsx)(qt,{label:(0,S.t)("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),(0,A.jsx)(qt,{label:(0,S.t)("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),(0,A.jsx)(qt,{label:(0,S.t)("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),(0,A.jsx)(qt,{label:(0,S.t)("buttons.fullScreen"),shortcuts:["F"]}),(0,A.jsx)(qt,{label:(0,S.t)("buttons.zenMode"),shortcuts:[(0,I.uY)("Alt+Z")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.showGrid"),shortcuts:[(0,I.uY)("CtrlOrCmd+'")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.viewMode"),shortcuts:[(0,I.uY)("Alt+R")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.toggleTheme"),shortcuts:[(0,I.uY)("Alt+Shift+D")]}),(0,A.jsx)(qt,{label:(0,S.t)("stats.title"),shortcuts:[(0,I.uY)("Alt+/")]})]}),(0,A.jsxs)(Ht,{className:"HelpDialog__island--editor",caption:(0,S.t)("helpDialog.editor"),children:[(0,A.jsx)(qt,{label:(0,S.t)("labels.moveCanvas"),shortcuts:[(0,I.uY)("Space+".concat((0,S.t)("helpDialog.drag"))),(0,I.uY)("Wheel+".concat((0,S.t)("helpDialog.drag")))],isOr:!0}),(0,A.jsx)(qt,{label:(0,S.t)("buttons.clearReset"),shortcuts:[(0,I.uY)("CtrlOrCmd+Delete")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.delete"),shortcuts:[(0,I.uY)("Delete")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.cut"),shortcuts:[(0,I.uY)("CtrlOrCmd+X")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.copy"),shortcuts:[(0,I.uY)("CtrlOrCmd+C")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.paste"),shortcuts:[(0,I.uY)("CtrlOrCmd+V")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.pasteAsPlaintext"),shortcuts:[(0,I.uY)("CtrlOrCmd+Shift+V")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.selectAll"),shortcuts:[(0,I.uY)("CtrlOrCmd+A")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.multiSelect"),shortcuts:[(0,I.uY)("Shift+".concat((0,S.t)("helpDialog.click")))]}),(0,A.jsx)(qt,{label:(0,S.t)("helpDialog.deepSelect"),shortcuts:[(0,I.uY)("CtrlOrCmd+".concat((0,S.t)("helpDialog.click")))]}),(0,A.jsx)(qt,{label:(0,S.t)("helpDialog.deepBoxSelect"),shortcuts:[(0,I.uY)("CtrlOrCmd+".concat((0,S.t)("helpDialog.drag")))]}),(F.vt||O.vU)&&(0,A.jsx)(qt,{label:(0,S.t)("labels.copyAsPng"),shortcuts:[(0,I.uY)("Shift+Alt+C")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.copyStyles"),shortcuts:[(0,I.uY)("CtrlOrCmd+Alt+C")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.pasteStyles"),shortcuts:[(0,I.uY)("CtrlOrCmd+Alt+V")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.sendToBack"),shortcuts:[O.Um?(0,I.uY)("CtrlOrCmd+Alt+["):(0,I.uY)("CtrlOrCmd+Shift+[")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.bringToFront"),shortcuts:[O.Um?(0,I.uY)("CtrlOrCmd+Alt+]"):(0,I.uY)("CtrlOrCmd+Shift+]")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.sendBackward"),shortcuts:[(0,I.uY)("CtrlOrCmd+[")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.bringForward"),shortcuts:[(0,I.uY)("CtrlOrCmd+]")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.alignTop"),shortcuts:[(0,I.uY)("CtrlOrCmd+Shift+Up")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.alignBottom"),shortcuts:[(0,I.uY)("CtrlOrCmd+Shift+Down")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.alignLeft"),shortcuts:[(0,I.uY)("CtrlOrCmd+Shift+Left")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.alignRight"),shortcuts:[(0,I.uY)("CtrlOrCmd+Shift+Right")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.duplicateSelection"),shortcuts:[(0,I.uY)("CtrlOrCmd+D"),(0,I.uY)("Alt+".concat((0,S.t)("helpDialog.drag")))]}),(0,A.jsx)(qt,{label:(0,S.t)("helpDialog.toggleElementLock"),shortcuts:[(0,I.uY)("CtrlOrCmd+Shift+L")]}),(0,A.jsx)(qt,{label:(0,S.t)("buttons.undo"),shortcuts:[(0,I.uY)("CtrlOrCmd+Z")]}),(0,A.jsx)(qt,{label:(0,S.t)("buttons.redo"),shortcuts:O.ED?[(0,I.uY)("CtrlOrCmd+Y"),(0,I.uY)("CtrlOrCmd+Shift+Z")]:[(0,I.uY)("CtrlOrCmd+Shift+Z")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.group"),shortcuts:[(0,I.uY)("CtrlOrCmd+G")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.ungroup"),shortcuts:[(0,I.uY)("CtrlOrCmd+Shift+G")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.flipHorizontal"),shortcuts:[(0,I.uY)("Shift+H")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.flipVertical"),shortcuts:[(0,I.uY)("Shift+V")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.showStroke"),shortcuts:[(0,I.uY)("S")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.showBackground"),shortcuts:[(0,I.uY)("G")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.decreaseFontSize"),shortcuts:[(0,I.uY)("CtrlOrCmd+Shift+<")]}),(0,A.jsx)(qt,{label:(0,S.t)("labels.increaseFontSize"),shortcuts:[(0,I.uY)("CtrlOrCmd+Shift+>")]})]})]})]})})},Yt=n(6773),Xt=n(8671),Jt=n(4241),Qt={};Qt.styleTagTransform=we(),Qt.setAttributes=ve(),Qt.insert=me().bind(null,"head"),Qt.domAPI=pe(),Qt.insertStyleElement=be(),de()(Jt.Z,Qt),Jt.Z&&Jt.Z.locals&&Jt.Z.locals;var en=function(e){var t,n=e.children,r=e.color;return(0,A.jsx)("div",{className:"Card",style:(t={},(0,p.Z)(t,"--card-color","primary"===r?"var(--color-primary)":Ke[r][7]),(0,p.Z)(t,"--card-color-darker","primary"===r?"var(--color-primary-darker)":Ke[r][8]),(0,p.Z)(t,"--card-color-darkest","primary"===r?"var(--color-primary-darkest)":Ke[r][9]),t),children:n})},tn=function(e){var t=e.elements,n=e.appState,r=e.files,i=e.actionManager,o=e.exportOpts,a=e.canvas,s=o.onExportToBackend;return(0,A.jsx)("div",{className:"ExportDialog ExportDialog--json",children:(0,A.jsxs)("div",{className:"ExportDialog-cards",children:[o.saveFileToDisk&&(0,A.jsxs)(en,{color:"lime",children:[(0,A.jsx)("div",{className:"Card-icon",children:k.TP}),(0,A.jsx)("h2",{children:(0,S.t)("exportDialog.disk_title")}),(0,A.jsxs)("div",{className:"Card-details",children:[(0,S.t)("exportDialog.disk_details"),!Xe.kr&&i.renderAction("changeProjectName")]}),(0,A.jsx)(E.V,{className:"Card-button",type:"button",title:(0,S.t)("exportDialog.disk_button"),"aria-label":(0,S.t)("exportDialog.disk_button"),showAriaLabel:!0,onClick:function(){i.executeAction(Xt.mM,"ui")}})]}),s&&(0,A.jsxs)(en,{color:"pink",children:[(0,A.jsx)("div",{className:"Card-icon",children:k.xP}),(0,A.jsx)("h2",{children:(0,S.t)("exportDialog.link_title")}),(0,A.jsx)("div",{className:"Card-details",children:(0,S.t)("exportDialog.link_details")}),(0,A.jsx)(E.V,{className:"Card-button",type:"button",title:(0,S.t)("exportDialog.link_button"),"aria-label":(0,S.t)("exportDialog.link_button"),showAriaLabel:!0,onClick:function(){s(t,n,r,a),(0,R.L)("export","link","ui (".concat((0,I.$h)(),")"))}})]}),o.renderCustomUI&&o.renderCustomUI(t,n,r,a)]})})},nn=function(e){var t=e.elements,n=e.appState,r=e.files,i=e.actionManager,o=e.exportOpts,a=e.canvas,s=e.setAppState,l=v().useCallback((function(){s({openDialog:null})}),[s]);return(0,A.jsx)(A.Fragment,{children:"jsonExport"===n.openDialog&&(0,A.jsx)(Ze.V,{onCloseRequest:l,title:(0,S.t)("buttons.export"),children:(0,A.jsx)(tn,{elements:t,appState:n,files:r,actionManager:i,onCloseRequest:l,exportOpts:o,canvas:a})})})},rn=n(6954),on=n(8923),an={};an.styleTagTransform=we(),an.setAttributes=ve(),an.insert=me().bind(null,"head"),an.domAPI=pe(),an.insertStyleElement=be(),de()(on.Z,an),on.Z&&on.Z.locals&&on.Z.locals;var sn=n(5523),ln=n(2701),cn={};cn.styleTagTransform=we(),cn.setAttributes=ve(),cn.insert=me().bind(null,"head"),cn.domAPI=pe(),cn.insertStyleElement=be(),de()(ln.Z,cn),ln.Z&&ln.Z.locals&&ln.Z.locals;var un=function(e){var t=e.id,n=e.elements,r=e.isPending,o=e.onClick,s=e.selected,l=e.onToggle,c=e.onDrag,u=(0,g.useRef)(null);(0,g.useEffect)((function(){var e=u.current;if(e)return(0,a.Z)(m().mark((function t(){var r,i;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,Je.$D)({elements:n,appState:{exportBackground:!1,viewBackgroundColor:Ke.white},files:null});case 4:i=t.sent,null===(r=i.querySelector(".style-fonts"))||void 0===r||r.remove(),e.innerHTML=i.outerHTML;case 7:case"end":return t.stop()}}),t)})))(),function(){e.innerHTML=""}}),[n]);var d=(0,g.useState)(!1),h=(0,i.Z)(d,2),p=h[0],f=h[1],v=xr().isMobile,y=r&&(0,A.jsx)("div",{className:"library-unit__adder",children:k.pO});return(0,A.jsxs)("div",{className:(0,x.Z)("library-unit",{"library-unit__active":n,"library-unit--hover":n&&p,"library-unit--selected":s}),onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},children:[(0,A.jsx)("div",{className:(0,x.Z)("library-unit__dragger",{"library-unit__pulse":!!r}),ref:u,draggable:!!n,onClick:n||r?function(e){t&&e.shiftKey?l(t,e):o()}:void 0,onDragStart:function(e){t?(f(!1),c(t,e)):e.preventDefault()}}),y,t&&n&&(p||v||s)&&(0,A.jsx)(Ye.o,{checked:s,onChange:function(e,n){return l(t,n)},className:"library-unit__checkbox"})]})},dn=n(6440),hn={};hn.styleTagTransform=we(),hn.setAttributes=ve(),hn.insert=me().bind(null,"head"),hn.domAPI=pe(),hn.insertStyleElement=be(),de()(dn.Z,hn),dn.Z&&dn.Z.locals&&dn.Z.locals;var pn=n(5644),fn=function(e){var t=e.theme,n=e.id,r=e.libraryReturnUrl||window.location.origin+window.location.pathname;return(0,A.jsx)("a",{className:"library-menu-browse-button",href:"".concat("https://libraries.excalidraw.com","?target=").concat(window.name||"_blank","&referrer=").concat(r,"&useHash=true&token=").concat(n,"&theme=").concat(t,"&version=").concat(O.Kr.excalidrawLibrary),target:"_excalidraw_libraries",children:(0,S.t)("labels.libraries")})};function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vn=function(e){var t=e.isLoading,n=e.libraryItems,r=e.onAddToLibrary,a=e.onInsertLibraryItems,s=e.pendingElements,l=e.selectedItems,c=e.onSelectItems,u=e.theme,d=e.id,h=e.libraryReturnUrl,p=(0,g.useState)(null),f=(0,i.Z)(p,2),m=f[0],v=f[1],y=function(e,t){var n=!l.includes(e),r=[].concat((0,o.Z)(k),(0,o.Z)(E));if(n){if(t.shiftKey&&m){var i=r.findIndex((function(e){return e.id===m})),a=r.findIndex((function(t){return t.id===e}));if(-1===i||-1===a)return void c([].concat((0,o.Z)(l),[e]));var s=(0,I.xn)(l),u=r.reduce((function(e,t,n){return(n>=i&&n<=a||s.has(t.id))&&e.push(t.id),e}),[]);c(u)}else c([].concat((0,o.Z)(l),[e]));v(e)}else v(null),c(l.filter((function(t){return t!==e})))},b=function(e){return(l.includes(e)?n.filter((function(e){return l.includes(e.id)})):n.filter((function(t){return t.id===e}))).map((function(e){return gn(gn({},e),{},{elements:(0,W._N)(e.elements)})}))},w=function(e){var t,n,r,i,o;return(0,A.jsx)(Me.Z.Col,{children:(0,A.jsx)(un,{elements:null===(t=e.item)||void 0===t?void 0:t.elements,isPending:!(null!==(n=e.item)&&void 0!==n&&n.id||null===(r=e.item)||void 0===r||!r.elements),onClick:e.onClick||function(){},id:(null===(i=e.item)||void 0===i?void 0:i.id)||null,selected:!(null===(o=e.item)||void 0===o||!o.id)&&l.includes(e.item.id),onToggle:y,onDrag:function(e,t){t.dataTransfer.setData(O.LO.excalidrawlib,(0,sn.NI)(b(e)))}})},e.key)},_=function(e){var t=e.map((function(e){return e.id?w({item:e,onClick:function(){return a(b(e.id))},key:e.id}):w({key:"__pending__item__",item:e,onClick:function(){return r(s)}})})),n=(0,I.yo)(t,4);return n.length||(n=[[]]),n.map((function(e,t,n){return t===n.length-1&&(e=e.concat(new Array(4-e.length).fill(null).map((function(e,t){return w({key:"empty_".concat(t),item:null})})))),(0,A.jsx)(Me.Z.Row,{align:"center",className:"library-menu-items-container__row",children:e},t)}))},k=n.filter((function(e){return"published"!==e.status})),E=n.filter((function(e){return"published"===e.status})),C=!(n.length||k.length||E.length||s.length);return(0,A.jsx)("div",{className:"library-menu-items-container",style:s.length||k.length||E.length?{justifyContent:"flex-start"}:{},children:(0,A.jsxs)(Me.Z.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:E.length>0?1:"0 1 auto",marginBottom:0},children:[(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{children:[(s.length>0||k.length>0||E.length>0)&&(0,A.jsx)("div",{className:"library-menu-items-container__header",children:(0,S.t)("labels.personalLib")}),t&&(0,A.jsx)("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:(0,A.jsx)(pn.Z,{})})]}),s.length||k.length?_([].concat((0,o.Z)(s.length?[{id:null,elements:s}]:[]),(0,o.Z)(k))):(0,A.jsxs)("div",{className:"library-menu-items__no-items",children:[(0,A.jsx)("div",{className:(0,x.Z)({"library-menu-items__no-items__label":C}),children:(0,S.t)("library.noItems")}),(0,A.jsx)("div",{className:"library-menu-items__no-items__hint",children:E.length>0?(0,S.t)("library.hint_emptyPrivateLibrary"):(0,S.t)("library.hint_emptyLibrary")})]})]}),(0,A.jsxs)(A.Fragment,{children:[(E.length>0||s.length>0||k.length>0)&&(0,A.jsx)("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:(0,S.t)("labels.excalidrawLib")}),E.length>0?_(E):k.length>0?(0,A.jsx)("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:(0,S.t)("library.noItems")}):null]}),C&&(0,A.jsx)(fn,{id:d,libraryReturnUrl:h,theme:u})]})})},yn=n(4739),bn=n(9487),xn=n(9430),wn=n(9206),_n=(0,g.forwardRef)((function(e,t){var n=e.children;return(0,A.jsx)("div",{ref:t,className:"layer-ui__library",children:n})})),kn=function(e){var t=e.onInsertLibraryItems,n=e.pendingElements,r=e.onAddToLibrary,s=e.setAppState,l=e.libraryReturnUrl,c=e.library,u=e.id,d=e.appState,h=e.selectedItems,p=e.onSelectItems,f=(0,yn.KO)(U.rF,bn.yE),v=(0,i.Z)(f,1)[0],y=(0,g.useCallback)(function(){var e=(0,a.Z)(m().mark((function e(t,n){var i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,R.L)("element","addToLibrary","ui"),!t.some((function(e){return"image"===e.type}))){e.next=3;break}return e.abrupt("return",s({errorMessage:"Support for adding images to the library coming soon!"}));case 3:i=[{status:"unpublished",elements:t,id:(0,rn.kb)(),created:Date.now()}].concat((0,o.Z)(n)),r(),c.setLibrary(i).catch((function(){s({errorMessage:(0,S.t)("alerts.errorAddingToLibrary")})}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[r,c,s]);if("loading"===v.status&&!v.isInitialized)return(0,A.jsx)(_n,{children:(0,A.jsx)("div",{className:"layer-ui__library-message",children:(0,A.jsxs)("div",{children:[(0,A.jsx)(pn.Z,{size:"2em"}),(0,A.jsx)("span",{children:(0,S.t)("labels.libraryLoadingMessage")})]})})});var b=v.libraryItems.length>0||n.length>0;return(0,A.jsxs)(_n,{children:[(0,A.jsx)(vn,{isLoading:"loading"===v.status,libraryItems:v.libraryItems,onAddToLibrary:function(e){return y(e,v.libraryItems)},onInsertLibraryItems:t,pendingElements:n,selectedItems:h,onSelectItems:p,id:u,libraryReturnUrl:l,theme:d.theme}),b&&(0,A.jsx)(fn,{id:u,libraryReturnUrl:l,theme:d.theme})]})},En=function(e){var t=e.appState,n=e.onInsertElements,r=e.libraryReturnUrl,o=e.focusContainer,s=e.library,l=e.id,c=Er(),u=_r(),d=xr(),h=(0,g.useState)([]),p=(0,i.Z)(h,2),f=p[0],v=p[1],y=(0,yn.KO)(U.rF,bn.yE),b=(0,i.Z)(y,1)[0],x=(0,g.useRef)(null),w=(0,g.useCallback)((function(){document.querySelector(".Dialog")||c({openSidebar:null})}),[c]);!function(e,t){(0,g.useEffect)((function(){var n=function(n){e.current&&(n.target instanceof Element&&(e.current.contains(n.target)||!document.body.contains(n.target))||t(n))};return document.addEventListener("pointerdown",n,!1),function(){document.removeEventListener("pointerdown",n)}}),[e,t])}(x,(0,g.useCallback)((function(e){e.target.closest(".ToolIcon__library")||t.isSidebarDocked&&d.canDeviceFitSidebar||w()}),[w,t.isSidebarDocked,d.canDeviceFitSidebar])),(0,g.useEffect)((function(){var e=function(e){e.key!==C.tW.ESCAPE||t.isSidebarDocked&&d.canDeviceFitSidebar||w()};return document.addEventListener(O.Ks.KEYDOWN,e),function(){document.removeEventListener(O.Ks.KEYDOWN,e)}}),[w,t.isSidebarDocked,d.canDeviceFitSidebar]);var _=(0,g.useCallback)((function(){c({selectedElementIds:{},selectedGroupIds:{}})}),[c]),k=(0,g.useCallback)(function(){var e=(0,a.Z)(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.filter((function(e){return!f.includes(e.id)})),s.setLibrary(n).catch((function(){c({errorMessage:(0,S.t)("alerts.errorRemovingFromLibrary")})})),v([]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s,c,f,v]),E=(0,g.useCallback)((function(){s.resetLibrary(),o()}),[s,o]);return(0,A.jsxs)(xn.Y,{__isInternal:!0,className:"layer-ui__library-sidebar",initialDockedState:t.isSidebarDocked,onDock:function(e){(0,R.L)("library","toggleLibraryDock (".concat(e?"dock":"undock",")"),"sidebar (".concat(d.isMobile?"mobile":"desktop",")"))},ref:x,children:[(0,A.jsx)(xn.Y.Header,{className:"layer-ui__library-header",children:(0,A.jsx)(wn.W,{appState:t,setAppState:c,selectedItems:f,onSelectItems:v,library:s,onRemoveFromLibrary:function(){return k(b.libraryItems)},resetLibrary:E})}),(0,A.jsx)(kn,{pendingElements:(0,oe.eD)(u,t,!0),onInsertLibraryItems:function(e){n((0,U.WV)(e))},onAddToLibrary:_,setAppState:c,libraryReturnUrl:r,library:s,id:l,appState:t,selectedItems:f,onSelectItems:v})]},"library")},Sn=n(1434),Cn={};Cn.styleTagTransform=we(),Cn.setAttributes=ve(),Cn.insert=me().bind(null,"head"),Cn.domAPI=pe(),Cn.insertStyleElement=be(),de()(Sn.Z,Cn),Sn.Z&&Sn.Z.locals&&Sn.Z.locals;var Tn=n(9144),Mn={};Mn.styleTagTransform=we(),Mn.setAttributes=ve(),Mn.insert=me().bind(null,"head"),Mn.domAPI=pe(),Mn.insertStyleElement=be(),de()(Tn.Z,Mn),Tn.Z&&Tn.Z.locals&&Tn.Z.locals;var In=n(4958),On=function(e){return(0,A.jsx)("button",{className:"help-icon",onClick:e.onClick,type:"button",title:"".concat((0,S.t)("helpDialog.title"),"  ?"),"aria-label":(0,S.t)("helpDialog.title"),children:k.by})},An=function(e){var t=e.appState,n=e.actionManager,r=e.showExitZenModeBtn,i=e.renderWelcomeScreen,o=(0,Mt.R6)(),a=o.footerCenterTunnel,s=o.welcomeScreenHelpHintTunnel,l=xr(),c=!t.viewModeEnabled&&t.multiElement&&l.isTouchScreen;return(0,A.jsxs)("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[(0,A.jsx)("div",{className:(0,x.Z)("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":t.zenModeEnabled}),children:(0,A.jsx)(Me.Z.Col,{gap:2,children:(0,A.jsxs)(vt,{heading:"canvasActions",children:[(0,A.jsx)(Fe,{renderAction:n.renderAction,zoom:t.zoom}),!t.viewModeEnabled&&(0,A.jsx)(Ve,{renderAction:n.renderAction,className:(0,x.Z)("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":t.zenModeEnabled})}),c&&(0,A.jsx)($e,{renderAction:n.renderAction,className:(0,x.Z)("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":t.zenModeEnabled})})]})})}),(0,A.jsx)(a.Out,{}),(0,A.jsx)("div",{className:(0,x.Z)("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right disable-pointerEvents":t.zenModeEnabled}),children:(0,A.jsxs)("div",{style:{position:"relative"},children:[i&&(0,A.jsx)(s.Out,{}),(0,A.jsx)(On,{onClick:function(){return n.executeAction(_.jY)}})]})}),(0,A.jsx)(Ue,{actionManager:n,showExitZenModeBtn:r})]})},Pn=An;An.displayName="Footer";var Dn=n(4709),Ln=n(6798),Rn=["suggestedBindings","startBoundElement","cursorButton"],zn=["canvas","onInsertElements","appState"],jn=["canvas","onInsertElements","appState"];function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Bn=function(e){var t=e.UIOptions;return(0,A.jsxs)(Dn.Z,{__fallback:!0,children:[(0,A.jsx)(Dn.Z.DefaultItems.LoadScene,{}),(0,A.jsx)(Dn.Z.DefaultItems.SaveToActiveFile,{}),t.canvasActions.export&&(0,A.jsx)(Dn.Z.DefaultItems.Export,{}),t.canvasActions.saveAsImage&&(0,A.jsx)(Dn.Z.DefaultItems.SaveAsImage,{}),(0,A.jsx)(Dn.Z.DefaultItems.Help,{}),(0,A.jsx)(Dn.Z.DefaultItems.ClearCanvas,{}),(0,A.jsx)(Dn.Z.Separator,{}),(0,A.jsx)(Dn.Z.Group,{title:"Excalidraw links",children:(0,A.jsx)(Dn.Z.DefaultItems.Socials,{})}),(0,A.jsx)(Dn.Z.Separator,{}),(0,A.jsx)(Dn.Z.DefaultItems.ToggleTheme,{}),(0,A.jsx)(Dn.Z.DefaultItems.ChangeCanvasBackground,{})]})},Fn=function(e){var t,n=e.actionManager,r=e.appState,o=e.files,s=e.setAppState,l=e.elements,c=e.canvas,u=e.onLockToggle,d=e.onHandToolToggle,h=e.onPenModeToggle,f=e.onInsertElements,g=e.showExitZenModeBtn,v=e.renderTopRightUI,y=e.renderCustomStats,b=e.renderCustomSidebar,w=e.libraryReturnUrl,_=e.UIOptions,k=e.focusContainer,E=e.library,C=e.id,T=e.onImageAction,M=e.renderWelcomeScreen,P=e.children,D=xr(),L=(0,Mt.ZC)(),z=function(){return _.canvasActions.export?(0,A.jsx)(nn,{elements:l,appState:r,files:o,actionManager:n,exportOpts:_.canvasActions.export,canvas:c,setAppState:s}):null},j=function(){if(!_.canvasActions.saveAsImage)return null;var e=function(e){return function(){var t=(0,a.Z)(m().mark((function t(n){var i;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,R.L)("export",e,"ui"),t.next=3,(0,V.p1)(e,n,r,o,{exportBackground:r.exportBackground,name:r.name,viewBackgroundColor:r.viewBackgroundColor}).catch(I.FG).catch((function(e){console.error(e),s({errorMessage:e.message})}));case 3:i=t.sent,r.exportEmbedScene&&i&&(0,We.g8)(i)&&s({fileHandle:i});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return(0,A.jsx)(rt,{elements:l,appState:r,setAppState:s,files:o,actionManager:n,onExportToPng:e("png"),onExportToSvg:e("svg"),onExportToClipboard:e("clipboard")})},N=function(){return"customSidebar"===r.openSidebar?(null==b?void 0:b())||null:"library"===r.openSidebar?(0,A.jsx)(En,{appState:r,onInsertElements:f,libraryReturnUrl:w,focusContainer:k,library:E,id:C}):null},F=(0,yn.KO)(xn.b,bn.yE),U=(0,i.Z)(F,1)[0],$=(0,A.jsxs)(A.Fragment,{children:[P,(0,A.jsx)(Bn,{UIOptions:_}),r.isLoading&&(0,A.jsx)(dt.z,{delay:250}),r.errorMessage&&(0,A.jsx)(He,{onClose:function(){return s({errorMessage:null})},children:r.errorMessage}),"help"===r.openDialog&&(0,A.jsx)(Kt,{onClose:function(){s({openDialog:null})}}),(0,A.jsx)(Ln.o,{}),j(),z(),r.pasteDialog.shown&&(0,A.jsx)(zt,{setAppState:s,appState:r,onInsertChart:f,onClose:function(){return s({pasteDialog:{shown:!1,data:null}})}}),D.isMobile&&(0,A.jsx)(Ot,{appState:r,elements:l,actionManager:n,renderJSONExportDialog:z,renderImageExportDialog:j,setAppState:s,onLockToggle:u,onHandToolToggle:d,onPenModeToggle:h,canvas:c,onImageAction:T,renderTopRightUI:v,renderCustomStats:y,renderSidebars:N,device:D,renderWelcomeScreen:M}),!D.isMobile&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:(0,x.Z)("layer-ui__wrapper",{"disable-pointerEvents":r.draggingElement||r.resizingElement||r.editingElement&&!(0,Z.iB)(r.editingElement)}),style:("library"===r.openSidebar&&r.isSidebarDocked||U.docked)&&D.canDeviceFitSidebar?{width:"calc(100% - ".concat(O.EE,"px)")}:{},children:[M&&(0,A.jsx)(L.welcomeScreenCenterTunnel.Out,{}),(t=(0,Z.RT)(r,l),(0,A.jsx)(at,{side:"top",children:(0,A.jsxs)("div",{className:"App-menu App-menu_top",children:[(0,A.jsxs)(Me.Z.Col,{gap:6,className:(0,x.Z)("App-menu_top__left",{"disable-pointerEvents":r.zenModeEnabled}),children:[(0,A.jsxs)("div",{style:{position:"relative"},children:[(0,A.jsx)(L.mainMenuTunnel.Out,{}),M&&(0,A.jsx)(L.welcomeScreenMenuHintTunnel.Out,{})]}),t&&(0,A.jsx)(vt,{heading:"selectedShapeActions",className:(0,x.Z)("selected-shape-actions zen-mode-transition",{"transition-left":r.zenModeEnabled}),children:(0,A.jsx)(ut.W,{className:O.$C.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:"".concat(r.height-166,"px")},children:(0,A.jsx)(Ne,{appState:r,elements:l,renderAction:n.renderAction})})})]}),!r.viewModeEnabled&&(0,A.jsx)(vt,{heading:"shapes",className:"shapes-section",children:function(e){return(0,A.jsxs)("div",{style:{position:"relative"},children:[M&&(0,A.jsx)(L.welcomeScreenToolbarHintTunnel.Out,{}),(0,A.jsx)(Me.Z.Col,{gap:4,align:"start",children:(0,A.jsx)(Me.Z.Row,{gap:1,className:(0,x.Z)("App-toolbar-container",{"zen-mode":r.zenModeEnabled}),children:(0,A.jsxs)(ut.W,{padding:1,className:(0,x.Z)("App-toolbar",{"zen-mode":r.zenModeEnabled}),children:[(0,A.jsx)(ct,{appState:r,elements:l,isMobile:D.isMobile,device:D}),e,(0,A.jsxs)(Me.Z.Row,{gap:1,children:[(0,A.jsx)(_t,{zenModeEnabled:r.zenModeEnabled,checked:r.penMode,onChange:h,title:(0,S.t)("toolBar.penMode"),penDetected:r.penDetected}),(0,A.jsx)(pt,{checked:r.activeTool.locked,onChange:u,title:(0,S.t)("toolBar.lock")}),(0,A.jsx)("div",{className:"App-toolbar__divider"}),(0,A.jsx)(Tt,{checked:(0,B.l$)(r),onChange:function(){return d()},title:(0,S.t)("toolBar.hand"),isMobile:!0}),(0,A.jsx)(Be,{appState:r,canvas:c,activeTool:r.activeTool,setAppState:s,onImageAction:function(e){var t=e.pointerType;T({insertOnCanvasDirectly:"mouse"!==t})}})]})]})})})]})}}),(0,A.jsxs)("div",{className:(0,x.Z)("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":r.zenModeEnabled}),children:[(0,A.jsx)(Yt.Z,{collaborators:r.collaborators}),null==v?void 0:v(D.isMobile,r),!r.viewModeEnabled&&(0,A.jsx)(wt,{appState:r,setAppState:s})]})]})})),(0,A.jsx)(Pn,{appState:r,actionManager:n,showExitZenModeBtn:g,renderWelcomeScreen:M}),r.showStats&&(0,A.jsx)(Ct,{appState:r,setAppState:s,elements:l,onClose:function(){n.executeAction(In.u)},renderCustomStats:y}),r.scrolledOutside&&(0,A.jsx)("button",{className:"scroll-back-to-content",onClick:function(){s(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,oe.W)(l,r,c)))},children:(0,S.t)("buttons.scrollBackToContent")})]}),N()]})]});return(0,A.jsx)(yn.zt,{scope:L.jotaiScope,children:(0,A.jsx)(Mt.A3.Provider,{value:L,children:$})})},Vn=function(e){return e.suggestedBindings,e.startBoundElement,e.cursorButton,(0,Te.Z)(e,Rn)},Un=function(e,t){if(e.children!==t.children)return!1;e.canvas,e.onInsertElements;var n=e.appState,r=(0,Te.Z)(e,zn),i=(t.canvas,t.onInsertElements,t.appState),o=(0,Te.Z)(t,jn);return(0,I.w8)(Vn(n),Vn(i))&&(0,I.w8)(r,o)},$n=v().memo(Fn,Un),Zn=n(9650),Hn={};Hn.styleTagTransform=we(),Hn.setAttributes=ve(),Hn.insert=me().bind(null,"head"),Hn.domAPI=pe(),Hn.insertStyleElement=be(),de()(Zn.Z,Hn),Zn.Z&&Zn.Z.locals&&Zn.Z.locals;var Wn=function(e){var t=e.message,n=e.onClose,r=e.closable,i=void 0!==r&&r,o=e.duration,a=void 0===o?5e3:o,s=(0,g.useRef)(0),l=a!==1/0,c=(0,g.useCallback)((function(){l&&(s.current=window.setTimeout((function(){return n()}),a))}),[n,a,l]);(0,g.useEffect)((function(){if(l)return c(),function(){return clearTimeout(s.current)}}),[c,t,a,l]);var u=l?function(){return clearTimeout(null==s?void 0:s.current)}:void 0,d=l?c:void 0;return(0,A.jsxs)("div",{className:"Toast",onMouseEnter:u,onMouseLeave:d,children:[(0,A.jsx)("p",{className:"Toast__message",children:t}),i&&(0,A.jsx)(E.V,{icon:k.Tw,"aria-label":"close",type:"icon",onClick:n,className:"close"})]})};function qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kn=(0,N.z)({name:"viewMode",viewMode:!0,trackEvent:{category:"canvas",predicate:function(e){return!e.viewModeEnabled}},perform:function(e,t){return{appState:Gn(Gn({},t),{},{viewModeEnabled:!this.checked(t)}),commitToHistory:!1}},checked:function(e){return e.viewModeEnabled},predicate:function(e,t,n){return void 0===n.viewModeEnabled},contextItemLabel:"labels.viewMode",keyTest:function(e){return!e[C.tW.CTRL_OR_CMD]&&e.altKey&&e.code===C.aU.R}}),Yn=n(5637),Xn=n(200),Jn=n.n(Xn),Qn=n(2325),er=n(4929),tr=n(267);function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rr=(0,l.Z)((function e(t){var n=this,r=t.scene,i=t.onSceneUpdated;(0,s.Z)(this,e),this.onFontsLoaded=function(t){if(t.every((function(t){var n="".concat(t.family,"-").concat(t.style,"-").concat(t.weight);return!!e.loadedFontFaces.has(n)||(e.loadedFontFaces.add(n),!1)})))return!1;var r=!1;n.scene.mapElements((function(e){return(0,Z.iB)(e)?((0,ie.bI)(e),r=!0,(0,T.BE)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,Z.JZ)(e)))):e})),r&&n.onSceneUpdated()},this.loadFontsForElements=function(){var e=(0,a.Z)(m().mark((function e(t){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all((0,o.Z)(new Set(t.filter((function(e){return(0,Z.iB)(e)})).map((function(e){return e.fontFamily})))).map((function(e){var t,n,r,i,o=(0,I.mO)({fontFamily:e,fontSize:16});if(null===(t=document.fonts)||void 0===t||null===(n=t.check)||void 0===n||!n.call(t,o))return null===(r=document.fonts)||void 0===r||null===(i=r.load)||void 0===i?void 0:i.call(r,o)})));case 2:r=e.sent,n.onFontsLoaded(r.flat().filter(Boolean));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.scene=r,this.onSceneUpdated=i}));rr.loadedFontFaces=new Set;var ir=n(4688),or=n(2416),ar=n(202),sr=function(){return(0,A.jsxs)("div",{"data-testid":"brave-measure-text-error",children:[(0,A.jsxs)("p",{children:[(0,S.t)("errors.brave_measure_text_error.start")," ",(0,A.jsx)("span",{style:{fontWeight:600},children:(0,S.t)("errors.brave_measure_text_error.aggressive_block_fingerprint")})," ",(0,S.t)("errors.brave_measure_text_error.setting_enabled"),".",(0,A.jsx)("br",{}),(0,A.jsx)("br",{}),(0,S.t)("errors.brave_measure_text_error.break")," ",(0,A.jsx)("span",{style:{fontWeight:600},children:(0,S.t)("errors.brave_measure_text_error.text_elements")})," ",(0,S.t)("errors.brave_measure_text_error.in_your_drawings"),"."]}),(0,A.jsxs)("p",{children:[(0,S.t)("errors.brave_measure_text_error.strongly_recommend")," ",(0,A.jsxs)("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:[" ",(0,S.t)("errors.brave_measure_text_error.steps")]})," ",(0,S.t)("errors.brave_measure_text_error.how"),"."]}),(0,A.jsxs)("p",{children:[(0,S.t)("errors.brave_measure_text_error.disable_setting")," ",(0,A.jsx)("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:(0,S.t)("errors.brave_measure_text_error.issue")})," ",(0,S.t)("errors.brave_measure_text_error.write")," ",(0,A.jsx)("a",{href:"https://discord.gg/UexuTaE",children:(0,S.t)("errors.brave_measure_text_error.discord")}),"."]})]})};function lr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return cr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ur(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var i=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}function dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pr={isSmScreen:!1,isMobile:!1,isTouchScreen:!1,canDeviceFitSidebar:!1},fr=v().createContext(pr);fr.displayName="DeviceContext";var mr=v().createContext({container:null,id:null});mr.displayName="ExcalidrawContainerContext";var gr=v().createContext([]);gr.displayName="ExcalidrawElementsContext";var vr=v().createContext(hr(hr({},(0,B.im)()),{},{width:0,height:0,offsetLeft:0,offsetTop:0}));vr.displayName="ExcalidrawAppStateContext";var yr=v().createContext((function(){console.warn("unitialized ExcalidrawSetAppStateContext context!")}));yr.displayName="ExcalidrawSetAppStateContext";var br=v().createContext(null);br.displayName="ExcalidrawActionManagerContext";var xr=function(){return(0,g.useContext)(fr)},wr=function(){return(0,g.useContext)(mr)},_r=function(){return(0,g.useContext)(gr)},kr=function(){return(0,g.useContext)(vr)},Er=function(){return(0,g.useContext)(yr)},Sr=function(){return(0,g.useContext)(br)},Cr=!1,Tr=0,Mr=0,Ir=0,Or=!1,Ar=!1,Pr=!1,Dr={horizontal:null,vertical:null},Lr=0,Rr=!1,zr=!0,jr=!1,Nr=0,Br=!1,Fr=null,Vr={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null},Ur=function(e){(0,u.Z)(d,e);var t,n,r=ur(d);function d(e){var t;(0,s.Z)(this,d),t=r.call(this,e),$r.call((0,c.Z)(t));var n,i=(0,B.im)(),o=e.excalidrawRef,a=e.viewModeEnabled,l=void 0!==a&&a,u=e.zenModeEnabled,h=void 0!==u&&u,p=e.gridModeEnabled,f=void 0!==p&&p,m=e.theme,g=void 0===m?i.theme:m,v=e.name,y=void 0===v?i.name:v;if(t.state=hr(hr(hr({},i),{},{theme:g,isLoading:!0},t.getCanvasOffsets()),{},{viewModeEnabled:l,zenModeEnabled:h,gridSize:f?O.k:null,name:y,width:window.innerWidth,height:window.innerHeight,showHyperlinkPopup:!1,isSidebarDocked:!1}),t.id=(0,w.x0)(),t.library=new U.ZP((0,c.Z)(t)),o){var b,x="current"in o&&(null===(b=o.current)||void 0===b?void 0:b.readyPromise)||(0,I.PI)(),_={ready:!0,readyPromise:x,updateScene:t.updateScene,updateLibrary:t.library.updateLibrary,addFiles:t.addFiles,resetScene:t.resetScene,getSceneElementsIncludingDeleted:t.getSceneElementsIncludingDeleted,history:{clear:t.resetHistory},scrollToContent:t.scrollToContent,getSceneElements:t.getSceneElements,getAppState:function(){return t.state},getFiles:function(){return t.files},refresh:t.refresh,setToast:t.setToast,id:t.id,setActiveTool:t.setActiveTool,setCursor:t.setCursor,resetCursor:t.resetCursor,toggleMenu:t.toggleMenu};"function"==typeof o?o(_):o.current=_,x.resolve(_)}return t.excalidrawContainerValue={container:t.excalidrawContainerRef.current,id:t.id},t.scene=new ae.Z,t.fonts=new rr({scene:t.scene,onSceneUpdated:t.onSceneUpdated}),t.history=new te,t.actionManager=new j(t.syncActionResult,(function(){return t.state}),(function(){return t.scene.getElementsIncludingDeleted()}),(0,c.Z)(t)),t.actionManager.registerAll(N.N),t.actionManager.registerAction((n=t.history,{name:"undo",trackEvent:{category:"history"},perform:function(e,t){return L(e,t,(function(){return n.undoOnce()}))},keyTest:function(e){return e[C.tW.CTRL_OR_CMD]&&e.key.toLowerCase()===C.tW.Z&&!e.shiftKey},PanelComponent:function(e){var t=e.updateData,n=e.data;return(0,A.jsx)(E.V,{type:"button",icon:k.UE,"aria-label":(0,S.t)("buttons.undo"),onClick:t,size:(null==n?void 0:n.size)||"medium"})},commitToHistory:function(){return!1}})),t.actionManager.registerAction(function(e){return{name:"redo",trackEvent:{category:"history"},perform:function(t,n){return L(t,n,(function(){return e.redoOnce()}))},keyTest:function(e){return e[C.tW.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===C.tW.Z||O.ED&&e.ctrlKey&&!e.shiftKey&&e.key===C.tW.Y},PanelComponent:function(e){var t=e.updateData,n=e.data;return(0,A.jsx)(E.V,{type:"button",icon:k.zG,"aria-label":(0,S.t)("buttons.redo"),onClick:t,size:(null==n?void 0:n.size)||"medium"})},commitToHistory:function(){return!1}}}(t.history)),t}return(0,l.Z)(d,[{key:"renderCanvas",value:function(){var e=window.devicePixelRatio,t=this.state,n=t.width,r=t.height,i=n*e,o=r*e;return t.viewModeEnabled?(0,A.jsx)("canvas",{className:"excalidraw__canvas",style:{width:n,height:r,cursor:O.oc.GRAB},width:i,height:o,ref:this.handleCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,children:(0,S.t)("labels.drawingCanvas")}):(0,A.jsx)("canvas",{className:"excalidraw__canvas",style:{width:n,height:r},width:i,height:o,ref:this.handleCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,children:(0,S.t)("labels.drawingCanvas")})}},{key:"render",value:function(){var e,t=this,n=(0,oe.eD)(this.scene.getNonDeletedElements(),this.state),r=this.props,i=r.renderTopRightUI,o=r.renderCustomStats;return(0,A.jsx)("div",{className:(0,x.Z)("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled,"excalidraw--mobile":this.device.isMobile}),ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,children:(0,A.jsx)(mr.Provider,{value:this.excalidrawContainerValue,children:(0,A.jsx)(fr.Provider,{value:this.device,children:(0,A.jsx)(yr.Provider,{value:this.setAppState,children:(0,A.jsxs)(vr.Provider,{value:this.state,children:[(0,A.jsx)(gr.Provider,{value:this.scene.getNonDeletedElements(),children:(0,A.jsxs)(br.Provider,{value:this.actionManager,children:[(0,A.jsx)($n,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,onInsertElements:function(e){return t.addElementsFromPasteOrLibrary({elements:e,position:"center",files:null})},langCode:(0,S.G3)().code,renderTopRightUI:i,renderCustomStats:o,renderCustomSidebar:this.props.renderSidebar,showExitZenModeBtn:void 0===(null===(e=this.props)||void 0===e?void 0:e.zenModeEnabled)&&this.state.zenModeEnabled,libraryReturnUrl:this.props.libraryReturnUrl,UIOptions:this.props.UIOptions,focusContainer:this.focusContainer,library:this.library,id:this.id,onImageAction:this.onImageAction,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&"selection"===this.state.activeTool.type&&!this.scene.getElementsIncludingDeleted().length,children:this.props.children}),(0,A.jsx)("div",{className:"excalidraw-textEditorContainer"}),(0,A.jsx)("div",{className:"excalidraw-contextMenuContainer"}),1===n.length&&!this.state.contextMenu&&this.state.showHyperlinkPopup&&(0,A.jsx)(er.nW,{element:n[0],setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen},n[0].id),null!==this.state.toast&&(0,A.jsx)(Wn,{message:this.state.toast.message,onClose:function(){return t.setToast(null)},duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&(0,A.jsx)(Ce,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager}),(0,A.jsx)("main",{children:this.renderCanvas()})]})})," "]})})})})})}},{key:"componentDidMount",value:(n=(0,a.Z)(m().mark((function e(){var t,n,r,i,o,a,s=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,"production"!==O.Vi.TEST&&"production"!==O.Vi.DEVELOPMENT||(this.setState.bind(this),Object.defineProperties(window.h,{state:{configurable:!0,get:function(){return s.state}},setState:{configurable:!0,value:function(){return s.setState.apply(s,arguments)}},app:{configurable:!0,value:this},history:{configurable:!0,value:this.history}})),this.scene.addCallback(this.onSceneUpdated),this.addEventListeners(),this.excalidrawContainerRef.current&&this.focusContainer(),this.excalidrawContainerRef.current&&this.refreshDeviceState(this.excalidrawContainerRef.current),"ResizeObserver"in window&&null!==(t=this.excalidrawContainerRef)&&void 0!==t&&t.current?(this.resizeObserver=new ResizeObserver((function(){zr=!1,s.refreshDeviceState(s.excalidrawContainerRef.current),s.updateDOMRect()})),null===(n=this.resizeObserver)||void 0===n||n.observe(this.excalidrawContainerRef.current)):window.matchMedia&&(r=window.matchMedia("(max-width: ".concat(O.kV,"px), (max-height: ").concat(O.Yx,"px) and (max-width: ").concat(O.sS,"px)")),i=window.matchMedia("(max-width: ".concat(O.eF,"px)")),o=window.matchMedia("(min-width: ".concat(null!=this.props.UIOptions.dockedSidebarBreakpoint?this.props.UIOptions.dockedSidebarBreakpoint:O.sk,"px)")),a=function(){s.excalidrawContainerRef.current.getBoundingClientRect(),s.device=(0,I.v4)(s.device,{isSmScreen:i.matches,isMobile:r.matches,canDeviceFitSidebar:o.matches})},r.addListener(a),this.detachIsMobileMqHandler=function(){return r.removeListener(a)}),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),(0,O.jP)()&&!(0,De.eB)()&&this.setState({errorMessage:(0,A.jsx)(sr,{})});case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){var e;this.files={},this.imageCache.clear(),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.scene.destroy(),clearTimeout(Lr),Lr=0}},{key:"removeEventListeners",value:function(){var e,t,n,r,i;document.removeEventListener(O.Ks.POINTER_UP,this.removePointer),document.removeEventListener(O.Ks.COPY,this.onCopy),document.removeEventListener(O.Ks.PASTE,this.pasteFromClipboard),document.removeEventListener(O.Ks.CUT,this.onCut),null===(e=this.excalidrawContainerRef.current)||void 0===e||e.removeEventListener(O.Ks.WHEEL,this.onWheel),null===(t=this.nearestScrollableContainer)||void 0===t||t.removeEventListener(O.Ks.SCROLL,this.onScroll),document.removeEventListener(O.Ks.KEYDOWN,this.onKeyDown,!1),document.removeEventListener(O.Ks.MOUSE_MOVE,this.updateCurrentCursorPosition,!1),document.removeEventListener(O.Ks.KEYUP,this.onKeyUp),window.removeEventListener(O.Ks.RESIZE,this.onResize,!1),window.removeEventListener(O.Ks.UNLOAD,this.onUnload,!1),window.removeEventListener(O.Ks.BLUR,this.onBlur,!1),null===(n=this.excalidrawContainerRef.current)||void 0===n||n.removeEventListener(O.Ks.DRAG_OVER,this.disableEvent,!1),null===(r=this.excalidrawContainerRef.current)||void 0===r||r.removeEventListener(O.Ks.DROP,this.disableEvent,!1),document.removeEventListener(O.Ks.GESTURE_START,this.onGestureStart,!1),document.removeEventListener(O.Ks.GESTURE_CHANGE,this.onGestureChange,!1),document.removeEventListener(O.Ks.GESTURE_END,this.onGestureEnd,!1),null===(i=this.detachIsMobileMqHandler)||void 0===i||i.call(this)}},{key:"addEventListeners",value:function(){var e,t,n,r,i,o=this;this.removeEventListeners(),document.addEventListener(O.Ks.POINTER_UP,this.removePointer),document.addEventListener(O.Ks.COPY,this.onCopy),null===(e=this.excalidrawContainerRef.current)||void 0===e||e.addEventListener(O.Ks.WHEEL,this.onWheel,{passive:!1}),this.props.handleKeyboardGlobally&&document.addEventListener(O.Ks.KEYDOWN,this.onKeyDown,!1),document.addEventListener(O.Ks.KEYUP,this.onKeyUp,{passive:!0}),document.addEventListener(O.Ks.MOUSE_MOVE,this.updateCurrentCursorPosition),null===(t=document.fonts)||void 0===t||null===(n=t.addEventListener)||void 0===n||n.call(t,"loadingdone",(function(e){var t=e.fontfaces;o.fonts.onFontsLoaded(t)})),document.addEventListener(O.Ks.GESTURE_START,this.onGestureStart,!1),document.addEventListener(O.Ks.GESTURE_CHANGE,this.onGestureChange,!1),document.addEventListener(O.Ks.GESTURE_END,this.onGestureEnd,!1),this.state.viewModeEnabled||(document.addEventListener(O.Ks.PASTE,this.pasteFromClipboard),document.addEventListener(O.Ks.CUT,this.onCut),this.props.detectScroll&&(this.nearestScrollableContainer=(0,I.Ip)(this.excalidrawContainerRef.current),this.nearestScrollableContainer.addEventListener(O.Ks.SCROLL,this.onScroll)),window.addEventListener(O.Ks.RESIZE,this.onResize,!1),window.addEventListener(O.Ks.UNLOAD,this.onUnload,!1),window.addEventListener(O.Ks.BLUR,this.onBlur,!1),null===(r=this.excalidrawContainerRef.current)||void 0===r||r.addEventListener(O.Ks.DRAG_OVER,this.disableEvent,!1),null===(i=this.excalidrawContainerRef.current)||void 0===i||i.addEventListener(O.Ks.DROP,this.disableEvent,!1))}},{key:"componentDidUpdate",value:function(e,t){var n,r,i,o=this;this.state.showWelcomeScreen||this.scene.getElementsIncludingDeleted().length||this.setState({showWelcomeScreen:!0}),this.excalidrawContainerRef.current&&e.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshDeviceState(this.excalidrawContainerRef.current),(t.scrollX!==this.state.scrollX||t.scrollY!==this.state.scrollY)&&(null===(r=this.props)||void 0===r||null===(i=r.onScrollChange)||void 0===i||i.call(r,this.state.scrollX,this.state.scrollY)),Object.keys(this.state.selectedElementIds).length&&(0,B.EN)(this.state)&&this.setState({activeTool:(0,I.Om)(this.state,{type:"selection"})}),"eraser"===this.state.activeTool.type&&t.theme!==this.state.theme&&(0,I.OF)(this.canvas,this.state.theme),"selection"===t.activeTool.type&&"selection"!==this.state.activeTool.type&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),e.langCode!==this.props.langCode&&this.updateLanguage(),e.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),t.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),e.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),e.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),e.gridModeEnabled!==this.props.gridModeEnabled&&this.setState({gridSize:this.props.gridModeEnabled?O.k:null}),this.props.name&&e.name!==this.props.name&&this.setState({name:this.props.name}),null===(n=this.excalidrawContainerRef.current)||void 0===n||n.classList.toggle("theme--dark","dark"===this.state.theme),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout((function(){o.state.editingLinearElement&&o.actionManager.executeAction(_.pL)})),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null});var a,s,l=t.multiElement;t.activeTool!==this.state.activeTool&&null!=l&&(0,M.N1)(this.state)&&(0,q.Mn)(l,!1)&&(0,M.R)(l,this.state,this.scene,(0,I.AK)(H._.getPointAtIndexGlobalCoordinates(l,-1))),this.renderScene(),this.history.record(this.state,this.scene.getElementsIncludingDeleted()),this.state.isLoading||null===(a=(s=this.props).onChange)||void 0===a||a.call(s,this.scene.getElementsIncludingDeleted(),this.state,this.files)}},{key:"addTextFromPaste",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,I.dE)({clientX:Mr,clientY:Ir},this.state),r=n.x,i=n.y,a={x:r,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:e,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:this.state.currentItemTextAlign,verticalAlign:O.hs,locked:!1},s=10,l=i,c=t?[e]:e.split("\n"),u=c.reduce((function(e,t,n){var i=t.trim(),o=(0,De.PT)(a.fontFamily);if(i.length){var u=(0,Z.VL)(hr(hr({},a),{},{x:r,y:l,text:i,lineHeight:o}));e.push(u),l+=u.height+s}else{var d;(null===(d=c[n-1])||void 0===d?void 0:d.trim())&&(l+=(0,De.Rg)(a.fontSize,o)+s)}return e}),[]);0!==u.length&&(this.scene.replaceAllElements([].concat((0,o.Z)(this.scene.getElementsIncludingDeleted()),(0,o.Z)(u))),this.setState({selectedElementIds:Object.fromEntries(u.map((function(e){return[e.id,!0]})))}),!t&&u.length>1&&!1===Br&&!this.device.isMobile&&(this.setToast({message:(0,S.t)("toast.pasteAsSingleElement",{shortcut:(0,I.uY)("CtrlOrCmd+Shift+V")}),duration:5e3}),Br=!0),this.history.resumeRecording())}},{key:"handleTextWysiwyg",value:function(e,t){var n=this,r=t.isExistingElement,i=void 0!==r&&r,a=function(t,r,i){n.scene.replaceAllElements((0,o.Z)(n.scene.getElementsIncludingDeleted().map((function(n){return n.id===e.id&&(0,Z.iB)(n)?(0,Z.N_)(n,{text:t,isDeleted:i,originalText:r}):n}))))};(0,Z.b_)({id:e.id,canvas:this.canvas,getViewportCoords:function(e,t){var r=(0,I._i)({sceneX:e,sceneY:t},n.state),i=r.x,o=r.y;return[i-n.state.offsetLeft,o-n.state.offsetTop]},onChange:(0,I.tH)((function(t){a(t,t,!1),(0,Z.qP)(e)&&(0,M.Ww)(e)})),onSubmit:(0,I.tH)((function(t){var r=t.text,o=t.viaKeyboard,s=t.originalText,l=!r.trim();if(a(r,s,l),!l&&o){var c=e.containerId?e.containerId:e.id;n.setState((function(e){return{selectedElementIds:hr(hr({},e.selectedElementIds),{},(0,p.Z)({},c,!0))}}))}l&&(0,M.$q)(n.scene.getNonDeletedElements(),[e]),l&&!i||n.history.resumeRecording(),n.setState({draggingElement:null,editingElement:null}),n.state.activeTool.locked&&(0,I.Uk)(n.canvas,n.state),n.focusContainer()})),element:e,excalidrawContainer:this.excalidrawContainerRef.current,app:this}),this.deselectElements(),a(e.text,e.originalText,!1)}},{key:"deselectElements",value:function(){this.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})}},{key:"getTextElementAtPosition",value:function(e,t){var n=this.getElementAtPosition(e,t,{includeBoundTextElement:!0});return n&&(0,Z.iB)(n)&&!n.isDeleted?n:null}},{key:"getElementAtPosition",value:function(e,t,n){var r=this.getElementsAtPosition(e,t,null==n?void 0:n.includeBoundTextElement,null==n?void 0:n.includeLockedElements);if(r.length>1){if(null!=n&&n.preferSelected)for(var i=r.length-1;i>-1;i--)if(this.state.selectedElementIds[r[i].id])return r[i];var o=r[r.length-1];return(0,Z.wB)(o,this.state,e,t)?r[r.length-2]:o}return 1===r.length?r[0]:null}},{key:"getElementsAtPosition",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=r&&i?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter((function(e){return(i||!e.locked)&&(r||!((0,Z.iB)(e)&&e.containerId))}));return(0,oe.CJ)(o,(function(r){return(0,Z.wX)(r,n.state,e,t)}))}},{key:"handleHoverSelectedLinearElement",value:function(e,t,n){var r=H._.getElement(e.elementId),i=(0,De.WJ)(r);if(r)if(this.state.selectedLinearElement){var o=-1,a=null;(0,Qn.Qu)(r,this.state,[t,n])?(o=H._.getPointIndexUnderCursor(r,this.state.zoom,t,n),a=H._.getSegmentMidpointHitCoords(e,{x:t,y:n},this.state),o>=0||a?(0,I.KJ)(this.canvas,O.oc.POINTER):(0,I.KJ)(this.canvas,O.oc.MOVE)):((0,tr.oY)([r],this.state)&&(0,Z.wB)(r,this.state,t,n)||i&&(0,Z.wX)(i,this.state,t,n))&&(0,I.KJ)(this.canvas,O.oc.MOVE),this.state.selectedLinearElement.hoverPointIndex!==o&&this.setState({selectedLinearElement:hr(hr({},this.state.selectedLinearElement),{},{hoverPointIndex:o})}),H._.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,a)||this.setState({selectedLinearElement:hr(hr({},this.state.selectedLinearElement),{},{segmentMidPointHoveredCoords:a})})}else(0,I.KJ)(this.canvas,O.oc.AUTO)}},{key:"maybeCleanupAfterMissingPointerUp",value:function(e){null!==Fr&&Fr(e)}},{key:"updateGestureOnPointerDown",value:function(e){Vr.pointers.set(e.pointerId,{x:e.clientX,y:e.clientY}),2===Vr.pointers.size&&(Vr.lastCenter=G(Vr.pointers),Vr.initialScale=this.state.zoom.value,Vr.initialDistance=K(Array.from(Vr.pointers.values())))}},{key:"initialPointerDownState",value:function(e){var t=(0,I.dE)(e,this.state),n=(0,oe.eD)(this.scene.getNonDeletedElements(),this.state),r=(0,Z.KP)(n),o=(0,i.Z)(r,4),a=o[0],s=o[1],l=o[2],c=o[3];return{origin:t,withCmdOrCtrl:e[C.tW.CTRL_OR_CMD],originInGrid:(0,I.AK)((0,ne.wC)(t.x,t.y,this.state.gridSize)),scrollbars:(0,oe._4)(Dr,e.clientX-this.state.offsetLeft,e.clientY-this.state.offsetTop),lastCoords:hr({},t),originalElements:this.scene.getNonDeletedElements().reduce((function(e,t){return e.set(t.id,(0,W.OL)(t)),e}),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(l+a)/2,y:(c+s)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(t,n)},drag:{hasOccurred:!1,offset:null},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1},elementIdsToErase:{}}}},{key:"handleDraggingScrollBar",value:function(e,t){var n=this;if(!t.scrollbars.isOverEither||this.state.multiElement)return!1;Pr=!0,t.lastCoords.x=e.clientX,t.lastCoords.y=e.clientY;var r=(0,I.$9)((function(e){e.target instanceof HTMLElement&&n.handlePointerMoveOverScrollbars(e,t)})),i=(0,I.tH)((function(){Pr=!1,(0,I.Uk)(n.canvas,n.state),Fr=null,n.setState({cursorButton:"up"}),n.savePointer(e.clientX,e.clientY,"up"),window.removeEventListener(O.Ks.POINTER_MOVE,r),window.removeEventListener(O.Ks.POINTER_UP,i),r.flush()}));return Fr=i,window.addEventListener(O.Ks.POINTER_MOVE,r),window.addEventListener(O.Ks.POINTER_UP,i),!0}},{key:"isASelectedElement",value:function(e){return null!=e&&this.state.selectedElementIds[e.id]}},{key:"isHittingCommonBoundingBoxOfSelectedElements",value:function(e,t){if(t.length<2)return!1;var n=10/this.state.zoom.value,r=(0,Z.KP)(t),o=(0,i.Z)(r,4),a=o[0],s=o[1],l=o[2],c=o[3];return e.x>a-n&&e.x<l+n&&e.y>s-n&&e.y<c+n}},{key:"onKeyDownFromPointerDownHandler",value:function(e){var t=this;return(0,I.tH)((function(n){t.maybeHandleResize(e,n)||t.maybeDragNewGenericElement(e,n)}))}},{key:"onKeyUpFromPointerDownHandler",value:function(e){var t=this;return(0,I.tH)((function(n){n.key===C.tW.ALT&&n.preventDefault(),t.maybeHandleResize(e,n)||t.maybeDragNewGenericElement(e,n)}))}},{key:"onPointerMoveFromPointerDownHandler",value:function(e){var t=this;return(0,I.$9)((function(n){var r;if(null===e.drag.offset&&(e.drag.offset=(0,I.AK)((0,Z.$V)((0,oe.eD)(t.scene.getNonDeletedElements(),t.state),e.origin.x,e.origin.y))),n.target instanceof HTMLElement&&!t.handlePointerMoveOverScrollbars(n,e)){var a=(0,I.dE)(n,t.state);if((0,B.EN)(t.state))t.handleEraser(n,e,a);else{var s=(0,ne.wC)(a.x,a.y,t.state.gridSize),l=(0,i.Z)(s,2),c=l[0],u=l[1];if(e.drag.hasOccurred||"arrow"!==t.state.activeTool.type&&"line"!==t.state.activeTool.type||!((0,ne.LW)(a.x,a.y,e.origin.x,e.origin.y)<O.f)){if(e.resize.isResizing&&(e.lastCoords.x=a.x,e.lastCoords.y=a.y,t.maybeHandleResize(e,n)))return!0;if(t.state.selectedLinearElement){var d=t.state.editingLinearElement||t.state.selectedLinearElement;if(H._.shouldAddMidpoint(t.state.selectedLinearElement,a,t.state)){var h=H._.addMidpoint(t.state.selectedLinearElement,a,t.state);if(!h)return;return void(0,y.flushSync)((function(){t.state.selectedLinearElement&&t.setState({selectedLinearElement:hr(hr({},t.state.selectedLinearElement),{},{pointerDownState:h.pointerDownState,selectedPointsIndices:h.selectedPointsIndices})}),t.state.editingLinearElement&&t.setState({editingLinearElement:hr(hr({},t.state.editingLinearElement),{},{pointerDownState:h.pointerDownState,selectedPointsIndices:h.selectedPointsIndices})})}))}if(null!==d.pointerDownState.segmentMidpoint.value&&!d.pointerDownState.segmentMidpoint.added)return;var f=H._.handlePointDragging(n,t.state,a.x,a.y,(function(e,n){t.maybeSuggestBindingsForLinearElementAtCoords(e,n)}),d);if(f)return e.lastCoords.x=a.x,e.lastCoords.y=a.y,e.drag.hasOccurred=!0,t.state.editingLinearElement&&!t.state.editingLinearElement.isDragging&&t.setState({editingLinearElement:hr(hr({},t.state.editingLinearElement),{},{isDragging:!0})}),void(t.state.selectedLinearElement.isDragging||t.setState({selectedLinearElement:hr(hr({},t.state.selectedLinearElement),{},{isDragging:!0})}))}var m=e.hit.allHitElements.some((function(e){return t.isASelectedElement(e)})),g=t.state.editingLinearElement&&n.shiftKey&&t.state.editingLinearElement.elementId===(null===(r=e.hit.element)||void 0===r?void 0:r.id);if((m||e.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!g){var v=(0,oe.eD)(t.scene.getNonDeletedElements(),t.state);if(v.every((function(e){return e.locked})))return;if(e.drag.hasOccurred=!0,v.length>0&&!e.withCmdOrCtrl){var b=(0,ne.wC)(a.x-e.drag.offset.x,a.y-e.drag.offset.y,t.state.gridSize),x=(0,i.Z)(b,2),w=x[0],_=x[1],k=[Math.abs(a.x-e.origin.x),Math.abs(a.y-e.origin.y)],E=k[0],S=k[1],A=n.shiftKey;if((0,Z.o8)(e,v,w,_,A,E,S,t.state),t.maybeSuggestBindingForAll(v),n.altKey&&!e.hit.hasBeenDuplicated){e.hit.hasBeenDuplicated=!0;var P,D=[],L=[],R=new Map,z=new Map,j=e.hit.element,N=t.scene.getElementsIncludingDeleted(),F=(0,oe.eD)(N,t.state,!0).map((function(e){return e.id})),V=lr(N);try{for(V.s();!(P=V.n()).done;){var U=P.value;if(F.includes(U.id)||U.id===(null==j?void 0:j.id)&&e.hit.wasAddedToSelection){var $=(0,Z.Sy)(t.state.editingGroupId,R,U),W=(0,ne.wC)(e.origin.x-e.drag.offset.x,e.origin.y-e.drag.offset.y,t.state.gridSize),G=(0,i.Z)(W,2),K=G[0],Y=G[1];(0,T.DR)($,{x:$.x+(K-w),y:$.y+(Y-_)}),D.push($),L.push(U),z.set(U.id,$.id)}else D.push(U)}}catch(e){V.e(e)}finally{V.f()}var J=[].concat(D,L);(0,De.P7)(D,L,z),(0,M.ek)(J,L,z,"duplicatesServeAsOld"),t.scene.replaceAllElements(J)}return}}var Q=t.state.draggingElement;if(Q){if("freedraw"===Q.type){var ee=Q.points,te=a.x-Q.x,re=a.y-Q.y,ie=ee.length>0&&ee[ee.length-1];if(!ie||ie[0]!==te||ie[1]!==re){var ae=Q.simulatePressure?Q.pressures:[].concat((0,o.Z)(Q.pressures),[n.pressure]);(0,T.DR)(Q,{points:[].concat((0,o.Z)(ee),[[te,re]]),pressures:ae})}}else if((0,q.bt)(Q)){e.drag.hasOccurred=!0;var se=Q.points,le=c-Q.x,ce=u-Q.y;if((0,C.Ge)(n)&&2===se.length){var ue=(0,Z.o4)(Q.x,Q.y,a.x,a.y);le=ue.width,ce=ue.height}1===se.length?(0,T.DR)(Q,{points:[].concat((0,o.Z)(se),[[le,ce]])}):2===se.length&&(0,T.DR)(Q,{points:[].concat((0,o.Z)(se.slice(0,-1)),[[le,ce]])}),(0,q.Mn)(Q,!1)&&t.maybeSuggestBindingsForLinearElementAtCoords(Q,[a],t.state.startBoundElement)}else e.lastCoords.x=a.x,e.lastCoords.y=a.y,t.maybeDragNewGenericElement(e,n);if("selection"===t.state.activeTool.type){e.boxSelection.hasOccurred=!0;var de=t.scene.getNonDeletedElements();if(n.shiftKey||t.state.editingLinearElement||!(0,oe.N)(de,t.state)||(e.withCmdOrCtrl&&e.hit.element?t.setState((function(n){return(0,X.bO)(hr(hr({},n),{},{selectedElementIds:(0,p.Z)({},e.hit.element.id,!0)}),t.scene.getNonDeletedElements())})):t.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})),t.state.editingLinearElement)H._.handleBoxSelection(n,t.state,t.setState.bind(t));else{var he=(0,oe.Yp)(de,Q);t.setState((function(n){return(0,X.bO)(hr(hr({},n),{},{selectedElementIds:hr(hr(hr({},n.selectedElementIds),he.reduce((function(e,t){return e[t.id]=!0,e}),{})),e.hit.element?(0,p.Z)({},e.hit.element.id,!he.length):null),showHyperlinkPopup:!(1!==he.length||!he[0].link)&&"info",selectedLinearElement:1===he.length&&(0,q.bt)(he[0])?new H._(he[0],t.scene):null}),t.scene.getNonDeletedElements())}))}}}}}}}))}},{key:"handlePointerMoveOverScrollbars",value:function(e,t){if(t.scrollbars.isOverHorizontal){var n=e.clientX,r=n-t.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-r/this.state.zoom.value}),t.lastCoords.x=n,!0}if(t.scrollbars.isOverVertical){var i=e.clientY,o=i-t.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-o/this.state.zoom.value}),t.lastCoords.y=i,!0}return!1}},{key:"onPointerUpFromPointerDownHandler",value:function(e){var t=this;return(0,I.tH)((function(n){var r,i,a,s=t.state,l=s.draggingElement,c=s.resizingElement,u=s.multiElement,d=s.activeTool,h=s.isResizing,f=s.isRotating;if(t.setState({isResizing:!1,isRotating:!1,resizingElement:null,selectionElement:null,cursorButton:"up",editingElement:u||(0,Z.iB)(t.state.editingElement)?t.state.editingElement:null}),t.savePointer(n.clientX,n.clientY,"up"),t.state.editingLinearElement)if(e.boxSelection.hasOccurred||(null===(i=e.hit)||void 0===i||null===(a=i.element)||void 0===a?void 0:a.id)===t.state.editingLinearElement.elementId){var m=H._.handlePointerUp(n,t.state.editingLinearElement,t.state);m!==t.state.editingLinearElement&&t.setState({editingLinearElement:m,suggestedBindings:[]})}else t.actionManager.executeAction(_.pL);else if(t.state.selectedLinearElement){var g,v;if((null===(g=e.hit)||void 0===g||null===(v=g.element)||void 0===v?void 0:v.id)!==t.state.selectedLinearElement.elementId)(0,oe.eD)(t.scene.getNonDeletedElements(),t.state).length>1&&t.setState({selectedLinearElement:null});else{var y=H._.handlePointerUp(n,t.state.selectedLinearElement,t.state),b=y.startBindingElement,x=y.endBindingElement,w=t.scene.getElement(y.elementId);(0,q.Mn)(w)&&(0,M.HG)(w,b,x),y!==t.state.selectedLinearElement&&t.setState({selectedLinearElement:hr(hr({},y),{},{selectedPointsIndices:null}),suggestedBindings:[]})}}if(Fr=null,e.eventListeners.onMove&&e.eventListeners.onMove.flush(),window.removeEventListener(O.Ks.POINTER_MOVE,e.eventListeners.onMove),window.removeEventListener(O.Ks.POINTER_UP,e.eventListeners.onUp),window.removeEventListener(O.Ks.KEYDOWN,e.eventListeners.onKeyDown),window.removeEventListener(O.Ks.KEYUP,e.eventListeners.onKeyUp),t.state.pendingImageElementId&&t.setState({pendingImageElementId:null}),"freedraw"===(null==l?void 0:l.type)){var k=(0,I.dE)(n,t.state),E=l.points,S=k.x-l.x,C=k.y-l.y;S===E[0][0]&&C===E[0][1]&&(C+=1e-4,S+=1e-4);var A=l.simulatePressure?[]:[].concat((0,o.Z)(l.pressures),[n.pressure]);return(0,T.DR)(l,{points:[].concat((0,o.Z)(E),[[S,C]]),pressures:A,lastCommittedPoint:[S,C]}),void t.actionManager.executeAction(_.pL)}if((0,q.pC)(l)){var P=l;try{t.initializeImageDimensions(P),t.setState({selectedElementIds:(0,p.Z)({},P.id,!0)},(function(){t.actionManager.executeAction(_.pL)}))}catch(e){console.error(e),t.scene.replaceAllElements(t.scene.getElementsIncludingDeleted().filter((function(e){return e.id!==P.id}))),t.actionManager.executeAction(_.pL)}}else if((0,q.bt)(l)){l.points.length>1&&t.history.resumeRecording();var D=(0,I.dE)(n,t.state);e.drag.hasOccurred||!l||u?e.drag.hasOccurred&&!u&&((0,M.N1)(t.state)&&(0,q.Mn)(l,!1)&&(0,M.R)(l,t.state,t.scene,D),t.setState({suggestedBindings:[],startBoundElement:null}),d.locked?t.setState((function(e){return{draggingElement:null}})):((0,I.z8)(t.canvas),t.setState((function(e){return{draggingElement:null,activeTool:(0,I.Om)(t.state,{type:"selection"}),selectedElementIds:hr(hr({},e.selectedElementIds),{},(0,p.Z)({},l.id,!0)),selectedLinearElement:new H._(l,t.scene)}})))):((0,T.DR)(l,{points:[].concat((0,o.Z)(l.points),[[D.x-l.x,D.y-l.y]])}),t.setState({multiElement:l,editingElement:t.state.draggingElement}))}else{if("selection"!==d.type&&l&&(0,Z.QD)(l))return t.scene.replaceAllElements(t.scene.getElementsIncludingDeleted().slice(0,-1)),void t.setState({draggingElement:null});l&&(0,T.DR)(l,(0,Z.Qp)(l)),c&&t.history.resumeRecording(),c&&(0,Z.QD)(c)&&t.scene.replaceAllElements(t.scene.getElementsIncludingDeleted().filter((function(e){return e.id!==c.id})));var L=e.hit.element;if((null===(r=t.state.selectedLinearElement)||void 0===r?void 0:r.elementId)!==(null==L?void 0:L.id)&&(0,q.bt)(L)&&1===(0,oe.eD)(t.scene.getNonDeletedElements(),t.state).length&&t.setState({selectedLinearElement:new H._(L,t.scene)}),(0,B.EN)(t.state)){if(0===(0,ne.LW)(t.lastPointerDown.clientX,t.lastPointerDown.clientY,t.lastPointerUp.clientX,t.lastPointerUp.clientY)){var R=(0,I.dE)({clientX:t.lastPointerUp.clientX,clientY:t.lastPointerUp.clientY},t.state);t.getElementsAtPosition(R.x,R.y).forEach((function(t){return e.elementIdsToErase[t.id]={erase:!0,opacity:t.opacity}}))}t.eraseElements(e)}else{var z;if(Object.keys(e.elementIdsToErase).length&&t.restoreReadyToEraseElements(e),L&&!e.drag.hasOccurred&&!e.hit.wasAddedToSelection&&(!t.state.editingLinearElement||!e.boxSelection.hasOccurred))if(n.shiftKey&&!t.state.editingLinearElement)if(t.state.selectedElementIds[L.id])if((0,X.zq)(t.state,L)){var j=L.groupIds.flatMap((function(e){return(0,X.Fb)(t.scene.getNonDeletedElements(),e)})).map((function(e){return(0,p.Z)({},e.id,!1)})).reduce((function(e,t){return hr(hr({},e),t)}),{});t.setState((function(e){return{selectedGroupIds:hr(hr({},e.selectedElementIds),L.groupIds.map((function(e){return(0,p.Z)({},e,!1)})).reduce((function(e,t){return hr(hr({},e),t)}),{})),selectedElementIds:hr(hr({},e.selectedElementIds),j)}}))}else null!==(z=t.state.selectedLinearElement)&&void 0!==z&&z.isDragging||t.setState((function(e){var n=hr(hr({},e.selectedElementIds),{},(0,p.Z)({},L.id,!1)),r=(0,oe.eD)(t.scene.getNonDeletedElements(),hr(hr({},e),{},{selectedElementIds:n}));return(0,X.bO)(hr(hr({},e),{},{selectedElementIds:n,selectedLinearElement:1===r.length&&(0,q.bt)(r[0])?new H._(r[0],t.scene):e.selectedLinearElement}),t.scene.getNonDeletedElements())}));else t.setState((function(e){return{selectedElementIds:hr(hr({},e.selectedElementIds),{},(0,p.Z)({},L.id,!0))}}));else t.setState((function(e){var n;return hr({},(0,X.bO)(hr(hr({},e),{},{selectedElementIds:(0,p.Z)({},L.id,!0),selectedLinearElement:(0,q.bt)(L)&&(null===(n=e.selectedLinearElement)||void 0===n?void 0:n.elementId)!==L.id?new H._(L,t.scene):e.selectedLinearElement}),t.scene.getNonDeletedElements()))}));e.drag.hasOccurred||t.state.isResizing||!(L&&(0,Z.wB)(L,t.state,e.origin.x,e.origin.y)||!L&&e.hit.hasHitCommonBoundingBoxOfSelectedElements)?(!d.locked&&"freedraw"!==d.type&&l&&t.setState((function(e){return{selectedElementIds:hr(hr({},e.selectedElementIds),{},(0,p.Z)({},l.id,!0))}})),("selection"!==d.type||(0,oe.N)(t.scene.getNonDeletedElements(),t.state))&&t.history.resumeRecording(),(e.drag.hasOccurred||h||f)&&((0,M.N1)(t.state)?M.el:M.H)((0,oe.eD)(t.scene.getNonDeletedElements(),t.state)),d.locked||"freedraw"===d.type?t.setState({draggingElement:null,suggestedBindings:[]}):((0,I.z8)(t.canvas),t.setState({draggingElement:null,suggestedBindings:[],activeTool:(0,I.Om)(t.state,{type:"selection"})}))):t.state.editingLinearElement?t.setState({editingLinearElement:null}):t.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})}}}))}},{key:"maybeSuggestBindingForAll",value:function(e){var t=(0,M.ZB)(e);this.setState({suggestedBindings:t})}},{key:"clearSelection",value:function(e){this.setState((function(t){return{selectedElementIds:{},selectedGroupIds:{},editingGroupId:t.editingGroupId&&null!=e&&(0,X.Nd)(e,t.editingGroupId)?t.editingGroupId:null}})),this.setState({selectedElementIds:{},previousSelectedElementIds:this.state.selectedElementIds})}},{key:"getTextWysiwygSnappedToCenterPosition",value:function(e,t,n,r){if(r){var i=r.x+r.width/2,o=r.y+r.height/2,a=(0,De.TP)(r,n);if(a&&(i=a.x,o=a.y),Math.hypot(e-i,t-o)<O.wZ){var s=(0,I._i)({sceneX:i,sceneY:o},n);return{viewportX:s.x,viewportY:s.y,elementCenterX:i,elementCenterY:o}}}}},{key:"getCanvasOffsets",value:function(){var e;if(null!==(e=this.excalidrawContainerRef)&&void 0!==e&&e.current){var t=this.excalidrawContainerRef.current.getBoundingClientRect();return{offsetLeft:t.left,offsetTop:t.top}}return{offsetLeft:0,offsetTop:0}}},{key:"updateLanguage",value:(t=(0,a.Z)(m().mark((function e(){var t,n=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.Mj.find((function(e){return e.code===n.props.langCode}))||S.Fp,e.next=3,(0,S.m0)(t);case 3:this.setAppState({});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}],[{key:"resetTapTwice",value:function(){Cr=!1}}]),d}(v().Component);Ur.defaultProps={UIOptions:O.cW};var $r=function(){var e=this;this.canvas=null,this.rc=null,this.unmounted=!1,this.device=pr,this.excalidrawContainerRef=v().createRef(),this.files={},this.imageCache=new Map,this.lastPointerDown=null,this.lastPointerUp=null,this.lastScenePointer=null,this.focusContainer=function(){var t;e.props.autoFocus&&(null===(t=e.excalidrawContainerRef.current)||void 0===t||t.focus())},this.getSceneElementsIncludingDeleted=function(){return e.scene.getElementsIncludingDeleted()},this.getSceneElements=function(){return e.scene.getNonDeletedElements()},this.syncActionResult=(0,I.tH)((function(t){if(!e.unmounted&&!1!==t){var n=null;if(t.elements&&(t.elements.forEach((function(t){var r;(null===(r=e.state.editingElement)||void 0===r?void 0:r.id)===t.id&&e.state.editingElement!==t&&(0,Z.qP)(t)&&(n=t)})),e.scene.replaceAllElements(t.elements),t.commitToHistory&&e.history.resumeRecording()),t.files&&(e.files=t.replaceFiles?t.files:hr(hr({},e.files),t.files),e.addNewImagesToImageCache()),t.appState||n||e.state.contextMenu){var r,i,o,a,s,l,c,u;t.commitToHistory&&e.history.resumeRecording();var d=(null==t||null===(r=t.appState)||void 0===r?void 0:r.viewModeEnabled)||!1,h=(null==t||null===(i=t.appState)||void 0===i?void 0:i.zenModeEnabled)||!1,p=(null==t||null===(o=t.appState)||void 0===o?void 0:o.gridSize)||null,f=(null==t||null===(a=t.appState)||void 0===a?void 0:a.theme)||e.props.theme||O.C6.LIGHT,m=null!==(s=null==t||null===(l=t.appState)||void 0===l?void 0:l.name)&&void 0!==s?s:e.state.name,g=null!==(c=null==t||null===(u=t.appState)||void 0===u?void 0:u.errorMessage)&&void 0!==c?c:e.state.errorMessage;void 0!==e.props.viewModeEnabled&&(d=e.props.viewModeEnabled),void 0!==e.props.zenModeEnabled&&(h=e.props.zenModeEnabled),void 0!==e.props.gridModeEnabled&&(p=e.props.gridModeEnabled?O.k:null),void 0!==e.props.name&&(m=e.props.name),e.setState((function(e){var r;return Object.assign(t.appState||{},{contextMenu:null,editingElement:n||(null===(r=t.appState)||void 0===r?void 0:r.editingElement)||null,viewModeEnabled:d,zenModeEnabled:h,gridSize:p,theme:f,name:m,errorMessage:g})}),(function(){t.syncHistory&&e.history.setCurrentState(e.state,e.scene.getElementsIncludingDeleted())}))}}})),this.onBlur=(0,I.tH)((function(){Or=!1,e.setState({isBindingEnabled:!0})})),this.onUnload=function(){e.onBlur()},this.disableEvent=function(e){e.preventDefault()},this.resetHistory=function(){e.history.clear()},this.resetScene=(0,I.tH)((function(t){e.scene.replaceAllElements([]),e.setState((function(n){return hr(hr({},(0,B.im)()),{},{isLoading:(null==t||!t.resetLoadingState)&&n.isLoading,theme:e.state.theme})})),e.resetHistory()})),this.initializeScene=(0,a.Z)(m().mark((function t(){var n,r,i,o,s;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(function(){var t=(0,a.Z)(m().mark((function t(n){var r,i;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.files.length){t.next=2;break}return t.abrupt("return");case 2:return r=n.files[0],t.next=5,r.getFile();case 5:i=t.sent,e.loadFileToCanvas(new File([i],i.name||"",{type:i.type}),r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.props.theme&&e.setState({theme:e.props.theme}),e.state.isLoading||e.setState({isLoading:!0}),i=null,t.prev=4,t.next=7,e.props.initialData;case 7:if(t.t0=t.sent,t.t0){t.next=10;break}t.t0=null;case 10:i=t.t0,null!==(o=i)&&void 0!==o&&o.libraryItems&&e.library.updateLibrary({libraryItems:i.libraryItems,merge:!0}).catch((function(e){console.error(e)})),t.next=18;break;case 14:t.prev=14,t.t1=t.catch(4),console.error(t.t1),i={appState:{errorMessage:t.t1.message||"Encountered an error during importing or restoring scene data"}};case 18:(s=(0,$.nu)(i,null,null,{repairBindings:!0})).appState=hr(hr({},s.appState),{},{theme:e.props.theme||s.appState.theme,openSidebar:(null===(n=s.appState)||void 0===n?void 0:n.openSidebar)||e.state.openSidebar,activeTool:"image"===s.appState.activeTool.type?hr(hr({},s.appState.activeTool),{},{type:"selection"}):s.appState.activeTool,isLoading:!1,toast:e.state.toast}),null!==(r=i)&&void 0!==r&&r.scrollToContent&&(s.appState=hr(hr({},s.appState),(0,oe.W)(s.elements,hr(hr({},s.appState),{},{width:e.state.width,height:e.state.height,offsetTop:e.state.offsetTop,offsetLeft:e.state.offsetLeft}),null))),e.fonts.loadFontsForElements(s.elements),e.resetHistory(),e.syncActionResult(hr(hr({},s),{},{commitToHistory:!0}));case 24:case"end":return t.stop()}}),t,null,[[4,14]])}))),this.refreshDeviceState=function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height,o=null!=e.props.UIOptions.dockedSidebarBreakpoint?e.props.UIOptions.dockedSidebarBreakpoint:O.sk;e.device=(0,I.v4)(e.device,{isSmScreen:r<O.eF,isMobile:r<O.kV||i<O.Yx&&r<O.sS,canDeviceFitSidebar:r>o})},this.onResize=(0,I.tH)((function(){e.scene.getElementsIncludingDeleted().forEach((function(e){return(0,ie.bI)(e)})),e.setState({})})),this.renderScene=function(){var t={},n={},r={},i={},o={};e.state.collaborators.forEach((function(a,s){if(a.selectedElementIds)for(var l=0,c=Object.keys(a.selectedElementIds);l<c.length;l++){var u=c[l];u in r||(r[u]=[]),r[u].push(s)}a.pointer&&(a.username&&(i[s]=a.username),a.userState&&(o[s]=a.userState),n[s]=(0,I._i)({sceneX:a.pointer.x,sceneY:a.pointer.y},e.state),t[s]=a.button)}));var a=e.scene.getNonDeletedElements().filter((function(t){return!((0,q.pC)(t)&&e.state.pendingImageElementId===t.id||e.state.editingElement&&"text"===e.state.editingElement.type&&t.id===e.state.editingElement.id)})),s=getComputedStyle(document.querySelector(".excalidraw")).getPropertyValue("--color-selection");(0,re.Eu)({elements:a,appState:e.state,scale:window.devicePixelRatio,rc:e.rc,canvas:e.canvas,renderConfig:{selectionColor:s,scrollX:e.state.scrollX,scrollY:e.state.scrollY,viewBackgroundColor:e.state.viewBackgroundColor,zoom:e.state.zoom,remotePointerViewportCoords:n,remotePointerButton:t,remoteSelectedElementIds:r,remotePointerUsernames:i,remotePointerUserStates:o,shouldCacheIgnoreZoom:e.state.shouldCacheIgnoreZoom,theme:e.state.theme,imageCache:e.imageCache,isExporting:!1,renderScrollbars:!e.device.isMobile},callback:function(t){var n=t.atLeastOneVisibleElement,r=t.scrollBars;r&&(Dr=r);var i=!(0,Z.iB)(e.state.editingElement)&&!n&&a.length>0;e.state.scrolledOutside!==i&&e.setState({scrolledOutside:i}),e.scheduleImageRefresh()}},zr&&!0===window.EXCALIDRAW_THROTTLE_RENDER),zr||(zr=!0)},this.onScroll=(0,I.Ds)((function(){var t=e.getCanvasOffsets(),n=t.offsetTop,r=t.offsetLeft;e.setState((function(e){return e.offsetLeft===r&&e.offsetTop===n?null:{offsetTop:n,offsetLeft:r}}))}),O.HM),this.onCut=(0,I.tH)((function(t){var n;(null===(n=e.excalidrawContainerRef.current)||void 0===n?void 0:n.contains(document.activeElement))&&!(0,I.s)(t.target)&&(e.cutAll(),t.preventDefault(),t.stopPropagation())})),this.onCopy=(0,I.tH)((function(t){var n;(null===(n=e.excalidrawContainerRef.current)||void 0===n?void 0:n.contains(document.activeElement))&&!(0,I.s)(t.target)&&(e.copyAll(),t.preventDefault(),t.stopPropagation())})),this.cutAll=function(){e.actionManager.executeAction(_.ZM,"keyboard")},this.copyAll=function(){e.actionManager.executeAction(_.uN,"keyboard")},this.onTapStart=function(t){if(O.Dt||t.preventDefault(),!Cr)return Cr=!0,clearTimeout(Tr),void(Tr=window.setTimeout(Ur.resetTapTwice,O.Gj));if(Cr&&1===t.touches.length){var n=(0,i.Z)(t.touches,1)[0];e.handleCanvasDoubleClick({clientX:n.clientX,clientY:n.clientY}),Cr=!1,clearTimeout(Tr)}O.Dt&&t.preventDefault(),2===t.touches.length&&e.setState({selectedElementIds:{}})},this.onTapEnd=function(t){e.resetContextMenuTimer(),t.touches.length>0?e.setState({previousSelectedElementIds:{},selectedElementIds:e.state.previousSelectedElementIds}):Vr.pointers.clear()},this.pasteFromClipboard=(0,I.tH)(function(){var t=(0,a.Z)(m().mark((function t(n){var r,i,o,a,s,l,c,u,d,h,f,g,v;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=!(!jr||!n),a=document.activeElement,s=null===(r=e.excalidrawContainerRef.current)||void 0===r?void 0:r.contains(a),!n||s){t.next=5;break}return t.abrupt("return");case 5:if(l=document.elementFromPoint(Mr,Ir),!n||l instanceof HTMLCanvasElement&&!(0,I.s)(a)){t.next=8;break}return t.abrupt("return");case 8:return c=null==n||null===(i=n.clipboardData)||void 0===i?void 0:i.files[0],t.next=11,(0,F.mQ)(n,o);case 11:if(u=t.sent,c||!u.text||o||(d=u.text.trim()).startsWith("<svg")&&d.endsWith("</svg>")&&(c=(0,We.Pn)(d)),!(0,We.Wr)(c)||u.spreadsheet){t.next=20;break}return h=(0,I.dE)({clientX:Mr,clientY:Ir},e.state),f=h.x,g=h.y,v=e.createImageElement({sceneX:f,sceneY:g}),e.insertImageElement(v,c),e.initializeImageDimensions(v),e.setState({selectedElementIds:(0,p.Z)({},v.id,!0)}),t.abrupt("return");case 20:if(!e.props.onPaste){t.next=32;break}return t.prev=21,t.next=24,e.props.onPaste(u,n);case 24:if(t.t0=t.sent,!1!==t.t0){t.next=27;break}return t.abrupt("return");case 27:t.next=32;break;case 29:t.prev=29,t.t1=t.catch(21),console.error(t.t1);case 32:u.errorMessage?e.setState({errorMessage:u.errorMessage}):u.spreadsheet&&!o?e.setState({pasteDialog:{data:u.spreadsheet,shown:!0}}):u.elements?e.addElementsFromPasteOrLibrary({elements:u.elements,files:u.files||null,position:"cursor"}):u.text&&e.addTextFromPaste(u.text,o),e.setActiveTool({type:"selection"}),null==n||n.preventDefault();case 35:case"end":return t.stop()}}),t,null,[[21,29]])})));return function(e){return t.apply(this,arguments)}}()),this.addElementsFromPasteOrLibrary=function(t){var n=(0,$.ET)(t.elements,null),a=(0,Z.KP)(n),s=(0,i.Z)(a,4),l=s[0],c=s[1],u=s[2],d=s[3],h=(0,I.TE)(l,u)/2,p=(0,I.TE)(c,d)/2,f="object"===(0,r.Z)(t.position)?t.position.clientX:"cursor"===t.position?Mr:e.state.width/2+e.state.offsetLeft,m="object"===(0,r.Z)(t.position)?t.position.clientY:"cursor"===t.position?Ir:e.state.height/2+e.state.offsetTop,g=(0,I.dE)({clientX:f,clientY:m},e.state),v=g.x-h,y=g.y-p,b=(0,ne.wC)(v,y,e.state.gridSize),x=(0,i.Z)(b,2),w=x[0],_=x[1],k=(0,W._N)(n.map((function(e){return(0,T.BE)(e,{x:e.x+w-l,y:e.y+_-c})}))),E=[].concat((0,o.Z)(e.scene.getElementsIncludingDeleted()),(0,o.Z)(k));e.scene.replaceAllElements(E),k.forEach((function(e){if((0,Z.iB)(e)&&(0,q.Xh)(e)){var t=(0,De.tl)(e);(0,Z.oN)(e,t)}})),t.files&&(e.files=hr(hr({},e.files),t.files)),e.history.resumeRecording(),e.setState((0,X.bO)(hr(hr({},e.state),{},{openSidebar:e.state.openSidebar&&e.device.canDeviceFitSidebar&&e.state.isSidebarDocked?e.state.openSidebar:null,selectedElementIds:k.reduce((function(e,t){return(0,q.Xh)(t)||(e[t.id]=!0),e}),{}),selectedGroupIds:{}}),e.scene.getNonDeletedElements()),(function(){t.files&&e.addNewImagesToImageCache()})),e.setActiveTool({type:"selection"})},this.setAppState=function(t,n){e.setState(t,n)},this.removePointer=function(t){Lr&&e.resetContextMenuTimer(),Vr.pointers.delete(t.pointerId)},this.toggleLock=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ui";e.state.activeTool.locked||(0,R.L)("toolbar","toggleLock","".concat(t," (").concat(e.device.isMobile?"mobile":"desktop",")")),e.setState((function(t){return{activeTool:hr(hr(hr({},t.activeTool),(0,I.Om)(e.state,t.activeTool.locked?{type:"selection"}:t.activeTool)),{},{locked:!t.activeTool.locked})}}))},this.togglePenMode=function(){e.setState((function(e){return{penMode:!e.penMode}}))},this.onHandToolToggle=function(){e.actionManager.executeAction(or.eF)},this.zoomCanvas=function(t){e.setState(hr({},(0,se.E)({viewportX:e.state.width/2+e.state.offsetLeft,viewportY:e.state.height/2+e.state.offsetTop,nextZoom:(0,oe.j)(t)},e.state)))},this.cancelInProgresAnimation=null,this.scrollToContent=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.scene.getNonDeletedElements(),r=arguments.length>1?arguments[1]:void 0;null===(t=e.cancelInProgresAnimation)||void 0===t||t.call(e);var i=Array.isArray(n)?n:[n],o=e.state.zoom,a=e.state.scrollX,s=e.state.scrollY;if(null!=r&&r.fitToContent){var l=(0,or.md)(i,e.state,!1).appState;o=l.zoom,a=l.scrollX,s=l.scrollY}else{var c=(0,oe.W)(i,e.state,e.canvas);a=c.scrollX,s=c.scrollY}if(null!=r&&r.animate){var u,d=e.state.scrollX,h=e.state.scrollY;e.zoomCanvas(o.value);var p=(0,I.B4)([d,h],[a,s],(function(t,n){return e.setState({scrollX:t,scrollY:n})}),{duration:null!==(u=null==r?void 0:r.duration)&&void 0!==u?u:500});e.cancelInProgresAnimation=function(){p(),e.cancelInProgresAnimation=null}}else e.setState({scrollX:a,scrollY:s,zoom:o})},this.translateCanvas=function(t){var n;null===(n=e.cancelInProgresAnimation)||void 0===n||n.call(e),e.setState(t)},this.setToast=function(t){e.setState({toast:t})},this.restoreFileFromShare=(0,a.Z)(m().mark((function t(){var n,r,i,o;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,caches.open("web-share-target");case 3:return n=t.sent,t.next=6,n.match("shared-file");case 6:if(!(r=t.sent)){t.next=16;break}return t.next=10,r.blob();case 10:return i=t.sent,o=new File([i],i.name||"",{type:i.type}),e.loadFileToCanvas(o,null),t.next=15,n.delete("shared-file");case 15:window.history.replaceState(null,O.iC,window.location.pathname);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),e.setState({errorMessage:t.t0.message});case 21:case"end":return t.stop()}}),t,null,[[0,18]])}))),this.addFiles=(0,I.tH)((function(t){var n=t.reduce((function(e,t){return e.set(t.id,t),e}),new Map);e.files=hr(hr({},e.files),Object.fromEntries(n)),e.scene.getNonDeletedElements().forEach((function(t){(0,q.wi)(t)&&n.has(t.fileId)&&(e.imageCache.delete(t.fileId),(0,ie.bI)(t))})),e.scene.informMutation(),e.addNewImagesToImageCache()})),this.updateScene=(0,I.tH)((function(t){t.commitToHistory&&e.history.resumeRecording(),t.appState&&e.setState(t.appState),t.elements&&e.scene.replaceAllElements(t.elements),t.collaborators&&e.setState({collaborators:t.collaborators})})),this.onSceneUpdated=function(){e.setState({})},this.toggleMenu=function(t,n){return"customSidebar"!==t||e.props.renderSidebar?("library"===t||"customSidebar"===t)&&(r=void 0===n?e.state.openSidebar===t?null:t:n?t:null,e.setState({openSidebar:r}),!!r):(console.warn('attempting to toggle "customSidebar", but no "props.renderSidebar" is defined'),!1);var r},this.updateCurrentCursorPosition=(0,I.tH)((function(e){Mr=e.clientX,Ir=e.clientY})),this.onKeyDown=(0,I.tH)((function(t){if("Proxy"in window&&(!t.shiftKey&&/^[A-Z]$/.test(t.key)||t.shiftKey&&/^[a-z]$/.test(t.key))&&(t=new Proxy(t,{get:function(e,n){var r=e[n];return"function"==typeof r?r.bind(e):"key"===n?t.shiftKey?e.key.toUpperCase():e.key.toLowerCase():r}})),t[C.tW.CTRL_OR_CMD]&&t.key.toLowerCase()===C.tW.V&&(jr=t.shiftKey,clearTimeout(Nr),Nr=window.setTimeout((function(){jr=!1}),100)),!t[C.tW.CTRL_OR_CMD]||!(0,I.s)(t.target)||t.code!==C.aU.MINUS&&t.code!==C.aU.EQUAL){if(!((0,I.s)(t.target)&&t.key!==C.tW.ESCAPE||(0,C.Wl)(t.key)&&(0,I._Z)(t.target)))if(t.key!==C.tW.QUESTION_MARK)if(t.key.toLowerCase()===C.tW.E&&t.shiftKey&&t[C.tW.CTRL_OR_CMD])e.setState({openDialog:"imageExport"});else{if(t.key===C.tW.PAGE_UP||t.key===C.tW.PAGE_DOWN){var n=(t.shiftKey?e.state.width:e.state.height)/e.state.zoom.value;t.key===C.tW.PAGE_DOWN&&(n=-n),t.shiftKey?e.translateCanvas((function(e){return{scrollX:e.scrollX+n}})):e.translateCanvas((function(e){return{scrollY:e.scrollY+n}}))}if(!e.actionManager.handleKeyDown(t)&&!e.state.viewModeEnabled){if(t[C.tW.CTRL_OR_CMD]&&e.state.isBindingEnabled&&e.setState({isBindingEnabled:!1}),(0,C.Wl)(t.key)){var r=e.state.gridSize&&(t.shiftKey?O.$e:e.state.gridSize)||(t.shiftKey?O.Iw:O.$e),i=0,o=0;t.key===C.tW.ARROW_LEFT?i=-r:t.key===C.tW.ARROW_RIGHT?i=r:t.key===C.tW.ARROW_UP?o=-r:t.key===C.tW.ARROW_DOWN&&(o=r);var a=(0,oe.eD)(e.scene.getNonDeletedElements(),e.state,!0);a.forEach((function(e){(0,T.DR)(e,{x:e.x+i,y:e.y+o}),(0,M.Ww)(e,{simultaneouslyUpdated:a})})),e.maybeSuggestBindingForAll(a),t.preventDefault()}else if(t.key===C.tW.ENTER){var s=(0,oe.eD)(e.scene.getNonDeletedElements(),e.state);if(1===s.length){var l=s[0];if(t[C.tW.CTRL_OR_CMD])(0,q.bt)(l)&&(e.state.editingLinearElement&&e.state.editingLinearElement.elementId===s[0].id||(e.history.resumeRecording(),e.setState({editingLinearElement:new H._(l,e.scene)})));else if((0,Z.iB)(l)||(0,De.Zr)(l)){var c;(0,Z.iB)(l)||(c=l);var u=(0,De.TP)(l,e.state),d=u.x,h=u.y;return e.startTextEditing({sceneX:d,sceneY:h,container:c}),void t.preventDefault()}}}else if(!t.ctrlKey&&!t.altKey&&!t.metaKey&&null===e.state.draggingElement){var p=function(e){var t=le.find((function(t,n){return null!=t.numericKey&&e===t.numericKey.toString()||t.key&&("string"==typeof t.key?t.key===e:t.key.includes(e))}));return(null==t?void 0:t.value)||null}(t.key);p?(e.state.activeTool.type!==p&&(0,R.L)("toolbar",p,"keyboard (".concat(e.device.isMobile?"mobile":"desktop",")")),e.setActiveTool({type:p}),t.stopPropagation()):t.key===C.tW.Q&&(e.toggleLock("keyboard"),t.stopPropagation())}if(t.key===C.tW.SPACE&&0===Vr.pointers.size&&(Or=!0,(0,I.KJ)(e.canvas,O.oc.GRAB),t.preventDefault()),!(t.key!==C.tW.G&&t.key!==C.tW.S||t.altKey||t[C.tW.CTRL_OR_CMD])){var f=(0,oe.eD)(e.scene.getNonDeletedElements(),e.state);if("selection"===e.state.activeTool.type&&!f.length)return;t.key===C.tW.G&&((0,oe.$b)(e.state.activeTool.type)||f.some((function(e){return(0,oe.$b)(e.type)})))&&(e.setState({openPopup:"backgroundColorPicker"}),t.stopPropagation()),t.key===C.tW.S&&(e.setState({openPopup:"strokeColorPicker"}),t.stopPropagation())}!t[C.tW.CTRL_OR_CMD]||t.key!==C.tW.BACKSPACE&&t.key!==C.tW.DELETE||bn.e_.set(Ln.w,"clearCanvas")}}else e.setState({openDialog:"help"})}else t.preventDefault()})),this.onWheel=(0,I.tH)((function(e){e.target instanceof HTMLCanvasElement||!e.ctrlKey||e.preventDefault()})),this.onKeyUp=(0,I.tH)((function(t){if(t.key===C.tW.SPACE&&(e.state.viewModeEnabled?(0,I.KJ)(e.canvas,O.oc.GRAB):"selection"===e.state.activeTool.type?(0,I.z8)(e.canvas):((0,I.Uk)(e.canvas,e.state),e.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})),Or=!1),t[C.tW.CTRL_OR_CMD]||e.state.isBindingEnabled||e.setState({isBindingEnabled:!0}),(0,C.Wl)(t.key)){var n=(0,oe.eD)(e.scene.getNonDeletedElements(),e.state);(0,M.N1)(e.state)?(0,M.el)(n):(0,M.H)(n),e.setState({suggestedBindings:[]})}})),this.setActiveTool=function(t){var n=(0,I.Om)(e.state,t);"hand"===n.type?(0,I.KJ)(e.canvas,O.oc.GRAB):Or||(0,I.Uk)(e.canvas,e.state),(0,I.wO)(document.activeElement)&&e.focusContainer(),(0,q.dt)(n.type)||e.setState({suggestedBindings:[]}),"image"===n.type&&e.onImageAction(),"selection"!==n.type?e.setState({activeTool:n,selectedElementIds:{},selectedGroupIds:{},editingGroupId:null}):e.setState({activeTool:n})},this.setCursor=function(t){(0,I.KJ)(e.canvas,t)},this.resetCursor=function(){(0,I.z8)(e.canvas)},this.isTouchScreenMultiTouchGesture=function(){return Vr.pointers.size>=2},this.onGestureStart=(0,I.tH)((function(t){t.preventDefault(),e.isTouchScreenMultiTouchGesture()&&e.setState({selectedElementIds:{}}),Vr.initialScale=e.state.zoom.value})),this.onGestureChange=(0,I.tH)((function(t){if(t.preventDefault(),!e.isTouchScreenMultiTouchGesture()){var n=Vr.initialScale;n&&e.setState((function(e){return hr({},(0,se.E)({viewportX:Mr,viewportY:Ir,nextZoom:(0,oe.j)(n*t.scale)},e))}))}})),this.onGestureEnd=(0,I.tH)((function(t){t.preventDefault(),e.isTouchScreenMultiTouchGesture()&&e.setState({previousSelectedElementIds:{},selectedElementIds:e.state.previousSelectedElementIds}),Vr.initialScale=null})),this.startTextEditing=function(t){var n,r,i,a,s=t.sceneX,l=t.sceneY,c=t.insertAtParentCenter,u=void 0===c||c,d=t.container,h=!1,p=u&&e.getTextWysiwygSnappedToCenterPosition(s,l,e.state,d);d&&p&&(h=!0);var f=null,m=(0,oe.eD)(e.scene.getNonDeletedElements(),e.state),g=(null===(n=f=1===m.length?(0,Z.iB)(m[0])?m[0]:d?(0,De.WJ)(m[0]):e.getTextElementAtPosition(s,l):e.getTextElementAtPosition(s,l))||void 0===n?void 0:n.fontFamily)||e.state.currentItemFontFamily,v=(null===(r=f)||void 0===r?void 0:r.lineHeight)||(0,De.PT)(g),y=e.state.currentItemFontSize;if(!f&&h&&d&&!(0,q.Yv)(d)){var b={fontSize:y,fontFamily:g},x=(0,De.AT)((0,I.mO)(b),v),w=(0,De.w_)(y,v),_=(0,De.HE)(d),k=Math.max(_.height,w),E=Math.max(_.width,x);(0,T.DR)(d,{height:k,width:E}),s=d.x+E/2,l=d.y+k/2,p&&(p=e.getTextWysiwygSnappedToCenterPosition(s,l,e.state,d))}var S=f||(0,Z.VL)({x:p?p.elementCenterX:s,y:p?p.elementCenterY:l,strokeColor:e.state.currentItemStrokeColor,backgroundColor:e.state.currentItemBackgroundColor,fillStyle:e.state.currentItemFillStyle,strokeWidth:e.state.currentItemStrokeWidth,strokeStyle:e.state.currentItemStrokeStyle,roughness:e.state.currentItemRoughness,opacity:e.state.currentItemOpacity,text:"",fontSize:y,fontFamily:g,textAlign:p?"center":e.state.currentItemTextAlign,verticalAlign:p?O.oX.MIDDLE:O.hs,containerId:h?null==d?void 0:d.id:void 0,groupIds:null!==(i=null==d?void 0:d.groupIds)&&void 0!==i?i:[],lineHeight:v,angle:null!==(a=null==d?void 0:d.angle)&&void 0!==a?a:0});if(!f&&h&&d&&(0,T.DR)(d,{boundElements:(d.boundElements||[]).concat({type:"text",id:S.id})}),e.setState({editingElement:S}),!f)if(d&&h){var C=e.scene.getElementIndex(d.id);e.scene.insertElementAtIndex(S,C+1)}else e.scene.replaceAllElements([].concat((0,o.Z)(e.scene.getElementsIncludingDeleted()),[S]));e.setState({editingElement:S}),e.handleTextWysiwyg(S,{isExistingElement:!!f})},this.handleCanvasDoubleClick=function(t){if(!e.state.multiElement&&"selection"===e.state.activeTool.type){var n=(0,oe.eD)(e.scene.getNonDeletedElements(),e.state);if(1===n.length&&(0,q.bt)(n[0])){if(t[C.tW.CTRL_OR_CMD]&&(!e.state.editingLinearElement||e.state.editingLinearElement.elementId!==n[0].id))return e.history.resumeRecording(),void e.setState({editingLinearElement:new H._(n[0],e.scene)});if(e.state.editingLinearElement&&e.state.editingLinearElement.elementId===n[0].id)return}(0,I.z8)(e.canvas);var r=(0,I.dE)(t,e.state),i=r.x,o=r.y;if((0,X.iJ)(e.state).length>0){var a=e.getElementAtPosition(i,o),s=a&&(0,X.YS)(a,e.state.selectedGroupIds);if(s)return void e.setState((function(t){return(0,X.bO)(hr(hr({},t),{},{editingGroupId:s,selectedElementIds:(0,p.Z)({},a.id,!0),selectedGroupIds:{}}),e.scene.getNonDeletedElements())}))}if((0,I.z8)(e.canvas),!t[C.tW.CTRL_OR_CMD]&&!e.state.viewModeEnabled){var l=(0,De.OW)(e.scene.getNonDeletedElements(),e.state,i,o);if(l&&((0,q.Xo)(l)||!(0,I.Qm)(l.backgroundColor)||(0,Qn.Qu)(l,e.state,[i,o]))){var c=(0,De.TP)(l,e.state);i=c.x,o=c.y}e.startTextEditing({sceneX:i,sceneY:o,insertAtParentCenter:!t.altKey,container:l})}}},this.getElementLinkAtPosition=function(t,n){var r=e.scene.getNonDeletedElements().slice().reverse(),i=1/0;return r.find((function(r,o){return n&&r.id===n.id&&(i=o),r.link&&o<=i&&(0,er.wq)(r,e.state,[t.x,t.y],e.device.isMobile)}))},this.redirectToLink=function(t,n){var r=(0,ne.LW)(e.lastPointerDown.clientX,e.lastPointerDown.clientY,e.lastPointerUp.clientX,e.lastPointerUp.clientY);if(!(!e.hitLinkElement||n&&r>O.f||!n&&0!==r)){var i=(0,I.dE)(e.lastPointerDown,e.state),o=(0,er.wq)(e.hitLinkElement,e.state,[i.x,i.y],e.device.isMobile),a=(0,I.dE)(e.lastPointerUp,e.state),s=(0,er.wq)(e.hitLinkElement,e.state,[a.x,a.y],e.device.isMobile);if(o&&s){var l,c,u=e.hitLinkElement.link;if(u&&(e.props.onLinkOpen&&(c=(0,I.ag)(O.Ks.EXCALIDRAW_LINK,t.nativeEvent),e.props.onLinkOpen(e.hitLinkElement,c)),null===(l=c)||void 0===l||!l.defaultPrevented)){var d=(0,er.q$)(u)?"_self":"_blank",h=window.open(void 0,d);h&&(h.opener=null,h.location=(0,er.$u)(u))}}}},this.handleCanvasPointerMove=function(t){e.savePointer(t.clientX,t.clientY,e.state.cursorButton),Vr.pointers.has(t.pointerId)&&Vr.pointers.set(t.pointerId,{x:t.clientX,y:t.clientY});var n=Vr.initialScale;if(2===Vr.pointers.size&&Vr.lastCenter&&n&&Vr.initialDistance){var r=G(Vr.pointers),a=r.x-Vr.lastCenter.x,s=r.y-Vr.lastCenter.y;Vr.lastCenter=r;var l=K(Array.from(Vr.pointers.values())),c="freedraw"===e.state.activeTool.type&&e.state.penMode?1:l/Vr.initialDistance,u=c?(0,oe.j)(n*c):e.state.zoom.value;e.setState((function(t){var n=(0,se.E)({viewportX:r.x,viewportY:r.y,nextZoom:u},t);e.translateCanvas({zoom:n.zoom,scrollX:n.scrollX+a/u,scrollY:n.scrollY+s/u,shouldCacheIgnoreZoom:!0})})),e.resetShouldCacheIgnoreZoomDebounced()}else Vr.lastCenter=Vr.initialDistance=Vr.initialScale=null;if(!(Or||Ar||Pr||(0,B.l$)(e.state))){var d=(0,oe._4)(Dr,t.clientX-e.state.offsetLeft,t.clientY-e.state.offsetTop).isOverEither;e.state.draggingElement||e.state.multiElement||(d?(0,I.z8)(e.canvas):(0,I.Uk)(e.canvas,e.state));var h=(0,I.dE)(t,e.state),p=h.x,f=h.y;if(e.state.editingLinearElement&&!e.state.editingLinearElement.isDragging){var m=H._.handlePointerMove(t,p,f,e.state);m&&m!==e.state.editingLinearElement&&(0,y.flushSync)((function(){e.setState({editingLinearElement:m})})),null!=(null==m?void 0:m.lastUncommittedPoint)?e.maybeSuggestBindingAtCursor(h):(0,y.flushSync)((function(){e.setState({suggestedBindings:[]})}))}if((0,q.Lx)(e.state.activeTool.type)){var g=e.state.draggingElement;(0,q.Mn)(g,!1)?e.maybeSuggestBindingsForLinearElementAtCoords(g,[h],e.state.startBoundElement):e.maybeSuggestBindingAtCursor(h)}if(e.state.multiElement){var v=e.state.multiElement,b=v.x,x=v.y,w=v.points,_=v.lastCommittedPoint,k=w[w.length-1];if((0,I.Uk)(e.canvas,e.state),k===_)(0,ne.LW)(p-b,f-x,k[0],k[1])>=O.qx?(0,T.DR)(v,{points:[].concat((0,o.Z)(w),[[p-b,f-x]])}):(0,I.KJ)(e.canvas,O.oc.POINTER);else if(w.length>2&&_&&(0,ne.LW)(p-b,f-x,_[0],_[1])<O.qx)(0,I.KJ)(e.canvas,O.oc.POINTER),(0,T.DR)(v,{points:w.slice(0,-1)});else{var E,S=(0,ne.wC)(p,f,e.state.gridSize),M=(0,i.Z)(S,2),A=M[0],P=M[1],D=null!==(E=null==v?void 0:v.lastCommittedPoint)&&void 0!==E?E:[0,0],L=(0,i.Z)(D,2),R=L[0],z=L[1],j=A-b-R,N=P-x-z;if((0,C.Ge)(t)){var F=(0,Z.o4)(R+b,z+x,A,P);j=F.width,N=F.height}(0,ne.g6)(w,e.state.zoom.value)&&(0,I.KJ)(e.canvas,O.oc.POINTER),(0,T.DR)(v,{points:[].concat((0,o.Z)(w.slice(0,-1)),[[R+j,z+N]])})}}else if(!(Boolean(t.buttons)||"selection"!==e.state.activeTool.type&&"text"!==e.state.activeTool.type&&"eraser"!==e.state.activeTool.type)){var V=e.scene.getNonDeletedElements(),U=(0,oe.eD)(V,e.state);if(1!==U.length||d||e.state.editingLinearElement){if(U.length>1&&!d){var $=(0,Z.n2)((0,Z.KP)(U),p,f,e.state.zoom,t.pointerType);if($)return void(0,I.KJ)(e.canvas,(0,Z.Un)({transformHandleType:$}))}}else{var W=(0,Z.jt)(V,e.state,p,f,e.state.zoom,t.pointerType);if(W&&W.transformHandleType)return void(0,I.KJ)(e.canvas,(0,Z.Un)(W))}var Y=e.getElementAtPosition(h.x,h.y);e.hitLinkElement=e.getElementLinkAtPosition(h,Y),(0,B.EN)(e.state)||(e.hitLinkElement&&!e.state.selectedElementIds[e.hitLinkElement.id]?((0,I.KJ)(e.canvas,O.oc.POINTER),(0,er.Pp)(e.hitLinkElement,e.state)):((0,er.lV)(),Y&&Y.link&&e.state.selectedElementIds[Y.id]&&!e.state.contextMenu&&!e.state.showHyperlinkPopup?e.setState({showHyperlinkPopup:"info"}):"text"===e.state.activeTool.type?(0,I.KJ)(e.canvas,(0,Z.iB)(Y)?O.oc.TEXT:O.oc.CROSSHAIR):e.state.viewModeEnabled?(0,I.KJ)(e.canvas,O.oc.GRAB):d?(0,I.KJ)(e.canvas,O.oc.AUTO):e.state.selectedLinearElement?e.handleHoverSelectedLinearElement(e.state.selectedLinearElement,p,f):t[C.tW.CTRL_OR_CMD]?(0,I.KJ)(e.canvas,O.oc.AUTO):!Y&&!e.isHittingCommonBoundingBoxOfSelectedElements(h,U)||null!=Y&&Y.locked||(0,I.KJ)(e.canvas,O.oc.MOVE)))}}},this.handleEraser=function(t,n,r){for(var i=function(e){e.forEach((function(e){e.locked||(o.push(e.id),t.altKey?n.elementIdsToErase[e.id]&&n.elementIdsToErase[e.id].erase&&(n.elementIdsToErase[e.id].erase=!1):n.elementIdsToErase[e.id]||(n.elementIdsToErase[e.id]={erase:!0,opacity:e.opacity}))}))},o=[],a=(0,ne.LW)(n.lastCoords.x,n.lastCoords.y,r.x,r.y),s=10/e.state.zoom.value,l=hr({},n.lastCoords),c=0;c<=a&&(i(e.getElementsAtPosition(l.x,l.y)),c!==a);){var u=(c=Math.min(c+s,a))/a,d=(1-u)*l.x+u*r.x,h=(1-u)*l.y+u*r.y;l.x=d,l.y=h}var p=e.scene.getElementsIncludingDeleted().map((function(e){var r=(0,q.Xh)(e)&&o.includes(e.containerId)?e.containerId:e.id;if(o.includes(r)){if(!t.altKey)return(0,T.BE)(e,{opacity:O.xY});if(n.elementIdsToErase[r]&&!1===n.elementIdsToErase[r].erase)return(0,T.BE)(e,{opacity:n.elementIdsToErase[r].opacity})}return e}));e.scene.replaceAllElements(p),n.lastCoords.x=r.x,n.lastCoords.y=r.y},this.handleTouchMove=function(e){Rr=!0},this.handleCanvasPointerDown=function(t){var n,r;if(e.state.contextMenu&&e.setState({contextMenu:null}),e.updateGestureOnPointerDown(t),"touch"===t.pointerType&&e.state.draggingElement&&"freedraw"===e.state.draggingElement.type){var i=e.state.draggingElement;e.updateScene(hr(hr({},i.points.length<10?{elements:e.scene.getElementsIncludingDeleted().filter((function(e){return e.id!==i.id}))}:{}),{},{appState:{draggingElement:null,editingElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:Object.keys(e.state.selectedElementIds).filter((function(e){return e!==i.id})).reduce((function(t,n){return t[n]=e.state.selectedElementIds[n],t}),{})}}))}else{var o=document.getSelection();if(null!=o&&o.anchorNode&&o.removeAllRanges(),e.maybeOpenContextMenuAfterPointerDownOnTouchDevices(t),e.maybeCleanupAfterMissingPointerUp(t),e.state.penDetected||"pen"!==t.pointerType||e.setState((function(e){return{penMode:!0,penDetected:!0}})),!e.device.isTouchScreen&&["pen","touch"].includes(t.pointerType)&&(e.device=(0,I.v4)(e.device,{isTouchScreen:!0})),!Ar&&(e.lastPointerDown=t,e.setState({lastPointerDownWith:t.pointerType,cursorButton:"down"}),e.savePointer(t.clientX,t.clientY,"down"),!e.handleCanvasPanUsingWheelOrSpaceDrag(t)&&!(t.button!==O.Oh.MAIN&&t.button!==O.Oh.TOUCH||Vr.pointers.size>1))){var a=e.initialPointerDownState(t);if(!(e.handleDraggingScrollBar(t,a)||(e.clearSelectionIfNotUsingSelection(),e.updateBindingEnabledOnPointerMove(t),e.handleSelectionOnPointerDown(t,a)||e.state.penMode&&"touch"===t.pointerType&&"selection"!==e.state.activeTool.type&&"text"!==e.state.activeTool.type&&"image"!==e.state.activeTool.type)))if("text"!==e.state.activeTool.type){if("arrow"===e.state.activeTool.type||"line"===e.state.activeTool.type)e.handleLinearElementOnPointerDown(t,e.state.activeTool.type,a);else if("image"===e.state.activeTool.type){(0,I.KJ)(e.canvas,O.oc.CROSSHAIR);var s=e.state.pendingImageElementId&&e.scene.getElement(e.state.pendingImageElementId);if(!s)return;e.setState({draggingElement:s,editingElement:s,pendingImageElementId:null,multiElement:null});var l=(0,I.dE)(t,e.state),c=l.x,u=l.y;(0,T.DR)(s,{x:c,y:u})}else"freedraw"===e.state.activeTool.type?e.handleFreeDrawElementOnPointerDown(t,e.state.activeTool.type,a):"custom"===e.state.activeTool.type?(0,I.KJ)(e.canvas,O.oc.AUTO):"eraser"!==e.state.activeTool.type&&"hand"!==e.state.activeTool.type&&e.createGenericElementOnPointerDown(e.state.activeTool.type,a);null===(n=e.props)||void 0===n||null===(r=n.onPointerDown)||void 0===r||r.call(n,e.state.activeTool,a);var d=e.onPointerMoveFromPointerDownHandler(a),h=e.onPointerUpFromPointerDownHandler(a),p=e.onKeyDownFromPointerDownHandler(a),f=e.onKeyUpFromPointerDownHandler(a);Fr=h,e.state.viewModeEnabled||(window.addEventListener(O.Ks.POINTER_MOVE,d),window.addEventListener(O.Ks.POINTER_UP,h),window.addEventListener(O.Ks.KEYDOWN,p),window.addEventListener(O.Ks.KEYUP,f),a.eventListeners.onMove=d,a.eventListeners.onUp=h,a.eventListeners.onKeyUp=f,a.eventListeners.onKeyDown=p)}else e.handleTextOnPointerDown(t,a)}}},this.handleCanvasPointerUp=function(t){if(e.lastPointerUp=t,e.device.isTouchScreen){var n=(0,I.dE)({clientX:t.clientX,clientY:t.clientY},e.state),r=e.getElementAtPosition(n.x,n.y);e.hitLinkElement=e.getElementLinkAtPosition(n,r)}e.hitLinkElement&&!e.state.selectedElementIds[e.hitLinkElement.id]&&e.redirectToLink(t,e.device.isTouchScreen),e.removePointer(t)},this.maybeOpenContextMenuAfterPointerDownOnTouchDevices=function(t){"touch"===t.pointerType&&(Rr=!1,Lr?Rr=!0:Lr=window.setTimeout((function(){Lr=0,Rr||e.handleCanvasContextMenu(t)}),O.nM))},this.resetContextMenuTimer=function(){clearTimeout(Lr),Lr=0,Rr=!1},this.handleCanvasPanUsingWheelOrSpaceDrag=function(t){if(!(Vr.pointers.size<=1&&(t.button===O.Oh.WHEEL||t.button===O.Oh.MAIN&&Or||(0,B.l$)(e.state)||e.state.viewModeEnabled))||(0,Z.iB)(e.state.editingElement))return!1;Ar=!0,t.preventDefault();var n=!1,r=/Linux/.test(window.navigator.platform);(0,I.KJ)(e.canvas,O.oc.GRABBING);var i=t.clientX,o=t.clientY,a=(0,I.$9)((function(t){var a=i-t.clientX,s=o-t.clientY;if(i=t.clientX,o=t.clientY,r&&!n&&(Math.abs(a)>1||Math.abs(s)>1)){n=!0;var l=function e(t){document.body.removeEventListener(O.Ks.PASTE,e),t.stopPropagation()};document.body.addEventListener(O.Ks.PASTE,l),window.addEventListener(O.Ks.POINTER_UP,(function e(){setTimeout((function(){document.body.removeEventListener(O.Ks.PASTE,l),window.removeEventListener(O.Ks.POINTER_UP,e)}),100)}))}e.translateCanvas({scrollX:e.state.scrollX-a/e.state.zoom.value,scrollY:e.state.scrollY-s/e.state.zoom.value})})),s=(0,I.tH)(Fr=function(){Fr=null,Ar=!1,Or||(e.state.viewModeEnabled?(0,I.KJ)(e.canvas,O.oc.GRAB):(0,I.Uk)(e.canvas,e.state)),e.setState({cursorButton:"up"}),e.savePointer(t.clientX,t.clientY,"up"),window.removeEventListener(O.Ks.POINTER_MOVE,a),window.removeEventListener(O.Ks.POINTER_UP,s),window.removeEventListener(O.Ks.BLUR,s),a.flush()});return window.addEventListener(O.Ks.BLUR,s),window.addEventListener(O.Ks.POINTER_MOVE,a,{passive:!0}),window.addEventListener(O.Ks.POINTER_UP,s),!0},this.clearSelectionIfNotUsingSelection=function(){"selection"!==e.state.activeTool.type&&e.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})},this.handleSelectionOnPointerDown=function(t,n){if("selection"===e.state.activeTool.type){var r=e.scene.getNonDeletedElements(),i=(0,oe.eD)(r,e.state);if(1!==i.length||e.state.editingLinearElement)i.length>1&&(n.resize.handleType=(0,Z.n2)((0,Z.KP)(i),n.origin.x,n.origin.y,e.state.zoom,t.pointerType));else{var o=(0,Z.jt)(r,e.state,n.origin.x,n.origin.y,e.state.zoom,t.pointerType);null!=o&&(e.setState({resizingElement:o.element}),n.resize.handleType=o.transformHandleType)}if(n.resize.handleType)(0,I.KJ)(e.canvas,(0,Z.Un)({transformHandleType:n.resize.handleType})),n.resize.isResizing=!0,n.resize.offset=(0,I.AK)((0,Z.xx)(n.resize.handleType,i,n.origin.x,n.origin.y)),1===i.length&&(0,q.bt)(i[0])&&2===i[0].points.length&&(n.resize.arrowDirection=(0,Z.T)(n.resize.handleType,i[0]));else{var a;if(e.state.selectedLinearElement){var s=e.state.editingLinearElement||e.state.selectedLinearElement,l=H._.handlePointerDown(t,e.state,e.history,n.origin,s);if(l.hitElement&&(n.hit.element=l.hitElement),l.linearElementEditor&&(e.setState({selectedLinearElement:l.linearElementEditor}),e.state.editingLinearElement&&e.setState({editingLinearElement:l.linearElementEditor})),l.didAddPoint)return!0}if(n.hit.element=null!==(a=n.hit.element)&&void 0!==a?a:e.getElementAtPosition(n.origin.x,n.origin.y),n.hit.element&&e.getElementLinkAtPosition({x:n.origin.x,y:n.origin.y},n.hit.element))return!1;n.hit.allHitElements=e.getElementsAtPosition(n.origin.x,n.origin.y);var c=n.hit.element,u=n.hit.allHitElements.some((function(t){return e.isASelectedElement(t)}));if(null!==c&&u||t.shiftKey||n.hit.hasHitCommonBoundingBoxOfSelectedElements||e.clearSelection(c),e.state.editingLinearElement)e.setState({selectedElementIds:(0,p.Z)({},e.state.editingLinearElement.elementId,!0)});else if(null!=c){if(t[C.tW.CTRL_OR_CMD])return e.state.selectedElementIds[c.id]||(n.hit.wasAddedToSelection=!0),e.setState((function(t){return hr(hr({},(0,X.iE)(t,c)),{},{previousSelectedElementIds:e.state.selectedElementIds})})),!1;e.state.selectedElementIds[c.id]||(e.state.editingGroupId&&!(0,X.Nd)(c,e.state.editingGroupId)&&e.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null}),u||n.hit.hasHitCommonBoundingBoxOfSelectedElements||(e.setState((function(t){return(0,X.bO)(hr(hr({},t),{},{selectedElementIds:hr(hr({},t.selectedElementIds),{},(0,p.Z)({},c.id,!0)),showHyperlinkPopup:!!c.link&&"info"}),e.scene.getNonDeletedElements())})),n.hit.wasAddedToSelection=!0))}e.setState({previousSelectedElementIds:e.state.selectedElementIds})}}return!1},this.handleTextOnPointerDown=function(t,n){if(!(0,Z.iB)(e.state.editingElement)){var r=n.origin.x,i=n.origin.y,o=e.getElementAtPosition(r,i,{includeBoundTextElement:!0}),a=(0,De.OW)(e.scene.getNonDeletedElements(),e.state,r,i);(0,q.Xo)(o)&&(a=o,r=o.x+o.width/2,i=o.y+o.height/2),e.startTextEditing({sceneX:r,sceneY:i,insertAtParentCenter:!t.altKey,container:a}),(0,I.z8)(e.canvas),e.state.activeTool.locked||e.setState({activeTool:(0,I.Om)(e.state,{type:"selection"})})}},this.handleFreeDrawElementOnPointerDown=function(t,n,r){var a=(0,ne.wC)(r.origin.x,r.origin.y,null),s=(0,i.Z)(a,2),l=s[0],c=s[1],u=(0,W.KE)({type:n,x:l,y:c,strokeColor:e.state.currentItemStrokeColor,backgroundColor:e.state.currentItemBackgroundColor,fillStyle:e.state.currentItemFillStyle,strokeWidth:e.state.currentItemStrokeWidth,strokeStyle:e.state.currentItemStrokeStyle,roughness:e.state.currentItemRoughness,opacity:e.state.currentItemOpacity,roundness:null,simulatePressure:.5===t.pressure,locked:!1});e.setState((function(e){return{selectedElementIds:hr(hr({},e.selectedElementIds),{},(0,p.Z)({},u.id,!1))}}));var d=u.simulatePressure?u.pressures:[].concat((0,o.Z)(u.pressures),[t.pressure]);(0,T.DR)(u,{points:[[0,0]],pressures:d});var h=(0,M.Y9)(r.origin,e.scene);e.scene.replaceAllElements([].concat((0,o.Z)(e.scene.getElementsIncludingDeleted()),[u])),e.setState({draggingElement:u,editingElement:u,startBoundElement:h,suggestedBindings:[]})},this.createImageElement=function(t){var n=t.sceneX,r=t.sceneY,o=(0,ne.wC)(n,r,e.state.gridSize),a=(0,i.Z)(o,2),s=a[0],l=a[1];return(0,Z.vw)({type:"image",x:s,y:l,strokeColor:e.state.currentItemStrokeColor,backgroundColor:e.state.currentItemBackgroundColor,fillStyle:e.state.currentItemFillStyle,strokeWidth:e.state.currentItemStrokeWidth,strokeStyle:e.state.currentItemStrokeStyle,roughness:e.state.currentItemRoughness,roundness:null,opacity:e.state.currentItemOpacity,locked:!1})},this.handleLinearElementOnPointerDown=function(t,n,r){if(e.state.multiElement){var a=e.state.multiElement;if("line"===a.type&&(0,ne.g6)(a.points,e.state.zoom.value))return(0,T.DR)(a,{lastCommittedPoint:a.points[a.points.length-1]}),void e.actionManager.executeAction(_.pL);var s=a.x,l=a.y,c=a.lastCommittedPoint;if(a.points.length>1&&c&&(0,ne.LW)(r.origin.x-s,r.origin.y-l,c[0],c[1])<O.qx)return void e.actionManager.executeAction(_.pL);e.setState((function(e){return{selectedElementIds:hr(hr({},e.selectedElementIds),{},(0,p.Z)({},a.id,!0))}})),(0,T.DR)(a,{lastCommittedPoint:a.points[a.points.length-1]}),(0,I.KJ)(e.canvas,O.oc.POINTER)}else{var u=(0,ne.wC)(r.origin.x,r.origin.y,e.state.gridSize),d=(0,i.Z)(u,2),h=d[0],f=d[1],m=e.state,g=m.currentItemStartArrowhead,v=m.currentItemEndArrowhead,y="arrow"===n?[g,v]:[null,null],b=(0,i.Z)(y,2),x=b[0],w=b[1],k=(0,Z.y8)({type:n,x:h,y:f,strokeColor:e.state.currentItemStrokeColor,backgroundColor:e.state.currentItemBackgroundColor,fillStyle:e.state.currentItemFillStyle,strokeWidth:e.state.currentItemStrokeWidth,strokeStyle:e.state.currentItemStrokeStyle,roughness:e.state.currentItemRoughness,opacity:e.state.currentItemOpacity,roundness:"round"===e.state.currentItemRoundness?{type:O.a6.PROPORTIONAL_RADIUS}:null,startArrowhead:x,endArrowhead:w,locked:!1});e.setState((function(e){return{selectedElementIds:hr(hr({},e.selectedElementIds),{},(0,p.Z)({},k.id,!1))}})),(0,T.DR)(k,{points:[].concat((0,o.Z)(k.points),[[0,0]])});var E=(0,M.Y9)(r.origin,e.scene);e.scene.replaceAllElements([].concat((0,o.Z)(e.scene.getElementsIncludingDeleted()),[k])),e.setState({draggingElement:k,editingElement:k,startBoundElement:E,suggestedBindings:[]})}},this.createGenericElementOnPointerDown=function(t,n){var r=(0,ne.wC)(n.origin.x,n.origin.y,e.state.gridSize),a=(0,i.Z)(r,2),s=a[0],l=a[1],c=(0,Z.Up)({type:t,x:s,y:l,strokeColor:e.state.currentItemStrokeColor,backgroundColor:e.state.currentItemBackgroundColor,fillStyle:e.state.currentItemFillStyle,strokeWidth:e.state.currentItemStrokeWidth,strokeStyle:e.state.currentItemStrokeStyle,roughness:e.state.currentItemRoughness,opacity:e.state.currentItemOpacity,roundness:"round"===e.state.currentItemRoundness?{type:(0,q.QI)(t)?O.a6.ADAPTIVE_RADIUS:O.a6.PROPORTIONAL_RADIUS}:null,locked:!1});"selection"===c.type?e.setState({selectionElement:c,draggingElement:c}):(e.scene.replaceAllElements([].concat((0,o.Z)(e.scene.getElementsIncludingDeleted()),[c])),e.setState({multiElement:null,draggingElement:c,editingElement:c}))},this.restoreReadyToEraseElements=function(t){var n=e.scene.getElementsIncludingDeleted().map((function(e){return t.elementIdsToErase[e.id]&&t.elementIdsToErase[e.id].erase?(0,T.BE)(e,{opacity:t.elementIdsToErase[e.id].opacity}):(0,q.Xh)(e)&&t.elementIdsToErase[e.containerId]&&t.elementIdsToErase[e.containerId].erase?(0,T.BE)(e,{opacity:t.elementIdsToErase[e.containerId].opacity}):e}));e.scene.replaceAllElements(n)},this.eraseElements=function(t){var n=e.scene.getElementsIncludingDeleted().map((function(e){return t.elementIdsToErase[e.id]&&t.elementIdsToErase[e.id].erase||(0,q.Xh)(e)&&t.elementIdsToErase[e.containerId]&&t.elementIdsToErase[e.containerId].erase?(0,T.BE)(e,{isDeleted:!0}):e}));e.history.resumeRecording(),e.scene.replaceAllElements(n)},this.initializeImage=function(){var t=(0,a.Z)(m().mark((function t(n){var r,i,o,s,l,c,u,d,h,f,g,v,y,b,x;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=n.imageFile,l=n.imageElement,c=n.showCursorImagePreview,u=void 0!==c&&c,(0,We.Wr)(s)){t.next=3;break}throw new Error((0,S.t)("errors.unsupportedFileType"));case 3:if(d=s.type,(0,I.KJ)(e.canvas,"wait"),d!==O.LO.svg){t.next=23;break}return t.prev=6,t.t0=We.Pn,t.t1=Yn.bp,t.next=11,s.text();case 11:return t.t2=t.sent,t.next=14,(0,t.t1)(t.t2);case 14:t.t3=t.sent,t.t4=s.name,s=(0,t.t0)(t.t3,t.t4),t.next=23;break;case 19:throw t.prev=19,t.t5=t.catch(6),console.warn(t.t5),new Error((0,S.t)("errors.svgImageInsertError"));case 23:return t.next=25,(null===(r=(i=e.props).generateIdForFile)||void 0===r?void 0:r.call(i,s))||(0,We.tW)(s);case 25:if(h=t.sent){t.next=29;break}throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error((0,S.t)("errors.imageInsertError"));case 29:if(null!=(f=e.files[h])&&f.dataURL){t.next=42;break}return t.prev=31,t.next=34,(0,We.Tu)(s,{maxWidthOrHeight:O.h6});case 34:s=t.sent,t.next=40;break;case 37:t.prev=37,t.t6=t.catch(31),console.error("error trying to resing image file on insertion",t.t6);case 40:if(!(s.size>O.$n)){t.next=42;break}throw new Error((0,S.t)("errors.fileTooBig",{maxSize:"".concat(Math.trunc(O.$n/1024/1024),"MB")}));case 42:if(u&&(v=null===(g=e.files[h])||void 0===g?void 0:g.dataURL,y=v&&(0,We.KG)(v),e.setImagePreviewCursor(y||s)),t.t7=null===(o=e.files[h])||void 0===o?void 0:o.dataURL,t.t7){t.next=48;break}return t.next=47,(0,We.Sf)(s);case 47:t.t7=t.sent;case 48:return b=t.t7,x=(0,T.DR)(l,{fileId:h},!1),t.abrupt("return",new Promise(function(){var t=(0,a.Z)(m().mark((function t(n,r){var i,o;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.files=hr(hr({},e.files),{},(0,p.Z)({},h,{mimeType:d,id:h,dataURL:b,created:Date.now(),lastRetrieved:Date.now()})),o=e.imageCache.get(h)){t.next=7;break}return e.addNewImagesToImageCache(),t.next=7,e.updateImageCache([x]);case 7:if(!((null==o?void 0:o.image)instanceof Promise)){t.next=10;break}return t.next=10,o.image;case 10:e.state.pendingImageElementId!==x.id&&(null===(i=e.state.draggingElement)||void 0===i?void 0:i.id)!==x.id&&e.initializeImageDimensions(x,!0),n(x),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),console.error(t.t0),r(new Error((0,S.t)("errors.imageInsertError")));case 18:return t.prev=18,u||(0,I.z8)(e.canvas),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[0,14,18,21]])})));return function(e,n){return t.apply(this,arguments)}}()));case 51:case"end":return t.stop()}}),t,null,[[6,19],[31,37]])})));return function(e){return t.apply(this,arguments)}}(),this.insertImageElement=function(){var t=(0,a.Z)(m().mark((function t(n,r,i){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.scene.replaceAllElements([].concat((0,o.Z)(e.scene.getElementsIncludingDeleted()),[n])),t.prev=1,t.next=4,e.initializeImage({imageFile:r,imageElement:n,showCursorImagePreview:i});case 4:t.next=11;break;case 6:t.prev=6,t.t0=t.catch(1),(0,T.DR)(n,{isDeleted:!0}),e.actionManager.executeAction(_.pL),e.setState({errorMessage:t.t0.message||(0,S.t)("errors.imageInsertError")});case 11:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n,r){return t.apply(this,arguments)}}(),this.setImagePreviewCursor=function(){var t=(0,a.Z)(m().mark((function t(n){var r,i,o,a,s,l,c;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=96,t.next=3,(0,We.Tu)(n,{maxWidthOrHeight:r});case 3:return i=t.sent,t.next=6,(0,We.Sf)(i);case 6:if(o=t.sent,n.type!==O.LO.svg){t.next=20;break}return t.next=10,(0,Yn.PK)(o);case 10:a=t.sent,s=Math.min(a.height,r),(l=s*(a.width/a.height))>r&&(s=(l=r)*(a.height/a.width)),(c=document.createElement("canvas")).height=s,c.width=l,c.getContext("2d").drawImage(a,0,0,l,s),o=c.toDataURL(O.LO.svg);case 20:e.state.pendingImageElementId&&(0,I.KJ)(e.canvas,"url(".concat(o,") 4 4, auto"));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.onImageAction=(0,a.Z)(m().mark((function t(){var n,r,i,o,a,s,l,c,u,d=arguments;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.length>0&&void 0!==d[0]?d[0]:{insertOnCanvasDirectly:!1},r=n.insertOnCanvasDirectly,t.prev=1,i=e.state.width/2+e.state.offsetLeft,o=e.state.height/2+e.state.offsetTop,a=(0,I.dE)({clientX:i,clientY:o},e.state),s=a.x,l=a.y,t.next=7,(0,Xe.I$)({description:"Image",extensions:["jpg","png","svg","gif"]});case 7:c=t.sent,u=e.createImageElement({sceneX:s,sceneY:l}),r?(e.insertImageElement(u,c),e.initializeImageDimensions(u),e.setState({selectedElementIds:(0,p.Z)({},u.id,!0)},(function(){e.actionManager.executeAction(_.pL)}))):e.setState({pendingImageElementId:u.id},(function(){e.insertImageElement(u,c,!0)})),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),"AbortError"!==t.t0.name?console.error(t.t0):console.warn(t.t0),e.setState({pendingImageElementId:null,editingElement:null,activeTool:(0,I.Om)(e.state,{type:"selection"})},(function(){e.actionManager.executeAction(_.pL)}));case 16:case"end":return t.stop()}}),t,null,[[1,12]])}))),this.initializeImageDimensions=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(0,q.wi)(t)&&(null===(n=e.imageCache.get(t.fileId))||void 0===n?void 0:n.image);if(!i||i instanceof Promise){if(t.width<O.f/e.state.zoom.value&&t.height<O.f/e.state.zoom.value){var o=100/e.state.zoom.value;(0,T.DR)(t,{x:t.x-o/2,y:t.y-o/2,width:o,height:o})}}else if(r||t.width<O.f/e.state.zoom.value&&t.height<O.f/e.state.zoom.value){var a=Math.max(e.state.height-120,160),s=Math.min(a,Math.floor(.5*e.state.height)/e.state.zoom.value),l=Math.min(i.naturalHeight,s),c=l*(i.naturalWidth/i.naturalHeight),u=t.x+t.width/2-c/2,d=t.y+t.height/2-l/2;(0,T.DR)(t,{x:u,y:d,width:c,height:l})}},this.updateImageCache=function(){var t=(0,a.Z)(m().mark((function t(n){var r,i,o,a,s,l,c,u=arguments;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:e.files,t.next=3,(0,Yn.Xx)({imageCache:e.imageCache,fileIds:n.map((function(e){return e.fileId})),files:r});case 3:if(i=t.sent,o=i.updatedFiles,a=i.erroredFiles,o.size||a.size){s=lr(n);try{for(s.s();!(l=s.n()).done;)c=l.value,o.has(c.fileId)&&(0,ie.bI)(c)}catch(e){s.e(e)}finally{s.f()}}return a.size&&e.scene.replaceAllElements(e.scene.getElementsIncludingDeleted().map((function(e){return(0,q.wi)(e)&&a.has(e.fileId)?(0,T.BE)(e,{status:"error"}):e}))),t.abrupt("return",{updatedFiles:o,erroredFiles:a});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.addNewImagesToImageCache=(0,a.Z)(m().mark((function t(){var n,r,i,o=arguments;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>0&&void 0!==o[0]?o[0]:(0,Yn.oA)(e.scene.getNonDeletedElements()),r=o.length>1&&void 0!==o[1]?o[1]:e.files,!(i=n.filter((function(t){return!t.isDeleted&&!e.imageCache.has(t.fileId)}))).length){t.next=9;break}return t.next=6,e.updateImageCache(i,r);case 6:t.sent.updatedFiles.size&&e.scene.informMutation();case 9:case"end":return t.stop()}}),t)}))),this.scheduleImageRefresh=Jn()((function(){e.addNewImagesToImageCache()}),O.LL),this.updateBindingEnabledOnPointerMove=function(t){var n=(0,M.cz)(t);e.state.isBindingEnabled!==n&&e.setState({isBindingEnabled:n})},this.maybeSuggestBindingAtCursor=function(t){var n=(0,M.Y9)(t,e.scene);e.setState({suggestedBindings:null!=n?[n]:[]})},this.maybeSuggestBindingsForLinearElementAtCoords=function(t,n,r){if(n.length){var i=n.reduce((function(n,i){var o=(0,M.Y9)(i,e.scene);return null==o||(0,M.DK)(t,null==r?void 0:r.id,o)||n.push(o),n}),[]);e.setState({suggestedBindings:i})}},this.handleCanvasRef=function(t){var n,r,i;null!==t?(e.canvas=t,e.rc=b.Z.canvas(e.canvas),e.canvas.addEventListener(O.Ks.WHEEL,e.handleWheel,{passive:!1}),e.canvas.addEventListener(O.Ks.TOUCH_START,e.onTapStart),e.canvas.addEventListener(O.Ks.TOUCH_END,e.onTapEnd)):(null===(n=e.canvas)||void 0===n||n.removeEventListener(O.Ks.WHEEL,e.handleWheel),null===(r=e.canvas)||void 0===r||r.removeEventListener(O.Ks.TOUCH_START,e.onTapStart),null===(i=e.canvas)||void 0===i||i.removeEventListener(O.Ks.TOUCH_END,e.onTapEnd))},this.handleAppOnDrop=function(){var t=(0,a.Z)(m().mark((function t(n){var r,i,o,a,s,l,c,u,d,h;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,We.bv)(n);case 2:if(r=t.sent,i=r.file,o=r.fileHandle,t.prev=5,!(0,We.Wr)(i)){t.next=26;break}if((null==i?void 0:i.type)!==O.LO.png&&(null==i?void 0:i.type)!==O.LO.svg){t.next=20;break}return t.prev=8,t.next=11,(0,V.cT)(i,e.state,e.scene.getElementsIncludingDeleted(),o);case 11:return a=t.sent,e.syncActionResult(hr(hr({},a),{},{appState:hr(hr({},a.appState||e.state),{},{isLoading:!1}),replaceFiles:!0,commitToHistory:!0})),t.abrupt("return");case 16:if(t.prev=16,t.t0=t.catch(8),"EncodingError"===t.t0.name){t.next=20;break}throw t.t0;case 20:return s=(0,I.dE)(n,e.state),l=s.x,c=s.y,u=e.createImageElement({sceneX:l,sceneY:c}),e.insertImageElement(u,i),e.initializeImageDimensions(u),e.setState({selectedElementIds:(0,p.Z)({},u.id,!0)}),t.abrupt("return");case 26:t.next=31;break;case 28:return t.prev=28,t.t1=t.catch(5),t.abrupt("return",e.setState({isLoading:!1,errorMessage:t.t1.message}));case 31:if(!(d=n.dataTransfer.getData(O.LO.excalidrawlib))||"string"!=typeof d){t.next=35;break}try{h=(0,We.wf)(d),e.addElementsFromPasteOrLibrary({elements:(0,U.WV)(h),position:n,files:null})}catch(t){e.setState({errorMessage:t.message})}return t.abrupt("return");case 35:if(!i){t.next=38;break}return t.next=38,e.loadFileToCanvas(i,o);case 38:case"end":return t.stop()}}),t,null,[[5,28],[8,16]])})));return function(e){return t.apply(this,arguments)}}(),this.loadFileToCanvas=function(){var t=(0,a.Z)(m().mark((function t(n,r){var i;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,We.gY)(n);case 2:return n=t.sent,t.prev=3,t.next=6,(0,We.ZY)(n,e.state,e.scene.getElementsIncludingDeleted(),r);case 6:if((i=t.sent).type!==O.LO.excalidraw){t.next=12;break}e.setState({isLoading:!0}),e.syncActionResult(hr(hr({},i.data),{},{appState:hr(hr({},i.data.appState||e.state),{},{isLoading:!1}),replaceFiles:!0,commitToHistory:!0})),t.next=15;break;case 12:if(i.type!==O.LO.excalidrawlib){t.next=15;break}return t.next=15,e.library.updateLibrary({libraryItems:n,merge:!0,openLibraryMenu:!0}).catch((function(t){console.error(t),e.setState({errorMessage:(0,S.t)("errors.importLibraryError")})}));case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),e.setState({isLoading:!1,errorMessage:t.t0.message});case 20:case"end":return t.stop()}}),t,null,[[3,17]])})));return function(e,n){return t.apply(this,arguments)}}(),this.handleCanvasContextMenu=function(t){if(t.preventDefault(),"touch"!==t.nativeEvent.pointerType&&("pen"!==t.nativeEvent.pointerType||t.button===O.Oh.SECONDARY)||"selection"===e.state.activeTool.type){var n=(0,I.dE)(t,e.state),r=n.x,i=n.y,o=e.getElementAtPosition(r,i,{preferSelected:!0,includeLockedElements:!0}),a=(0,oe.eD)(e.scene.getNonDeletedElements(),e.state),s=e.isHittingCommonBoundingBoxOfSelectedElements({x:r,y:i},a),l=o||s?"element":"canvas",c=e.excalidrawContainerRef.current.getBoundingClientRect(),u=c.top,d=c.left,h=t.clientX-d,f=t.clientY-u;(0,R.L)("contextMenu","openContextMenu",l),e.setState(hr(hr({},o&&!e.state.selectedElementIds[o.id]?(0,X.bO)(hr(hr({},e.state),{},{selectedElementIds:(0,p.Z)({},o.id,!0),selectedLinearElement:(0,q.bt)(o)?new H._(o,e.scene):null}),e.scene.getNonDeletedElements()):e.state),{},{showHyperlinkPopup:!1}),(function(){e.setState({contextMenu:{top:f,left:h,items:e.getContextMenuItems(l)}})}))}},this.maybeDragNewGenericElement=function(t,n){var r=e.state.draggingElement,o=t.lastCoords;if(r)if("selection"===r.type&&"eraser"!==e.state.activeTool.type)(0,Z.EJ)(r,e.state.activeTool.type,t.origin.x,t.origin.y,o.x,o.y,(0,I.TE)(t.origin.x,o.x),(0,I.TE)(t.origin.y,o.y),(0,C.E0)(n),(0,C.OA)(n));else{var a,s=(0,ne.wC)(o.x,o.y,e.state.gridSize),l=(0,i.Z)(s,2),c=l[0],u=l[1],d=(0,q.wi)(r)&&(null===(a=e.imageCache.get(r.fileId))||void 0===a?void 0:a.image),h=!d||d instanceof Promise?null:d.width/d.height;(0,Z.EJ)(r,e.state.activeTool.type,t.originInGrid.x,t.originInGrid.y,c,u,(0,I.TE)(t.originInGrid.x,c),(0,I.TE)(t.originInGrid.y,u),(0,q.pC)(r)?!(0,C.E0)(n):(0,C.E0)(n),(0,C.OA)(n),h),e.maybeSuggestBindingForAll([r])}},this.maybeHandleResize=function(t,n){var r=(0,oe.eD)(e.scene.getNonDeletedElements(),e.state),o=t.resize.handleType;e.setState({isResizing:o&&"rotation"!==o,isRotating:"rotation"===o});var a=t.lastCoords,s=(0,ne.wC)(a.x-t.resize.offset.x,a.y-t.resize.offset.y,e.state.gridSize),l=(0,i.Z)(s,2),c=l[0],u=l[1];return!!(0,Z.vY)(t,o,r,t.resize.arrowDirection,(0,C.Ge)(n),(0,C.OA)(n),1===r.length&&(0,q.pC)(r[0])?!(0,C.E0)(n):(0,C.E0)(n),c,u,t.resize.center.x,t.resize.center.y)&&(e.maybeSuggestBindingForAll(r),!0)},this.getContextMenuItems=function(t){var n=[];return n.push(_.jK,_.FA),"canvas"===t?e.state.viewModeEnabled?[].concat(n,[_.Pb,_.JN,Kn,_.u0]):[ir.yQ,Se,_.jK,_.FA,_.zp,Se,_.Yy,Se,_.Pb,_.JN,Kn,_.u0]:(n.push(_.zp),e.state.viewModeEnabled?[_.uN].concat(n):[_.ZM,_.uN,ir.yQ,Se].concat(n,[Se,_.pw,_.W3,Se,_.EQ,_.y7,_.vD,ar.JQ,_.s,Se,_.FL,Se,_.V,_.yA,_.zi,_.BZ,Se,_.jl,_.kt,Se,_.Qs,_.nz,_.xF,_.iL,Se,_.X9]))},this.handleWheel=(0,I.tH)((function(t){if(t.preventDefault(),!Ar){var n=t.deltaX,r=t.deltaY;if(t.metaKey||t.ctrlKey){var i=Math.sign(r),o=100*O.V4,a=Math.abs(r),s=r;a>o&&(s=o*i);var l=e.state.zoom.value-s/100;return l+=Math.log10(Math.max(1,e.state.zoom.value))*-i*Math.min(1,a/20),e.translateCanvas((function(e){return hr(hr({},(0,se.E)({viewportX:Mr,viewportY:Ir,nextZoom:(0,oe.j)(l)},e)),{},{shouldCacheIgnoreZoom:!0})})),void e.resetShouldCacheIgnoreZoomDebounced()}t.shiftKey?e.translateCanvas((function(e){var t=e.zoom;return{scrollX:e.scrollX-(r||n)/t.value}})):e.translateCanvas((function(e){var t=e.zoom,i=e.scrollX,o=e.scrollY;return{scrollX:i-n/t.value,scrollY:o-r/t.value}}))}})),this.savePointer=function(t,n,r){var i,o;if(t&&n){var a=(0,I.dE)({clientX:t,clientY:n},e.state);isNaN(a.x)||isNaN(a.y),null===(i=(o=e.props).onPointerUpdate)||void 0===i||i.call(o,{pointer:a,button:r,pointersMap:Vr.pointers})}},this.resetShouldCacheIgnoreZoomDebounced=(0,I.Ds)((function(){e.unmounted||e.setState({shouldCacheIgnoreZoom:!1})}),300),this.updateDOMRect=function(t){var n;if(null!==(n=e.excalidrawContainerRef)&&void 0!==n&&n.current){var r=e.excalidrawContainerRef.current.getBoundingClientRect(),i=r.width,o=r.height,a=r.left,s=r.top,l=e.state,c=l.width,u=l.height,d=l.offsetTop,h=l.offsetLeft;if(i===c&&o===u&&a===h&&s===d)return void(t&&t());e.setState({width:i,height:o,offsetLeft:a,offsetTop:s},(function(){t&&t()}))}},this.refresh=function(){e.setState(hr({},e.getCanvasOffsets()))}};"production"!==O.Vi.TEST&&"production"!==O.Vi.DEVELOPMENT||(window.h=window.h||{},Object.defineProperties(window.h,{elements:{configurable:!0,get:function(){var e;return null===(e=this.app)||void 0===e?void 0:e.scene.getElementsIncludingDeleted()},set:function(e){var t;return null===(t=this.app)||void 0===t?void 0:t.scene.replaceAllElements(e)}}}));var Zr=Ur},3807:function(e,t,n){n.d(t,{o:function(){return x}});var r=n(45),i=n(3646),o=n(487),a=n.n(o),s=n(631),l=n.n(s),c=n(2052),u=n.n(c),d=n(4010),h=n.n(d),p=n(1469),f=n.n(p),m=n(9329),g=n.n(m),v=n(6029),y={};y.styleTagTransform=g(),y.setAttributes=h(),y.insert=u().bind(null,"head"),y.domAPI=l(),y.insertStyleElement=f(),a()(v.Z,y),v.Z&&v.Z.locals&&v.Z.locals;var b=n(4512),x=function(e){var t=e.children,n=e.checked,o=e.onChange,a=e.className;return(0,b.jsxs)("div",{className:(0,r.Z)("Checkbox",a,{"is-checked":n}),onClick:function(e){o(!n,e),e.currentTarget.querySelector(".Checkbox-box").focus()},children:[(0,b.jsx)("button",{className:"Checkbox-box",role:"checkbox","aria-checked":n,children:i.eQ}),(0,b.jsx)("div",{className:"Checkbox-label",children:t})]})}},4499:function(e,t,n){n.d(t,{z:function(){return A}});var r=n(2577),i=n(9787),o=n.n(i),a=n(2891),s=n(6340),l=n(487),c=n.n(l),u=n(631),d=n.n(u),h=n(2052),p=n.n(h),f=n(4010),m=n.n(f),g=n(1469),v=n.n(g),y=n(9329),b=n.n(y),x=n(2345),w={};w.styleTagTransform=b(),w.setAttributes=m(),w.insert=p().bind(null,"head"),w.domAPI=d(),w.insertStyleElement=v(),c()(x.Z,w),x.Z&&x.Z.locals&&x.Z.locals;var _=n(6066),k=n(8211),E=n(56),S=n(4512),C=function(e,t){return!E.Z[t].includes(e)},T=function(e){var t=(new Option).style;return t.color=e,!!t.color},M=[["1","2","3","4","5"],["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),I=function(e){var t=e.colors,n=e.color,i=e.onChange,a=e.onClose,l=e.label,c=e.showInput,u=void 0===c||c,d=e.type,h=e.elements,p=o().useRef(),f=o().useRef(),m=o().useRef(),g=o().useRef(),v=o().useState((function(){return"canvasBackground"===d?[]:function(e,t){for(var n=[],r=e.filter((function(e){return!e.isDeleted})).sort((function(e,t){return t.updated-e.updated})),i=0,o={elementBackground:"backgroundColor",elementStroke:"strokeColor"}[t];i<r.length&&n.length<5;){var a=r[i];n.length<5&&C(a[o],t)&&!n.includes(a[o])&&n.push(a[o]),i++}return n}(h,d)})),y=(0,r.Z)(v,1)[0];o().useEffect((function(){f.current?f.current.focus():g.current?g.current.focus():m.current&&m.current.focus()}),[]);var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map((function(e,r){var o=e.replace("#",""),a=t?M[r+15]:M[r],l=t?o:(0,k.t)("colors.".concat(o));return(0,S.jsxs)("button",{className:"color-picker-swatch",onClick:function(t){t.currentTarget.focus(),i(e)},title:"".concat(l).concat((0,s.Qm)(e)?"":" (".concat(e,")"),"  ").concat(a.toUpperCase()),"aria-label":l,"aria-keyshortcuts":M[r],style:{color:e},ref:function(i){!t&&i&&0===r&&(p.current=i),i&&e===n&&(f.current=i)},onFocus:function(){i(e)},children:[(0,s.Qm)(e)?(0,S.jsx)("div",{className:"color-picker-transparent"}):void 0,(0,S.jsx)("span",{className:"color-picker-keybinding",children:a})]},e)}))};return(0,S.jsxs)("div",{className:"color-picker color-picker-type-".concat(d),role:"dialog","aria-modal":"true","aria-label":(0,k.t)("labels.colorPicker"),onKeyDown:function(e){var t=!1;if((0,_.Wl)(e.key)){var n,r,i;t=!0;var o,l=document.activeElement,c=(0,k.G3)().rtl,d=!1,h=Array.prototype.indexOf.call(null===(n=m.current.querySelector(".color-picker-content--default"))||void 0===n?void 0:n.children,l);-1===h&&-1!==(h=Array.prototype.indexOf.call(null===(o=m.current.querySelector(".color-picker-content--canvas-colors"))||void 0===o?void 0:o.children,l))&&(d=!0);var p=d?null===(r=m.current)||void 0===r?void 0:r.querySelector(".color-picker-content--canvas-colors"):null===(i=m.current)||void 0===i?void 0:i.querySelector(".color-picker-content--default");if(p&&-1!==h){var f,g=p.children.length-(u?1:0),v=e.key===(c?_.tW.ARROW_LEFT:_.tW.ARROW_RIGHT)?(h+1)%g:e.key===(c?_.tW.ARROW_RIGHT:_.tW.ARROW_LEFT)?(g+h-1)%g:d||e.key!==_.tW.ARROW_DOWN?d||e.key!==_.tW.ARROW_UP?h:(g+h-5)%g:(h+5)%g;null===(f=p.children[v])||void 0===f||f.focus()}e.preventDefault()}else if(!M.includes(e.key.toLowerCase())||e[_.tW.CTRL_OR_CMD]||e.altKey||(0,s.s)(e.target))e.key!==_.tW.ESCAPE&&e.key!==_.tW.ENTER||(t=!0,e.preventDefault(),a());else{var y,b,x;t=!0;var w=M.indexOf(e.key.toLowerCase()),E=w>=15,S=E?null==m||null===(y=m.current)||void 0===y?void 0:y.querySelector(".color-picker-content--canvas-colors"):null==m||null===(b=m.current)||void 0===b?void 0:b.querySelector(".color-picker-content--default"),C=E?w-15:w;null==S||null===(x=S.children[C])||void 0===x||x.focus(),e.preventDefault()}t&&(e.nativeEvent.stopImmediatePropagation(),e.stopPropagation())},children:[(0,S.jsx)("div",{className:"color-picker-triangle color-picker-triangle-shadow"}),(0,S.jsx)("div",{className:"color-picker-triangle"}),(0,S.jsxs)("div",{className:"color-picker-content",ref:function(e){e&&(m.current=e)},tabIndex:-1,children:[(0,S.jsx)("div",{className:"color-picker-content--default",children:b(t)}),!!y.length&&(0,S.jsxs)("div",{className:"color-picker-content--canvas",children:[(0,S.jsx)("span",{className:"color-picker-content--canvas-title",children:(0,k.t)("labels.canvasColors")}),(0,S.jsx)("div",{className:"color-picker-content--canvas-colors",children:b(y,!0)})]}),u&&(0,S.jsx)(O,{color:n,label:l,onChange:function(e){i(e)},ref:g})]})]})},O=o().forwardRef((function(e,t){var n=e.color,i=e.onChange,a=e.label,l=o().useState(n),c=(0,r.Z)(l,2),u=c[0],d=c[1],h=o().useRef(null);o().useEffect((function(){d(n)}),[n]),o().useImperativeHandle(t,(function(){return h.current}));var p=o().useCallback((function(e){var t=e.toLowerCase(),n=function(e){return(0,s.Qm)(e)?e:T("#".concat(e))?"#".concat(e):T(e)?e:null}(t);n&&i(n),d(t)}),[i]);return(0,S.jsxs)("label",{className:"color-input-container",children:[(0,S.jsx)("div",{className:"color-picker-hash",children:"#"}),(0,S.jsx)("input",{spellCheck:!1,className:"color-picker-input","aria-label":a,onChange:function(e){return p(e.target.value)},value:(u||"").replace(/^#/,""),onBlur:function(){return d(n)},ref:h})]})}));O.displayName="ColorInput";var A=function(e){var t,n=e.type,r=e.color,i=e.onChange,s=e.label,l=e.isActive,c=e.setActive,u=e.elements,d=(e.appState,o().useRef(null)),h=null===(t=d.current)||void 0===t?void 0:t.getBoundingClientRect();return(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"color-picker-control-container",children:[(0,S.jsx)("div",{className:"color-picker-label-swatch-container",children:(0,S.jsx)("button",{className:"color-picker-label-swatch","aria-label":s,style:r?{"--swatch-color":r}:void 0,onClick:function(){return c(!l)},ref:d})}),(0,S.jsx)(O,{color:r,label:s,onChange:function(e){i(e)}})]}),(0,S.jsx)(o().Suspense,{fallback:"",children:l?(0,S.jsx)("div",{className:"color-picker-popover-container",style:{position:"fixed",top:null==h?void 0:h.top,left:null==h?void 0:h.right,zIndex:1},children:(0,S.jsx)(a.J,{onCloseRequest:function(e){return e.target!==d.current&&c(!1)},children:(0,S.jsx)(I,{colors:E.Z[n],color:r||null,onChange:function(e){i(e)},onClose:function(){var e;c(!1),null===(e=d.current)||void 0===e||e.focus()},label:s,showInput:!1,type:n,elements:u})})}):null})]})}},7046:function(e,t,n){n.d(t,{Z:function(){return O}});var r=n(7169),i=n(2726),o=n(8211),a=n(8396),s=n(487),l=n.n(s),c=n(631),u=n.n(c),d=n(2052),h=n.n(d),p=n(4010),f=n.n(p),m=n(1469),g=n.n(m),v=n(9329),y=n.n(v),b=n(9393),x={};x.styleTagTransform=y(),x.setAttributes=f(),x.insert=h().bind(null,"head"),x.domAPI=u(),x.insertStyleElement=g(),l()(b.Z,x),b.Z&&b.Z.locals&&b.Z.locals;var w=n(6428),_=n(4739),k=n(9206),E=n(2134),S=n(9487),C=n(4512),T=["onConfirm","onCancel","children","confirmText","cancelText","className"];function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e){var t=e.onConfirm,n=e.onCancel,r=e.children,s=e.confirmText,l=void 0===s?(0,o.t)("buttons.confirm"):s,c=e.cancelText,u=void 0===c?(0,o.t)("buttons.cancel"):c,d=e.className,h=void 0===d?"":d,p=(0,i.Z)(e,T),f=(0,E.n9)(),m=(0,_.b9)(k.u,S.yE);return(0,C.jsxs)(a.V,I(I({onCloseRequest:n,small:!0},p),{},{className:"confirm-dialog ".concat(h),children:[r,(0,C.jsxs)("div",{className:"confirm-dialog-buttons",children:[(0,C.jsx)(w.Z,{label:u,onClick:function(){f({openMenu:null}),m(!1),n()}}),(0,C.jsx)(w.Z,{label:l,onClick:function(){f({openMenu:null}),m(!1),t()},actionType:"danger"})]})]}))}},8396:function(e,t,n){n.d(t,{V:function(){return z}});var r=n(2577),i=n(45),o=n(9787),a=n(8211),s=n(2134),l=n(6066),c=n(487),u=n.n(c),d=n(631),h=n.n(d),p=n(2052),f=n.n(p),m=n(4010),g=n.n(m),v=n(1469),y=n.n(v),b=n(9329),x=n.n(b),w=n(9482),_={};_.styleTagTransform=x(),_.setAttributes=g(),_.insert=f().bind(null,"head"),_.domAPI=h(),_.insertStyleElement=y(),u()(w.Z,_),w.Z&&w.Z.locals&&w.Z.locals;var k=n(3646),E=n(1881),S=n(6843),C={};C.styleTagTransform=x(),C.setAttributes=g(),C.insert=f().bind(null,"head"),C.domAPI=h(),C.insertStyleElement=y(),u()(S.Z,C),S.Z&&S.Z.locals&&S.Z.locals;var T=n(5156),M=n(2335),I=n(4512),O=function(e){var t=e.theme,n=void 0===t?M.C6.LIGHT:t,r=e.closeOnClickOutside,o=void 0===r||r,a=A(n);return a?(0,T.createPortal)((0,I.jsxs)("div",{className:(0,i.Z)("Modal",e.className),role:"dialog","aria-modal":"true",onKeyDown:function(t){t.key===l.tW.ESCAPE&&(t.nativeEvent.stopImmediatePropagation(),t.stopPropagation(),e.onCloseRequest())},"aria-labelledby":e.labelledBy,"data-prevent-outside-click":!0,children:[(0,I.jsx)("div",{className:"Modal__background",onClick:o?e.onCloseRequest:void 0}),(0,I.jsx)("div",{className:"Modal__content",style:{"--max-width":"".concat(e.maxWidth,"px")},tabIndex:0,children:e.children})]}),a):null},A=function(e){var t=(0,o.useState)(null),n=(0,r.Z)(t,2),i=n[0],a=n[1],l=(0,s.Fy)(),c=(0,o.useRef)(l.isMobile);c.current=l.isMobile;var u=(0,s.J0)().container;return(0,o.useLayoutEffect)((function(){i&&i.classList.toggle("excalidraw--mobile",l.isMobile)}),[i,l.isMobile]),(0,o.useLayoutEffect)((function(){var t=!(null==u||!u.classList.contains("theme--dark"))||"dark"===e,n=document.createElement("div");return n.classList.add("excalidraw","excalidraw-modal-container"),n.classList.toggle("excalidraw--mobile",c.current),t&&(n.classList.add("theme--dark"),n.classList.add("theme--dark-background-none")),document.body.appendChild(n),a(n),function(){document.body.removeChild(n)}}),[u,e]),i},P=n(6340),D=n(4739),L=n(9206),R=n(9487),z=function(e){var t=function(){var e=(0,o.useState)(null),t=(0,r.Z)(e,2),n=t[0],i=t[1];return[n,(0,o.useCallback)((function(e){return i(e)}),[])]}(),n=(0,r.Z)(t,2),c=n[0],u=n[1],d=(0,o.useState)(document.activeElement),h=(0,r.Z)(d,1)[0],p=(0,s.J0)().id;(0,o.useEffect)((function(){if(c){var t=(0,P.xp)(c);t.length>0&&!1!==e.autofocus&&(t[1]||t[0]).focus();var n=function(e){if(e.key===l.tW.TAB){var t=(0,P.xp)(c),n=document.activeElement,r=t.findIndex((function(e){return e===n}));0===r&&e.shiftKey?(t[t.length-1].focus(),e.preventDefault()):r!==t.length-1||e.shiftKey||(t[0].focus(),e.preventDefault())}};return c.addEventListener("keydown",n),function(){return c.removeEventListener("keydown",n)}}}),[c,e.autofocus]);var f=(0,s.n9)(),m=(0,D.b9)(L.u,R.yE),g=function(){f({openMenu:null}),m(!1),h.focus(),e.onCloseRequest()};return(0,I.jsx)(O,{className:(0,i.Z)("Dialog",e.className),labelledBy:"dialog-title",maxWidth:e.small?550:800,onCloseRequest:g,theme:e.theme,closeOnClickOutside:e.closeOnClickOutside,children:(0,I.jsxs)(E.W,{ref:u,children:[(0,I.jsxs)("h2",{id:"".concat(p,"-dialog-title"),className:"Dialog__title",children:[(0,I.jsx)("span",{className:"Dialog__titleContent",children:e.title}),(0,I.jsx)("button",{className:"Modal__close",onClick:g,title:(0,a.t)("buttons.close"),"aria-label":(0,a.t)("buttons.close"),children:(0,s.Fy)().isMobile?k.op:k.Tw})]}),(0,I.jsx)("div",{className:"Dialog__content",children:e.children})]})})}},6428:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(7169),i=n(2726),o=n(45),a=n(487),s=n.n(a),l=n(631),c=n.n(l),u=n(2052),d=n.n(u),h=n(4010),p=n.n(h),f=n(1469),m=n.n(f),g=n(9329),v=n.n(g),y=n(6148),b={};b.styleTagTransform=v(),b.setAttributes=p(),b.insert=d().bind(null,"head"),b.domAPI=c(),b.insertStyleElement=m(),s()(y.Z,b),y.Z&&y.Z.locals&&y.Z.locals;var x=n(5644),w=n(4512),_=["label","onClick","className","children","actionType","type","isLoading"];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t=e.label,n=e.onClick,r=e.className,a=e.children,s=e.actionType,l=e.type,c=void 0===l?"button":l,u=e.isLoading,d=(0,i.Z)(e,_),h=s?"Dialog__action-button--".concat(s):"";return(0,w.jsxs)("button",E(E({className:(0,o.Z)("Dialog__action-button",h,r),type:c,"aria-label":t,onClick:n},d),{},{children:[a&&(0,w.jsx)("div",{style:u?{visibility:"hidden"}:{},children:a}),(0,w.jsx)("div",{style:u?{visibility:"hidden"}:{},children:t}),u&&(0,w.jsx)("div",{style:{position:"absolute",inset:0},children:(0,w.jsx)(x.Z,{})})]}))}},1881:function(e,t,n){n.d(t,{W:function(){return E}});var r=n(7169),i=n(487),o=n.n(i),a=n(631),s=n.n(a),l=n(2052),c=n.n(l),u=n(4010),d=n.n(u),h=n(1469),p=n.n(h),f=n(9329),m=n.n(f),g=n(7369),v={};v.styleTagTransform=m(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=p(),o()(g.Z,v),g.Z&&g.Z.locals&&g.Z.locals;var y=n(9787),b=n.n(y),x=n(45),w=n(4512);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=b().forwardRef((function(e,t){var n=e.children,r=e.padding,i=e.className,o=e.style;return(0,w.jsx)("div",{className:(0,x.Z)("Island",i),style:k({"--padding":r},o),ref:t,children:n})}))},9206:function(e,t,n){n.d(t,{W:function(){return X},u:function(){return K}});var r=n(8950),i=n(2577),o=n(2975),a=n.n(o),s=n(9787),l=n(5523),c=n(7053),u=n(8211),d=n(3646),h=n(1319),p=n(1393),f=n(6340),m=n(4739),g=n(9487),v=n(7046),y=n(7169),b=n(5284),x=n(8396),w=n(3024),_=n(2335),k=n(434),E=n(6428),S=n(487),C=n.n(S),T=n(631),M=n.n(T),I=n(2052),O=n.n(I),A=n(4010),P=n.n(A),D=n(1469),L=n.n(D),R=n(9329),z=n.n(R),j=n(7589),N={};N.styleTagTransform=z(),N.setAttributes=P(),N.insert=O().bind(null,"head"),N.domAPI=M(),N.insertStyleElement=L(),C()(j.Z,N),j.Z&&j.Z.locals&&j.Z.locals;var B=n(4512);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z="publish-library-data",H=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r,o,s,l,c,u,d,h,p,m,g,v,y,x,E,S;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=6,r=128,o=Math.round(r/16),s=Math.max(Math.round(r/64),2),l=(0,f.yo)(t,n),(c=document.createElement("canvas")).width=l[0].length*r+(l[0].length+1)*(2*o)-2*o,c.height=l.length*r+(l.length+1)*(2*o)-2*o,(u=c.getContext("2d")).fillStyle=b.white,u.fillRect(0,0,c.width,c.height),d=U(t.entries()),e.prev=12,d.s();case 14:if((h=d.n()).done){e.next=28;break}return p=(0,i.Z)(h.value,2),m=p[0],g=p[1],e.next=18,(0,w.NL)({elements:g.elements,files:null,maxWidthOrHeight:r});case 18:v=e.sent,y=v.width,x=v.height,E=Math.floor(m/n)*(r+2*o),S=m%n*(r+2*o),u.drawImage(v,S+(r-y)/2+o,E+(r-x)/2+o),u.lineWidth=s,u.strokeStyle=b.gray[4],u.strokeRect(S+o/2,E+o/2,r+o,r+o);case 26:e.next=14;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(12),d.e(e.t0);case 33:return e.prev=33,d.f(),e.finish(33);case 36:return e.t1=k.Tu,e.t2=File,e.next=40,(0,k._c)(c);case 40:return e.t3=e.sent,e.t4=[e.t3],e.t5={type:_.LO.png},e.t6=new e.t2(e.t4,"preview",e.t5),e.t7={outputType:_.LO.jpg,maxWidthOrHeight:5e3},e.next=47,(0,e.t1)(e.t6,e.t7);case 47:return e.abrupt("return",e.sent);case 48:case"end":return e.stop()}}),e,null,[[12,30,33,36]])})));return function(t){return e.apply(this,arguments)}}(),W=function(e){var t=e.libItem,n=e.appState,i=e.index,o=e.onChange,l=e.onRemove,c=(0,s.useRef)(null),p=(0,s.useRef)(null);return(0,s.useEffect)((function(){var e=c.current;e&&(0,r.Z)(a().mark((function r(){var i;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,w.$D)({elements:t.elements,appState:V(V({},n),{},{viewBackgroundColor:b.white,exportBackground:!0}),files:null});case 2:i=r.sent,e.innerHTML=i.outerHTML;case 4:case"end":return r.stop()}}),r)})))()}),[t.elements,n]),(0,B.jsxs)("div",{className:"single-library-item",children:["published"===t.status&&(0,B.jsx)("span",{className:"single-library-item-status",children:(0,u.t)("labels.statusPublished")}),(0,B.jsx)("div",{ref:c,className:"single-library-item__svg"}),(0,B.jsx)(h.V,{"aria-label":(0,u.t)("buttons.remove"),type:"button",icon:d.Tw,className:"single-library-item--remove",onClick:l.bind(null,t.id),title:(0,u.t)("buttons.remove")}),(0,B.jsxs)("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[(0,B.jsxs)("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[(0,B.jsxs)("div",{style:{padding:"0.5em 0"},children:[(0,B.jsx)("span",{style:{fontWeight:500,color:b.gray[6]},children:(0,u.t)("publishDialog.itemName")}),(0,B.jsx)("span",{"aria-hidden":"true",className:"required",children:"*"})]}),(0,B.jsx)("input",{type:"text",ref:p,style:{width:"80%",padding:"0.2rem"},defaultValue:t.name,placeholder:"Item name",onChange:function(e){o(e.target.value,i)}})]}),(0,B.jsx)("span",{className:"error",children:t.error})]})]})},q=function(e){var t=e.onClose,n=e.libraryItems,o=e.appState,l=e.onSuccess,c=e.onError,d=e.updateItemsInStorage,h=e.onRemove,p=(0,s.useState)({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),f=(0,i.Z)(p,2),m=f[0],g=f[1],v=(0,s.useState)(!1),b=(0,i.Z)(v,2),w=b[0],k=b[1];(0,s.useEffect)((function(){var e=function(){try{var e=localStorage.getItem(Z);if(e)return JSON.parse(e)}catch(e){console.error(e)}return null}();e&&g(e)}),[]);var S=(0,s.useState)(n.slice()),C=(0,i.Z)(S,2),T=C[0],M=C[1];(0,s.useEffect)((function(){M(n.slice())}),[n]);var I,O=function(e){g(V(V({},m),{},(0,y.Z)({},e.target.name,e.target.value)))},A=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r,i,o,s,d,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),k(!0),n=[],r=!1,T.forEach((function(e){var t="";e.name||(t=(0,u.t)("publishDialog.errors.required"),r=!0),n.push(V(V({},e),{},{error:t}))})),!r){e.next=9;break}return M(n),k(!1),e.abrupt("return");case 9:return e.next=11,H(T);case 11:i=e.sent,o={type:_.r8.excalidrawLibrary,version:_.Kr.excalidrawLibrary,source:_.pb,libraryItems:T},s=JSON.stringify(o,null,2),d=new Blob([s],{type:"application/json"}),(h=new FormData).append("excalidrawLib",d),h.append("previewImage",i),h.append("previewImageType",i.type),h.append("title",m.name),h.append("authorName",m.authorName),h.append("githubHandle",m.githubHandle),h.append("name",m.name),h.append("description",m.description),h.append("twitterHandle",m.twitterHandle),h.append("website",m.website),fetch("".concat("https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries","/submit"),{method:"post",body:h}).then((function(e){return e.ok?e.json().then((function(e){var t=e.url;localStorage.removeItem(Z),l({url:t,authorName:m.authorName,items:T})})):e.json().catch((function(){throw new Error(e.statusText||"something went wrong")})).then((function(t){throw new Error(t.message||e.statusText||"something went wrong")}))}),(function(e){console.error(e),c(e),k(!1)})).catch((function(e){console.error(e),c(e),k(!1)}));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=(0,s.useCallback)((function(){d(T),function(e){try{localStorage.setItem(Z,JSON.stringify(e))}catch(e){console.error(e)}}(m),t()}),[T,t,d,m]),D=!!n.length,L=n.some((function(e){return"published"===e.status}));return(0,B.jsx)(x.V,{onCloseRequest:P,title:(0,u.t)("publishDialog.title"),className:"publish-library",children:D?(0,B.jsxs)("form",{onSubmit:A,children:[(0,B.jsxs)("div",{className:"publish-library-note",children:[(0,u.t)("publishDialog.noteDescription.pre"),(0,B.jsx)("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:(0,u.t)("publishDialog.noteDescription.link")})," ",(0,u.t)("publishDialog.noteDescription.post")]}),(0,B.jsxs)("span",{className:"publish-library-note",children:[(0,u.t)("publishDialog.noteGuidelines.pre"),(0,B.jsx)("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:(0,u.t)("publishDialog.noteGuidelines.link")}),(0,u.t)("publishDialog.noteGuidelines.post")]}),(0,B.jsx)("div",{className:"publish-library-note",children:(0,u.t)("publishDialog.noteItems")}),L&&(0,B.jsx)("span",{className:"publish-library-note publish-library-warning",children:(0,u.t)("publishDialog.republishWarning")}),(I=[],T.forEach((function(e,t){I.push((0,B.jsx)("div",{className:"single-library-item-wrapper",children:(0,B.jsx)(W,{libItem:e,appState:o,index:t,onChange:function(e,t){var n=T.slice();n[t].name=e,M(n)},onRemove:h})},t))})),(0,B.jsx)("div",{className:"selected-library-items",children:I})),(0,B.jsxs)("div",{className:"publish-library__fields",children:[(0,B.jsxs)("label",{children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("span",{children:(0,u.t)("publishDialog.libraryName")}),(0,B.jsx)("span",{"aria-hidden":"true",className:"required",children:"*"})]}),(0,B.jsx)("input",{type:"text",name:"name",required:!0,value:m.name,onChange:O,placeholder:(0,u.t)("publishDialog.placeholder.libraryName")})]}),(0,B.jsxs)("label",{style:{alignItems:"flex-start"},children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("span",{children:(0,u.t)("publishDialog.libraryDesc")}),(0,B.jsx)("span",{"aria-hidden":"true",className:"required",children:"*"})]}),(0,B.jsx)("textarea",{name:"description",rows:4,required:!0,value:m.description,onChange:O,placeholder:(0,u.t)("publishDialog.placeholder.libraryDesc")})]}),(0,B.jsxs)("label",{children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("span",{children:(0,u.t)("publishDialog.authorName")}),(0,B.jsx)("span",{"aria-hidden":"true",className:"required",children:"*"})]}),(0,B.jsx)("input",{type:"text",name:"authorName",required:!0,value:m.authorName,onChange:O,placeholder:(0,u.t)("publishDialog.placeholder.authorName")})]}),(0,B.jsxs)("label",{children:[(0,B.jsx)("span",{children:(0,u.t)("publishDialog.githubUsername")}),(0,B.jsx)("input",{type:"text",name:"githubHandle",value:m.githubHandle,onChange:O,placeholder:(0,u.t)("publishDialog.placeholder.githubHandle")})]}),(0,B.jsxs)("label",{children:[(0,B.jsx)("span",{children:(0,u.t)("publishDialog.twitterUsername")}),(0,B.jsx)("input",{type:"text",name:"twitterHandle",value:m.twitterHandle,onChange:O,placeholder:(0,u.t)("publishDialog.placeholder.twitterHandle")})]}),(0,B.jsxs)("label",{children:[(0,B.jsx)("span",{children:(0,u.t)("publishDialog.website")}),(0,B.jsx)("input",{type:"text",name:"website",pattern:"https?://.+",title:(0,u.t)("publishDialog.errors.website"),value:m.website,onChange:O,placeholder:(0,u.t)("publishDialog.placeholder.website")})]}),(0,B.jsxs)("span",{className:"publish-library-note",children:[(0,u.t)("publishDialog.noteLicense.pre"),(0,B.jsx)("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:(0,u.t)("publishDialog.noteLicense.link")}),(0,u.t)("publishDialog.noteLicense.post")]})]}),(0,B.jsxs)("div",{className:"publish-library__buttons",children:[(0,B.jsx)(E.Z,{label:(0,u.t)("buttons.cancel"),onClick:P,"data-testid":"cancel-clear-canvas-button"}),(0,B.jsx)(E.Z,{type:"submit",label:(0,u.t)("buttons.submit"),actionType:"primary",isLoading:w})]})]}):(0,B.jsx)("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:(0,u.t)("publishDialog.atleastOneLibItem")})})},G=n(9127),K=(0,m.cn)(!1),Y=function(e,t){return e.filter((function(e){return t.includes(e.id)}))},X=function(e){var t=e.setAppState,n=e.selectedItems,o=e.library,y=e.onRemoveFromLibrary,b=e.resetLibrary,w=e.onSelectItems,_=e.appState,k=(0,m.KO)(c.rF,g.yE),E=(0,i.Z)(k,1)[0],S=(0,m.KO)(K,g.yE),C=(0,i.Z)(S,2),T=C[0],M=C[1],I=(0,s.useCallback)((function(){var e=n.length?(0,u.t)("alerts.removeItemsFromsLibrary",{count:n.length}):(0,u.t)("alerts.resetLibrary"),t=n.length?(0,u.t)("confirmDialog.removeItemsFromLib"):(0,u.t)("confirmDialog.resetLibrary");return(0,B.jsx)(v.Z,{onConfirm:function(){n.length?y():b(),D(!1)},onCancel:function(){D(!1)},title:t,children:(0,B.jsx)("p",{children:e})})}),[n,y,b]),O=(0,s.useState)(!1),A=(0,i.Z)(O,2),P=A[0],D=A[1],L=!!n.length,R=L?E.libraryItems.filter((function(e){return n.includes(e.id)})):E.libraryItems,z=L?(0,u.t)("buttons.remove"):(0,u.t)("buttons.resetLibrary"),j=(0,s.useState)(!1),N=(0,i.Z)(j,2),F=N[0],V=N[1],U=(0,s.useState)(null),$=(0,i.Z)(U,2),Z=$[0],H=$[1],W=(0,s.useCallback)((function(){return(0,B.jsxs)(x.V,{onCloseRequest:function(){return H(null)},title:(0,u.t)("publishSuccessDialog.title"),className:"publish-library-success",small:!0,children:[(0,B.jsxs)("p",{children:[(0,u.t)("publishSuccessDialog.content",{authorName:Z.authorName})," ",(0,B.jsx)("a",{href:null==Z?void 0:Z.url,target:"_blank",rel:"noopener noreferrer",children:(0,u.t)("publishSuccessDialog.link")})]}),(0,B.jsx)(h.V,{type:"button",title:(0,u.t)("buttons.close"),"aria-label":(0,u.t)("buttons.close"),label:(0,u.t)("buttons.close"),onClick:function(){return H(null)},"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]})}),[H,Z]),X=(0,s.useCallback)((function(e,t){V(!1),H({url:e.url,authorName:e.authorName});var r=t.slice();r.forEach((function(e){n.includes(e.id)&&(e.status="published")})),o.setLibrary(r)}),[V,H,n,o]),J=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.updateLibrary({libraryItems:(0,p.I$)({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0});case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),"AbortError"!==(null===e.t0||void 0===e.t0?void 0:e.t0.name)){e.next=10;break}return console.warn(e.t0),e.abrupt("return");case 10:t({errorMessage:(0,u.t)("errors.importLibraryError")});case 11:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,r.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L){e.next=4;break}e.t0=R,e.next=7;break;case 4:return e.next=6,o.getLatestLibrary();case 6:e.t0=e.sent;case 7:n=e.t0,(0,l.t1)(n).catch(f.FG).catch((function(e){t({errorMessage:e.message})}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,B.jsxs)("div",{style:{position:"relative"},children:[(0,B.jsxs)(G.Z,{open:T,children:[(0,B.jsx)(G.Z.Trigger,{className:"Sidebar__dropdown-btn",onToggle:function(){return M(!T)},children:d.YA}),(0,B.jsxs)(G.Z.Content,{onClickOutside:function(){return M(!1)},onSelect:function(){return M(!1)},className:"library-menu",children:[!L&&(0,B.jsx)(G.Z.Item,{onSelect:J,icon:d.Tl,"data-testid":"lib-dropdown--load",children:(0,u.t)("buttons.load")}),!!R.length&&(0,B.jsx)(G.Z.Item,{onSelect:Q,icon:d.Hy,"data-testid":"lib-dropdown--export",children:(0,u.t)("buttons.export")}),!!R.length&&(0,B.jsx)(G.Z.Item,{onSelect:function(){return D(!0)},icon:d.XH,children:z}),L&&(0,B.jsx)(G.Z.Item,{icon:d.Nw,onSelect:function(){return V(!0)},"data-testid":"lib-dropdown--remove",children:(0,u.t)("buttons.publishLibrary")})]})]}),n.length>0&&(0,B.jsx)("div",{className:"library-actions-counter",children:n.length}),P&&I(),F&&(0,B.jsx)(q,{onClose:function(){return V(!1)},libraryItems:Y(E.libraryItems,n),appState:_,onSuccess:function(e){return X(e,E.libraryItems)},onError:function(e){return window.alert(e)},updateItemsInStorage:function(){return o.setLibrary(E.libraryItems)},onRemove:function(e){return w(n.filter((function(t){return t!==e})))}}),Z&&W()]})}},5440:function(e,t,n){n.d(t,{z:function(){return u}});var r=n(2577),i=n(8211),o=n(9787),a=n(5644),s=n(45),l=n(2335),c=n(4512),u=function(e){var t=e.delay,n=e.theme,u=(0,o.useState)(!!t),d=(0,r.Z)(u,2),h=d[0],p=d[1];return(0,o.useEffect)((function(){if(t){var e=setTimeout((function(){p(!1)}),t);return function(){return clearTimeout(e)}}}),[t]),h?null:(0,c.jsxs)("div",{className:(0,s.Z)("LoadingMessage",{"LoadingMessage--dark":n===l.C6.DARK}),children:[(0,c.jsx)("div",{children:(0,c.jsx)(a.Z,{})}),(0,c.jsx)("div",{className:"LoadingMessage-text",children:(0,i.t)("labels.loadingScene")})]})}},2891:function(e,t,n){n.d(t,{J:function(){return _}});var r=n(9787),i=n(487),o=n.n(i),a=n(631),s=n.n(a),l=n(2052),c=n.n(l),u=n(4010),d=n.n(u),h=n(1469),p=n.n(h),f=n(9329),m=n.n(f),g=n(9935),v={};v.styleTagTransform=m(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=p(),o()(g.Z,v),g.Z&&g.Z.locals&&g.Z.locals;var y=n(5156),b=n(6340),x=n(6066),w=n(4512),_=function(e){var t=e.children,n=e.left,i=e.top,o=e.onCloseRequest,a=e.fitInViewport,s=void 0!==a&&a,l=e.offsetLeft,c=void 0===l?0:l,u=e.offsetTop,d=void 0===u?0:u,h=e.viewportWidth,p=void 0===h?window.innerWidth:h,f=e.viewportHeight,m=void 0===f?window.innerHeight:f,g=(0,r.useRef)(null);(0,r.useEffect)((function(){var e=g.current;if(e){e.contains(document.activeElement)||e.focus();var t=function(t){if(t.key===x.tW.TAB){var n,r=(0,b.xp)(e),i=document.activeElement,o=r.findIndex((function(e){return e===i}));if(i===e)t.shiftKey?null===(n=r[r.length-1])||void 0===n||n.focus():r[0].focus(),t.preventDefault(),t.stopImmediatePropagation();else if(0===o&&t.shiftKey){var a;null===(a=r[r.length-1])||void 0===a||a.focus(),t.preventDefault(),t.stopImmediatePropagation()}else if(o===r.length-1&&!t.shiftKey){var s;null===(s=r[0])||void 0===s||s.focus(),t.preventDefault(),t.stopImmediatePropagation()}}};return e.addEventListener("keydown",t),function(){return e.removeEventListener("keydown",t)}}}),[]);var v=(0,r.useRef)(null);return(0,r.useLayoutEffect)((function(){if(s&&g.current&&null!=i&&null!=n){var e,t,r=g.current,o=r.getBoundingClientRect(),a=o.width,l=o.height;if((null===(e=v.current)||void 0===e?void 0:e.top)===i&&(null===(t=v.current)||void 0===t?void 0:t.left)===n)return;v.current={top:i,left:n},a>=p?(r.style.width="".concat(p,"px"),r.style.left="0px",r.style.overflowX="scroll"):r.style.left="".concat(n+a-c>p?p-a-10:n,"px"),l>=m?(r.style.height="".concat(m-20,"px"),r.style.top="10px",r.style.overflowY="scroll"):r.style.top="".concat(i+l-d>m?m-l:i,"px")}}),[i,n,s,p,m,c,d]),(0,r.useEffect)((function(){if(o){var e=function(e){var t;null!==(t=g.current)&&void 0!==t&&t.contains(e.target)||(0,y.unstable_batchedUpdates)((function(){return o(e)}))};return document.addEventListener("pointerdown",e,!1),function(){return document.removeEventListener("pointerdown",e,!1)}}}),[o]),(0,w.jsx)("div",{className:"popover",ref:g,tabIndex:-1,children:t})}},9430:function(e,t,n){n.d(t,{Y:function(){return N},b:function(){return j}});var r=n(2577),i=n(9787),o=n.n(i),a=n(1881),s=n(4739),l=n(9487),c=o().createContext({}),u=n(45),d=n(8211),h=n(2134),p=n(3646),f=n(7169),m=n(4512);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var v=n(1894),y=function(e){return(0,m.jsx)("div",{className:"layer-ui__sidebar-dock-button","data-testid":"sidebar-dock",children:(0,m.jsxs)(v.u,{label:(0,d.t)("labels.sidebarLock"),children:[(0,m.jsxs)("label",{className:(0,u.Z)("ToolIcon ToolIcon__lock ToolIcon_type_floating","ToolIcon_size_medium"),children:[(0,m.jsx)("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:e.onChange,checked:e.checked,"aria-label":(0,d.t)("labels.sidebarLock")})," ",(0,m.jsx)("div",{className:(0,u.Z)("Sidebar__pin-btn",{"Sidebar__pin-btn--pinned":e.checked}),tabIndex:0,children:p.qQ})," "]})," "]})})},b=function(e){var t=(0,i.createContext)([!1,function(){}]),n=function(e){var n=e.children,o=(0,i.useState)(!1),a=(0,r.Z)(o,2),s=a[0],l=a[1],c=(0,i.useMemo)((function(){return[s,l]}),[s]);return(0,m.jsx)(t.Provider,{value:c,children:n})},o=function(n){var o=(0,i.useContext)(t),a=(0,r.Z)(o,2),s=a[0],l=a[1];return(0,i.useLayoutEffect)((function(){if(!n.__isFallback)return l(!0),function(){return l(!1)}}),[n.__isFallback,l]),n.__isFallback&&s?null:(0,m.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n))};return e.name&&(o.displayName="".concat(e.name,"_upstreamOverrideWrapper"),n.displayName="".concat(e.name,"_upstreamOverrideContextWrapper")),[n,o]}((function(e){var t=e.children,n=e.className,r=(0,h.Fy)(),o=(0,i.useContext)(c),a=!(!r.canDeviceFitSidebar||!o.dockable),s=!!o.onClose;return(0,m.jsxs)("div",{className:(0,u.Z)("layer-ui__sidebar__header",n),"data-testid":"sidebar-header",children:[t,(a||s)&&(0,m.jsxs)("div",{className:"layer-ui__sidebar__header__buttons",children:[a&&(0,m.jsx)(y,{checked:!!o.docked,onChange:function(){var e;null===(e=o.onDock)||void 0===e||e.call(o,!o.docked)}}),s&&(0,m.jsx)("button",{"data-testid":"sidebar-close",className:"Sidebar__close-btn",onClick:o.onClose,"aria-label":(0,d.t)("buttons.close"),children:p.Tw})]})]})})),x=(0,r.Z)(b,2),w={Context:x[0],Component:x[1]},_=n(487),k=n.n(_),E=n(631),S=n.n(E),C=n(2052),T=n.n(C),M=n(4010),I=n.n(M),O=n(1469),A=n.n(O),P=n(9329),D=n.n(P),L=n(8208),R={};R.styleTagTransform=D(),R.setAttributes=I(),R.insert=T().bind(null,"head"),R.domAPI=S(),R.insertStyleElement=A(),k()(L.Z,R),L.Z&&L.Z.locals&&L.Z.locals;var z=n(6340),j=(0,s.cn)({rendered:0,docked:0}),N=Object.assign((0,i.forwardRef)((function(e,t){var n,o=e.children,d=e.onClose,p=e.onDock,f=e.docked,g=e.initialDockedState,v=void 0===g?f:g,y=e.dockable,b=void 0===y||y,x=e.className,_=e.__isInternal,k=(0,s.KO)(j,l.yE),E=(0,r.Z)(k,2),S=E[0],C=E[1],T=(0,h.n9)(),M=(0,i.useState)(null!==(n=null!=f?f:v)&&void 0!==n&&n),I=(0,r.Z)(M,2),O=I[0],A=I[1];(0,i.useLayoutEffect)((function(){void 0===f&&T((function(e){return A(e.isSidebarDocked),null}))}),[T,f]),(0,i.useLayoutEffect)((function(){if(!_)return C((function(e){return{rendered:e.rendered+1,docked:O?e.docked+1:e.docked}})),function(){C((function(e){return{rendered:e.rendered-1,docked:O?e.docked-1:e.docked}}))}}),[_,C,O]);var P=(0,i.useRef)(d);P.current=d,(0,i.useEffect)((function(){return function(){var e;null===(e=P.current)||void 0===e||e.call(P)}}),[]);var D=(0,i.useRef)({});return D.current.onClose=function(){T({openSidebar:null})},D.current.onDock=function(e){void 0===f&&(T({isSidebarDocked:e}),A(e)),null==p||p(e)},D.current=(0,z.v4)(D.current,{docked:null!=f?f:O,dockable:b}),S.rendered>0&&_?null:(0,m.jsx)(a.W,{className:(0,u.Z)("layer-ui__sidebar",{"layer-ui__sidebar--docked":O},x),ref:t,children:(0,m.jsx)(c.Provider,{value:D.current,children:(0,m.jsxs)(w.Context,{children:[(0,m.jsx)(w.Component,{__isFallback:!0}),o]})})})})),{Header:w.Component})},5644:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(487),i=n.n(r),o=n(631),a=n.n(o),s=n(2052),l=n.n(s),c=n(4010),u=n.n(c),d=n(1469),h=n.n(d),p=n(9329),f=n.n(p),m=n(5892),g={};g.styleTagTransform=f(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=h(),i()(m.Z,g),m.Z&&m.Z.locals&&m.Z.locals;var v=n(4512),y=function(e){var t=e.size,n=void 0===t?"1em":t,r=e.circleWidth,i=void 0===r?8:r;return(0,v.jsx)("div",{className:"Spinner",children:(0,v.jsx)("svg",{viewBox:"0 0 100 100",style:{width:n,height:n},children:(0,v.jsx)("circle",{cx:"50",cy:"50",r:50-i/2,strokeWidth:i,fill:"none",strokeMiterlimit:"10"})})})}},7239:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(7169),i=n(487),o=n.n(i),a=n(631),s=n.n(a),l=n(2052),c=n.n(l),u=n(4010),d=n.n(u),h=n(1469),p=n.n(h),f=n(9329),m=n.n(f),g=n(3874),v={};v.styleTagTransform=m(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=p(),o()(g.Z,v),g.Z&&g.Z.locals&&g.Z.locals;var y=n(45),b=n(4512);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _={Row:function(e){var t=e.children,n=e.gap,r=e.align,i=e.justifyContent,o=e.className,a=e.style;return(0,b.jsx)("div",{className:(0,y.Z)("Stack Stack_horizontal",o),style:w({"--gap":n,alignItems:r,justifyContent:i},a),children:t})},Col:function(e){var t=e.children,n=e.gap,r=e.align,i=e.justifyContent,o=e.className,a=e.style;return(0,b.jsx)("div",{className:(0,y.Z)("Stack Stack_vertical",o),style:w({"--gap":n,justifyItems:r,justifyContent:i},a),children:t})}}},1319:function(e,t,n){n.d(t,{V:function(){return f}});var r=n(8950),i=n(2577),o=n(2975),a=n.n(o),s=(n(5422),n(9787)),l=n.n(s),c=n(45),u=n(2134),d=n(6797),h=n(5644),p=n(4512),f=l().forwardRef((function(e,t){var n=(0,u.J0)().id,o=l().useRef(null);l().useImperativeHandle(t,(function(){return o.current}));var f="ToolIcon_size_".concat(e.size),m=(0,s.useState)(!1),g=(0,i.Z)(m,2),v=g[0],y=g[1],b=(0,s.useRef)(!0),x=function(){var t=(0,r.Z)(a().mark((function t(n){var r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i="onClick"in e&&(null===(r=e.onClick)||void 0===r?void 0:r.call(e,n)))||!("then"in i)){t.next=18;break}return t.prev=2,y(!0),t.next=6,i;case 6:t.next=15;break;case 8:if(t.prev=8,t.t0=t.catch(2),t.t0 instanceof d._){t.next=14;break}throw t.t0;case 14:console.warn(t.t0);case 15:return t.prev=15,b.current&&y(!1),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,8,15,18]])})));return function(e){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){return function(){b.current=!1}}),[]);var w=(0,s.useRef)(null);if("button"===e.type||"icon"===e.type||"submit"===e.type){var _="icon"===e.type?"button":e.type;return(0,p.jsxs)("button",{className:(0,c.Z)("ToolIcon_type_button",f,e.className,e.visible&&!e.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!e.hidden,"ToolIcon--selected":e.selected,"ToolIcon--plain":"icon"===e.type}),"data-testid":e["data-testid"],hidden:e.hidden,title:e.title,"aria-label":e["aria-label"],type:_,onClick:x,ref:o,disabled:v||e.isLoading,children:[(e.icon||e.label)&&(0,p.jsxs)("div",{className:"ToolIcon__icon","aria-hidden":"true",children:[e.icon||e.label,e.keyBindingLabel&&(0,p.jsx)("span",{className:"ToolIcon__keybinding",children:e.keyBindingLabel}),e.isLoading&&(0,p.jsx)(h.Z,{})]}),e.showAriaLabel&&(0,p.jsxs)("div",{className:"ToolIcon__label",children:[e["aria-label"]," ",v&&(0,p.jsx)(h.Z,{})]}),e.children]})}return(0,p.jsxs)("label",{className:(0,c.Z)("ToolIcon",e.className),title:e.title,onPointerDown:function(t){var n;w.current=t.pointerType||null,null===(n=e.onPointerDown)||void 0===n||n.call(e,{pointerType:t.pointerType||null})},onPointerUp:function(){requestAnimationFrame((function(){w.current=null}))},children:[(0,p.jsx)("input",{className:"ToolIcon_type_radio ".concat(f),type:"radio",name:e.name,"aria-label":e["aria-label"],"aria-keyshortcuts":e["aria-keyshortcuts"],"data-testid":e["data-testid"],id:"".concat(n,"-").concat(e.id),onChange:function(){var t;null===(t=e.onChange)||void 0===t||t.call(e,{pointerType:w.current})},checked:e.checked,ref:o}),(0,p.jsxs)("div",{className:"ToolIcon__icon",children:[e.icon,e.keyBindingLabel&&(0,p.jsx)("span",{className:"ToolIcon__keybinding",children:e.keyBindingLabel})]})]})}));f.defaultProps={visible:!0,className:"",size:"medium"},f.displayName="ToolButton"},1894:function(e,t,n){n.d(t,{u:function(){return w},bK:function(){return b},Js:function(){return x}});var r=n(487),i=n.n(r),o=n(631),a=n.n(o),s=n(2052),l=n.n(s),c=n(4010),u=n.n(c),d=n(1469),h=n.n(d),p=n(9329),f=n.n(p),m=n(6626),g={};g.styleTagTransform=f(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=h(),i()(m.Z,g),m.Z&&m.Z.locals&&m.Z.locals;var v=n(9787),y=n(4512),b=function(){var e=document.querySelector(".excalidraw-tooltip");if(e)return e;var t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},x=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bottom",i=e.getBoundingClientRect(),o=window.innerWidth,a=window.innerHeight,s=5,l=t.left+t.width/2-i.width/2;l<0?l=s:l+i.width>=o&&(l=o-i.width-s),"bottom"===r?(n=t.top+t.height+s)+i.height>=a&&(n=t.top-i.height-s):(n=t.top-i.height-s)<0&&(n=t.top+t.height+s),Object.assign(e.style,{top:"".concat(n,"px"),left:"".concat(l,"px")})},w=function(e){var t=e.children,n=e.label,r=e.long,i=void 0!==r&&r,o=e.style;return(0,v.useEffect)((function(){return function(){return b().classList.remove("excalidraw-tooltip--visible")}}),[]),(0,y.jsx)("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:function(e){return function(e,t,n,r){t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=r?"50ch":"10ch",t.style.maxWidth=r?"50ch":"15ch",t.textContent=n;var i=e.getBoundingClientRect();x(t,i)}(e.currentTarget,b(),n,i)},onPointerLeave:function(){return b().classList.remove("excalidraw-tooltip--visible")},style:o,children:t})}},6773:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(2577),i=n(487),o=n.n(i),a=n(631),s=n.n(a),l=n(2052),c=n.n(l),u=n(4010),d=n.n(u),h=n(1469),p=n.n(h),f=n(9329),m=n.n(f),g=n(6359),v={};v.styleTagTransform=m(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=p(),o()(g.Z,v),g.Z&&g.Z.locals&&g.Z.locals;var y=n(9787),b=n.n(y),x=n(45),w=n(1894),_=n(2134),k=n(4512),E=function(e){var t=e.className,n=e.mobile,i=e.collaborators,o=(0,_.eh)(),a=new Map;i.forEach((function(e,t){a.set(e.id||t,e)}));var s=a.size>0&&Array.from(a).filter((function(e){var t=(0,r.Z)(e,2),n=(t[0],t[1]);return 0!==Object.keys(n).length})).map((function(e){var t=(0,r.Z)(e,2),i=t[0],a=t[1],s=o.renderAction("goToCollaborator",[i,a]);return n?(0,k.jsx)(w.u,{label:a.username||"Unknown user",children:s},i):(0,k.jsx)(b().Fragment,{children:s},i)}));return(0,k.jsx)("div",{className:(0,x.Z)("UserList",t,{UserList_mobile:n}),children:s})}},8888:function(e,t,n){n.d(t,{A3:function(){return h},ZC:function(){return f},R6:function(){return p}});var r=n(9787),i=n.n(r);const o=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!=typeof i)?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The destroy method will be unsupported in the future version. You should use unsubscribe function returned by subscribe. Everything will be garbage collected if store is garbage collected."),n.clear()}};return t=e(r,i,o),o},a=e=>e?o(e):o;var s=n(5668);const{useSyncExternalStoreWithSelector:l}=s,c=e=>{"function"!=typeof e&&console.warn('[DEPRECATED] Passing a vanilla store will be unsupported in the future version. Please use `import { useStore } from "zustand"` to use the vanilla store in React.');const t="function"==typeof e?a(e):e,n=(e,n)=>function(e,t=e.getState,n){const i=l(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return(0,r.useDebugValue)(i),i}(t,e,n);return Object.assign(n,t),n},u=e=>e?c(e):c;function d(){const e=u((e=>({current:new Array,version:0,set:e})));return{In:({children:t})=>{const n=e((e=>e.set)),i=e((e=>e.version));return(0,r.useLayoutEffect)((()=>{n((e=>({version:e.version+1})))}),[]),(0,r.useLayoutEffect)((()=>(n((({current:e})=>({current:[...e,t]}))),()=>n((({current:e})=>({current:e.filter((e=>e!==t))}))))),[t,i]),null},Out:()=>{const t=e((e=>e.current));return i().createElement(i().Fragment,null,t)}}}var h=i().createContext(null),p=function(){return i().useContext(h)},f=function(){return i().useMemo((function(){return{mainMenuTunnel:d(),welcomeScreenMenuHintTunnel:d(),welcomeScreenToolbarHintTunnel:d(),welcomeScreenHelpHintTunnel:d(),welcomeScreenCenterTunnel:d(),footerCenterTunnel:d(),jotaiScope:Symbol()}}),[])}},9127:function(e,t,n){n.d(t,{Z:function(){return $}});var r=n(45),i=n(2134),o=n(4512),a=function(e){var t=e.className,n=void 0===t?"":t,a=e.children,s=e.onToggle,l=(0,i.gF)(),c=(0,i.Fy)(),u=(0,r.Z)("dropdown-menu-button ".concat(n),"zen-mode-transition",{"transition-left":l.zenModeEnabled,"dropdown-menu-button--mobile":c.isMobile}).trim();return(0,o.jsx)("button",{"data-prevent-outside-click":!0,className:u,onClick:s,type:"button","data-testid":"dropdown-menu-button",children:a})},s=a;a.displayName="DropdownMenuTrigger";var l=n(2739),c=function(){return(0,o.jsx)("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}})},u=c;c.displayName="DropdownMenuSeparator";var d=function(e){var t=e.children,n=e.className,r=void 0===n?"":n,i=e.style,a=e.title;return(0,o.jsxs)("div",{className:"dropdown-menu-group ".concat(r),style:i,children:[a&&(0,o.jsx)("p",{className:"dropdown-menu-group-title",children:a}),t]})},h=d;d.displayName="DropdownMenuGroup";var p=n(1930),f=n(9787),m=n.n(f),g=n(1881),v=n(7239),y=n(6772),b=function(e){var t,n,a=e.children,s=e.onClickOutside,l=e.className,c=void 0===l?"":l,u=e.onSelect,d=e.style,h=(0,i.Fy)(),m=(t=function(){null==s||s()},n=(0,f.useRef)(null),(0,f.useEffect)((function(){var e=function(e){var r=n.current;!r||r.contains(e.target)||(0,p.Z)(document.querySelectorAll("[data-prevent-outside-click]")).some((function(t){return t.contains(e.target)}))||t(e)};return document.addEventListener("pointerdown",e),document.addEventListener("touchstart",e),function(){document.removeEventListener("pointerdown",e),document.removeEventListener("touchstart",e)}}),[n,t]),n),b=(0,r.Z)("dropdown-menu ".concat(c),{"dropdown-menu--mobile":h.isMobile}).trim();return(0,o.jsx)(y.N7.Provider,{value:{onSelect:u},children:(0,o.jsx)("div",{ref:m,className:b,style:d,"data-testid":"dropdown-menu",children:h.isMobile?(0,o.jsx)(v.Z.Col,{className:"dropdown-menu-container",children:a}):(0,o.jsx)(g.W,{className:"dropdown-menu-container",padding:2,style:{zIndex:1},children:a})})})};b.displayName="DropdownMenuContent";var x=b,w=n(4215),_=n(7169),k=n(2726),E=["children","className"];function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,_.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){var t=e.children,n=e.className,r=void 0===n?"":n,i=(0,k.Z)(e,E);return(0,o.jsx)("div",C(C({},i),{},{className:"dropdown-menu-item-base dropdown-menu-item-custom ".concat(r).trim(),children:t}))},M=n(487),I=n.n(M),O=n(631),A=n.n(O),P=n(2052),D=n.n(P),L=n(4010),R=n.n(L),z=n(1469),j=n.n(z),N=n(9329),B=n.n(N),F=n(7399),V={};V.styleTagTransform=B(),V.setAttributes=R(),V.insert=D().bind(null,"head"),V.domAPI=A(),V.insertStyleElement=j(),I()(F.Z,V),F.Z&&F.Z.locals&&F.Z.locals;var U=function(e){var t=e.children,n=e.open,r=function(e){return m().Children.toArray(e).find((function(e){return m().isValidElement(e)&&"string"!=typeof e.type&&(null==e?void 0:e.type.displayName)&&"DropdownMenuTrigger"===e.type.displayName}))||null}(t),i=function(e){return m().Children.toArray(e).find((function(e){return m().isValidElement(e)&&"string"!=typeof e.type&&(null==e?void 0:e.type.displayName)&&"DropdownMenuContent"===e.type.displayName}))||null}(t);return(0,o.jsxs)(o.Fragment,{children:[r,n&&i]})};U.Trigger=s,U.Content=x,U.Item=l.Z,U.ItemLink=w.Z,U.ItemCustom=T,U.Group=h,U.Separator=u;var $=U;U.displayName="DropdownMenu"},2739:function(e,t,n){var r=n(7169),i=n(2726),o=n(6772),a=n(4122),s=n(4512),l=["icon","onSelect","children","shortcut","className"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){var t,n=e.icon,r=e.onSelect,c=e.children,d=e.shortcut,h=e.className,p=(0,i.Z)(e,l),f=(0,o.qZ)(p.onClick,r);return(0,s.jsx)("button",u(u({},p),{},{onClick:f,type:"button",className:(0,o.n)(h),title:null!==(t=p.title)&&void 0!==t?t:p["aria-label"],children:(0,s.jsx)(a.Z,{icon:n,shortcut:d,children:c})}))};t.Z=d,d.displayName="DropdownMenuItem"},4122:function(e,t,n){var r=n(2134),i=n(4512);t.Z=function(e){var t=e.icon,n=e.shortcut,o=e.children,a=(0,r.Fy)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"dropdown-menu-item__icon",children:t}),(0,i.jsx)("div",{className:"dropdown-menu-item__text",children:o}),n&&!a.isMobile&&(0,i.jsx)("div",{className:"dropdown-menu-item__shortcut",children:n})]})}},4215:function(e,t,n){var r=n(7169),i=n(2726),o=n(4122),a=n(6772),s=n(4512),l=["icon","shortcut","href","children","onSelect","className"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){var t,n=e.icon,r=e.shortcut,c=e.href,d=e.children,h=e.onSelect,p=e.className,f=void 0===p?"":p,m=(0,i.Z)(e,l),g=(0,a.qZ)(m.onClick,h);return(0,s.jsx)("a",u(u({},m),{},{href:c,target:"_blank",rel:"noreferrer",className:(0,a.n)(f),title:null!==(t=m.title)&&void 0!==t?t:m["aria-label"],onClick:g,children:(0,s.jsx)(o.Z,{icon:n,shortcut:r,children:d})}))};t.Z=d,d.displayName="DropdownMenuItemLink"},6772:function(e,t,n){n.d(t,{N7:function(){return s},n:function(){return l},qZ:function(){return c}});var r=n(9787),i=n.n(r),o=n(2335),a=n(6340),s=i().createContext({}),l=function(){return"dropdown-menu-item dropdown-menu-item-base ".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim()},c=function(e,t){var n=(0,r.useContext)(s);return(0,a.Mj)(e,(function(e){var r,i=new CustomEvent(o.Ks.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});null==t||t(i),i.defaultPrevented||null===(r=n.onSelect)||void 0===r||r.call(n,i)}))}},3646:function(e,t,n){n.d(t,{$c:function(){return se},$q:function(){return N},BF:function(){return Ce},BR:function(){return re},Ct:function(){return me},D7:function(){return Y},DG:function(){return ie},DJ:function(){return C},DS:function(){return Ve},EO:function(){return nt},ET:function(){return K},FC:function(){return k},Gc:function(){return he},HL:function(){return ge},Hk:function(){return at},Hy:function(){return W},IN:function(){return pe},J8:function(){return oe},Mw:function(){return T},NA:function(){return U},NW:function(){return Z},Nw:function(){return ot},OA:function(){return Ye},OW:function(){return I},P7:function(){return it},Pm:function(){return R},RJ:function(){return Te},RY:function(){return H},Re:function(){return A},ST:function(){return we},Sd:function(){return B},TP:function(){return ae},Tl:function(){return ne},Tw:function(){return Ee},UE:function(){return le},VL:function(){return z},Vl:function(){return ue},Vq:function(){return y},W2:function(){return Be},W5:function(){return xe},Wl:function(){return De},X7:function(){return Ae},XB:function(){return j},XH:function(){return V},YA:function(){return x},ZA:function(){return Pe},Zm:function(){return X},_C:function(){return _},_U:function(){return S},a0:function(){return Ie},a1:function(){return ee},a5:function(){return Re},aA:function(){return rt},aT:function(){return ze},bf:function(){return je},by:function(){return q},e0:function(){return P},eQ:function(){return J},fr:function(){return Ue},gK:function(){return _e},h0:function(){return G},il:function(){return $e},j8:function(){return We},jn:function(){return ke},kL:function(){return $},kM:function(){return Ne},lF:function(){return Me},m:function(){return He},m9:function(){return Le},mh:function(){return ye},nb:function(){return O},np:function(){return Oe},nq:function(){return Ge},o3:function(){return et},oQ:function(){return E},oT:function(){return tt},op:function(){return Se},pO:function(){return b},po:function(){return te},pw:function(){return fe},q0:function(){return qe},qQ:function(){return w},rr:function(){return Qe},t5:function(){return de},tW:function(){return Ke},tb:function(){return L},tn:function(){return Ze},uD:function(){return be},vo:function(){return Xe},wr:function(){return Fe},xL:function(){return F},xP:function(){return Q},xs:function(){return ve},z6:function(){return Je},zG:function(){return ce},zb:function(){return D},zu:function(){return M}});var r=n(7169),i=n(2726),o=n(9787),a=n.n(o),s=n(5284),l=n(45),c=n(2335),u=n(4512),d=["width","height","mirror","style"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){return e===c.C6.LIGHT?s.white:"#1e1e1e"},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512,n="number"==typeof t?{width:t}:t,r=n.width,o=void 0===r?512:r,a=n.height,s=void 0===a?o:a,c=n.mirror,h=n.style,f=(0,i.Z)(n,d);return(0,u.jsx)("svg",p(p({"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 ".concat(o," ").concat(s),className:(0,l.Z)({"rtl-mirror":c}),style:h},f),{},{children:"string"==typeof e?(0,u.jsx)("path",{fill:"currentColor",d:e}):e}))},g={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},v={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},y=(m((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("rect",{x:3,y:8,width:18,height:4,rx:1}),(0,u.jsx)("line",{x1:12,y1:8,x2:12,y2:21}),(0,u.jsx)("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),(0,u.jsx)("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),g),m((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),(0,u.jsx)("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),(0,u.jsx)("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),(0,u.jsx)("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),(0,u.jsx)("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),g)),b=m((0,u.jsxs)("svg",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,u.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),g),x=m((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,u.jsx)("circle",{cx:"12",cy:"19",r:"1"}),(0,u.jsx)("circle",{cx:"12",cy:"5",r:"1"})]}),g),w=m((0,u.jsxs)("svg",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),(0,u.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),(0,u.jsx)("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),g),_=m((0,u.jsxs)("g",{children:[(0,u.jsx)("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,u.jsx)("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,u.jsx)("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:(0,u.jsx)("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),(0,u.jsx)("g",{mask:"url(#UnlockedIcon)",children:(0,u.jsx)("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),v),k=m((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),(0,u.jsx)("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),(0,u.jsx)("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),v),E=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),(0,u.jsx)("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),S=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),(0,u.jsx)("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),C=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),(0,u.jsx)("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"}),T=m((0,u.jsxs)("g",{fill:"currentColor",children:[(0,u.jsx)("path",{d:"M24.296 12.214c0 .112-.134.224-.291.224-.135 0-.516.629-.808 1.392-.897 2.335-9.867 20.096-9.89 19.534 0-.292-.134-.494-.359-.494-.313 0-.358.18-.224 1.055.135 1.01.045 1.236-3.14 7.432-1.793 3.525-3.722 7.208-4.282 8.196-.584 1.032-1.032 2.155-1.077 2.626-.067.809.022.92 1.973 2.605 1.122.988 2.557 2.223 3.185 2.784 2.826 2.582 4.149 3.615 4.508 3.547.538-.09 8.858-8.823 8.88-9.317 0-.225-.403-3.638-.897-7.59-.852-6.735-1.66-14.616-1.57-15.38.068-.47-.269-2.85-.516-3.884-.201-.808-.112-1.145 1.503-4.827.942-2.178 2.176-4.85 2.714-5.928.515-1.077.964-2.02.964-2.088 0-.067-.157-.112-.336-.112-.18 0-.337.09-.337.225Zm-5.158 16.772c.247 1.572.74 5.344 1.099 8.375.695 5.568 1.503 11.742 1.727 13.314.135.786.045.943-1.413 2.56-2.534 2.851-5.225 5.658-6.145 6.376l-.852.674-4.373-4.086c-4.037-3.728-4.373-4.11-4.127-4.558a5154.2 5154.2 0 0 1 2.535-4.626 727.864 727.864 0 0 0 3.678-6.78c.784-1.46 1.502-2.717 1.637-2.785.156-.09.201 2.178.156 7.006-.09 7.207-.067 7.23.651 7.072.09 0 .157-3.637.157-8.06V35.43l2.355-4.715c1.3-2.605 2.377-4.693 2.422-4.67.045.022.27 1.347.493 2.94ZM9.562 1.818C7.903 3.143 5.346 5.388 3.328 7.32L1.735 8.823l.292 1.976c.157 1.078.449 3.188.628 4.67.202 1.482.404 2.874.47 3.077.09.269 0 .404-.246.404-.426 0-.449-.113.718 3.592.286.952.577 1.903.875 2.851.044.158.224.225.425.158.202-.09.314-.27.247-.427-.067-.18.045-.36.224-.427.247-.09.225-.269-.157-.92-.605-1.01-2.152-9.633-2.242-12.416-.067-1.976-.067-1.999.762-3.121.808-1.1 2.67-2.762 5.54-4.873.807-.605 1.614-1.28 1.839-1.504.336-.404.493-.292 3.319 2.717 1.637 1.729 3.453 3.502 4.037 3.952l1.076.808-.83 1.75c-.448.944-2.265 4.581-4.059 8.04-3.745 7.274-2.983 6.578-7.333 6.645l-2.826.023-.942 1.077c-.987 1.146-1.121 1.572-.65 2.29.18.248.313.652.313.898 0 .405.157.472 1.055.517.56.023 1.076.09 1.144.157.067.068.156 1.46.224 3.098l.09 2.965-1.503 3.232C1.735 45.422.749 47.891.749 48.7c0 .427.09.786.18.786.224 0 .224-.022 9.35-19.085a4398.495 4398.495 0 0 1 8.927-18.546c.672-1.369 1.278-2.626 1.323-2.806.045-.202-1.503-1.751-3.97-3.93-2.22-1.975-4.171-3.772-4.35-3.974-.516-.628-1.279-.426-2.647.674ZM8.441 31.231c-.18.472-.65 1.46-1.031 2.2-.629 1.258-.696 1.303-.853.786-.09-.314-.157-1.235-.18-2.066-.022-1.639-.067-1.616 1.817-1.728L8.8 30.4l-.358.831Zm1.884-3.592c-1.032 1.998-1.077 2.02-3.903 2.155-2.489.135-2.533.112-2.533-.36 0-.269-.09-.628-.203-.808-.134-.202-.044-.56.27-1.055l.493-.763H6.69c1.234-.023 2.647-.113 3.14-.202.494-.09.92-.135.965-.113.045.023-.18.54-.471 1.146Zm-.09-20.477c-.404.292-.516.584-.516 1.325 0 .875.067 1.01.673 1.257.605.247.763.224 1.458-.247.92-.629.941-.786.269-1.796-.583-.876-1.166-1.033-1.884-.54Z"}),(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.703 11.793c.166-.291.501-.514.93-.514.38 0 .698.161.82.283.161.162.225.35.225.54a.822.822 0 0 1-.056.289c-.08.218-.5 1.106-.983 2.116-.535 1.071-1.76 3.727-2.699 5.895-.79 1.802-1.209 2.784-1.404 3.416-.142.461-.132.665-.058.961.264 1.103.6 3.647.53 4.132-.088.756.727 8.547 1.57 15.21.5 3.997.903 7.45.903 7.676l-.001.033c-.004.087-.041.288-.211.54-.24.354-.914 1.143-1.8 2.119-2.004 2.21-5.107 5.423-6.463 6.653-.322.292-.566.485-.696.56a.884.884 0 0 1-.289.111c-.194.037-.579-.007-1.11-.349-.707-.453-1.981-1.522-4-3.366-.627-.561-2.061-1.794-3.176-2.776-.81-.699-1.308-1.138-1.612-1.466-.32-.343-.47-.61-.549-.87-.078-.257-.085-.515-.055-.874.05-.52.521-1.769 1.166-2.91.559-.985 2.48-4.654 4.269-8.17 1.579-3.071 2.392-4.663 2.792-5.612.32-.759.329-1 .277-1.387-.085-.553-.092-.891-.052-1.092a.942.942 0 0 1 .274-.52c.164-.157.384-.261.704-.261.094 0 .184.011.27.033 1.924-3.44 8.554-16.632 9.316-18.616.276-.724.64-1.336.848-1.556a.965.965 0 0 1 .32-.228Zm-5.399 16.402c-.49.942-.971 1.888-1.446 2.837l-2.28 4.565v7.871c0 4.023-.06 7.404-.136 8.04-.067.552-.474.691-.654.722l.075-.008c-.317.07-.574.063-.778-.023-.234-.098-.5-.297-.63-.857-.156-.681-.158-2.462-.103-6.893.019-2.022.022-3.592.008-4.725-.156.276-.315.562-.467.843a737.624 737.624 0 0 1-3.682 6.79 3618.972 3618.972 0 0 0-2.462 4.493c.062.088.169.231.289.364.55.61 1.631 1.623 3.624 3.462l3.931 3.674.377-.298c.907-.709 3.554-3.479 6.055-6.293.425-.47.73-.814.946-1.084.175-.22.28-.36.319-.501.031-.117.002-.227-.024-.379l-.004-.02c-.224-1.572-1.032-7.753-1.728-13.33-.358-3.022-.85-6.782-1.096-8.349l-.002-.01c-.042-.301-.087-.603-.132-.891ZM9.118 1.264C9.91.628 10.537.27 11.028.144c.727-.186 1.27.003 1.713.53.186.209 2.107 1.972 4.287 3.912 2.02 1.783 3.434 3.16 3.897 3.743.326.41.322.756.296.873a1.046 1.046 0 0 1-.005.018c-.047.188-.669 1.512-1.374 2.947a4348.55 4348.55 0 0 0-8.923 18.54c-7.335 15.32-8.808 18.396-9.217 19.015-.235.355-.419.404-.525.437a.815.815 0 0 1-.249.036.745.745 0 0 1-.647-.363C.176 49.67.04 49.222.04 48.7c0-.286.09-.754.316-1.434.452-1.356 1.466-3.722 3.225-7.53l1.432-3.083-.084-2.787a72.902 72.902 0 0 0-.156-2.53 7.307 7.307 0 0 0-.539-.046c-.463-.024-.764-.062-.96-.124-.304-.096-.48-.252-.598-.438-.105-.165-.17-.374-.17-.663 0-.134-.081-.348-.178-.481l-.019-.028c-.293-.448-.406-.831-.373-1.234.04-.484.34-1.052 1.08-1.91l.759-.869c-.103-.325-.471-1.513-.854-2.787-.737-2.339-1.004-3.238-1.018-3.578-.016-.393.134-.59.27-.715a.721.721 0 0 1 .192-.125 89.87 89.87 0 0 1-.414-2.782 231.651 231.651 0 0 0-.625-4.652l-.292-1.976a.71.71 0 0 1 .215-.62l1.589-1.501C4.87 4.86 7.446 2.599 9.118 1.264Zm-1.833 33.75a.819.819 0 0 1-.406.208.73.73 0 0 1-.491-.063l.048 1.618v.009l.849-1.773Zm5.874.697c-.035.087-.07.175-.107.261a20.92 20.92 0 0 1-.36.798.688.688 0 0 1 .457.007l.01.004v-1.07Zm.72-1.892-.015.018a.745.745 0 0 1-.407.236c.02.195.027.378 0 .592l.422-.846ZM7.7 31.175c-.268.027-.489.055-.6.07-.006.056-.013.13-.016.194-.005.19 0 .42.004.694.003.111.006.225.011.338.232-.471.459-.956.6-1.296Zm2.12-1.456a2.04 2.04 0 0 1-.415.31c.064.104.099.222.104.341l.132-.277.18-.374Zm-.14-2.374c-.654.079-1.882.153-2.974.173h-1.87l-.281.435c-.09.141-.17.331-.203.414.102.21.189.508.226.788h.007c.364.006.928-.023 1.805-.07 1.243-.06 1.88-.052 2.315-.291.154-.086.266-.215.387-.393.176-.261.354-.605.587-1.056Zm2.136-1.784c-.157.16-.331.3-.52.422a.631.631 0 0 1 .182.281l.337-.703Zm7.205-1.478c-.222.442-.445.883-.667 1.32a.787.787 0 0 1 .61.007c.036.018.145.07.243.2-.032-.165-.067-.33-.105-.493-.088-.351-.137-.633-.08-1.034h-.001ZM11.415 2.546c-.358.319-1.039.879-1.725 1.394C6.903 5.989 5.087 7.59 4.301 8.662c-.28.38-.458.605-.556.852-.15.38-.103.798-.068 1.824.063 1.923.833 6.669 1.493 9.686.262 1.199.483 2.11.654 2.394.25.426.364.71.398.894a.923.923 0 0 1-.184.764l1.27-.01c.863-.014 1.523.003 2.056-.019.424-.017.75-.052 1.034-.187.336-.159.596-.458.921-.955.62-.948 1.373-2.515 2.705-5.103 1.789-3.448 3.6-7.076 4.047-8.015l.582-1.227-.62-.466c-.595-.458-2.45-2.263-4.12-4.027a59.654 59.654 0 0 0-2.498-2.52ZM5.81 24.876v-.001l-.013-.03.013.031Zm-.71-.835.027-.011a.55.55 0 0 0-.028.011Zm19.904-11.777v.01-.01Zm.002-.016v-.034.034ZM9.82 6.587c-.587.424-.81.823-.81 1.9 0 .787.12 1.157.344 1.42.158.186.388.339.77.494.352.144.603.207.838.209.347.002.688-.12 1.285-.525.707-.483.98-.864 1.036-1.238.052-.352-.09-.812-.574-1.54-.412-.619-.853-.95-1.29-1.072-.489-.139-1.016-.05-1.586.342l-.013.01Zm2.015 2.028a6.288 6.288 0 0 0-.306-.52c-.19-.284-.326-.488-.531-.5-.113-.007-.224.058-.352.146-.218.159-.218.34-.218.745 0 .198.02.419.028.504.047.025.133.068.204.097.133.054.222.102.312.103.04 0 .071-.027.12-.054a4.29 4.29 0 0 0 .358-.225c.147-.1.299-.223.385-.296ZM9.12 1.263l-.002.002.002-.002Z"})]}),{width:26,height:62,fill:"none"}),M=m((0,u.jsxs)("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),(0,u.jsx)("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),I=m((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),g),O=m((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),g),A=m((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("circle",{cx:"12",cy:"12",r:"9"})]}),g),P=m((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),(0,u.jsx)("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),(0,u.jsx)("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),g),D=m((0,u.jsx)("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),v),L=m((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),(0,u.jsx)("path",{d:"M16 7h4"}),(0,u.jsx)("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),g),R=m((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),(0,u.jsx)("path",{d:"m11.25 5.417 3.333 3.333"})]}),v),z=m((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),(0,u.jsx)("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),(0,u.jsx)("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),(0,u.jsx)("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),(0,u.jsx)("polyline",{points:"5 20 11 4 13 4 20 20"})]}),g),j=m((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M12.5 6.667h.01"}),(0,u.jsx)("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),(0,u.jsx)("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),(0,u.jsx)("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),v),N=m((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),(0,u.jsx)("path",{d:"M18 13.3l-6.3 -6.3"})]}),g),B=m((0,u.jsx)("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),v),F=m((0,u.jsx)("path",{d:"M5 10h10",strokeWidth:"1.25"}),v),V=m((0,u.jsx)("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),v),U=m((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),(0,u.jsx)("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),v),$=m((0,u.jsx)("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),v),Z=m((0,u.jsx)("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:(0,u.jsx)("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),v),H=m((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),(0,u.jsx)("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),(0,u.jsx)("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),g),W=m((0,u.jsx)("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),v),q=m((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("circle",{cx:"12",cy:"12",r:"9"}),(0,u.jsx)("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),(0,u.jsx)("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),g),G=m((0,u.jsx)("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),v),K=m((0,u.jsx)("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),v),Y=m((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),(0,u.jsx)("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),v),X=m((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z"})]}),g),J=m((0,u.jsx)("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),Q=m((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),(0,u.jsx)("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),v),ee=m("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),te=m("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),ne=m((0,u.jsx)("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),v),re=m("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512}),ie=m("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),oe=m((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M15 8h.01"}),(0,u.jsx)("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),(0,u.jsx)("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),(0,u.jsx)("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),(0,u.jsx)("path",{d:"M19 16v6"}),(0,u.jsx)("path",{d:"M22 19l-3 3l-3 -3"})]}),g),ae=m("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512}),se=(m("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512}),m("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512}),m("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z")),le=(m("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"),m((0,u.jsx)("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),v)),ce=m((0,u.jsx)("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),v),ue=m("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0}),de=(m((0,u.jsx)("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),v),m("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24}),m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),(0,u.jsx)("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64}),m((0,u.jsx)("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024}),m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{d:"M13.889 4.167H8.333c-.767 0-1.389.622-1.389 1.389v5.555c0 .767.622 1.389 1.39 1.389h5.555c.767 0 1.389-.622 1.389-1.389V5.556c0-.767-.622-1.39-1.39-1.39Z",fill:"currentColor"}),(0,u.jsx)("path",{d:"M12.5 12.5v1.389a1.389 1.389 0 0 1-1.389 1.389H5.556a1.389 1.389 0 0 1-1.39-1.39V8.334a1.389 1.389 0 0 1 1.39-1.389h1.388"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v)),he=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.944 12.5H12.5v1.389a1.389 1.389 0 0 1-1.389 1.389H5.556a1.389 1.389 0 0 1-1.39-1.39V8.334a1.389 1.389 0 0 1 1.39-1.389h1.388",fill:"currentColor"}),(0,u.jsx)("path",{d:"M13.889 4.167H8.333c-.767 0-1.389.621-1.389 1.389v5.555c0 .767.622 1.389 1.39 1.389h5.555c.767 0 1.389-.622 1.389-1.389V5.556c0-.768-.622-1.39-1.39-1.39Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v),pe=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M8.775 6.458h2.45a2.316 2.316 0 0 1 2.317 2.316v2.452a2.316 2.316 0 0 1-2.316 2.316H8.774a2.316 2.316 0 0 1-2.317-2.316V8.774a2.316 2.316 0 0 1 2.317-2.316Z",fill:"currentColor"}),(0,u.jsx)("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316ZM12.108 3.125h2.45a2.316 2.316 0 0 1 2.317 2.316v2.451a2.316 2.316 0 0 1-2.316 2.316h-2.451a2.316 2.316 0 0 1-2.316-2.316v-2.45a2.316 2.316 0 0 1 2.316-2.317Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v),fe=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",children:[(0,u.jsx)("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,u.jsx)("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,u.jsx)("mask",{id:"SendToBackIcon",fill:"#fff",children:(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.167 5.833v2.06a2.941 2.941 0 0 0 2.94 2.94h2.06v.393a2.941 2.941 0 0 1-2.941 2.94h-.393v-2.058a2.941 2.941 0 0 0-2.94-2.941h-2.06v-.393a2.941 2.941 0 0 1 2.942-2.94h.392Z"})}),(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.167 5.833v2.06a2.941 2.941 0 0 0 2.94 2.94h2.06v.393a2.941 2.941 0 0 1-2.941 2.94h-.393v-2.058a2.941 2.941 0 0 0-2.94-2.941h-2.06v-.393a2.941 2.941 0 0 1 2.942-2.94h.392Z",fill:"currentColor"}),(0,u.jsx)("path",{d:"M9.167 5.833h1.25v-1.25h-1.25v1.25Zm5 5h1.25v-1.25h-1.25v1.25Zm-3.334 3.334h-1.25v1.25h1.25v-1.25Zm-5-5h-1.25v1.25h1.25v-1.25Zm2.084-3.334v2.06h2.5v-2.06h-2.5Zm0 2.06a4.191 4.191 0 0 0 4.19 4.19v-2.5a1.691 1.691 0 0 1-1.69-1.69h-2.5Zm4.19 4.19h2.06v-2.5h-2.06v2.5Zm.81-1.25v.393h2.5v-.393h-2.5Zm0 .393c0 .933-.758 1.69-1.691 1.69v2.5a4.191 4.191 0 0 0 4.19-4.19h-2.5Zm-1.691 1.69h-.393v2.5h.393v-2.5Zm.857 1.25v-2.058h-2.5v2.059h2.5Zm0-2.058a4.191 4.191 0 0 0-4.19-4.191v2.5c.933 0 1.69.757 1.69 1.69h2.5Zm-4.19-4.191h-2.06v2.5h2.06v-2.5Zm-.81 1.25v-.393h-2.5v.393h2.5Zm0-.393c0-.934.758-1.69 1.692-1.69v-2.5a4.191 4.191 0 0 0-4.192 4.19h2.5Zm1.692-1.69h.392v-2.5h-.392v2.5Z",fill:"currentColor",mask:"url(#SendToBackIcon)"}),(0,u.jsx)("path",{d:"M12.108 3.125h2.45a2.316 2.316 0 0 1 2.317 2.316v2.451a2.316 2.316 0 0 1-2.316 2.316h-2.451a2.316 2.316 0 0 1-2.316-2.316v-2.45a2.316 2.316 0 0 1 2.316-2.317Z",stroke:"currentColor",strokeWidth:"1.25"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v),me=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v),ge=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v),ve=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v),ye=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v),be=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v),xe=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v),we=m((0,u.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),v),_e=m((0,u.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),v),ke=m((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,u.jsx)("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),(0,u.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),(0,u.jsx)("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),g),Ee=(m("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"),m("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z"),m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:(0,u.jsx)("path",{d:"M15 5 5 15M5 5l10 10"})}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v)),Se=m("M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z",{width:320,height:512,style:{marginLeft:"-0.2rem"},mirror:!0}),Ce=(m("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0}),m("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24}),m("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512}),a().memo((function(e){var t=e.theme;return m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{d:"M25 26H111V111H25",fill:"var(--icon-fill-color)"}),(0,u.jsx)("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:"var(--icon-fill-color)",strokeWidth:"2"}),(0,u.jsx)("path",{d:"M100 100H160V160H100",fill:"var(--icon-fill-color)"}),(0,u.jsx)("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:"var(--icon-fill-color)",strokeWidth:"2"}),(0,u.jsxs)("g",{fill:f(t),stroke:"var(--icon-fill-color)",strokeWidth:"6",children:[(0,u.jsx)("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})}))),Te=a().memo((function(e){var t=e.theme;return m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{d:"M25 26H111V111H25",fill:"var(--icon-fill-color)"}),(0,u.jsx)("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:"var(--icon-fill-color)",strokeWidth:"2"}),(0,u.jsx)("path",{d:"M100 100H160V160H100",fill:"var(--icon-fill-color)"}),(0,u.jsx)("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:"var(--icon-fill-color)",strokeWidth:"2"}),(0,u.jsxs)("g",{fill:f(t),stroke:"var(--icon-fill-color)",strokeWidth:"6",children:[(0,u.jsx)("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})})),Me=m((0,u.jsx)("g",{strokeWidth:1.25,children:(0,u.jsx)("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),v),Ie=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,u.jsx)("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:(0,u.jsx)("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),(0,u.jsx)("g",{mask:"url(#FillHachureIcon)",children:(0,u.jsx)("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),v),Oe=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",children:[(0,u.jsx)("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,u.jsx)("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:(0,u.jsx)("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,u.jsx)("g",{mask:"url(#FillCrossHatchIcon)",children:(0,u.jsx)("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v),Ae=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("g",{clipPath:"url(#a)",children:(0,u.jsx)("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),p(p({},v),{},{fill:"currentColor"})),Pe=m((0,u.jsx)(u.Fragment,{children:(0,u.jsx)("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),v),De=m((0,u.jsx)("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),v),Le=m((0,u.jsx)("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),v),Re=m((0,u.jsxs)("g",{strokeWidth:"2",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M5 12h2"}),(0,u.jsx)("path",{d:"M17 12h2"}),(0,u.jsx)("path",{d:"M11 12h2"})]}),g),ze=m((0,u.jsxs)("g",{strokeWidth:"2",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M4 12v.01"}),(0,u.jsx)("path",{d:"M8 12v.01"}),(0,u.jsx)("path",{d:"M12 12v.01"}),(0,u.jsx)("path",{d:"M16 12v.01"}),(0,u.jsx)("path",{d:"M20 12v.01"})]}),g),je=m((0,u.jsx)("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),v),Ne=m((0,u.jsx)("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),v),Be=m((0,u.jsx)("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),v),Fe=m((0,u.jsxs)("svg",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),(0,u.jsx)("path",{d:"M13.3333 3.33331V3.34331"}),(0,u.jsx)("path",{d:"M16.6667 3.33331V3.34331"}),(0,u.jsx)("path",{d:"M16.6667 6.66669V6.67669"}),(0,u.jsx)("path",{d:"M16.6667 10V10.01"}),(0,u.jsx)("path",{d:"M3.33334 13.3333V13.3433"}),(0,u.jsx)("path",{d:"M16.6667 13.3333V13.3433"}),(0,u.jsx)("path",{d:"M3.33334 16.6667V16.6767"}),(0,u.jsx)("path",{d:"M6.66666 16.6667V16.6767"}),(0,u.jsx)("path",{d:"M10 16.6667V16.6767"}),(0,u.jsx)("path",{d:"M13.3333 16.6667V16.6767"}),(0,u.jsx)("path",{d:"M16.6667 16.6667V16.6767"})]}),v),Ve=m((0,u.jsxs)("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),(0,u.jsx)("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),(0,u.jsx)("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),(0,u.jsx)("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),(0,u.jsx)("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),(0,u.jsx)("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),(0,u.jsx)("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),(0,u.jsx)("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),(0,u.jsx)("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),(0,u.jsx)("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),(0,u.jsx)("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),(0,u.jsx)("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),g),Ue=m((0,u.jsx)("path",{d:"M6 10H34",stroke:"currentColor",strokeWidth:2,fill:"none"}),{width:40,height:20}),$e=a().memo((function(e){var t=e.flip,n=void 0!==t&&t;return m((0,u.jsxs)("g",{transform:n?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[(0,u.jsx)("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),(0,u.jsx)("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})})),Ze=a().memo((function(e){var t=e.flip,n=void 0!==t&&t;return m((0,u.jsxs)("g",{stroke:"currentColor",fill:"currentColor",transform:n?"translate(40, 0) scale(-1, 1)":"",children:[(0,u.jsx)("path",{d:"M32 10L6 10",strokeWidth:2}),(0,u.jsx)("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})})),He=a().memo((function(e){var t=e.flip,n=void 0!==t&&t;return m((0,u.jsx)("g",{transform:n?"translate(40, 0) scale(-1, 1)":"",children:(0,u.jsx)("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})})),We=a().memo((function(e){var t=e.flip,n=void 0!==t&&t;return m((0,u.jsxs)("g",{stroke:"currentColor",fill:"currentColor",transform:n?"translate(40, 0) scale(-1, 1)":"",children:[(0,u.jsx)("path",{d:"M32 10L6 10",strokeWidth:2}),(0,u.jsx)("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})})),qe=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("g",{clipPath:"url(#a)",children:(0,u.jsx)("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v),Ge=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("g",{clipPath:"url(#a)",children:(0,u.jsx)("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v),Ke=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("g",{clipPath:"url(#a)",children:(0,u.jsx)("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v),Ye=m((0,u.jsx)(u.Fragment,{children:(0,u.jsx)("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),v),Xe=m((0,u.jsx)(u.Fragment,{children:(0,u.jsx)("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:(0,u.jsx)("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),v),Je=m((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:(0,u.jsx)("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),v),Qe=m((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),(0,u.jsx)("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),(0,u.jsx)("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),g),et=m((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),(0,u.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),(0,u.jsx)("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),g),tt=m((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),(0,u.jsx)("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),(0,u.jsx)("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),g),nt=a().memo((function(e){return e.theme,m((0,u.jsxs)("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),(0,u.jsx)("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),g)})),rt=a().memo((function(e){return e.theme,m((0,u.jsxs)("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),(0,u.jsx)("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),g)})),it=a().memo((function(e){return e.theme,m((0,u.jsxs)("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),(0,u.jsx)("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),(0,u.jsx)("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),g)})),ot=m((0,u.jsx)("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512}),at=(m((0,u.jsx)("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"})),m((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),(0,u.jsx)("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),(0,u.jsx)("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),(0,u.jsx)("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),g))},4709:function(e,t,n){n.d(t,{Z:function(){return ee}});var r={};n.r(r),n.d(r,{ChangeCanvasBackground:function(){return j},ClearCanvas:function(){return R},Export:function(){return N},Help:function(){return L},LiveCollaborationTrigger:function(){return F},LoadScene:function(){return A},SaveAsImage:function(){return D},SaveToActiveFile:function(){return P},Socials:function(){return B},ToggleTheme:function(){return z}});var i=n(2134),o=n(9127),a=n(785),s=n(8211),l=n(3646),c=n(2739),u=n(4215),d=n(6710),h=n(487),p=n.n(h),f=n(631),m=n.n(f),g=n(2052),v=n.n(g),y=n(4010),b=n.n(y),x=n(1469),w=n.n(x),_=n(9329),k=n.n(_),E=n(4343),S={};S.styleTagTransform=k(),S.setAttributes=b(),S.insert=v().bind(null,"head"),S.domAPI=m(),S.insertStyleElement=w(),p()(E.Z,S),E.Z&&E.Z.locals&&E.Z.locals;var C=n(45),T=n(4739),M=n(6798),I=n(9487),O=n(4512),A=function(){var e=(0,s.QT)().t,t=(0,i.eh)();return t.isActionEnabled(d._d)?(0,O.jsx)(c.Z,{icon:l.Tl,onSelect:function(){return t.executeAction(d._d)},"data-testid":"load-button",shortcut:(0,a.C)("loadScene"),"aria-label":e("buttons.load"),children:e("buttons.load")}):null};A.displayName="LoadScene";var P=function(){var e=(0,s.QT)().t,t=(0,i.eh)();return t.isActionEnabled(d.ns)?(0,O.jsx)(c.Z,{shortcut:(0,a.C)("saveScene"),"data-testid":"save-button",onSelect:function(){return t.executeAction(d.ns)},icon:l.a1,"aria-label":"".concat(e("buttons.save")),children:"".concat(e("buttons.save"))}):null};P.displayName="SaveToActiveFile";var D=function(){var e=(0,i.n9)(),t=(0,s.QT)().t;return(0,O.jsx)(c.Z,{icon:l.J8,"data-testid":"image-export-button",onSelect:function(){return e({openDialog:"imageExport"})},shortcut:(0,a.C)("imageExport"),"aria-label":t("buttons.exportImage"),children:t("buttons.exportImage")})};D.displayName="SaveAsImage";var L=function(){var e=(0,s.QT)().t,t=(0,i.eh)();return(0,O.jsx)(c.Z,{"data-testid":"help-menu-item",icon:l.by,onSelect:function(){return t.executeAction(d.jY)},shortcut:"?","aria-label":e("helpDialog.title"),children:e("helpDialog.title")})};L.displayName="Help";var R=function(){var e=(0,s.QT)().t,t=(0,T.b9)(M.w,I.yE);return(0,i.eh)().isActionEnabled(d.mo)?(0,O.jsx)(c.Z,{icon:l.XH,onSelect:function(){return t("clearCanvas")},"data-testid":"clear-canvas-button","aria-label":e("buttons.clearReset"),children:e("buttons.clearReset")}):null};R.displayName="ClearCanvas";var z=function(){var e=(0,s.QT)().t,t=(0,i.gF)(),n=(0,i.eh)();return n.isActionEnabled(d.Zp)?(0,O.jsx)(c.Z,{onSelect:function(e){return e.preventDefault(),n.executeAction(d.Zp)},icon:"dark"===t.theme?l.NW:l.kL,"data-testid":"toggle-dark-mode",shortcut:(0,a.C)("toggleTheme"),"aria-label":"dark"===t.theme?e("buttons.lightMode"):e("buttons.darkMode"),children:"dark"===t.theme?e("buttons.lightMode"):e("buttons.darkMode")}):null};z.displayName="ToggleTheme";var j=function(){var e=(0,s.QT)().t,t=(0,i.gF)(),n=(0,i.eh)();return t.viewModeEnabled?null:(0,O.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,O.jsx)("div",{style:{fontSize:".75rem",marginBottom:".5rem"},children:e("labels.canvasBackground")}),(0,O.jsx)("div",{style:{padding:"0 0.625rem"},children:n.renderAction("changeViewBackgroundColor")})]})};j.displayName="ChangeCanvasBackground";var N=function(){var e=(0,s.QT)().t,t=(0,i.n9)();return(0,O.jsx)(c.Z,{icon:l.Hy,onSelect:function(){t({openDialog:"jsonExport"})},"data-testid":"json-export-button","aria-label":e("buttons.export"),children:e("buttons.export")})};N.displayName="Export";var B=function(){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(u.Z,{icon:l.ET,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),(0,O.jsx)(u.Z,{icon:l.D7,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:"Discord"}),(0,O.jsx)(u.Z,{icon:l.Zm,href:"https://twitter.com/excalidraw","aria-label":"Twitter",children:"Twitter"})]})};B.displayName="Socials";var F=function(e){var t=e.onSelect,n=e.isCollaborating,r=(0,s.QT)().t;return(0,O.jsx)(c.Z,{"data-testid":"collab-button",icon:l.jn,className:(0,C.Z)({"active-collab":n}),onSelect:t,children:r("labels.liveCollaboration")})};F.displayName="LiveCollaborationTrigger";var V=n(6773),U=n(7169),$=n(2577),Z=n(9787),H=n(8888);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var q,G,K,Y,X,J=n(6340),Q=Object.assign((q="MainMenu",G=function(e){var t=e.children,n=e.onSelect,r=(0,H.R6)().mainMenuTunnel,a=(0,i.Fy)(),c=(0,i.gF)(),u=(0,i.n9)(),d=a.isMobile?void 0:function(){return u({openMenu:null})};return(0,O.jsx)(r.In,{children:(0,O.jsxs)(o.Z,{open:"canvas"===c.openMenu,children:[(0,O.jsx)(o.Z.Trigger,{onToggle:function(){u({openMenu:"canvas"===c.openMenu?null:"canvas"})},children:l.RY}),(0,O.jsxs)(o.Z.Content,{onClickOutside:d,onSelect:(0,J.Mj)(n,(function(){u({openMenu:null})})),children:[t,a.isMobile&&c.collaborators.size>0&&(0,O.jsxs)("fieldset",{className:"UserList-Wrapper",children:[(0,O.jsx)("legend",{children:(0,s.t)("labels.collaborators")}),(0,O.jsx)(V.Z,{mobile:!0,collaborators:c.collaborators})]})]})]})})},K=(0,T.cn)(0),Y=!1,X=function(e){var t=(0,H.R6)().jotaiScope,n=(0,T.KO)(K,t),r=(0,$.Z)(n,2),i=r[0],o=r[1];return(0,Z.useLayoutEffect)((function(){return o((function(e){return e+1})),function(){o((function(e){return e-1}))}}),[o]),e.__fallback||(Y=!0),!i&&e.__fallback&&Y||i>1&&e.__fallback?null:(0,O.jsx)(G,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,U.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},X.displayName=q,X),{Trigger:o.Z.Trigger,Item:o.Z.Item,ItemLink:o.Z.ItemLink,ItemCustom:o.Z.ItemCustom,Group:o.Z.Group,Separator:o.Z.Separator,DefaultItems:r}),ee=Q},2335:function(e,t,n){n.d(t,{jo:function(){return me},iC:function(){return C},gK:function(){return be},$C:function(){return z},oc:function(){return D},_9:function(){return Ee},HN:function(){return Te},qy:function(){return pe},rk:function(){return V},n5:function(){return F},h6:function(){return fe},Rx:function(){return ke},Hg:function(){return U},cW:function(){return ie},hs:function(){return $},f:function(){return T},xY:function(){return _e},Iw:function(){return I},$e:function(){return O},Vi:function(){return R},Ks:function(){return v},r8:function(){return W},ZB:function(){return he},pb:function(){return q},ut:function(){return j},k:function(){return Z},sA:function(){return ee},LL:function(){return G},EE:function(){return ue},qx:function(){return M},$n:function(){return ge},zK:function(){return de},LO:function(){return H},Zj:function(){return Q},Yx:function(){return le},sS:function(){return se},kV:function(){return ae},sk:function(){return ce},eF:function(){return oe},Oh:function(){return L},WR:function(){return Ce},a6:function(){return Se},HM:function(){return X},ay:function(){return P},hR:function(){return ve},Gj:function(){return K},I8:function(){return we},wZ:function(){return A},C6:function(){return N},ZF:function(){return te},nM:function(){return Y},ah:function(){return re},UO:function(){return ne},Kr:function(){return ye},oX:function(){return xe},_D:function(){return B},V4:function(){return J},Dt:function(){return _},jP:function(){return S},Um:function(){return x},vU:function(){return k},G6:function(){return E},ED:function(){return w}});var r=n(487),i=n.n(r),o=n(631),a=n.n(o),s=n(2052),l=n.n(s),c=n(4010),u=n.n(c),d=n(1469),h=n.n(d),p=n(9329),f=n.n(p),m=n(6464),g={};g.styleTagTransform=f(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=h(),i()(m.Z,g);var v,y=m.Z&&m.Z.locals?m.Z.locals:void 0,b=n(5284),x=/Mac|iPod|iPhone|iPad/.test(navigator.platform),w=/^Win/.test(navigator.platform),_=/\b(android)\b/i.test(navigator.userAgent),k="netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,E=!(-1!==navigator.userAgent.indexOf("Chrome"))&&-1!==navigator.userAgent.indexOf("Safari"),S=function(){var e,t;return"isBrave"===(null===(e=navigator.brave)||void 0===e||null===(t=e.isBrave)||void 0===t?void 0:t.name)},C="Excalidraw",T=10,M=8,I=5,O=1,A=30,P=Math.PI/12,D={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},L={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1};!function(e){e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.EXCALIDRAW_LINK="excalidraw-link",e.MENU_ITEM_SELECT="menu.itemSelect"}(v||(v={}));var R={TEST:"test",DEVELOPMENT:"development"},z={SHAPE_ACTIONS_MENU:"App-menu__left"},j={Virgil:1,Helvetica:2,Cascadia:3},N={LIGHT:"light",DARK:"dark"},B="Segoe UI Emoji",F=20,V=j.Virgil,U="left",$="top",Z=20,H={excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json",json:"application/json",svg:"image/svg+xml","excalidraw.svg":"image/svg+xml",png:"image/png","excalidraw.png":"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",binary:"application/octet-stream"},W={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib"},q=window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,G=500,K=300,Y=500,X=100,J=.1,Q=.1,ee=300,te=y.themeFilter,ne={addLibrary:"addLibrary"},re={addLibrary:"addLibrary"},ie={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0}},oe=640,ae=730,se=1e3,le=500,ce=1229,ue=parseInt(y.rightSidebarWidth),de=2,he=[1,2,3],pe=10,fe=1440,me=[H.png,H.jpg,H.svg,H.gif,H.webp,H.bmp,H.ico],ge=2097152,ve="http://www.w3.org/2000/svg",ye={excalidraw:2,excalidrawLibrary:2},be=5,xe={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},we={LEFT:"left",CENTER:"center",RIGHT:"right"},_e=20,ke=.25,Ee=32,Se={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},Ce="__precedingElement__",Te={strokeColor:b.black,backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,locked:!1}},434:function(e,t,n){n.d(t,{DQ:function(){return E},KG:function(){return L},Pn:function(){return z},Qk:function(){return k},Sf:function(){return D},Tu:function(){return R},Wr:function(){return C},ZY:function(){return T},_c:function(){return A},bv:function(){return j},cT:function(){return M},g8:function(){return S},gY:function(){return V},lV:function(){return O},tW:function(){return P},vZ:function(){return U},wf:function(){return I}});var r=n(1930),i=n(2577),o=n(7169),a=n(8950),s=n(2975),l=n.n(s),c=n(5605),u=n(8897),d=n(2335),h=n(1047),p=n(6797),f=n(8211),m=n(75),g=n(6340),v=n(1393),y=n(5523),b=n(679);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(){var e=(0,a.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type!==d.LO.png){e.next=18;break}return e.prev=1,e.next=4,Promise.resolve().then(n.bind(n,673));case 4:return e.next=6,e.sent.decodePngMetadata(t);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(1),"INVALID"!==e.t0.message){e.next=15;break}throw new DOMException((0,f.t)("alerts.imageDoesNotContainScene"),"EncodingError");case 15:throw new DOMException((0,f.t)("alerts.cannotRestoreFromImage"),"EncodingError");case 16:e.next=43;break;case 18:if(!("text"in Blob)){e.next=24;break}return e.next=21,t.text();case 21:r=e.sent,e.next=27;break;case 24:return e.next=26,new Promise((function(e){var n=new FileReader;n.readAsText(t,"utf8"),n.onloadend=function(){n.readyState===FileReader.DONE&&e(n.result)}}));case 26:r=e.sent;case 27:if(t.type!==d.LO.svg){e.next=43;break}return e.prev=28,e.next=31,Promise.resolve().then(n.bind(n,673));case 31:return e.next=33,e.sent.decodeSvgMetadata({svg:r});case 33:return e.abrupt("return",e.sent);case 36:if(e.prev=36,e.t1=e.catch(28),"INVALID"!==e.t1.message){e.next=42;break}throw new DOMException((0,f.t)("alerts.imageDoesNotContainScene"),"EncodingError");case 42:throw new DOMException((0,f.t)("alerts.cannotRestoreFromImage"),"EncodingError");case 43:return e.abrupt("return",r);case 44:case"end":return e.stop()}}),e,null,[[1,9],[28,36]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e){var t;return e&&(null===(t=e.name.match(/\.(json|excalidraw|png|svg)$/))||void 0===t?void 0:t[1])||null},E=function(e){return"png"===e||"svg"===e},S=function(e){var t=k(e);return"png"===t||"svg"===t},C=function(e){var t=(e||{}).type;return!!t&&d.jo.includes(t)},T=function(){var e=(0,a.Z)(l().mark((function e(t,n,r,i){var o,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:if(o=e.sent,e.prev=3,a=JSON.parse(o),!(0,y.dS)(a)){e.next=9;break}return e.abrupt("return",{type:d.LO.excalidraw,data:(0,b.nu)({elements:(0,h._M)(a.elements||[]),appState:w(w({theme:null==n?void 0:n.theme,fileHandle:i||t.handle||null},(0,u.s)(a.appState||{})),n?(0,m.W)(a.elements||[],n,null):{}),files:a.files},n,r,{repairBindings:!0,refreshDimensions:!0})});case 9:if(!(0,y.HT)(a)){e.next=11;break}return e.abrupt("return",{type:d.LO.excalidrawlib,data:a});case 11:throw new Error((0,f.t)("alerts.couldNotLoadInvalidFile"));case 14:throw e.prev=14,e.t0=e.catch(3),console.error(e.t0.message),new Error((0,f.t)("alerts.couldNotLoadInvalidFile"));case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),M=function(){var e=(0,a.Z)(l().mark((function e(t,n,r,i){var o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t,n,r,i);case 2:if((o=e.sent).type===d.LO.excalidraw){e.next=5;break}throw new Error((0,f.t)("alerts.couldNotLoadInvalidFile"));case 5:return e.abrupt("return",o.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unpublished",n=JSON.parse(e);if(!(0,y.HT)(n))throw new Error("Invalid library");var r=n.libraryItems||n.library;return(0,b.wJ)(r,t)},O=function(){var e=(0,a.Z)(l().mark((function e(t){var n,r=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"unpublished",e.t0=I,e.next=4,_(t);case 4:return e.t1=e.sent,e.t2=n,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{t.toBlob((function(t){if(!t)return n(new p.l((0,f.t)("canvasError.canvasTooBig"),"CANVAS_POSSIBLY_TOO_BIG"));e(t)}))}catch(e){n(e)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,a.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=window.crypto.subtle,e.next=4,U(t);case 4:return e.t1=e.sent,e.next=7,e.t0.digest.call(e.t0,"SHA-1",e.t1);case 7:return n=e.sent,e.abrupt("return",(0,g.G3)(new Uint8Array(n)));case 11:return e.prev=11,e.t2=e.catch(0),console.error(e.t2),e.abrupt("return",(0,c.x0)(40));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(){var t=r.result;e(t)},r.onerror=function(e){return n(e)},r.readAsDataURL(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.indexOf(","),r=atob(e.slice(n+1)),i=e.slice(0,n).split(":")[1].split(";")[0],o=new ArrayBuffer(r.length),a=new Uint8Array(o),s=0;s<r.length;s++)a[s]=r.charCodeAt(s);return new File([o],t,{type:i})},R=function(){var e=(0,a.Z)(l().mark((function e(t,r){var o,a,s,c,u,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type!==d.LO.svg){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,Promise.all([n.e(4736).then(n.t.bind(n,4881,23)).then((function(e){return e.default})),n.e(4736).then(n.bind(n,100)).then((function(e){return e.default}))]);case 4:if(o=e.sent,a=(0,i.Z)(o,2),s=a[0],c=a[1],u=c({pica:s({features:["js","wasm"]})}),r.outputType&&(h=r.outputType,u._create_blob=function(e){return this.pica.toBlob(e.out_canvas,h,.8).then((function(t){return e.out_blob=t,e}))}),C(t)){e.next=12;break}throw new Error((0,f.t)("errors.unsupportedFileType"));case 12:return e.t0=File,e.next=15,u.toBlob(t,{max:r.maxWidthOrHeight});case 15:return e.t1=e.sent,e.t2=[e.t1],e.t3=t.name,e.t4={type:r.outputType||t.type},e.abrupt("return",new e.t0(e.t2,e.t3,e.t4));case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new File([(new TextEncoder).encode(e)],t,{type:d.LO.svg})},j=function(){var e=(0,a.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dataTransfer.files.item(0),e.next=3,N(t);case 3:if(r=e.sent,!n){e.next=10;break}return e.next=7,V(n);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=null;case 11:return e.t1=e.t0,e.t2=r,e.abrupt("return",{file:e.t1,fileHandle:e.t2});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,a.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.kr){e.next=16;break}return e.prev=1,n=t.dataTransfer.items[0],e.next=5,n.getAsFileSystemHandle();case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0=null;case 8:return r=e.t0,e.abrupt("return",r);case 12:return e.prev=12,e.t1=e.catch(1),console.warn(e.t1.name,e.t1.message),e.abrupt("return",null);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),B=function(e){var t=null,n="".concat((0,r.Z)(new Uint8Array(e).slice(0,8)).join(" ")," "),i="255 216 255 ",o="71 73 70 56 57 97 ";return"137 80 78 71 13 10 26 10 "===n?t=d.LO.png:n.startsWith(i)?t=d.LO.jpg:n.startsWith(o)&&(t=d.LO.gif),t},F=function(e,t,n){return new File([e],n||"",{type:t})},V=function(){var e=(0,a.Z)(l().mark((function e(t){var n,r,i,o,a,s,c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type){e.next=28;break}if(null===(n=t)||void 0===n||null===(r=n.name)||void 0===r||!r.endsWith(".excalidrawlib")){e.next=11;break}return e.t0=F,e.next=5,U(t);case 5:e.t1=e.sent,e.t2=d.LO.excalidrawlib,e.t3=t.name,t=(0,e.t0)(e.t1,e.t2,e.t3),e.next=26;break;case 11:if(null===(i=t)||void 0===i||null===(o=i.name)||void 0===o||!o.endsWith(".excalidraw")){e.next=21;break}return e.t4=F,e.next=15,U(t);case 15:e.t5=e.sent,e.t6=d.LO.excalidraw,e.t7=t.name,t=(0,e.t4)(e.t5,e.t6,e.t7),e.next=26;break;case 21:return e.next=23,U(t);case 23:a=e.sent,(s=B(a))&&(t=F(a,s,t.name));case 26:e.next=34;break;case 28:if(!C(t)){e.next=34;break}return e.next=31,U(t);case 31:c=e.sent,(u=B(c))&&u!==t.type&&(t=F(c,u,t.name));case 34:return e.abrupt("return",t);case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){return"arrayBuffer"in e?e.arrayBuffer():new Promise((function(t,n){var r=new FileReader;r.onload=function(e){var r;if(null===(r=e.target)||void 0===r||!r.result)return n(new Error("Couldn't convert blob to ArrayBuffer"));t(e.target.result)},r.readAsArrayBuffer(e)}))}},1393:function(e,t,n){n.d(t,{I$:function(){return f},NL:function(){return m},kr:function(){return a}});var r=n(1930),i=n(8950),o=n(2975),a=function(){if("undefined"==typeof self)return!1;if("top"in self&&self!==top)try{top}catch(e){return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1}(),s=a?n.e(4736).then(n.bind(n,2254)):n.e(4736).then(n.bind(n,3499));function l(){return l=(0,i.Z)(o.mark((function e(){var t,n=arguments;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s;case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}a?n.e(4736).then(n.bind(n,6474)):n.e(4736).then(n.bind(n,9521));var c=a?n.e(4736).then(n.bind(n,9475)):n.e(4736).then(n.bind(n,6281));function u(){return u=(0,i.Z)(o.mark((function e(){var t,n=arguments;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c;case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}var d=n(2335),h=n(6797),p=n(6340),f=function(e){var t,n,i,o=null===(t=e.extensions)||void 0===t?void 0:t.reduce((function(e,t){return e.push(d.LO[t]),e}),[]),a=null===(n=e.extensions)||void 0===n?void 0:n.reduce((function(e,t){return"jpg"===t?e.concat(".jpg",".jpeg"):e.concat(".".concat(t))}),[]);return function(){return l.apply(this,arguments)}({description:e.description,extensions:a,mimeTypes:o,multiple:null!==(i=e.multiple)&&void 0!==i&&i,legacySetup:function(t,n,i){var o=(0,p.Ds)(n,500),a=function(){s(),document.addEventListener(d.Ks.KEYUP,o),document.addEventListener(d.Ks.POINTER_UP,o),o()},s=function(){var n;if(null!==(n=i.files)&&void 0!==n&&n.length){var o=e.multiple?(0,r.Z)(i.files):i.files[0];t(o)}};requestAnimationFrame((function(){window.addEventListener(d.Ks.FOCUS,a)}));var l=window.setInterval((function(){s()}),500);return function(e){clearInterval(l),o.cancel(),window.removeEventListener(d.Ks.FOCUS,a),document.removeEventListener(d.Ks.KEYUP,o),document.removeEventListener(d.Ks.POINTER_UP,o),e&&(console.warn("Opening the file was canceled (legacy-fs)."),e(new h._))}}})},m=function(e,t){return function(){return u.apply(this,arguments)}(e,{fileName:"".concat(t.name,".").concat(t.extension),description:t.description,extensions:[".".concat(t.extension)]},t.fileHandle)}},673:function(e,t,n){n.r(t),n.d(t,{decodePngMetadata:function(){return k},decodeSvgMetadata:function(){return S},encodePngMetadata:function(){return _},encodeSvgMetadata:function(){return E},getTEXtChunk:function(){return w}});var r=n(8950),i=n(2975),o=n.n(i),a=n(2983),s=n.n(a),l=n(1194),c=n(3434),u=n.n(c),d=n(2744),h=n(2335),p=n(434),f=function(e){return new Promise((function(t,n){var r="string"==typeof e?new Blob([(new TextEncoder).encode(e)]):new Blob([e instanceof Uint8Array?e:new Uint8Array(e)]),i=new FileReader;i.onload=function(e){if(!e.target||"string"!=typeof e.target.result)return n(new Error("couldn't convert to byte string"));t(e.target.result)},i.readAsBinaryString(r)}))},m=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return t},g=function(e){return new TextDecoder("utf-8").decode(m(e))},v=function(){var e=(0,r.Z)(o().mark((function e(t){var n=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>1&&void 0!==n[1]&&n[1])){e.next=5;break}e.t0=window.btoa(t),e.next=10;break;case 5:return e.t1=window,e.next=8,f(t);case 8:e.t2=e.sent,e.t0=e.t1.btoa.call(e.t1,e.t2);case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],e.abrupt("return",n?window.atob(t):g(window.atob(t)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.text,!1===t.compress){e.next=11;break}return e.prev=2,e.next=5,f((0,d.deflate)(n));case 5:r=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error("encode: cannot deflate",e.t0);case 11:if(e.t1=!!r,e.t2=r,e.t2){e.next=17;break}return e.next=16,f(n);case 16:e.t2=e.sent;case 17:return e.t3=e.t2,e.abrupt("return",{version:"1",encoding:"bstring",compressed:e.t1,encoded:e.t3});case 19:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.encoding,e.next="bstring"===e.t0?3:12;break;case 3:if(!t.compressed){e.next=7;break}e.t1=t.encoded,e.next=10;break;case 7:return e.next=9,g(t.encoded);case 9:e.t1=e.sent;case 10:return n=e.t1,e.abrupt("break",13);case 12:throw new Error('decode: unknown encoding "'.concat(t.encoding,'"'));case 13:if(!t.compressed){e.next=15;break}return e.abrupt("return",(0,d.inflate)(new Uint8Array(m(n)),{to:"string"}));case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s(),e.t1=Uint8Array,e.next=4,(0,p.vZ)(t);case 4:if(e.t2=e.sent,e.t3=new e.t1(e.t2),n=(0,e.t0)(e.t3),!(r=n.find((function(e){return"tEXt"===e.name})))){e.next=10;break}return e.abrupt("return",l.decode(r.data));case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.blob,r=t.metadata,e.t0=s(),e.t1=Uint8Array,e.next=5,(0,p.vZ)(n);case 5:return e.t2=e.sent,e.t3=new e.t1(e.t2),i=(0,e.t0)(e.t3),e.t4=l,e.t5=h.LO.excalidraw,e.t6=JSON,e.next=13,b({text:r,compress:!0});case 13:return e.t7=e.sent,e.t8=e.t6.stringify.call(e.t6,e.t7),a=e.t4.encode.call(e.t4,e.t5,e.t8),i.splice(-1,0,a),e.abrupt("return",new Blob([u()(i)],{type:h.LO.png}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:if((null==(n=e.sent)?void 0:n.keyword)!==h.LO.excalidraw){e.next=19;break}if(e.prev=4,"encoded"in(r=JSON.parse(n.text))){e.next=10;break}if(!("type"in r)||r.type!==h.r8.excalidraw){e.next=9;break}return e.abrupt("return",n.text);case 9:throw new Error("FAILED");case 10:return e.next=12,x(r);case 12:return e.abrupt("return",e.sent);case 15:throw e.prev=15,e.t0=e.catch(4),console.error(e.t0),new Error("FAILED");case 19:throw new Error("INVALID");case 20:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,e.t0=v,e.t1=JSON,e.next=5,b({text:n});case 5:return e.t2=e.sent,e.t3=e.t1.stringify.call(e.t1,e.t2),e.next=9,(0,e.t0)(e.t3,!0);case 9:return r=e.sent,i="",i+="\x3c!-- payload-type:".concat(h.LO.excalidraw," --\x3e"),i+="\x3c!-- payload-version:2 --\x3e",i+="\x3c!-- payload-start --\x3e",i+=r,i+="\x3c!-- payload-end --\x3e",e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,i,a,s,l,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.svg).includes("payload-type:".concat(h.LO.excalidraw))){e.next=26;break}if(r=n.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/)){e.next=5;break}throw new Error("INVALID");case 5:return i=n.match(/<!-- payload-version:(\d+) -->/),a=(null==i?void 0:i[1])||"1",s="1"!==a,e.prev=8,e.next=11,y(r[1],s);case 11:if(l=e.sent,"encoded"in(c=JSON.parse(l))){e.next=17;break}if(!("type"in c)||c.type!==h.r8.excalidraw){e.next=16;break}return e.abrupt("return",l);case 16:throw new Error("FAILED");case 17:return e.next=19,x(c);case 19:return e.abrupt("return",e.sent);case 22:throw e.prev=22,e.t0=e.catch(8),console.error(e.t0),new Error("FAILED");case 26:throw new Error("INVALID");case 27:case"end":return e.stop()}}),e,null,[[8,22]])})));return function(t){return e.apply(this,arguments)}}()},9485:function(e,t,n){n.d(t,{Um:function(){return h.Um},cT:function(){return u.cT},n8:function(){return h.n8},p1:function(){return p}});var r=n(8950),i=n(2975),o=n.n(i),a=n(6665),s=n(2335),l=n(8211),c=n(4162),u=n(434),d=n(1393),h=n(5523),p=function(){var e=(0,r.Z)(o().mark((function e(t,r,i,p,f){var m,g,v,y,b,x,w,_,k,E,S;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=f.exportBackground,g=f.exportPadding,v=void 0===g?s.qy:g,y=f.viewBackgroundColor,b=f.name,x=f.fileHandle,w=void 0===x?null:x,0!==r.length){e.next=3;break}throw new Error((0,l.t)("alerts.cannotExportEmptyCanvas"));case 3:if("svg"!==t&&"clipboard-svg"!==t){e.next=17;break}return e.next=6,(0,c.$D)(r,{exportBackground:m,exportWithDarkMode:i.exportWithDarkMode,viewBackgroundColor:y,exportPadding:v,exportScale:i.exportScale,exportEmbedScene:i.exportEmbedScene&&"svg"===t},p);case 6:if(_=e.sent,"svg"!==t){e.next=13;break}return e.next=10,(0,d.NL)(new Blob([_.outerHTML],{type:s.LO.svg}),{description:"Export to SVG",name:b,extension:i.exportEmbedScene?"excalidraw.svg":"svg",fileHandle:w});case 10:return e.abrupt("return",e.sent);case 13:if("clipboard-svg"!==t){e.next=17;break}return e.next=16,(0,a.dd)(_.outerHTML);case 16:return e.abrupt("return");case 17:return e.next=19,(0,c.NL)(r,i,p,{exportBackground:m,viewBackgroundColor:y,exportPadding:v});case 19:if((k=e.sent).style.display="none",document.body.appendChild(k),"png"!==t){e.next=38;break}return e.next=25,(0,u._c)(k);case 25:if(E=e.sent,k.remove(),!i.exportEmbedScene){e.next=33;break}return e.next=30,Promise.resolve().then(n.bind(n,673));case 30:return e.next=32,e.sent.encodePngMetadata({blob:E,metadata:(0,h.I_)(r,i,p,"local")});case 32:E=e.sent;case 33:return e.next=35,(0,d.NL)(E,{description:"Export to PNG",name:b,extension:"png",fileHandle:w});case 35:return e.abrupt("return",e.sent);case 38:if("clipboard"!==t){e.next=60;break}return e.prev=39,S=(0,u._c)(k),e.next=43,(0,a.uR)(S);case 43:e.next=55;break;case 45:if(e.prev=45,e.t0=e.catch(39),console.warn(e.t0),"CANVAS_POSSIBLY_TOO_BIG"!==e.t0.name){e.next=50;break}throw e.t0;case 50:if(!s.vU||"TypeError"!==e.t0.name){e.next=54;break}throw new Error("".concat((0,l.t)("alerts.couldNotCopyToClipboard"),"\n\n").concat((0,l.t)("hints.firefox_clipboard_write")));case 54:throw new Error((0,l.t)("alerts.couldNotCopyToClipboard"));case 55:return e.prev=55,k.remove(),e.finish(55);case 58:e.next=62;break;case 60:throw k.remove(),new Error("Unsupported export type");case 62:case"end":return e.stop()}}),e,null,[[39,45,55,58]])})));return function(t,n,r,i,o){return e.apply(this,arguments)}}()},5523:function(e,t,n){n.d(t,{HT:function(){return b},I_:function(){return m},NI:function(){return x},Um:function(){return g},dS:function(){return y},n8:function(){return v},t1:function(){return w}});var r=n(6655),i=n(8950),o=n(2975),a=n.n(o),s=n(1393),l=n(8897),c=n(2335),u=n(1047),d=n(434);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e,t){var n,r={},i=h(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;!o.isDeleted&&"fileId"in o&&o.fileId&&t[o.fileId]&&(r[o.fileId]=t[o.fileId])}}catch(e){i.e(e)}finally{i.f()}return r},m=function(e,t,n,r){var i={type:c.r8.excalidraw,version:c.Kr.excalidraw,source:c.pb,elements:"local"===r?(0,u._M)(e):(0,u.BQ)(e),appState:"local"===r?(0,l.s)(t):(0,l.eS)(t),files:"local"===r?f(e,n):void 0};return JSON.stringify(i,null,2)},g=function(){var e=(0,i.Z)(a().mark((function e(t,n,r){var i,o,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=m(t,n,r,"local"),o=new Blob([i],{type:c.LO.excalidraw}),e.next=4,(0,s.NL)(o,{name:n.name,extension:"excalidraw",description:"Excalidraw file",fileHandle:(0,d.g8)(n.fileHandle)?null:n.fileHandle});case 4:return l=e.sent,e.abrupt("return",{fileHandle:l});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.I$)({description:"Excalidraw files"});case 2:return r=e.sent,e.t0=d.cT,e.next=6,(0,d.gY)(r);case 6:return e.t1=e.sent,e.t2=t,e.t3=n,e.t4=r.handle,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(e){return(null==e?void 0:e.type)===c.r8.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||"object"===(0,r.Z)(e.appState)))},b=function(e){return"object"===(0,r.Z)(e)&&e&&e.type===c.r8.excalidrawLibrary&&(1===e.version||2===e.version)},x=function(e){var t={type:c.r8.excalidrawLibrary,version:c.Kr.excalidrawLibrary,source:c.pb,libraryItems:e};return JSON.stringify(t,null,2)},w=function(){var e=(0,i.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x(t),e.next=3,(0,s.NL)(new Blob([n],{type:c.LO.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},7053:function(e,t,n){n.d(t,{Di:function(){return I},WV:function(){return M},rF:function(){return k},xS:function(){return O},zh:function(){return C}});var r=n(7169),i=n(8950),o=n(5169),a=n(8821),s=n(1930),l=n(2975),c=n.n(l),u=n(434),d=n(679),h=n(4739),p=n(9487),f=n(8925),m=n(6797),g=n(8211),v=n(9787),y=n(2335);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=(0,h.cn)({status:"loaded",isInitialized:!0,libraryItems:[]}),E=function(e){return JSON.parse(JSON.stringify(e))},S=function(e,t){return!e.find((function(e){return e.elements.length===t.elements.length&&e.elements.every((function(e,n){return e.id===t.elements[n].id&&e.versionNonce===t.elements[n].versionNonce}))}))},C=function(e,t){var n,r=[],i=w(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;S(e,o)&&r.push(o)}}catch(e){i.e(e)}finally{i.f()}return[].concat(r,(0,s.Z)(e))},T=(0,o.Z)((function e(t){var n=this;(0,a.Z)(this,e),this.lastLibraryItems=[],this.isInitialized=!1,this.updateQueue=[],this.getLastUpdateTask=function(){return n.updateQueue[n.updateQueue.length-1]},this.notifyListeners=function(){if(n.updateQueue.length>0)p.e_.set(k,{status:"loading",libraryItems:n.lastLibraryItems,isInitialized:n.isInitialized});else{n.isInitialized=!0,p.e_.set(k,{status:"loaded",libraryItems:n.lastLibraryItems,isInitialized:n.isInitialized});try{var e,t;null===(e=(t=n.app.props).onLibraryChange)||void 0===e||e.call(t,E(n.lastLibraryItems))}catch(e){console.error(e)}}},this.resetLibrary=function(){return n.setLibrary([])},this.getLatestLibrary=function(){return new Promise(function(){var e=(0,i.Z)(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getLastUpdateTask()||n.lastLibraryItems;case 3:r=e.sent,n.updateQueue.length>0?t(n.getLatestLibrary()):t(E(r)),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",t(n.lastLibraryItems));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())},this.updateLibrary=function(){var e=(0,i.Z)(c().mark((function e(t){var r,o,a,s,l,h,p,f,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.libraryItems,o=t.prompt,a=void 0!==o&&o,s=t.merge,l=void 0!==s&&s,h=t.openLibraryMenu,p=void 0!==h&&h,f=t.defaultStatus,v=void 0===f?"unpublished":f,p&&n.app.setState({openSidebar:"library"}),e.abrupt("return",n.setLibrary((function(){return new Promise(function(){var e=(0,i.Z)(c().mark((function e(t,i){var o,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,"function"!=typeof r||r instanceof Blob?r:r(n.lastLibraryItems);case 3:if(!((o=e.sent)instanceof Blob)){e.next=10;break}return e.next=7,(0,u.lV)(o,v);case 7:s=e.sent,e.next=11;break;case 10:s=(0,d.wJ)(o,v);case 11:!a||window.confirm((0,g.t)("alerts.confirmAddLibrary",{numShapes:s.length}))?t(l?C(n.lastLibraryItems,s):s):i(new m._),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),i(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}())})).finally((function(){n.app.focusContainer()})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.setLibrary=function(e){var t=new Promise(function(){var t=(0,i.Z)(c().mark((function t(r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.getLastUpdateTask();case 3:return"function"==typeof e&&(e=e(n.lastLibraryItems)),t.t0=E,t.next=7,e;case 7:t.t1=t.sent,n.lastLibraryItems=(0,t.t0)(t.t1),r(n.lastLibraryItems),t.next=15;break;case 12:t.prev=12,t.t2=t.catch(0),i(t.t2);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()).catch((function(e){if("AbortError"===e.name)return console.warn("Library update aborted by user"),n.lastLibraryItems;throw e})).finally((function(){n.updateQueue=n.updateQueue.filter((function(e){return e!==t})),n.notifyListeners()}));return n.updateQueue.push(t),n.notifyListeners(),t},this.app=t}));t.ZP=T;var M=function(e){var t,n=Math.ceil(Math.sqrt(e.length)),r=[],i=0,o=0,a=0,l=0,c=0,u=0,d=0,h=w(e);try{var p=function(){var h=t.value;c&&c%n==0&&(o+=a+50,i=0,u=0,d++),0===u&&(a=function(t){return e.slice(t*n,t*n+n).reduce((function(e,t){var n=(0,f.v2)(t.elements).height;return Math.max(e,n)}),0)}(d)),l=function(t){var r,i=0,o=0,a=0,s=w(e);try{for(s.s();!(r=s.n()).done;){var l=r.value;if(i%n==0&&(o=0),o===t){var c=(0,f.v2)(l.elements).width;a=Math.max(a,c)}i++,o++}}catch(e){s.e(e)}finally{s.f()}return a}(u);var p=(0,f.v2)(h.elements),m=p.minX,g=p.minY,v=p.width,y=p.height,b=(l-v)/2,_=(a-y)/2;r.push.apply(r,(0,s.Z)(h.elements.map((function(e){return x(x({},e),{},{x:e.x+i+b-m,y:e.y+o+_-g})})))),i+=l+50,c++,u++};for(h.s();!(t=h.n()).done;)p()}catch(e){h.e(e)}finally{h.f()}return r},I=function(){var e=new URLSearchParams(window.location.hash.slice(1)).get(y.ah.addLibrary)||new URLSearchParams(window.location.search).get(y.UO.addLibrary),t=e?new URLSearchParams(window.location.hash.slice(1)).get("token"):null;return e?{libraryUrl:e,idToken:t}:null},O=function(e){var t=e.excalidrawAPI,n=e.getInitialLibraryItems,r=(0,v.useRef)(n);(0,v.useEffect)((function(){if(t){var e=function(){var e=(0,i.Z)(c().mark((function e(n){var r,o,a,s,l,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.libraryUrl,o=n.idToken,a=new Promise(function(){var e=(0,i.Z)(c().mark((function e(t,n){var i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(decodeURIComponent(r));case 3:return i=e.sent,e.next=6,i.blob();case 6:o=e.sent,t(o),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()),s=o!==t.id,e.next=5,s&&document.hidden?new Promise((function(e){window.addEventListener("focus",(function(){return e()}),{once:!0})})):null;case 5:return e.prev=5,e.next=8,t.updateLibrary({libraryItems:a,prompt:s,merge:!0,defaultStatus:"published",openLibraryMenu:!0});case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(5),e.t0;case 13:return e.prev=13,window.location.hash.includes(y.ah.addLibrary)?((l=new URLSearchParams(window.location.hash.slice(1))).delete(y.ah.addLibrary),window.history.replaceState({},y.iC,"#".concat(l.toString()))):window.location.search.includes(y.UO.addLibrary)&&((u=new URLSearchParams(window.location.search)).delete(y.UO.addLibrary),window.history.replaceState({},y.iC,"?".concat(u.toString()))),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[5,10,13,16]])})));return function(t){return e.apply(this,arguments)}}(),n=function(t){t.preventDefault();var n=I();n&&(t.stopImmediatePropagation(),window.history.replaceState({},"",t.oldURL),e(n))};r.current&&t.updateLibrary({libraryItems:r.current()});var o=I();return o&&e(o),window.addEventListener(y.Ks.HASHCHANGE,n),function(){window.removeEventListener(y.Ks.HASHCHANGE,n)}}}),[t])}},679:function(e,t,n){n.d(t,{ET:function(){return E},lY:function(){return T},nu:function(){return M},wJ:function(){return O}});var r=n(2577),i=n(7169),o=n(1047),a=n(1974),s=n(6954),l=n(2335),c=n(8897),u=n(6938),d=n(1935),h=n(6340),p=n(5284),f=n(5710);function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={selection:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,hand:!0},x=function(e){return Object.keys(l.ut).includes(e)?l.ut[e]:l.rk},w=function(e,t){var n,r,i,c,u,d,f,m,g,v,b,x,w,_,k={type:t.type||e.type,version:e.version||1,versionNonce:null!==(n=e.versionNonce)&&void 0!==n?n:0,isDeleted:null!==(r=e.isDeleted)&&void 0!==r&&r,id:e.id||(0,s.kb)(),fillStyle:e.fillStyle||"hachure",strokeWidth:e.strokeWidth||1,strokeStyle:null!==(i=e.strokeStyle)&&void 0!==i?i:"solid",roughness:null!==(c=e.roughness)&&void 0!==c?c:1,opacity:null==e.opacity?100:e.opacity,angle:e.angle||0,x:null!==(u=null!==(d=t.x)&&void 0!==d?d:e.x)&&void 0!==u?u:0,y:null!==(f=null!==(m=t.y)&&void 0!==m?m:e.y)&&void 0!==f?f:0,strokeColor:e.strokeColor||p.black,backgroundColor:e.backgroundColor||"transparent",width:e.width||0,height:e.height||0,seed:null!==(g=e.seed)&&void 0!==g?g:1,groupIds:null!==(v=e.groupIds)&&void 0!==v?v:[],roundness:e.roundness?e.roundness:"round"===e.strokeSharpness?{type:(0,a.QI)(e.type)?l.a6.LEGACY:l.a6.PROPORTIONAL_RADIUS}:null,boundElements:e.boundElementIds?e.boundElementIds.map((function(e){return{type:"arrow",id:e}})):null!==(b=e.boundElements)&&void 0!==b?b:[],updated:null!==(x=e.updated)&&void 0!==x?x:(0,h.C3)(),link:null!==(w=e.link)&&void 0!==w?w:null,locked:null!==(_=e.locked)&&void 0!==_&&_};return"customData"in e&&(k.customData=e.customData),l.WR in e&&(k[l.WR]=e[l.WR]),y(y(y({},k),(0,o.Qp)(k)),t)},_=function(e,t){if(e.boundElements){var n=e.boundElements.slice(),r=new Set;e.boundElements=n.reduce((function(n,i){var o=t.get(i.id);if(o&&!r.has(i.id)){if(r.add(i.id),o.isDeleted)return n;n.push(i),(0,a.iB)(o)&&!o.containerId&&(o.containerId=e.id)}return n}),[])}},k=function(e,t){var n=e.containerId?t.get(e.containerId):null;if(n){if(!e.isDeleted&&n.boundElements&&!n.boundElements.find((function(t){return t.id===e.id}))){var r=(n.boundElements||(n.boundElements=[])).slice();r.push({type:"text",id:e.id}),n.boundElements=r}}else e.containerId=null},E=function(e,t,n){var i=new Set,c=t?(0,h.xn)(t):null,p=(e||[]).reduce((function(e,t){if("selection"!==t.type&&!(0,o.QD)(t)){var a=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e.type){case"text":var a=e.fontSize,s=e.fontFamily;if("font"in e){var c=e.font.split(" "),d=(0,r.Z)(c,2),p=d[0],m=d[1];a=parseFloat(p),s=x(m)}var g=null!==(t=e.text)&&void 0!==t?t:"",v=e.lineHeight||(e.height?(0,f.$2)(e):(0,f.PT)(e.fontFamily)),b=(0,f.R8)(e.text,(0,h.mO)(e),v);return e=w(e,{fontSize:a,fontFamily:s,text:g,textAlign:e.textAlign||l.Hg,verticalAlign:e.verticalAlign||l.hs,containerId:null!==(n=e.containerId)&&void 0!==n?n:null,originalText:e.originalText||g,lineHeight:v,baseline:b}),i&&(e=y(y({},e),(0,o.JZ)(e))),e;case"freedraw":return w(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return w(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1]});case"line":case"draw":case"arrow":var _=e,k=_.startArrowhead,E=void 0===k?null:k,S=_.endArrowhead,C=void 0===S?"arrow"===e.type?"arrow":null:S,T=e.x,M=e.y,I=!Array.isArray(e.points)||e.points.length<2?[[0,0],[e.width,e.height]]:e.points;if(0!==I[0][0]||0!==I[0][1]){var O=u._.getNormalizedPoints(e);I=O.points,T=O.x,M=O.y}return w(e,{type:"draw"===e.type?"line":e.type,startBinding:e.startBinding,endBinding:e.endBinding,lastCommittedPoint:null,startArrowhead:E,endArrowhead:C,points:I,x:T,y:M});case"ellipse":case"rectangle":case"diamond":return w(e,{})}}(t,null==n?void 0:n.refreshDimensions);if(a){var p=null==c?void 0:c.get(t.id);p&&p.version>a.version&&(a=(0,d.ZP)(a,p.version)),i.has(a.id)&&(a=y(y({},a),{},{id:(0,s.kb)()})),i.add(a.id),e.push(a)}}return e}),[]);if(null==n||!n.repairBindings)return p;var g,v=(0,h.xn)(p),b=m(p);try{for(b.s();!(g=b.n()).done;){var E=g.value;(0,a.iB)(E)&&E.containerId?k(E,v):E.boundElements&&_(E,v)}}catch(e){b.e(e)}finally{b.f()}return p},S=function(e,t,n){var r=t[e];return void 0!==r?r:n[e]},C={isLibraryOpen:function(e,t){return["openSidebar","isLibraryOpen"in e?e.isLibraryOpen?"library":null:S("openSidebar",e,t)]},isLibraryMenuDocked:function(e,t){var n;return["isSidebarDocked",null!==(n=e.isLibraryMenuDocked)&&void 0!==n?n:S("isSidebarDocked",e,t)]}},T=function(e,t){var n,i,o,a;e=e||{};for(var s=(0,c.im)(),l={},u=0,d=Object.keys(C);u<d.length;u++){var p=d[u];if(p in e){var f=C[p](e,s),m=(0,r.Z)(f,2),g=m[0],v=m[1];l[g]=v}}for(var x=0,w=Object.entries(s);x<w.length;x++){var _=(0,r.Z)(w[x],2),k=_[0],E=_[1],S=e[k],T=t?t[k]:void 0;l[k]=void 0!==S?S:void 0!==T?T:E}return y(y({},l),{},{cursorButton:(null==t?void 0:t.cursorButton)||"up",penDetected:null!==(n=null==t?void 0:t.penDetected)&&void 0!==n?n:!!e.penMode&&null!==(i=e.penDetected)&&void 0!==i&&i,activeTool:y(y({},(0,h.Om)(s,l.activeTool.type&&b[l.activeTool.type]?l.activeTool:{type:"selection"})),{},{lastActiveTool:null,locked:null!==(o=l.activeTool.locked)&&void 0!==o&&o}),zoom:"number"==typeof e.zoom?{value:e.zoom}:null!==(a=e.zoom)&&void 0!==a&&a.value?e.zoom:s.zoom,openSidebar:"library"===l.openSidebar?l.isSidebarDocked?"library":null:l.openSidebar})},M=function(e,t,n,r){return{elements:E(null==e?void 0:e.elements,n,r),appState:T(null==e?void 0:e.appState,t||null),files:(null==e?void 0:e.files)||{}}},I=function(e){var t=E((0,o.Lm)(e.elements),null);return t.length?y(y({},e),{},{elements:t}):null},O=function(){var e,t=arguments.length>1?arguments[1]:void 0,n=[],r=m(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(Array.isArray(i)){var o=I({status:t,elements:i,id:(0,s.kb)(),created:Date.now()});o&&n.push(o)}else{var a=i,l=I(y(y({},a),{},{id:a.id||(0,s.kb)(),status:a.status||t,created:a.created||Date.now()}));l&&n.push(l)}}}catch(e){r.e(e)}finally{r.f()}return n}},4929:function(e,t,n){n.d(t,{rj:function(){return F},nW:function(){return U},nz:function(){return W},sw:function(){return G},lV:function(){return Q},q$:function(){return H},wq:function(){return K},$u:function(){return Z},Pp:function(){return X}});var r=n(7169),i=n(2577),o=n(6340),a=n(1935),s=n(7901),l=n(1319),c=n(3646),u=n(8211),d=n(9787),h=n(45),p=n(6066),f=n(3063),m=n(6552),g=n(2335),v=n(1894),y=n(75),b=n(2325),x=n(1047),w=n(487),_=n.n(w),k=n(631),E=n.n(k),S=n(2052),C=n.n(S),T=n(4010),M=n.n(T),I=n(1469),O=n.n(I),A=n(9329),P=n.n(A),D=n(5260),L={};L.styleTagTransform=P(),L.setAttributes=M(),L.insert=C().bind(null,"head"),L.domAPI=E(),L.insertStyleElement=O(),_()(D.Z,L),D.Z&&D.Z.locals&&D.Z.locals;var R=n(7047),z=n(2134),j=n(4512);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=document.createElement("img");F.src="data:".concat(g.LO.svg,", ").concat(encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>'));var V=!1,U=function(e){var t=e.element,n=e.setAppState,r=e.onLinkOpen,s=(0,z.gF)(),f=t.link||"",m=(0,d.useState)(f),v=(0,i.Z)(m,2),y=v[0],b=v[1],x=(0,d.useRef)(null),w="editor"===s.showHyperlinkPopup||!f,_=(0,d.useCallback)((function(){if(x.current){var e=Z(x.current.value);!t.link&&e&&(0,R.L)("hyperlink","create"),(0,a.DR)(t,{link:e}),n({showHyperlinkPopup:"info"})}}),[t,n]);(0,d.useLayoutEffect)((function(){return function(){_()}}),[_]),(0,d.useEffect)((function(){var e=null,r=function(r){w||(e&&clearTimeout(e),ee(t,s,[r.clientX,r.clientY])&&(e=window.setTimeout((function(){n({showHyperlinkPopup:!1})}),500)))};return window.addEventListener(g.Ks.POINTER_MOVE,r,!1),function(){window.removeEventListener(g.Ks.POINTER_MOVE,r,!1),e&&clearTimeout(e)}}),[s,t,w,n]);var k=(0,d.useCallback)((function(){(0,R.L)("hyperlink","delete"),(0,a.DR)(t,{link:null}),w&&(x.current.value=""),n({showHyperlinkPopup:!1})}),[n,t,w]),E=$(t,s),S=E.x,C=E.y;return s.draggingElement||s.resizingElement||s.isRotating||s.openMenu?null:(0,j.jsxs)("div",{className:"excalidraw-hyperlinkContainer",style:{top:"".concat(C,"px"),left:"".concat(S,"px"),width:320,padding:5},children:[w?(0,j.jsx)("input",{className:(0,h.Z)("excalidraw-hyperlinkContainer-input"),placeholder:"Type or paste your link here",ref:x,value:y,onChange:function(e){return b(e.target.value)},autoFocus:!0,onKeyDown:function(e){e.stopPropagation(),e[p.tW.CTRL_OR_CMD]&&e.key===p.tW.K&&e.preventDefault(),e.key!==p.tW.ENTER&&e.key!==p.tW.ESCAPE||_()}}):(0,j.jsx)("a",{href:t.link||"",className:(0,h.Z)("excalidraw-hyperlinkContainer-link",{"d-none":w}),target:H(t.link)?"_self":"_blank",onClick:function(e){if(t.link&&r){var n=(0,o.ag)(g.Ks.EXCALIDRAW_LINK,e.nativeEvent);r(t,n),n.defaultPrevented&&e.preventDefault()}},rel:"noopener noreferrer",children:t.link}),(0,j.jsxs)("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!w&&(0,j.jsx)(l.V,{type:"button",title:(0,u.t)("buttons.edit"),"aria-label":(0,u.t)("buttons.edit"),label:(0,u.t)("buttons.edit"),onClick:function(){(0,R.L)("hyperlink","edit","popup-ui"),n({showHyperlinkPopup:"editor"})},className:"excalidraw-hyperlinkContainer--edit",icon:c.Pm}),f&&(0,j.jsx)(l.V,{type:"button",title:(0,u.t)("buttons.remove"),"aria-label":(0,u.t)("buttons.remove"),label:(0,u.t)("buttons.remove"),onClick:k,className:"excalidraw-hyperlinkContainer--remove",icon:c.XH})]})]})},$=function(e,t){var n=(0,x.qf)(e),r=(0,i.Z)(n,2),a=r[0],s=r[1],l=(0,o._i)({sceneX:a+e.width/2,sceneY:s},t),c=l.x,u=l.y;return{x:c-t.offsetLeft-160,y:u-t.offsetTop-85}},Z=function(e){return(e=e.trim())&&(e.includes("://")||/^[[\\/]/.test(e)||(e="https://".concat(e))),e},H=function(e){return!!(null!=e&&e.includes(location.origin)||null!=e&&e.startsWith("/"))},W=(0,s.z)({name:"hyperlink",perform:function(e,t){return"editor"!==t.showHyperlinkPopup&&{elements:e,appState:B(B({},t),{},{showHyperlinkPopup:"editor",openMenu:null}),commitToHistory:!0}},trackEvent:{category:"hyperlink",action:"click"},keyTest:function(e){return e[p.tW.CTRL_OR_CMD]&&e.key===p.tW.K},contextItemLabel:function(e,t){return q(e,t)},predicate:function(e,t){return 1===(0,y.eD)(e,t).length},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData,i=(0,y.eD)(t,n);return(0,j.jsx)(l.V,{type:"button",icon:c.xP,"aria-label":(0,u.t)(q(t,n)),title:"".concat((0,u.t)("labels.link.label")," - ").concat((0,o.uY)("CtrlOrCmd+K")),onClick:function(){return r(null)},selected:1===i.length&&!!i[0].link})}}),q=function(e,t){return(0,y.eD)(e,t)[0].link?"labels.link.edit":"labels.link.create"},G=function(e,t,n){var r=(0,i.Z)(e,4),o=r[0],a=r[1],s=r[2],l=r[3],c=f.Dn,u=c/n.zoom.value,d=c/n.zoom.value,h=c/n.zoom.value,p=(o+s)/2,g=(a+l)/2,v=(c-8)/(2*n.zoom.value),y=4/n.zoom.value,b=s+y-v,x=a-y-h+v,w=(0,m.U1)(b+u/2,x+d/2,p,g,t),_=(0,i.Z)(w,2);return[_[0]-u/2,_[1]-d/2,u,d]},K=function(e,t,n,r){var o=(0,i.Z)(n,2),a=o[0],s=o[1];if(!e.link||t.selectedElementIds[e.id])return!1;var l=4/t.zoom.value;if(!r&&t.viewModeEnabled&&(0,b.pX)(e,[a,s],l))return!0;var c=(0,x.qf)(e),u=(0,i.Z)(c,4),d=u[0],h=u[1],p=u[2],f=u[3],m=G([d,h,p,f],e.angle,t),g=(0,i.Z)(m,4),v=g[0],y=g[1],w=g[2],_=g[3];return a>v-l&&a<v+l+w&&s>y-l&&s<y+_+l},Y=null,X=function(e,t){Y&&clearTimeout(Y),Y=window.setTimeout((function(){return J(e,t)}),g.sA)},J=function(e,t){if(e.link){var n=(0,v.bK)();n.classList.add("excalidraw-tooltip--visible"),n.style.maxWidth="20rem",n.textContent=e.link;var r=(0,x.qf)(e),a=(0,i.Z)(r,4),s=a[0],l=a[1],c=a[2],u=a[3],d=G([s,l,c,u],e.angle,t),h=(0,i.Z)(d,4),p=h[0],f=h[1],m=h[2],g=h[3],y=(0,o._i)({sceneX:p,sceneY:f},t);(0,v.Js)(n,{left:y.x,top:y.y,width:m,height:g},"top"),(0,R.L)("hyperlink","tooltip","link-icon"),V=!0}},Q=function(){Y&&clearTimeout(Y),V&&(V=!1,(0,v.bK)().classList.remove("excalidraw-tooltip--visible"))},ee=function(e,t,n){var r=(0,i.Z)(n,2),a=r[0],s=r[1],l=(0,o.dE)({clientX:a,clientY:s},t),c=l.x,u=l.y,d=15/t.zoom.value;if((0,b.pX)(e,[c,u],d))return!1;var h=(0,x.qf)(e),p=(0,i.Z)(h,3),f=p[0],m=p[1],g=p[2];if(c>=f&&c<=g&&u>=m-85&&u<=m)return!1;var v=$(e,t),y=v.x,w=v.y;return!(a>=y-d&&a<=y+320+10+d&&s>=w-d&&s<=w+d+10+42)}},8290:function(e,t,n){n.d(t,{$q:function(){return $},DK:function(){return S},H:function(){return C},HG:function(){return y},N1:function(){return g},R:function(){return _},Ww:function(){return O},Y9:function(){return M},ZB:function(){return R},cz:function(){return m},ek:function(){return V},el:function(){return x}});var r=n(7169),i=n(2577),o=n(75),a=n(1974),s=n(2325),l=n(1935),c=n(1564),u=n(6938),d=n(6340),h=n(6066),p=n(5710);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var m=function(e){return!e[h.tW.CTRL_OR_CMD]},g=function(e){return e.isBindingEnabled},v=function(e,t){var n=[];return t.forEach((function(t){var r=e.getNonDeletedElement(t);null!=r&&n.push(r)})),n},y=function(e,t,n){var r=new Set,i=new Set;b(e,t,n,"start",r,i),b(e,n,t,"end",r,i);var o=Array.from(i).filter((function(e){return!r.has(e)}));v(c.Z.getScene(e),o).forEach((function(t){var n;(0,l.DR)(t,{boundElements:null===(n=t.boundElements)||void 0===n?void 0:n.filter((function(t){return"arrow"!==t.type||t.id!==e.id}))})}))},b=function(e,t,n,r,i,o){if("keep"!==t)if(null!=t)null!=n&&("keep"===n?E(e,t,r):"start"!==r&&n.id===t.id)||(k(e,t,r),i.add(t.id));else{var a=T(e,r);null!=a&&o.add(a)}},x=function(e){e.forEach((function(e){(0,a.Mn)(e)?y(e,j(e,"start"),j(e,"end")):(0,a.f0)(e)&&w(e)}))},w=function(e){B(e).forEach((function(t){var n=(0,i.Z)(t,2),r=n[0],o=n[1];return y(r,"end"===o?"keep":e,"start"===o?"keep":e)}))},_=function(e,t,n,r){null!=t.startBoundElement&&k(e,t.startBoundElement,"start");var i=M(r,n);null==i||E(e,i,"end")||k(e,i,"end")},k=function(e,t,n){(0,l.DR)(e,(0,r.Z)({},"start"===n?"startBinding":"endBinding",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({elementId:t.id},I(e,t,n)))),(0,d.xn)(t.boundElements||[]).has(e.id)||(0,l.DR)(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},E=function(e,t,n){var r=e["start"===n?"endBinding":"startBinding"];return S(e,null==r?void 0:r.elementId,t)},S=function(e,t,n){return t===n.id&&e.points.length<3},C=function(e){e.forEach((function(e){(0,a.Mn)(e)&&y(e,null,null)}))},T=function(e,t){var n="start"===t?"startBinding":"endBinding",i=e[n];return null==i?null:((0,l.DR)(e,(0,r.Z)({},n,null)),i.elementId)},M=function(e,t){return(0,o.QG)(t.getNonDeletedElements(),(function(t){return(0,a.f0)(t,!1)&&(0,s.uu)(t,e)}))},I=function(e,t,n){var r="start"===n?-1:1,i=-1===r?0:e.points.length-1,o=i-r,a=u._.getPointAtIndexGlobalCoordinates(e,i),l=u._.getPointAtIndexGlobalCoordinates(e,o);return{focus:(0,s.T_)(t,l,a),gap:Math.max(1,(0,s.oT)(t,a))}},O=function(e,t){var n,r=(null!==(n=e.boundElements)&&void 0!==n?n:[]).filter((function(e){return"arrow"===e.type}));if(0!==r.length){var i=null!=t?t:{},o=i.newSize,s=i.simultaneouslyUpdated,u=P(s);v(c.Z.getScene(e),r.map((function(e){return e.id}))).forEach((function(t){if((0,a.bt)(t)){var n=e;if(A(t,n)){var r=L(n,t.startBinding,o),i=L(n,t.endBinding,o);u.has(t.id)?(0,l.DR)(t,{startBinding:r,endBinding:i}):(D(t,"start",r,e),D(t,"end",i,e),(0,p.WJ)(t)&&(0,p.RB)(t,!1))}}}))}},A=function(e,t){var n,r;return(null===(n=e.startBinding)||void 0===n?void 0:n.elementId)===t.id||(null===(r=e.endBinding)||void 0===r?void 0:r.elementId)===t.id},P=function(e){return new Set((e||[]).map((function(e){return e.id})))},D=function(e,t,n,i){if(!(null==n||n.elementId!==i.id&&e.points.length>2)){var o=c.Z.getScene(e).getElement(n.elementId);if(null!=o){var a,l="start"===t?-1:1,d=-1===l?0:e.points.length-1,h=d-l,p=u._.getPointAtIndexGlobalCoordinates(e,h),f=(0,s.j_)(o,n.focus,p);if(0===n.gap)a=f;else{var m=(0,s.MZ)(o,p,f,n.gap);a=0===m.length?f:m[0]}u._.movePoints(e,[{index:d,point:u._.pointFromAbsoluteCoords(e,a)}],(0,r.Z)({},"start"===t?"startBinding":"endBinding",n))}}},L=function(e,t,n){if(null==t||null==n)return t;var r=t.gap,i=t.focus,o=t.elementId,a=n.width,l=n.height,c=e.width,u=e.height;return{elementId:o,gap:Math.max(1,Math.min((0,s.fb)(e,a,l),r*(a<l?a/c:l/u))),focus:i}},R=function(e){var t=new Set(e.map((function(e){return e.id})));return e.flatMap((function(e){return(0,a.Mn)(e,!1)?z(e).filter((function(e){return!t.has(e.id)})):(0,a.f0)(e,!1)?B(e).filter((function(e){return!t.has(e[0].id)})):[]}))},z=function(e){return[j(e,"start"),j(e,"end")].filter((function(e){return null!=e}))},j=function(e,t){return M(N(e,t),c.Z.getScene(e))},N=function(e,t){var n="start"===t?0:-1;return(0,d.AK)(u._.getPointAtIndexGlobalCoordinates(e,n))},B=function(e){return c.Z.getScene(e).getNonDeletedElements().map((function(t){if(!(0,a.Mn)(t,!1))return null;var n=F(t,"start",e),r=F(t,"end",e);return n||r?[t,n&&r?"both":n?"start":"end",e]:null})).filter((function(e){return null!=e}))},F=function(e,t,n){return null==e["start"===t?"startBinding":"endBinding"]&&!E(e,n,t)&&(0,s.uu)(n,N(e,t))},V=function(e,t,n,r){var i=new Set,o=new Set,s="duplicatesServeAsOld"===r;t.forEach((function(e){var t=e.boundElements;if(null!=t&&t.length>0&&(t.forEach((function(e){s&&!n.has(e.id)&&i.add(e.id)})),o.add(n.get(e.id))),(0,a.Mn)(e)){if(null!=e.startBinding){var r=e.startBinding.elementId;s&&!n.has(r)&&o.add(r)}if(null!=e.endBinding){var l=e.endBinding.elementId;s&&!n.has(l)&&o.add(l)}null==e.startBinding&&null==e.endBinding||i.add(n.get(e.id))}})),e.filter((function(e){var t=e.id;return i.has(t)})).forEach((function(e){var t=e.startBinding,r=e.endBinding;(0,l.DR)(e,{startBinding:U(t,n),endBinding:U(r,n)})})),e.filter((function(e){var t=e.id;return o.has(t)})).forEach((function(e){var t=e.boundElements;null!=t&&t.length>0&&(0,l.DR)(e,{boundElements:t.map((function(e){return n.has(e.id)?{id:n.get(e.id),type:e.type}:e}))})}))},U=function(e,t){var n;if(null==e)return null;var r=e.elementId;return{focus:e.focus,gap:e.gap,elementId:null!==(n=t.get(r))&&void 0!==n?n:r}},$=function(e,t){var n=new Set(t.map((function(e){return e.id}))),r=new Set;t.forEach((function(e){var t;(0,a.f0)(e)?null===(t=e.boundElements)||void 0===t||t.forEach((function(e){n.has(e.id)||r.add(e.id)})):(0,a.Mn)(e)&&(e.startBinding&&r.add(e.startBinding.elementId),e.endBinding&&r.add(e.endBinding.elementId))})),e.filter((function(e){var t=e.id;return r.has(t)})).forEach((function(e){(0,a.f0)(e)?(0,l.DR)(e,{boundElements:H(e.boundElements,n)}):(0,a.Mn)(e)&&(0,l.DR)(e,{startBinding:Z(e.startBinding,n),endBinding:Z(e.endBinding,n)})}))},Z=function(e,t){return null==e||t.has(e.elementId)?null:e},H=function(e,t){return e?e.filter((function(e){return!t.has(e.id)})):null}},8925:function(e,t,n){n.d(t,{CM:function(){return g},IX:function(){return b},KP:function(){return S},Pi:function(){return E},UC:function(){return m},Ut:function(){return T},Y5:function(){return _},os:function(){return M},qf:function(){return f},v2:function(){return I},wC:function(){return C}});var r=n(2577),i=n(1930),o=n(6552),a=n(8234),s=n(3063),l=n(1974),c=n(5001),u=n(5710),d=n(6938);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,l.F9)(e))return w(e);if((0,l.bt)(e))return d._.getElementAbsoluteCoords(e,t);if((0,l.iB)(e)){var n=(0,u.tl)(e);if((0,l.Yv)(n)){var r=d._.getBoundTextElementPosition(n,e);return[r.x,r.y,r.x+e.width,r.y+e.height,r.x+e.width/2,r.y+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},m=function(e){var t=Math.floor(e.width/2)+1,n=e.width,r=Math.floor(e.height/2)+1;return[t,0,n,r,t,e.height,0,r]},g=function(e){var t,n=h(e.sets);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("path"===r.type)return r.ops}}catch(e){n.e(e)}finally{n.f()}return e.sets[0].ops},v=function(e,t,n,r,i){var o=1-e;return Math.pow(o,3)*t+3*Math.pow(o,2)*e*n+3*o*Math.pow(e,2)*r+Math.pow(e,3)*i},y=function(e,t,n,r){var i=t-e,o=n-t,a=3*i-6*o+3*(r-n),s=6*o-6*i,l=3*i,c=s*s-4*a*l;if(!(c>=0))return!1;var u=null,d=null,h=1/0,p=1/0;return 0===a?h=p=-l/s:(h=(-s+Math.sqrt(c))/(2*a),p=(-s-Math.sqrt(c))/(2*a)),h>=0&&h<=1&&(u=v(h,e,t,n,r)),p>=0&&p<=1&&(d=v(p,e,t,n,r)),[u,d]},b=function(e,t){var n=[0,0],o=e.reduce((function(e,o){var a=o.op,s=o.data;if("move"===a)n=s;else if("bcurveTo"===a){var l=[s[0],s[1]],c=[s[2],s[3]],u=[s[4],s[5]],d=t?t.apply(void 0,l):l,h=t?t.apply(void 0,c):c,p=t?t.apply(void 0,u):u,f=t?t.apply(void 0,(0,i.Z)(n)):n;n=u;var m=function(e,t,n,r){var o=y(e[0],t[0],n[0],r[0]),a=y(e[1],t[1],n[1],r[1]),s=Math.min(e[0],r[0]),l=Math.max(e[0],r[0]);if(o){var c=o.filter((function(e){return null!==e}));s=Math.min.apply(Math,[s].concat((0,i.Z)(c))),l=Math.max.apply(Math,[l].concat((0,i.Z)(c)))}var u=Math.min(e[1],r[1]),d=Math.max(e[1],r[1]);if(a){var h=a.filter((function(e){return null!==e}));u=Math.min.apply(Math,[u].concat((0,i.Z)(h))),d=Math.max.apply(Math,[d].concat((0,i.Z)(h)))}return[s,u,l,d]}(f,d,h,p),g=(0,r.Z)(m,4),v=g[0],b=g[1],x=g[2],w=g[3];e.minX=Math.min(e.minX,v),e.minY=Math.min(e.minY,b),e.maxX=Math.max(e.maxX,x),e.maxY=Math.max(e.maxY,w)}return e}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[o.minX,o.minY,o.maxX,o.maxY]},x=function(e){var t,n=1/0,i=1/0,o=-1/0,a=-1/0,s=h(e);try{for(s.s();!(t=s.n()).done;){var l=(0,r.Z)(t.value,2),c=l[0],u=l[1];n=Math.min(n,c),i=Math.min(i,u),o=Math.max(o,c),a=Math.max(a,u)}}catch(e){s.e(e)}finally{s.f()}return[n,i,o,a]},w=function(e){var t=x(e.points),n=(0,r.Z)(t,4),i=n[0],o=n[1],a=n[2],s=n[3],l=i+e.x,c=o+e.y,u=a+e.x,d=s+e.y;return[l,c,u,d,(l+u)/2,(c+d)/2]},_=function(e,t,n,i){var a=g(t[0]);if(a.length<1)return null;var s="start"===n?1:a.length-1,l=a[s].data,c=[l[4],l[5]],u=[l[2],l[3]],d=[l[0],l[1]],h=a[s-1],p=[0,0];"move"===h.op?p=h.data:"bcurveTo"===h.op&&(p=[h.data[4],h.data[5]]);var f=function(e,t){return Math.pow(1-e,3)*c[t]+3*e*Math.pow(1-e,2)*u[t]+3*Math.pow(e,2)*(1-e)*d[t]+p[t]*Math.pow(e,3)},m="start"===n?p:c,v=(0,r.Z)(m,2),y=v[0],b=v[1],x=[f(.3,0),f(.3,1)],w=x[0],_=x[1],k=Math.hypot(y-w,b-_),E=(y-w)/k,S=(b-_)/k,C={arrow:30,bar:15,dot:15,triangle:15}[i],T=0;if("arrow"===i){var M=(0,r.Z)(e.points[e.points.length-1],2),I=M[0],O=M[1],A=e.points.length>1?e.points[e.points.length-2]:[0,0],P=(0,r.Z)(A,2),D=P[0],L=P[1];T=Math.hypot(I-D,O-L)}else for(var R=0;R<e.points.length;R++){var z=e.points[R-1]||[0,0],j=(0,r.Z)(z,2),N=j[0],B=j[1],F=(0,r.Z)(e.points[R],2),V=F[0],U=F[1];T+=Math.hypot(V-N,U-B)}var $=Math.min(C,T/2),Z=y-E*$,H=b-S*$;if("dot"===i)return[y,b,Math.hypot(H-b,Z-y)+e.strokeWidth];var W={arrow:20,bar:90,triangle:25}[i],q=(0,o.U1)(Z,H,y,b,-W*Math.PI/180),G=(0,r.Z)(q,2),K=G[0],Y=G[1],X=(0,o.U1)(Z,H,y,b,W*Math.PI/180),J=(0,r.Z)(X,2);return[y,b,K,Y,J[0],J[1]]},k=function(e,t,n){var i;if(e.points.length<2){var l=(0,r.Z)(e.points[0],2),c=l[0],h=l[1],p=(0,o.U1)(e.x+c,e.y+h,t,n,e.angle),f=(0,r.Z)(p,2),m=f[0],v=f[1],y=[m,v,m,v],x=(0,u.WJ)(e);if(x){var w=d._.getMinMaxXYWithBoundText(e,[m,v,m,v],x);y=[w[0],w[1],w[2],w[3]]}return y}var _=null===(i=(0,s.R2)(e))||void 0===i?void 0:i[0],k=null!=_?_:function(e){var t=a.Z.generator(),n=(0,s.i)(e);return t[e.roundness?"curve":n.fill?"polygon":"linearPath"](e.points,n)}(e),E=g(k),S=b(E,(function(r,i){return(0,o.U1)(e.x+r,e.y+i,t,n,e.angle)})),C=[S[0],S[1],S[2],S[3]],T=(0,u.WJ)(e);if(T){var M=d._.getMinMaxXYWithBoundText(e,C,T);C=[M[0],M[1],M[2],M[3]]}return C},E=function(e){var t,n=f(e),i=(0,r.Z)(n,6),a=i[0],s=i[1],c=i[2],u=i[3],d=i[4],h=i[5];if((0,l.F9)(e)){var p=x(e.points.map((function(t){var n=(0,r.Z)(t,2),i=n[0],a=n[1];return(0,o.U1)(i,a,d-e.x,h-e.y,e.angle)}))),m=(0,r.Z)(p,4),g=m[0],v=m[1],y=m[2],b=m[3];return[g+e.x,v+e.y,y+e.x,b+e.y]}if((0,l.bt)(e))t=k(e,d,h);else if("diamond"===e.type){var w=(0,o.U1)(d,s,d,h,e.angle),_=(0,r.Z)(w,2),E=_[0],S=_[1],C=(0,o.U1)(d,u,d,h,e.angle),T=(0,r.Z)(C,2),M=T[0],I=T[1],O=(0,o.U1)(a,h,d,h,e.angle),A=(0,r.Z)(O,2),P=A[0],D=A[1],L=(0,o.U1)(c,h,d,h,e.angle),R=(0,r.Z)(L,2),z=R[0],j=R[1];t=[Math.min(E,M,P,z),Math.min(S,I,D,j),Math.max(E,M,P,z),Math.max(S,I,D,j)]}else if("ellipse"===e.type){var N=(c-a)/2,B=(u-s)/2,F=Math.cos(e.angle),V=Math.sin(e.angle),U=Math.hypot(N*F,B*V),$=Math.hypot(B*F,N*V);t=[d-U,h-$,d+U,h+$]}else{var Z=(0,o.U1)(a,s,d,h,e.angle),H=(0,r.Z)(Z,2),W=H[0],q=H[1],G=(0,o.U1)(a,u,d,h,e.angle),K=(0,r.Z)(G,2),Y=K[0],X=K[1],J=(0,o.U1)(c,u,d,h,e.angle),Q=(0,r.Z)(J,2),ee=Q[0],te=Q[1],ne=(0,o.U1)(c,s,d,h,e.angle),re=(0,r.Z)(ne,2),ie=re[0],oe=re[1];t=[Math.min(W,Y,ee,ie),Math.min(q,X,te,oe),Math.max(W,Y,ee,ie),Math.max(q,X,te,oe)]}return t},S=function(e){if(!e.length)return[0,0,0,0];var t=1/0,n=-1/0,i=1/0,o=-1/0;return e.forEach((function(e){var a=E(e),s=(0,r.Z)(a,4),l=s[0],c=s[1],u=s[2],d=s[3];t=Math.min(t,l),i=Math.min(i,c),n=Math.max(n,u),o=Math.max(o,d)})),[t,i,n,o]},C=function(e,t,n,i){if(!(0,l.bt)(e)&&!(0,l.F9)(e))return[e.x,e.y,e.x+t,e.y+n];var o,u=(0,c.z)(0,t,(0,c.z)(1,n,e.points,i),i);if((0,l.F9)(e))o=x(u);else{var d=a.Z.generator(),h=e.roundness?d.curve(u,(0,s.i)(e)):d.linearPath(u,(0,s.i)(e)),p=g(h);o=b(p)}var f=o,m=(0,r.Z)(f,4),v=m[0],y=m[1],w=m[2],_=m[3];return[v+e.x,y+e.y,w+e.x,_+e.y]},T=function(e,t){var n=a.Z.generator(),i=null==e.roundness?n.linearPath(t,(0,s.i)(e)):n.curve(t,(0,s.i)(e)),o=g(i),l=b(o),c=(0,r.Z)(l,4),u=c[0],d=c[1],h=c[2],p=c[3];return[u+e.x,d+e.y,h+e.x,p+e.y]},M=function(e,t){if(!e.length)return[0,0,0,0];var n=1/0,i=e[0];return e.forEach((function(e){var a=E(e),s=(0,r.Z)(a,4),l=s[0],c=s[1],u=s[2],d=s[3],h=(0,o.LW)((l+u)/2,(c+d)/2,t.x,t.y);h<n&&(n=h,i=e)})),E(i)},I=function(e){var t=S(e),n=(0,r.Z)(t,4),i=n[0],o=n[1],a=n[2],s=n[3];return{minX:i,minY:o,maxX:a,maxY:s,width:a-i,height:s-o,midX:(i+a)/2,midY:(o+s)/2}}},2325:function(e,t,n){n.d(t,{uu:function(){return $},T_:function(){return ae},j_:function(){return se},oT:function(){return W},wX:function(){return N},MZ:function(){return le},wB:function(){return B},Qu:function(){return F},pX:function(){return U},fb:function(){return Z}});var r=n(2577),i=function(e,t){return[0,0,0,0,t,e,1,0]},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[0,0,0,0,0,0,0,0];if(t<0||t>7)throw new Error("Expected `index` between 0 and 7, got `".concat(t,"`"));return 0!==e&&(n[t]=e),n},a=function(e){return[e[0],e[1],e[2],e[3],-e[4],-e[5],-e[6],-e[7]]},s=function(e,t){return m(t)?[e[0]-t,e[1],e[2],e[3],e[4],e[5],e[6],e[7]]:[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7]]},l=function(e,t){return m(t)?[e[0]*t,e[1]*t,e[2]*t,e[3]*t,e[4]*t,e[5]*t,e[6]*t,e[7]*t]:[c(e,t),t[1]*e[0]+t[0]*e[1]-t[4]*e[2]+t[5]*e[3]+t[2]*e[4]-t[3]*e[5]-t[7]*e[6]-t[6]*e[7],t[2]*e[0]+t[0]*e[2]-t[6]*e[3]+t[3]*e[6],t[3]*e[0]+t[6]*e[2]+t[0]*e[3]-t[2]*e[6],t[4]*e[0]+t[2]*e[1]-t[1]*e[2]+t[7]*e[3]+t[0]*e[4]+t[6]*e[5]-t[5]*e[6]+t[3]*e[7],t[5]*e[0]-t[3]*e[1]+t[7]*e[2]+t[1]*e[3]-t[6]*e[4]+t[0]*e[5]+t[4]*e[6]+t[2]*e[7],t[6]*e[0]+t[3]*e[2]-t[2]*e[3]+t[0]*e[6],t[7]*e[0]+t[6]*e[1]+t[5]*e[2]+t[4]*e[3]+t[3]*e[4]+t[2]*e[5]+t[1]*e[6]+t[0]*e[7]]},c=function(e,t){return t[0]*e[0]+t[2]*e[2]+t[3]*e[3]-t[6]*e[6]},u=function(e,t){return[d(e,t),e[1]*t[7]+e[4]*t[5]-e[5]*t[4]+e[7]*t[1],e[2]*t[7]-e[4]*t[6]+e[6]*t[4]+e[7]*t[2],e[3]*t[7]+e[5]*t[6]-e[6]*t[5]+e[7]*t[3],e[4]*t[7]+e[7]*t[4],e[5]*t[7]+e[7]*t[5],e[6]*t[7]+e[7]*t[6],e[7]*t[7]]},d=function(e,t){return e[0]*t[7]+e[1]*t[6]+e[2]*t[5]+e[3]*t[4]+e[4]*t[3]+e[5]*t[2]+e[6]*t[1]+e[7]*t[0]},h=function(e){return Math.sqrt(Math.abs(e[0]*e[0]-e[2]*e[2]-e[3]*e[3]+e[6]*e[6]))},p=function(e){var t=h(e);if(0===t||1===t)return e;var n=e[6]<0?-1:1;return l(e,n/t)},f=function(e){var t=function(e){return Math.sqrt(Math.abs(e[7]*e[7]-e[5]*e[5]-e[4]*e[4]+e[1]*e[1]))}(e);return 0===t||1===t?e:l(e,1/t)},m=function(e){return"number"==typeof e},g=(o(1,1),o(1,2),o(1,3),o(1,4),o(1,5),o(1,6),o(1,7),function(e,t,n){return p([0,n,e,t,0,0,0,0])}),v=function(e,t){return p(u(t,e))},y=function(e,t){return n=e,[(r=t)[0]*n[0]+r[2]*n[2]+r[3]*n[3]-r[6]*n[6],r[1]*n[0]+r[0]*n[1]-r[4]*n[2]+r[5]*n[3]+r[2]*n[4]-r[3]*n[5]-r[7]*n[6]-r[6]*n[7],r[2]*n[0]+r[0]*n[2]-r[6]*n[3]+r[3]*n[6],r[3]*n[0]+r[6]*n[2]+r[0]*n[3]-r[2]*n[6],r[4]*n[0]+r[7]*n[3]+r[0]*n[4]+r[3]*n[7],r[5]*n[0]+r[7]*n[2]+r[0]*n[5]+r[2]*n[7],r[6]*n[0]+r[0]*n[6],r[7]*n[0]+r[0]*n[7]];var n,r},b=function(e){var t=(0,r.Z)(e,2),n=t[0];return[0,0,0,0,t[1],n,1,0]},x=function(e){return[e[5],e[4]]},w=function(e,t){return p((n=e,[(r=t)[0]*n[0],r[1]*n[0]+r[0]*n[1],r[2]*n[0]+r[0]*n[2],r[3]*n[0]+r[0]*n[3],r[4]*n[0]+r[2]*n[1]-r[1]*n[2]+r[0]*n[4],r[5]*n[0]-r[3]*n[1]+r[1]*n[3]+r[0]*n[5],r[6]*n[0]+r[3]*n[2]-r[2]*n[3]+r[0]*n[6],r[7]*n[0]+r[6]*n[1]+r[5]*n[2]+r[4]*n[3]+r[3]*n[4]+r[2]*n[5]+r[1]*n[6]]));var n,r},_=function(e,t){return h(u(e,t))},k=function(e,t){return d(e,t)},E=function(e){return[0,0,0,0,e[4],e[5],0,0]},S=function(e,t){return n=l(e,Math.sin(t/2)),r=Math.cos(t/2),m(r)?[n[0]+r,n[1],n[2],n[3],n[4],n[5],n[6],n[7]]:[n[0]+r[0],n[1]+r[1],n[2]+r[2],n[3]+r[3],n[4]+r[4],n[5]+r[5],n[6]+r[6],n[7]+r[7]];var n,r},C=function(e,t){return p(l(l(e,t),a(e)))},T=n(6552),M=n(1493),I=n(8925),O=n(3063),A=n(1974),P=n(1047),D=n(6340),L=n(267),R=n(5710);function z(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=function e(t,n,r,i){var o=10/n.zoom.value,a=[r,i];if(V(n,t)&&(0,L.oY)([t],n))return U(t,a,o);var s=(0,R.WJ)(t);return!(!s||!e(s,n,r,i))||F(t,n,a)},B=function(e,t,n,r){var i=10/t.zoom.value,o=(0,R.WJ)(e);return(!o||!N(o,t,n,r))&&!F(e,t,[n,r])&&U(e,[n,r],i)},F=function(e,t,n){var r=10/t.zoom.value,i=(0,P.iB)(e)?q:function(e){if("arrow"===e.type)return!1;if("freedraw"===e.type)return!0;var t=!(0,D.Qm)(e.backgroundColor)||(0,A.Xo)(e);return"line"===e.type?t&&(0,T.g6)(e.points):t||(0,A.pC)(e)}(e)?G:K;return H({element:e,point:n,threshold:r,check:i})},V=function(e,t){return e.selectedElementIds[t.id]},U=function(e,t,n){var i=(0,r.Z)(t,2),o=i[0],a=i[1],s=(0,I.qf)(e),l=(0,r.Z)(s,4),c=l[0],u=l[1],d=l[2],h=l[3],p=(c+d)/2,f=(u+h)/2,m=(0,T.U1)(o,a,p,f,-e.angle),g=(0,r.Z)(m,2),v=g[0],y=g[1];return v>c-n&&v<d+n&&y>u-n&&y<h+n},$=function(e,t){var n=t.x,r=t.y,i=Z(e,e.width,e.height);return H({element:e,point:[n,r],threshold:i,check:Y})},Z=function(e,t,n){var r=("diamond"===e.type?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*r,32))},H=function(e){switch(e.element.type){case"rectangle":case"image":case"text":case"diamond":case"ellipse":var t=W(e.element,e.point);return e.check(t,e.threshold);case"freedraw":return!!e.check(X(e.element,e.point),e.threshold)&&te(e.element,e.point,e.threshold);case"arrow":case"line":return ne(e);case"selection":return console.warn("This should not happen, we need to investigate why it does."),!1}},W=function(e,t){switch(e.type){case"rectangle":case"image":case"text":return X(e,t);case"diamond":return J(e,t);case"ellipse":return Q(e,t)}},q=function(e,t){return e<0},G=function(e,t){return e<t},K=function(e,t){return Math.abs(e)<t},Y=function(e,t){return 0<=e&&e<t},X=function(e,t){var n=re(e,t),i=(0,r.Z)(n,4),o=i[1],a=i[2],s=i[3];return Math.max(k(o,g(0,1,-s)),k(o,g(1,0,-a)))},J=function(e,t){var n=re(e,t),i=(0,r.Z)(n,4),o=i[1],a=i[2],s=i[3],l=g(s,a,-s*a);return k(o,l)},Q=function(e,t){var n,i=ee(e,t),o=(0,r.Z)(i,2),a=o[0],s=o[1];return n=s,-Math.sign(n[1])*k(a,s)},ee=function(e,t){var n=re(e,t),o=(0,r.Z)(n,4),a=o[1],s=o[2],l=o[3],c=x(a),u=(0,r.Z)(c,2),d=u[0],h=u[1],p=.707,f=.707,m=s,g=l;[0,1,2,3].forEach((function(e){var t=m*p,n=g*f,r=(m*m-g*g)*Math.pow(p,3)/m,i=(g*g-m*m)*Math.pow(f,3)/g,o=t-r,a=n-i,s=d-r,l=h-i,c=Math.hypot(a,o),u=Math.hypot(l,s);p=Math.min(1,Math.max(0,(s*c/u+r)/m)),f=Math.min(1,Math.max(0,(l*c/u+i)/g));var v=Math.hypot(f,p);p/=v,f/=v}));var b,w=i(m*p,g*f);return[a,y(v(a,b=w),b)]},te=function(e,t,n){var i,o;if(0===e.angle)i=t[0]-e.x,o=t[1]-e.y;else{var a=(0,I.qf)(e),s=(0,r.Z)(a,4),l=s[0],c=s[1],u=s[2],d=s[3],h=(0,T.xj)(t,[l+(u-l)/2,c+(d-c)/2],-e.angle);i=h[0]-e.x,o=h[1]-e.y}var p,f=(0,r.Z)(e.points,2),m=f[0],g=f[1];if((0,T.LW)(m[0],m[1],i,o)<n||(0,T.LW)(g[0],g[1],i,o)<n)return!0;for(var v=0;v<e.points.length;v++){var y=[g[0]-m[0],g[1]-m[1]],b=Math.hypot(y[1],y[0]),x=[y[0]/b,y[1]/b],w=[i-m[0],o-m[1]],_=(w[0]*x[0]+w[1]*x[1])/Math.hypot(x[1],x[0]);p=[m[0]+x[0]*_,m[1]+x[1]*_];var k=(0,T.LW)(p[0],p[1],m[0],m[1]),E=(0,T.LW)(p[0],p[1],g[0],g[1]);if(p=E<k&&k>b?g:k<E&&E>b?m:p,Math.hypot(o-p[1],i-p[0])<n)return!0;m=g,g=e.points[v+1]}var S=(0,O.R2)(e);return!(!S||!S.sets.length)&&ye(S,i,o,n)},ne=function(e){var t=e.element,n=e.threshold;if(!(0,O.R2)(t))return!1;var i=re(e.element,e.point),o=(0,r.Z)(i,4),a=o[0],s=o[1],l=o[2],c=o[3],u=g(0,1,-c),d=g(1,0,-l);if(!G(k(s,u),n)||!G(k(s,d),n))return!1;var h=x(a),p=(0,r.Z)(h,2),f=p[0],m=p[1],v=(0,O.R2)(t);return!!v&&(!(e.check!==G||!v.some((function(e){return ve(e,f,m,t.roundness?"round":"sharp")})))||v.some((function(e){return ye(e,f,m,n)})))},re=function(e,t){var n,i=b(t),o=(0,I.qf)(e),a=(0,r.Z)(o,4),l=a[0],c=a[1],u=a[2],d=a[3],h=(0,I.qf)(e),p=oe([l,c,u,d]),f=S(p,e.angle),m=C(f,i),g=function(e){return[0,0,0,0,Math.abs(e[4]),Math.abs(e[5]),1,0]}(s(m,E(p))),v=(n=e.x,[0,0,0,0,e.y,n,0,0]),y=s(m,v),x=(0,r.Z)(h,4),w=x[0],_=x[1];return[y,g,(x[2]-w)/2,(x[3]-_)/2]},ie=function(e){var t=(0,I.qf)(e),n=(0,r.Z)(t,4),i=n[0],o=n[1],s=n[2],c=n[3],u=oe([i,o,s,c]),d=S(u,e.angle),h=a(function(e){return[1,0,0,0,-.5*e[5],.5*e[4],0,0]}(E(u)));return l(h,d)},oe=function(e){var t=(0,r.Z)(e,4),n=t[0],o=t[1],a=t[2],s=t[3];return i((n+a)/2,(o+s)/2)},ae=function(e,t,n){var r=ie(e),i=C(r,b(t)),o=C(r,b(n)),a=v(i,o),s=e.height/e.width,l=e.width/2,c=e.height/2,u=a[2],d=a[3],h=a[1],p=Math.abs(d),f=Math.abs(u);switch(e.type){case"rectangle":case"image":case"text":return h/(l*(f+s*p));case"diamond":return p<f?h/(f*l):h/(p*c);case"ellipse":return h/(l*Math.sqrt(Math.pow(u,2)+Math.pow(s,2)*Math.pow(d,2)))}},se=function(e,t,n){if(0===t){var i=(0,I.qf)(e),o=(0,r.Z)(i,4),s=o[0],l=o[1],c=o[2],u=o[3],d=oe([s,l,c,u]);return x(d)}var h,p=ie(e),f=C(p,b(n)),m=a(p);switch(e.type){case"rectangle":case"image":case"text":case"diamond":h=ge(e,t,f);break;case"ellipse":h=me(e,t,f)}return x(C(m,h))},le=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=ie(e),o=C(i,b(t)),s=C(i,b(n)),l=v(o,s),c=a(i);return ce(e,l,o,r).map((function(e){return x(C(c,e))}))},ce=function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;switch(e.type){case"rectangle":case"image":case"text":case"diamond":var o=ue(e);r=o.flatMap((function(e,n){var r=[e,o[(n+1)%4]];return de(t,he(r,i))})).concat(o.flatMap((function(e){return fe(e,i,t)})));break;case"ellipse":r=pe(e,i,t)}if(r.length<2)return[];var a=r.sort((function(e,t){return _(e,n)-_(t,n)}));return[a[0],a[a.length-1]]},ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t*e.width/2,r=t*e.height/2;switch(e.type){case"rectangle":case"image":case"text":return[i(n,r),i(n,-r),i(-n,-r),i(-n,r)];case"diamond":return[i(0,r),i(n,0),i(0,-r),i(-n,0)]}},de=function(e,t){var n=(0,r.Z)(t,2),i=n[0],o=n[1];return k(i,e)*k(o,e)>=0?[]:[w(e,v(i,o))]},he=function(e,t){var n=(0,r.Z)(e,2),i=n[0],o=n[1],a=function(e,t){var n=.5*t;return[1,0,0,0,n*e[4],n*e[5],0,0]}(function(e,t){return f([0,0,0,0,t[4]-e[4],t[5]-e[5],0,0])}(i,o),t);return[C(a,i),C(a,o)]},pe=function(e,t,n){var r=e.width/2+t,o=e.height/2+t,a=n[2],s=n[3],l=n[1],c=r*r*a*a+o*o*s*s,u=c-l*l;if(0===c||u<=0)return[];var d=Math.sqrt(u),h=-r*r*a*l,p=-o*o*s*l;return[i((h+r*o*s*d)/c,(p-r*o*a*d)/c),i((h-r*o*s*d)/c,(p+r*o*a*d)/c)]},fe=function(e,t,n){if(0===t)return 0===k(n,e)?[e]:[];var o=n[2],a=n[3],s=n[1],l=x(e),c=(0,r.Z)(l,2),u=c[0],d=c[1],h=o*o+a*a,p=t*t*h-Math.pow(o*u+a*d+s,2);if(0===h||p<=0)return[];var f=Math.sqrt(p),m=u*a*a-d*o*a-o*s,g=d*o*o-u*o*a-a*s;return[i((m+a*f)/h,(g-o*f)/h),i((m-a*f)/h,(g+o*f)/h)]},me=function(e,t,n){var o=Math.abs(t),a=e.width*o/2,s=e.height*o/2,l=Math.sign(t),c=x(n),u=(0,r.Z)(c,2),d=u[0],h=u[1],p=0===h?1e-4:h,f=Math.pow(d,2)*Math.pow(s,2)+Math.pow(p,2)*Math.pow(a,2),m=(-d*Math.pow(s,2)+l*p*Math.sqrt(Math.max(0,f-Math.pow(a,2)*Math.pow(s,2))))/f,g=(-m*d-1)/p;0===g&&(g=.01*(Object.is(g,-0)?-1:1));var v=-Math.pow(a,2)*m/(Math.pow(g,2)*Math.pow(s,2)+Math.pow(m,2)*Math.pow(a,2));return i(v,(-m*v-1)/g)},ge=function(e,t,n){var r=Math.abs(t),i=Math.sign(t),o=ue(e,r),a=0,s=null;return o.forEach((function(e){var t=i*v(n,e)[1];t>a&&(a=t,s=e)})),s},ve=function(e,t,n,r){var i,o=[],a=!1,s=z((0,I.CM)(e));try{for(s.s();!(i=s.n()).done;){var l=i.value;"move"===l.op?(a=!a)&&o.push([l.data[0],l.data[1]]):"bcurveTo"===l.op?a&&(o.push([l.data[0],l.data[1]]),o.push([l.data[2],l.data[3]]),o.push([l.data[4],l.data[5]])):"lineTo"===l.op&&a&&o.push([l.data[0],l.data[1]])}}catch(e){s.e(e)}finally{s.f()}if(o.length>=4){if("sharp"===r)return(0,T.c9)(o,t,n);var c=(0,M.s)(o,10,5);return(0,T.c9)(c,t,n)}return!1},ye=function(e,t,n,i){var o=(0,I.CM)(e),a=[0,0];return o.some((function(o,s){var l=o.op,c=o.data;if("move"===l)a=c;else{if("bcurveTo"===l){var u=[c[0],c[1]],d=[c[2],c[3]],h=[c[4],c[5]],p=a;a=h;var f=function(e,t,n,i,o,a){for(var s=(0,r.Z)(o,2),l=s[0],c=s[1],u=function(r,o){return Math.pow(1-r,3)*i[o]+3*r*Math.pow(1-r,2)*n[o]+3*Math.pow(r,2)*(1-r)*t[o]+e[o]*Math.pow(r,3)},d=0;d<=1;){var h=u(d,0),p=u(d,1);if(Math.sqrt(Math.pow(h-l,2)+Math.pow(p-c,2))<a)return!0;d+=.01}return!1}(p,u,d,h,[t,n],i);return f}if("lineTo"===l)return ve(e,t,n,"sharp");"qcurveTo"===l&&console.warn("qcurveTo is not implemented yet")}return!1}))}},5637:function(e,t,n){n.d(t,{PK:function(){return p},Xx:function(){return f},bp:function(){return g},oA:function(){return m}});var r=n(2577),i=n(7169),o=n(8950),a=n(2975),s=n.n(a),l=n(2335),c=n(8211),u=n(1974);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=function(e){n(e)},r.src=e}))},f=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r,i,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileIds,r=t.files,i=t.imageCache,a=new Map,c=new Map,e.next=5,Promise.all(n.reduce((function(e,t){var n=r[t];return n&&!a.has(t)?(a.set(t,!0),e.concat((0,o.Z)(s().mark((function e(){var r,o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.mimeType!==l.LO.binary){e.next=3;break}throw new Error("Only images can be added to ImageCache");case 3:return r=p(n.dataURL),o={image:r,mimeType:n.mimeType},i.set(t,o),e.next=8,r;case 8:a=e.sent,i.set(t,h(h({},o),{},{image:a})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),c.set(t,!0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))())):e}),[]));case 5:return e.abrupt("return",{imageCache:i,updatedFiles:a,erroredFiles:c});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){return e.filter((function(e){return(0,u.wi)(e)}))},g=function(){var e=(0,o.Z)(s().mark((function e(t){var n,i,o,a,u,d,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(new DOMParser).parseFromString(t,l.LO.svg),i=n.querySelector("svg"),!n.querySelector("parsererror")&&"svg"===(null==(s=i)?void 0:s.nodeName.toLowerCase())){e.next=7;break}throw new Error((0,c.t)("errors.invalidSVGString"));case 7:return i.hasAttribute("xmlns")||i.setAttribute("xmlns",l.hR),i.hasAttribute("width")&&i.hasAttribute("height")||(o=i.getAttribute("viewBox"),a=i.getAttribute("width")||"50",u=i.getAttribute("height")||"50",o&&(d=o.match(/\d+ +\d+ +(\d+) +(\d+)/))&&(h=(0,r.Z)(d,3),a=h[1],u=h[2]),i.setAttribute("width",a),i.setAttribute("height",u)),e.abrupt("return",i.outerHTML);case 10:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}()},1047:function(e,t,n){n.d(t,{ox:function(){return p.ox},BQ:function(){return V},_M:function(){return U},EJ:function(){return O},o8:function(){return T},Sy:function(){return d.Sy},os:function(){return h.os},KP:function(){return h.KP},Un:function(){return _},$V:function(){return I},qf:function(){return h.qf},Pi:function(){return h.Pi},jt:function(){return b},o4:function(){return c},Lm:function(){return N},Qp:function(){return u},T:function(){return k.T},xx:function(){return k.xx},Uo:function(){return z},n2:function(){return x},PC:function(){return p.PC},kK:function(){return p.kK},n_:function(){return j},wX:function(){return f.wX},r2:function(){return o.r2},wB:function(){return f.wB},QD:function(){return s},qP:function(){return B},iB:function(){return o.iB},Up:function(){return d.Up},vw:function(){return d.vw},y8:function(){return d.y8},VL:function(){return d.VL},oN:function(){return S.oN},JZ:function(){return d.JZ},RT:function(){return D},b_:function(){return A.b_},vY:function(){return k.vY},N_:function(){return d.N_}});var r=n(7169),i=n(1935),o=n(1974),a=n(2335),s=function(e){return(0,o.bt)(e)||(0,o.F9)(e)?e.points.length<2:0===e.width&&0===e.height},l=function(e,t,n){var r=Math.abs(t),i=Math.abs(n);if("line"===e||"arrow"===e||"freedraw"===e){var o=Math.round(Math.atan(i/r)/a.ay)*a.ay;0===o?n=0:o===Math.PI/2?t=0:n=r*Math.tan(o)*Math.sign(n)||n}else"selection"!==e&&(n=r*Math.sign(n));return{width:t,height:n}},c=function(e,t,n,r){var i=n-e,o=r-t,s=Math.round(Math.atan(o/i)/a.ay)*a.ay;if(0===s)o=0;else if(s===Math.PI/2)i=0;else{var l=Math.tan(s),c=t-l*e,u=-1/l,d=r-u*n;i=(-1*d- -1*c)/(-1*l- -1*u)-e,o=(c*u-d*l)/(-1*l- -1*u)-t}return{width:i,height:o}},u=function(e){var t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){var n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){var r=Math.abs(e.height);t.height=r,t.y=e.y-r}return t},d=n(2791),h=n(8925),p=n(267),f=n(2325),m=n(2577),g=n(2726),v=["rotation"],y=function(e,t,n){return t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3]},b=function(e,t,n,r,i,o){return e.reduce((function(e,a){if(e)return e;var s=function(e,t,n,r,i,o){if(!t.selectedElementIds[e.id])return!1;var a=(0,p.PC)(e,i,o),s=a.rotation,l=(0,g.Z)(a,v);if(s&&y(s,n,r))return"rotation";var c=Object.keys(l).filter((function(e){var t=l[e];return!!t&&y(t,n,r)}));return c.length>0&&c[0]}(a,t,n,r,i,o);return s?{element:a,transformHandleType:s}:null}),null)},x=function(e,t,n,r,i){var o=(0,m.Z)(e,4),a=o[0],s=o[1],l=o[2],c=o[3],u=(0,p.kK)([a,s,l,c,(a+l)/2,(s+c)/2],0,r,i,p.ox);return Object.keys(u).find((function(e){var r=u[e];return r&&y(r,t,n)}))||!1},w=["ns","nesw","ew","nwse"],_=function(e){var t=e.element,n=e.transformHandleType,r=t&&Math.sign(t.height)*Math.sign(t.width)==-1,i=null;switch(n){case"n":case"s":i="ns";break;case"w":case"e":i="ew";break;case"nw":case"se":i=r?"nesw":"nwse";break;case"ne":case"sw":i=r?"nwse":"nesw";break;case"rotation":return"grab"}return i&&t&&(i=function(e,t){var n=w.indexOf(e);if(n>=0){var r=Math.round(t/(Math.PI/4));e=w[(n+r)%w.length]}return e}(i,t.angle)),i?"".concat(i,"-resize"):""},k=n(8634),E=n(8290),S=n(5710),C=n(242),T=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7?arguments[7]:void 0,l=(0,h.KP)(t),c=(0,m.Z)(l,2),u={x:n-c[0],y:r-c[1]};t.forEach((function(n){if(M(i,o,a,e,n,u),!n.groupIds.length||s.editingGroupId&&!(0,C.zq)(s,n)){var r=(0,S.WJ)(n);r&&M(i,o,a,e,r,u)}(0,E.Ww)(n,{simultaneouslyUpdated:t})}))},M=function(e,t,n,r,o,a){var s,l;if(e){var c=e&&t<n,u=e&&t>n,d=r.originalElements.get(o.id);s=c&&d?d.x:o.x+a.x,l=u&&d?d.y:o.y+a.y}else s=o.x+a.x,l=o.y+a.y;(0,i.DR)(o,{x:s,y:l})},I=function(e,t,n){var r=(0,h.KP)(e),i=(0,m.Z)(r,2);return[t-i[0],n-i[1]]},O=function(e,t,n,r,o,a,s,c,u,d,h){if(u&&"selection"!==e.type)if(h)c=s/h;else{if(Math.abs(a-r)>Math.abs(o-n)){var p=l(t,c,o<n?-s:s);s=p.width,c=p.height}else{var f=l(t,s,a<r?-c:c);s=f.width,c=f.height}c<0&&(c=-c)}var m=o<n?n-s:n,g=a<r?r-c:r;d&&(m=n-(s+=s)/2,g=r-(c+=c)/2),0!==s&&0!==c&&(0,i.DR)(e,{x:m,y:g,width:s,height:c})},A=n(6906),P=n(75),D=function(e,t){return Boolean(!e.viewModeEnabled&&"custom"!==e.activeTool.type&&(e.editingElement||"selection"!==e.activeTool.type&&"eraser"!==e.activeTool.type&&"hand"!==e.activeTool.type)||(0,P.eD)(t,e).length)};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=function(e){return e.reduce((function(e,t){return e+t.version}),0)},j=function(e){return e.filter((function(e){return!e.isDeleted&&!s(e)}))},N=function(e){return e.filter((function(e){return!e.isDeleted}))},B=function(e){return!e.isDeleted},F=function(e){return N(e).map((function(e){return(0,o.dt)(e.type)?R(R({},e),{},{lastCommittedPoint:null}):e}))},V=function(e){return F(e)},U=function(e){return F(e)}},6938:function(e,t,n){n.d(t,{_:function(){return S}});var r=n(1930),i=n(7169),o=n(2577),a=n(8821),s=n(5169),l=n(6552),c=n(1047),u=n(8925),d=n(1935),h=n(1564),p=n(8290),f=n(6340),m=n(1974),g=n(6066),v=n(5710),y=n(3063),b=n(2335);function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={version:null,points:[],zoom:null},S=function(){function e(t,n){(0,a.Z)(this,e),this.elementId=t.id,h.Z.mapElementToScene(this.elementId,n),e.normalizePoints(t),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null}return(0,s.Z)(e,null,[{key:"getElement",value:function(e){var t;return(null===(t=h.Z.getScene(e))||void 0===t?void 0:t.getNonDeletedElement(e))||null}},{key:"handleBoxSelection",value:function(t,n,r){var i;if(!n.editingLinearElement||"selection"!==(null===(i=n.draggingElement)||void 0===i?void 0:i.type))return!1;var a=n.editingLinearElement,s=a.selectedPointsIndices,l=a.elementId,u=e.getElement(l);if(!u)return!1;var d=(0,c.qf)(n.draggingElement),h=(0,o.Z)(d,4),p=h[0],f=h[1],m=h[2],g=h[3],v=e.getPointsGlobalCoordinates(u).reduce((function(e,n,r){return(n[0]>=p&&n[0]<=m&&n[1]>=f&&n[1]<=g||t.shiftKey&&null!=s&&s.includes(r))&&e.push(r),e}),[]);r({editingLinearElement:k(k({},a),{},{selectedPointsIndices:v.length?v:null})})}},{key:"handlePointDragging",value:function(t,n,r,i,a,s){if(!s)return!1;var l=s.selectedPointsIndices,c=s.elementId,u=e.getElement(c);if(!u)return!1;var d=u.points[s.pointerDownState.lastClickedPoint];if(l&&d){if((0,g.Ge)(t)&&1===l.length&&u.points.length>1){var h=l[0],p=u.points[0===h?1:h-1],y=e._getShiftLockedDelta(u,p,[r,i],n.gridSize),b=(0,o.Z)(y,2),x=b[0],w=b[1];e.movePoints(u,[{index:h,point:[x+p[0],w+p[1]],isDragging:h===s.pointerDownState.lastClickedPoint}])}else{var _=e.createPointAt(u,r-s.pointerOffset.x,i-s.pointerOffset.y,n.gridSize),k=_[0]-d[0],E=_[1]-d[1];e.movePoints(u,l.map((function(t){return{index:t,point:t===s.pointerDownState.lastClickedPoint?e.createPointAt(u,r-s.pointerOffset.x,i-s.pointerOffset.y,n.gridSize):[u.points[t][0]+k,u.points[t][1]+E],isDragging:t===s.pointerDownState.lastClickedPoint}}))),(0,v.WJ)(u)&&(0,v.RB)(u,!1)}if((0,m.Mn)(u,!1)){var S=[];0===l[0]&&S.push((0,f.AK)(e.getPointGlobalCoordinates(u,u.points[0])));var C=l[l.length-1];C===u.points.length-1&&S.push((0,f.AK)(e.getPointGlobalCoordinates(u,u.points[C]))),S.length&&a(u,S)}return!0}return!1}},{key:"handlePointerUp",value:function(t,n,r){var i,o=n.elementId,a=n.selectedPointsIndices,s=n.isDragging,c=n.pointerDownState,u=e.getElement(o);if(!u)return n;var d={};if(s&&a){var m,g=x(a);try{for(g.s();!(m=g.n()).done;){var v=m.value;if(0===v||v===u.points.length-1){(0,l.g6)(u.points,r.zoom.value)&&e.movePoints(u,[{index:v,point:0===v?u.points[u.points.length-1]:u.points[0]}]);var y=(0,p.N1)(r)?(0,p.Y9)((0,f.AK)(e.getPointAtIndexGlobalCoordinates(u,v)),h.Z.getScene(u)):null;d[0===v?"startBindingElement":"endBindingElement"]=y}}}catch(e){g.e(e)}finally{g.f()}}return k(k(k({},n),d),{},{selectedPointsIndices:s||t.shiftKey?!s&&t.shiftKey&&null!==(i=c.prevSelectedPointsIndices)&&void 0!==i&&i.includes(c.lastClickedPoint)?a&&a.filter((function(e){return e!==c.lastClickedPoint})):a:null!=a&&a.includes(c.lastClickedPoint)?[c.lastClickedPoint]:a,isDragging:!1,pointerOffset:{x:0,y:0}})}},{key:"isSegmentTooShort",value:function(t,n,r,i){var o=(0,l.LW)(n[0],n[1],r[0],r[1]);return t.points.length>2&&t.roundness&&(o=(0,l.eH)(t,r)),o*i.value<4*e.POINT_HANDLE_SIZE}},{key:"getSegmentMidPoint",value:function(t,n,r,i){var a=(0,l.H5)(n,r);if(t.points.length>2&&t.roundness){var s=(0,l.yB)(t,t.points[i]);if(s){var c=(0,l.lk)(t,t.points[i],.5),u=(0,l.N_)(s[0],s[1],s[2],s[3],c),d=(0,o.Z)(u,2),h=d[0],p=d[1];a=e.getPointGlobalCoordinates(t,[h,p])}}return a}},{key:"getSegmentMidPointIndex",value:function(t,n,r){var i=e.getElement(t.elementId);if(!i)return-1;for(var o=e.getEditorMidPoints(i,n),a=0;a<o.length;){if(e.arePointsEqual(r,o[a]))return a+1;a++}return-1}},{key:"handlePointerDown",value:function(t,n,i,a,s){var u,f={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!s)return f;var g=s.elementId,v=e.getElement(g);if(!v)return f;var y=e.getSegmentMidpointHitCoords(s,a,n),b=null;if(y&&(b=e.getSegmentMidPointIndex(s,n,y)),t.altKey&&n.editingLinearElement)return null==s.lastUncommittedPoint&&((0,d.DR)(v,{points:[].concat((0,r.Z)(v.points),[e.createPointAt(v,a.x,a.y,n.gridSize)])}),f.didAddPoint=!0),i.resumeRecording(),f.linearElementEditor=k(k({},s),{},{pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:-1,origin:{x:a.x,y:a.y},segmentMidpoint:{value:y,index:b,added:!1}},selectedPointsIndices:[v.points.length-1],lastUncommittedPoint:null,endBindingElement:(0,p.Y9)(a,h.Z.getScene(v))}),f.didAddPoint=!0,f;var x=e.getPointIndexUnderCursor(v,n.zoom,a.x,a.y);if(x>=0||y)f.hitElement=v;else{var w=s.startBindingElement,_=s.endBindingElement;(0,p.N1)(n)&&(0,m.Mn)(v)&&(0,p.HG)(v,w,_)}var E=(0,c.qf)(v),S=(0,o.Z)(E,4),T=S[0],M=S[1],I=(T+S[2])/2,O=(M+S[3])/2,A=x>-1&&(0,l.U1)(v.x+v.points[x][0],v.y+v.points[x][1],I,O,v.angle),P=x>-1||t.shiftKey?t.shiftKey||null!==(u=s.selectedPointsIndices)&&void 0!==u&&u.includes(x)?C([].concat((0,r.Z)(s.selectedPointsIndices||[]),[x])):[x]:null;return f.linearElementEditor=k(k({},s),{},{pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:x,origin:{x:a.x,y:a.y},segmentMidpoint:{value:y,index:b,added:!1}},selectedPointsIndices:P,pointerOffset:A?{x:a.x-A[0],y:a.y-A[1]}:{x:0,y:0}}),f}},{key:"arePointsEqual",value:function(e,t){return!e&&!t||!(!e||!t)&&(0,l.Jj)(e,t)}},{key:"handlePointerMove",value:function(t,n,r,i){if(!i.editingLinearElement)return null;var a=i.editingLinearElement,s=a.elementId,l=a.lastUncommittedPoint,c=e.getElement(s);if(!c)return i.editingLinearElement;var u,d=c.points,h=d[d.length-1];if(!t.altKey)return h===l&&e.deletePoints(c,[d.length-1]),k(k({},i.editingLinearElement),{},{lastUncommittedPoint:null});if((0,g.Ge)(t)&&d.length>=2){var p=d[d.length-2],f=e._getShiftLockedDelta(c,p,[n,r],i.gridSize),m=(0,o.Z)(f,2),v=m[0],y=m[1];u=[v+p[0],y+p[1]]}else u=e.createPointAt(c,n-i.editingLinearElement.pointerOffset.x,r-i.editingLinearElement.pointerOffset.y,i.gridSize);return h===l?e.movePoints(c,[{index:c.points.length-1,point:u}]):e.addPoints(c,i,[{point:u}]),k(k({},i.editingLinearElement),{},{lastUncommittedPoint:c.points[c.points.length-1]})}},{key:"getPointGlobalCoordinates",value:function(e,t){var n=(0,c.qf)(e),r=(0,o.Z)(n,4),i=r[0],a=r[1],s=(i+r[2])/2,u=(a+r[3])/2,d=e.x,h=e.y,p=(0,l.U1)(d+t[0],h+t[1],s,u,e.angle),f=(0,o.Z)(p,2);return[d=f[0],h=f[1]]}},{key:"getPointsGlobalCoordinates",value:function(e){var t=(0,c.qf)(e),n=(0,o.Z)(t,4),r=n[0],i=n[1],a=n[2],s=n[3],u=(r+a)/2,d=(i+s)/2;return e.points.map((function(t){var n=e.x,r=e.y,i=(0,l.U1)(n+t[0],r+t[1],u,d,e.angle),a=(0,o.Z)(i,2);return[n=a[0],r=a[1]]}))}},{key:"getPointAtIndexGlobalCoordinates",value:function(e,t){var n=t<0?e.points.length+t:t,r=(0,c.qf)(e),i=(0,o.Z)(r,4),a=i[0],s=i[1],u=(a+i[2])/2,d=(s+i[3])/2,h=e.points[n],p=e.x,f=e.y;return h?(0,l.U1)(p+h[0],f+h[1],u,d,e.angle):(0,l.U1)(p,f,u,d,e.angle)}},{key:"pointFromAbsoluteCoords",value:function(e,t){var n=(0,c.qf)(e),r=(0,o.Z)(n,4),i=r[0],a=r[1],s=(i+r[2])/2,u=(a+r[3])/2,d=(0,l.U1)(t[0],t[1],s,u,-e.angle),h=(0,o.Z)(d,2),p=h[0],f=h[1];return[p-e.x,f-e.y]}},{key:"getPointIndexUnderCursor",value:function(t,n,r,i){for(var o=e.getPointsGlobalCoordinates(t),a=o.length;--a>-1;){var s=o[a];if((0,l.LW)(r,i,s[0],s[1])*n.value<e.POINT_HANDLE_SIZE+1)return a}return-1}},{key:"createPointAt",value:function(e,t,n,r){var i=(0,l.wC)(t,n,r),a=(0,c.qf)(e),s=(0,o.Z)(a,4),u=s[0],d=s[1],h=(u+s[2])/2,p=(d+s[3])/2,f=(0,l.U1)(i[0],i[1],h,p,-e.angle),m=(0,o.Z)(f,2),g=m[0],v=m[1];return[g-e.x,v-e.y]}},{key:"getNormalizedPoints",value:function(e){var t=e.points,n=t[0][0],r=t[0][1];return{points:t.map((function(e,t){return[e[0]-n,e[1]-r]})),x:e.x+n,y:e.y+r}}},{key:"normalizePoints",value:function(t){(0,d.DR)(t,e.getNormalizedPoints(t))}},{key:"duplicateSelectedPoints",value:function(t){if(!t.editingLinearElement)return!1;var n=t.editingLinearElement,r=n.selectedPointsIndices,i=n.elementId,o=e.getElement(i);if(!o||null===r)return!1;var a=o.points,s=[],l=!1,c=-1,u=a.reduce((function(e,t,n){if(++c,e.push(t),r.includes(n)){var i=a[n+1];i||(l=!0),e.push(i?[(t[0]+i[0])/2,(t[1]+i[1])/2]:[t[0],t[1]]),s.push(c+1),++c}return e}),[]);if((0,d.DR)(o,{points:u}),l){var h=o.points[o.points.length-1];e.movePoints(o,[{index:o.points.length-1,point:[h[0]+30,h[1]+30]}])}return{appState:k(k({},t),{},{editingLinearElement:k(k({},t.editingLinearElement),{},{selectedPointsIndices:s})})}}},{key:"deletePoints",value:function(t,n){var r=0,i=0;if(n.includes(0)){var o=t.points.find((function(e,t){return!n.includes(t)}));o&&(r=o[0],i=o[1])}var a=t.points.reduce((function(e,t,o){return n.includes(o)||e.push(e.length?[t[0]-r,t[1]-i]:[0,0]),e}),[]);e._updatePoints(t,a,r,i)}},{key:"addPoints",value:function(t,n,i){var o=[].concat((0,r.Z)(t.points),(0,r.Z)(i.map((function(e){return e.point}))));e._updatePoints(t,o,0,0)}},{key:"movePoints",value:function(t,n,r){var i=t.points,o=0,a=0,s=n.find((function(e){return 0===e.index}));s&&(o=s.point[0]+i[s.index][0],a=s.point[1]+i[s.index][1]);var l=i.map((function(e,t){var r=n.find((function(e){return e.index===t}));if(r){if(s)return e;var l=r.point[0]-i[r.index][0],c=r.point[1]-i[r.index][1];return[e[0]+l,e[1]+c]}return o||a?[e[0]-o,e[1]-a]:e}));e._updatePoints(t,l,o,a,r)}},{key:"shouldAddMidpoint",value:function(t,n,r){if(!e.getElement(t.elementId))return!1;var i=t.pointerDownState.segmentMidpoint;if(i.added||null===i.value||null===i.index||null===t.pointerDownState.origin)return!1;var o=t.pointerDownState.origin,a=(0,l.LW)(o.x,o.y,n.x,n.y);return!(!r.editingLinearElement&&a<b.f/r.zoom.value)}},{key:"addMidpoint",value:function(t,n,i){var o=e.getElement(t.elementId);if(o){var a=t.pointerDownState.segmentMidpoint,s={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},l=e.createPointAt(o,n.x,n.y,i.gridSize),c=[].concat((0,r.Z)(o.points.slice(0,a.index)),[l],(0,r.Z)(o.points.slice(a.index)));return(0,d.DR)(o,{points:c}),s.pointerDownState=k(k({},t.pointerDownState),{},{segmentMidpoint:k(k({},t.pointerDownState.segmentMidpoint),{},{added:!0}),lastClickedPoint:a.index}),s.selectedPointsIndices=[a.index],s}}},{key:"_updatePoints",value:function(e,t,n,r,i){var o=(0,u.Ut)(e,t),a=(0,u.Ut)(e,e.points),s=(o[0]+o[2])/2,c=(o[1]+o[3])/2,h=(a[0]+a[2])/2-s,p=(a[1]+a[3])/2-c,f=(0,l.U1)(n,r,h,p,e.angle);(0,d.DR)(e,k(k({},i),{},{points:t,x:e.x+f[0],y:e.y+f[1]}))}},{key:"_getShiftLockedDelta",value:function(t,n,r,i){var a=e.getPointGlobalCoordinates(t,n),s=(0,l.wC)(r[0],r[1],i),u=(0,o.Z)(s,2),d=u[0],h=u[1],p=(0,c.o4)(a[0],a[1],d,h),f=p.width,m=p.height;return(0,l.xj)([f,m],[0,0],-t.angle)}}]),e}();S.POINT_HANDLE_SIZE=10,S.getEditorMidPoints=function(e,t){var n=(0,v.WJ)(e);return!t.editingLinearElement&&e.points.length>2&&!n?[]:(E.version===e.version&&E.zoom===t.zoom.value||S.updateEditorMidPointsCache(e,t),E.points)},S.updateEditorMidPointsCache=function(e,t){for(var n=S.getPointsGlobalCoordinates(e),r=0,i=[];r<n.length-1;)if(S.isSegmentTooShort(e,e.points[r],e.points[r+1],t.zoom))i.push(null),r++;else{var o=S.getSegmentMidPoint(e,n[r],n[r+1],r+1);i.push(o),r++}E.points=i,E.version=e.version,E.zoom=t.zoom.value},S.getSegmentMidpointHitCoords=function(e,t,n){var r=e.elementId,i=S.getElement(r);if(!i)return null;if(S.getPointIndexUnderCursor(i,n.zoom,t.x,t.y)>=0)return null;if(S.getPointsGlobalCoordinates(i).length>=3&&!n.editingLinearElement)return null;var o=S.POINT_HANDLE_SIZE/n.zoom.value,a=e.segmentMidPointHoveredCoords;if(a&&(0,l.LW)(a[0],a[1],t.x,t.y)<=o)return a;for(var s=0,c=S.getEditorMidPoints(i,n);s<c.length;){if(null!==c[s]&&(0,l.LW)(c[s][0],c[s][1],t.x,t.y)<=o)return c[s];s++}return null},S.getBoundTextElementPosition=function(e,t){var n=S.getPointsGlobalCoordinates(e);n.length<2&&(0,d.DR)(t,{isDeleted:!0});var r=0,i=0;if(e.points.length%2==1){var o=Math.floor(e.points.length/2),a=S.getPointGlobalCoordinates(e,e.points[o]);r=a[0]-t.width/2,i=a[1]-t.height/2}else{var s=e.points.length/2-1,c=E.points[s];2===e.points.length&&(c=(0,l.H5)(n[0],n[1])),c&&E.version===e.version||(c=S.getSegmentMidPoint(e,n[s],n[s+1],s+1)),r=c[0]-t.width/2,i=c[1]-t.height/2}return{x:r,y:i}},S.getMinMaxXYWithBoundText=function(e,t,n){var r=(0,o.Z)(t,4),i=r[0],a=r[1],s=r[2],c=r[3],u=(i+s)/2,d=(a+c)/2,h=S.getBoundTextElementPosition(e,n),p=h.x,f=h.y,m=p+n.width,g=f+n.height,v=(0,l.xj)([i,a],[u,d],e.angle),y=(0,l.xj)([s,a],[u,d],e.angle),b=(0,l.xj)([p,f],[u,d],-e.angle),x=(0,l.xj)([m,f],[u,d],-e.angle),w=(0,l.xj)([p,g],[u,d],-e.angle),_=(0,l.xj)([m,g],[u,d],-e.angle);return v[0]<y[0]&&v[1]>=y[1]?(i=Math.min(i,w[0]),s=Math.max(s,Math.max(x[0],_[0])),a=Math.min(a,b[1]),c=Math.max(c,_[1])):v[0]>=y[0]&&v[1]>y[1]?(i=Math.min(i,_[0]),s=Math.max(s,Math.max(b[0],x[0])),a=Math.min(a,w[1]),c=Math.max(c,x[1])):v[0]>=y[0]?(i=Math.min(i,x[0]),s=Math.max(s,w[0]),a=Math.min(a,_[1]),c=Math.max(c,b[1])):v[1]<=y[1]&&(i=Math.min(i,Math.min(x[0],b[0])),s=Math.max(s,_[0]),a=Math.min(a,x[1]),c=Math.max(c,w[1])),[i,a,s,c,u,d]},S.getElementAbsoluteCoords=function(e){var t,n,r,i,a,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.points.length<2||!(0,y.R2)(e)){var l=e.points.reduce((function(e,t){var n=(0,o.Z)(t,2),r=n[0],i=n[1];return e.minY=Math.min(e.minY,i),e.minX=Math.min(e.minX,r),e.maxX=Math.max(e.maxX,r),e.maxY=Math.max(e.maxY,i),e}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),c=l.minX,d=l.minY,h=l.maxX,p=l.maxY;n=c+e.x,r=d+e.y,i=h+e.x,a=p+e.y}else{var f=(0,y.R2)(e),m=(0,u.CM)(f[0]),g=(0,u.IX)(m),b=(0,o.Z)(g,4),x=b[0],w=b[1],_=b[2],k=b[3];n=x+e.x,r=w+e.y,i=_+e.x,a=k+e.y}if(t=[n,r,i,a,(n+i)/2,(r+a)/2],!s)return t;var E=(0,v.WJ)(e);return E&&(t=S.getMinMaxXYWithBoundText(e,[n,r,i,a],E)),t};var C=function(e){var t=(0,r.Z)(new Set(e.filter((function(e){return null!==e&&-1!==e}))));return(t=t.sort((function(e,t){return e-t}))).length?t:null}},1935:function(e,t,n){n.d(t,{BE:function(){return p},DR:function(){return h},ZP:function(){return f}});var r=n(6655),i=n(7169),o=n(3063),a=n(1564),s=n(5001),l=n(6954),c=n(6340);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],u=!1,h=t,p=h.points,f=h.fileId;for(var m in void 0!==p&&(t=d(d({},(0,s.k)(p)),t)),t){var g=t[m];if(void 0!==g){if(e[m]===g&&("object"!==(0,r.Z)(g)||null===g||"groupIds"===m||"scale"===m))continue;if("scale"===m){var v=e[m],y=g;if(v[0]===y[0]&&v[1]===y[1])continue}else if("points"===m){var b=e[m],x=g;if(b.length===x.length){for(var w=!1,_=b.length;--_;){var k=b[_],E=x[_];if(k[0]!==E[0]||k[1]!==E[1]){w=!0;break}}if(!w)continue}}e[m]=g,u=!0}}return u?(void 0===t.height&&void 0===t.width&&void 0===f&&void 0===p||(0,o.bI)(e),e.version++,e.versionNonce=(0,l.LU)(),e.updated=(0,c.C3)(),i&&(null===(n=a.Z.getScene(e))||void 0===n||n.informMutation()),e):e},p=function(e,t){var n=!1;for(var i in t){var o=t[i];if(void 0!==o){if(e[i]===o&&("object"!==(0,r.Z)(o)||null===o))continue;n=!0}}return n?d(d(d({},e),t),{},{updated:(0,c.C3)(),version:e.version+1,versionNonce:(0,l.LU)()}):e},f=function(e,t){return e.version=(null!=t?t:e.version)+1,e.versionNonce=(0,l.LU)(),e.updated=(0,c.C3)(),e}},2791:function(e,t,n){n.d(t,{JZ:function(){return T},KE:function(){return I},N_:function(){return M},OL:function(){return D},Sy:function(){return R},Up:function(){return k},VL:function(){return S},_N:function(){return z},vw:function(){return A},y8:function(){return O}});var r=n(6655),i=n(2577),o=n(7169),a=n(2726),s=n(6340),l=n(6954),c=n(1935),u=n(242),d=n(1047),h=n(6552),p=n(8925),f=n(5710),m=n(2335),g=n(1974),v=["x","y","strokeColor","backgroundColor","fillStyle","strokeWidth","strokeStyle","roughness","opacity","width","height","angle","groupIds","roundness","boundElements","link","locked"];function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e,t){var n,r,i=t.x,o=t.y,c=t.strokeColor,u=void 0===c?m.HN.strokeColor:c,d=t.backgroundColor,h=void 0===d?m.HN.backgroundColor:d,p=t.fillStyle,f=void 0===p?m.HN.fillStyle:p,g=t.strokeWidth,y=void 0===g?m.HN.strokeWidth:g,b=t.strokeStyle,x=void 0===b?m.HN.strokeStyle:b,w=t.roughness,_=void 0===w?m.HN.roughness:w,k=t.opacity,E=void 0===k?m.HN.opacity:k,S=t.width,C=void 0===S?0:S,T=t.height,M=void 0===T?0:T,I=t.angle,O=void 0===I?0:I,A=t.groupIds,P=void 0===A?[]:A,D=t.roundness,L=void 0===D?null:D,R=t.boundElements,z=void 0===R?null:R,j=t.link,N=void 0===j?null:j,B=t.locked,F=void 0===B?m.HN.locked:B,V=(0,a.Z)(t,v);return{id:V.id||(0,l.kb)(),type:e,x:i,y:o,width:C,height:M,angle:O,strokeColor:u,backgroundColor:h,fillStyle:f,strokeWidth:y,strokeStyle:x,roughness:_,opacity:E,groupIds:P,roundness:L,seed:null!==(n=V.seed)&&void 0!==n?n:(0,l.LU)(),version:V.version||1,versionNonce:null!==(r=V.versionNonce)&&void 0!==r?r:0,isDeleted:!1,boundElements:z,updated:(0,s.C3)(),link:N,locked:F}},k=function(e){return _(e.type,e)},E=function(e,t){return{x:"center"===e.textAlign?t.width/2:"right"===e.textAlign?t.width:0,y:"middle"===e.verticalAlign?t.height/2:0}},S=function(e){var t=e.fontFamily||m.rk,n=e.fontSize||m.n5,r=e.lineHeight||(0,f.PT)(t),i=(0,f.bG)(e.text),o=(0,f.X1)(i,(0,s.mO)({fontFamily:t,fontSize:n}),r),a=e.textAlign||m.Hg,l=e.verticalAlign||m.hs,u=E({textAlign:a,verticalAlign:l},o);return(0,c.BE)(w(w({},_("text",e)),{},{text:i,fontSize:n,fontFamily:t,textAlign:a,verticalAlign:l,x:e.x-u.x,y:e.y-u.y,width:o.width,height:o.height,baseline:o.baseline,containerId:e.containerId||null,originalText:i,lineHeight:r}),{})},C=function(e,t){var n,r,o=(0,f.tl)(e),a=(0,f.X1)(t,(0,s.mO)(e),e.lineHeight),l=a.width,u=a.height,v=a.baseline,y=e.textAlign,b=e.verticalAlign;if("center"!==y||b!==m.oX.MIDDLE||e.containerId){var x=(0,d.qf)(e),w=(0,i.Z)(x,4),_=w[0],k=w[1],S=w[2],C=w[3],T=(0,p.wC)(e,l,u,!1),M=(0,i.Z)(T,4),I=(_-M[0])/2,O=(k-M[1])/2,A=(S-M[2])/2,P=(C-M[3])/2,D=(0,h.yq)({s:!0,e:"center"===y||"left"===y,w:"center"===y||"right"===y},e.x,e.y,e.angle,I,O,A,P),L=(0,i.Z)(D,2);n=L[0],r=L[1]}else{var R=(0,f.X1)(e.text,(0,s.mO)(e),e.lineHeight),z=E(e,{width:l-R.width,height:u-R.height});n=e.x-z.x,r=e.y-z.y}if(o){var j=(0,f.S)(e),N=(0,f.HE)(o),B=N.height,F=N.width;u>B-2*j&&(B=u+2*j),l>F-2*j&&(F=l+2*j),(0,g.Yv)(o)||B===N.height&&F===N.width||(0,c.DR)(o,{height:B,width:F})}return{width:l,height:u,baseline:v,x:Number.isFinite(n)?n:e.x,y:Number.isFinite(r)?r:e.y}},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.text;if(!e.isDeleted){var n=(0,f.tl)(e);return n&&(t=(0,f.lD)(t,(0,s.mO)(e),(0,f.jd)(n))),w({text:t},C(e,t))}},M=function(e,t){t.text;var n=t.isDeleted,r=t.originalText;return(0,c.BE)(e,w({originalText:r,isDeleted:null!=n?n:e.isDeleted},T(e,r)))},I=function(e){return w(w({},_(e.type,e)),{},{points:e.points||[],pressures:[],simulatePressure:e.simulatePressure,lastCommittedPoint:null})},O=function(e){return w(w({},_(e.type,e)),{},{points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead})},A=function(e){var t,n,r;return w(w({},_("image",e)),{},{strokeColor:"transparent",status:null!==(t=e.status)&&void 0!==t?t:"pending",fileId:null!==(n=e.fileId)&&void 0!==n?n:null,scale:null!==(r=e.scale)&&void 0!==r?r:[1,1]})},P=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null==t||"object"!==(0,r.Z)(t))return t;if("[object Object]"===Object.prototype.toString.call(t)){var i="function"==typeof t.constructor?Object.create(Object.getPrototypeOf(t)):{};for(var o in t)if(t.hasOwnProperty(o)){if(0===n&&("shape"===o||"canvas"===o))continue;i[o]=e(t[o],n+1)}return i}if(Array.isArray(t)){for(var a=t.length,s=new Array(a);a--;)s[a]=e(t[a],n+1);return s}return t},D=function(e){return P(e)},L=function(e){if((0,s.h2)()&&e){var t,n,r="".concat(e,"_copy");return null!==(t=window.h)&&void 0!==t&&null!==(n=t.app)&&void 0!==n&&n.getSceneElementsIncludingDeleted().find((function(e){return e.id===r}))&&(r+="_copy"),r}return(0,l.kb)()},R=function(e,t,n,r){var i=D(n);return i.id=L(i.id),i.boundElements=null,i.updated=(0,s.C3)(),i.seed=(0,l.LU)(),i.groupIds=(0,u.Qy)(i.groupIds,e,(function(e){return t.has(e)||t.set(e,L(e)),t.get(e)})),r&&(i=Object.assign(i,r)),i},z=function(e){var t,n=[],r=(0,s.xn)(e),i=new Map,o=function(e){if(i.has(e))return i.get(e);if(r.has(e)){var t=L(e);return i.set(e,t),t}return null},a=new Map,l=y(e);try{for(l.s();!(t=l.n()).done;){var c=t.value,u=P(c);if(u.id=o(c.id),u.groupIds&&(u.groupIds=u.groupIds.map((function(e){return a.has(e)||a.set(e,L(e)),a.get(e)}))),"containerId"in u&&u.containerId){var d=o(u.containerId);u.containerId=d}if("boundElements"in u&&u.boundElements&&(u.boundElements=u.boundElements.reduce((function(e,t){var n=o(t.id);return n&&e.push(w(w({},t),{},{id:n})),e}),[])),"endBinding"in u&&u.endBinding){var h=o(u.endBinding.elementId);u.endBinding=h?w(w({},u.endBinding),{},{elementId:h}):null}if("startBinding"in u&&u.startBinding){var p=o(u.startBinding.elementId);u.startBinding=p?w(w({},u.startBinding),{},{elementId:p}):null}n.push(u)}}catch(e){l.e(e)}finally{l.f()}return n}},8634:function(e,t,n){n.d(t,{LW:function(){return y},T:function(){return T},l2:function(){return k},vY:function(){return b},xx:function(){return C}});var r=n(1930),i=n(7169),o=n(2577),a=n(2335),s=n(5001),l=n(6552),c=n(8925),u=n(1974),d=n(1935),h=n(6340),p=n(8290),f=n(1564),m=n(5710);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){return e>=2*Math.PI?e-2*Math.PI:e},b=function(e,t,n,r,i,a,s,l,c,d,h){if(1===n.length){var f=(0,o.Z)(n,1)[0];return"rotation"===t?(x(f,l,c,i,e.originalElements),(0,p.Ww)(f)):!(0,u.iB)(f)||"nw"!==t&&"ne"!==t&&"sw"!==t&&"se"!==t?t&&k(e.originalElements,s,f,t,a,l,c):(_(f,t,a,l,c),(0,p.Ww)(f)),!0}if(n.length>1){if("rotation"===t)return S(e,n,l,c,i,d,h),!0;if("nw"===t||"ne"===t||"sw"===t||"se"===t)return E(e,n,t,a,l,c),!0}return!1},x=function(e,t,n,r,i){var s=(0,c.qf)(e),l=(0,o.Z)(s,4),h=l[0],p=l[1],g=(h+l[2])/2,v=(p+l[3])/2,b=5*Math.PI/2+Math.atan2(n-v,t-g);r&&(b+=a.ay/2,b-=b%a.ay),b=y(b);var x=(0,m.xB)(e);if((0,d.DR)(e,{angle:b}),x){var w,_=null===(w=f.Z.getScene(e))||void 0===w?void 0:w.getElement(x);_&&!(0,u.Yv)(e)&&(0,d.DR)(_,{angle:b})}},w=function(e,t,n){var r=e.width;if((0,u.Xh)(e)){var i=(0,m.tl)(e);i&&(r=(0,m.jd)(i))}var o=e.fontSize*(t/r);if(o<1)return null;var a=(0,m.X1)(e.text,(0,h.mO)({fontSize:o,fontFamily:e.fontFamily}),e.lineHeight);return{size:o,baseline:a.baseline+(n-a.height)}},_=function(e,t,n,r,i){var a,s=(0,c.qf)(e),u=(0,o.Z)(s,4),h=u[0],p=u[1],f=u[2],m=u[3],g=(h+f)/2,v=(p+m)/2,y=(0,l.U1)(r,i,g,v,-e.angle),b=(0,o.Z)(y,2),x=b[0],_=b[1];switch(t){case"se":a=Math.max((x-h)/(f-h),(_-p)/(m-p));break;case"nw":a=Math.max((f-x)/(f-h),(m-_)/(m-p));break;case"ne":a=Math.max((x-h)/(f-h),(m-_)/(m-p));break;case"sw":a=Math.max((f-x)/(f-h),(_-p)/(m-p))}if(a>0){var k=e.width*a,E=e.height*a,S=w(e,k,E);if(null===S)return;var C=(0,c.wC)(e,k,E,!1),T=(0,o.Z)(C,4),M=(h-T[0])/2,I=(p-T[1])/2,O=(f-T[2])/2,A=(m-T[3])/2,P=(0,l.yq)(function(e,t){return{n:/^(n|ne|nw)$/.test(e)||t&&/^(s|se|sw)$/.test(e),s:/^(s|se|sw)$/.test(e)||t&&/^(n|ne|nw)$/.test(e),w:/^(w|nw|sw)$/.test(e)||t&&/^(e|ne|se)$/.test(e),e:/^(e|ne|se)$/.test(e)||t&&/^(w|nw|sw)$/.test(e)}}(t,n),e.x,e.y,e.angle,M,I,O,A),D=(0,o.Z)(P,2),L=D[0],R=D[1];(0,d.DR)(e,{fontSize:S.size,width:k,height:E,baseline:S.baseline,x:L,y:R})}},k=function(e,t,n,i,a,f,g){var y=e.get(n.id),b=(0,c.wC)(y,y.width,y.height,!0),x=(0,o.Z)(b,4),_=[x[0],x[1]],k=[x[2],x[3]],E=(0,l.H5)(_,k),S=(0,l.xj)([f,g],E,-y.angle),C=(0,c.wC)(n,n.width,n.height,!0),T=(0,o.Z)(C,4),M=T[0],I=T[1],O=T[2]-M,A=T[3]-I,P=(k[0]-_[0])/O,D=(k[1]-_[1])/A,L={},R=(0,m.WJ)(n);i.includes("e")&&(P=(S[0]-_[0])/O),i.includes("s")&&(D=(S[1]-_[1])/A),i.includes("w")&&(P=(k[0]-S[0])/O),i.includes("n")&&(D=(k[1]-S[1])/A);var z=y.width,j=y.height,N=n.width*P,B=n.height*D;if(a&&(N=2*N-z,B=2*B-j),t){var F=Math.abs(N)/z,V=Math.abs(B)/j;if(1===i.length&&(B*=F,N*=V),2===i.length){var U=Math.max(F,V);N=z*U*Math.sign(N),B=j*U*Math.sign(B)}}if(R){var $=e.get(R.id);if($&&(L={fontSize:$.fontSize,baseline:$.baseline}),t){var Z=v(v({},n),{},{width:N,height:B}),H=w(R,(0,m.jd)(Z),(0,m.N2)(Z));if(null===H)return;L={fontSize:H.size,baseline:H.baseline}}else{var W=(0,m.AT)((0,h.mO)(R),R.lineHeight),q=(0,m.w_)(R.fontSize,R.lineHeight);N=Math.ceil(Math.max(N,W)),B=Math.ceil(Math.max(B,q))}}var G=(0,c.wC)(y,N,B,!0),K=(0,o.Z)(G,4),Y=K[0],X=K[1],J=K[2],Q=K[3],ee=J-Y,te=Q-X,ne=[].concat(_);if(["n","w","nw"].includes(i)&&(ne=[k[0]-Math.abs(ee),k[1]-Math.abs(te)]),"ne"===i){var re=[_[0],k[1]];ne=[re[0],re[1]-Math.abs(te)]}if("sw"===i){var ie=[k[0],_[1]];ne=[ie[0]-Math.abs(ee),ie[1]]}t&&(["s","n"].includes(i)&&(ne[0]=E[0]-ee/2),["e","w"].includes(i)&&(ne[1]=E[1]-te/2)),N<0&&(i.includes("e")&&(ne[0]-=Math.abs(ee)),i.includes("w")&&(ne[0]+=Math.abs(ee))),B<0&&(i.includes("s")&&(ne[1]-=Math.abs(te)),i.includes("n")&&(ne[1]+=Math.abs(te))),a&&(ne[0]=E[0]-Math.abs(ee)/2,ne[1]=E[1]-Math.abs(te)/2);var oe,ae,se=y.angle,le=(0,l.xj)(ne,E,se),ce=[ne[0]+Math.abs(ee)/2,ne[1]+Math.abs(te)/2],ue=(0,l.xj)(ce,E,se);ne=(0,l.xj)(le,ue,-se),((0,u.bt)(n)||(0,u.F9)(n))&&(oe=(0,s.z)(1,B,y.points,!0),ae=(0,s.z)(0,N,oe,!0));var de=(0,r.Z)(ne);de[0]+=y.x-Y,de[1]+=y.y-X;var he={width:Math.abs(N),height:Math.abs(B),x:de[0],y:de[1],points:ae};"scale"in n&&"scale"in y&&(0,d.DR)(n,{scale:[(Math.sign(J-y.x)||y.scale[0])*y.scale[0],(Math.sign(Q-y.y)||y.scale[1])*y.scale[1]]}),0!==he.width&&0!==he.height&&Number.isFinite(he.x)&&Number.isFinite(he.y)&&((0,p.Ww)(n,{newSize:{width:he.width,height:he.height}}),(0,d.DR)(n,he),R&&null!=L&&(0,d.DR)(R,{fontSize:L.fontSize,baseline:L.baseline}),(0,m.RB)(n,i))},E=function(e,t,n,r,i,a){var l=t.reduce((function(t,n){var r=e.originalElements.get(n.id);return r&&t.push({orig:r,latest:n}),t}),[]),h=(0,c.v2)(l.map((function(e){return e.orig}))),f=h.minX,g=h.minY,y=h.maxX,b=h.maxY,x=h.midX,_=h.midY,k=n,E=r?[x,_]:{ne:[f,b],se:[f,g],sw:[y,g],nw:[y,b]}[k],S=(0,o.Z)(E,2),C=S[0],T=S[1],M={ne:[i>=C,a<=T],se:[i>=C,a>=T],sw:[i<=C,a>=T],nw:[i<=C,a<=T]}[k].map((function(e){return e?1:-1})),I=(0,o.Z)(M,2),O=I[0],A=I[1];if(!(O<0&&A<0)){var P=Math.max(O*Math.abs(i-C)/(y-f),A*Math.abs(a-T)/(b-g))*(r?2:1);0!==P&&l.forEach((function(e){var t=e.orig.width*P,r=e.orig.height*P,i=C+(e.orig.x-C)*P,o=T+(e.orig.y-T)*P,a=function(e,t,n,r){return(0,u.bt)(e)||(0,u.F9)(e)?{points:(0,s.z)(0,t,(0,s.z)(1,n,e.points,r),r)}:{}}(e.orig,t,r,!1),l=v({width:t,height:r,x:i,y:o},a),c=null,h=(0,m.WJ)(e.latest);if(h||(0,u.iB)(e.orig)){var f=v(v({},e.latest),{},{width:t,height:r}),g=w(null!=h?h:e.orig,h?(0,m.jd)(f):f.width,h?(0,m.N2)(f):f.height);if(!g)return;(0,u.iB)(e.orig)&&(l.fontSize=g.size,l.baseline=g.baseline),h&&(c={fontSize:g.size,baseline:g.baseline})}(0,p.Ww)(e.latest,{newSize:{width:t,height:r}}),(0,d.DR)(e.latest,l),h&&c&&((0,d.DR)(h,c),(0,m.RB)(e.latest,n))}))}},S=function(e,t,n,r,i,s,h){var p=5*Math.PI/2+Math.atan2(r-h,n-s);i&&(p+=a.ay/2,p-=p%a.ay),t.forEach((function(t){var n,r,i=(0,c.qf)(t),a=(0,o.Z)(i,4),g=a[0],v=a[1],b=(g+a[2])/2,x=(v+a[3])/2,w=null!==(n=null===(r=e.originalElements.get(t.id))||void 0===r?void 0:r.angle)&&void 0!==n?n:t.angle,_=(0,l.U1)(b,x,s,h,p+w-t.angle),k=(0,o.Z)(_,2),E=k[0],S=k[1];(0,d.DR)(t,{x:t.x+(E-b),y:t.y+(S-x),angle:y(p+w)});var C=(0,m.xB)(t);if(C){var T,M=null===(T=f.Z.getScene(t))||void 0===T?void 0:T.getElement(C);M&&!(0,u.Yv)(t)&&(0,d.DR)(M,{x:M.x+(E-b),y:M.y+(S-x),angle:y(p+w)})}}))},C=function(e,t,n,r){var i=1===t.length?(0,c.qf)(t[0]):(0,c.KP)(t),a=(0,o.Z)(i,4),s=a[0],u=a[1],d=a[2],h=a[3],p=(s+d)/2,f=(u+h)/2,m=1===t.length?t[0].angle:0,g=(0,l.U1)(n,r,p,f,-m),v=(0,o.Z)(g,2);switch(n=v[0],r=v[1],e){case"n":return(0,l.U1)(n-(s+d)/2,r-u,0,0,m);case"s":return(0,l.U1)(n-(s+d)/2,r-h,0,0,m);case"w":return(0,l.U1)(n-s,r-(u+h)/2,0,0,m);case"e":return(0,l.U1)(n-d,r-(u+h)/2,0,0,m);case"nw":return(0,l.U1)(n-s,r-u,0,0,m);case"ne":return(0,l.U1)(n-d,r-u,0,0,m);case"sw":return(0,l.U1)(n-s,r-h,0,0,m);case"se":return(0,l.U1)(n-d,r-h,0,0,m);default:return[0,0]}},T=function(e,t){var n=(0,o.Z)(t.points,2),r=(0,o.Z)(n[1],2),i=r[0],a=r[1];return"nw"===e&&(i<0||a<0)||"ne"===e&&i>=0||"sw"===e&&i<=0||"se"===e&&(i>0||a>0)?"end":"origin"}},5710:function(e,t,n){n.d(t,{$2:function(){return I},AT:function(){return N},FE:function(){return C},HE:function(){return $},H_:function(){return W},N2:function(){return te},NS:function(){return Q},OW:function(){return Y},P7:function(){return E},PT:function(){return ie},R8:function(){return M},RB:function(){return S},Rg:function(){return O},S:function(){return q},TP:function(){return Z},WJ:function(){return V},X1:function(){return T},Zr:function(){return J},aV:function(){return K},bG:function(){return w},cn:function(){return G},cw:function(){return H},eB:function(){return ne},jd:function(){return ee},lD:function(){return R},mY:function(){return D},oN:function(){return k},tl:function(){return U},w_:function(){return A},xB:function(){return F}});var r,i=n(2577),o=n(1930),a=n(7169),s=n(6340),l=n(1935),c=n(2335),u=n(1564),d=n(1047),h=n(1974),p=n(6938),f=n(75),m=n(2325),g=n(6906);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b,x,w=function(e){return e.replace(/\t/g,"        ").replace(/\r?\n|\r/g,"\n")},_=function(e){return w(e).split("\n")},k=function(e,t){var n=void 0,r={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,baseline:e.baseline};r.text=e.text,t&&(n=ee(t),r.text=R(e.originalText,(0,s.mO)(e),n));var i=T(r.text,(0,s.mO)(e),e.lineHeight);if(r.width=i.width,r.height=i.height,r.baseline=i.baseline,t)if((0,h.Yv)(t)){var o=e.x+e.width/2,a=e.y+e.height/2,c=i.width-e.width,u=i.height-e.height;r.x=a-(e.height+u)/2,r.y=o-(e.width+c)/2}else{var d=$(t),p=te(t),f=d.height;i.height>p&&(f=Q(i.height,t.type),(0,l.DR)(t,{height:f}),p=te(t),(0,g.h_)(t.id,f));var m=y(y({},e),r),v=C(t,m),b=v.x,x=v.y;r.x=b,r.y=x}(0,l.DR)(e,r)},E=function(e,t,n){var r=(0,s.xn)(e);t.forEach((function(e){var t=n.get(e.id),i=F(e);if(i){var o=n.get(i);if(o){var a=r.get(t);a&&(0,l.DR)(a,{boundElements:(e.boundElements||[]).filter((function(e){return e.id!==o&&e.id!==i})).concat({type:"text",id:o})});var s=r.get(o);s&&(0,d.iB)(s)&&(0,l.DR)(s,{containerId:a?t:null})}}}))},S=function(e,t){var n=F(e);if(n){(0,g.kT)(e.id);var r=u.Z.getScene(e).getElement(n);if(r&&r.text){if(!e)return;var i=(r=u.Z.getScene(e).getElement(n)).text,o=r.height,a=r.width,c=$(e),d=ee(e),p=te(e),f=c.height,m=r.baseline;if("n"!==t&&"s"!==t){i&&(i=R(r.originalText,(0,s.mO)(r),d));var v=T(i,(0,s.mO)(r),r.lineHeight);o=v.height,a=v.width,m=v.baseline}if(o>p){var y=(f=Q(o,e.type))-c.height,b=(0,h.Yv)(e)||"ne"!==t&&"nw"!==t&&"n"!==t?e.y:e.y-y;(0,l.DR)(e,{height:f,y:b})}(0,l.DR)(r,{text:i,width:a,height:o,baseline:m}),(0,h.Yv)(e)||(0,l.DR)(r,C(e,r))}}},C=function(e,t){if((0,h.Yv)(e))return p._.getBoundTextElementPosition(e,t);var n,r=H(e),i=te(e),o=ee(e);return n=t.verticalAlign===c.oX.TOP?r.y:t.verticalAlign===c.oX.BOTTOM?r.y+(i-t.height):r.y+(i/2-t.height/2),{x:t.textAlign===c.I8.LEFT?r.x:t.textAlign===c.I8.RIGHT?r.x+(o-t.width):r.x+(o/2-t.width/2),y:n}},T=function(e,t,n){e=e.split("\n").map((function(e){return e||" "})).join("\n");var r=parseFloat(t),i=L(e,r,n);return{width:D(e,t),height:i,baseline:M(e,t,n)}},M=function(e,t,n,r){var i=document.createElement("div");i.style.position="absolute",i.style.whiteSpace="pre",i.style.font=t,i.style.minHeight="1em",r&&(i.style.overflow="hidden",i.style.wordBreak="break-word",i.style.whiteSpace="pre-wrap"),i.style.lineHeight=String(n),i.innerText=e,document.body.appendChild(i);var o=document.createElement("span");o.style.display="inline-block",o.style.overflow="hidden",o.style.width="1px",o.style.height="1px",i.appendChild(o);var a=o.offsetTop+o.offsetHeight,s=i.offsetHeight;if(c.G6){var l=L(e,parseFloat(t),n),u=parseFloat(t),d=L(e,Math.round(u),n);l>s&&(a+=l-d),s>l&&(a-=d-l)}return document.body.removeChild(i),a},I=function(e){var t=_(e.text).length;return e.height/t/e.fontSize},O=function(e,t){return e*t},A=function(e,t){return O(e,t)+2*c.gK},P=function(e,t){b||(b=document.createElement("canvas"));var n=b.getContext("2d");n.font=t;var r=n.measureText(e).width;return(0,s.h2)()?10*r:r},D=function(e,t){var n=_(e),r=0;return n.forEach((function(e){r=Math.max(r,P(e,t))})),r},L=function(e,t,n){var r=_(e).length;return O(t,n)*r},R=function(e,t,n){if(!Number.isFinite(n)||n<0)return e;var r=[],i=e.split("\n"),o=P(" ",t),a="",s=0,l=function(e){e.trim()&&r.push(e)},c=function(){a="",s=0};return i.forEach((function(e){if(D(e,t)<=n)r.push(e);else{var i=function(e){var t=e.split("-");return t.length>1&&t.forEach((function(e,n){n!==t.length-1&&(t[n]=e+="-")})),t.join(" ").split(" ")}(e);c();for(var u=0;u<i.length;){var d=P(i[u],t);if(d===n)l(i[u]),u++;else if(d>n){for(l(a),c();i[u].length>0;){var h=String.fromCodePoint(i[u].codePointAt(0)),p=z.calculate(h,t);s+=p,i[u]=i[u].slice(h.length),s>=n?(l(a),a=h,s=p):a+=h}s+o>=n?(l(a),c()):a.endsWith("-")||(a+=" ",s+=o),u++}else for(;s<n&&u<i.length;){var f=i[u];if((s=P(a+f,t))>n){l(a),c();break}u++;var m=!f.endsWith("-");if(a+=f,m&&(a+=" "),s+o>=n){m?r.push(a.slice(0,-1)):r.push(a),c();break}}}" "===a.slice(-1)&&(a=a.slice(0,-1),l(a))}})),r.join("\n")},z=(x={},{calculate:function(e,t){var n=e.charCodeAt(0);if(x[t]||(x[t]=[]),!x[t][n]){var r=P(e,t);x[t][n]=r}return x[t][n]},getCache:function(e){return x[e]}}),j="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),N=function(e,t){var n=B(e);return 0===n?T(j.split("").join("\n"),e,t).width+2*c.gK:n+2*c.gK},B=function(e){var t=z.getCache(e);if(!t)return 0;var n=t.filter((function(e){return void 0!==e}));return Math.max.apply(Math,(0,o.Z)(n))},F=function(e){var t,n,r;return null!=e&&null!==(t=e.boundElements)&&void 0!==t&&t.length&&(null==e||null===(n=e.boundElements)||void 0===n||null===(r=n.filter((function(e){return"text"===e.type}))[0])||void 0===r?void 0:r.id)||null},V=function(e){if(!e)return null;var t,n=F(e);return n&&(null===(t=u.Z.getScene(e))||void 0===t?void 0:t.getElement(n))||null},U=function(e){return e&&e.containerId&&(null===(t=u.Z.getScene(e))||void 0===t?void 0:t.getElement(e.containerId))||null;var t},$=function(e){return(0,h.Yv)(e)?{width:Math.max(e.width,300),height:e.height}:{width:e.width,height:e.height}},Z=function(e,t){if(!(0,h.Yv)(e))return{x:e.x+e.width/2,y:e.y+e.height/2};var n=p._.getPointsGlobalCoordinates(e);if(n.length%2==1){var r=Math.floor(e.points.length/2),i=p._.getPointGlobalCoordinates(e,e.points[r]);return{x:i[0],y:i[1]}}var o=e.points.length/2-1,a=p._.getEditorMidPoints(e,t)[o];return a||(a=p._.getSegmentMidPoint(e,n[o],n[o+1],o+1)),{x:a[0],y:a[1]}},H=function(e){var t=c.gK,n=c.gK;return"ellipse"===e.type&&(t+=e.width/2*(1-Math.sqrt(2)/2),n+=e.height/2*(1-Math.sqrt(2)/2)),"diamond"===e.type&&(t+=e.width/4,n+=e.height/4),{x:e.x+t,y:e.y+n}},W=function(e){var t=U(e);return!t||(0,h.Yv)(t)?e.angle:t.angle},q=function(e){var t=U(e);return t&&e?(0,h.Yv)(t)?8*c.gK:c.gK:0},G=function(e){return e.some((function(e){if((0,h.Xh)(e)){var t=U(e);return!(0,d.iB)(e)||!(0,h.Yv)(t)}return!1}))},K=function(e){return e.some((function(e){if((0,h.Xh)(e)){var t=U(e);return!(0,d.iB)(e)||!(0,h.Yv)(t)}return(0,d.iB)(e)}))},Y=function(e,t,n,r){var o=(0,f.eD)(e,t);if(1===o.length)return(0,h.mG)(o[0],!1)?o[0]:null;for(var a=null,s=e.length-1;s>=0;--s)if(!e[s].isDeleted){var l=(0,d.qf)(e[s]),c=(0,i.Z)(l,4),u=c[0],p=c[1],g=c[2],v=c[3];if((0,h.Yv)(e[s])&&(0,m.Qu)(e[s],t,[n,r])){a=e[s];break}if(u<n&&n<g&&p<r&&r<v){a=e[s];break}}return(0,h.mG)(a,!1)?a:null},X=new Set(["rectangle","ellipse","diamond","image","arrow"]),J=function(e){return X.has(e.type)},Q=function(e,t){e=Math.ceil(e);var n=2*c.gK;return"ellipse"===t?Math.round((e+n)/Math.sqrt(2)*2):"arrow"===t?e+8*n:"diamond"===t?2*(e+n):e+n},ee=function(e){var t=$(e).width;if((0,h.Yv)(e)){var n=t-8*c.gK*2;if(n<=0){var r=V(e);return r?r.width:8*c.gK*2}return n}return"ellipse"===e.type?Math.round(t/2*Math.sqrt(2))-2*c.gK:"diamond"===e.type?Math.round(t/2)-2*c.gK:t-2*c.gK},te=function(e){var t=$(e).height;if((0,h.Yv)(e)){if(t-8*c.gK*2<=0){var n=V(e);return n?n.height:8*c.gK*2}return t}return"ellipse"===e.type?Math.round(t/2*Math.sqrt(2))-2*c.gK:"diamond"===e.type?Math.round(t/2)-2*c.gK:t-2*c.gK},ne=function(){return D(j,(0,s.mO)({fontSize:c.n5,fontFamily:c.rk}))>0},re=(r={},(0,a.Z)(r,c.ut.Virgil,1.25),(0,a.Z)(r,c.ut.Helvetica,1.15),(0,a.Z)(r,c.ut.Cascadia,1.2),r),ie=function(e){return e in re?re[e]:re[c.rk]}},6906:function(e,t,n){n.d(t,{b_:function(){return C},eR:function(){return S},h_:function(){return k},kT:function(){return E}});var r=n(8950),i=n(7169),o=n(2577),a=n(2975),s=n.n(a),l=n(6066),c=n(6340),u=n(1564),d=n(1974),h=n(2335),p=n(1935),f=n(5710),m=n(6208),g=n(2416),v=n(6938),y=n(6665);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e,t,n,r,i,o){var a=r.zoom,s=180*n/Math.PI,l=e*(a.value-1)/2,c=t*(a.value-1)/2;return e>i&&1!==a.value&&(l=i*(a.value-1)/2),t>o&&1!==a.value&&(c=o*(a.value-1)/2),"translate(".concat(l,"px, ").concat(c,"px) scale(").concat(a.value,") rotate(").concat(s,"deg)")},_={},k=function(e,t){var n=_[e]||(_[e]={height:t});return n.height=t,n},E=function(e){_[e]&&delete _[e]},S=function(e){var t,n;return null!==(t=null===(n=_[e])||void 0===n?void 0:n.height)&&void 0!==t?t:null},C=function(e){var t=e.id,n=e.onChange,i=e.onSubmit,a=e.getViewportCoords,b=e.element,E=e.canvas,S=e.excalidrawContainer,C=e.app,T=function(){var e,n=C.state,r=null===(e=u.Z.getScene(b))||void 0===e?void 0:e.getElement(t);if(r){var i=r.textAlign,s=r.verticalAlign;if(r&&(0,d.iB)(r)){var l=r.x,m=r.y,g=(0,f.tl)(r),y=r.width,E=r.height,S=r.width,T=r.height;if(g&&r.containerId){if((0,d.Yv)(g)){var I=v._.getBoundTextElementPosition(g,r);l=I.x,m=I.y}var O,A=function(e,t){if(!t.style.fontFamily||!t.style.fontSize)return!1;var n=t.style.fontFamily.replace(/"/g,"");return(0,c.$g)({fontFamily:e.fontFamily})!==n||"".concat(e.fontSize,"px")!==t.style.fontSize}(r,M),P=(0,f.HE)(g),D=Number(M.style.height.slice(0,-2));if(D>0&&(T=D),A&&(T=r.height),A?O=k(g.id,P.height):(O=_[g.id])||(O=k(g.id,P.height)),y=(0,f.jd)(g),E=(0,f.N2)(g),!(0,d.Yv)(g)&&T>E){var L=(0,f.NS)(T,g.type);return void(0,p.DR)(g,{height:L})}if(!(0,d.Yv)(g)&&P.height>O.height&&T<E){var R=(0,f.NS)(T,g.type);(0,p.DR)(g,{height:R})}else{var z=(0,f.cw)(g);s===h.oX.MIDDLE&&((0,d.Yv)(g)||(m=z.y+E/2-T/2)),s===h.oX.BOTTOM&&(m=z.y+(E-T))}}var j=a(l,m),N=(0,o.Z)(j,2),B=N[0],F=N[1],V=M.selectionStart,U=M.selectionEnd,$=M.value.length;if(M.value=r.originalText,V===U&&U!==$){var Z=$-U;M.selectionStart=M.value.length-Z,M.selectionEnd=M.value.length-Z}g?S+=.5:(y=(n.width-8-B)/n.zoom.value,S=Math.min(S,y));var H=r.lineHeight;h.G6&&(H=(0,f.$2)(x(x({},r),{},{fontSize:Math.round(r.fontSize)})));var W=(n.height-F)/n.zoom.value;Object.assign(M.style,{font:(0,c.mO)(r),lineHeight:H,width:"".concat(S,"px"),height:"".concat(T,"px"),left:"".concat(B,"px"),top:"".concat(F,"px"),transform:w(S,T,(0,f.H_)(r),n,y,W),textAlign:i,verticalAlign:s,color:r.strokeColor,opacity:r.opacity/100,filter:"var(--theme-filter)",maxHeight:"".concat(W,"px")}),M.scrollTop=0,(0,c.h2)()&&(M.style.fontFamily=(0,c.$g)(r)),(0,p.DR)(r,{x:l,y:m})}}},M=document.createElement("textarea");M.dir="auto",M.tabIndex=0,M.dataset.type="wysiwyg",M.wrap="off",M.classList.add("excalidraw-wysiwyg");var I="pre",O="normal";(0,d.Xh)(b)&&(I="pre-wrap",O="break-word"),Object.assign(M.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:O,whiteSpace:I,overflowWrap:"break-word",boxSizing:"content-box"}),T(),n&&(M.onpaste=function(){var e=(0,r.Z)(s().mark((function e(t){var n,r,i,o,a,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.mQ)(t,!0);case 2:if((n=e.sent).text){e.next=5;break}return e.abrupt("return");case 5:if(r=(0,f.bG)(n.text)){e.next=8;break}return e.abrupt("return");case 8:i=(0,f.tl)(b),o=(0,c.mO)({fontSize:C.state.currentItemFontSize,fontFamily:C.state.currentItemFontFamily}),i&&(a=(0,f.lD)("".concat(M.value).concat(r),o,(0,f.jd)(i)),l=(0,f.mY)(a,o),M.style.width="".concat(l,"px"));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M.oninput=function(){var e,r=null===(e=u.Z.getScene(b))||void 0===e?void 0:e.getElement(t),i=(0,c.mO)(r);if((0,d.Xh)(b)){var o=(0,f.tl)(b),a=(0,f.lD)((0,f.bG)(M.value),i,(0,f.jd)(o)),s=(0,f.X1)(a,i,r.lineHeight),l=s.width,h=s.height;M.style.width="".concat(l,"px"),M.style.height="".concat(h,"px")}n((0,f.bG)(M.value))}),M.onkeydown=function(e){if(!e.shiftKey&&g.Lo.keyTest(e))e.preventDefault(),C.actionManager.executeAction(g.Lo),T();else if(!e.shiftKey&&g.CZ.keyTest(e))e.preventDefault(),C.actionManager.executeAction(g.CZ),T();else if(m.Tu.keyTest(e))C.actionManager.executeAction(m.Tu);else if(m.Zq.keyTest(e))C.actionManager.executeAction(m.Zq);else if(e.key===l.tW.ESCAPE)e.preventDefault(),j=!0,N();else if(e.key===l.tW.ENTER&&e[l.tW.CTRL_OR_CMD]){if(e.preventDefault(),e.isComposing||229===e.keyCode)return;j=!0,N()}else if(e.key===l.tW.TAB||e[l.tW.CTRL_OR_CMD]&&(e.code===l.aU.BRACKET_LEFT||e.code===l.aU.BRACKET_RIGHT)){if(e.preventDefault(),e.isComposing)return;e.shiftKey||e.code===l.aU.BRACKET_LEFT?L():D(),M.dispatchEvent(new Event("input"))}};var A=" ".repeat(4),P=new RegExp("^ {1,".concat(4,"}")),D=function(){var e=M.selectionStart,t=M.selectionEnd,n=R(),r=M.value;n.forEach((function(e){var t=r.slice(0,e),n=r.slice(e);r="".concat(t).concat(A).concat(n)})),M.value=r,M.selectionStart=e+4,M.selectionEnd=t+4*n.length},L=function(){var e=M.selectionStart,t=M.selectionEnd,n=R(),r=[],i=M.value;n.forEach((function(e){var t=i.slice(e,e+4).match(P);if(t){var n=i.slice(0,e),o=i.slice(e+t[0].length);i="".concat(n).concat(o),r.push(e)}})),M.value=i,r.length&&(e>r[r.length-1]?M.selectionStart=Math.max(e-4,r[r.length-1]):M.selectionStart=e,M.selectionEnd=Math.max(M.selectionStart,t-4*r.length))},R=function(){var e=M.selectionStart,t=M.selectionEnd,n=M.value,r=n.slice(0,e).match(/[^\n]*$/)[0].length;return e-=r,n.slice(e,t).split("\n").reduce((function(t,n,r,i){return t.concat(r?t[r-1]+i[r-1].length+1:e)}),[]).reverse()},z=function(e){e.preventDefault(),e.stopPropagation()},j=!1,N=function(){var e;B();var t=null===(e=u.Z.getScene(b))||void 0===e?void 0:e.getElement(b.id);if(t){var n=M.value,r=(0,f.tl)(t);if(r){if(n=t.text,M.value.trim()){var o=(0,f.xB)(r);o&&o===b.id||(0,p.DR)(r,{boundElements:(r.boundElements||[]).concat({type:"text",id:b.id})})}else{var a;(0,p.DR)(r,{boundElements:null===(a=r.boundElements)||void 0===a?void 0:a.filter((function(e){return!(0,d.iB)(e)}))})}(0,f.oN)(t,r)}i({text:n,viaKeyboard:j,originalText:M.value})}},B=function(){$||($=!0,M.onblur=null,M.oninput=null,M.onkeydown=null,Z&&Z.disconnect(),window.removeEventListener("resize",T),window.removeEventListener("wheel",z,!0),window.removeEventListener("pointerdown",V),window.removeEventListener("pointerup",F),window.removeEventListener("blur",N),U(),M.remove())},F=function e(t){window.removeEventListener("pointerup",e);var n=null==t?void 0:t.target,r=n instanceof HTMLInputElement&&n.closest(".color-picker-input")&&(0,c.s)(n);setTimeout((function(){M.onblur=N,n&&r&&(n.onblur=function(){M.focus()}),r||M.focus()}))},V=function(e){var t=e.target instanceof HTMLInputElement&&e.target.closest(".color-picker-input")&&(0,c.s)(e.target);((e.target instanceof HTMLElement||e.target instanceof SVGElement)&&e.target.closest(".".concat(h.$C.SHAPE_ACTIONS_MENU))&&!(0,c.s)(e.target)||t)&&(M.onblur=null,window.addEventListener("pointerup",F),window.addEventListener("blur",N))},U=u.Z.getScene(b).addCallback((function(){var e;T(),null!==(e=document.activeElement)&&void 0!==e&&e.closest(".color-picker-input")||M.focus()})),$=!1;M.select(),F();var Z=null;E&&"ResizeObserver"in window?(Z=new window.ResizeObserver((function(){T()}))).observe(E):window.addEventListener("resize",T),window.addEventListener("pointerdown",V),window.addEventListener("wheel",z,{passive:!1,capture:!0}),null==S||S.querySelector(".excalidraw-textEditorContainer").appendChild(M)}},267:function(e,t,n){n.d(t,{PC:function(){return g},kK:function(){return m},oY:function(){return v},ox:function(){return u}});var r=n(2577),i=n(8925),o=n(6552),a=n(1047),s=n(1974),l=n(3547),c={mouse:8,pen:16,touch:28},u={e:!0,s:!0,n:!0,w:!0},d={e:!0,s:!0,n:!0,w:!0},h={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},p={e:!0,s:!0,n:!0,w:!0},f=function(e,t,n,i,a,s,l){var c=(0,o.U1)(e+n/2,t+i/2,a,s,l),u=(0,r.Z)(c,2);return[u[0]-n/2,u[1]-i/2,n,i]},m=function(e,t,n,i){var o=(0,r.Z)(e,6),a=o[0],s=o[1],u=o[2],d=o[3],h=o[4],p=o[5],m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4,v=c[i],y=v/n.value,b=v/n.value,x=v/n.value,w=v/n.value,_=u-a,k=d-s,E=g/n.value,S=(v-2*l.Lu)/(2*n.value),C={nw:m.nw?void 0:f(a-E-x+S,s-E-w+S,y,b,h,p,t),ne:m.ne?void 0:f(u+E-S,s-E-w+S,y,b,h,p,t),sw:m.sw?void 0:f(a-E-x+S,d+E-S,y,b,h,p,t),se:m.se?void 0:f(u+E-S,d+E-S,y,b,h,p,t),rotation:m.rotation?void 0:f(a+_/2-y/2,s-E-w+S-16/n.value,y,b,h,p,t)},T=5*c.mouse/n.value;return Math.abs(_)>T&&(m.n||(C.n=f(a+_/2-y/2,s-E-w+S,y,b,h,p,t)),m.s||(C.s=f(a+_/2-y/2,d+E-S,y,b,h,p,t))),Math.abs(k)>T&&(m.w||(C.w=f(a-E-x+S,s+k/2-b/2,y,b,h,p,t)),m.e||(C.e=f(u+E-S,s+k/2-b/2,y,b,h,p,t))),C},g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mouse";if(e.locked)return{};var o={};if("freedraw"===e.type||(0,s.bt)(e)){if(2===e.points.length){var c=(0,r.Z)(e.points,2)[1];0===c[0]||0===c[1]?o=p:c[0]>0&&c[1]<0?o=h:c[0]>0&&c[1]>0?o=p:c[0]<0&&c[1]>0?o=h:c[0]<0&&c[1]<0&&(o=p)}}else(0,a.iB)(e)&&(o=d);var u=(0,s.bt)(e)?l.Lu+8:l.Lu;return m((0,i.qf)(e,!0),e.angle,t,n,o,u)},v=function(e,t){if(t.editingLinearElement)return!1;if(e.length>1)return!0;var n=e[0];return!(0,s.bt)(n)||n.points.length>2}},1974:function(e,t,n){n.d(t,{F9:function(){return s},Lx:function(){return p},Mn:function(){return h},QI:function(){return b},UQ:function(){return w},Xh:function(){return y},Xo:function(){return v},Yv:function(){return u},bt:function(){return c},dt:function(){return d},eK:function(){return x},f0:function(){return f},iB:function(){return a},mG:function(){return m},pC:function(){return o},r2:function(){return g},wi:function(){return i}});var r=n(2335),i=function(e){return!!e&&"image"===e.type&&!!e.fileId},o=function(e){return!!e&&"image"===e.type},a=function(e){return null!=e&&"text"===e.type},s=function(e){return null!=e&&l(e.type)},l=function(e){return"freedraw"===e},c=function(e){return null!=e&&d(e.type)},u=function(e){return null!=e&&"arrow"===e.type},d=function(e){return"arrow"===e||"line"===e},h=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null!=e&&(!e.locked||!0===t)&&p(e.type)},p=function(e){return"arrow"===e},f=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!(null==e||e.locked&&!0!==t||"rectangle"!==e.type&&"diamond"!==e.type&&"ellipse"!==e.type&&"image"!==e.type&&("text"!==e.type||e.containerId))},m=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null!=e&&(!e.locked||!0===t)&&("rectangle"===e.type||"diamond"===e.type||"ellipse"===e.type||"image"===e.type||u(e))},g=function(e){return"text"===(null==e?void 0:e.type)||"diamond"===(null==e?void 0:e.type)||"rectangle"===(null==e?void 0:e.type)||"ellipse"===(null==e?void 0:e.type)||"arrow"===(null==e?void 0:e.type)||"freedraw"===(null==e?void 0:e.type)||"line"===(null==e?void 0:e.type)},v=function(e){var t;return m(e)&&!(null===(t=e.boundElements)||void 0===t||!t.some((function(e){return"text"===e.type})))},y=function(e){return null!==e&&"containerId"in e&&null!==e.containerId&&a(e)},b=function(e){return"rectangle"===e},x=function(e,t){return!(e!==r.a6.ADAPTIVE_RADIUS&&e!==r.a6.LEGACY||!b(t.type))||e===r.a6.PROPORTIONAL_RADIUS&&("line"===(n=t.type)||"arrow"===n||"diamond"===n);var n},w=function(e){return"arrow"===e.type||"line"===e.type||"diamond"===e.type?{type:r.a6.PROPORTIONAL_RADIUS}:"rectangle"===e.type?{type:r.a6.ADAPTIVE_RADIUS}:null}},6797:function(e,t,n){n.d(t,{_:function(){return f},l:function(){return p}});var r=n(5169),i=n(8821),o=n(2248),a=n(7245),s=n(2312),l=n(5901);function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e,t,n){return u=c()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&(0,l.Z)(i,n.prototype),i},u.apply(null,arguments)}function d(e){var t="function"==typeof Map?new Map:void 0;return d=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return u(e,arguments,(0,s.Z)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,l.Z)(r,e)},d(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var p=function(e){(0,o.Z)(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Couldn't export canvas.",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CANVAS_ERROR";return(0,i.Z)(this,n),(e=t.call(this)).name=o,e.message=r,e}return(0,r.Z)(n)}(d(Error)),f=function(e){(0,o.Z)(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Request Aborted";return(0,i.Z)(this,n),t.call(this,e,"AbortError")}return(0,r.Z)(n)}(d(DOMException))},242:function(e,t,n){n.d(t,{AI:function(){return E},F$:function(){return h},Fb:function(){return b},Nd:function(){return y},Qy:function(){return w},S_:function(){return _},YS:function(){return x},bO:function(){return g},h6:function(){return k},iE:function(){return v},iJ:function(){return m},yO:function(){return f},zq:function(){return p}});var r=n(1930),i=n(2577),o=n(7169),a=n(75),s=n(5710);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e,t,n){var r=n.filter((function(t){return t.groupIds.includes(e)}));return r.length<2?t.selectedGroupIds[e]||t.editingGroupId===e?d(d({},t),{},{selectedGroupIds:d(d({},t.selectedGroupIds),{},(0,o.Z)({},e,!1)),editingGroupId:null}):t:d(d({},t),{},{selectedGroupIds:d(d({},t.selectedGroupIds),{},(0,o.Z)({},e,!0)),selectedElementIds:d(d({},t.selectedElementIds),Object.fromEntries(r.map((function(e){return[e.id,!0]}))))})},p=function(e,t){return null!=f(e,t)},f=function(e,t){return t.groupIds.filter((function(t){return t!==e.editingGroupId})).find((function(t){return e.selectedGroupIds[t]}))},m=function(e){return Object.entries(e.selectedGroupIds).filter((function(e){var t=(0,i.Z)(e,2);return t[0],t[1]})).map((function(e){var t=(0,i.Z)(e,2),n=t[0];return t[1],n}))},g=function(e,t){var n=d(d({},e),{},{selectedGroupIds:{}}),r=(0,a.eD)(t,e);if(!r.length)return d(d({},n),{},{editingGroupId:null});var i,o=l(r);try{for(o.s();!(i=o.n()).done;){var s=i.value.groupIds;if(e.editingGroupId){var c=s.indexOf(e.editingGroupId);c>-1&&(s=s.slice(0,c))}if(s.length>0){var u=s[s.length-1];n=h(u,n,t)}}}catch(e){o.e(e)}finally{o.f()}return n},v=function(e,t){return d(d({},e),{},{editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:(0,o.Z)({},t.id,!0)})},y=function(e,t){return e.groupIds.includes(t)},b=function(e,t){return e.filter((function(e){return y(e,t)}))},x=function(e,t){return e.groupIds.find((function(e){return t[e]}))},w=function(e,t,n){for(var i=(0,r.Z)(e),o=t?e.indexOf(t):-1,a=o>-1?o:e.length,s=0;s<a;s++)i[s]=n(i[s]);return i},_=function(e,t,n){var i=(0,r.Z)(e),o=n?i.indexOf(n):-1,a=o>-1?o:i.length;return i.splice(a,0,t),i},k=function(e,t){return e.filter((function(e){return!t[e]}))},E=function(e){var t=new Map;return e.forEach((function(e){var n=0===e.groupIds.length?e.id:e.groupIds[e.groupIds.length-1],i=t.get(n)||[],o=(0,s.WJ)(e);o&&i.push(o),t.set(n,[].concat((0,r.Z)(i),[e]))})),Array.from(t.values())}},8211:function(e,t,n){n.d(t,{Fp:function(){return d},G3:function(){return v},Mj:function(){return h},QT:function(){return w},m0:function(){return g},t:function(){return b}});var r=n(8950),i=n(2975),o=n.n(i),a=n(1463),s=n(4451),l=n(2335),c=n(9487),u=n(4739),d={code:"en",label:"English"},h=[{code:"ar-SA",label:"",rtl:!0},{code:"bg-BG",label:""},{code:"ca-ES",label:"Catal"},{code:"cs-CZ",label:"esky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:""},{code:"es-ES",label:"Espaol"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Franais"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"",rtl:!0},{code:"hi-IN",label:""},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:""},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:" "},{code:"ko-KR",label:""},{code:"ku-TR",label:"Kurd"},{code:"lt-LT",label:"Lietuvi"},{code:"lv-LV",label:"Latvieu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokml"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:""},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Portugus Brasileiro"},{code:"pt-PT",label:"Portugus"},{code:"ro-RO",label:"Romn"},{code:"ru-RU",label:""},{code:"sk-SK",label:"Slovenina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenina"},{code:"tr-TR",label:"Trke"},{code:"uk-UA",label:""},{code:"zh-CN",label:""},{code:"zh-TW",label:""},{code:"vi-VN",label:"Ting Vit"},{code:"mr-IN",label:""}].concat([d]).sort((function(e,t){return e.label>t.label?1:-1})).filter((function(e){return s[e.code]>=85})),p="__test__";"production"===l.Vi.DEVELOPMENT&&h.unshift({code:p,label:"test language"},{code:"".concat(p,".rtl"),label:"test language (rtl)",rtl:!0});var f=d,m={},g=function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t,document.documentElement.dir=f.rtl?"rtl":"ltr",document.documentElement.lang=f.code,!t.code.startsWith(p)){e.next=7;break}m={},e.next=17;break;case 7:return e.prev=7,e.next=10,n(940)("./".concat(f.code,".json"));case 10:m=e.sent,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(7),console.error("Failed to load language ".concat(t.code,":"),e.t0.message),m=a;case 17:c.e_.set(x,t.code);case 18:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){return f},y=function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(void 0===e[r])return;e=e[r]}if("string"==typeof e)return e},b=function(e,t){if(f.code.startsWith(p)){var n=t?"".concat(e,"(").concat(JSON.stringify(t).slice(1,-1),")"):e;return"[[".concat(n,"]]")}var r=e.split("."),i=y(m,r)||y(a,r);if(void 0===i)throw new Error("Can't find translation for ".concat(e));if(t)for(var o in t)i=i.replace("{{".concat(o,"}}"),String(t[o]));return i},x=(0,u.cn)(d.code),w=function(){var e=(0,u.Dv)(x,c.yE);return{t:b,langCode:e}}},9487:function(e,t,n){n.d(t,{e_:function(){return o},yE:function(){return i}});var r=n(4739),i=(n(9787),Symbol()),o=(0,r.Vv)()},6066:function(e,t,n){n.d(t,{E0:function(){return l},Ge:function(){return c},OA:function(){return s},Wl:function(){return a},aU:function(){return i},tW:function(){return o}});var r=n(2335),i={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",NINE:"Digit9",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",R:"KeyR"},o={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:r.Um?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",A:"a",C:"c",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},a=function(e){return e===o.ARROW_LEFT||e===o.ARROW_RIGHT||e===o.ARROW_DOWN||e===o.ARROW_UP},s=function(e){return e.altKey},l=function(e){return e.shiftKey},c=function(e){return e.shiftKey}},6552:function(e,t,n){n.d(t,{EK:function(){return E},H5:function(){return u},Jj:function(){return k},LW:function(){return c},N_:function(){return b},U1:function(){return a},c9:function(){return h},eH:function(){return w},g6:function(){return d},lk:function(){return _},wC:function(){return g},xj:function(){return s},yB:function(){return y},yW:function(){return v},yq:function(){return l}});var r=n(2335),i=n(3063),o=n(8925),a=function(e,t,n,r,i){return[(e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r]},s=function(e,t,n){return a(e[0],e[1],t[0],t[1],n)},l=function(e,t,n,r,i,o,a,s){var l=Math.cos(r),c=Math.sin(r);return e.e&&e.w?t+=i+a:e.e?(t+=i*(1+l),n+=i*c,t+=a*(1-l),n+=a*-c):e.w&&(t+=i*(1-l),n+=i*-c,t+=a*(1+l),n+=a*c),e.n&&e.s?n+=o+s:e.n?(t+=o*c,n+=o*(1-l),t+=s*-c,n+=s*(1+l)):e.s&&(t+=o*-c,n+=o*(1+l),t+=s*c,n+=s*(1-l)),[t,n]},c=function(e,t,n,r){var i=n-e,o=r-t;return Math.hypot(i,o)},u=function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e.length>=3){var n=[e[0],e[e.length-1]],i=n[0],o=n[1];return c(i[0],i[1],o[0],o[1])<=r.qx/t}return!1},h=function(e,t,n){var r=e.length;if(r<3)return!1;for(var i=[Number.MAX_SAFE_INTEGER,n],o=[t,n],a=0,s=0;s<r;s++){var l=e[s],c=e[(s+1)%r];if(m(l,c,o,i)){if(0===f(l,o,c))return p(l,o,c);a++}}return a%2==1},p=function(e,t,n){return t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1])},f=function(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return 0===r?0:r>0?1:2},m=function(e,t,n,r){var i=f(e,t,n),o=f(e,t,r),a=f(n,r,e),s=f(n,r,t);return i!==o&&a!==s||!(0!==i||!p(e,n,t))||!(0!==o||!p(e,r,t))||!(0!==a||!p(n,e,r))||!(0!==s||!p(n,t,r))},g=function(e,t,n){return n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t]},v=function(e,t){var n,i,o;if((null===(n=t.roundness)||void 0===n?void 0:n.type)===r.a6.PROPORTIONAL_RADIUS||(null===(i=t.roundness)||void 0===i?void 0:i.type)===r.a6.LEGACY)return e*r.Rx;if((null===(o=t.roundness)||void 0===o?void 0:o.type)===r.a6.ADAPTIVE_RADIUS){var a,s,l=null!==(a=null===(s=t.roundness)||void 0===s?void 0:s.value)&&void 0!==a?a:r._9;return e<=l/r.Rx?e*r.Rx:l}return 0},y=function(e,t){var n=(0,i.R2)(e);if(!n)return null;for(var r=(0,o.CM)(n[0]),a=[0,0],s=0,l=1/0,u=null;s<r.length;){var d=r[s],h=d.op,p=d.data;if("move"===h&&(a=p),"bcurveTo"===h){var f=a,m=[p[0],p[1]],g=[p[2],p[3]],v=[p[4],p[5]],y=c(v[0],v[1],t[0],t[1]);y<l&&(l=y,u=[f,m,g,v]),a=v}s++}return u},b=function(e,t,n,r,i){var o=function(i,o){return Math.pow(1-i,3)*r[o]+3*i*Math.pow(1-i,2)*n[o]+3*Math.pow(i,2)*(1-i)*t[o]+e[o]*Math.pow(i,3)};return[o(i,0),o(i,1)]},x=function(e,t){var n=[];n[0]=0;for(var r=function(e,t){var n=y(e,t);if(!n)return[];for(var r=[],i=1;i>0;){var o=b(n[0],n[1],n[2],n[3],i);r.push([o[0],o[1]]),i-=.05}return r.length&&k(r.at(-1),t)&&r.push([t[0],t[1]]),r}(e,t),i=0,o=0;i<r.length-1;)o+=c(r[i][0],r[i][1],r[i+1][0],r[i+1][1]),n.push(o),i++;return n},w=function(e,t){return x(e,t).at(-1)},_=function(e,t,n){for(var r=x(e,t),i=r.length-1,o=n*r.at(-1),a=0,s=i,l=0;a<s;)r[l=Math.floor(a+(s-a)/2)]<o?a=l+1:s=l;return r[l]>o&&l--,r[l]===o?l/i:1-(l+(o-r[l])/(r[l+1]-r[l]))/i},k=function(e,t){return e[0]===t[0]&&e[1]===t[1]},E=function(e){return Math.round(e/Math.PI*1e4)%5e3==0}},3024:function(e,t,n){n.d(t,{$D:function(){return E},Fl:function(){return k},I_:function(){return h.I_},N7:function(){return v.N7},NI:function(){return h.NI},NL:function(){return _},ZY:function(){return g.ZY},cT:function(){return g.cT},i1:function(){return S},lV:function(){return g.lV},zh:function(){return y.zh}});var r=n(8950),i=n(7169),o=n(2975),a=n.n(o),s=n(4162),l=n(8897),c=n(679),u=n(2335),d=n(673),h=n(5523),p=n(6665),f=n(1564),m=n(2791),g=n(434),v=n(3063),y=n(7053);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e){var t=new f.Z;return t.replaceAllElements((0,m._N)(e)),t.getNonDeletedElements()},_=function(e){var t=e.elements,n=e.appState,r=e.files,i=e.maxWidthOrHeight,o=e.getDimensions,a=e.exportPadding,l=(0,c.nu)({elements:t,appState:n},null,null),u=l.elements,d=l.appState,h=d.exportBackground,p=d.viewBackgroundColor;return(0,s.NL)(w(u),x(x({},d),{},{offsetTop:0,offsetLeft:0,width:0,height:0}),r||{},{exportBackground:h,exportPadding:a,viewBackgroundColor:p},(function(e,t){var r,a=document.createElement("canvas");if(i){var s;"function"==typeof o&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");var l=Math.max(e,t),c=i<l?i/l:null!==(s=null==n?void 0:n.exportScale)&&void 0!==s?s:1;return a.width=e*c,a.height=t*c,{canvas:a,scale:c}}var u=(null==o?void 0:o(e,t))||{width:e,height:t};return a.width=u.width,a.height=u.height,{canvas:a,scale:null!==(r=u.scale)&&void 0!==r?r:1}}))},k=function(){var e=(0,r.Z)(a().mark((function e(t){var n,i,o,s,l,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(i=t).mimeType,s=void 0===o?u.LO.png:o,l=i.quality,s===u.LO.png&&"number"==typeof l&&console.warn('"quality" will be ignored for "'.concat(u.LO.png,'" mimeType')),"image/jpg"===s&&(s=u.LO.jpg),s!==u.LO.jpg||null!==(n=t.appState)&&void 0!==n&&n.exportBackground||(console.warn('Defaulting "exportBackground" to "true" for "'.concat(u.LO.jpg,'" mimeType')),t=x(x({},t),{},{appState:x(x({},t.appState),{},{exportBackground:!0})})),e.next=6,_(x(x({},t),{},{elements:w(t.elements)}));case 6:return c=e.sent,l=l||(/image\/jpe?g/.test(s)?.92:.8),e.abrupt("return",new Promise((function(e,n){c.toBlob(function(){var i=(0,r.Z)(a().mark((function r(i){var o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i){r.next=2;break}return r.abrupt("return",n(new Error("couldn't export to blob")));case 2:if(!i||s!==u.LO.png||null===(o=t.appState)||void 0===o||!o.exportEmbedScene){r.next=6;break}return r.next=5,(0,d.encodePngMetadata)({blob:i,metadata:(0,h.I_)(t.elements,t.appState,t.files||{},"local")});case 5:i=r.sent;case 6:e(i);case 7:case"end":return r.stop()}}),r)})));return function(e){return i.apply(this,arguments)}}(),s,l)})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r,i,o,u,d,p,f,m,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.elements,r=t.appState,i=void 0===r?(0,l.im)():r,o=t.files,u=void 0===o?{}:o,d=t.exportPadding,p=(0,c.nu)({elements:n,appState:i},null,null),f=p.elements,m=p.appState,g=x(x({},m),{},{exportPadding:d}),e.abrupt("return",(0,s.$D)(w(f),g,u,{serializeAsJSON:function(){return(0,h.I_)(f,g,u||{},"local")}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("svg"!==t.type){e.next=8;break}return e.next=3,E(t);case 3:return n=e.sent,e.next=6,(0,p.dd)(n.outerHTML);case 6:case 11:case 17:e.next=20;break;case 8:if("png"!==t.type){e.next=13;break}return e.next=11,(0,p.uR)(k(t));case 13:if("json"!==t.type){e.next=19;break}return r=x(x({offsetTop:0,offsetLeft:0,width:0,height:0},(0,l.im)()),t.appState),e.next=17,(0,p.vQ)(t.elements,r,t.files);case 19:throw new Error("Invalid export type");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},5001:function(e,t,n){n.d(t,{k:function(){return i},z:function(){return o}});var r=n(1930),i=function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{width:Math.max.apply(Math,(0,r.Z)(t))-Math.min.apply(Math,(0,r.Z)(t)),height:Math.max.apply(Math,(0,r.Z)(n))-Math.min.apply(Math,(0,r.Z)(n))}},o=function(e,t,n,i){var o=n.map((function(t){return t[e]})),a=Math.max.apply(Math,(0,r.Z)(o)),s=Math.min.apply(Math,(0,r.Z)(o)),l=a-s,c=0===l?1:t/l,u=1/0,d=n.map((function(t){var n=t[e]*c,i=(0,r.Z)(t);return i[e]=n,n<u&&(u=n),i}));if(!i)return d;if(2===d.length)return d;var h=s-u;return d.map((function(t){return t.map((function(t,n){return n===e?t+h:t}))}))}},6954:function(e,t,n){n.d(t,{LU:function(){return l},kb:function(){return c}});var r=n(8152),i=n(5605),o=n(6340),a=new r.k(Date.now()),s=0,l=function(){return Math.floor(a.next()*Math.pow(2,31))},c=function(){return(0,o.h2)()?"id".concat(s++):(0,i.x0)()}},3063:function(e,t,n){n.d(t,{Dn:function(){return U},i:function(){return X},N7:function(){return ae},R2:function(){return G},bI:function(){return Y},lw:function(){return te},Rg:function(){return re}});var r=n(1930),i=n(7169),o=n(2577),a=n(1974),s=n(8925),l=n(6340),c=n(6552),u=n(8234),d=n(8897),h=n(2335);function p(e,t,n,r=(e=>e)){return e*r(.5-t*(.5-n))}function f(e,t){return[e[0]+t[0],e[1]+t[1]]}function m(e,t){return[e[0]-t[0],e[1]-t[1]]}function g(e,t){return[e[0]*t,e[1]*t]}function v(e){return[e[1],-e[0]]}function y(e,t){return e[0]*t[0]+e[1]*t[1]}function b(e,t){return e[0]===t[0]&&e[1]===t[1]}function x(e,t){return function(e){return e[0]*e[0]+e[1]*e[1]}(m(e,t))}function w(e){return function(e,t){return[e[0]/t,e[1]/t]}(e,function(e){return Math.hypot(e[0],e[1])}(e))}function _(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function k(e,t,n){let r=Math.sin(n),i=Math.cos(n),o=e[0]-t[0],a=e[1]-t[1],s=o*r+a*i;return[o*i-a*r+t[0],s+t[1]]}function E(e,t,n){return f(e,g(m(t,e),n))}function S(e,t,n){return f(e,g(t,n))}var{min:C,PI:T}=Math,M=T+1e-4;function I(e,t={}){return function(e,t={}){let{size:n=16,smoothing:r=.5,thinning:i=.5,simulatePressure:o=!0,easing:a=(e=>e),start:s={},end:l={},last:c=!1}=t,{cap:u=!0,easing:d=(e=>e*(2-e))}=s,{cap:h=!0,easing:b=(e=>--e*e*e+1)}=l;if(0===e.length||n<=0)return[];let _,T=e[e.length-1].runningLength,I=!1===s.taper?0:!0===s.taper?Math.max(n,T):s.taper,O=!1===l.taper?0:!0===l.taper?Math.max(n,T):l.taper,A=Math.pow(n*r,2),P=[],D=[],L=e.slice(0,10).reduce(((e,t)=>{let r=t.pressure;if(o){let i=C(1,t.distance/n),o=C(1,1-i);r=C(1,e+.275*i*(o-e))}return(e+r)/2}),e[0].pressure),R=p(n,i,e[e.length-1].pressure,a),z=e[0].vector,j=e[0].point,N=j,B=j,F=N,V=!1;for(let w=0;w<e.length;w++){let{pressure:t}=e[w],{point:r,vector:s,distance:l,runningLength:c}=e[w];if(w<e.length-1&&T-c<3)continue;if(i){if(o){let e=C(1,l/n),r=C(1,1-e);t=C(1,L+.275*e*(r-L))}R=p(n,i,t,a)}else R=n/2;void 0===_&&(_=R);let u=c<I?d(c/I):1,h=T-c<O?b((T-c)/O):1;R=Math.max(.01,R*Math.min(u,h));let S=(w<e.length-1?e[w+1]:e[w]).vector,U=w<e.length-1?y(s,S):1,$=null!==U&&U<0;if(y(s,z)<0&&!V||$){let e=g(v(z),R);for(let t=1/13,n=0;n<=1;n+=t)B=k(m(r,e),r,M*n),P.push(B),F=k(f(r,e),r,M*-n),D.push(F);j=B,N=F,$&&(V=!0);continue}if(V=!1,w===e.length-1){let e=g(v(s),R);P.push(m(r,e)),D.push(f(r,e));continue}let Z=g(v(E(S,s,U)),R);B=m(r,Z),(w<=1||x(j,B)>A)&&(P.push(B),j=B),F=f(r,Z),(w<=1||x(N,F)>A)&&(D.push(F),N=F),L=t,z=s}let U=e[0].point.slice(0,2),$=e.length>1?e[e.length-1].point.slice(0,2):f(e[0].point,[1,1]),Z=[],H=[];if(1===e.length){if(!I&&!O||c){let e=S(U,w(v(m(U,$))),-(_||R)),t=[];for(let n=1/13,r=n;r<=1;r+=n)t.push(k(e,U,2*M*r));return t}}else{if(!(I||O&&1===e.length))if(u)for(let e=1/13,n=e;n<=1;n+=e){let e=k(D[0],U,M*n);Z.push(e)}else{let e=m(P[0],D[0]),t=g(e,.5),n=g(e,.51);Z.push(m(U,t),m(U,n),f(U,n),f(U,t))}let t=v(function(e){return[-e[0],-e[1]]}(e[e.length-1].vector));if(O||I&&1===e.length)H.push($);else if(h){let e=S($,t,R);for(let t=1/29,n=t;n<1;n+=t)H.push(k(e,$,3*M*n))}else H.push(f($,g(t,R)),f($,g(t,.99*R)),m($,g(t,.99*R)),m($,g(t,R)))}return P.concat(H,D.reverse(),Z)}(function(e,t={}){var n;let{streamline:r=.5,size:i=16,last:o=!1}=t;if(0===e.length)return[];let a=.15+.85*(1-r),s=Array.isArray(e[0])?e:e.map((({x:e,y:t,pressure:n=.5})=>[e,t,n]));if(2===s.length){let e=s[1];s=s.slice(0,-1);for(let t=1;t<5;t++)s.push(E(s[0],e,t/4))}1===s.length&&(s=[...s,[...f(s[0],[1,1]),...s[0].slice(2)]]);let l=[{point:[s[0][0],s[0][1]],pressure:s[0][2]>=0?s[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,u=0,d=l[0],h=s.length-1;for(let p=1;p<s.length;p++){let e=o&&p===h?s[p].slice(0,2):E(d.point,s[p],a);if(b(d.point,e))continue;let t=_(e,d.point);if(u+=t,p<h&&!c){if(u<i)continue;c=!0}d={point:e,pressure:s[p][2]>=0?s[p][2]:.5,vector:w(m(d.point,e)),distance:t,runningLength:u},l.push(d)}return l[0].vector=(null==(n=l[1])?void 0:n.vector)||[0,0],l}(e,t),t)}var O=n(5710),A=n(6938);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L="invert(100%) hue-rotate(180deg) saturate(1.25)",R=(0,d.im)(),z=function(e,t){return(0,a.wi)(e)&&!t.imageCache.has(e.fileId)},j=function(e,t){var n;return"dark"===t.theme&&(0,a.wi)(e)&&!z(e,t)&&(null===(n=t.imageCache.get(e.fileId))||void 0===n?void 0:n.mimeType)!==h.LO.svg},N=function(e){return[8,8+e]},B=function(e){return[1.5,6+e]},F=function(e){return"freedraw"===e.type?12*e.strokeWidth:20},V=function(e,t,n){var r,i=document.createElement("canvas"),c=i.getContext("2d"),d=F(e),h=function(e,t){var n=16777216,r=32767,i=F(e),c=(0,s.qf)(e),u=(0,o.Z)(c,4),d=u[0],h=u[1],p=u[2],f=u[3],m=(0,a.bt)(e)||(0,a.F9)(e)?(0,l.TE)(d,p):e.width,g=(0,a.bt)(e)||(0,a.F9)(e)?(0,l.TE)(h,f):e.height,v=m*window.devicePixelRatio+2*i,y=g*window.devicePixelRatio+2*i,b=t.value;return(v*b>r||y*b>r)&&(b=Math.min(r/v,r/y)),v*y*b*b>n&&(b=Math.sqrt(n/(v*y))),{width:v=Math.floor(v*b),height:y=Math.floor(y*b),scale:b}}(e,t),p=h.width,f=h.height,m=h.scale;i.width=p,i.height=f;var g=0,v=0;if((0,a.bt)(e)||(0,a.F9)(e)){var y=(0,s.qf)(e),b=(0,o.Z)(y,2),x=b[0],w=b[1];g=e.x>x?(0,l.TE)(e.x,x)*window.devicePixelRatio*m:0,v=e.y>w?(0,l.TE)(e.y,w)*window.devicePixelRatio*m:0,c.translate(g,v)}c.save(),c.translate(d*m,d*m),c.scale(window.devicePixelRatio*m,window.devicePixelRatio*m);var _=u.Z.canvas(i);return j(e,n)&&(c.filter=L),H(e,_,c,n),c.restore(),{element:e,canvas:i,theme:n.theme,scale:m,zoomValue:t.value,canvasOffsetX:g,canvasOffsetY:v,boundTextElementVersion:(null===(r=(0,O.WJ)(e))||void 0===r?void 0:r.version)||null}},U=14,$=document.createElement("img");$.src="data:".concat(h.LO.svg,",").concat(encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>'));var Z=document.createElement("img");Z.src="data:".concat(h.LO.svg,",").concat(encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>'));var H=function(e,t,n,r){switch(n.globalAlpha=e.opacity/100,e.type){case"rectangle":case"diamond":case"ellipse":n.lineJoin="round",n.lineCap="round",t.draw(G(e));break;case"arrow":case"line":n.lineJoin="round",n.lineCap="round",G(e).forEach((function(e){t.draw(e)}));break;case"freedraw":n.save(),n.fillStyle=e.strokeColor;var i=function(e){return ie.get(e)}(e),o=G(e);o&&t.draw(o),n.fillStyle=e.strokeColor,n.fill(i),n.restore();break;case"image":var s,c=(0,a.wi)(e)?null===(s=r.imageCache.get(e.fileId))||void 0===s?void 0:s.image:void 0;null==c||c instanceof Promise?function(e,t,n){t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);var r=Math.min(e.width,e.height),i=Math.min(r,Math.min(.4*r,100));t.drawImage("error"===e.status?Z:$,e.width/2-i/2,e.height/2-i/2,i,i)}(e,n,r.zoom.value):n.drawImage(c,0,0,e.width,e.height);break;default:if(!(0,a.iB)(e))throw new Error("Unimplemented type ".concat(e.type));var u=(0,l.dZ)(e.text),d=u&&!n.canvas.isConnected;d&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",u?"rtl":"ltr"),n.save(),n.font=(0,l.mO)(e),n.fillStyle=e.strokeColor,n.textAlign=e.textAlign;for(var h=e.text.replace(/\r\n?/g,"\n").split("\n"),p="center"===e.textAlign?e.width/2:"right"===e.textAlign?e.width:0,f=(0,O.Rg)(e.fontSize,e.lineHeight),m=e.height-e.baseline,g=0;g<h.length;g++)n.fillText(h[g],p,(g+1)*f-m);n.restore(),d&&n.canvas.remove()}n.globalAlpha=1},W=new WeakMap,q=new WeakMap,G=function(e){return q.get(e)},K=function(e,t){return q.set(e,t)},Y=function(e){return q.delete(e)},X=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={seed:e.seed,strokeLineDash:"dashed"===e.strokeStyle?N(e.strokeWidth):"dotted"===e.strokeStyle?B(e.strokeWidth):void 0,disableMultiStroke:"solid"!==e.strokeStyle,strokeWidth:"solid"!==e.strokeStyle?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:4*e.strokeWidth,roughness:e.roughness,stroke:e.strokeColor,preserveVertices:t};switch(e.type){case"rectangle":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill="transparent"===e.backgroundColor?void 0:e.backgroundColor,"ellipse"===e.type&&(n.curveFitting=1),n;case"line":case"freedraw":return(0,c.g6)(e.points)&&(n.fillStyle=e.fillStyle,n.fill="transparent"===e.backgroundColor?void 0:e.backgroundColor),n;case"arrow":return n;default:throw new Error("Unimplemented type ".concat(e.type))}},J=function(e,t){var n=q.get(e);if(void 0===n)switch(W.delete(e),e.type){case"rectangle":if(e.roundness){var i=e.width,a=e.height,l=(0,c.yW)(Math.min(i,a),e);n=t.path("M ".concat(l," 0 L ").concat(i-l," 0 Q ").concat(i," 0, ").concat(i," ").concat(l," L ").concat(i," ").concat(a-l," Q ").concat(i," ").concat(a,", ").concat(i-l," ").concat(a," L ").concat(l," ").concat(a," Q 0 ").concat(a,", 0 ").concat(a-l," L 0 ").concat(l," Q 0 0, ").concat(l," 0"),X(e,!0))}else n=t.rectangle(0,0,e.width,e.height,X(e));K(e,n);break;case"diamond":var u=(0,s.UC)(e),d=(0,o.Z)(u,8),h=d[0],p=d[1],f=d[2],m=d[3],g=d[4],v=d[5],y=d[6],b=d[7];if(e.roundness){var x=(0,c.yW)(Math.abs(h-y),e),w=(0,c.yW)(Math.abs(m-p),e);n=t.path("M ".concat(h+x," ").concat(p+w," L ").concat(f-x," ").concat(m-w,"\n            C ").concat(f," ").concat(m,", ").concat(f," ").concat(m,", ").concat(f-x," ").concat(m+w,"\n            L ").concat(g+x," ").concat(v-w,"\n            C ").concat(g," ").concat(v,", ").concat(g," ").concat(v,", ").concat(g-x," ").concat(v-w,"\n            L ").concat(y+x," ").concat(b+w,"\n            C ").concat(y," ").concat(b,", ").concat(y," ").concat(b,", ").concat(y+x," ").concat(b-w,"\n            L ").concat(h-x," ").concat(p+w,"\n            C ").concat(h," ").concat(p,", ").concat(h," ").concat(p,", ").concat(h+x," ").concat(p+w),X(e,!0))}else n=t.polygon([[h,p],[f,m],[g,v],[y,b]],X(e));K(e,n);break;case"ellipse":n=t.ellipse(e.width/2,e.height/2,e.width,e.height,X(e)),K(e,n);break;case"line":case"arrow":var _=X(e),k=e.points.length?e.points:[[0,0]];if(n=e.roundness?[t.curve(k,_)]:_.fill?[t.polygon(k,_)]:[t.linearPath(k,_)],"arrow"===e.type){var E=e.startArrowhead,S=void 0===E?null:E,C=e.endArrowhead,T=void 0===C?"arrow":C,M=function(e,n,r,i){var a=(0,s.Y5)(e,n,r,i);if(null===a)return[];if("dot"===i){var l=(0,o.Z)(a,3),c=l[0],u=l[1],d=l[2];return[t.circle(c,u,d,D(D({},_),{},{fill:e.strokeColor,fillStyle:"solid",stroke:"none"}))]}if("triangle"===i){var h=(0,o.Z)(a,6),p=h[0],f=h[1],m=h[2],g=h[3],v=h[4],y=h[5];return delete _.strokeLineDash,[t.polygon([[p,f],[m,g],[v,y],[p,f]],D(D({},_),{},{fill:e.strokeColor,fillStyle:"solid"}))]}var b=(0,o.Z)(a,6),x=b[0],w=b[1],k=b[2],E=b[3],S=b[4],C=b[5];if("dotted"===e.strokeStyle){var T=B(e.strokeWidth-1);_.strokeLineDash=[T[0],T[1]-1]}else delete _.strokeLineDash;return[t.line(k,E,x,w,_),t.line(S,C,x,w,_)]};if(null!==S){var I,O=M(e,n,"start",S);(I=n).push.apply(I,(0,r.Z)(O))}if(null!==T){var A,P=M(e,n,"end",T);(A=n).push.apply(A,(0,r.Z)(P))}}K(e,n);break;case"freedraw":oe(e),n=(0,c.g6)(e.points)?t.polygon(e.points,D(D({},X(e)),{},{stroke:"none"})):null,K(e,n);break;case"text":case"image":K(e,null)}},Q=function(e,t){var n,r=t?t.zoom:R.zoom,i=W.get(e),o=i&&i.zoomValue!==r.value&&!(null!=t&&t.shouldCacheIgnoreZoom),a=(null===(n=(0,O.WJ)(e))||void 0===n?void 0:n.version)||null;if(!i||o||i.theme!==t.theme||i.boundTextElementVersion!==a){var s=V(e,r,t);return W.set(e,s),s}return i},ee=function(e,t,n,r){var i=e.element,c=F(i),u=e.scale,d=(0,s.qf)(i),p=(0,o.Z)(d,4),f=p[0],m=p[1],g=p[2],v=p[3];(0,a.F9)(i)&&(f=Math.floor(f),g=Math.ceil(g),m=Math.floor(m),v=Math.ceil(v));var y=((f+g)/2+r.scrollX)*window.devicePixelRatio,b=((m+v)/2+r.scrollY)*window.devicePixelRatio;n.save(),n.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);var x=(0,O.WJ)(i);if((0,a.Yv)(i)&&x){var w=document.createElement("canvas"),_=w.getContext("2d"),k=Math.max((0,l.TE)(f,g),(0,l.TE)(m,v));w.width=k*window.devicePixelRatio*u+c*e.scale*10,w.height=k*window.devicePixelRatio*u+c*e.scale*10;var E=(w.width-e.canvas.width)/2,S=(w.height-e.canvas.height)/2;_.translate(w.width/2,w.height/2),_.rotate(i.angle),_.drawImage(e.canvas,-e.canvas.width/2,-e.canvas.height/2,e.canvas.width,e.canvas.height);var C=(0,s.qf)(x),T=(0,o.Z)(C,6),M=T[4],I=T[5];_.rotate(-i.angle);var A=w.width/2-(M-f)*window.devicePixelRatio*u-E-c*u,P=w.height/2-(I-m)*window.devicePixelRatio*u-S-c*u;_.translate(-A,-P),_.clearRect(-(x.width/2+h.gK)*window.devicePixelRatio*u,-(x.height/2+h.gK)*window.devicePixelRatio*u,(x.width+2*h.gK)*window.devicePixelRatio*u,(x.height+2*h.gK)*window.devicePixelRatio*u),n.translate(y,b),n.drawImage(w,-(g-f)/2*window.devicePixelRatio-E/u-c,-(v-m)/2*window.devicePixelRatio-S/u-c,w.width/u,w.height/u)}else if(n.translate(y,b),n.rotate(i.angle),"scale"in e.element&&!z(i,r)&&n.scale(e.element.scale[0],e.element.scale[1]),n.translate(-y,-b),n.drawImage(e.canvas,(f+r.scrollX)*window.devicePixelRatio-c*e.scale/e.scale,(m+r.scrollY)*window.devicePixelRatio-c*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale),"true"==={REACT_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",REACT_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",REACT_APP_LIBRARY_URL:"https://libraries.excalidraw.com",REACT_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",REACT_APP_PORTAL_URL:"https://portal.excalidraw.com",REACT_APP_WS_SERVER_URL:"",REACT_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',REACT_APP_GOOGLE_ANALYTICS_ID:"UA-387204-13",REACT_APP_MATOMO_URL:"https://excalidraw.matomo.cloud/",REACT_APP_CDN_MATOMO_TRACKER_URL:"//cdn.matomo.cloud/excalidraw.matomo.cloud/matomo.js",REACT_APP_MATOMO_SITE_ID:"1",REACT_APP_PLUS_APP:"https://app.excalidraw.com",PKG_NAME:"@excalidraw/excalidraw",PKG_VERSION:"0.15.2",IS_EXCALIDRAW_NPM_PACKAGE:!0}.REACT_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX&&(0,a.Xo)(i)){var D=(0,O.cw)(i);n.strokeStyle="#c92a2a",n.lineWidth=3,n.strokeRect((D.x+r.scrollX)*window.devicePixelRatio,(D.y+r.scrollY)*window.devicePixelRatio,(0,O.jd)(i)*window.devicePixelRatio,(0,O.N2)(i)*window.devicePixelRatio)}n.restore()},te=function(e,t,n,r,i){var d=t.generator;switch(e.type){case"selection":n.save(),n.translate(e.x+r.scrollX,e.y+r.scrollY),n.fillStyle="rgba(0, 0, 200, 0.04)";var h=.5/r.zoom.value;n.fillRect(h,h,e.width,e.height),n.lineWidth=1/r.zoom.value,n.strokeStyle="rgb(105, 101, 219)",n.strokeRect(h,h,e.width,e.height),n.restore();break;case"freedraw":if(J(e,d),r.isExporting){var p=(0,s.qf)(e),f=(0,o.Z)(p,4),m=f[0],g=f[1],v=f[2],y=f[3],b=(m+v)/2+r.scrollX,x=(g+y)/2+r.scrollY,w=(v-m)/2-(e.x-m),_=(y-g)/2-(e.y-g);n.save(),n.translate(b,x),n.rotate(e.angle),n.translate(-w,-_),H(e,t,n,r),n.restore()}else{var k=Q(e,r);ee(k,0,n,r)}break;case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":if(J(e,d),r.isExporting){var E=(0,s.qf)(e),S=(0,o.Z)(E,4),C=S[0],T=S[1],M=S[2],I=S[3],P=(C+M)/2+r.scrollX,D=(T+I)/2+r.scrollY,L=(M-C)/2-(e.x-C),R=(I-T)/2-(e.y-T);if((0,a.iB)(e)){var z=(0,O.tl)(e);if((0,a.Yv)(z)){var N=A._.getBoundTextElementPosition(z,e);L=(M-C)/2-(N.x-C),R=(I-T)/2-(N.y-T)}}n.save(),n.translate(P,D),j(e,r)&&(n.filter="none");var B=(0,O.WJ)(e);if((0,a.Yv)(e)&&B){var V=document.createElement("canvas"),U=V.getContext("2d"),$=Math.max((0,l.TE)(C,M),(0,l.TE)(T,I)),Z=F(e);V.width=$*i.exportScale+10*Z*i.exportScale,V.height=$*i.exportScale+10*Z*i.exportScale,U.translate(V.width/2,V.height/2),U.scale(i.exportScale,i.exportScale),L=e.width/2-(e.x-C),R=e.height/2-(e.y-T),U.rotate(e.angle);var W=u.Z.canvas(V);U.translate(-L,-R),H(e,W,U,r),U.translate(L,R),U.rotate(-e.angle);var q=(0,s.qf)(B),G=(0,o.Z)(q,6),K=(C+M)/2-G[4],Y=(T+I)/2-G[5];U.translate(-K,-Y),U.clearRect(-B.width/2,-B.height/2,B.width,B.height),n.scale(1/i.exportScale,1/i.exportScale),n.drawImage(V,-V.width/2,-V.height/2,V.width,V.height)}else n.rotate(e.angle),"image"===e.type&&n.scale(e.scale[0],e.scale[1]),n.translate(-L,-R),H(e,t,n,r);n.restore()}else{var X=Q(e,r),te=n.imageSmoothingEnabled;null!=r&&r.shouldCacheIgnoreZoom||e.angle&&!(0,c.EK)(e.angle)||(n.imageSmoothingEnabled=!1),ee(X,0,n,r),n.imageSmoothingEnabled=te}break;default:throw new Error("Unimplemented type ".concat(e.type))}},ne=function(e,t,n){if(void 0===n)return e.draw(t);var r={sets:t.sets,shape:t.shape,options:D(D({},t.options),{},{fixedDecimalPlaceDigits:n})};return e.draw(r)},re=function(e,t,n,r,i,u,d){var p=(0,s.qf)(e),f=(0,o.Z)(p,4),m=f[0],g=f[1],v=f[2],y=f[3],b=(v-m)/2-(e.x-m),x=(y-g)/2-(e.y-g);if((0,a.iB)(e)){var w=(0,O.tl)(e);if((0,a.Yv)(w)){var _=(0,s.qf)(w),k=(0,o.Z)(_,4),E=k[0],S=k[1],C=k[2],T=k[3],M=A._.getBoundTextElementPosition(w,e);b=(C-E)/2-(M.x-E),x=(T-S)/2-(M.y-S),i=i+M.x-e.x,u=u+M.y-e.y}}var I=180*e.angle/Math.PI,P=t.generator,D=n;if(e.link){var R=n.ownerDocument.createElementNS(h.hR,"a");R.setAttribute("href",e.link),D.appendChild(R),D=R}switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":J(e,P);var z=ne(t,G(e),h.zK),j=e.opacity/100;1!==j&&(z.setAttribute("stroke-opacity","".concat(j)),z.setAttribute("fill-opacity","".concat(j))),z.setAttribute("stroke-linecap","round"),z.setAttribute("transform","translate(".concat(i||0," ").concat(u||0,") rotate(").concat(I," ").concat(b," ").concat(x,")")),D.appendChild(z);break;case"line":case"arrow":var N=(0,O.WJ)(e),B=n.ownerDocument.createElementNS(h.hR,"mask");if(N){B.setAttribute("id","mask-".concat(e.id));var F=n.ownerDocument.createElementNS(h.hR,"rect");i=i||0,u=u||0,F.setAttribute("x","0"),F.setAttribute("y","0"),F.setAttribute("fill","#fff"),F.setAttribute("width","".concat(e.width+100+i)),F.setAttribute("height","".concat(e.height+100+u)),B.appendChild(F);var V=n.ownerDocument.createElementNS(h.hR,"rect"),U=A._.getBoundTextElementPosition(e,N),$=i+U.x-e.x,Z=u+U.y-e.y;V.setAttribute("x",$.toString()),V.setAttribute("y",Z.toString()),V.setAttribute("fill","#000"),V.setAttribute("width","".concat(N.width)),V.setAttribute("height","".concat(N.height)),V.setAttribute("opacity","1"),B.appendChild(V)}J(e,P);var H=n.ownerDocument.createElementNS(h.hR,"g");N&&H.setAttribute("mask","url(#mask-".concat(e.id,")"));var W=e.opacity/100;H.setAttribute("stroke-linecap","round"),G(e).forEach((function(n){var r=ne(t,n,h.zK);1!==W&&(r.setAttribute("stroke-opacity","".concat(W)),r.setAttribute("fill-opacity","".concat(W))),r.setAttribute("transform","translate(".concat(i||0," ").concat(u||0,") rotate(").concat(I," ").concat(b," ").concat(x,")")),"line"===e.type&&(0,c.g6)(e.points)&&"transparent"!==e.backgroundColor&&r.setAttribute("fill-rule","evenodd"),H.appendChild(r)})),D.appendChild(H),D.append(B);break;case"freedraw":J(e,P),oe(e);var q=e.opacity/100,K=G(e),Y=K?ne(t,K,h.zK):n.ownerDocument.createElementNS(h.hR,"g");1!==q&&(Y.setAttribute("stroke-opacity","".concat(q)),Y.setAttribute("fill-opacity","".concat(q))),Y.setAttribute("transform","translate(".concat(i||0," ").concat(u||0,") rotate(").concat(I," ").concat(b," ").concat(x,")")),Y.setAttribute("stroke","none");var X=n.ownerDocument.createElementNS(h.hR,"path");X.setAttribute("fill",e.strokeColor),X.setAttribute("d",ae(e)),Y.appendChild(X),D.appendChild(Y);break;case"image":var Q=Math.round(e.width),ee=Math.round(e.height),te=(0,a.wi)(e)&&r[e.fileId];if(te){var re="image-".concat(te.id),ie=n.querySelector("#".concat(re));if(!ie){(ie=n.ownerDocument.createElementNS(h.hR,"symbol")).id=re;var se=n.ownerDocument.createElementNS(h.hR,"image");se.setAttribute("width","100%"),se.setAttribute("height","100%"),se.setAttribute("href",te.dataURL),ie.appendChild(se),D.prepend(ie)}var le=n.ownerDocument.createElementNS(h.hR,"use");if(le.setAttribute("href","#".concat(re)),d&&te.mimeType!==h.LO.svg&&le.setAttribute("filter",L),le.setAttribute("width","".concat(Q)),le.setAttribute("height","".concat(ee)),1!==e.scale[0]||1!==e.scale[1]){var ce=1!==e.scale[0]?-Q:0,ue=1!==e.scale[1]?-ee:0;le.setAttribute("transform","scale(".concat(e.scale[0],", ").concat(e.scale[1],") translate(").concat(ce," ").concat(ue,")"))}var de=n.ownerDocument.createElementNS(h.hR,"g");de.appendChild(le),de.setAttribute("transform","translate(".concat(i||0," ").concat(u||0,") rotate(").concat(I," ").concat(b," ").concat(x,")")),D.appendChild(de)}break;default:if(!(0,a.iB)(e))throw new Error("Unimplemented type ".concat(e.type));var he=e.opacity/100,pe=n.ownerDocument.createElementNS(h.hR,"g");1!==he&&(pe.setAttribute("stroke-opacity","".concat(he)),pe.setAttribute("fill-opacity","".concat(he))),pe.setAttribute("transform","translate(".concat(i||0," ").concat(u||0,") rotate(").concat(I," ").concat(b," ").concat(x,")"));for(var fe=e.text.replace(/\r\n?/g,"\n").split("\n"),me=(0,O.Rg)(e.fontSize,e.lineHeight),ge="center"===e.textAlign?e.width/2:"right"===e.textAlign?e.width:0,ve=(0,l.dZ)(e.text)?"rtl":"ltr",ye="center"===e.textAlign?"middle":"right"===e.textAlign||"rtl"===ve?"end":"start",be=0;be<fe.length;be++){var xe=n.ownerDocument.createElementNS(h.hR,"text");xe.textContent=fe[be],xe.setAttribute("x","".concat(ge)),xe.setAttribute("y","".concat(be*me)),xe.setAttribute("font-family",(0,l.$g)(e)),xe.setAttribute("font-size","".concat(e.fontSize,"px")),xe.setAttribute("fill",e.strokeColor),xe.setAttribute("text-anchor",ye),xe.setAttribute("style","white-space: pre;"),xe.setAttribute("direction",ve),xe.setAttribute("dominant-baseline","text-before-edge"),pe.appendChild(xe)}D.appendChild(pe)}},ie=new WeakMap([]);function oe(e){var t=ae(e),n=new Path2D(t);return ie.set(e,n),n}function ae(e){return function(e){if(!e.length)return"";var t=e.length-1;return e.reduce((function(e,n,r,i){return r===t?e.push(n,se(n,i[0]),"L",i[0],"Z"):e.push(n,se(n,i[r+1])),e}),["M",e[0],"Q"]).join(" ").replace(le,"$1")}(I(e.simulatePressure?e.points:e.points.length?e.points.map((function(t,n){var r=(0,o.Z)(t,2);return[r[0],r[1],e.pressures[n]]})):[[0,0,.5]],{simulatePressure:e.simulatePressure,size:4.25*e.strokeWidth,thinning:.6,smoothing:.5,streamline:.5,easing:function(e){return Math.sin(e*Math.PI/2)},last:!!e.lastCommittedPoint}))}function se(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}var le=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g},3547:function(e,t,n){n.d(t,{Lu:function(){return S},Eu:function(){return D},M_:function(){return V}});var r,i=n(2577),o=n(1930),a=n(5284),s=n(1047),l=n(756),c=n(1868),u=n(3063),d=n(8982),h=n(6938),p=n(242),f=n(2325),m=n(8290),g=n(267),v=n(6340);!function(e){e.ACTIVE="active",e.AWAY="away",e.IDLE="idle"}(r||(r={}));var y=n(2335),b=n(4929),x=n(1974);function w(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k,E=(0,v.Q5)(),S=2,C=function(e,t,n,r,i,o,a,s){var l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];e.save(),e.translate(o,a),e.rotate(s),l&&e.fillRect(t-o,n-a,r,i),e.strokeRect(t-o,n-a,r,i),e.restore()},T=function(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.beginPath(),e.arc(t,n,r,0,2*Math.PI),e.fill(),i&&e.stroke()},M=function(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",o?e.fillStyle="rgba(134, 131, 226, 0.9)":a&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),T(e,r[0],r[1],i/n.zoom.value,!a)},I=function(e,t,n,r){if(t.selectedLinearElement){e.save(),e.translate(n.scrollX,n.scrollY),e.lineWidth=1/n.zoom.value;var i=h._.getPointsGlobalCoordinates(r),o=h._.POINT_HANDLE_SIZE,a=t.editingLinearElement?o:o/2;i.forEach((function(r,i){var o,s,l=!(null===(o=t.editingLinearElement)||void 0===o||null===(s=o.selectedPointsIndices)||void 0===s||!s.includes(i));M(e,t,n,r,a,l)})),h._.getEditorMidPoints(r,t).filter((function(e){return null!==e})).forEach((function(r){var s;null!=t&&null!==(s=t.selectedLinearElement)&&void 0!==s&&s.segmentMidPointHoveredCoords&&h._.arePointsEqual(r,t.selectedLinearElement.segmentMidPointHoveredCoords)?t.editingLinearElement?(M(e,t,n,r,a,!1),O(r,e,n)):(O(r,e,n),M(e,t,n,r,a,!1)):(t.editingLinearElement||2===i.length)&&M(e,t,n,r,o/2,!1,!0)})),e.restore()}},O=function(e,t,n){t.fillStyle="rgba(105, 101, 219, 0.4)",T(t,e[0],e[1],h._.POINT_HANDLE_SIZE/n.zoom.value,!1)},A=function(e){var t,n=e.elements,f=e.appState,v=e.scale,b=e.rc,_=e.canvas,k=e.renderConfig;if(null===_)return{atLeastOneVisibleElement:!1};var T=k.renderScrollbars,M=void 0===T||T,A=k.renderSelection,P=void 0===A||A,D=k.renderGrid,j=void 0===D||D,N=k.isExporting,V=k.selectionColor||a.black,U=_.getContext("2d");U.setTransform(1,0,0,1,0,0),U.save(),U.scale(v,v);var $=_.width/v,Z=_.height/v;N&&"dark"===k.theme&&(U.filter=y.ZF),"string"==typeof k.viewBackgroundColor?(("transparent"===k.viewBackgroundColor||5===k.viewBackgroundColor.length||9===k.viewBackgroundColor.length||/(hsla|rgba)\(/.test(k.viewBackgroundColor))&&U.clearRect(0,0,$,Z),U.save(),U.fillStyle=k.viewBackgroundColor,U.fillRect(0,0,$,Z),U.restore()):U.clearRect(0,0,$,Z),U.save(),U.scale(k.zoom.value,k.zoom.value),j&&f.gridSize&&function(e,t,n,r,i,o){e.save(),e.strokeStyle="rgba(0,0,0,0.1)",e.beginPath();for(var a=n;a<n+i+2*t;a+=t)e.moveTo(a,r-t),e.lineTo(a,r+o+2*t);for(var s=r;s<r+o+2*t;s+=t)e.moveTo(n-t,s),e.lineTo(n+i+2*t,s);e.stroke(),e.restore()}(U,f.gridSize,-Math.ceil(k.zoom.value/f.gridSize)*f.gridSize+k.scrollX%f.gridSize,-Math.ceil(k.zoom.value/f.gridSize)*f.gridSize+k.scrollY%f.gridSize,$/k.zoom.value,Z/k.zoom.value);var H=n.filter((function(e){return F(e,$,Z,{zoom:k.zoom,offsetLeft:f.offsetLeft,offsetTop:f.offsetTop,scrollX:k.scrollX,scrollY:k.scrollY})})),W=void 0;if(H.forEach((function(e){try{var t;(0,u.lw)(e,b,U,k,f),(null===(t=f.editingLinearElement)||void 0===t?void 0:t.elementId)===e.id&&e&&(W=e),N||B(e,U,f)}catch(e){console.error(e)}})),W&&I(U,f,k,W),f.selectionElement)try{(0,u.lw)(f.selectionElement,b,U,k,f)}catch(e){console.error(e)}(0,m.N1)(f)&&f.suggestedBindings.filter((function(e){return null!=e})).forEach((function(e){z(U,k,e)}));var q,G=(0,c.eD)(n,f);if(1===G.length&&(null===(t=f.editingLinearElement)||void 0===t?void 0:t.elementId)===G[0].id&&I(U,f,k,G[0]),f.selectedLinearElement&&f.selectedLinearElement.hoverPointIndex>=0&&function(e,t,n){var r,i,o=t.selectedLinearElement,a=o.elementId,s=o.hoverPointIndex;if(null===(r=t.editingLinearElement)||void 0===r||null===(i=r.selectedPointsIndices)||void 0===i||!i.includes(s)){var l=h._.getElement(a);if(l){var c=h._.getPointAtIndexGlobalCoordinates(l,s);e.save(),e.translate(n.scrollX,n.scrollY),O(c,e,n),e.restore()}}}(U,f,k),P&&!f.multiElement&&!f.editingLinearElement){var K,Y=(0,g.oY)(G,f),X=G.map((function(e){return e.id}));if(1===G.length&&(0,x.bt)(G[0])&&(null===(K=f.selectedLinearElement)||void 0===K?void 0:K.elementId)===G[0].id&&!G[0].locked&&I(U,f,k,G[0]),Y){var J,Q=n.reduce((function(e,t){var n=[];if(X.includes(t.id)&&!(0,p.zq)(f,t)&&n.push(V),k.remoteSelectedElementIds[t.id]&&n.push.apply(n,(0,o.Z)(k.remoteSelectedElementIds[t.id].map((function(e){return(0,d.X)(e,f).background})))),n.length){var r=(0,s.qf)(t,!0),a=(0,i.Z)(r,6),l=a[0],c=a[1],u=a[2],h=a[3],m=a[4],g=a[5];e.push({angle:t.angle,elementX1:l,elementY1:c,elementX2:u,elementY2:h,selectionColors:n,dashed:!!k.remoteSelectedElementIds[t.id],cx:m,cy:g})}return e}),[]),ee=function(e){var t=(0,p.Fb)(n,e),r=(0,s.KP)(t),o=(0,i.Z)(r,4),l=o[0],c=o[1],u=o[2],d=o[3];Q.push({angle:0,elementX1:l,elementX2:u,elementY1:c,elementY2:d,selectionColors:[a.black],dashed:!0,cx:l+(u-l)/2,cy:c+(d-c)/2})},te=w((0,p.iJ)(f));try{for(te.s();!(J=te.n()).done;)ee(J.value)}catch(e){te.e(e)}finally{te.f()}f.editingGroupId&&ee(f.editingGroupId),Q.forEach((function(e){return R(U,k,e)}))}if(U.save(),U.translate(k.scrollX,k.scrollY),1===G.length){U.fillStyle=a.white;var ne=(0,s.PC)(G[0],k.zoom,"mouse");!f.viewModeEnabled&&Y&&L(U,k,ne,G[0].angle)}else if(G.length>1&&!f.isRotating){var re=2*S/k.zoom.value;U.fillStyle=a.white;var ie=(0,s.KP)(G),oe=(0,i.Z)(ie,4),ae=oe[0],se=oe[1],le=oe[2],ce=oe[3],ue=U.getLineDash();U.setLineDash([2/k.zoom.value]);var de=U.lineWidth;U.lineWidth=1/k.zoom.value,U.strokeStyle=V,C(U,ae-re,se-re,le-ae+2*re,ce-se+2*re,(ae+le)/2,(se+ce)/2,0),U.lineWidth=de,U.setLineDash(ue);var he=(0,s.kK)([ae,se,le,ce,(ae+le)/2,(se+ce)/2],0,k.zoom,"mouse",s.ox);G.some((function(e){return!e.locked}))&&L(U,k,he,0)}U.restore()}for(var pe in U.restore(),k.remotePointerViewportCoords){var fe=k.remotePointerViewportCoords[pe],me=fe.x,ge=fe.y;me-=f.offsetLeft,ge-=f.offsetTop;var ve=me<0||me>$-9||ge<0||ge>Z-14;me=Math.max(me,0),me=Math.min(me,$-9),ge=Math.max(ge,0),ge=Math.min(ge,Z-14);var ye=(0,d.X)(pe,f),be=ye.background,xe=ye.stroke;U.save(),U.strokeStyle=xe,U.fillStyle=be;var we=k.remotePointerUserStates[pe];(ve||we===r.AWAY)&&(U.globalAlpha=.48),k.remotePointerButton&&"down"===k.remotePointerButton[pe]&&(U.beginPath(),U.arc(me,ge,15,0,2*Math.PI,!1),U.lineWidth=3,U.strokeStyle="#ffffff88",U.stroke(),U.closePath(),U.beginPath(),U.arc(me,ge,15,0,2*Math.PI,!1),U.lineWidth=1,U.strokeStyle=xe,U.stroke(),U.closePath()),U.beginPath(),U.moveTo(me,ge),U.lineTo(me+1,ge+14),U.lineTo(me+4,ge+9),U.lineTo(me+9,ge+10),U.lineTo(me,ge),U.fill(),U.stroke();var _e=k.remotePointerUsernames[pe],ke="";we===r.AWAY?ke=E?"":" (".concat(r.AWAY,")"):we===r.IDLE&&(ke=E?"":" (".concat(r.IDLE,")"));var Ee="".concat(_e||"").concat(ke?" ".concat(ke):"");if(!ve&&Ee){var Se=me+9,Ce=ge+14,Te=U.measureText(Ee),Me=Te.actualBoundingBoxDescent+Te.actualBoundingBoxAscent,Ie=Se-1,Oe=Ce-1,Ae=Te.width+8+2,Pe=Me+8+2;U.roundRect?(U.beginPath(),U.roundRect(Ie,Oe,Ae,Pe,4/k.zoom.value),U.fillStyle=be,U.fill(),U.fillStyle=xe,U.stroke()):(U.fillStyle=xe,U.fillRect(Ie,Oe,Ae,Pe),U.fillStyle=be,U.fillRect(Se,Ce,Ae-2,Pe-2)),U.fillStyle=a.white,U.fillText(Ee,Se+4,Ce+4+Te.actualBoundingBoxAscent)}U.restore(),U.closePath()}return M&&(q=(0,l.tJ)(n,$,Z,k),U.save(),U.fillStyle=l.w1,U.strokeStyle="rgba(255,255,255,0.8)",[q.horizontal,q.vertical].forEach((function(e){e&&function(e,t,n,r,i,o){e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+o),e.lineTo(t+r,n+i-o),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),e.fill(),e.stroke()}(U,e.x,e.y,e.width,e.height,l.nn/2)})),U.restore()),U.restore(),{atLeastOneVisibleElement:H.length>0,scrollBars:q}},P=(0,v.hR)((function(e){var t,n=A(e);null===(t=e.callback)||void 0===t||t.call(e,n)}),{trailing:!0}),D=function(e,t){var n;if(!t){var r=A(e);return null===(n=e.callback)||void 0===n||n.call(e,r),r}P(e)},L=function(e,t,n,r){Object.keys(n).forEach((function(o){var a=n[o];if(void 0!==a){var s=(0,i.Z)(a,4),l=s[0],c=s[1],u=s[2],d=s[3];e.save(),e.lineWidth=1/t.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),"rotation"===o?T(e,l+u/2,c+d/2,u/2):e.roundRect?(e.beginPath(),e.roundRect(l,c,u,d,2/t.zoom.value),e.fill(),e.stroke()):C(e,l,c,u,d,l+u/2,c+d/2,r,!0),e.restore()}}))},R=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*S,i=n.angle,o=n.elementX1,a=n.elementY1,s=n.elementX2,l=n.elementY2,c=n.selectionColors,u=n.cx,d=n.cy,h=n.dashed,p=s-o,f=l-a,m=r/t.zoom.value,g=8/t.zoom.value,v=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;for(var y=c.length,b=0;b<y;++b)e.strokeStyle=c[b],h&&e.setLineDash([g,v+(g+v)*(y-1)]),e.lineDashOffset=(g+v)*b,C(e,o-m,a-m,p+2*m,f+2*m,u,d,i);e.restore()},z=function(e,t,n){var r=Array.isArray(n)?N:j;e.save(),e.translate(t.scrollX,t.scrollY),r(e,n),e.restore()},j=function(e,t){var n=(0,s.qf)(t),r=(0,i.Z)(n,4),o=r[0],a=r[1],l=r[2]-o,c=r[3]-a,u=(0,f.fb)(t,l,c);e.strokeStyle="rgba(0,0,0,.05)",e.lineWidth=u-4;var d=2+u/2;switch(t.type){case"rectangle":case"text":case"image":C(e,o-d,a-d,l+2*d,c+2*d,o+l/2,a+c/2,t.angle);break;case"diamond":var h=Math.hypot(l,c);!function(e,t,n,r,i,o){e.save(),e.translate(r,i),e.rotate(o),e.beginPath(),e.moveTo(0,n/2),e.lineTo(t/2,0),e.lineTo(0,-n/2),e.lineTo(-t/2,0),e.closePath(),e.stroke(),e.restore()}(e,l+d*h/c*2,c+d*h/l*2,o+l/2,a+c/2,t.angle);break;case"ellipse":!function(e,t,n,r,i,o){e.beginPath(),e.ellipse(r,i,t/2,n/2,o,0,2*Math.PI),e.stroke()}(e,l+2*d,c+2*d,o+l/2,a+c/2,t.angle)}},N=function(e,t){var n=(0,i.Z)(t,3),r=n[0],o=n[1],a=n[2],s=(0,f.fb)(a,a.width,a.height);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",("both"===o?[0,-1]:"start"===o?[0]:[-1]).forEach((function(t){var n=h._.getPointAtIndexGlobalCoordinates(r,t),o=(0,i.Z)(n,2),a=o[0],l=o[1];T(e,a,l,s)}))},B=function(e,t,n){if(e.link&&!n.selectedElementIds[e.id]){var r=(0,s.qf)(e),o=(0,i.Z)(r,4),a=o[0],l=o[1],c=o[2],u=o[3],d=(0,b.sw)([a,l,c,u],e.angle,n),h=(0,i.Z)(d,4),p=h[0],f=h[1],m=h[2],g=h[3],v=p+m/2,y=f+g/2;if(t.save(),t.translate(n.scrollX+v,n.scrollY+y),t.rotate(e.angle),k&&k.zoom===n.zoom.value)t.drawImage(k,p-v,f-y,m,g);else{(k=document.createElement("canvas")).zoom=n.zoom.value,k.width=m*window.devicePixelRatio*n.zoom.value,k.height=g*window.devicePixelRatio*n.zoom.value;var x=k.getContext("2d");x.scale(window.devicePixelRatio*n.zoom.value,window.devicePixelRatio*n.zoom.value),x.fillStyle="#fff",x.fillRect(0,0,m,g),x.drawImage(b.rj,0,0,m,g),x.restore(),t.drawImage(k,p-v,f-y,m,g)}t.restore()}},F=function(e,t,n,r){var o=(0,s.Pi)(e),a=(0,i.Z)(o,4),l=a[0],c=a[1],u=a[2],d=a[3],h=(0,v.dE)({clientX:r.offsetLeft,clientY:r.offsetTop},r),p=(0,v.dE)({clientX:r.offsetLeft+t,clientY:r.offsetTop+n},r);return h.x<=u&&h.y<=d&&p.x>=l&&p.y>=c},V=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=i.offsetX,a=void 0===o?0:o,s=i.offsetY,l=void 0===s?0:s,c=i.exportWithDarkMode,d=void 0!==c&&c;n&&e.forEach((function(e,i){if(!e.isDeleted)try{(0,u.Rg)(e,t,n,r,e.x+a,e.y+l,d)}catch(e){console.error(e)}}))}},1564:function(e,t,n){var r=n(1930),i=n(8821),o=n(5169),a=n(1047),s=function(e){return"string"==typeof e},l=function(){function e(){(0,i.Z)(this,e),this.callbacks=new Set,this.nonDeletedElements=[],this.elements=[],this.elementsMap=new Map}return(0,o.Z)(e,[{key:"getElementsIncludingDeleted",value:function(){return this.elements}},{key:"getNonDeletedElements",value:function(){return this.nonDeletedElements}},{key:"getElement",value:function(e){return this.elementsMap.get(e)||null}},{key:"getNonDeletedElement",value:function(e){var t=this.getElement(e);return t&&(0,a.qP)(t)?t:null}},{key:"mapElements",value:function(e){var t=!1,n=this.elements.map((function(n){var r=e(n);return r!==n&&(t=!0),r}));return t&&this.replaceAllElements(n),t}},{key:"replaceAllElements",value:function(t){var n=this;this.elements=t,this.elementsMap.clear(),t.forEach((function(t){n.elementsMap.set(t.id,t),e.mapElementToScene(t,n)})),this.nonDeletedElements=(0,a.Lm)(this.elements),this.informMutation()}},{key:"informMutation",value:function(){for(var e=0,t=Array.from(this.callbacks);e<t.length;e++)(0,t[e])()}},{key:"addCallback",value:function(e){var t=this;if(this.callbacks.has(e))throw new Error;return this.callbacks.add(e),function(){if(!t.callbacks.has(e))throw new Error;t.callbacks.delete(e)}}},{key:"destroy",value:function(){var t=this;e.sceneMapById.forEach((function(n,r){n===t&&e.sceneMapById.delete(r)})),this.callbacks.clear()}},{key:"insertElementAtIndex",value:function(e,t){if(!Number.isFinite(t)||t<0)throw new Error("insertElementAtIndex can only be called with index >= 0");var n=[].concat((0,r.Z)(this.elements.slice(0,t)),[e],(0,r.Z)(this.elements.slice(t)));this.replaceAllElements(n)}},{key:"getElementIndex",value:function(e){return this.elements.findIndex((function(t){return t.id===e}))}}],[{key:"mapElementToScene",value:function(e,t){s(e)?this.sceneMapById.set(e,t):(this.sceneMapByElement.set(e,t),this.sceneMapById.set(e.id,t))}},{key:"getScene",value:function(e){return s(e)?this.sceneMapById.get(e)||null:this.sceneMapByElement.get(e)||null}}]),e}();l.sceneMapByElement=new WeakMap,l.sceneMapById=new Map,t.Z=l},8120:function(e,t,n){n.d(t,{$b:function(){return r},CJ:function(){return d},M9:function(){return a},PD:function(){return i},QG:function(){return u},Un:function(){return c},Zd:function(){return o},bZ:function(){return l},sh:function(){return s}});var r=function(e){return"rectangle"===e||"ellipse"===e||"diamond"===e||"line"===e||"freedraw"===e},i=function(e){return"image"!==e},o=function(e){return"rectangle"===e||"ellipse"===e||"diamond"===e||"freedraw"===e||"arrow"===e||"line"===e},a=function(e){return"rectangle"===e||"ellipse"===e||"diamond"===e||"arrow"===e||"line"===e},s=function(e){return"rectangle"===e||"arrow"===e||"line"===e||"diamond"===e},l=function(e){return"text"===e},c=function(e){return"arrow"===e},u=function(e,t){for(var n=null,r=e.length-1;r>=0;--r){var i=e[r];if(!i.isDeleted&&t(i)){n=i;break}}return n},d=function(e,t){return e.filter((function(e){return!e.isDeleted&&t(e)}))}},4162:function(e,t,n){n.d(t,{$D:function(){return v},Cg:function(){return b},NL:function(){return g},oj:function(){return m}});var r=n(2577),i=n(8950),o=n(2975),a=n.n(o),s=n(8234),l=n(8925),c=n(3547),u=n(6340),d=n(2335),h=n(8897),p=n(5523),f=n(5637),m="\x3c!-- svg-source:excalidraw --\x3e",g=function(){var e=(0,i.Z)(a().mark((function e(t,n,i,o){var l,u,p,m,g,v,b,x,w,_,k,E,S,C,T,M,I,O,A=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=o.exportBackground,u=o.exportPadding,p=void 0===u?d.qy:u,m=o.viewBackgroundColor,g=A.length>4&&void 0!==A[4]?A[4]:function(e,t){var r=document.createElement("canvas");return r.width=e*n.exportScale,r.height=t*n.exportScale,{canvas:r,scale:n.exportScale}},v=y(t,p),b=(0,r.Z)(v,4),x=b[0],w=b[1],_=b[2],k=b[3],E=g(_,k),S=E.canvas,C=E.scale,T=void 0===C?1:C,M=(0,h.im)(),e.next=7,(0,f.Xx)({imageCache:new Map,fileIds:(0,f.oA)(t).map((function(e){return e.fileId})),files:i});case 7:return I=e.sent,O=I.imageCache,(0,c.Eu)({elements:t,appState:n,scale:T,rc:s.Z.canvas(S),canvas:S,renderConfig:{viewBackgroundColor:l?m:null,scrollX:-x+p,scrollY:-w+p,zoom:M.zoom,remotePointerViewportCoords:{},remoteSelectedElementIds:{},shouldCacheIgnoreZoom:!1,remotePointerUsernames:{},remotePointerUserStates:{},theme:n.exportWithDarkMode?"dark":"light",imageCache:O,renderScrollbars:!1,renderSelection:!1,renderGrid:!1,isExporting:!0}}),e.abrupt("return",S);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)(a().mark((function e(t,i,o,l){var u,h,f,g,v,b,x,w,_,k,E,S,C,T,M,I,O,A,P;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i.exportPadding,h=void 0===u?d.qy:u,f=i.viewBackgroundColor,g=i.exportScale,v=void 0===g?1:g,b=i.exportEmbedScene,x="",!b){e.next=14;break}return e.prev=3,e.next=6,Promise.resolve().then(n.bind(n,673));case 6:return e.next=8,e.sent.encodeSvgMetadata({text:null!=l&&l.serializeAsJSON?null==l||null===(w=l.serializeAsJSON)||void 0===w?void 0:w.call(l):(0,p.I_)(t,i,o||{},"local")});case 8:x=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0);case 14:return _=y(t,h),k=(0,r.Z)(_,4),E=k[0],S=k[1],C=k[2],T=k[3],(M=document.createElementNS(d.hR,"svg")).setAttribute("version","1.1"),M.setAttribute("xmlns",d.hR),M.setAttribute("viewBox","0 0 ".concat(C," ").concat(T)),M.setAttribute("width","".concat(C*v)),M.setAttribute("height","".concat(T*v)),i.exportWithDarkMode&&M.setAttribute("filter",d.ZF),I="https://excalidraw.com/",I=window.EXCALIDRAW_ASSET_PATH||"https://unpkg.com/".concat("@excalidraw/excalidraw","@").concat("0.15.2"),null!==(O=I)&&void 0!==O&&O.startsWith("/")&&(I=I.replace("/","".concat(window.location.origin,"/"))),I="".concat(I,"/dist/excalidraw-assets/"),M.innerHTML="\n  ".concat(m,"\n  ").concat(x,'\n  <defs>\n    <style class="style-fonts">\n      @font-face {\n        font-family: "Virgil";\n        src: url("').concat(I,'Virgil.woff2");\n      }\n      @font-face {\n        font-family: "Cascadia";\n        src: url("').concat(I,'Cascadia.woff2");\n      }\n    </style>\n  </defs>\n  '),i.exportBackground&&f&&((A=M.ownerDocument.createElementNS(d.hR,"rect")).setAttribute("x","0"),A.setAttribute("y","0"),A.setAttribute("width","".concat(C)),A.setAttribute("height","".concat(T)),A.setAttribute("fill",f),M.appendChild(A)),P=s.Z.svg(M),(0,c.M_)(t,P,M,o||{},{offsetX:-E+h,offsetY:-S+h,exportWithDarkMode:i.exportWithDarkMode}),e.abrupt("return",M);case 29:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),y=function(e,t){var n=(0,l.KP)(e),i=(0,r.Z)(n,4),o=i[0],a=i[1],s=i[2],c=i[3];return[o,a,(0,u.TE)(o,s)+2*t,(0,u.TE)(a,c)+t+t]},b=function(e,t,n){var i=y(e,t).map((function(e){return Math.trunc(e*n)})),o=(0,r.Z)(i,4);return[o[2],o[3]]}},75:function(e,t,n){n.d(t,{$b:function(){return a.$b},CJ:function(){return a.CJ},M9:function(){return a.M9},N:function(){return i.N},PR:function(){return i.PR},QG:function(){return a.QG},Un:function(){return a.Un},W:function(){return o.W},Yp:function(){return i.Yp},Zd:function(){return a.Zd},Zs:function(){return i.Zs},_4:function(){return r._4},bZ:function(){return a.bZ},eD:function(){return i.eD},j:function(){return s.j},sh:function(){return a.sh}});var r=n(756),i=n(1868),o=n(2264),a=n(8120),s=n(746)},2264:function(e,t,n){n.d(t,{W:function(){return s},s:function(){return a}});var r=n(2577),i=n(1047),o=n(6340),a=function(e){var t=e.scenePoint,n=e.viewportDimensions,r=e.zoom;return{scrollX:n.width/2/r.value-t.x,scrollY:n.height/2/r.value-t.y}},s=function(e,t,n){if(!(e=(0,i.n_)(e)).length)return{scrollX:0,scrollY:0};var s=(0,i.KP)(e),l=(0,r.Z)(s,4),c=l[0],u=l[1],d=l[2],h=l[3];if(function(e,t,n){var i=(0,r.Z)(n,4),a=i[0],s=i[1],l=i[2],c=i[3],u=(0,o._i)({sceneX:a,sceneY:s},e),d=u.x,h=u.y,p=(0,o._i)({sceneX:l,sceneY:c},e),f=p.x,m=p.y;return f-d>e.width||m-h>e.height}(t,0,[c,u,d,h])){var p=(0,i.os)(e,(0,o.dE)({clientX:t.scrollX,clientY:t.scrollY},t)),f=(0,r.Z)(p,4);c=f[0],u=f[1],d=f[2],h=f[3]}return a({scenePoint:{x:(c+d)/2,y:(u+h)/2},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})}},756:function(e,t,n){n.d(t,{WM:function(){return s},_4:function(){return d},nn:function(){return l},tJ:function(){return u},w1:function(){return c}});var r=n(2577),i=n(1047),o=n(6340),a=n(8211),s=4,l=6,c="rgba(0,0,0,0.3)",u=function(e,t,n,c){var u=c.scrollX,d=c.scrollY,h=c.zoom;if(0===e.length)return{horizontal:null,vertical:null};var p=(0,i.KP)(e),f=(0,r.Z)(p,4),m=f[0],g=f[1],v=f[2],y=f[3],b=t/h.value,x=n/h.value,w=t-b,_=n-x,k={top:parseInt((0,o.IH)("sat")),bottom:parseInt((0,o.IH)("sab")),left:parseInt((0,o.IH)("sal")),right:parseInt((0,o.IH)("sar"))},E=(0,a.G3)().rtl,S=w/2-u+k.left,C=_/2-d+k.top,T=S+b-k.right,M=C+x-k.bottom,I=Math.min(m,S),O=Math.min(g,C),A=Math.max(v,T),P=Math.max(y,M);return{horizontal:S===I&&T===A?null:{x:Math.max(k.left,s)+(S-I)/(A-I)*t,y:n-l-Math.max(s,k.bottom),width:(T-S)/(A-I)*t-Math.max(2*s,k.left+k.right),height:l},vertical:C===O&&M===P?null:{x:E?Math.max(k.left,s):t-l-Math.max(k.right,s),y:(C-O)/(P-O)*n+Math.max(k.top,s),width:l,height:(M-C)/(P-O)*n-Math.max(2*s,k.top+k.bottom)}}},d=function(e,t,n){var i=[e.horizontal,e.vertical].map((function(e){return null!=e&&e.x<=t&&t<=e.x+e.width&&e.y<=n&&n<=e.y+e.height})),o=(0,r.Z)(i,2),a=o[0],s=o[1];return{isOverEither:a||s,isOverHorizontal:a,isOverVertical:s}}},1868:function(e,t,n){n.d(t,{N:function(){return s},PR:function(){return l},Yp:function(){return a},Zs:function(){return u},eD:function(){return c}});var r=n(2577),i=n(1047),o=n(1974),a=function(e,t){var n=(0,i.qf)(t),a=(0,r.Z)(n,4),s=a[0],l=a[1],c=a[2],u=a[3];return e.filter((function(e){var t=(0,i.Pi)(e),n=(0,r.Z)(t,4),a=n[0],d=n[1],h=n[2],p=n[3];return!1===e.locked&&"selection"!==e.type&&!(0,o.Xh)(e)&&s<=a&&l<=d&&c>=h&&u>=p}))},s=function(e,t){return e.some((function(e){return t.selectedElementIds[e.id]}))},l=function(e,t,n){var r=Array.from(new Set(c(e,t).map((function(e){return n(e)}))));return 1===r.length?r[0]:null},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.filter((function(e){return t.selectedElementIds[e.id]||n&&(0,o.Xh)(e)&&t.selectedElementIds[null==e?void 0:e.containerId]?e:null}))},u=function(e,t){return t.editingElement?[t.editingElement]:c(e,t,!0)}},746:function(e,t,n){n.d(t,{E:function(){return o},j:function(){return i}});var r=n(2335),i=function(e){return Math.max(r.Zj,Math.min(e,30))},o=function(e,t){var n=e.viewportX,r=e.viewportY,i=e.nextZoom,o=n-t.offsetLeft,a=r-t.offsetTop,s=t.zoom.value;return{scrollX:t.scrollX+(o-o/s)+-(o-o/i),scrollY:t.scrollY+(a-a/s)+-(a-a/i),zoom:{value:i}}}},6340:function(e,t,n){n.d(t,{$9:function(){return Y},$g:function(){return b},$h:function(){return se},AK:function(){return $},B4:function(){return C},C3:function(){return te},Ds:function(){return w},FG:function(){return Z},Fc:function(){return f},G3:function(){return ee},I4:function(){return re},IH:function(){return F},Ip:function(){return J},KJ:function(){return A},Mj:function(){return de},OF:function(){return P},Om:function(){return I},Oo:function(){return m},PI:function(){return G},Pr:function(){return z},Q5:function(){return X},Qm:function(){return q},TE:function(){return M},Uk:function(){return D},_Z:function(){return v},_i:function(){return B},ag:function(){return oe},cx:function(){return H},dE:function(){return N},dZ:function(){return U},h2:function(){return ie},hR:function(){return _},mO:function(){return x},qr:function(){return W},qz:function(){return Q},rB:function(){return L},s:function(){return y},tH:function(){return K},uY:function(){return j},v4:function(){return ae},w8:function(){return ue},wO:function(){return g},wo:function(){return R},xn:function(){return ne},xp:function(){return ce},y8:function(){return le},yo:function(){return T},z8:function(){return O}});var r=n(6655),i=n(7169),o=n(1930),a=n(2577),s=n(5284),l=n(56),c=n(2335),u=n(5156),d=n(8897);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){var e=new Date,t=e.getFullYear(),n="".concat(e.getMonth()+1).padStart(2,"0"),r="".concat(e.getDate()).padStart(2,"0"),i="".concat(e.getHours()).padStart(2,"0"),o="".concat(e.getMinutes()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r,"-").concat(i).concat(o)},m=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},g=function(e){return e instanceof HTMLElement&&e.className.includes("ToolIcon")},v=function(e){return e instanceof HTMLElement&&"wysiwyg"===e.dataset.type||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement},y=function(e){return e instanceof HTMLElement&&"wysiwyg"===e.dataset.type||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&("text"===e.type||"number"===e.type)},b=function(e){for(var t=e.fontFamily,n=0,r=Object.entries(c.ut);n<r.length;n++){var i=(0,a.Z)(r[n],2),o=i[0];if(i[1]===t)return"".concat(o,", ").concat(c._D)}return c._D},x=function(e){var t=e.fontSize,n=e.fontFamily;return"".concat(t,"px ").concat(b({fontFamily:n}))},w=function(e,t){var n=0,r=null,i=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];r=o,clearTimeout(n),n=window.setTimeout((function(){r=null,e.apply(void 0,o)}),t)};return i.flush=function(){if(clearTimeout(n),r){var t=r;r=null,e.apply(void 0,(0,o.Z)(t))}},i.cancel=function(){r=null,clearTimeout(n)},i},_=function(e,t){var n=null,r=null,i=null,a=function t(a){n=window.requestAnimationFrame((function(){n=null,e.apply(void 0,(0,o.Z)(a)),r=null,i&&(r=i,i=null,t(r))}))},s=function(){for(var e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];r=o,null===n?a(r):null!=t&&t.trailing&&(i=o)};return s.flush=function(){null!==n&&(cancelAnimationFrame(n),n=null),r&&(e.apply(void 0,(0,o.Z)(i||r)),r=i=null)},s.cancel=function(){r=i=null,null!==n&&(cancelAnimationFrame(n),n=null)},s};function k(e){return 1-Math.pow(1-e,4)}var E,S,C=function(e,t,n,r){var i,a=!1,s=0,l=(null==r?void 0:r.duration)||250,c=(null==r?void 0:r.easeFn)||k;return s=window.requestAnimationFrame((function r(u){if(!a){void 0===i&&(i=u);var d=u-i;if(d<l){var h=c(d/l),p=e.map((function(e,n){return(t[n]-e)*h+e}));n.apply(void 0,(0,o.Z)(p)),s=window.requestAnimationFrame(r)}else n.apply(void 0,(0,o.Z)(t))}})),function(){a=!0,window.cancelAnimationFrame(s)}},T=function(e,t){if(!e.length||t<1)return[];for(var n=0,r=0,i=Array(Math.ceil(e.length/t));n<e.length;)i[r++]=e.slice(n,n+=t);return i},M=function(e,t){return Math.abs(e-t)},I=function(e,t){return"custom"===t.type?p(p({},e.activeTool),{},{type:"custom",customType:t.customType}):p(p({},e.activeTool),{},{lastActiveTool:void 0===t.lastActiveToolBeforeEraser?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null})},O=function(e){e&&(e.style.cursor="")},A=function(e,t){e&&(e.style.cursor=t)},P=function(e,t){E&&E.theme===t||function(){var e=t===c.C6.DARK;(E=document.createElement("canvas")).theme=t,E.height=20,E.width=20;var n=E.getContext("2d");n.lineWidth=1,n.beginPath(),n.arc(E.width/2,E.height/2,5,0,2*Math.PI),n.fillStyle=e?s.black:s.white,n.fill(),n.strokeStyle=e?s.white:s.black,n.stroke(),S=E.toDataURL(c.LO.svg)}(),A(e,"url(".concat(S,") ").concat(10," ").concat(10,", auto"))},D=function(e,t){e&&("selection"===t.activeTool.type?O(e):(0,d.l$)(t)?e.style.cursor=c.oc.GRAB:(0,d.EN)(t)?P(e,t.theme):["image","custom"].includes(t.activeTool.type)||(e.style.cursor=c.oc.CROSSHAIR))},L=function(){var e;return"HTML"===(null===(e=document.fullscreenElement)||void 0===e?void 0:e.nodeName)},R=function(){return document.documentElement.requestFullscreen()},z=function(){return document.exitFullscreen()},j=function(e){return e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),c.Um?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")},N=function(e,t){var n=e.clientX,r=e.clientY,i=t.zoom,o=t.offsetLeft,a=t.offsetTop,s=t.scrollX,l=t.scrollY;return{x:(n-o)/i.value-s,y:(r-a)/i.value-l}},B=function(e,t){var n=e.sceneX,r=e.sceneY,i=t.zoom,o=t.offsetLeft,a=t.offsetTop,s=t.scrollX,l=t.scrollY;return{x:(n+s)*i.value+o,y:(r+l)*i.value+a}},F=function(e){return getComputedStyle(document.documentElement).getPropertyValue("--".concat(e))},V=new RegExp("^[^".concat("A-Za-z--------","]*[").concat("---","]")),U=function(e){return V.test(e)},$=function(e){var t=(0,a.Z)(e,2);return{x:t[0],y:t[1]}},Z=function(e){if("AbortError"!==(null==e?void 0:e.name))throw e;console.warn(e)},H=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n<0&&(n=e.length+n);for(var r=(n=Math.min(e.length,Math.max(n,0)))-1;++r<e.length;)if(t(e[r],r,e))return r;return-1},W=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length-1;n<0&&(n=e.length+n);for(var r=(n=Math.min(e.length-1,Math.max(n,0)))+1;--r>-1;)if(t(e[r],r,e))return r;return-1},q=function(e){var t=5===e.length&&"0"===e.substr(4,1),n=9===e.length&&"00"===e.substr(7,2);return t||n||e===l.Z.elementBackground[0]},G=function(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n},K=function(e){return function(t){(0,u.unstable_batchedUpdates)(e,t)}},Y=function(e){return _((function(t){(0,u.unstable_batchedUpdates)(e,t)}))},X=function(){var e=document.createElement("canvas").getContext("2d");return!!e&&(e.fillStyle="#f00",e.textBaseline="top",e.font="32px Arial",e.fillText("",0,0),0!==e.getImageData(12,12,1,1).data[0])},J=function(e){for(var t=e.parentElement;t;){if(t===document.body)return document;var n=window.getComputedStyle(t).overflowY;if(t.scrollHeight>t.clientHeight&&("auto"===n||"scroll"===n||"overlay"===n))return t;t=t.parentElement}return document},Q=function(e){for(var t=e.parentElement;t;){if(t.tabIndex>-1)return void t.focus();t=t.parentElement}},ee=function(e){return Array.from(e).map((function(e){return"0".concat(e.toString(16)).slice(-2)})).join("")},te=function(){return ie()?1:Date.now()},ne=function(e){return e.reduce((function(e,t){return e.set("string"==typeof t?t:t.id,t),e}),new Map)},re=function(e){return e.reduce((function(e,t,n){return e.set(t.id,[t,n]),e}),new Map)},ie=function(){return!1},oe=function(e,t){return new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0})},ae=function(e,t){var n=!1;for(var i in t){var o=t[i];if(void 0!==o){if(e[i]===o&&("object"!==(0,r.Z)(o)||null===o))continue;n=!0}}return n?p(p({},e),t):e},se=function(){try{return window.self===window.top?"top":"iframe"}catch(e){return"iframe"}},le=function(e){return!!e&&"object"===(0,r.Z)(e)&&"then"in e&&"catch"in e&&"finally"in e},ce=function(e){var t=null==e?void 0:e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter((function(e){return e.tabIndex>-1&&!e.disabled})):[]},ue=function(e,t){var n=Object.keys(e),r=Object.keys(e);return n.length===r.length&&n.every((function(n){return e[n]===t[n]}))},de=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkForDefaultPrevented,r=void 0===n||n;return function(n){if(null==e||e(n),!r||!n.defaultPrevented)return null==t?void 0:t(n)}}},9669:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg=="},7984:function(e){e.exports='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="292.4" height="292.4" viewBox="0 0 292 292"><path d="M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z"/></svg>'},1639:function(e){e.exports='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="292.4" height="292.4" viewBox="0 0 292 292"><path fill="%23ced4da" d="M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z"/></svg>'},9729:function(e,t,n){e.exports=n.p+"excalidraw-assets/Assistant-Bold.woff2"},1273:function(e,t,n){e.exports=n.p+"excalidraw-assets/Assistant-Medium.woff2"},8303:function(e,t,n){e.exports=n.p+"excalidraw-assets/Assistant-Regular.woff2"},9577:function(e,t,n){e.exports=n.p+"excalidraw-assets/Assistant-SemiBold.woff2"},3147:function(e,t,n){e.exports=n.p+"excalidraw-assets/Cascadia.woff2"},3940:function(e,t,n){e.exports=n.p+"excalidraw-assets/Virgil.woff2"},9787:function(t){t.exports=e},5156:function(e){e.exports=t},9649:function(e,t,n){var r=n(8114).default;function i(){e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),s=new M(r||[]);return a(o,"_invoke",{value:E(e,n,s)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var f={};function m(){}function g(){}function v(){}var y={};d(y,l,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(I([])));x&&x!==n&&o.call(x,l)&&(y=x);var w=v.prototype=m.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,a,s,l){var c=p(e[i],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,l)}))}l(c.arg)}var i;a(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function E(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return O()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=p(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=p(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:O}}function O(){return{value:void 0,done:!0}}return g.prototype=v,a(w,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:g,configurable:!0}),g.displayName=d(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,d(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},_(k.prototype),d(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(h(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(w),d(w,u,"Generator"),d(w,l,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},8114:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2975:function(e,t,n){var r=n(9649)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},7017:function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3173:function(e,t,n){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},8950:function(e,t,n){function r(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,l,"next",e)}function l(e){r(a,i,o,s,l,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return i}})},8821:function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},5169:function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return i}})},7169:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},2312:function(e,t,n){function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},2248:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(5901);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},2726:function(e,t,n){function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{Z:function(){return r}})},7245:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(6655),i=n(3173);function o(e,t){if(t&&("object"===(0,r.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},5901:function(e,t,n){function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},2577:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(9139);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1930:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(7017),i=n(9139);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},6655:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},9139:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(7017);function i(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},5605:function(e,t,n){n.d(t,{x0:function(){return r}});let r=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),"")},5284:function(e){e.exports=JSON.parse('{"white":"#ffffff","black":"#000000","gray":["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],"red":["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],"pink":["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],"grape":["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],"violet":["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],"indigo":["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],"blue":["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],"cyan":["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],"teal":["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],"green":["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],"lime":["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],"yellow":["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],"orange":["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]}')},1463:function(e){e.exports=JSON.parse('{"labels":{"paste":"Paste","pasteAsPlaintext":"Paste as plaintext","pasteCharts":"Paste charts","selectAll":"Select all","multiSelect":"Add element to selection","moveCanvas":"Move canvas","cut":"Cut","copy":"Copy","copyAsPng":"Copy to clipboard as PNG","copyAsSvg":"Copy to clipboard as SVG","copyText":"Copy to clipboard as text","bringForward":"Bring forward","sendToBack":"Send to back","bringToFront":"Bring to front","sendBackward":"Send backward","delete":"Delete","copyStyles":"Copy styles","pasteStyles":"Paste styles","stroke":"Stroke","background":"Background","fill":"Fill","strokeWidth":"Stroke width","strokeStyle":"Stroke style","strokeStyle_solid":"Solid","strokeStyle_dashed":"Dashed","strokeStyle_dotted":"Dotted","sloppiness":"Sloppiness","opacity":"Opacity","textAlign":"Text align","edges":"Edges","sharp":"Sharp","round":"Round","arrowheads":"Arrowheads","arrowhead_none":"None","arrowhead_arrow":"Arrow","arrowhead_bar":"Bar","arrowhead_dot":"Dot","arrowhead_triangle":"Triangle","fontSize":"Font size","fontFamily":"Font family","onlySelected":"Only selected","withBackground":"Background","exportEmbedScene":"Embed scene","exportEmbedScene_details":"Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.\\nWill increase exported file size.","addWatermark":"Add \\"Made with Excalidraw\\"","handDrawn":"Hand-drawn","normal":"Normal","code":"Code","small":"Small","medium":"Medium","large":"Large","veryLarge":"Very large","solid":"Solid","hachure":"Hachure","zigzag":"Zigzag","crossHatch":"Cross-hatch","thin":"Thin","bold":"Bold","left":"Left","center":"Center","right":"Right","extraBold":"Extra bold","architect":"Architect","artist":"Artist","cartoonist":"Cartoonist","fileTitle":"File name","colorPicker":"Color picker","canvasColors":"Used on canvas","canvasBackground":"Canvas background","drawingCanvas":"Drawing canvas","layers":"Layers","actions":"Actions","language":"Language","liveCollaboration":"Live collaboration...","duplicateSelection":"Duplicate","untitled":"Untitled","name":"Name","yourName":"Your name","madeWithExcalidraw":"Made with Excalidraw","group":"Group selection","ungroup":"Ungroup selection","collaborators":"Collaborators","showGrid":"Show grid","addToLibrary":"Add to library","removeFromLibrary":"Remove from library","libraryLoadingMessage":"Loading library","libraries":"Browse libraries","loadingScene":"Loading scene","align":"Align","alignTop":"Align top","alignBottom":"Align bottom","alignLeft":"Align left","alignRight":"Align right","centerVertically":"Center vertically","centerHorizontally":"Center horizontally","distributeHorizontally":"Distribute horizontally","distributeVertically":"Distribute vertically","flipHorizontal":"Flip horizontal","flipVertical":"Flip vertical","viewMode":"View mode","toggleExportColorScheme":"Toggle export color scheme","share":"Share","showStroke":"Show stroke color picker","showBackground":"Show background color picker","toggleTheme":"Toggle theme","personalLib":"Personal Library","excalidrawLib":"Excalidraw Library","decreaseFontSize":"Decrease font size","increaseFontSize":"Increase font size","unbindText":"Unbind text","bindText":"Bind text to the container","createContainerFromText":"Wrap text in a container","link":{"edit":"Edit link","create":"Create link","label":"Link"},"lineEditor":{"edit":"Edit line","exit":"Exit line editor"},"elementLock":{"lock":"Lock","unlock":"Unlock","lockAll":"Lock all","unlockAll":"Unlock all"},"statusPublished":"Published","sidebarLock":"Keep sidebar open"},"library":{"noItems":"No items added yet...","hint_emptyLibrary":"Select an item on canvas to add it here, or install a library from the public repository, below.","hint_emptyPrivateLibrary":"Select an item on canvas to add it here."},"buttons":{"clearReset":"Reset the canvas","exportJSON":"Export to file","exportImage":"Export image...","export":"Save to...","exportToPng":"Export to PNG","exportToSvg":"Export to SVG","copyToClipboard":"Copy to clipboard","copyPngToClipboard":"Copy PNG to clipboard","scale":"Scale","save":"Save to current file","saveAs":"Save as","load":"Open","getShareableLink":"Get shareable link","close":"Close","selectLanguage":"Select language","scrollBackToContent":"Scroll back to content","zoomIn":"Zoom in","zoomOut":"Zoom out","resetZoom":"Reset zoom","menu":"Menu","done":"Done","edit":"Edit","undo":"Undo","redo":"Redo","resetLibrary":"Reset library","createNewRoom":"Create new room","fullScreen":"Full screen","darkMode":"Dark mode","lightMode":"Light mode","zenMode":"Zen mode","exitZenMode":"Exit zen mode","cancel":"Cancel","clear":"Clear","remove":"Remove","publishLibrary":"Publish","submit":"Submit","confirm":"Confirm"},"alerts":{"clearReset":"This will clear the whole canvas. Are you sure?","couldNotCreateShareableLink":"Couldn\'t create shareable link.","couldNotCreateShareableLinkTooBig":"Couldn\'t create shareable link: the scene is too big","couldNotLoadInvalidFile":"Couldn\'t load invalid file","importBackendFailed":"Importing from backend failed.","cannotExportEmptyCanvas":"Cannot export empty canvas.","couldNotCopyToClipboard":"Couldn\'t copy to clipboard.","decryptFailed":"Couldn\'t decrypt data.","uploadedSecurly":"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can\'t read the content.","loadSceneOverridePrompt":"Loading external drawing will replace your existing content. Do you wish to continue?","collabStopOverridePrompt":"Stopping the session will overwrite your previous, locally stored drawing. Are you sure?\\n\\n(If you want to keep your local drawing, simply close the browser tab instead.)","errorAddingToLibrary":"Couldn\'t add item to the library","errorRemovingFromLibrary":"Couldn\'t remove item from the library","confirmAddLibrary":"This will add {{numShapes}} shape(s) to your library. Are you sure?","imageDoesNotContainScene":"This image does not seem to contain any scene data. Have you enabled scene embedding during export?","cannotRestoreFromImage":"Scene couldn\'t be restored from this image file","invalidSceneUrl":"Couldn\'t import scene from the supplied URL. It\'s either malformed, or doesn\'t contain valid Excalidraw JSON data.","resetLibrary":"This will clear your library. Are you sure?","removeItemsFromsLibrary":"Delete {{count}} item(s) from library?","invalidEncryptionKey":"Encryption key must be of 22 characters. Live collaboration is disabled.","collabOfflineWarning":"No internet connection available.\\nYour changes will not be saved!"},"errors":{"unsupportedFileType":"Unsupported file type.","imageInsertError":"Couldn\'t insert image. Try again later...","fileTooBig":"File is too big. Maximum allowed size is {{maxSize}}.","svgImageInsertError":"Couldn\'t insert SVG image. The SVG markup looks invalid.","invalidSVGString":"Invalid SVG.","cannotResolveCollabServer":"Couldn\'t connect to the collab server. Please reload the page and try again.","importLibraryError":"Couldn\'t load library","collabSaveFailed":"Couldn\'t save to the backend database. If problems persist, you should save your file locally to ensure you don\'t lose your work.","collabSaveFailed_sizeExceeded":"Couldn\'t save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don\'t lose your work.","brave_measure_text_error":{"start":"Looks like you are using Brave browser with the","aggressive_block_fingerprint":"Aggressively Block Fingerprinting","setting_enabled":"setting enabled","break":"This could result in breaking the","text_elements":"Text Elements","in_your_drawings":"in your drawings","strongly_recommend":"We strongly recommend disabling this setting. You can follow","steps":"these steps","how":"on how to do so","disable_setting":" If disabling this setting doesn\'t fix the display of text elements, please open an","issue":"issue","write":"on our GitHub, or write us on","discord":"Discord"}},"toolBar":{"selection":"Selection","image":"Insert image","rectangle":"Rectangle","diamond":"Diamond","ellipse":"Ellipse","arrow":"Arrow","line":"Line","freedraw":"Draw","text":"Text","library":"Library","lock":"Keep selected tool active after drawing","penMode":"Pen mode - prevent touch","link":"Add/ Update link for a selected shape","eraser":"Eraser","hand":"Hand (panning tool)"},"headings":{"canvasActions":"Canvas actions","selectedShapeActions":"Selected shape actions","shapes":"Shapes"},"hints":{"canvasPanning":"To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool","linearElement":"Click to start multiple points, drag for single line","freeDraw":"Click and drag, release when you\'re finished","text":"Tip: you can also add text by double-clicking anywhere with the selection tool","text_selected":"Double-click or press ENTER to edit text","text_editing":"Press Escape or CtrlOrCmd+ENTER to finish editing","linearElementMulti":"Click on last point or press Escape or Enter to finish","lockAngle":"You can constrain angle by holding SHIFT","resize":"You can constrain proportions by holding SHIFT while resizing,\\nhold ALT to resize from the center","resizeImage":"You can resize freely by holding SHIFT,\\nhold ALT to resize from the center","rotate":"You can constrain angles by holding SHIFT while rotating","lineEditor_info":"Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points","lineEditor_pointSelected":"Press Delete to remove point(s),\\nCtrlOrCmd+D to duplicate, or drag to move","lineEditor_nothingSelected":"Select a point to edit (hold SHIFT to select multiple),\\nor hold Alt and click to add new points","placeImage":"Click to place the image, or click and drag to set its size manually","publishLibrary":"Publish your own library","bindTextToElement":"Press enter to add text","deepBoxSelect":"Hold CtrlOrCmd to deep select, and to prevent dragging","eraserRevert":"Hold Alt to revert the elements marked for deletion","firefox_clipboard_write":"This feature can likely be enabled by setting the \\"dom.events.asyncClipboard.clipboardItem\\" flag to \\"true\\". To change the browser flags in Firefox, visit the \\"about:config\\" page."},"canvasError":{"cannotShowPreview":"Cannot show preview","canvasTooBig":"The canvas may be too big.","canvasTooBigTip":"Tip: try moving the farthest elements a bit closer together."},"errorSplash":{"headingMain_pre":"Encountered an error. Try ","headingMain_button":"reloading the page.","clearCanvasMessage":"If reloading doesn\'t work, try ","clearCanvasMessage_button":"clearing the canvas.","clearCanvasCaveat":" This will result in loss of work ","trackedToSentry_pre":"The error with identifier ","trackedToSentry_post":" was tracked on our system.","openIssueMessage_pre":"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our ","openIssueMessage_button":"bug tracker.","openIssueMessage_post":" Please include information below by copying and pasting into the GitHub issue.","sceneContent":"Scene content:"},"roomDialog":{"desc_intro":"You can invite people to your current scene to collaborate with you.","desc_privacy":"Don\'t worry, the session uses end-to-end encryption, so whatever you draw will stay private. Not even our server will be able to see what you come up with.","button_startSession":"Start session","button_stopSession":"Stop session","desc_inProgressIntro":"Live-collaboration session is now in progress.","desc_shareLink":"Share this link with anyone you want to collaborate with:","desc_exitSession":"Stopping the session will disconnect you from the room, but you\'ll be able to continue working with the scene, locally. Note that this won\'t affect other people, and they\'ll still be able to collaborate on their version.","shareTitle":"Join a live collaboration session on Excalidraw"},"errorDialog":{"title":"Error"},"exportDialog":{"disk_title":"Save to disk","disk_details":"Export the scene data to a file from which you can import later.","disk_button":"Save to file","link_title":"Shareable link","link_details":"Export as a read-only link.","link_button":"Export to Link","excalidrawplus_description":"Save the scene to your Excalidraw+ workspace.","excalidrawplus_button":"Export","excalidrawplus_exportError":"Couldn\'t export to Excalidraw+ at this moment..."},"helpDialog":{"blog":"Read our blog","click":"click","deepSelect":"Deep select","deepBoxSelect":"Deep select within box, and prevent dragging","curvedArrow":"Curved arrow","curvedLine":"Curved line","documentation":"Documentation","doubleClick":"double-click","drag":"drag","editor":"Editor","editLineArrowPoints":"Edit line/arrow points","editText":"Edit text / add label","github":"Found an issue? Submit","howto":"Follow our guides","or":"or","preventBinding":"Prevent arrow binding","tools":"Tools","shortcuts":"Keyboard shortcuts","textFinish":"Finish editing (text editor)","textNewLine":"Add new line (text editor)","title":"Help","view":"View","zoomToFit":"Zoom to fit all elements","zoomToSelection":"Zoom to selection","toggleElementLock":"Lock/unlock selection","movePageUpDown":"Move page up/down","movePageLeftRight":"Move page left/right"},"clearCanvasDialog":{"title":"Clear canvas"},"publishDialog":{"title":"Publish library","itemName":"Item name","authorName":"Author name","githubUsername":"GitHub username","twitterUsername":"Twitter username","libraryName":"Library name","libraryDesc":"Library description","website":"Website","placeholder":{"authorName":"Your name or username","libraryName":"Name of your library","libraryDesc":"Description of your library to help people understand its usage","githubHandle":"GitHub handle (optional), so you can edit the library once submitted for review","twitterHandle":"Twitter username (optional), so we know who to credit when promoting over Twitter","website":"Link to your personal website or elsewhere (optional)"},"errors":{"required":"Required","website":"Enter a valid URL"},"noteDescription":{"pre":"Submit your library to be included in the ","link":"public library repository","post":"for other people to use in their drawings."},"noteGuidelines":{"pre":"The library needs to be manually approved first. Please read the ","link":"guidelines","post":" before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required."},"noteLicense":{"pre":"By submitting, you agree the library will be published under the ","link":"MIT License, ","post":"which in short means anyone can use them without restrictions."},"noteItems":"Each library item must have its own name so it\'s filterable. The following library items will be included:","atleastOneLibItem":"Please select at least one library item to get started","republishWarning":"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},"publishSuccessDialog":{"title":"Library submitted","content":"Thank you {{authorName}}. Your library has been submitted for review. You can track the status","link":"here"},"confirmDialog":{"resetLibrary":"Reset library","removeItemsFromLib":"Remove selected items from library"},"encrypted":{"tooltip":"Your drawings are end-to-end encrypted so Excalidraw\'s servers will never see them.","link":"Blog post on end-to-end encryption in Excalidraw"},"stats":{"angle":"Angle","element":"Element","elements":"Elements","height":"Height","scene":"Scene","selected":"Selected","storage":"Storage","title":"Stats for nerds","total":"Total","version":"Version","versionCopy":"Click to copy","versionNotAvailable":"Version not available","width":"Width"},"toast":{"addedToLibrary":"Added to library","copyStyles":"Copied styles.","copyToClipboard":"Copied to clipboard.","copyToClipboardAsPng":"Copied {{exportSelection}} to clipboard as PNG\\n({{exportColorScheme}})","fileSaved":"File saved.","fileSavedToFilename":"Saved to {filename}","canvas":"canvas","selection":"selection","pasteAsSingleElement":"Use {{shortcut}} to paste as a single element,\\nor paste into an existing text editor"},"colors":{"495057":"Gray 7","ffffff":"White","f8f9fa":"Gray 0","f1f3f5":"Gray 1","fff5f5":"Red 0","fff0f6":"Pink 0","f8f0fc":"Grape 0","f3f0ff":"Violet 0","edf2ff":"Indigo 0","e7f5ff":"Blue 0","e3fafc":"Cyan 0","e6fcf5":"Teal 0","ebfbee":"Green 0","f4fce3":"Lime 0","fff9db":"Yellow 0","fff4e6":"Orange 0","transparent":"Transparent","ced4da":"Gray 4","868e96":"Gray 6","fa5252":"Red 6","e64980":"Pink 6","be4bdb":"Grape 6","7950f2":"Violet 6","4c6ef5":"Indigo 6","228be6":"Blue 6","15aabf":"Cyan 6","12b886":"Teal 6","40c057":"Green 6","82c91e":"Lime 6","fab005":"Yellow 6","fd7e14":"Orange 6","000000":"Black","343a40":"Gray 8","c92a2a":"Red 9","a61e4d":"Pink 9","862e9c":"Grape 9","5f3dc4":"Violet 9","364fc7":"Indigo 9","1864ab":"Blue 9","0b7285":"Cyan 9","087f5b":"Teal 9","2b8a3e":"Green 9","5c940d":"Lime 9","e67700":"Yellow 9","d9480f":"Orange 9"},"welcomeScreen":{"app":{"center_heading":"All your data is saved locally in your browser.","center_heading_plus":"Did you want to go to the Excalidraw+ instead?","menuHint":"Export, preferences, languages, ..."},"defaults":{"menuHint":"Export, preferences, and more...","center_heading":"Diagrams. Made. Simple.","toolbarHint":"Pick a tool & Start drawing!","helpHint":"Shortcuts & help"}}}')},4451:function(e){e.exports=JSON.parse('{"ar-SA":89,"bg-BG":52,"bn-BD":57,"ca-ES":96,"cs-CZ":72,"da-DK":31,"de-DE":100,"el-GR":98,"en":100,"es-ES":99,"eu-ES":99,"fa-IR":91,"fi-FI":96,"fr-FR":99,"gl-ES":99,"he-IL":99,"hi-IN":73,"hu-HU":85,"id-ID":98,"it-IT":99,"ja-JP":97,"kab-KAB":93,"kk-KZ":19,"ko-KR":99,"ku-TR":91,"lt-LT":61,"lv-LV":93,"mr-IN":100,"my-MM":40,"nb-NO":100,"nl-NL":92,"nn-NO":86,"oc-FR":94,"pa-IN":79,"pl-PL":87,"pt-BR":96,"pt-PT":99,"ro-RO":100,"ru-RU":96,"si-LK":8,"sk-SK":99,"sl-SI":100,"sv-SE":99,"ta-IN":90,"th-TH":39,"tr-TR":98,"uk-UA":93,"vi-VN":52,"zh-CN":99,"zh-HK":25,"zh-TW":100}')}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,exports:{}};return a[e](n,n.exports,l),n.exports}l.m=a,l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},r=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},l.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var i=Object.create(null);l.r(i);var o={};n=n||[null,r({}),r([]),r(r)];for(var a=2&t&&e;"object"==typeof a&&!~n.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach((function(t){o[t]=function(){return e[t]}}));return o.default=function(){return e},l.d(i,o),i},l.d=function(e,t){for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=function(e){return Promise.all(Object.keys(l.f).reduce((function(t,n){return l.f[n](e,t),t}),[]))},l.u=function(e){return"excalidraw-assets/"+{22:"locales/kk-KZ-json",537:"locales/th-TH-json",1204:"locales/ja-JP-json",1302:"locales/si-LK-json",1477:"locales/my-MM-json",1513:"locales/el-GR-json",1628:"locales/bg-BG-json",1690:"locales/oc-FR-json",1790:"locales/da-DK-json",2091:"locales/ar-SA-json",2312:"locales/he-IL-json",2359:"locales/nb-NO-json",2404:"locales/ta-IN-json",2943:"locales/gl-ES-json",3024:"locales/nl-NL-json",3031:"locales/ku-TR-json",3082:"locales/de-DE-json",3162:"locales/pa-IN-json",3397:"locales/mr-IN-json",3421:"locales/zh-TW-json",3512:"locales/fi-FI-json",3674:"locales/pl-PL-json",3682:"locales/fr-FR-json",3721:"locales/pt-BR-json",3808:"locales/id-ID-json",3885:"locales/nn-NO-json",4e3:"locales/vi-VN-json",4680:"locales/zh-CN-json",4736:"vendor",4977:"locales/tr-TR-json",5089:"locales/ro-RO-json",5130:"locales/ca-ES-json",5330:"locales/fa-IR-json",5395:"locales/pt-PT-json",6071:"locales/sl-SI-json",6239:"locales/it-IT-json",6265:"locales/cs-CZ-json",6768:"locales/lv-LV-json",6844:"locales/ko-KR-json",7368:"locales/hu-HU-json",7429:"locales/bn-BD-json",7759:"locales/uk-UA-json",7920:"locales/zh-HK-json",8081:"locales/eu-ES-json",8124:"locales/ru-RU-json",8340:"locales/lt-LT-json",8534:"locales/sv-SE-json",8750:"locales/sk-SK-json",8759:"locales/es-ES-json",9551:"locales/kab-KAB-json",9828:"locales/hi-IN-json"}[e]+"-"+{22:"1f9df2b51e34996bad30",537:"3a152569bbebfec7c6c0",1204:"ef6ec5abb0c3c53c7a51",1302:"db1222db995d9425e281",1477:"1a05d5c242c822079dca",1513:"79f7d66730b39df84f8e",1628:"72ac7b7548d7fefdcd2a",1690:"e90ca79174b6e1eccb72",1790:"ed85a6f48e1df51b1b46",2091:"06d4bd2f3a164162f2b8",2312:"3280be0edae615c7685f",2359:"7ea7ab2356e76889af8d",2404:"4063d11b19f24794564a",2943:"2117445509ba7c479ee0",3024:"5805f36f33a3f8e53adc",3031:"d10a4bb9ede3c08a08e1",3082:"f70dfb7201a16dc3f9fc",3162:"1854ecccf3c6f8ea9c46",3397:"c922a007bb00d3e4f3b1",3421:"c39caba2da3f001066a8",3512:"d43636fb51002f55e2a4",3674:"b4be83b26070e4cf70ca",3682:"b5ea877625968f748b7f",3721:"2e7a1690edc8d46e8842",3808:"6031eb8be253b20c28e9",3885:"8209f0f674435b52293d",4e3:"2f5b95c0011820e16f4b",4680:"2cb13b38b6615ada3097",4736:"53d1c69ef585b6dd219b",4977:"9002b1505b0931924d42",5089:"3397acad1a98b5093c8b",5130:"6108f4ae0be3d1e369a6",5330:"586a1324f942d89620b6",5395:"aba1622a80e32e465a3d",6071:"68eba9ac00ae57bae3f4",6239:"446b14f993000d0f572f",6265:"1ae99f296c9febb99f72",6768:"1e3a5e87e39d2d90274c",6844:"cf33ecf52ab95055544b",7368:"6ccf0d8a164ecec52187",7429:"759924ef13bd9e602cb3",7759:"4e345c790342b7672248",7920:"4bcbf71743fda1544a84",8081:"1cc77079b354b962615f",8124:"8ab49e8d0473e92a8ab9",8340:"08c7fc343ef2f533ec5f",8534:"36b97455521e61312a47",8750:"50dcb09552f93c2de3a4",8759:"682b92427b8b27bb0aa8",9551:"69853849c71eff277ba0",9828:"dad8ce15f9b7a435a926"}[e]+".js"},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i={},o="ExcalidrawLib:",l.l=function(e,t,n,r){if(i[e])i[e].push(t);else{var a,s;if(void 0!==n)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==o+n){a=d;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,l.nc&&a.setAttribute("nonce",l.nc),a.setAttribute("data-webpack",o+n),a.src=e),i[e]=[t];var h=function(t,n){a.onerror=a.onload=null,clearTimeout(p);var r=i[e];if(delete i[e],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),s&&document.head.appendChild(a)}},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="",function(){l.b=document.baseURI||self.location.href;var e={1388:0};l.f.j=function(t,n){var r=l.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,i){r=e[t]=[n,i]}));n.push(r[2]=i);var o=l.p+l.u(t),a=new Error;l.l(o,(function(n){if(l.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=function(t,n){var r,i,o=n[0],a=n[1],s=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in a)l.o(a,r)&&(l.m[r]=a[r]);s&&s(l)}for(t&&t(n);c<o.length;c++)i=o[c],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkExcalidrawLib=self.webpackChunkExcalidrawLib||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),l.nc=void 0;var c={};return function(){l.r(c),l.d(c,{Button:function(){return Ee},Excalidraw:function(){return We},FONT_FAMILY:function(){return e.ut},Footer:function(){return H},LiveCollaborationTrigger:function(){return Ae},MIME_TYPES:function(){return e.LO},MainMenu:function(){return W.Z},Sidebar:function(){return Ne.Y},THEME:function(){return e.C6},WelcomeScreen:function(){return ye},bumpVersion:function(){return ze.ZP},defaultLang:function(){return I.Fp},exportToBlob:function(){return Le.Fl},exportToCanvas:function(){return Le.NL},exportToClipboard:function(){return Le.i1},exportToSvg:function(){return Le.$D},getFreeDrawSvgPath:function(){return Le.N7},getNonDeletedElements:function(){return Pe.Lm},getSceneVersion:function(){return Pe.Uo},isInvisiblySmallElement:function(){return Pe.QD},isLinearElement:function(){return Re.bt},languages:function(){return I.Mj},loadFromBlob:function(){return Le.cT},loadLibraryFromBlob:function(){return Le.lV},loadSceneOrLibraryFromBlob:function(){return Le.ZY},mergeLibraryItems:function(){return Le.zh},mutateElement:function(){return ze.DR},newElementWith:function(){return ze.BE},parseLibraryTokensFromUrl:function(){return je.Di},restore:function(){return De.nu},restoreAppState:function(){return De.lY},restoreElements:function(){return De.ET},restoreLibraryItems:function(){return De.wJ},sceneCoordsToViewportCoords:function(){return D._i},serializeAsJSON:function(){return Le.I_},serializeLibraryAsJSON:function(){return Le.NI},useDevice:function(){return P.Fy},useHandleLibrary:function(){return je.xS},useI18n:function(){return I.QT},viewportCoordsToSceneCoords:function(){return D.dE}});var e=l(2335);"production"!==e.Vi.TEST&&(l.p=window.EXCALIDRAW_ASSET_PATH||"https://unpkg.com/".concat("@excalidraw/excalidraw","@").concat("0.15.2","/dist/"));var t=function(){Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if((e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0})},n=l(487),r=l.n(n),i=l(631),o=l.n(i),a=l(2052),s=l.n(a),u=l(4010),d=l.n(u),h=l(1469),p=l.n(h),f=l(9329),m=l.n(f),g=l(4295),v={};v.styleTagTransform=m(),v.setAttributes=d(),v.insert=s().bind(null,"head"),v.domAPI=o(),v.insertStyleElement=p(),r()(g.Z,v),g.Z&&g.Z.locals&&g.Z.locals;var y=l(6479),b=l.n(y),x=l(9713),w=l.n(x),_=l(9787),k=l.n(_),E=l(8950),S=l(2577),C=l(2975),T=l.n(C),M=l(5440),I=l(8211),O=l(4512),A=function(e){var t=(0,_.useState)(!0),n=(0,S.Z)(t,2),r=n[0],i=n[1];return(0,_.useEffect)((function(){var t=function(){var e=(0,E.Z)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.m0)(n);case 2:i(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=I.Mj.find((function(t){return t.code===e.langCode}))||I.Fp;t()}),[e.langCode]),r?(0,O.jsx)(M.z,{theme:e.theme}):e.children},P=l(2134),D=l(6340),L=l(9915),R={};R.styleTagTransform=m(),R.setAttributes=d(),R.insert=s().bind(null,"head"),R.domAPI=o(),R.insertStyleElement=p(),r()(L.Z,R),L.Z&&L.Z.locals&&L.Z.locals;var z=l(9310),j={};j.styleTagTransform=m(),j.setAttributes=d(),j.insert=s().bind(null,"head"),j.domAPI=o(),j.insertStyleElement=p(),r()(z.Z,j),z.Z&&z.Z.locals&&z.Z.locals;var N=l(4739),B=l(9487),F=l(45),V=l(8888),U=l(8793),$={};$.styleTagTransform=m(),$.setAttributes=d(),$.insert=s().bind(null,"head"),$.domAPI=o(),$.insertStyleElement=p(),r()(U.Z,$),U.Z&&U.Z.locals&&U.Z.locals;var Z=function(e){var t=e.children,n=(0,V.R6)().footerCenterTunnel,r=(0,P.gF)();return(0,O.jsx)(n.In,{children:(0,O.jsx)("div",{className:(0,F.Z)("footer-center zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":r.zenModeEnabled}),children:t})})},H=Z;Z.displayName="FooterCenter";var W=l(4709),q=l(7169),G=l(2726),K=l(6710),Y=l(785),X=l(3646),J=["onSelect","children","icon","shortcut","className"],Q=["children","href","icon","shortcut","className"];function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=function(e){var t=e.icon,n=e.shortcut,r=e.children,i=(0,P.Fy)();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{className:"welcome-screen-menu-item__icon",children:t}),(0,O.jsx)("div",{className:"welcome-screen-menu-item__text",children:r}),n&&!i.isMobile&&(0,O.jsx)("div",{className:"welcome-screen-menu-item__shortcut",children:n})]})};ne.displayName="WelcomeScreenMenuItemContent";var re=function(e){var t=e.onSelect,n=e.children,r=e.icon,i=e.shortcut,o=e.className,a=void 0===o?"":o,s=(0,G.Z)(e,J);return(0,O.jsx)("button",te(te({},s),{},{type:"button",className:"welcome-screen-menu-item ".concat(a),onClick:t,children:(0,O.jsx)(ne,{icon:r,shortcut:i,children:n})}))};re.displayName="WelcomeScreenMenuItem";var ie=function(e){var t=e.children,n=e.href,r=e.icon,i=e.shortcut,o=e.className,a=void 0===o?"":o,s=(0,G.Z)(e,Q);return(0,O.jsx)("a",te(te({},s),{},{className:"welcome-screen-menu-item ".concat(a),href:n,target:"_blank",rel:"noreferrer",children:(0,O.jsx)(ne,{icon:r,shortcut:i,children:t})}))};ie.displayName="WelcomeScreenMenuItemLink";var oe=function(e){var t=e.children,n=(0,V.R6)().welcomeScreenCenterTunnel;return(0,O.jsx)(n.In,{children:(0,O.jsx)("div",{className:"welcome-screen-center",children:t||(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ae,{}),(0,O.jsx)(se,{children:(0,I.t)("welcomeScreen.defaults.center_heading")}),(0,O.jsxs)(le,{children:[(0,O.jsx)(ue,{}),(0,O.jsx)(ce,{})]})]})})})};oe.displayName="Center";var ae=function(e){var t=e.children;return(0,O.jsx)("div",{className:"welcome-screen-center__logo virgil welcome-screen-decor",children:t||(0,O.jsxs)(O.Fragment,{children:[X.Mw," Excalidraw"]})})};ae.displayName="Logo";var se=function(e){var t=e.children;return(0,O.jsx)("div",{className:"welcome-screen-center__heading welcome-screen-decor virgil",children:t})};se.displayName="Heading";var le=function(e){var t=e.children;return(0,O.jsx)("div",{className:"welcome-screen-menu",children:t})};le.displayName="Menu";var ce=function(){var e=(0,P.eh)();return(0,O.jsx)(re,{onSelect:function(){return e.executeAction(K.jY)},shortcut:"?",icon:X.by,children:(0,I.t)("helpDialog.title")})};ce.displayName="MenuItemHelp";var ue=function(){var e=(0,P.gF)(),t=(0,P.eh)();return e.viewModeEnabled?null:(0,O.jsx)(re,{onSelect:function(){return t.executeAction(K._d)},shortcut:(0,Y.C)("loadScene"),icon:X.Tl,children:(0,I.t)("buttons.load")})};ue.displayName="MenuItemLoadScene";var de=function(e){var t=e.onSelect,n=(0,I.QT)().t;return(0,O.jsx)(re,{shortcut:null,onSelect:t,icon:X.jn,children:n("labels.liveCollaboration")})};de.displayName="MenuItemLiveCollaborationTrigger",oe.Logo=ae,oe.Heading=se,oe.Menu=le,oe.MenuItem=re,oe.MenuItemLink=ie,oe.MenuItemHelp=ce,oe.MenuItemLoadScene=ue,oe.MenuItemLiveCollaborationTrigger=de;var he=function(e){var t=e.children,n=(0,V.R6)().welcomeScreenMenuHintTunnel;return(0,O.jsx)(n.In,{children:(0,O.jsxs)("div",{className:"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[X.oQ,(0,O.jsx)("div",{className:"welcome-screen-decor-hint__label",children:t||(0,I.t)("welcomeScreen.defaults.menuHint")})]})})};he.displayName="MenuHint";var pe=function(e){var t=e.children,n=(0,V.R6)().welcomeScreenToolbarHintTunnel;return(0,O.jsx)(n.In,{children:(0,O.jsxs)("div",{className:"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[(0,O.jsx)("div",{className:"welcome-screen-decor-hint__label",children:t||(0,I.t)("welcomeScreen.defaults.toolbarHint")}),X.DJ]})})};pe.displayName="ToolbarHint";var fe=function(e){var t=e.children,n=(0,V.R6)().welcomeScreenHelpHintTunnel;return(0,O.jsx)(n.In,{children:(0,O.jsxs)("div",{className:"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[(0,O.jsx)("div",{children:t||(0,I.t)("welcomeScreen.defaults.helpHint")}),X._U]})})};fe.displayName="HelpHint";var me=l(1569),ge={};ge.styleTagTransform=m(),ge.setAttributes=d(),ge.insert=s().bind(null,"head"),ge.domAPI=o(),ge.insertStyleElement=p(),r()(me.Z,ge),me.Z&&me.Z.locals&&me.Z.locals;var ve=function(e){return(0,O.jsx)(O.Fragment,{children:e.children||(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(oe,{}),(0,O.jsx)(he,{}),(0,O.jsx)(pe,{}),(0,O.jsx)(fe,{})]})})};ve.displayName="WelcomeScreen",ve.Center=oe,ve.Hints={MenuHint:he,ToolbarHint:pe,HelpHint:fe};var ye=ve,be=l(3137),xe={};xe.styleTagTransform=m(),xe.setAttributes=d(),xe.insert=s().bind(null,"head"),xe.domAPI=o(),xe.insertStyleElement=p(),r()(be.Z,xe),be.Z&&be.Z.locals&&be.Z.locals;var we=["type","onSelect","children","className"];function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=function(e){var t=e.type,n=void 0===t?"button":t,r=e.onSelect,i=e.children,o=e.className,a=void 0===o?"":o,s=(0,G.Z)(e,we);return(0,O.jsx)("button",ke(ke({onClick:function(e){var t;r(),null===(t=s.onClick)||void 0===t||t.call(s,e)},type:n,className:"excalidraw-button ".concat(a)},s),{},{children:i}))},Se=l(3397),Ce={};Ce.styleTagTransform=m(),Ce.setAttributes=d(),Ce.insert=s().bind(null,"head"),Ce.domAPI=o(),Ce.insertStyleElement=p(),r()(Se.Z,Ce),Se.Z&&Se.Z.locals&&Se.Z.locals;var Te=["isCollaborating","onSelect"];function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){(0,q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=function(e){var t=e.isCollaborating,n=e.onSelect,r=(0,G.Z)(e,Te),i=(0,P.gF)();return(0,O.jsxs)(Ee,Ie(Ie({},r),{},{className:(0,F.Z)("collab-button",{active:t}),type:"button",onSelect:n,style:{position:"relative"},title:(0,I.t)("labels.liveCollaboration"),children:[X.jn,i.collaborators.size>0&&(0,O.jsx)("div",{className:"CollabButton-collaborators",children:i.collaborators.size})]}))},Ae=Oe;Oe.displayName="LiveCollaborationTrigger";var Pe=l(1047),De=l(679),Le=l(3024),Re=l(1974),ze=l(1935),je=l(7053),Ne=l(9430),Be=["initialData","UIOptions"],Fe=["initialData","UIOptions"];function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $e=function(t){var n,r,i,o=t.onChange,a=t.initialData,s=t.excalidrawRef,l=t.isCollaborating,c=void 0!==l&&l,u=t.onPointerUpdate,d=t.renderTopRightUI,h=t.renderSidebar,p=t.langCode,f=void 0===p?I.Fp.code:p,m=t.viewModeEnabled,g=t.zenModeEnabled,v=t.gridModeEnabled,y=t.libraryReturnUrl,b=t.theme,x=t.name,w=t.renderCustomStats,k=t.onPaste,E=t.detectScroll,S=void 0===E||E,C=t.handleKeyboardGlobally,T=void 0!==C&&C,M=t.onLibraryChange,D=t.autoFocus,L=void 0!==D&&D,R=t.generateIdForFile,z=t.onLinkOpen,j=t.onPointerDown,F=t.onScrollChange,V=t.children,U=null===(n=t.UIOptions)||void 0===n?void 0:n.canvasActions,$=Ue(Ue({},t.UIOptions),{},{canvasActions:Ue(Ue({},e.cW.canvasActions),U)});return null!=U&&U.export&&($.canvasActions.export.saveFileToDisk=null!==(r=null===(i=U.export)||void 0===i?void 0:i.saveFileToDisk)&&void 0!==r?r:e.cW.canvasActions.export.saveFileToDisk),null===$.canvasActions.toggleTheme&&void 0===b&&($.canvasActions.toggleTheme=!0),(0,_.useEffect)((function(){var e=function(e){"number"==typeof e.scale&&1!==e.scale&&e.preventDefault()};return document.addEventListener("touchmove",e,{passive:!1}),function(){document.removeEventListener("touchmove",e)}}),[]),(0,O.jsx)(N.zt,{unstable_createStore:function(){return B.e_},scope:B.yE,children:(0,O.jsx)(A,{langCode:f,theme:b,children:(0,O.jsx)(P.ZP,{onChange:o,initialData:a,excalidrawRef:s,isCollaborating:c,onPointerUpdate:u,renderTopRightUI:d,langCode:f,viewModeEnabled:m,zenModeEnabled:g,gridModeEnabled:v,libraryReturnUrl:y,theme:b,name:x,renderCustomStats:w,UIOptions:$,onPaste:k,detectScroll:S,handleKeyboardGlobally:T,onLibraryChange:M,autoFocus:L,generateIdForFile:R,onLinkOpen:z,onPointerDown:j,onScrollChange:F,renderSidebar:h,children:V})})})},Ze=function(e,t){if(e.children!==t.children)return!1;e.initialData;var n=e.UIOptions,r=void 0===n?{}:n,i=b()(e,Be),o=(t.initialData,t.UIOptions),a=void 0===o?{}:o,s=b()(t,Fe),l=Object.keys(r),c=Object.keys(a);return l.length===c.length&&l.every((function(e){return"canvasActions"===e?Object.keys(r.canvasActions).every((function(e){var t,n,i,o;return"export"===e&&null!=r&&null!==(t=r.canvasActions)&&void 0!==t&&t.export&&null!=a&&null!==(n=a.canvasActions)&&void 0!==n&&n.export?r.canvasActions.export.saveFileToDisk===a.canvasActions.export.saveFileToDisk:(null==r||null===(i=r.canvasActions)||void 0===i?void 0:i[e])===(null==a||null===(o=a.canvasActions)||void 0===o?void 0:o[e])})):r[e]===a[e]}))&&(0,D.w8)(i,s)},He=(0,_.forwardRef)((function(e,t){return(0,O.jsx)($e,Ue(Ue({},e),{},{excalidrawRef:t}))})),We=k().memo(He,Ze);We.displayName="Excalidraw",t()}(),c}()}(U,sd)}(XR);var JR=XR.exports;YR.exports=JR;var QR=YR.exports;function ez(e){this.content=e}function tz(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),o=t.child(r);if(i!=o){if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let e=0;i.text[e]==o.text[e];e++)n++;return n}if(i.content.size||o.content.size){let e=tz(i.content,o.content,n+1);if(null!=e)return e}n+=i.nodeSize}else n+=i.nodeSize}}function nz(e,t,n,r){for(let i=e.childCount,o=t.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};let a=e.child(--i),s=t.child(--o),l=a.nodeSize;if(a!=s){if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){let e=0,t=Math.min(a.text.length,s.text.length);for(;e<t&&a.text[a.text.length-e-1]==s.text[s.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){let e=nz(a.content,s.content,n-1,r-1);if(e)return e}n-=l,r-=l}else n-=l,r-=l}}ez.prototype={constructor:ez,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),o=r.content.slice();return-1==i?o.push(n||e,t):(o[i+1]=t,n&&(o[i]=n)),new ez(o)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new ez(n)},addToStart:function(e,t){return new ez([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new ez(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),o=r.find(e);return i.splice(-1==o?i.length:o,0,t,n),new ez(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=ez.from(e)).size?new ez(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=ez.from(e)).size?new ez(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=ez.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach((function(t,n){e[t]=n})),e},get size(){return this.content.length>>1}},ez.from=function(e){if(e instanceof ez)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new ez(t)};class rz{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,r=0,i){for(let o=0,a=0;a<t;o++){let s=this.content[o],l=a+s.nodeSize;if(l>e&&!1!==n(s,r+a,i||null,o)&&s.content.size){let i=a+1;s.nodesBetween(Math.max(0,e-i),Math.min(s.content.size,t-i),n,r+i)}a=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let i="",o=!0;return this.nodesBetween(e,t,((a,s)=>{a.isText?(i+=a.text.slice(Math.max(e,s)-s,t-s),o=!n):a.isLeaf?(r?i+="function"==typeof r?r(a):r:a.type.spec.leafText&&(i+=a.type.spec.leafText(a)),o=!n):!o&&a.isBlock&&(i+=n,o=!0)}),0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)r.push(e.content[i]);return new rz(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let i=0,o=0;o<t;i++){let a=this.content[i],s=o+a.nodeSize;s>e&&((o<e||s>t)&&(a=a.isText?a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),n.push(a),r+=a.nodeSize),o=s}return new rz(n,r)}cutByIndex(e,t){return e==t?rz.empty:0==e&&t==this.content.length?this:new rz(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new rz(r,i)}addToStart(e){return new rz([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new rz(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return tz(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return nz(this,e,t,n)}findIndex(e,t=-1){if(0==e)return oz(0,e);if(e==this.size)return oz(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=r+this.child(n).nodeSize;if(i>=e)return i==e||t>0?oz(n+1,i):oz(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((e=>e.toJSON())):null}static fromJSON(e,t){if(!t)return rz.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new rz(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return rz.empty;let t,n=0;for(let r=0;r<e.length;r++){let i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new rz(t||e,n)}static from(e){if(!e)return rz.empty;if(e instanceof rz)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new rz([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}rz.empty=new rz([],0);const iz={index:0,offset:0};function oz(e,t){return iz.index=e,iz.offset=t,iz}function az(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!az(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!az(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}let sz=class e{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&az(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);return n.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return e.none;if(t instanceof e)return[t];let n=t.slice();return n.sort(((e,t)=>e.type.rank-t.type.rank)),n}};sz.none=[];class lz extends Error{}class cz{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=dz(this.content,e+this.openStart,t);return n&&new cz(n,this.openStart,this.openEnd)}removeBetween(e,t){return new cz(uz(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return cz.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new cz(rz.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)r++;return new cz(e,n,r)}}function uz(e,t,n){let{index:r,offset:i}=e.findIndex(t),o=e.maybeChild(r),{index:a,offset:s}=e.findIndex(n);if(i==t||o.isText){if(s!=n&&!e.child(a).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=a)throw new RangeError("Removing non-flat range");return e.replaceChild(r,o.copy(uz(o.content,t-i-1,n-i-1)))}function dz(e,t,n,r){let{index:i,offset:o}=e.findIndex(t),a=e.maybeChild(i);if(o==t||a.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let s=dz(a.content,t-o-1,n);return s&&e.replaceChild(i,a.copy(s))}function hz(e,t,n){if(n.openStart>e.depth)throw new lz("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new lz("Inconsistent open depths");return pz(e,t,n,0)}function pz(e,t,n,r){let i=e.index(r),o=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let a=pz(e,t,n,r+1);return o.copy(o.content.replaceChild(i,a))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:i,end:a}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let i=n-1;i>=0;i--)r=t.node(i).copy(rz.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return yz(o,bz(e,i,a,t,r))}{let r=e.parent,i=r.content;return yz(r,i.cut(0,e.parentOffset).append(n.content).append(i.cut(t.parentOffset)))}}return yz(o,xz(e,t,r))}function fz(e,t){if(!t.type.compatibleContent(e.type))throw new lz("Cannot join "+t.type.name+" onto "+e.type.name)}function mz(e,t,n){let r=e.node(n);return fz(r,t.node(n)),r}function gz(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function vz(e,t,n,r){let i=(t||e).node(n),o=0,a=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(gz(e.nodeAfter,r),o++));for(let s=o;s<a;s++)gz(i.child(s),r);t&&t.depth==n&&t.textOffset&&gz(t.nodeBefore,r)}function yz(e,t){return e.type.checkContent(t),e.copy(t)}function bz(e,t,n,r,i){let o=e.depth>i&&mz(e,t,i+1),a=r.depth>i&&mz(n,r,i+1),s=[];return vz(null,e,i,s),o&&a&&t.index(i)==n.index(i)?(fz(o,a),gz(yz(o,bz(e,t,n,r,i+1)),s)):(o&&gz(yz(o,xz(e,t,i+1)),s),vz(t,n,i,s),a&&gz(yz(a,xz(n,r,i+1)),s)),vz(r,null,i,s),new rz(s)}function xz(e,t,n){let r=[];return vz(null,e,n,r),e.depth>n&&gz(yz(mz(e,t,n+1),xz(e,t,n+1)),r),vz(t,null,n,r),new rz(r)}cz.empty=new cz(rz.empty,0,0);class wz{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let i=0;i<e;i++)r+=n.child(i).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return sz.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new Sz(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,i=t;for(let o=e;;){let{index:e,offset:t}=o.content.findIndex(i),a=i-t;if(n.push(o,e,r+t),!a)break;if(o=o.child(e),o.isText)break;i=a-1,r+=t+1}return new wz(t,n,i)}static resolveCached(e,t){for(let r=0;r<_z.length;r++){let n=_z[r];if(n.pos==t&&n.doc==e)return n}let n=_z[kz]=wz.resolve(e,t);return kz=(kz+1)%Ez,n}}let _z=[],kz=0,Ez=12;class Sz{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Cz=Object.create(null);let Tz=class e{constructor(e,t,n,r=sz.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||rz.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&az(this.attrs,t||e.defaultAttrs||Cz)&&sz.sameSet(this.marks,n||sz.none)}copy(t=null){return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return cz.empty;let r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),a=r.start(o),s=r.node(o).content.cut(r.pos-a,i.pos-a);return new cz(s,r.depth-o,i.depth-o)}replace(e,t,n){return hz(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return wz.resolveCached(this,e)}resolveNoCache(e){return wz.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,(e=>(n.isInSet(e.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Iz(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=rz.empty,r=0,i=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,r,i),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let s=r;s<i;s++)if(!this.type.allowsMarks(n.child(s).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=sz.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!sz.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((e=>e.type.name))}`);this.content.forEach((e=>e.check()))}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((e=>e.toJSON()))),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=rz.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)}};Tz.prototype.text=void 0;class Mz extends Tz{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Iz(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Mz(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Mz(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Iz(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class Oz{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new Az(e,t);if(null==n.next)return Oz.empty;let r=Pz(n);n.next&&n.err("Unexpected trailing text");let i=function(e){let t=Object.create(null);return n(Nz(e,0));function n(r){let i=[];r.forEach((t=>{e[t].forEach((({term:t,to:n})=>{if(!t)return;let r;for(let e=0;e<i.length;e++)i[e][0]==t&&(r=i[e][1]);Nz(e,n).forEach((e=>{r||i.push([t,r=[]]),-1==r.indexOf(e)&&r.push(e)}))}))}));let o=t[r.join(",")]=new Oz(r.indexOf(e.length-1)>-1);for(let e=0;e<i.length;e++){let r=i[e][1].sort(jz);o.next.push({type:i[e][0],next:t[r.join(",")]||n(r)})}return o}}(function(e){let t=[[]];return i(o(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach((e=>e.to=t))}function o(e,t){if("choice"==e.type)return e.exprs.reduce(((e,n)=>e.concat(o(n,t))),[]);if("seq"!=e.type){if("star"==e.type){let a=n();return r(t,a),i(o(e.expr,a),a),[r(a)]}if("plus"==e.type){let a=n();return i(o(e.expr,t),a),i(o(e.expr,a),a),[r(a)]}if("opt"==e.type)return[r(t)].concat(o(e.expr,t));if("range"==e.type){let a=t;for(let t=0;t<e.min;t++){let t=n();i(o(e.expr,a),t),a=t}if(-1==e.max)i(o(e.expr,a),a);else for(let t=e.min;t<e.max;t++){let t=n();r(a,t),i(o(e.expr,a),t),a=t}return[r(a)]}if("name"==e.type)return[r(t,void 0,e.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let a=o(e.exprs[r],t);if(r==e.exprs.length-1)return a;i(a,t=n())}}}(r));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],i=!e.validEnd,o=[];for(let t=0;t<e.next.length;t++){let{type:n,next:a}=e.next[t];o.push(n.name),!i||n.isText||n.hasRequiredAttrs()||(i=!1),-1==r.indexOf(a)&&r.push(a)}i&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,n),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function i(o,a){let s=o.matchFragment(e,n);if(s&&(!t||s.validEnd))return rz.from(a.map((e=>e.createAndFill())));for(let e=0;e<o.next.length;e++){let{type:t,next:n}=o.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=i(n,a.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:o,next:a}=i.next[e];o.isLeaf||o.hasRequiredAttrs()||o.name in t||r.type&&!a.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map(((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let i=0;i<t.next.length;i++)r+=(i?", ":"")+t.next[i].type.name+"->"+e.indexOf(t.next[i].next);return r})).join("\n")}}Oz.empty=new Oz(!0);class Az{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Pz(e){let t=[];do{t.push(Dz(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function Dz(e){let t=[];do{t.push(Lz(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function Lz(e){let t=function(e){if(e.eat("(")){let t=Pz(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let o in n){let e=n[o];e.groups.indexOf(t)>-1&&i.push(e)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i}(e,e.next).map((t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t})));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=zz(e,t)}return t}function Rz(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function zz(e,t){let n=Rz(e),r=n;return e.eat(",")&&(r="}"!=e.next?Rz(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function jz(e,t){return t-e}function Nz(e,t){let n=[];return function t(r){let i=e[r];if(1==i.length&&!i[0].term)return t(i[0].to);n.push(r);for(let e=0;e<i.length;e++){let{term:r,to:o}=i[e];r||-1!=n.indexOf(o)||t(o)}}(t),n.sort(jz)}function Bz(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Fz(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(void 0===i){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=t.default}n[r]=i}return n}function Vz(e){let t=Object.create(null);if(e)for(let n in e)t[n]=new $z(e[n]);return t}let Uz=class e{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Vz(n.attrs),this.defaultAttrs=Bz(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Oz.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Fz(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Tz(this,this.computeAttrs(e),rz.from(t),sz.setFrom(n))}createChecked(e=null,t,n){return t=rz.from(t),this.checkContent(t),new Tz(this,this.computeAttrs(e),t,sz.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=rz.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),i=r&&r.fillBefore(rz.empty,!0);return i?new Tz(this,e,t.append(i),sz.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:sz.none:e}static compile(t,n){let r=Object.create(null);t.forEach(((t,i)=>r[t]=new e(t,n,i)));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let e in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class $z{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Zz{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=Vz(r.attrs),this.excluded=null;let i=Bz(this.attrs);this.instance=i?new sz(this,i):null}create(e=null){return!e&&this.instance?this.instance:new sz(this,Fz(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach(((e,i)=>n[e]=new Zz(e,r++,t,i))),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class Hz{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=ez.from(e.nodes),t.marks=ez.from(e.marks||{}),this.nodes=Uz.compile(this.spec.nodes,this),this.marks=Zz.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let e=this.nodes[r],t=e.spec.content||"",i=e.spec.marks;e.contentMatch=n[t]||(n[t]=Oz.parse(t,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.markSet="_"==i?null:i?Wz(this,i.split(" ")):""!=i&&e.inlineContent?null:[]}for(let r in this.marks){let e=this.marks[r],t=e.spec.excludes;e.excluded=null==t?[e]:""==t?[]:Wz(this,t.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof Uz))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new Mz(n,n.defaultAttrs,e,sz.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Tz.fromJSON(this,e)}markFromJSON(e){return sz.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Wz(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],o=e.marks[i],a=o;if(o)n.push(o);else for(let t in e.marks){let r=e.marks[t];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(a=r)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}let qz=class e{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((e=>{e.tag?this.tags.push(e):e.style&&this.styles.push(e)})),this.normalizeLists=!this.tags.some((t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}parse(e,t={}){let n=new nj(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new nj(this,t,!0);return n.addAll(e,t.from,t.to),cz.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(rj(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(!(0!=o.indexOf(e)||r.context&&!n.matchesContext(r.context)||o.length>e.length&&(61!=o.charCodeAt(e.length)||o.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let r in e.marks){let t=e.marks[r].spec.parseDOM;t&&t.forEach((e=>{n(e=ij(e)),e.mark||e.ignore||e.clearMark||(e.mark=r)}))}for(let r in e.nodes){let t=e.nodes[r].spec.parseDOM;t&&t.forEach((e=>{n(e=ij(e)),e.node||e.ignore||e.mark||(e.node=r)}))}return t}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new e(t,e.schemaRules(t)))}};const Gz={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Kz={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Yz={ol:!0,ul:!0},Xz=1,Jz=2,Qz=4;function ej(e,t,n){return null!=t?(t?Xz:0)|("full"===t?Jz:0):e&&"pre"==e.whitespace?Xz|Jz:n&~Qz}class tj{constructor(e,t,n,r,i,o,a){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=sz.none,this.stashMarks=[],this.match=o||(a&Qz?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(rz.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Xz)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=rz.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(rz.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){let r=n[t];(this.type?this.type.allowsMarkType(r.type):oj(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Gz.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class nj{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let r,i=t.topNode,o=ej(null,t.preserveWhitespace,0)|(n?Qz:0);r=i?new tj(i.type,i.attrs,sz.none,sz.none,!0,t.topMatch||i.type.contentMatch,o):new tj(n?null:e.schema.topNodeType,null,sz.none,sz.none,!0,null,o),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){3==e.nodeType?this.addTextNode(e):1==e.nodeType&&this.addElement(e)}withStyleRules(e,t){let n=e.getAttribute("style");if(!n)return t();let r=this.readStyles(function(e){let t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;t=n.exec(e);)r.push(t[1],t[2].trim());return r}(n));if(!r)return;let[i,o]=r,a=this.top;for(let s=0;s<o.length;s++)this.removePendingMark(o[s],a);for(let s=0;s<i.length;s++)this.addPendingMark(i[s]);t();for(let s=0;s<i.length;s++)this.removePendingMark(i[s],a);for(let s=0;s<o.length;s++)this.addPendingMark(o[s])}addTextNode(e){let t=e.nodeValue,n=this.top;if(n.options&Jz||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(n.options&Xz)t=n.options&Jz?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let r=n.content[n.content.length-1],i=e.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let n,r=e.nodeName.toLowerCase();Yz.hasOwnProperty(r)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&Yz.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let i=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(i?i.ignore:Kz.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(e=i.skip);let t,n=this.top,o=this.needsBlock;if(Gz.hasOwnProperty(r))n.content.length&&n.content[0].isInline&&this.open&&(this.open--,n=this.top),t=!0,n.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);i&&i.skip?this.addAll(e):this.withStyleRules(e,(()=>this.addAll(e))),t&&this.sync(n),this.needsBlock=o}else this.withStyleRules(e,(()=>{this.addElementByRule(e,i,!1===i.consuming?n:void 0)}))}leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}ignoreFallback(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=sz.none,n=sz.none;for(let r=0;r<e.length;r+=2)for(let i;;){let o=this.parser.matchStyle(e[r],e[r+1],this,i);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach((e=>{o.clearMark(e)&&(n=e.addToSet(n))})):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),!1!==o.consuming)break;i=o}return[t,n]}addElementByRule(e,t,n){let r,i,o;t.node?(i=this.parser.schema.nodes[t.node],i.isLeaf?this.insertNode(i.create(t.attrs))||this.leafFallback(e):r=this.enter(i,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((e=>this.insertNode(e)));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n)}r&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,n){let r=t||0;for(let i=t?e.childNodes[t]:e.firstChild,o=null==n?null:e.childNodes[n];i!=o;i=i.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(i);this.findAtPoint(e,r)}findPlace(e){let t,n;for(let r=this.open;r>=0;r--){let i=this.nodes[r],o=i.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=i,!o.length))break;if(i.solid)break}if(!t)return!1;this.sync(n);for(let r=0;r<t.length;r++)this.enterInner(t[r],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let r=0;r<e.marks.length;r++)t.type&&!t.type.allowsMarkType(e.marks[r].type)||(n=e.marks[r].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){let r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r}enterInner(e,t=null,n=!1,r){this.closeExtra();let i=this.top;i.applyPending(e),i.match=i.match&&i.match.matchType(e);let o=ej(e,r,i.options);i.options&Qz&&0==i.content.length&&(o|=Qz),this.nodes.push(new tj(e,t,i.activeMarks,i.pendingMarks,n,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),i=-(n?n.depth+1:0)+(r?0:1),o=(e,a)=>{for(;e>=0;e--){let s=t[e];if(""==s){if(e==t.length-1||0==e)continue;for(;a>=i;a--)if(o(e-1,a))return!0;return!1}{let e=a>0||0==a&&r?this.nodes[a].type:n&&a>=i?n.node(a-i).type:null;if(!e||e.name!=s&&-1==e.groups.indexOf(s))return!1;a--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}addPendingMark(e){let t=function(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;n>=0;n--){let r=this.nodes[n];if(r.pendingMarks.lastIndexOf(e)>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);let t=r.popFromStashMark(e);t&&r.type&&r.type.allowsMarkType(t.type)&&(r.activeMarks=t.addToSet(r.activeMarks))}if(r==t)break}}}function rj(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function ij(e){let t={};for(let n in e)t[n]=e[n];return t}function oj(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let o=[],a=e=>{o.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:i}=e.edge(n);if(r==t)return!0;if(o.indexOf(i)<0&&a(i))return!0}};if(a(i.contentMatch))return!0}}class aj{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=lj(t).createDocumentFragment());let r=n,i=[];return e.forEach((e=>{if(i.length||e.marks.length){let n=0,o=0;for(;n<i.length&&o<e.marks.length;){let t=e.marks[o];if(this.marks[t.type.name]){if(!t.eq(i[n][0])||!1===t.type.spec.spanning)break;n++,o++}else o++}for(;n<i.length;)r=i.pop()[1];for(;o<e.marks.length;){let n=e.marks[o++],a=this.serializeMark(n,e.isInline,t);a&&(i.push([n,r]),r.appendChild(a.dom),r=a.contentDOM||a.dom)}}r.appendChild(this.serializeNodeInner(e,t))})),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=aj.renderSpec(lj(t),this.nodes[e.type.name](e));if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&aj.renderSpec(lj(n),r(e,t))}static renderSpec(e,t,n=null){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let r,i=t[0],o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a=n?e.createElementNS(n,i):e.createElement(i),s=t[1],l=1;if(s&&"object"==typeof s&&null==s.nodeType&&!Array.isArray(s)){l=2;for(let e in s)if(null!=s[e]){let t=e.indexOf(" ");t>0?a.setAttributeNS(e.slice(0,t),e.slice(t+1),s[e]):a.setAttribute(e,s[e])}}for(let c=l;c<t.length;c++){let i=t[c];if(0===i){if(c<t.length-1||c>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}{let{dom:t,contentDOM:o}=aj.renderSpec(e,i,n);if(a.appendChild(t),o){if(r)throw new RangeError("Multiple content holes");r=o}}}return{dom:a,contentDOM:r}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new aj(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=sj(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return sj(e.marks)}}function sj(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function lj(e){return e.document||window.document}const cj=Math.pow(2,16);function uj(e){return 65535&e}class dj{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class hj{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&hj.empty)return hj.empty}recover(e){let t=0,n=uj(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/cj}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let s=this.ranges[a]-(this.inverted?r:0);if(s>e)break;let l=this.ranges[a+i],c=this.ranges[a+o],u=s+l;if(e<=u){let i=s+r+((l?e==s?-1:e==u?1:t:t)<0?0:c);if(n)return i;let o=e==(t<0?s:u)?null:a/3+(e-s)*cj,d=e==s?2:e==u?1:4;return(t<0?e!=s:e!=u)&&(d|=8),new dj(i,d,o)}r+=c-l}return n?e+r:new dj(e+r,0,null)}touches(e,t){let n=0,r=uj(t),i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let t=this.ranges[a]-(this.inverted?n:0);if(t>e)break;let s=this.ranges[a+i];if(e<=t+s&&a==3*r)return!0;n+=this.ranges[a+o]-s}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let o=this.ranges[r],a=o-(this.inverted?i:0),s=o+(this.inverted?0:i),l=this.ranges[r+t],c=this.ranges[r+n];e(a,a+l,s,s+c),i+=c-l}}invert(){return new hj(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?hj.empty:new hj(e<0?[0,-e,0]:[0,0,e])}}hj.empty=new hj([]);class pj{constructor(e=[],t,n=0,r=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(e=0,t=this.maps.length){return new pj(this.maps,this.mirror,e,t)}copy(){return new pj(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new pj;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let i=this.from;i<this.to;i++){let n=this.maps[i].mapResult(e,t);if(null!=n.recover){let t=this.getMirror(i);if(null!=t&&t>i&&t<this.to){i=t,e=this.maps[t].recover(n.recover);continue}}r|=n.delInfo,e=n.pos}return n?e:new dj(e,r,null)}}const fj=Object.create(null);class mj{getMap(){return hj.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=fj[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in fj)throw new RangeError("Duplicate use of step JSON ID "+e);return fj[e]=t,t.prototype.jsonID=e,t}}class gj{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new gj(e,null)}static fail(e){return new gj(null,e)}static fromReplace(e,t,n,r){try{return gj.ok(e.replace(t,n,r))}catch($A){if($A instanceof lz)return gj.fail($A.message);throw $A}}}function vj(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let o=e.child(i);o.content.size&&(o=o.copy(vj(o.content,t,o))),o.isInline&&(o=t(o,n,i)),r.push(o)}return rz.fromArray(r)}class yj extends mj{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),i=new cz(vj(t.content,((e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e),r),t.openStart,t.openEnd);return gj.fromReplace(e,this.from,this.to,i)}invert(){return new bj(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new yj(t.pos,n.pos,this.mark)}merge(e){return e instanceof yj&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new yj(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new yj(t.from,t.to,e.markFromJSON(t.mark))}}mj.jsonID("addMark",yj);class bj extends mj{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new cz(vj(t.content,(e=>e.mark(this.mark.removeFromSet(e.marks))),e),t.openStart,t.openEnd);return gj.fromReplace(e,this.from,this.to,n)}invert(){return new yj(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new bj(t.pos,n.pos,this.mark)}merge(e){return e instanceof bj&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new bj(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new bj(t.from,t.to,e.markFromJSON(t.mark))}}mj.jsonID("removeMark",bj);class xj extends mj{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return gj.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return gj.fromReplace(e,this.pos,this.pos+1,new cz(rz.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new xj(this.pos,t.marks[n]);return new xj(this.pos,this.mark)}}return new wj(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new xj(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new xj(t.pos,e.markFromJSON(t.mark))}}mj.jsonID("addNodeMark",xj);class wj extends mj{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return gj.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return gj.fromReplace(e,this.pos,this.pos+1,new cz(rz.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new xj(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new wj(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new wj(t.pos,e.markFromJSON(t.mark))}}mj.jsonID("removeNodeMark",wj);class _j extends mj{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&Ej(e,this.from,this.to)?gj.fail("Structure replace would overwrite content"):gj.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new hj([this.from,this.to-this.from,this.slice.size])}invert(e){return new _j(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new _j(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof _j)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?cz.empty:new cz(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new _j(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?cz.empty:new cz(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new _j(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new _j(t.from,t.to,cz.fromJSON(e,t.slice),!!t.structure)}}mj.jsonID("replace",_j);class kj extends mj{constructor(e,t,n,r,i,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Ej(e,this.from,this.gapFrom)||Ej(e,this.gapTo,this.to)))return gj.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return gj.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?gj.fromReplace(e,this.from,this.to,n):gj.fail("Content does not fit in gap")}getMap(){return new hj([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new kj(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||i>n.pos?null:new kj(t.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new kj(t.from,t.to,t.gapFrom,t.gapTo,cz.fromJSON(e,t.slice),t.insert,!!t.structure)}}function Ej(e,t,n){let r=e.resolve(t),i=n-t,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let e=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function Sj(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Cj(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),i=e.$from.index(n),o=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(i,o,t))return n;if(0==n||r.type.spec.isolating||!Sj(r,i,o))break}return null}function Tj(e,t,n=null,r=e){let i=function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let a=o.length?o[0]:t;return n.canReplaceWith(r,i,a)?o:null}(e,t),o=i&&function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.child(r),a=t.contentMatch.findWrapping(o.type);if(!a)return null;let s=(a.length?a[a.length-1]:t).contentMatch;for(let l=r;s&&l<i;l++)s=s.matchType(n.child(l).type);return s&&s.validEnd?a:null}(r,t);return o?i.map(Mj).concat({type:t,attrs:n}).concat(o.map(Mj)):null}function Mj(e){return{type:e,attrs:null}}function Ij(e,t,n=1,r){let i=e.resolve(t),o=i.depth-n,a=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let e=i.node(c),t=i.index(c);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),o=r&&r[u+1];o&&(n=n.replaceChild(0,o.type.create(o.attrs)));let a=r&&r[u]||e;if(!e.canReplace(t+1,e.childCount)||!a.type.validContent(n))return!1}let s=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(s,s,l?l.type:i.node(o+1).type)}function Oj(e,t){let n=e.resolve(t),r=n.index();return Aj(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Aj(e,t){return!(!e||!t||e.isLeaf||!e.canAppend(t))}function Pj(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let e,o,a=r.index(i);if(i==r.depth?(e=r.nodeBefore,o=r.nodeAfter):n>0?(e=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(e=r.node(i).maybeChild(a-1),o=r.node(i+1)),e&&!e.isTextblock&&Aj(e,o)&&r.node(i).canReplace(a,a+1))return t;if(0==i)break;t=n<0?r.before(i):r.after(i)}}function Dj(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(0==n.openStart&&n.size?2:1);o++)for(let e=r.depth;e>=0;e--){let t=e==r.depth?0:r.pos<=(r.start(e+1)+r.end(e+1))/2?-1:1,n=r.index(e)+(t>0?1:0),a=r.node(e),s=!1;if(1==o)s=a.canReplace(n,n,i);else{let e=a.contentMatchAt(n).findWrapping(i.firstChild.type);s=e&&a.canReplaceWith(n,n,e[0])}if(s)return 0==t?r.pos:t<0?r.before(e+1):r.after(e+1)}return null}function Lj(e,t,n=t,r=cz.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),o=e.resolve(n);return Rj(i,o,r)?new _j(t,n,r):new zj(i,o,r).fit()}function Rj(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}mj.jsonID("replaceAround",kj);class zj{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=rz.empty;for(let r=0;r<=e.depth;r++){let t=e.node(r);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=rz.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let i=this.placed,o=n.depth,a=r.depth;for(;o&&a&&1==i.childCount;)i=i.firstChild.content,o--,a--;let s=new cz(i,o,a);return e>-1?new kj(n.pos,e,this.$to.pos,this.$to.end(),s,t):s.size||n.pos!=this.$to.pos?new _j(n.pos,r.pos,s):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null;n?(r=Bj(this.unplaced.content,n-1).firstChild,e=r.content):e=this.unplaced.content;let i=e.firstChild;for(let o=this.depth;o>=0;o--){let e,{type:a,match:s}=this.frontier[o],l=null;if(1==t&&(i?s.matchType(i.type)||(l=s.fillBefore(rz.from(i),!1)):r&&a.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:o,parent:r,inject:l};if(2==t&&i&&(e=s.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:o,parent:r,wrap:e};if(r&&s.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=Bj(e,t);return!(!r.childCount||r.firstChild.isLeaf||(this.unplaced=new cz(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),0))}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=Bj(e,t);if(r.childCount<=1&&t>0){let i=e.size-t<=t+r.size;this.unplaced=new cz(jj(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new cz(jj(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let f=0;f<i.length;f++)this.openFrontierNode(i[f]);let o=this.unplaced,a=n?n.content:o.content,s=o.openStart-e,l=0,c=[],{match:u,type:d}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)c.push(r.child(e));u=u.matchFragment(r)}let h=a.size+e-(o.content.size-o.openEnd);for(;l<a.childCount;){let e=a.child(l),t=u.matchType(e.type);if(!t)break;l++,(l>1||0==s||e.content.size)&&(u=t,c.push(Fj(e.mark(d.allowedMarks(e.marks)),1==l?s:0,l==a.childCount?h:-1)))}let p=l==a.childCount;p||(h=-1),this.placed=Nj(this.placed,t,rz.from(c)),this.frontier[t].match=u,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let f=0,m=a;f<h;f++){let e=m.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),m=e.content}this.unplaced=p?0==e?cz.empty:new cz(jj(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new cz(jj(o.content,e,l),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!Vj(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Vj(e,t,r,n,i);if(o){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],i=Vj(e,n,r,t,!0);if(!i||i.childCount)continue e}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Nj(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Nj(this.placed,this.depth,rz.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(rz.empty,!0);e.childCount&&(this.placed=Nj(this.placed,this.frontier.length,e))}}function jj(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(jj(e.firstChild.content,t-1,n)))}function Nj(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Nj(e.lastChild.content,t-1,n)))}function Bj(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function Fj(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,Fj(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(rz.empty,!0)))),e.copy(r)}function Vj(e,t,n,r,i){let o=e.node(t),a=i?e.indexAfter(t):e.index(t);if(a==o.childCount&&!n.compatibleContent(o.type))return null;let s=r.fillBefore(o.content,!0,a);return s&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,o.content,a)?s:null}function Uj(e){return e.spec.defining||e.spec.definingForContent}function $j(e,t,n,r,i){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy($j(i.content,t+1,n,r,i)))}if(t>r){let t=i.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(rz.empty,!0))}return e}function Zj(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let i=e.start(r);if(i<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(i==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==i-1)&&n.push(r)}return n}class Hj extends mj{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return gj.fail("No node at attribute step's position");let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return gj.fromReplace(e,this.pos,this.pos+1,new cz(rz.from(r),0,t.isLeaf?0:1))}getMap(){return hj.empty}invert(e){return new Hj(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Hj(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new Hj(t.pos,t.attr,t.value)}}mj.jsonID("attr",Hj);let Wj=class extends Error{};Wj=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(Wj.prototype=Object.create(Error.prototype)).constructor=Wj,Wj.prototype.name="TransformError";class qj{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new pj}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Wj(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=cz.empty){let r=Lj(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new cz(rz.from(n),0,0))}delete(e,t){return this.replace(e,t,cz.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),o=e.doc.resolve(n);if(Rj(i,o,r))return e.step(new _j(t,n,r));let a=Zj(i,e.doc.resolve(n));0==a[a.length-1]&&a.pop();let s=-(i.depth+1);a.unshift(s);for(let h=i.depth,p=i.pos-1;h>0;h--,p--){let e=i.node(h).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;a.indexOf(h)>-1?s=h:i.before(h)==p&&a.splice(1,0,-h)}let l=a.indexOf(s),c=[],u=r.openStart;for(let h=r.content,p=0;;p++){let e=h.firstChild;if(c.push(e),p==r.openStart)break;h=e.content}for(let h=u-1;h>=0;h--){let e=c[h].type,t=Uj(e);if(t&&i.node(l).type!=e)u=h;else if(t||!e.isTextblock)break}for(let h=r.openStart;h>=0;h--){let t=(h+u+1)%(r.openStart+1),s=c[t];if(s)for(let c=0;c<a.length;c++){let u=a[(c+l)%a.length],d=!0;u<0&&(d=!1,u=-u);let h=i.node(u-1),p=i.index(u-1);if(h.canReplaceWith(p,p,s.type,s.marks))return e.replace(i.before(u),d?o.after(u):n,new cz($j(r.content,0,r.openStart,t),t,r.openEnd))}}let d=e.steps.length;for(let h=a.length-1;h>=0&&(e.replace(t,n,r),!(e.steps.length>d));h--){let e=a[h];e<0||(t=i.before(e),n=o.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let i=r.depth-1;i>=0;i--){let e=r.index(i);if(r.node(i).canReplaceWith(e,e,n))return r.before(i+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let e=r.indexAfter(i);if(r.node(i).canReplaceWith(e,e,n))return r.after(i+1);if(e<r.node(i).childCount)return null}return null}(e.doc,t,r.type);null!=i&&(t=n=i)}e.replaceRange(t,n,new cz(rz.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),o=Zj(r,i);for(let a=0;a<o.length;a++){let t=o[a],n=a==o.length-1;if(n&&0==t||r.node(t).type.contentMatch.validEnd)return e.delete(r.start(t),i.end(t));if(t>0&&(n||r.node(t-1).canReplace(r.index(t-1),i.indexAfter(t-1))))return e.delete(r.before(t),i.after(t))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(t-r.start(a)==r.depth-a&&n>r.end(a)&&i.end(a)-n!=i.depth-a)return e.delete(r.before(a),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:i,depth:o}=t,a=r.before(o+1),s=i.after(o+1),l=a,c=s,u=rz.empty,d=0;for(let f=o,m=!1;f>n;f--)m||r.index(f)>0?(m=!0,u=rz.from(r.node(f).copy(u)),d++):l--;let h=rz.empty,p=0;for(let f=o,m=!1;f>n;f--)m||i.after(f+1)<i.end(f)?(m=!0,h=rz.from(i.node(f).copy(h)),p++):c++;e.step(new kj(l,c,a,s,new cz(u.append(h),d,p),u.size-d,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){let r=new _j(t-n,t+n,cz.empty,!0);e.step(r)}(this,e,t),this}wrap(e,t){return function(e,t,n){let r=rz.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let e=n[a].type.contentMatch.matchFragment(r);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=rz.from(n[a].type.create(n[a].attrs,r))}let i=t.start,o=t.end;e.step(new kj(i,o,i,o,new cz(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,r=null){return function(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,n,((t,n)=>{if(t.isTextblock&&!t.hasMarkup(r,i)&&function(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}(e.doc,e.mapping.slice(o).map(n),r)){e.clearIncompatible(e.mapping.slice(o).map(n,1),r);let a=e.mapping.slice(o),s=a.map(n,1),l=a.map(n+t.nodeSize,1);return e.step(new kj(s,l,s+1,l-1,new cz(rz.from(r.create(i,null,t.marks)),0,0),1,!0)),!1}}))}(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r){return function(e,t,n,r,i){let o=e.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let a=n.create(r,null,i||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,a);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new kj(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new cz(rz.from(a),0,0),1,!0))}(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new Hj(e,t,n)),this}addNodeMark(e,t){return this.step(new xj(e,t)),this}removeNodeMark(e,t){if(!(t instanceof sz)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new wj(e,t)),this}split(e,t=1,n){return function(e,t,n=1,r){let i=e.doc.resolve(t),o=rz.empty,a=rz.empty;for(let s=i.depth,l=i.depth-n,c=n-1;s>l;s--,c--){o=rz.from(i.node(s).copy(o));let e=r&&r[c];a=rz.from(e?e.type.create(e.attrs,a):i.node(s).copy(a))}e.step(new _j(t,t,new cz(o.append(a),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){return function(e,t,n,r){let i,o,a=[],s=[];e.doc.nodesBetween(t,n,((e,l,c)=>{if(!e.isInline)return;let u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),d=Math.min(l+e.nodeSize,n),h=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(h)||(i&&i.to==c&&i.mark.eq(u[e])?i.to=d:a.push(i=new bj(c,d,u[e])));o&&o.to==c?o.to=d:s.push(o=new yj(c,d,r))}})),a.forEach((t=>e.step(t))),s.forEach((t=>e.step(t)))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,r){let i=[],o=0;e.doc.nodesBetween(t,n,((e,a)=>{if(!e.isInline)return;o++;let s=null;if(r instanceof Zz){let t,n=e.marks;for(;t=r.isInSet(n);)(s||(s=[])).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(s=[r]):s=e.marks;if(s&&s.length){let r=Math.min(a+e.nodeSize,n);for(let e=0;e<s.length;e++){let n,l=s[e];for(let e=0;e<i.length;e++){let t=i[e];t.step==o-1&&l.eq(i[e].style)&&(n=t)}n?(n.to=r,n.step=o):i.push({style:l,from:Math.max(a,t),to:r,step:o})}}})),i.forEach((t=>e.step(new bj(t.from,t.to,t.style))))}(this,e,t,n),this}clearIncompatible(e,t,n){return function(e,t,n,r=n.contentMatch){let i=e.doc.nodeAt(t),o=[],a=t+1;for(let s=0;s<i.childCount;s++){let t=i.child(s),l=a+t.nodeSize,c=r.matchType(t.type);if(c){r=c;for(let r=0;r<t.marks.length;r++)n.allowsMarkType(t.marks[r].type)||e.step(new bj(a,l,t.marks[r]));if(t.isText&&!n.spec.code){let e,r,i=/\r?\n|\r/g;for(;e=i.exec(t.text);)r||(r=new cz(rz.from(n.schema.text(" ",n.allowedMarks(t.marks))),0,0)),o.push(new _j(a+e.index,a+e.index+e[0].length,r))}}else o.push(new _j(a,l,cz.empty));a=l}if(!r.validEnd){let t=r.fillBefore(rz.empty,!0);e.replace(a,a,new cz(t,0,0))}for(let s=o.length-1;s>=0;s--)e.step(o[s])}(this,e,t,n),this}}const Gj=Object.create(null);class Kj{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new Yj(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=cz.empty){let n=t.content.lastChild,r=null;for(let a=0;a<t.openEnd;a++)r=n,n=n.lastChild;let i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:s,$to:l}=o[a],c=e.mapping.slice(i);e.replaceRange(c.map(s.pos),c.map(l.pos),a?cz.empty:t),0==a&&aN(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:a}=r[i],s=e.mapping.slice(n),l=s.map(o.pos),c=s.map(a.pos);i?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),aN(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new Qj(e):oN(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let i=e.depth-1;i>=0;i--){let r=t<0?oN(e.node(0),e.node(i),e.before(i+1),e.index(i),t,n):oN(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,n);if(r)return r}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new rN(e.node(0))}static atStart(e){return oN(e,e,0,0,1)||new rN(e)}static atEnd(e){return oN(e,e,e.content.size,e.childCount,-1)||new rN(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Gj[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Gj)throw new RangeError("Duplicate use of selection JSON ID "+e);return Gj[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Qj.between(this.$anchor,this.$head).getBookmark()}}Kj.prototype.visible=!0;class Yj{constructor(e,t){this.$from=e,this.$to=t}}let Xj=!1;function Jj(e){Xj||e.parent.inlineContent||(Xj=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Qj extends Kj{constructor(e,t=e){Jj(e),Jj(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return Kj.near(n);let r=e.resolve(t.map(this.anchor));return new Qj(r.parent.inlineContent?r:n,n)}replace(e,t=cz.empty){if(super.replace(e,t),t==cz.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof Qj&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new eN(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new Qj(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let e=Kj.findFrom(t,n,!0)||Kj.findFrom(t,-n,!0);if(!e)return Kj.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r||(e=(Kj.findFrom(e,-n,!0)||Kj.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0)&&(e=t),new Qj(e,t)}}Kj.jsonID("text",Qj);class eN{constructor(e,t){this.anchor=e,this.head=t}map(e){return new eN(e.map(this.anchor),e.map(this.head))}resolve(e){return Qj.between(e.resolve(this.anchor),e.resolve(this.head))}}class tN extends Kj{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),i=e.resolve(r);return n?Kj.near(i):new tN(i)}content(){return new cz(rz.from(this.node),0,0)}eq(e){return e instanceof tN&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new nN(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new tN(e.resolve(t.anchor))}static create(e,t){return new tN(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}tN.prototype.visible=!1,Kj.jsonID("node",tN);class nN{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new eN(n,n):new nN(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&tN.isSelectable(n)?new tN(t):Kj.near(t)}}class rN extends Kj{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=cz.empty){if(t==cz.empty){e.delete(0,e.doc.content.size);let t=Kj.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new rN(e)}map(e){return new rN(e)}eq(e){return e instanceof rN}getBookmark(){return iN}}Kj.jsonID("all",rN);const iN={map(){return this},resolve:e=>new rN(e)};function oN(e,t,n,r,i,o=!1){if(t.inlineContent)return Qj.create(e,n);for(let a=r-(i>0?0:1);i>0?a<t.childCount:a>=0;a+=i){let r=t.child(a);if(r.isAtom){if(!o&&tN.isSelectable(r))return tN.create(e,n-(i<0?r.nodeSize:0))}else{let t=oN(e,r,n+i,i<0?r.childCount:0,i,o);if(t)return t}n+=r.nodeSize*i}return null}function aN(e,t,n){let r=e.steps.length-1;if(r<t)return;let i,o=e.steps[r];(o instanceof _j||o instanceof kj)&&(e.mapping.maps[r].forEach(((e,t,n,r)=>{null==i&&(i=r)})),e.setSelection(Kj.near(e.doc.resolve(i),n)))}class sN extends qj{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return sz.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||sz.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(Kj.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function lN(e,t){return t&&e?e.bind(t):e}class cN{constructor(e,t,n){this.name=e,this.init=lN(t.init,n),this.apply=lN(t.apply,n)}}const uN=[new cN("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new cN("selection",{init:(e,t)=>e.selection||Kj.atStart(t.doc),apply:e=>e.selection}),new cN("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new cN("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class dN{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=uN.slice(),t&&t.forEach((e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new cN(e.key,e.spec.state,e))}))}}class hN{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let s=r?r[o].n:0,l=r?r[o].state:this,c=s<t.length&&a.spec.appendTransaction.call(a,s?t.slice(s):t,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<o?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),i=!0}r&&(r[o]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new hN(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new sN(this)}static create(e){let t=new dN(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new hN(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new dN(this.schema,e.plugins),n=t.fields,r=new hN(t);for(let i=0;i<n.length;i++){let t=n[i].name;r[t]=this.hasOwnProperty(t)?this[t]:n[i].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((e=>e.toJSON()))),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new dN(e.schema,e.plugins),i=new hN(r);return r.fields.forEach((r=>{if("doc"==r.name)i.doc=Tz.fromJSON(e.schema,t.doc);else if("selection"==r.name)i.selection=Kj.fromJSON(i.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let o in n){let a=n[o],s=a.spec.state;if(a.key==r.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(t,o))return void(i[r.name]=s.fromJSON.call(a,e,t[o],i))}i[r.name]=r.init(e,i)}})),i}}function pN(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):"handleDOMEvents"==r&&(i=pN(i,t,{})),n[r]=i}return n}class fN{constructor(e){this.spec=e,this.props={},e.props&&pN(e.props,this,this.props),this.key=e.key?e.key.key:gN("plugin")}getState(e){return e[this.key]}}const mN=Object.create(null);function gN(e){return e in mN?e+"$"+ ++mN[e]:(mN[e]=0,e+"$")}class vN{constructor(e="key"){this.key=gN(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const yN=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},bN=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let xN=null;const wN=function(e,t,n){let r=xN||(xN=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},_N=function(e,t,n,r){return n&&(EN(e,t,n,r,-1)||EN(e,t,n,r,1))},kN=/^(img|br|input|textarea|hr)$/i;function EN(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:SN(e))){let n=e.parentNode;if(!n||1!=n.nodeType||CN(e)||kN.test(e.nodeName)||"false"==e.contentEditable)return!1;t=yN(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(i<0?-1:0)]).contentEditable)return!1;t=i<0?SN(e):0}}}function SN(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function CN(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const TN=function(e){return e.focusNode&&_N(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function MN(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const IN="undefined"!=typeof navigator?navigator:null,ON="undefined"!=typeof document?document:null,AN=IN&&IN.userAgent||"",PN=/Edge\/(\d+)/.exec(AN),DN=/MSIE \d/.exec(AN),LN=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(AN),RN=!!(DN||LN||PN),zN=DN?document.documentMode:LN?+LN[1]:PN?+PN[1]:0,jN=!RN&&/gecko\/(\d+)/i.test(AN);jN&&(/Firefox\/(\d+)/.exec(AN)||[0,0])[1];const NN=!RN&&/Chrome\/(\d+)/.exec(AN),BN=!!NN,FN=NN?+NN[1]:0,VN=!RN&&!!IN&&/Apple Computer/.test(IN.vendor),UN=VN&&(/Mobile\/\w+/.test(AN)||!!IN&&IN.maxTouchPoints>2),$N=UN||!!IN&&/Mac/.test(IN.platform),ZN=!!IN&&/Win/.test(IN.platform),HN=/Android \d/.test(AN),WN=!!ON&&"webkitFontSmoothing"in ON.documentElement.style,qN=WN?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function GN(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function KN(e,t){return"number"==typeof e?e:e[t]}function YN(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function XN(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let a=n||e.dom;a;a=bN(a)){if(1!=a.nodeType)continue;let e=a,n=e==o.body,s=n?GN(o):YN(e),l=0,c=0;if(t.top<s.top+KN(r,"top")?c=-(s.top-t.top+KN(i,"top")):t.bottom>s.bottom-KN(r,"bottom")&&(c=t.bottom-t.top>s.bottom-s.top?t.top+KN(i,"top")-s.top:t.bottom-s.bottom+KN(i,"bottom")),t.left<s.left+KN(r,"left")?l=-(s.left-t.left+KN(i,"left")):t.right>s.right-KN(r,"right")&&(l=t.right-s.right+KN(i,"right")),l||c)if(n)o.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let i=e.scrollLeft-n,o=e.scrollTop-r;t={left:t.left-i,top:t.top-o,right:t.right-i,bottom:t.bottom-o}}if(n||/^(fixed|sticky)$/.test(getComputedStyle(a).position))break}}function JN(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=bN(r));return t}function QN(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:o}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let eB=null;function tB(e,t){let n,r,i,o,a=2e8,s=0,l=t.top,c=t.top;for(let u=e.firstChild,d=0;u;u=u.nextSibling,d++){let e;if(1==u.nodeType)e=u.getClientRects();else{if(3!=u.nodeType)continue;e=wN(u).getClientRects()}for(let h=0;h<e.length;h++){let p=e[h];if(p.top<=l&&p.bottom>=c){l=Math.max(p.bottom,l),c=Math.min(p.top,c);let e=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(e<a){n=u,a=e,r=e&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==u.nodeType&&e&&(s=d+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!i&&p.left<=t.left&&p.right>=t.left&&(i=u,o={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(s=d+1)}}return!n&&i&&(n=i,r=o,a=0),n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let n=aB(r,1);if(n.top!=n.bottom&&nB(t,n))return{node:e,offset:i+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||a&&1==n.nodeType?{node:e,offset:s}:tB(n,r)}function nB(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function rB(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let n=e.childNodes[o];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let i=e[r];if(nB(t,i))return rB(n,t,i)}}if((o=(o+1)%r)==i)break}return e}function iB(e,t){let n,r=e.dom.ownerDocument,i=0,o=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch(xI){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}(r,t.left,t.top);o&&({node:n,offset:i}=o);let a,s=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!s||!e.dom.contains(1!=s.nodeType?s.parentNode:s)){let n=e.dom.getBoundingClientRect();if(!nB(t,n))return null;if(s=rB(e.dom,t,n),!s)return null}if(VN)for(let c=s;n&&c;c=bN(c))c.draggable&&(n=void 0);if(s=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(s,t),n){if(jN&&1==n.nodeType&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let e,r=n.childNodes[i];"IMG"==r.nodeName&&(e=r.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&i++}n==e.dom&&i==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:0!=i&&1==n.nodeType&&"BR"==n.childNodes[i-1].nodeName||(a=function(e,t,n,r){let i=-1;for(let o=t,a=!1;o!=e.dom;){let t=e.docView.nearestDesc(o,!0);if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent&&!a||!t.contentDOM)){let e=t.dom.getBoundingClientRect();if(t.node.isBlock&&t.parent&&!a&&(a=!0,e.left>r.left||e.top>r.top?i=t.posBefore:(e.right<r.left||e.bottom<r.top)&&(i=t.posAfter)),!t.contentDOM&&i<0&&!t.node.isText)return(t.node.isBlock?r.top<(e.top+e.bottom)/2:r.left<(e.left+e.right)/2)?t.posBefore:t.posAfter}o=t.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}(e,n,i,t))}null==a&&(a=function(e,t,n){let{node:r,offset:i}=tB(t,n),o=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();o=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,i,o)}(e,s,t));let l=e.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function oB(e){return e.top<e.bottom||e.left<e.right}function aB(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(oB(e))return e}return Array.prototype.find.call(n,oB)||e.getBoundingClientRect()}const sB=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function lB(e,t,n){let{node:r,offset:i,atom:o}=e.docView.domFromPos(t,n<0?-1:1),a=WN||jN;if(3==r.nodeType){if(!a||!sB.test(r.nodeValue)&&(n<0?i:i!=r.nodeValue.length)){let e=i,t=i,o=n<0?1:-1;return n<0&&!i?(t++,o=-1):n>=0&&i==r.nodeValue.length?(e--,o=1):n<0?e--:t++,cB(aB(wN(r,e,t),o),o<0)}{let e=aB(wN(r,i,i),n);if(jN&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let t=aB(wN(r,i-1,i-1),-1);if(t.top==e.top){let n=aB(wN(r,i,i+1),-1);if(n.top!=e.top)return cB(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(null==o&&i&&(n<0||i==SN(r))){let e=r.childNodes[i-1];if(1==e.nodeType)return uB(e.getBoundingClientRect(),!1)}if(null==o&&i<SN(r)){let e=r.childNodes[i];if(1==e.nodeType)return uB(e.getBoundingClientRect(),!0)}return uB(r.getBoundingClientRect(),n>=0)}if(null==o&&i&&(n<0||i==SN(r))){let e=r.childNodes[i-1],t=3==e.nodeType?wN(e,SN(e)-(a?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return cB(aB(t,1),!1)}if(null==o&&i<SN(r)){let e=r.childNodes[i];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?wN(e,0,a?0:1):1==e.nodeType?e:null:null;if(t)return cB(aB(t,-1),!0)}return cB(aB(3==r.nodeType?wN(r):r,-n),n>=0)}function cB(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function uB(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function dB(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}const hB=/[\u0590-\u08ac]/;let pB=null,fB=null,mB=!1;function gB(e,t,n){return pB==t&&fB==n?mB:(pB=t,fB=n,mB="up"==n||"down"==n?function(e,t,n){let r=t.selection,i="up"==n?r.$from:r.$to;return dB(e,t,(()=>{let{node:t}=e.docView.domFromPos(i.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=lB(e,i.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=wN(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let i=t[e];if(i.bottom>i.top+1&&("up"==n?r.top-i.top>2*(i.bottom-r.top):i.bottom-r.bottom>2*(r.bottom-i.top)))return!1}}return!0}))}(e,t,n):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,a=i==r.parent.content.size,s=e.domSelection();return hB.test(r.parent.textContent)&&s.modify?dB(e,t,(()=>{let{focusNode:t,focusOffset:i,anchorNode:o,anchorOffset:a}=e.domSelectionRange(),l=s.caretBidiLevel;s.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:u,focusOffset:d}=e.domSelectionRange(),h=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&i==d;try{s.collapse(o,a),t&&(t!=o||i!=a)&&s.extend&&s.extend(t,i)}catch(xI){}return null!=l&&(s.caretBidiLevel=l),h})):"left"==n||"backward"==n?o:a}(e,t,n))}class vB{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=t>yN(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,r=e;r;r=r.parentNode){let i,o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==e.nodeType?e:e.parentNode):i==e))return o;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<i)return r.descAt(e-n-r.border);n=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let i=0;n<this.children.length;n++){let t=this.children[n],o=i+t.size;if(o>e||t instanceof EB){r=e-i;break}i=o}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let i;n&&!(i=this.children[n-1]).size&&i instanceof yB&&i.side>=0;n--);if(t<=0){let e,r=!0;for(;e=n?this.children[n-1]:null,e&&e.dom.parentNode!=this.contentDOM;n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?yN(e.dom)+1:0}}{let e,r=!0;for(;e=n<this.children.length?this.children[n]:null,e&&e.dom.parentNode!=this.contentDOM;n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?yN(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,i=-1;for(let o=n,a=0;;a++){let n=this.children[a],s=o+n.size;if(-1==r&&e<=s){let i=o+n.border;if(e>=i&&t<=s-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,i);e=o;for(let t=a;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=yN(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(s>t||a==this.children.length-1)){t=s;for(let e=a+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){i=yN(n.dom);break}t+=n.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=s}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,r=!1){let i=Math.min(e,t),o=Math.max(e,t);for(let d=0,h=0;d<this.children.length;d++){let a=this.children[d],s=h+a.size;if(i>h&&o<s)return a.setSelection(e-h-a.border,t-h-a.border,n,r);h=s}let a=this.domFromPos(e,e?-1:1),s=t==e?a:this.domFromPos(t,t?-1:1),l=n.getSelection(),c=!1;if((jN||VN)&&e==t){let{node:e,offset:t}=a;if(3==e.nodeType){if(c=!(!t||"\n"!=e.nodeValue[t-1]),c&&t==e.nodeValue.length)for(let n,r=e;r;r=r.parentNode){if(n=r.nextSibling){"BR"==n.nodeName&&(a=s={node:n.parentNode,offset:yN(n)+1});break}let e=r.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];c=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(jN&&l.focusNode&&l.focusNode!=s.node&&1==l.focusNode.nodeType){let e=l.focusNode.childNodes[l.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||c&&VN)&&_N(a.node,a.offset,l.anchorNode,l.anchorOffset)&&_N(s.node,s.offset,l.focusNode,l.focusOffset))return;let u=!1;if((l.extend||e==t)&&!c){l.collapse(a.node,a.offset);try{e!=t&&l.extend(s.node,s.offset),u=!0}catch(xI){}}if(!u){if(e>t){let e=a;a=s,s=e}let n=document.createRange();n.setEnd(s.node,s.offset),n.setStart(a.node,a.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){let r=n+i.border,a=o-i.border;if(e>=r&&t<=a)return this.dirty=e==n||t==o?2:1,void(e!=r||t!=a||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-r,t-r):i.dirty=3);i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?3:2}n=o}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class yB extends vB{constructor(e,t,n,r){let i,o=t.type.toDOM;if("function"==typeof o&&(o=o(n,(()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r))),!t.type.spec.raw){if(1!=o.nodeType){let e=document.createElement("span");e.appendChild(o),o=e}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class bB extends vB{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class xB extends vB{constructor(e,t,n,r){super(e,[],n,r),this.mark=t}static create(e,t,n,r){let i=r.nodeViews[t.type.name],o=i&&i(t,r,n);return o&&o.dom||(o=aj.renderSpec(document,t.type.spec.toDOM(t,n))),new xB(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=xB.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;t<o&&(i=jB(i,t,o,n)),e>0&&(i=jB(i,0,e,n));for(let a=0;a<i.length;a++)i[a].parent=r;return r.children=i,r}}class wB extends vB{constructor(e,t,n,r,i,o,a,s,l){super(e,[],i,o),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=a}static create(e,t,n,r,i,o){let a,s=i.nodeViews[t.type.name],l=s&&s(t,i,(()=>a?a.parent?a.parent.posBeforeChild(a):void 0:o),n,r),c=l&&l.dom,u=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else c||({dom:c,contentDOM:u}=aj.renderSpec(document,t.type.spec.toDOM(t)));u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return c=PB(c,n,t),l?a=new SB(e,t,n,r,c,u||null,d,l,i,o+1):t.isText?new kB(e,t,n,r,c,d,i):new wB(e,t,n,r,c,u||null,d,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>rz.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&DB(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,i=e.composing?this.localCompositionInfo(e,t):null,o=i&&i.pos>-1?i:null,a=i&&i.pos<0,s=new RB(this,o&&o.node,e);!function(e,t,n,r){let i=t.locals(e),o=0;if(0==i.length){for(let n=0;n<e.childCount;n++){let a=e.child(n);r(a,i,t.forChild(o,a),n),o+=a.nodeSize}return}let a=0,s=[],l=null;for(let c=0;;){if(a<i.length&&i[a].to==o){let e,t=i[a++];for(;a<i.length&&i[a].to==o;)(e||(e=[t])).push(i[a++]);if(e){e.sort(zB);for(let t=0;t<e.length;t++)n(e[t],c,!!l)}else n(t,c,!!l)}let u,d;if(l)d=-1,u=l,l=null;else{if(!(c<e.childCount))break;d=c,u=e.child(c++)}for(let e=0;e<s.length;e++)s[e].to<=o&&s.splice(e--,1);for(;a<i.length&&i[a].from<=o&&i[a].to>o;)s.push(i[a++]);let h=o+u.nodeSize;if(u.isText){let e=h;a<i.length&&i[a].from<e&&(e=i[a].from);for(let t=0;t<s.length;t++)s[t].to<e&&(e=s[t].to);e<h&&(l=u.cut(e-o),u=u.cut(0,e-o),h=e,d=-1)}let p=u.isInline&&!u.isLeaf?s.filter((e=>!e.inline)):s.slice();r(u,p,t.forChild(o,u),d),o=h}}(this.node,this.innerDeco,((t,i,o)=>{t.spec.marks?s.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!o&&s.syncToMarks(i==this.node.childCount?sz.none:this.node.child(i).marks,n,e),s.placeWidget(t,e,r)}),((t,o,l,c)=>{let u;s.syncToMarks(t.marks,n,e),s.findNodeMatch(t,o,l,c)||a&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(u=s.findIndexWithChild(i.node))>-1&&s.updateNodeAt(t,o,l,u,e)||s.updateNextNode(t,o,l,e,c,r)||s.addNode(t,o,l,e,r),r+=t.nodeSize})),s.syncToMarks([],n,e),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),CB(this.contentDOM,this.children,e),UN&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof Qj)||n<t||r>t+this.node.content.size)return null;let i=e.domSelectionRange(),o=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=SN(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(i.focusNode,i.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let e=o.nodeValue,i=function(e,t,n,r){for(let i=0,o=0;i<e.childCount&&o<=r;){let a=e.child(i++),s=o;if(o+=a.nodeSize,!a.isText)continue;let l=a.text;for(;i<e.childCount;){let t=e.child(i++);if(o+=t.nodeSize,!t.isText)break;l+=t.text}if(o>=n){let e=s<r?l.lastIndexOf(t,r-s-1):-1;if(e>=0&&e+t.length+s>=n)return s+e;if(n==r&&l.length>=r+t.length-s&&l.slice(r-s,r-s+t.length)==t)return r}}return-1}(this.node.content,e,n-t,r-t);return i<0?null:{node:o,pos:i,text:e}}return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:r}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new bB(this,i,t,r);e.input.compositionNodes.push(o),this.children=jB(this.children,n,n+r.length,e,o)}update(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,t,n,r),0))}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(DB(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=OB(this.dom,this.nodeDOM,IB(this.outerDeco,this.node,t),IB(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function _B(e,t,n,r,i){PB(r,t,e);let o=new wB(void 0,e,t,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class kB extends wB{constructor(e,t,n,r,i,o,a){super(e,t,n,r,i,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,0))}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),i=document.createTextNode(r.text);return new kB(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}}class EB extends vB{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class SB extends wB{constructor(e,t,n,r,i,o,a,s,l,c){super(e,t,n,r,i,o,a,l,c),this.spec=s}update(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update){let i=this.spec.update(e,t,n);return i&&this.updateInner(e,t,n,r),i}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function CB(e,t,n){let r=e.firstChild,i=!1;for(let o=0;o<t.length;o++){let a=t[o],s=a.dom;if(s.parentNode==e){for(;s!=r;)r=LB(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(s,r);if(a instanceof xB){let t=r?r.previousSibling:e.lastChild;CB(a.contentDOM,a.children,n),r=t?t.nextSibling:e.firstChild}}for(;r;)r=LB(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const TB=function(e){e&&(this.nodeName=e)};TB.prototype=Object.create(null);const MB=[new TB];function IB(e,t,n){if(0==e.length)return MB;let r=n?MB[0]:new TB,i=[r];for(let o=0;o<e.length;o++){let a=e[o].type.attrs;if(a){a.nodeName&&i.push(r=new TB(a.nodeName));for(let e in a){let o=a[e];null!=o&&(n&&1==i.length&&i.push(r=new TB(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+o:"style"==e?r.style=(r.style?r.style+";":"")+o:"nodeName"!=e&&(r[e]=o))}}}return i}function OB(e,t,n,r){if(n==MB&&r==MB)return t;let i=t;for(let o=0;o<r.length;o++){let t=r[o],a=n[o];if(o){let n;a&&a.nodeName==t.nodeName&&i!=e&&(n=i.parentNode)&&n.nodeName.toLowerCase()==t.nodeName||(n=document.createElement(t.nodeName),n.pmIsDeco=!0,n.appendChild(i),a=MB[0]),i=n}AB(i,a||MB[0],t)}return i}function AB(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==i.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<i.length;t++)-1==r.indexOf(i[t])&&e.classList.add(i[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=r.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function PB(e,t,n){return OB(e,e,MB,IB(t,n,1!=e.nodeType))}function DB(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function LB(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class RB{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,i=e.childCount,o=new Map,a=[];e:for(;i>0;){let s;for(;;)if(r){let e=n.children[r-1];if(!(e instanceof xB)){s=e,r--;break}n=e,r=e.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=s.node;if(l){if(l!=e.child(i-1))break;--i,o.set(s,i),a.push(s)}}return{index:i,matched:o,matches:a.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[i])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=xB.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,n,r){let i,o=-1;if(r>=this.preMatch.index&&(i=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&i.matchesNode(e,t,n))o=this.top.children.indexOf(i,this.index);else for(let a=this.index,s=Math.min(this.top.children.length,a+5);a<s;a++){let r=this.top.children[a];if(r.matchesNode(e,t,n)&&!this.preMatch.matched.has(r)){o=a;break}}return!(o<0||(this.destroyBetween(this.index,o),this.index++,0))}updateNodeAt(e,t,n,r,i){let o=this.top.children[r];return 3==o.dirty&&o.dom==o.contentDOM&&(o.dirty=2),!!o.update(e,t,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,r,i,o){for(let a=this.index;a<this.top.children.length;a++){let s=this.top.children[a];if(s instanceof wB){let l=this.preMatch.matched.get(s);if(null!=l&&l!=i)return!1;let c,u=s.dom,d=this.isLocked(u)&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&DB(t,s.outerDeco));if(!d&&s.update(e,t,n,r))return this.destroyBetween(this.index,a),s.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(s,e,t,n,r,o)))return this.top.children[this.index]=c,c.dirty=2,c.updateChildren(r,o+1),c.dirty=0,this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,i,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let a=wB.create(this.top,t,n,r,i,o);if(!a.contentDOM)return null;a.children=e.children,e.children=[],e.destroy();for(let s of a.children)s.parent=a;return a}addNode(e,t,n,r,i){let o=wB.create(this.top,e,t,n,r,i);o.contentDOM&&o.updateChildren(r,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let r=new yB(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof xB;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof kB)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((VN||BN)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new EB(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function zB(e,t){return e.type.side-t.type.side}function jB(e,t,n,r,i){let o=[];for(let a=0,s=0;a<e.length;a++){let l=e[a],c=s,u=s+=l.size;c>=n||u<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function NB(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),o=i&&0==i.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let s,l,c=r.resolve(a);if(TN(n)){for(s=c;i&&!i.node;)i=i.parent;let e=i.node;if(i&&e.isAtom&&tN.isSelectable(e)&&i.parent&&(!e.isInline||!function(e,t,n){for(let r=0==t,i=t==SN(e);r||i;){if(e==n)return!0;let t=yN(e);if(!(e=e.parentNode))return!1;r=r&&0==t,i=i&&t==SN(e)}}(n.focusNode,n.focusOffset,i.dom))){let e=i.posBefore;l=new tN(a==e?c:r.resolve(e))}}else{let t=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(t<0)return null;s=r.resolve(t)}return l||(l=qB(e,s,c,"pointer"==t||e.state.selection.head<c.pos&&!o?1:-1)),l}function BB(e){return e.editable?e.hasFocus():KB(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function FB(e,t=!1){let n=e.state.selection;if(HB(e,n),BB(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&BN){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&_N(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange(),r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,yN(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&RN&&zN<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{let r,i,{anchor:o,head:a}=n;!VB||n instanceof Qj||(n.$from.parent.inlineContent||(r=UB(e,n.from)),n.empty||n.$from.parent.inlineContent||(i=UB(e,n.to))),e.docView.setSelection(o,a,e.root,t),VB&&(r&&ZB(r),i&&ZB(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==i||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((()=>{BB(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const VB=VN||BN&&FN<63;function UB(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(VN&&i&&"false"==i.contentEditable)return $B(i);if(!(i&&"false"!=i.contentEditable||o&&"false"!=o.contentEditable)){if(i)return $B(i);if(o)return $B(o)}}function $B(e){return e.contentEditable="true",VN&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function ZB(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function HB(e,t){if(t instanceof tN){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(WB(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else WB(e)}function WB(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function qB(e,t,n,r){return e.someProp("createSelectionBetween",(r=>r(e,t,n)))||Qj.between(t,n,r)}function GB(e){return!(e.editable&&!e.hasFocus())&&KB(e)}function KB(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(xI){return!1}}function YB(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return o&&Kj.findFrom(o,t)}function XB(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function JB(e,t,n){let r=e.state.selection;if(!(r instanceof Qj)){if(r instanceof tN&&r.node.isInline)return XB(e,new Qj(t>0?r.$to:r.$from));{let n=YB(e.state,t);return!!n&&XB(e,n)}}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=YB(e.state,t);return!!(n&&n instanceof tN)&&XB(e,n)}if(!($N&&n.indexOf("m")>-1)){let n,i=r.$head,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText)return!1;let a=t<0?i.pos-o.nodeSize:i.pos;return!!(o.isAtom||(n=e.docView.descAt(a))&&!n.contentDOM)&&(tN.isSelectable(o)?XB(e,new tN(t<0?e.state.doc.resolve(i.pos-o.nodeSize):i)):!!WN&&XB(e,new Qj(e.state.doc.resolve(t<0?a:a+o.nodeSize))))}}function QB(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function eF(e){if("false"==e.contentEditable)return!0;let t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function tF(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,a=!1;for(jN&&1==n.nodeType&&r<QB(n)&&eF(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(eF(e))i=n,o=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(rF(n))break;{let t=n.previousSibling;for(;t&&eF(t);)i=n.parentNode,o=yN(t),t=t.previousSibling;if(t)n=t,r=QB(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}a?iF(e,n,r):i&&iF(e,i,o)}(e):nF(e)}function nF(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,a=QB(n);for(;;)if(r<a){if(1!=n.nodeType)break;if(!eF(n.childNodes[r]))break;i=n,o=++r}else{if(rF(n))break;{let t=n.nextSibling;for(;t&&eF(t);)i=t.parentNode,o=yN(t)+1,t=t.nextSibling;if(t)n=t,r=0,a=QB(n);else{if(n=n.parentNode,n==e.dom)break;r=a=0}}}i&&iF(e,i,o)}function rF(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function iF(e,t,n){if(3!=t.nodeType){let e,r;(r=function(e,t){for(;e&&t==e.childNodes.length&&!CN(e);)t=yN(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){if(3==(e=e.childNodes[t]).nodeType)return e;t=0}}(t,n))?(t=r,n=0):(e=function(e,t){for(;e&&!t&&!CN(e);)t=yN(e),e=e.parentNode;for(;e&&t;){if(3==(e=e.childNodes[t-1]).nodeType)return e;t=e.childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(TN(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout((()=>{e.state==i&&FB(e)}),50)}function oF(e,t){let n=e.state.doc.resolve(t);if(!BN&&!ZN&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function aF(e,t,n){let r=e.state.selection;if(r instanceof Qj&&!r.empty||n.indexOf("s")>-1)return!1;if($N&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=YB(e.state,t);if(n&&n instanceof tN)return XB(e,n)}if(!i.parent.inlineContent){let n=t<0?i:o,a=r instanceof rN?Kj.near(n,t):Kj.findFrom(n,t);return!!a&&XB(e,a)}return!1}function sF(e,t){if(!(e.state.selection instanceof Qj))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let r=e.state.tr;return t<0?r.delete(n.pos-o.nodeSize,n.pos):r.delete(n.pos,n.pos+o.nodeSize),e.dispatch(r),!0}return!1}function lF(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function cF(e,t){let n=t.keyCode,r=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||$N&&72==n&&"c"==r)return sF(e,-1)||tF(e,-1);if(46==n&&!t.shiftKey||$N&&68==n&&"c"==r)return sF(e,1)||tF(e,1);if(13==n||27==n)return!0;if(37==n||$N&&66==n&&"c"==r){let t=37==n?"ltr"==oF(e,e.state.selection.from)?-1:1:-1;return JB(e,t,r)||tF(e,t)}if(39==n||$N&&70==n&&"c"==r){let t=39==n?"ltr"==oF(e,e.state.selection.from)?1:-1:1;return JB(e,t,r)||tF(e,t)}return 38==n||$N&&80==n&&"c"==r?aF(e,-1,r)||tF(e,-1):40==n||$N&&78==n&&"c"==r?function(e){if(!VN||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;lF(e,n,"true"),setTimeout((()=>lF(e,n,"false")),20)}return!1}(e)||aF(e,1,r)||nF(e):r==($N?"m":"c")&&(66==n||73==n||89==n||90==n)}function uF(e,t){e.someProp("transformCopied",(n=>{t=n(t,e)}));let n=[],{content:r,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,o--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let a=e.someProp("clipboardSerializer")||aj.fromSchema(e.state.schema),s=xF(),l=s.createElement("div");l.appendChild(a.serializeFragment(r,{document:s}));let c,u=l.firstChild,d=0;for(;u&&1==u.nodeType&&(c=yF[u.nodeName.toLowerCase()]);){for(let e=c.length-1;e>=0;e--){let t=s.createElement(c[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),d++}u=l.firstChild}u&&1==u.nodeType&&u.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=e.someProp("clipboardTextSerializer",(n=>n(t,e)))||t.content.textBetween(0,t.content.size,"\n\n");return{dom:l,text:h}}function dF(e,t,n,r,i){let o,a,s=i.parent.type.spec.code;if(!n&&!t)return null;let l=t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",(n=>{t=n(t,s||r,e)})),s)return t?new cz(rz.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):cz.empty;let n=e.someProp("clipboardTextParser",(n=>n(t,i,r,e)));if(n)a=n;else{let n=i.marks(),{schema:r}=e.state,a=aj.fromSchema(r);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((e=>{let t=o.appendChild(document.createElement("p"));e&&t.appendChild(a.serializeNode(r.text(e,n)))}))}}else e.someProp("transformPastedHTML",(t=>{n=t(n,e)})),o=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=xF().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(e);if((n=i&&yF[i[1].toLowerCase()])&&(e=n.map((e=>"<"+e+">")).join("")+e+n.map((e=>"</"+e+">")).reverse().join("")),r.innerHTML=e,n)for(let o=0;o<n.length;o++)r=r.querySelector(n[o])||r;return r}(n),WN&&function(e){let t=e.querySelectorAll(BN?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&""==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let e=o.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;o=e}if(!a){let t=e.someProp("clipboardParser")||e.someProp("domParser")||qz.fromSchema(e.state.schema);a=t.parseSlice(o,{preserveWhitespace:!(!l&&!u),context:i,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||hF.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(u)a=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch($A){return e}let{content:i,openStart:o,openEnd:a}=e;for(let s=n.length-2;s>=0;s-=2){let e=r.nodes[n[s]];if(!e||e.hasRequiredAttrs())break;i=rz.from(e.create(n[s+1],i)),o++,a++}return new cz(i,o,a)}(vF(a,+u[1],+u[2]),u[4]);else if(a=cz.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,i=t.node(n).contentMatchAt(t.index(n)),o=[];if(e.forEach((e=>{if(!o)return;let t,n=i.findWrapping(e.type);if(!n)return o=null;if(t=o.length&&r.length&&fF(n,r,e,o[o.length-1],0))o[o.length-1]=t;else{o.length&&(o[o.length-1]=mF(o[o.length-1],r.length));let t=pF(e,n);o.push(t),i=i.matchType(t.type),r=n}})),o)return rz.from(o)}return e}(a.content,i),!0),a.openStart||a.openEnd){let e=0,t=0;for(let n=a.content.firstChild;e<a.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=a.content.lastChild;t<a.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);a=vF(a,e,t)}return e.someProp("transformPasted",(t=>{a=t(a,e)})),a}const hF=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function pF(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,rz.from(e));return e}function fF(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let o=fF(e,t,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(rz.from(pF(n,e,i+1))))}}function mF(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,mF(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(rz.empty,!0);return e.copy(n.append(r))}function gF(e,t,n,r,i,o){let a=t<0?e.firstChild:e.lastChild,s=a.content;return e.childCount>1&&(o=0),i<r-1&&(s=gF(s,t,n,r,i+1,o)),i>=n&&(s=t<0?a.contentMatchAt(0).fillBefore(s,o<=i).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(rz.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(s))}function vF(e,t,n){return t<e.openStart&&(e=new cz(gF(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new cz(gF(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const yF={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let bF=null;function xF(){return bF||(bF=document.implementation.createHTMLDocument("title"))}const wF={},_F={},kF={touchstart:!0,touchmove:!0};class EF{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function SF(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function CF(e){e.someProp("handleDOMEvents",(t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>TF(e,t))}))}function TF(e,t){return e.someProp("handleDOMEvents",(n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function MF(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function IF(e){return{left:e.clientX,top:e.clientY}}function OF(e,t,n,r,i){if(-1==r)return!1;let o=e.state.doc.resolve(r);for(let a=o.depth+1;a>0;a--)if(e.someProp(t,(t=>a>o.depth?t(e,n,o.nodeAfter,o.before(a),i,!0):t(e,n,o.node(a),o.before(a),i,!1))))return!0;return!1}function AF(e,t,n){e.focused||e.focus();let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function PF(e,t,n,r,i){return OF(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(n=>n(e,t,r)))||(i?function(e,t){if(-1==t)return!1;let n,r,i=e.state.selection;i instanceof tN&&(n=i.node);let o=e.state.doc.resolve(t);for(let a=o.depth+1;a>0;a--){let e=a>o.depth?o.nodeAfter:o.node(a);if(tN.isSelectable(e)){r=n&&i.$from.depth>0&&a>=i.$from.depth&&o.before(i.$from.depth+1)==i.$from.pos?o.before(i.$from.depth):o.before(a);break}}return null!=r&&(AF(e,tN.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&tN.isSelectable(r))&&(AF(e,new tN(n),"pointer"),!0)}(e,n))}function DF(e,t,n,r){return OF(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(n=>n(e,t,r)))}function LF(e,t,n,r){return OF(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(n=>n(e,t,r)))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(AF(e,Qj.create(r,0,r.content.size),"pointer"),!0);let i=r.resolve(t);for(let o=i.depth+1;o>0;o--){let t=o>i.depth?i.nodeAfter:i.node(o),n=i.before(o);if(t.inlineContent)AF(e,Qj.create(r,n+1,n+1+t.content.size),"pointer");else{if(!tN.isSelectable(t))continue;AF(e,tN.create(r,n),"pointer")}return!0}}(e,n,r)}function RF(e){return UF(e)}_F.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!NF(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!HN||!BN||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!UN||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(t=>t(e,n)))||cF(e,n)?n.preventDefault():SF(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",(t=>t(e,MN(13,"Enter")))),e.input.lastIOSEnter=0)}),200)}},_F.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},_F.keypress=(e,t)=>{let n=t;if(NF(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||$N&&n.metaKey)return;if(e.someProp("handleKeyPress",(t=>t(e,n))))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof Qj&&r.$from.sameParent(r.$to))){let t=String.fromCharCode(n.charCode);/[\r\n]/.test(t)||e.someProp("handleTextInput",(n=>n(e,r.$from.pos,r.$to.pos,t)))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};const zF=$N?"metaKey":"ctrlKey";wF.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=RF(e),i=Date.now(),o="singleClick";i-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[zF]&&("singleClick"==e.input.lastClick.type?o="doubleClick":"doubleClick"==e.input.lastClick.type&&(o="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let a=e.posAtCoords(IF(n));a&&("singleClick"==o?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new jF(e,a,n,!!r)):("doubleClick"==o?DF:LF)(e,a.pos,a.inside,n)?n.preventDefault():SF(e,"pointer"))};class jF{constructor(e,t,n,r){let i,o;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[zF],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),o=t.inside;else{let n=e.state.doc.resolve(t.pos);i=n.parent,o=n.depth?n.before():0}const a=r?null:n.target,s=a?e.docView.nearestDesc(a,!0):null;this.target=s?s.dom:null;let{selection:l}=e.state;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||l instanceof tN&&l.from<=o&&l.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!jN||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),SF(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>FB(this.view))),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(IF(e))),this.updateAllowDefault(e),this.allowDefault||!t?SF(this.view,"pointer"):PF(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||VN&&this.mightDrag&&!this.mightDrag.node.isAtom||BN&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(AF(this.view,Kj.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):SF(this.view,"pointer")}move(e){this.updateAllowDefault(e),SF(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function NF(e,t){return!!e.composing||!!(VN&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}wF.touchstart=e=>{e.input.lastTouch=Date.now(),RF(e),SF(e,"pointer")},wF.touchmove=e=>{e.input.lastTouch=Date.now(),SF(e,"pointer")},wF.contextmenu=e=>RF(e);const BF=HN?5e3:-1;function FF(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((()=>UF(e)),t))}function VF(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function UF(e,t=!1){if(!(HN&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),VF(e),t||e.docView&&e.docView.dirty){let t=NB(e);return t&&!t.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(t)):e.updateState(e.state),!0}return!1}}_F.compositionstart=_F.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((e=>!1===e.type.spec.inclusive))))e.markCursor=e.state.storedMarks||n.marks(),UF(e,!0),e.markCursor=null;else if(UF(e),jN&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){e.domSelection().collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}FF(e,BF)},_F.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionPendingChanges&&Promise.resolve().then((()=>e.domObserver.flush())),e.input.compositionID++,FF(e,20))};const $F=RN&&zN<15||UN&&qN<604;function ZF(e,t,n,r,i){let o=dF(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",(t=>t(e,i,o||cz.empty))))return!0;if(!o)return!1;let a=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(o),s=a?e.state.tr.replaceSelectionWith(a,r):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}wF.copy=_F.cut=(e,t)=>{let n=t,r=e.state.selection,i="cut"==n.type;if(r.empty)return;let o=$F?null:n.clipboardData,a=r.content(),{dom:s,text:l}=uF(e,a);o?(n.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}(e,s),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},_F.paste=(e,t)=>{let n=t;if(e.composing&&!HN)return;let r=$F?null:n.clipboardData,i=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&ZF(e,r.getData("text/plain"),r.getData("text/html"),i,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout((()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ZF(e,r.value,null,i,t):ZF(e,r.textContent,r.innerHTML,i,t)}),50)}(e,n)};class HF{constructor(e,t){this.slice=e,this.move=t}}const WF=$N?"altKey":"ctrlKey";wF.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,o=i.empty?null:e.posAtCoords(IF(n));if(o&&o.pos>=i.from&&o.pos<=(i instanceof tN?i.to-1:i.to));else if(r&&r.mightDrag)e.dispatch(e.state.tr.setSelection(tN.create(e.state.doc,r.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&e.dispatch(e.state.tr.setSelection(tN.create(e.state.doc,t.posBefore)))}let a=e.state.selection.content(),{dom:s,text:l}=uF(e,a);n.dataTransfer.clearData(),n.dataTransfer.setData($F?"Text":"text/html",s.innerHTML),n.dataTransfer.effectAllowed="copyMove",$F||n.dataTransfer.setData("text/plain",l),e.dragging=new HF(a,!n[WF])},wF.dragend=e=>{let t=e.dragging;window.setTimeout((()=>{e.dragging==t&&(e.dragging=null)}),50)},_F.dragover=_F.dragenter=(e,t)=>t.preventDefault(),_F.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(IF(n));if(!i)return;let o=e.state.doc.resolve(i.pos),a=r&&r.slice;a?e.someProp("transformPasted",(t=>{a=t(a,e)})):a=dF(e,n.dataTransfer.getData($F?"Text":"text/plain"),$F?null:n.dataTransfer.getData("text/html"),!1,o);let s=!(!r||n[WF]);if(e.someProp("handleDrop",(t=>t(e,n,a||cz.empty,s))))return void n.preventDefault();if(!a)return;n.preventDefault();let l=a?Dj(e.state.doc,o.pos,a):o.pos;null==l&&(l=o.pos);let c=e.state.tr;s&&c.deleteSelection();let u=c.mapping.map(l),d=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,h=c.doc;if(d?c.replaceRangeWith(u,u,a.content.firstChild):c.replaceRange(u,u,a),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&tN.isSelectable(a.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(a.content.firstChild))c.setSelection(new tN(p));else{let t=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach(((e,n,r,i)=>t=i)),c.setSelection(qB(e,p,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},wF.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&FB(e)}),20))},wF.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},wF.beforeinput=(e,t)=>{if(BN&&HN&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout((()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",(t=>t(e,MN(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let e in _F)wF[e]=_F[e];function qF(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class GF{constructor(e,t){this.toDOM=e,this.spec=t||QF,this.side=this.spec.side||0}map(e,t,n,r){let{pos:i,deleted:o}=e.mapResult(t.from+r,this.side<0?-1:1);return o?null:new XF(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof GF&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&qF(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class KF{constructor(e,t){this.attrs=e,this.spec=t||QF}map(e,t,n,r){let i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new XF(i,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof KF&&qF(this.attrs,e.attrs)&&qF(this.spec,e.spec)}static is(e){return e.type instanceof KF}destroy(){}}class YF{constructor(e,t){this.attrs=e,this.spec=t||QF}map(e,t,n,r){let i=e.mapResult(t.from+r,1);if(i.deleted)return null;let o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new XF(i.pos-n,o.pos-n,this)}valid(e,t){let n,{index:r,offset:i}=e.content.findIndex(t.from);return i==t.from&&!(n=e.child(r)).isText&&i+n.nodeSize==t.to}eq(e){return this==e||e instanceof YF&&qF(this.attrs,e.attrs)&&qF(this.spec,e.spec)}destroy(){}}class XF{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new XF(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new XF(e,e,new GF(t,n))}static inline(e,t,n,r){return new XF(e,t,new KF(n,r))}static node(e,t,n,r){return new XF(e,t,new YF(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof KF}}const JF=[],QF={};class eV{constructor(e,t){this.local=e.length?e:JF,this.children=t.length?t:JF}static create(e,t){return t.length?aV(t,e,0,QF):tV}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,i){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!i||i(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,n,r+a,i)}}map(e,t,n){return this==tV||0==e.maps.length?this:this.mapInner(e,t,0,0,n||QF)}mapInner(e,t,n,r,i){let o;for(let a=0;a<this.local.length;a++){let s=this.local[a].map(e,n,r);s&&s.type.valid(t,s)?(o||(o=[])).push(s):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?function(e,t,n,r,i,o,a){let s=e.slice();for(let c=0,u=o;c<n.maps.length;c++){let e=0;n.maps[c].forEach(((t,n,r,o)=>{let a=o-r-(n-t);for(let l=0;l<s.length;l+=3){let o=s[l+1];if(o<0||t>o+u-e)continue;let c=s[l]+u-e;n>=c?s[l+1]=t<=c?-2:-1:r>=i&&a&&(s[l]+=a,s[l+1]+=a)}e+=a})),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<s.length;c+=3)if(s[c+1]<0){if(-2==s[c+1]){l=!0,s[c+1]=-1;continue}let t=n.map(e[c]+o),u=t-i;if(u<0||u>=r.content.size){l=!0;continue}let d=n.map(e[c+1]+o,-1)-i,{index:h,offset:p}=r.content.findIndex(u),f=r.maybeChild(h);if(f&&p==u&&p+f.nodeSize==d){let r=s[c+2].mapInner(n,f,t+1,e[c]+o+1,a);r!=tV?(s[c]=u,s[c+1]=d,s[c+2]=r):(s[c+1]=-2,l=!0)}else l=!0}if(l){let l=function(e,t,n,r,i,o,a){function s(e,t){for(let o=0;o<e.local.length;o++){let s=e.local[o].map(r,i,t);s?n.push(s):a.onRemove&&a.onRemove(e.local[o].spec)}for(let n=0;n<e.children.length;n+=3)s(e.children[n+2],e.children[n]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&s(e[l+2],t[l]+o+1);return n}(s,e,t,n,i,o,a),c=aV(l,r,0,a);t=c.local;for(let e=0;e<s.length;e+=3)s[e+1]<0&&(s.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];for(;t<s.length&&s[t]<n;)t+=3;s.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new eV(t.sort(sV),s)}(this.children,o||[],e,t,n,r,i):o?new eV(o.sort(sV),JF):tV}add(e,t){return t.length?this==tV?eV.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,i=0;e.forEach(((e,o)=>{let a,s=o+n;if(a=iV(t,e,s)){for(r||(r=this.children.slice());i<r.length&&r[i]<o;)i+=3;r[i]==o?r[i+2]=r[i+2].addInner(e,a,s+1):r.splice(i,0,o,o+e.nodeSize,aV(a,e,s+1,QF)),i+=3}}));let o=rV(i?oV(t):t,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new eV(o.length?this.local.concat(o).sort(sV):this.local,r||this.children)}remove(e){return 0==e.length||this==tV?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let i=0;i<n.length;i+=3){let r,o=n[i]+t,a=n[i+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>o&&t.to<a&&(e[n]=null,(r||(r=[])).push(t));if(!r)continue;n==this.children&&(n=this.children.slice());let s=n[i+2].removeInner(r,o+1);s!=tV?n[i+2]=s:(n.splice(i,3),i-=3)}if(r.length)for(let i,o=0;o<e.length;o++)if(i=e[o])for(let e=0;e<r.length;e++)r[e].eq(i,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new eV(r,n):tV}forChild(e,t){if(this==tV)return this;if(t.isLeaf)return eV.empty;let n,r;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let i=e+1,o=i+t.content.size;for(let a=0;a<this.local.length;a++){let e=this.local[a];if(e.from<o&&e.to>i&&e.type instanceof KF){let t=Math.max(i,e.from)-i,n=Math.min(o,e.to)-i;t<n&&(r||(r=[])).push(e.copy(t,n))}}if(r){let e=new eV(r.sort(sV),JF);return n?new nV([e,n]):e}return n||tV}eq(e){if(this==e)return!0;if(!(e instanceof eV)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return lV(this.localsInner(e))}localsInner(e){if(this==tV)return JF;if(e.inlineContent||!this.local.some(KF.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof KF||t.push(this.local[n]);return t}}eV.empty=new eV([],[]),eV.removeOverlap=lV;const tV=eV.empty;class nV{constructor(e){this.members=e}map(e,t){const n=this.members.map((n=>n.map(e,t,QF)));return nV.from(n)}forChild(e,t){if(t.isLeaf)return eV.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(e,t);i!=tV&&(i instanceof nV?n=n.concat(i.members):n.push(i))}return nV.from(n)}eq(e){if(!(e instanceof nV)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<i.length;e++)t.push(i[e])}else t=i}return t?lV(n?t:t.sort(sV)):JF}static from(e){switch(e.length){case 0:return tV;case 1:return e[0];default:return new nV(e.every((e=>e instanceof eV))?e:e.reduce(((e,t)=>e.concat(t instanceof eV?t:t.members)),[]))}}}function rV(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new XF(i.from+t,i.to+t,i.type))}return n}function iV(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let o,a=0;a<e.length;a++)(o=e[a])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[a]=null);return i}function oV(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function aV(e,t,n,r){let i=[],o=!1;t.forEach(((t,a)=>{let s=iV(e,t,a+n);if(s){o=!0;let e=aV(s,t,n+a+1,r);e!=tV&&i.push(a,a+t.nodeSize,e)}}));let a=rV(o?oV(e):e,-n).sort(sV);for(let s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||i.length?new eV(a,i):tV}function sV(e,t){return e.from-t.from||e.to-t.to}function lV(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let o=t[i];if(o.from!=r.from){o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),cV(t,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),cV(t,i+1,o.copy(r.to,o.to)))}}return t}function cV(e,t,n){for(;t<e.length&&sV(n,e[t])>0;)t++;e.splice(t,0,n)}function uV(e){let t=[];return e.someProp("decorations",(n=>{let r=n(e.state);r&&r!=tV&&t.push(r)})),e.cursorWrapper&&t.push(eV.create(e.state.doc,[e.cursorWrapper.deco])),nV.from(t)}const dV={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},hV=RN&&zN<=11;class pV{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class fV{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new pV,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);RN&&zN<=11&&e.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),hV&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,dV)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(GB(this.view)){if(this.suppressingSelectionUpdates)return FB(this.view);if(RN&&zN<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&_N(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let i=e.focusNode;i;i=bN(i))n.add(i);for(let i=e.anchorNode;i;i=bN(i))if(n.has(i)){t=i;break}let r=t&&this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&GB(e)&&!this.ignoreSelectionChange(n),i=-1,o=-1,a=!1,s=[];if(e.editable)for(let c=0;c<t.length;c++){let e=this.registerMutation(t[c],s);e&&(i=i<0?e.from:Math.min(e.from,i),o=o<0?e.to:Math.max(e.to,o),e.typeOver&&(a=!0))}if(jN&&s.length>1){let e=s.filter((e=>"BR"==e.nodeName));if(2==e.length){let t=e[0],n=e[1];t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}}let l=null;i<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&TN(n)&&(l=NB(e))&&l.eq(Kj.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,FB(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||r)&&(i>-1&&(e.docView.markDirty(i,o),function(e){if(!mV.has(e)&&(mV.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))){if(e.requiresGeckoHackNode=jN,gV)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),gV=!0}}(e)),this.handleDOMChange(i,o,a,s),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||FB(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++)t.push(e.addedNodes[n]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,i=e.nextSibling;if(RN&&zN<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:o}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(r=n),(!o||Array.prototype.indexOf.call(e.addedNodes,o)<0)&&(i=o)}let o=r&&r.parentNode==e.target?yN(r)+1:0,a=n.localPosFromDOM(e.target,o,-1),s=i&&i.parentNode==e.target?yN(i):e.target.childNodes.length;return{from:a,to:n.localPosFromDOM(e.target,s,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let mV=new WeakMap,gV=!1;function vV(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(VN&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||VN&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const yV=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function bV(e,t,n,r,i){let o=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=NB(e,t);if(n&&!e.state.selection.eq(n)){if(BN&&HN&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",(t=>t(e,MN(13,"Enter")))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),o&&r.setMeta("composition",o),e.dispatch(r)}return}let a=e.state.doc.resolve(t),s=a.sharedDepth(n);t=a.before(s+1),n=e.state.doc.resolve(n).after(s+1);let l,c,u=e.state.selection,d=function(e,t,n){let r,{node:i,fromOffset:o,toOffset:a,from:s,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),u=c.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(r=[{node:u,offset:c.anchorOffset}],TN(c)||r.push({node:c.focusNode,offset:c.focusOffset})),BN&&8===e.input.lastKeyCode)for(let g=a;g>o;g--){let e=i.childNodes[g-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){a=g;break}if(!t||t.size)break}let d=e.state.doc,h=e.someProp("domParser")||qz.fromSchema(e.state.schema),p=d.resolve(s),f=null,m=h.parse(i,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:a,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:vV,context:p});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),f={anchor:e+s,head:t+s}}return{doc:m,sel:f,from:s,to:l}}(e,t,n),h=e.state.doc,p=h.slice(d.from,d.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(l=e.state.selection.to,c="end"):(l=e.state.selection.from,c="start"),e.input.lastKeyCode=null;let f=function(e,t,n,r,i){let o=e.findDiffStart(t,n);if(null==o)return null;let{a:a,b:s}=e.findDiffEnd(t,n+e.size,n+t.size);return"end"==i&&(r-=a+Math.max(0,o-Math.min(a,s))-o),a<o&&e.size<t.size?(o-=r<=o&&r>=a?o-r:0,s=o+(s-a),a=o):s<o&&(o-=r<=o&&r>=s?o-r:0,a=o+(a-s),s=o),{start:o,endA:a,endB:s}}(p.content,d.doc.content,d.from,l,c);if((UN&&e.input.lastIOSEnter>Date.now()-225||HN)&&i.some((e=>1==e.nodeType&&!yV.test(e.nodeName)))&&(!f||f.endA>=f.endB)&&e.someProp("handleKeyDown",(t=>t(e,MN(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(!f){if(!(r&&u instanceof Qj&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let t=xV(e,e.state.doc,d.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);o&&n.setMeta("composition",o),e.dispatch(n)}}return}f={start:u.from,endA:u.to,endB:u.to}}if(BN&&e.cursorWrapper&&d.sel&&d.sel.anchor==e.cursorWrapper.deco.from&&d.sel.head==d.sel.anchor){let e=f.endB-f.start;d.sel={anchor:d.sel.anchor+e,head:d.sel.anchor+e}}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&f.start==f.endB&&e.state.selection instanceof Qj&&(f.start>e.state.selection.from&&f.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?f.start=e.state.selection.from:f.endA<e.state.selection.to&&f.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(f.endB+=e.state.selection.to-f.endA,f.endA=e.state.selection.to)),RN&&zN<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>d.from&&" "==d.doc.textBetween(f.start-d.from-1,f.start-d.from+1)&&(f.start--,f.endA--,f.endB--);let m,g=d.doc.resolveNoCache(f.start-d.from),v=d.doc.resolveNoCache(f.endB-d.from),y=h.resolve(f.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=f.endA;if((UN&&e.input.lastIOSEnter>Date.now()-225&&(!b||i.some((e=>"DIV"==e.nodeName||"P"==e.nodeName)))||!b&&g.pos<d.doc.content.size&&!g.sameParent(v)&&(m=Kj.findFrom(d.doc.resolve(g.pos+1),1,!0))&&m.head==v.pos)&&e.someProp("handleKeyDown",(t=>t(e,MN(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>f.start&&function(e,t,n,r,i){if(!r.parent.isTextblock||n-t<=i.pos-r.pos||wV(r,!0,!1)<i.pos)return!1;let o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let a=e.resolve(wV(o,!0,!0));return!(!a.parent.isTextblock||a.pos>n||wV(a,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(a.parent.content)}(h,f.start,f.endA,g,v)&&e.someProp("handleKeyDown",(t=>t(e,MN(8,"Backspace")))))return void(HN&&BN&&e.domObserver.suppressSelectionUpdates());BN&&HN&&f.endB==f.start&&(e.input.lastAndroidDelete=Date.now()),HN&&!b&&g.start()!=v.start()&&0==v.parentOffset&&g.depth==v.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==f.endA&&(f.endB-=2,v=d.doc.resolveNoCache(f.endB-d.from),setTimeout((()=>{e.someProp("handleKeyDown",(function(t){return t(e,MN(13,"Enter"))}))}),20));let x,w,_,k=f.start,E=f.endA;if(b)if(g.pos==v.pos)RN&&zN<=11&&0==g.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((()=>FB(e)),20)),x=e.state.tr.delete(k,E),w=h.resolve(f.start).marksAcross(h.resolve(f.endA));else if(f.endA==f.endB&&(_=function(e,t){let n,r,i,o=e.firstChild.marks,a=t.firstChild.marks,s=o,l=a;for(let u=0;u<a.length;u++)s=a[u].removeFromSet(s);for(let u=0;u<o.length;u++)l=o[u].removeFromSet(l);if(1==s.length&&0==l.length)r=s[0],n="add",i=e=>e.mark(r.addToSet(e.marks));else{if(0!=s.length||1!=l.length)return null;r=l[0],n="remove",i=e=>e.mark(r.removeFromSet(e.marks))}let c=[];for(let u=0;u<t.childCount;u++)c.push(i(t.child(u)));if(rz.from(c).eq(e))return{mark:r,type:n}}(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,f.endA-y.start()))))x=e.state.tr,"add"==_.type?x.addMark(k,E,_.mark):x.removeMark(k,E,_.mark);else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let t=g.parent.textBetween(g.parentOffset,v.parentOffset);if(e.someProp("handleTextInput",(n=>n(e,k,E,t))))return;x=e.state.tr.insertText(t,k,E)}if(x||(x=e.state.tr.replace(k,E,d.doc.slice(f.start-d.from,f.endB-d.from))),d.sel){let t=xV(e,x.doc,d.sel);t&&!(BN&&HN&&e.composing&&t.empty&&(f.start!=f.endB||e.input.lastAndroidDelete<Date.now()-100)&&(t.head==k||t.head==x.mapping.map(E)-1)||RN&&t.empty&&t.head==k)&&x.setSelection(t)}w&&x.ensureMarks(w),o&&x.setMeta("composition",o),e.dispatch(x.scrollIntoView())}function xV(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:qB(e,t.resolve(n.anchor),t.resolve(n.head))}function wV(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,i++}return i}class _V{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new EF,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(TV),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=SV(this),EV(this),this.nodeViews=CV(this),this.docView=_B(this.state.doc,kV(this),uV(this),this.dom,this),this.domObserver=new fV(this,((e,t,n,r)=>bV(this,e,t,n,r))),this.domObserver.start(),function(e){for(let t in wF){let n=wF[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!MF(e,t)||TF(e,t)||!e.editable&&t.type in _F||n(e,t)},kF[t]?{passive:!0}:void 0)}VN&&e.dom.addEventListener("input",(()=>null)),CF(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&CF(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(TV),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){let n=this.state,r=!1,i=!1;e.storedMarks&&this.composing&&(VF(this),i=!0),this.state=e;let o=n.plugins!=e.plugins||this._props.plugins!=t.plugins;if(o||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=CV(this);(function(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,r=!0)}(o||t.handleDOMEvents!=this._props.handleDOMEvents)&&CF(this),this.editable=SV(this),EV(this);let a=uV(this),s=kV(this),l=n.plugins==e.plugins||n.doc.eq(e.doc)?e.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",c=r||!this.docView.matchesNode(e.doc,s,a);!c&&e.selection.eq(n.selection)||(i=!0);let u="preserve"==l&&i&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top);for(let o=(r.left+r.right)/2,a=i+1;a<Math.min(innerHeight,r.bottom);a+=5){let r=e.root.elementFromPoint(o,a);if(!r||r==e.dom||!e.dom.contains(r))continue;let s=r.getBoundingClientRect();if(s.top>=i-20){t=r,n=s.top;break}}return{refDOM:t,refTop:n,stack:JN(e.dom)}}(this);if(i){this.domObserver.stop();let t=c&&(RN||BN)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(n.selection,e.selection);if(c){let n=BN?this.trackWrites=this.domSelectionRange().focusNode:null;!r&&this.docView.update(e.doc,s,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=_B(e.doc,s,a,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return _N(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?FB(this,t):(HB(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),"reset"==l?this.dom.scrollTop=0:"to selection"==l?this.scrollToSelection():u&&function({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;QN(n,0==r?0:r-t)}(u)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(e=>e(this))));else if(this.state.selection instanceof tN){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&XN(this,t.getBoundingClientRect(),e)}else XN(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let o=0;o<this.directPlugins.length;o++){let r=this.directPlugins[o].props[e];if(null!=r&&(n=t?t(r):r))return n}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let r=i[o].props[e];if(null!=r&&(n=t?t(r):r))return n}}hasFocus(){if(RN){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(eB)return e.focus(eB);let t=JN(e);e.focus(null==eB?{get preventScroll(){return eB={preventScroll:!0},!0}}:void 0),eB||(eB=!1,QN(t,0))}(this.dom),FB(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}posAtCoords(e){return iB(this,e)}coordsAtPos(e,t=1){return lB(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return gB(this,t||this.state,e)}pasteHTML(e,t){return ZF(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return ZF(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],uV(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){TF(e,t)||!wF[t.type]||!e.editable&&t.type in _F||wF[t.type](e,t)}(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return VN&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom?function(e){let t;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0);let r=t.startContainer,i=t.startOffset,o=t.endContainer,a=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return _N(s.node,s.offset,o,a)&&([r,i,o,a]=[o,a,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function kV(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))})),t.translate||(t.translate="no"),[XF.node(0,e.state.doc.content.size,t)]}function EV(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:XF.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function SV(e){return!e.someProp("editable",(t=>!1===t(e.state)))}function CV(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function TV(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var MV={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},IV={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},OV="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),AV="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),PV=0;PV<10;PV++)MV[48+PV]=MV[96+PV]=String(PV);for(PV=1;PV<=24;PV++)MV[PV+111]="F"+PV;for(PV=65;PV<=90;PV++)MV[PV]=String.fromCharCode(PV+32),IV[PV]=String.fromCharCode(PV);for(var DV in MV)IV.hasOwnProperty(DV)||(IV[DV]=MV[DV]);const LV="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function RV(e){let t,n,r,i,o=e.split(/-(?!$)/),a=o[o.length-1];"Space"==a&&(a=" ");for(let s=0;s<o.length-1;s++){let e=o[s];if(/^(cmd|meta|m)$/i.test(e))i=!0;else if(/^a(lt)?$/i.test(e))t=!0;else if(/^(c|ctrl|control)$/i.test(e))n=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);LV?i=!0:n=!0}}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),i&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function zV(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function jV(e){let t=function(e){let t=Object.create(null);for(let n in e)t[RV(n)]=e[n];return t}(e);return function(e,n){let r,i=function(e){var t=!(OV&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||AV&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?IV:MV)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),o=t[zV(i,n)];if(o&&o(e.state,e.dispatch,e))return!0;if(1==i.length&&" "!=i){if(n.shiftKey){let r=t[zV(i,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(r=MV[n.keyCode])&&r!=i){let i=t[zV(r,n)];if(i&&i(e.state,e.dispatch,e))return!0}}return!1}}function NV(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}function BV(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function FV(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function VV(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function UV(e,t,n){let r,i,o=t.nodeBefore,a=t.nodeAfter;if(o.type.spec.isolating||a.type.spec.isolating)return!1;if(function(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,o=t.index();return!(!(r&&i&&r.type.compatibleContent(i.type))||(!r.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(o,o+1)||!i.isTextblock&&!Oj(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;let s=t.parent.canReplace(t.index(),t.index()+1);if(s&&(r=(i=o.contentMatchAt(o.childCount)).findWrapping(a.type))&&i.matchType(r[0]||a.type).validEnd){if(n){let i=t.pos+a.nodeSize,s=rz.empty;for(let e=r.length-1;e>=0;e--)s=rz.from(r[e].create(null,s));s=rz.from(o.copy(s));let l=e.tr.step(new kj(t.pos-1,i,t.pos,i,new cz(s,1,0),r.length,!0)),c=i+2*r.length;Oj(l.doc,c)&&l.join(c),n(l.scrollIntoView())}return!0}let l=Kj.findFrom(t,1),c=l&&l.$from.blockRange(l.$to),u=c&&Cj(c);if(null!=u&&u>=t.depth)return n&&n(e.tr.lift(c,u).scrollIntoView()),!0;if(s&&NV(a,"start",!0)&&NV(o,"end")){let r=o,i=[];for(;i.push(r),!r.isTextblock;)r=r.lastChild;let s=a,l=1;for(;!s.isTextblock;s=s.firstChild)l++;if(r.canReplace(r.childCount,r.childCount,s.content)){if(n){let r=rz.empty;for(let e=i.length-1;e>=0;e--)r=rz.from(i[e].copy(r));n(e.tr.step(new kj(t.pos-i.length,t.pos+a.nodeSize,t.pos+l,t.pos+a.nodeSize-l,new cz(r,i.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function $V(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return!!i.node(o).isTextblock&&(n&&n(t.tr.setSelection(Qj.create(t.doc,e<0?i.start(o):i.end(o)))),!0)}}const ZV=$V(-1),HV=$V(1);function WV(e,t=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:r},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(r,a,((r,o)=>{if(i)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)i=!0;else{let t=n.doc.resolve(o),r=t.index();i=t.parent.canReplaceWith(r,r+1,e)}}))}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[r];i.setBlockType(o,a,e,t)}r(i.scrollIntoView())}return!0}}function qV(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,a=i.blockRange(o),s=!1,l=a;if(!a)return!1;if(a.depth>=2&&i.node(a.depth-1).type.compatibleContent(e)&&0==a.startIndex){if(0==i.index(a.depth-1))return!1;let e=n.doc.resolve(a.start-2);l=new Sz(e,e,a.depth),a.endIndex<a.parent.childCount&&(a=new Sz(i,n.doc.resolve(o.end(a.depth)),a.depth)),s=!0}let c=Tj(l,e,t,a);return!!c&&(r&&r(function(e,t,n,r,i){let o=rz.empty;for(let u=n.length-1;u>=0;u--)o=rz.from(n[u].type.create(n[u].attrs,o));e.step(new kj(t.start-(r?2:0),t.end,t.start,t.end,new cz(o,0,0),n.length,!0));let a=0;for(let u=0;u<n.length;u++)n[u].type==i&&(a=u+1);let s=n.length-a,l=t.start+n.length-(r?2:0),c=t.parent;for(let u=t.startIndex,d=t.endIndex,h=!0;u<d;u++,h=!1)!h&&Ij(e.doc,l,s)&&(e.split(l,s),l+=2*s),l+=c.child(u).nodeSize;return e}(n.tr,a,c,s,e).scrollIntoView()),!0)}}function GV(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,(t=>t.childCount>0&&t.firstChild.type==e));return!!o&&(!n||(r.node(o.depth-1).type==e?function(e,t,n,r){let i=e.tr,o=r.end,a=r.$to.end(r.depth);o<a&&(i.step(new kj(o-1,a,o,a,new cz(rz.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Sz(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const s=Cj(r);if(null==s)return!1;i.lift(r,s);let l=i.mapping.map(o,-1)-1;return Oj(i.doc,l)&&i.join(l),t(i.scrollIntoView()),!0}(t,n,e,o):function(e,t,n){let r=e.tr,i=n.parent;for(let p=n.end,f=n.endIndex-1,m=n.startIndex;f>m;f--)p-=i.child(f).nodeSize,r.delete(p-1,p+1);let o=r.doc.resolve(n.start),a=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let s=0==n.startIndex,l=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(s?0:1),u+1,a.content.append(l?rz.empty:rz.from(i))))return!1;let d=o.pos,h=d+a.nodeSize;return r.step(new kj(d-(s?1:0),h+(l?1:0),d+1,h-1,new cz((s?rz.empty:rz.from(i.copy(rz.empty))).append(l?rz.empty:rz.from(i.copy(rz.empty))),s?0:1,l?0:1),s?0:1)),t(r.scrollIntoView()),!0}(t,n,o)))}}function KV(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),filterTransaction:t.filterTransaction,plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();class YV{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,(...e)=>{const n=t(...e)(o);return i.getMeta("preventDispatch")||this.hasCustomState||r.dispatch(i),n}])))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,a=[],s=!!e,l=e||i.tr,c={...Object.fromEntries(Object.entries(n).map((([e,n])=>[e,(...e)=>{const r=this.buildProps(l,t),i=n(...e)(r);return a.push(i),c}]))),run:()=>(s||!t||l.getMeta("preventDispatch")||this.hasCustomState||o.dispatch(l),a.every((e=>!0===e)))};return c}createCan(e){const{rawCommands:t,state:n}=this,r=e||n.tr,i=this.buildProps(r,!1),o=Object.fromEntries(Object.entries(t).map((([e,t])=>[e,(...e)=>t(...e)({...i,dispatch:void 0})])));return{...o,chain:()=>this.createChain(r,!1)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r;i.storedMarks&&e.setStoredMarks(i.storedMarks);const a={tr:e,editor:r,view:o,state:KV({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map((([e,t])=>[e,(...e)=>t(...e)(a)])))}};return a}}class XV{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach((e=>e.apply(this,t))),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter((e=>e!==t)):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function JV(e,t,n){return void 0===e.config[t]&&e.parent?JV(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind({...n,parent:e.parent?JV(e.parent,t,n):null}):e.config[t]}function QV(e){return{baseExtensions:e.filter((e=>"extension"===e.type)),nodeExtensions:e.filter((e=>"node"===e.type)),markExtensions:e.filter((e=>"mark"===e.type))}}function eU(e){const t=[],{nodeExtensions:n,markExtensions:r}=QV(e),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach((e=>{const n=JV(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage});n&&n().forEach((e=>{e.types.forEach((n=>{Object.entries(e.attributes).forEach((([e,r])=>{t.push({type:n,name:e,attribute:{...o,...r}})}))}))}))})),i.forEach((e=>{const n={name:e.name,options:e.options,storage:e.storage},r=JV(e,"addAttributes",n);if(!r)return;const i=r();Object.entries(i).forEach((([n,r])=>{const i={...o,...r};"function"==typeof(null==i?void 0:i.default)&&(i.default=i.default()),(null==i?void 0:i.isRequired)&&void 0===(null==i?void 0:i.default)&&delete i.default,t.push({type:e.name,name:n,attribute:i})}))})),t}function tU(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function nU(...e){return e.filter((e=>!!e)).reduce(((e,t)=>{const n={...e};return Object.entries(t).forEach((([e,t])=>{n[e]?n[e]="class"===e?[n[e],t].join(" "):"style"===e?[n[e],t].join("; "):t:n[e]=t})),n}),{})}function rU(e,t){return t.filter((e=>e.attribute.rendered)).map((t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]})).reduce(((e,t)=>nU(e,t)),{})}function iU(e){return"function"==typeof e}function oU(e,t=undefined,...n){return iU(e)?t?e.bind(t)(...n):e(...n):e}function aU(e,t){return e.style?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;const i=t.reduce(((e,t)=>{const r=t.attribute.parseHTML?t.attribute.parseHTML(n):function(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}(n.getAttribute(t.name));return null==r?e:{...e,[t.name]:r}}),{});return{...r,...i}}}}function sU(e){return Object.fromEntries(Object.entries(e).filter((([e,t])=>("attrs"!==e||!function(e={}){return 0===Object.keys(e).length&&e.constructor===Object}(t))&&null!=t)))}function lU(e,t){return t.nodes[e]||t.marks[e]||null}function cU(e,t){return Array.isArray(t)?t.some((t=>("string"==typeof t?t:t.name)===e.name)):t}const uU=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,((e,t,i,o)=>{var a,s;const l=(null===(s=(a=e.type.spec).toText)||void 0===s?void 0:s.call(a,{node:e,pos:t,parent:i,index:o}))||e.textContent||"%leaf%";n+=l.slice(0,Math.max(0,r-t))})),n};function dU(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class hU{constructor(e){this.find=e.find,this.handler=e.handler}}const pU=(e,t)=>{if(dU(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function fU(e){var t;const{editor:n,from:r,to:i,text:o,rules:a,plugin:s}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(null===(t=c.nodeBefore||c.nodeAfter)||void 0===t?void 0:t.marks.find((e=>e.type.spec.code))))return!1;let u=!1;const d=uU(c)+o;return a.forEach((e=>{if(u)return;const t=pU(d,e.find);if(!t)return;const a=l.state.tr,c=KV({state:l.state,transaction:a}),h={from:r-(t[0].length-o.length),to:i},{commands:p,chain:f,can:m}=new YV({editor:n,state:c});null!==e.handler({state:c,range:h,match:t,commands:p,chain:f,can:m})&&a.steps.length&&(a.setMeta(s,{transform:a,from:r,to:i,text:o}),l.dispatch(a),u=!0)})),u}function mU(e){const{editor:t,rules:n}=e,r=new fN({state:{init:()=>null,apply(e,t){const n=e.getMeta(r);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:(e,i,o,a)=>fU({editor:t,from:i,to:o,text:a,rules:n,plugin:r}),handleDOMEvents:{compositionend:e=>(setTimeout((()=>{const{$cursor:i}=e.state.selection;i&&fU({editor:t,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})})),!1)},handleKeyDown(e,i){if("Enter"!==i.key)return!1;const{$cursor:o}=e.state.selection;return!!o&&fU({editor:t,from:o.pos,to:o.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}class gU{constructor(e){this.find=e.find,this.handler=e.handler}}const vU=(e,t)=>{if(dU(t))return[...e.matchAll(t)];const n=t(e);return n?n.map((t=>{const n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n})):[]};function yU(e){const{editor:t,rules:n}=e;let r=null,i=!1,o=!1;const a=n.map((e=>new fN({view(e){const t=t=>{var n;r=(null===(n=e.dom.parentElement)||void 0===n?void 0:n.contains(t.target))?e.dom.parentElement:null};return window.addEventListener("dragstart",t),{destroy(){window.removeEventListener("dragstart",t)}}},props:{handleDOMEvents:{drop:e=>(o=r===e.dom.parentElement,!1),paste:(e,t)=>{var n;const r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return i=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(n,r,a)=>{const s=n[0],l="paste"===s.getMeta("uiEvent")&&!i,c="drop"===s.getMeta("uiEvent")&&!o;if(!l&&!c)return;const u=r.doc.content.findDiffStart(a.doc.content),d=r.doc.content.findDiffEnd(a.doc.content);if("number"!=typeof u||!d||u===d.b)return;const h=a.tr,p=KV({state:a,transaction:h}),f=function(e){const{editor:t,state:n,from:r,to:i,rule:o}=e,{commands:a,chain:s,can:l}=new YV({editor:t,state:n}),c=[];return n.doc.nodesBetween(r,i,((e,t)=>{if(!e.isTextblock||e.type.spec.code)return;const u=Math.max(r,t),d=Math.min(i,t+e.content.size),h=e.textBetween(u-t,d-t,void 0,"");vU(h,o.find).forEach((e=>{if(void 0===e.index)return;const t=u+e.index+1,r=t+e[0].length,i={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},d=o.handler({state:n,range:i,match:e,commands:a,chain:s,can:l});c.push(d)}))})),c.every((e=>null!==e))}({editor:t,state:p,from:Math.max(u-1,0),to:d.b-1,rule:e});return f&&h.steps.length?h:void 0}})));return a}class bU{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=bU.resolve(e),this.schema=function(e,t){var n;const r=eU(e),{nodeExtensions:i,markExtensions:o}=QV(e),a=null===(n=i.find((e=>JV(e,"topNode"))))||void 0===n?void 0:n.name,s=Object.fromEntries(i.map((n=>{const i=r.filter((e=>e.type===n.name)),o={name:n.name,options:n.options,storage:n.storage,editor:t},a=e.reduce(((e,t)=>{const r=JV(t,"extendNodeSchema",o);return{...e,...r?r(n):{}}}),{}),s=sU({...a,content:oU(JV(n,"content",o)),marks:oU(JV(n,"marks",o)),group:oU(JV(n,"group",o)),inline:oU(JV(n,"inline",o)),atom:oU(JV(n,"atom",o)),selectable:oU(JV(n,"selectable",o)),draggable:oU(JV(n,"draggable",o)),code:oU(JV(n,"code",o)),defining:oU(JV(n,"defining",o)),isolating:oU(JV(n,"isolating",o)),attrs:Object.fromEntries(i.map((e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))}),l=oU(JV(n,"parseHTML",o));l&&(s.parseDOM=l.map((e=>aU(e,i))));const c=JV(n,"renderHTML",o);c&&(s.toDOM=e=>c({node:e,HTMLAttributes:rU(e,i)}));const u=JV(n,"renderText",o);return u&&(s.toText=u),[n.name,s]}))),l=Object.fromEntries(o.map((n=>{const i=r.filter((e=>e.type===n.name)),o={name:n.name,options:n.options,storage:n.storage,editor:t},a=e.reduce(((e,t)=>{const r=JV(t,"extendMarkSchema",o);return{...e,...r?r(n):{}}}),{}),s=sU({...a,inclusive:oU(JV(n,"inclusive",o)),excludes:oU(JV(n,"excludes",o)),group:oU(JV(n,"group",o)),spanning:oU(JV(n,"spanning",o)),code:oU(JV(n,"code",o)),attrs:Object.fromEntries(i.map((e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))}),l=oU(JV(n,"parseHTML",o));l&&(s.parseDOM=l.map((e=>aU(e,i))));const c=JV(n,"renderHTML",o);return c&&(s.toDOM=e=>c({mark:e,HTMLAttributes:rU(e,i)})),[n.name,s]})));return new Hz({topNode:a,nodes:s,marks:l})}(this.extensions,t),this.extensions.forEach((e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:lU(e.name,this.schema)};"mark"===e.type&&(null===(t=oU(JV(e,"keepOnSplit",n)))||void 0===t||t)&&this.splittableMarks.push(e.name);const r=JV(e,"onBeforeCreate",n);r&&this.editor.on("beforeCreate",r);const i=JV(e,"onCreate",n);i&&this.editor.on("create",i);const o=JV(e,"onUpdate",n);o&&this.editor.on("update",o);const a=JV(e,"onSelectionUpdate",n);a&&this.editor.on("selectionUpdate",a);const s=JV(e,"onTransaction",n);s&&this.editor.on("transaction",s);const l=JV(e,"onFocus",n);l&&this.editor.on("focus",l);const c=JV(e,"onBlur",n);c&&this.editor.on("blur",c);const u=JV(e,"onDestroy",n);u&&this.editor.on("destroy",u)}))}static resolve(e){const t=bU.sort(bU.flatten(e)),n=function(e){const t=e.filter(((t,n)=>e.indexOf(t)!==n));return[...new Set(t)]}(t.map((e=>e.name)));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map((e=>`'${e}'`)).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map((e=>{const t=JV(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return t?[e,...this.flatten(t())]:e})).flat(10)}static sort(e){return e.sort(((e,t)=>{const n=JV(e,"priority")||100,r=JV(t,"priority")||100;return n>r?-1:n<r?1:0}))}get commands(){return this.extensions.reduce(((e,t)=>{const n=JV(t,"addCommands",{name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:lU(t.name,this.schema)});return n?{...e,...n()}:e}),{})}get plugins(){const{editor:e}=this,t=bU.sort([...this.extensions].reverse()),n=[],r=[],i=t.map((t=>{const i={name:t.name,options:t.options,storage:t.storage,editor:e,type:lU(t.name,this.schema)},o=[],a=JV(t,"addKeyboardShortcuts",i);let s={};if("mark"===t.type&&t.config.exitable&&(s.ArrowRight=()=>u$.handleExit({editor:e,mark:t})),a){const t=Object.fromEntries(Object.entries(a()).map((([t,n])=>[t,()=>n({editor:e})])));s={...s,...t}}const l=new fN({props:{handleKeyDown:jV(s)}});o.push(l);const c=JV(t,"addInputRules",i);cU(t,e.options.enableInputRules)&&c&&n.push(...c());const u=JV(t,"addPasteRules",i);cU(t,e.options.enablePasteRules)&&u&&r.push(...u());const d=JV(t,"addProseMirrorPlugins",i);if(d){const e=d();o.push(...e)}return o})).flat();return[mU({editor:e,rules:n}),...yU({editor:e,rules:r}),...i]}get attributes(){return eU(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=QV(this.extensions);return Object.fromEntries(t.filter((e=>!!JV(e,"addNodeView"))).map((t=>{const n=this.attributes.filter((e=>e.type===t.name)),r={name:t.name,options:t.options,storage:t.storage,editor:e,type:tU(t.name,this.schema)},i=JV(t,"addNodeView",r);return i?[t.name,(r,o,a,s)=>{const l=rU(r,n);return i()({editor:e,node:r,getPos:a,decorations:s,HTMLAttributes:l,extension:t})}]:[]})))}}function xU(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function wU(e,t){const n={...e};return xU(e)&&xU(t)&&Object.keys(t).forEach((r=>{xU(t[r])?r in e?n[r]=wU(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})})),n}class _U{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=oU(JV(this,"addOptions",{name:this.name}))),this.storage=oU(JV(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new _U(e)}configure(e={}){const t=this.extend();return t.options=wU(this.options,e),t.storage=oU(JV(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new _U(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=oU(JV(t,"addOptions",{name:t.name})),t.storage=oU(JV(t,"addStorage",{name:t.name,options:t.options})),t}}function kU(e,t,n){const{from:r,to:i}=t,{blockSeparator:o="\n\n",textSerializers:a={}}=n||{};let s="",l=!0;return e.nodesBetween(r,i,((e,n,c,u)=>{var d;const h=null==a?void 0:a[e.type.name];h?(e.isBlock&&!l&&(s+=o,l=!0),c&&(s+=h({node:e,pos:n,parent:c,index:u,range:t}))):e.isText?(s+=null===(d=null==e?void 0:e.text)||void 0===d?void 0:d.slice(Math.max(r,n)-n,i-n),l=!1):e.isBlock&&!l&&(s+=o,l=!0)})),s}function EU(e){return Object.fromEntries(Object.entries(e.nodes).filter((([,e])=>e.spec.toText)).map((([e,t])=>[e,t.spec.toText])))}const SU=_U.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new fN({key:new vN("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:o}=i,a=Math.min(...o.map((e=>e.$from.pos))),s=Math.max(...o.map((e=>e.$to.pos)));return kU(r,{from:a,to:s},{textSerializers:EU(n)})}}})]}});function CU(e,t,n={strict:!0}){const r=Object.keys(t);return!r.length||r.every((r=>n.strict?t[r]===e[r]:dU(t[r])?t[r].test(e[r]):t[r]===e[r]))}function TU(e,t,n={}){return e.find((e=>e.type===t&&CU(e.attrs,n)))}function MU(e,t,n={}){return!!TU(e,t,n)}function IU(e,t,n={}){if(!e||!t)return;let r=e.parent.childAfter(e.parentOffset);if(e.parentOffset===r.offset&&0!==r.offset&&(r=e.parent.childBefore(e.parentOffset)),!r.node)return;const i=TU([...r.node.marks],t,n);if(!i)return;let o=r.index,a=e.start()+r.offset,s=o+1,l=a+r.node.nodeSize;for(TU([...r.node.marks],t,n);o>0&&i.isInSet(e.parent.child(o-1).marks);)o-=1,a-=e.parent.child(o).nodeSize;for(;s<e.parent.childCount&&MU([...e.parent.child(s).marks],t,n);)l+=e.parent.child(s).nodeSize,s+=1;return{from:a,to:l}}function OU(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function AU(e){return e instanceof Qj}function PU(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function DU(e,t=null){if(!t)return null;const n=Kj.atStart(e),r=Kj.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;const i=n.from,o=r.to;return"all"===t?Qj.create(e,PU(0,i,o),PU(e.content.size,i,o)):Qj.create(e,PU(t,i,o),PU(t,i,o))}function LU(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function RU(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function zU(e,t,n){if(n={slice:!0,parseOptions:{},...n},"object"==typeof e&&null!==e)try{return Array.isArray(e)&&e.length>0?rz.fromArray(e.map((e=>t.nodeFromJSON(e)))):t.nodeFromJSON(e)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),zU("",t,n)}if("string"==typeof e){const r=qz.fromSchema(t);return n.slice?r.parseSlice(RU(e),n.parseOptions).content:r.parse(RU(e),n.parseOptions)}return zU("",t,n)}function jU(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function NU(e,t,n={}){const{from:r,to:i,empty:o}=e.selection,a=t?tU(t,e.schema):null,s=[];e.doc.nodesBetween(r,i,((e,t)=>{if(e.isText)return;const n=Math.max(r,t),o=Math.min(i,t+e.nodeSize);s.push({node:e,from:n,to:o})}));const l=i-r,c=s.filter((e=>!a||a.name===e.node.type.name)).filter((e=>CU(e.node.attrs,n,{strict:!1})));return o?!!c.length:c.reduce(((e,t)=>e+t.to-t.from),0)>=l}function BU(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function FU(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce(((t,r)=>(n.includes(r)||(t[r]=e[r]),t)),{})}function VU(e,t,n={}){return zU(e,t,{slice:!1,parseOptions:n})}function UU(e){return t=>function(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}(t.$from,e)}function $U(e,t){const n=OU(t,e.schema),{from:r,to:i,empty:o}=e.selection,a=[];o?(e.storedMarks&&a.push(...e.storedMarks),a.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,(e=>{a.push(...e.marks)}));const s=a.find((e=>e.type.name===n.name));return s?{...s.attrs}:{}}function ZU(e,t){const n=BU("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){const n=tU(t,e.schema),{from:r,to:i}=e.selection,o=[];e.doc.nodesBetween(r,i,(e=>{o.push(e)}));const a=o.reverse().find((e=>e.type.name===n.name));return a?{...a.attrs}:{}}(e,t):"mark"===n?$U(e,t):{}}function HU(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach((t=>{const i=IU(n.resolve(e-1),t.type);i&&r.push({mark:t,...i})})):n.nodesBetween(e,t,((e,t)=>{r.push(...e.marks.map((n=>({from:t,to:t+e.nodeSize,mark:n}))))})),r}function WU(e,t,n){return Object.fromEntries(Object.entries(n).filter((([n])=>{const r=e.find((e=>e.type===t&&e.name===n));return!!r&&r.attribute.keepOnSplit})))}function qU(e,t,n={}){const{empty:r,ranges:i}=e.selection,o=t?OU(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter((e=>!o||o.name===e.type.name)).find((e=>CU(e.attrs,n,{strict:!1})));let a=0;const s=[];if(i.forEach((({$from:t,$to:n})=>{const r=t.pos,i=n.pos;e.doc.nodesBetween(r,i,((e,t)=>{if(!e.isText&&!e.marks.length)return;const n=Math.max(r,t),o=Math.min(i,t+e.nodeSize);a+=o-n,s.push(...e.marks.map((e=>({mark:e,from:n,to:o}))))}))})),0===a)return!1;const l=s.filter((e=>!o||o.name===e.mark.type.name)).filter((e=>CU(e.mark.attrs,n,{strict:!1}))).reduce(((e,t)=>e+t.to-t.from),0),c=s.filter((e=>!o||e.mark.type!==o&&e.mark.type.excludes(o))).reduce(((e,t)=>e+t.to-t.from),0);return(l>0?l+c:l)>=a}function GU(e,t){const{nodeExtensions:n}=QV(t),r=n.find((t=>t.name===e));if(!r)return!1;const i=oU(JV(r,"group",{name:r.name,options:r.options,storage:r.storage}));return"string"==typeof i&&i.split(" ").includes("list")}function KU(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter((e=>null==t?void 0:t.includes(e.type.name)));e.tr.ensureMarks(r)}}const YU=(e,t)=>{const n=UU((e=>e.type===t))(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const i=e.doc.nodeAt(r);return n.node.type!==(null==i?void 0:i.type)||!Oj(e.doc,n.pos)||(e.join(n.pos),!0)},XU=(e,t)=>{const n=UU((e=>e.type===t))(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const i=e.doc.nodeAt(r);return n.node.type!==(null==i?void 0:i.type)||!Oj(e.doc,r)||(e.join(r),!0)};var JU=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame((()=>{var n;e.isDestroyed||(t.dom.blur(),null===(n=null===window||void 0===window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())})),!0),clearContent:(e=!1)=>({commands:t})=>t.setContent("",e),clearNodes:()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return!n||(i.forEach((({$from:n,$to:r})=>{e.doc.nodesBetween(n.pos,r.pos,((e,n)=>{if(e.type.isText)return;const{doc:r,mapping:i}=t,o=r.resolve(i.map(n)),a=r.resolve(i.map(n+e.nodeSize)),s=o.blockRange(a);if(!s)return;const l=Cj(s);if(e.type.isTextblock){const{defaultType:e}=o.parent.contentMatchAt(o.index());t.setNodeMarkup(s.start,e)}(l||0===l)&&t.lift(s,l)}))})),!0)},command:e=>t=>e(t),createParagraphNear:()=>({state:e,dispatch:t})=>((e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof rN||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=VV(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let n=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=e.tr.insert(n,o.createAndFill());a.setSelection(Qj.create(a.doc,n+1)),t(a.scrollIntoView())}return!0})(e,t),deleteCurrentNode:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(t){const t=i.before(o),n=i.after(o);e.delete(t,n).scrollIntoView()}return!0}return!1},deleteNode:e=>({tr:t,state:n,dispatch:r})=>{const i=tU(e,n.schema),o=t.selection.$anchor;for(let e=o.depth;e>0;e-=1)if(o.node(e).type===i){if(r){const n=o.before(e),r=o.after(e);t.delete(n,r).scrollIntoView()}return!0}return!1},deleteRange:e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},deleteSelection:()=>({state:e,dispatch:t})=>((e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0))(e,t),enter:()=>({commands:e})=>e.keyboardShortcut("Enter"),exitCode:()=>({state:e,dispatch:t})=>((e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),a=VV(i.contentMatchAt(o));if(!a||!i.canReplaceWith(o,o,a))return!1;if(t){let r=n.after(),i=e.tr.replaceWith(r,r,a.createAndFill());i.setSelection(Kj.near(i.doc.resolve(r),1)),t(i.scrollIntoView())}return!0})(e,t),extendMarkRange:(e,t={})=>({tr:n,state:r,dispatch:i})=>{const o=OU(e,r.schema),{doc:a,selection:s}=n,{$from:l,from:c,to:u}=s;if(i){const e=IU(l,o,t);if(e&&e.from<=c&&e.to>=u){const t=Qj.create(a,e.from,e.to);n.setSelection(t)}}return!0},first:e=>t=>{const n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1},focus:(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:o})=>{t={scrollIntoView:!0,...t};const a=()=>{LU()&&r.dom.focus(),requestAnimationFrame((()=>{n.isDestroyed||(r.focus(),(null==t?void 0:t.scrollIntoView)&&n.commands.scrollIntoView())}))};if(r.hasFocus()&&null===e||!1===e)return!0;if(o&&null===e&&!AU(n.state.selection))return a(),!0;const s=DU(i.doc,e)||n.state.selection,l=n.state.selection.eq(s);return o&&(l||i.setSelection(s),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},forEach:(e,t)=>n=>e.every(((e,r)=>t(e,{...n,index:r}))),insertContent:(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),insertContentAt:(e,t,n)=>({tr:r,dispatch:i,editor:o})=>{if(i){n={parseOptions:{},updateSelection:!0,...n};const i=zU(t,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if("<>"===i.toString())return!0;let{from:a,to:s}="number"==typeof e?{from:e,to:e}:e,l=!0,c=!0;if((i.toString().startsWith("<")?i:[i]).forEach((e=>{e.check(),l=!!l&&e.isText&&0===e.marks.length,c=!!c&&e.isBlock})),a===s&&c){const{parent:e}=r.doc.resolve(a);e.isTextblock&&!e.type.spec.code&&!e.childCount&&(a-=1,s+=1)}l?Array.isArray(t)?r.insertText(t.map((e=>e.text||"")).join(""),a,s):"object"==typeof t&&t&&t.text?r.insertText(t.text,a,s):r.insertText(t,a,s):r.replaceWith(a,s,i),n.updateSelection&&function(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof _j||i instanceof kj))return;const o=e.mapping.maps[r];let a=0;o.forEach(((e,t,n,r)=>{0===a&&(a=r)})),e.setSelection(Kj.near(e.doc.resolve(a),n))}(r,r.steps.length-1,-1)}return!0},joinUp:()=>({state:e,dispatch:t})=>((e,t)=>{let n,r=e.selection,i=r instanceof tN;if(i){if(r.node.isTextblock||!Oj(e.doc,r.from))return!1;n=r.from}else if(n=Pj(e.doc,r.from,-1),null==n)return!1;if(t){let r=e.tr.join(n);i&&r.setSelection(tN.create(r.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(r.scrollIntoView())}return!0})(e,t),joinDown:()=>({state:e,dispatch:t})=>((e,t)=>{let n,r=e.selection;if(r instanceof tN){if(r.node.isTextblock||!Oj(e.doc,r.to))return!1;n=r.to}else if(n=Pj(e.doc,r.to,1),null==n)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0})(e,t),joinBackward:()=>({state:e,dispatch:t})=>((e,t,n)=>{let r=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}(e,n);if(!r)return!1;let i=BV(r);if(!i){let n=r.blockRange(),i=n&&Cj(n);return null!=i&&(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&UV(e,i,t))return!0;if(0==r.parent.content.size&&(NV(o,"end")||tN.isSelectable(o))){let n=Lj(e.doc,r.before(),r.after(),cz.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(NV(o,"end")?Kj.findFrom(r.doc.resolve(r.mapping.map(i.pos,-1)),-1):tN.create(r.doc,i.pos-o.nodeSize)),t(r.scrollIntoView())}return!0}}return!(!o.isAtom||i.depth!=r.depth-1||(t&&t(e.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),0))})(e,t),joinForward:()=>({state:e,dispatch:t})=>((e,t,n)=>{let r=function(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}(e,n);if(!r)return!1;let i=FV(r);if(!i)return!1;let o=i.nodeAfter;if(UV(e,i,t))return!0;if(0==r.parent.content.size&&(NV(o,"start")||tN.isSelectable(o))){let n=Lj(e.doc,r.before(),r.after(),cz.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(NV(o,"start")?Kj.findFrom(r.doc.resolve(r.mapping.map(i.pos)),1):tN.create(r.doc,r.mapping.map(i.pos))),t(r.scrollIntoView())}return!0}}return!(!o.isAtom||i.depth!=r.depth-1||(t&&t(e.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),0))})(e,t),keyboardShortcut:e=>({editor:t,view:n,tr:r,dispatch:i})=>{const o=function(e){const t=e.split(/-(?!$)/);let n,r,i,o,a=t[t.length-1];"Space"===a&&(a=" ");for(let s=0;s<t.length-1;s+=1){const e=t[s];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))n=!0;else if(/^(c|ctrl|control)$/i.test(e))r=!0;else if(/^s(hift)?$/i.test(e))i=!0;else{if(!/^mod$/i.test(e))throw new Error(`Unrecognized modifier name: ${e}`);LU()||jU()?o=!0:r=!0}}return n&&(a=`Alt-${a}`),r&&(a=`Ctrl-${a}`),o&&(a=`Meta-${a}`),i&&(a=`Shift-${a}`),a}(e).split(/-(?!$)/),a=o.find((e=>!["Alt","Ctrl","Meta","Shift"].includes(e))),s=new KeyboardEvent("keydown",{key:"Space"===a?" ":a,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction((()=>{n.someProp("handleKeyDown",(e=>e(n,s)))}));return null==l||l.steps.forEach((e=>{const t=e.map(r.mapping);t&&i&&r.maybeStep(t)})),!0},lift:(e,t={})=>({state:n,dispatch:r})=>!!NU(n,tU(e,n.schema),t)&&((e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),o=i&&Cj(i);return null!=o&&(t&&t(e.tr.lift(i,o).scrollIntoView()),!0)})(n,r),liftEmptyBlock:()=>({state:e,dispatch:t})=>((e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(Ij(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Cj(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)})(e,t),liftListItem:e=>({state:t,dispatch:n})=>GV(tU(e,t.schema))(t,n),newlineInCode:()=>({state:e,dispatch:t})=>((e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))})(e,t),resetAttributes:(e,t)=>({tr:n,state:r,dispatch:i})=>{let o=null,a=null;const s=BU("string"==typeof e?e:e.name,r.schema);return!!s&&("node"===s&&(o=tU(e,r.schema)),"mark"===s&&(a=OU(e,r.schema)),i&&n.selection.ranges.forEach((e=>{r.doc.nodesBetween(e.$from.pos,e.$to.pos,((e,r)=>{o&&o===e.type&&n.setNodeMarkup(r,void 0,FU(e.attrs,t)),a&&e.marks.length&&e.marks.forEach((i=>{a===i.type&&n.addMark(r,r+e.nodeSize,a.create(FU(i.attrs,t)))}))}))})),!0)},scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),selectAll:()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size}),selectNodeBackward:()=>({state:e,dispatch:t})=>((e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=BV(r)}let a=o&&o.nodeBefore;return!(!a||!tN.isSelectable(a)||(t&&t(e.tr.setSelection(tN.create(e.doc,o.pos-a.nodeSize)).scrollIntoView()),0))})(e,t),selectNodeForward:()=>({state:e,dispatch:t})=>((e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=FV(r)}let a=o&&o.nodeAfter;return!(!a||!tN.isSelectable(a)||(t&&t(e.tr.setSelection(tN.create(e.doc,o.pos)).scrollIntoView()),0))})(e,t),selectParentNode:()=>({state:e,dispatch:t})=>((e,t)=>{let n,{$from:r,to:i}=e.selection,o=r.sharedDepth(i);return 0!=o&&(n=r.before(o),t&&t(e.tr.setSelection(tN.create(e.doc,n))),!0)})(e,t),selectTextblockEnd:()=>({state:e,dispatch:t})=>HV(e,t),selectTextblockStart:()=>({state:e,dispatch:t})=>ZV(e,t),setContent:(e,t=!1,n={})=>({tr:r,editor:i,dispatch:o})=>{const{doc:a}=r,s=VU(e,i.schema,n);return o&&r.replaceWith(0,a.content.size,s).setMeta("preventUpdate",!t),!0},setMark:(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:a,ranges:s}=o,l=OU(e,r.schema);if(i)if(a){const e=$U(r,l);n.addStoredMark(l.create({...e,...t}))}else s.forEach((e=>{const i=e.$from.pos,o=e.$to.pos;r.doc.nodesBetween(i,o,((e,r)=>{const a=Math.max(r,i),s=Math.min(r+e.nodeSize,o);e.marks.find((e=>e.type===l))?e.marks.forEach((e=>{l===e.type&&n.addMark(a,s,l.create({...e.attrs,...t}))})):n.addMark(a,s,l.create(t))}))}));return function(e,t,n){var r;const{selection:i}=t;let o=null;if(AU(i)&&(o=i.$cursor),o){const t=null!==(r=e.storedMarks)&&void 0!==r?r:o.marks();return!!n.isInSet(t)||!t.some((e=>e.type.excludes(n)))}const{ranges:a}=i;return a.some((({$from:t,$to:r})=>{let i=0===t.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(t.pos,r.pos,((e,t,r)=>{if(i)return!1;if(e.isInline){const t=!r||r.type.allowsMarkType(n),o=!!n.isInSet(e.marks)||!e.marks.some((e=>e.type.excludes(n)));i=t&&o}return!i})),i}))}(r,n,l)},setMeta:(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),setNode:(e,t={})=>({state:n,dispatch:r,chain:i})=>{const o=tU(e,n.schema);return o.isTextblock?i().command((({commands:e})=>!!WV(o,t)(n)||e.clearNodes())).command((({state:e})=>WV(o,t)(e,r))).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,r=PU(e,0,n.content.size),i=tN.create(n,r);t.setSelection(i)}return!0},setTextSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,{from:r,to:i}="number"==typeof e?{from:e,to:e}:e,o=Qj.atStart(n).from,a=Qj.atEnd(n).to,s=PU(r,o,a),l=PU(i,o,a),c=Qj.create(n,s,l);t.setSelection(c)}return!0},sinkListItem:e=>({state:t,dispatch:n})=>{const r=tU(e,t.schema);return(i=r,function(e,t){let{$from:n,$to:r}=e.selection,o=n.blockRange(r,(e=>e.childCount>0&&e.firstChild.type==i));if(!o)return!1;let a=o.startIndex;if(0==a)return!1;let s=o.parent,l=s.child(a-1);if(l.type!=i)return!1;if(t){let n=l.lastChild&&l.lastChild.type==s.type,r=rz.from(n?i.create():null),a=new cz(rz.from(i.create(null,rz.from(s.type.create(null,r)))),n?3:1,0),c=o.start,u=o.end;t(e.tr.step(new kj(c-(n?3:1),u,c,u,a,1,!0)).scrollIntoView())}return!0})(t,n);var i},splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:a}=t,{$from:s,$to:l}=o,c=WU(i.extensionManager.attributes,s.node().type.name,s.node().attrs);if(o instanceof tN&&o.node.isBlock)return!(!s.parentOffset||!Ij(a,s.pos)||(r&&(e&&KU(n,i.extensionManager.splittableMarks),t.split(s.pos).scrollIntoView()),0));if(!s.parent.isBlock)return!1;if(r){const r=l.parentOffset===l.parent.content.size;o instanceof Qj&&t.deleteSelection();const a=0===s.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(s.node(-1).contentMatchAt(s.indexAfter(-1)));let u=r&&a?[{type:a,attrs:c}]:void 0,d=Ij(t.doc,t.mapping.map(s.pos),1,u);if(u||d||!Ij(t.doc,t.mapping.map(s.pos),1,a?[{type:a}]:void 0)||(d=!0,u=a?[{type:a,attrs:c}]:void 0),d&&(t.split(t.mapping.map(s.pos),1,u),a&&!r&&!s.parentOffset&&s.parent.type!==a)){const e=t.mapping.map(s.before()),n=t.doc.resolve(e);s.node(-1).canReplaceWith(n.index(),n.index()+1,a)&&t.setNodeMarkup(t.mapping.map(s.before()),a)}e&&KU(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return!0},splitListItem:e=>({tr:t,state:n,dispatch:r,editor:i})=>{var o;const a=tU(e,n.schema),{$from:s,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||s.depth<2||!s.sameParent(l))return!1;const u=s.node(-1);if(u.type!==a)return!1;const d=i.extensionManager.attributes;if(0===s.parent.content.size&&s.node(-1).childCount===s.indexAfter(-1)){if(2===s.depth||s.node(-3).type!==a||s.index(-2)!==s.node(-2).childCount-1)return!1;if(r){let e=rz.empty;const n=s.index(-1)?1:s.index(-2)?2:3;for(let t=s.depth-n;t>=s.depth-3;t-=1)e=rz.from(s.node(t).copy(e));const r=s.indexAfter(-1)<s.node(-2).childCount?1:s.indexAfter(-2)<s.node(-3).childCount?2:3,i=WU(d,s.node().type.name,s.node().attrs),l=(null===(o=a.contentMatch.defaultType)||void 0===o?void 0:o.createAndFill(i))||void 0;e=e.append(rz.from(a.createAndFill(null,l)||void 0));const c=s.before(s.depth-(n-1));t.replace(c,s.after(-r),new cz(e,4-n,0));let u=-1;t.doc.nodesBetween(c,t.doc.content.size,((e,t)=>{if(u>-1)return!1;e.isTextblock&&0===e.content.size&&(u=t+1)})),u>-1&&t.setSelection(Qj.near(t.doc.resolve(u))),t.scrollIntoView()}return!0}const h=l.pos===s.end()?u.contentMatchAt(0).defaultType:null,p=WU(d,u.type.name,u.attrs),f=WU(d,s.node().type.name,s.node().attrs);t.delete(s.pos,l.pos);const m=h?[{type:a,attrs:p},{type:h,attrs:f}]:[{type:a,attrs:p}];if(!Ij(t.doc,s.pos,2))return!1;if(r){const{selection:e,storedMarks:o}=n,{splittableMarks:a}=i.extensionManager,l=o||e.$to.parentOffset&&e.$from.marks();if(t.split(s.pos,2,m).scrollIntoView(),!l||!r)return!0;const c=l.filter((e=>a.includes(e.type.name)));t.ensureMarks(c)}return!0},toggleList:(e,t,n,r={})=>({editor:i,tr:o,state:a,dispatch:s,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,p=tU(e,a.schema),f=tU(t,a.schema),{selection:m,storedMarks:g}=a,{$from:v,$to:y}=m,b=v.blockRange(y),x=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=UU((e=>GU(e.type.name,d)))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===p)return c.liftListItem(f);if(GU(w.node.type.name,d)&&p.validContent(w.node.content)&&s)return l().command((()=>(o.setNodeMarkup(w.pos,p),!0))).command((()=>YU(o,p))).command((()=>XU(o,p))).run()}return n&&x&&s?l().command((()=>{const e=u().wrapInList(p,r),t=x.filter((e=>h.includes(e.type.name)));return o.ensureMarks(t),!!e||c.clearNodes()})).wrapInList(p,r).command((()=>YU(o,p))).command((()=>XU(o,p))).run():l().command((()=>!!u().wrapInList(p,r)||c.clearNodes())).wrapInList(p,r).command((()=>YU(o,p))).command((()=>XU(o,p))).run()},toggleMark:(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,a=OU(e,r.schema);return qU(r,a,t)?i.unsetMark(a,{extendEmptyMarkRange:o}):i.setMark(a,t)},toggleNode:(e,t,n={})=>({state:r,commands:i})=>{const o=tU(e,r.schema),a=tU(t,r.schema);return NU(r,o,n)?i.setNode(a):i.setNode(o,n)},toggleWrap:(e,t={})=>({state:n,commands:r})=>{const i=tU(e,n.schema);return NU(n,i,t)?r.lift(i):r.wrapIn(i,t)},undoInputRule:()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(e))){if(t){const t=e.tr,n=o.transform;for(let e=n.steps.length-1;e>=0;e-=1)t.step(n.steps[e].invert(n.docs[e]));if(o.text){const n=t.doc.resolve(o.from).marks();t.replaceWith(o.from,o.to,e.schema.text(o.text,n))}else t.delete(o.from,o.to)}return!0}}return!1},unsetAllMarks:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach((t=>{e.removeMark(t.$from.pos,t.$to.pos)})),!0},unsetMark:(e,t={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:a=!1}=t,{selection:s}=n,l=OU(e,r.schema),{$from:c,empty:u,ranges:d}=s;if(!i)return!0;if(u&&a){let{from:e,to:t}=s;const r=null===(o=c.marks().find((e=>e.type===l)))||void 0===o?void 0:o.attrs,i=IU(c,l,r);i&&(e=i.from,t=i.to),n.removeMark(e,t,l)}else d.forEach((e=>{n.removeMark(e.$from.pos,e.$to.pos,l)}));return n.removeStoredMark(l),!0},updateAttributes:(e,t={})=>({tr:n,state:r,dispatch:i})=>{let o=null,a=null;const s=BU("string"==typeof e?e:e.name,r.schema);return!!s&&("node"===s&&(o=tU(e,r.schema)),"mark"===s&&(a=OU(e,r.schema)),i&&n.selection.ranges.forEach((e=>{const i=e.$from.pos,s=e.$to.pos;r.doc.nodesBetween(i,s,((e,r)=>{o&&o===e.type&&n.setNodeMarkup(r,void 0,{...e.attrs,...t}),a&&e.marks.length&&e.marks.forEach((o=>{if(a===o.type){const l=Math.max(r,i),c=Math.min(r+e.nodeSize,s);n.addMark(l,c,a.create({...o.attrs,...t}))}}))}))})),!0)},wrapIn:(e,t={})=>({state:n,dispatch:r})=>function(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,a=i.blockRange(o),s=a&&Tj(a,e,t);return!!s&&(r&&r(n.tr.wrap(a,s).scrollIntoView()),!0)}}(tU(e,n.schema),t)(n,r),wrapInList:(e,t={})=>({state:n,dispatch:r})=>qV(tU(e,n.schema),t)(n,r)});const QU=_U.create({name:"commands",addCommands:()=>({...JU})}),e$=_U.create({name:"editable",addProseMirrorPlugins(){return[new fN({key:new vN("editable"),props:{editable:()=>this.editor.options.editable}})]}}),t$=_U.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new fN({key:new vN("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),n$=_U.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first((({commands:e})=>[()=>e.undoInputRule(),()=>e.command((({tr:t})=>{const{selection:n,doc:r}=t,{empty:i,$anchor:o}=n,{pos:a,parent:s}=o,l=Kj.atStart(r).from===a;return!(!(i&&l&&s.type.isTextblock)||s.textContent.length)&&e.clearNodes()})),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()])),t=()=>this.editor.commands.first((({commands:e})=>[()=>e.deleteSelection(),()=>e.deleteCurrentNode(),()=>e.joinForward(),()=>e.selectNodeForward()])),n={Enter:()=>this.editor.commands.first((({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()])),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},i={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return LU()||jU()?i:r},addProseMirrorPlugins(){return[new fN({key:new vN("clearDocument"),appendTransaction:(e,t,n)=>{if(!e.some((e=>e.docChanged))||t.doc.eq(n.doc))return;const{empty:r,from:i,to:o}=t.selection,a=Kj.atStart(t.doc).from,s=Kj.atEnd(t.doc).to;if(r||i!==a||o!==s)return;if(0!==n.doc.textBetween(0,n.doc.content.size," "," ").length)return;const l=n.tr,c=KV({state:n,transaction:l}),{commands:u}=new YV({editor:this.editor,state:c});return u.clearNodes(),l.steps.length?l:void 0}})]}}),r$=_U.create({name:"tabindex",addProseMirrorPlugins(){return[new fN({key:new vN("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var i$=Object.freeze({__proto__:null,ClipboardTextSerializer:SU,Commands:QU,Editable:e$,FocusEvents:t$,Keymap:n$,Tabindex:r$});let o$=class extends XV{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout((()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))}),0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(e,t,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(null!==r)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style"+(n?`-${n}`:""),""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const n=iU(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(e){if(this.isDestroyed)return;const t="string"==typeof e?`${e}$`:e.key,n=this.state.reconfigure({plugins:this.state.plugins.filter((e=>!e.key.startsWith(t)))});this.view.updateState(n)}createExtensionManager(){const e=[...this.options.enableCoreExtensions?Object.values(i$):[],...this.options.extensions].filter((e=>["extension","node","mark"].includes(null==e?void 0:e.type)));this.extensionManager=new bU(e,this)}createCommandManager(){this.commandManager=new YV({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=VU(this.options.content,this.schema,this.options.parseOptions),t=DU(e,this.options.autofocus);this.view=new _V(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:hN.create({doc:e,selection:t||void 0})});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach((e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)})):void(this.capturedTransaction=e);const t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const r=e.getMeta("focus"),i=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return ZU(this.state,e)}isActive(e,t){const n="string"==typeof e?e:null,r="string"==typeof e?t:e;return function(e,t,n={}){if(!t)return NU(e,null,n)||qU(e,null,n);const r=BU(t,e.schema);return"node"===r?NU(e,t,n):"mark"===r&&qU(e,t,n)}(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return function(e,t){const n=aj.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return function(e,t){return kU(e,{from:0,to:e.content.size},t)}(this.state.doc,{blockSeparator:t,textSerializers:{...EU(this.schema),...n}})}get isEmpty(){return function(e){var t;const n=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),r=e.toJSON();return JSON.stringify(n)===JSON.stringify(r)}(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}};function a$(e){return new hU({find:e.find,handler:({state:t,range:n,match:r})=>{const i=oU(e.getAttributes,void 0,r);if(!1===i||null===i)return null;const{tr:o}=t,a=r[r.length-1],s=r[0];let l=n.to;if(a){const r=s.search(/\S/),c=n.from+s.indexOf(a),u=c+a.length;if(HU(n.from,n.to,t.doc).filter((t=>t.mark.type.excluded.find((n=>n===e.type&&n!==t.mark.type)))).filter((e=>e.to>c)).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+r,c),l=n.from+r+a.length,o.addMark(n.from+r,l,e.type.create(i||{})),o.removeStoredMark(e.type)}}})}function s$(e){return new hU({find:e.find,handler:({state:t,range:n,match:r})=>{const i=oU(e.getAttributes,void 0,r)||{},{tr:o}=t,a=n.from;let s=n.to;if(r[1]){let t=a+r[0].lastIndexOf(r[1]);t>s?t=s:s=t+r[1].length;const n=r[0][r[0].length-1];o.insertText(n,a+r[0].length-1),o.replaceWith(t,s,e.type.create(i))}else r[0]&&o.replaceWith(a,s,e.type.create(i))}})}function l$(e){return new hU({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),o=oU(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,o)}})}function c$(e){return new hU({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const o=oU(e.getAttributes,void 0,r)||{},a=t.tr.delete(n.from,n.to),s=a.doc.resolve(n.from).blockRange(),l=s&&Tj(s,e.type,o);if(!l)return null;if(a.wrap(s,l),e.keepMarks&&e.editor){const{selection:n,storedMarks:r}=t,{splittableMarks:i}=e.editor.extensionManager,o=r||n.$to.parentOffset&&n.$from.marks();if(o){const e=o.filter((e=>i.includes(e.type.name)));a.ensureMarks(e)}}if(e.keepAttributes){const t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";i().updateAttributes(t,o).run()}const c=a.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&Oj(a.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,c))&&a.join(n.from-1)}})}class u${constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=oU(JV(this,"addOptions",{name:this.name}))),this.storage=oU(JV(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new u$(e)}configure(e={}){const t=this.extend();return t.options=wU(this.options,e),t.storage=oU(JV(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new u$(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=oU(JV(t,"addOptions",{name:t.name})),t.storage=oU(JV(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:n}=e.state,r=e.state.selection.$from;if(r.pos===r.end()){const i=r.marks(),o=!!i.find((e=>(null==e?void 0:e.type.name)===t.name));if(!o)return!1;const a=i.find((e=>(null==e?void 0:e.type.name)===t.name));return a&&n.removeStoredMark(a),n.insertText(" ",r.pos),e.view.dispatch(n),!0}return!1}}let d$=class e{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=oU(JV(this,"addOptions",{name:this.name}))),this.storage=oU(JV(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new e(t)}configure(e={}){const t=this.extend();return t.options=wU(this.options,e),t.storage=oU(JV(t,"addStorage",{name:t.name,options:t.options})),t}extend(t={}){const n=new e(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=oU(JV(n,"addOptions",{name:n.name})),n.storage=oU(JV(n,"addStorage",{name:n.name,options:n.options})),n}};function h$(e){return new gU({find:e.find,handler:({state:t,range:n,match:r})=>{const i=oU(e.getAttributes,void 0,r);if(!1===i||null===i)return null;const{tr:o}=t,a=r[r.length-1],s=r[0];let l=n.to;if(a){const r=s.search(/\S/),c=n.from+s.indexOf(a),u=c+a.length;if(HU(n.from,n.to,t.doc).filter((t=>t.mark.type.excluded.find((n=>n===e.type&&n!==t.mark.type)))).filter((e=>e.to>c)).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+r,c),l=n.from+r+a.length,o.addMark(n.from+r,l,e.type.create(i||{})),o.removeStoredMark(e.type)}}})}class p$ extends o${constructor(){super(...arguments),this.contentComponent=null}}const f$=({renderers:e})=>$.createElement($.Fragment,null,Object.entries(e).map((([e,t])=>ld.createPortal(t.reactElement,t.element,e))));class m$ extends $.Component{constructor(e){super(e),this.editorContentRef=$.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?sd.flushSync(e):e()}setRenderer(e,t){this.maybeFlushSync((()=>{this.setState((({renderers:n})=>({renderers:{...n,[e]:t}})))}))}removeRenderer(e){this.maybeFlushSync((()=>{this.setState((({renderers:t})=>{const n={...t};return delete n[e],{renderers:n}}))}))}componentWillUnmount(){const{editor:e}=this.props;if(!e)return;if(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild)return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,...t}=this.props;return $.createElement($.Fragment,null,$.createElement("div",{ref:this.editorContentRef,...t}),$.createElement(f$,{renderers:this.state.renderers}))}}const g$=$.memo(m$),v$=U.createContext({onDragStart:void 0});$.forwardRef(((e,t)=>{const{onDragStart:n}=U.useContext(v$),r=e.as||"div";return $.createElement(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})}));const y$=(e={},t=[])=>{const[n,r]=U.useState(null),i=function(){const[,e]=U.useState(0);return()=>e((e=>e+1))}(),{onBeforeCreate:o,onBlur:a,onCreate:s,onDestroy:l,onFocus:c,onSelectionUpdate:u,onTransaction:d,onUpdate:h}=e,p=U.useRef(o),f=U.useRef(a),m=U.useRef(s),g=U.useRef(l),v=U.useRef(c),y=U.useRef(u),b=U.useRef(d),x=U.useRef(h);return U.useEffect((()=>{n&&(o&&(n.off("beforeCreate",p.current),n.on("beforeCreate",o),p.current=o),a&&(n.off("blur",f.current),n.on("blur",a),f.current=a),s&&(n.off("create",m.current),n.on("create",s),m.current=s),l&&(n.off("destroy",g.current),n.on("destroy",l),g.current=l),c&&(n.off("focus",v.current),n.on("focus",c),v.current=c),u&&(n.off("selectionUpdate",y.current),n.on("selectionUpdate",u),y.current=u),d&&(n.off("transaction",b.current),n.on("transaction",d),b.current=d),h&&(n.off("update",x.current),n.on("update",h),x.current=h))}),[o,a,s,l,c,u,d,h,n]),U.useEffect((()=>{let t=!0;const n=new p$(e);return r(n),n.on("transaction",(()=>{requestAnimationFrame((()=>{requestAnimationFrame((()=>{t&&i()}))}))})),()=>{n.destroy(),t=!1}}),t),n},b$=/^\s*>\s$/,x$=d$.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:e}){return["blockquote",nU(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[c$({find:b$,type:this.type})]}}),w$=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,_$=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,k$=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,E$=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,S$=u$.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],renderHTML({HTMLAttributes:e}){return["strong",nU(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[a$({find:w$,type:this.type}),a$({find:k$,type:this.type})]},addPasteRules(){return[h$({find:_$,type:this.type}),h$({find:E$,type:this.type})]}}),C$=d$.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",nU(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),T$=u$.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:e=>!!e.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:e}){return["span",nU(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const n=$U(e,this.type);return!!Object.entries(n).some((([,e])=>!!e))||t.unsetMark(this.name)}}}}),M$=/^\s*([-+*])\s$/,I$=d$.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:e}){return["ul",nU(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(C$.name,this.editor.getAttributes(T$.name)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=c$({find:M$,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=c$({find:M$,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(T$.name),editor:this.editor})),[e]}}),O$=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,A$=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,P$=u$.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:e}){return["code",nU(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[a$({find:O$,type:this.type})]},addPasteRules(){return[h$({find:A$,type:this.type})]}}),D$=/^```([a-z]+)?[\s\n]$/,L$=/^~~~([a-z]+)?[\s\n]$/,R$=d$.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,r=[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter((e=>e.startsWith(n))).map((e=>e.replace(n,"")))[0];return r||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:e,HTMLAttributes:t}){return["pre",nU(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!(!e||t.parent.type.name!==this.name)&&!(!n&&t.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith("\n\n");return!(!o||!a)&&e.chain().command((({tr:e})=>(e.delete(r.pos-2,r.pos),!0))).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type)return!1;if(i.parentOffset!==i.parent.nodeSize-2)return!1;const a=i.after();return void 0!==a&&(!r.nodeAt(a)&&e.commands.exitCode())}}},addInputRules(){return[l$({find:D$,type:this.type,getAttributes:e=>({language:e[1]})}),l$({find:L$,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new fN({key:new vN("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=null==i?void 0:i.mode;if(!n||!o)return!1;const{tr:a}=e.state;return a.replaceSelectionWith(this.type.create({language:o})),a.setSelection(Qj.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.insertText(n.replace(/\r\n?/g,"\n")),a.setMeta("paste",!0),e.dispatch(a),!0}}})]}}),z$=d$.create({name:"doc",topNode:!0,content:"block+"});function j$(e={}){return new fN({view:t=>new N$(t,e)})}class N${constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map((t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}}))}destroy(){this.handlers.forEach((({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t)))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent;if(n){let n=t.nodeBefore,r=t.nodeAfter;if(n||r){let t=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(t){let i=t.getBoundingClientRect(),o=n?i.bottom:i.top;n&&r&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:i.left,right:i.right,top:o-this.width/2,bottom:o+this.width/2}}}}if(!e){let t=this.editorView.coordsAtPos(this.cursorPos);e={left:t.left-this.width/2,right:t.left+this.width/2,top:t.top,bottom:t.bottom}}let r,i,o=this.editorView.dom.offsetParent;if(this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!o||o==document.body&&"static"==getComputedStyle(o).position)r=-pageXOffset,i=-pageYOffset;else{let e=o.getBoundingClientRect();r=e.left-o.scrollLeft,i=e.top-o.scrollTop}this.element.style.left=e.left-r+"px",this.element.style.top=e.top-i+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,i="function"==typeof r?r(this.editorView,t,e):r;if(t&&!i){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=Dj(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const B$=_U.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[j$(this.options)]}});class F$ extends Kj{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return F$.valid(n)?new F$(n):Kj.near(n)}content(){return cz.empty}eq(e){return e instanceof F$&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new F$(e.resolve(t.pos))}getBookmark(){return new V$(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0!=n)for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&F$.valid(e))return e;let r=e.pos,i=null;for(let n=e.depth;;n--){let o=e.node(n);if(t>0?e.indexAfter(n)<o.childCount:e.index(n)>0){i=o.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let a=e.doc.resolve(r);if(F$.valid(a))return a}for(;;){let o=t>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!tN.isSelectable(i)){e=e.doc.resolve(r+i.nodeSize*t),n=!1;continue e}break}i=o,r+=t;let a=e.doc.resolve(r);if(F$.valid(a))return a}return null}}}F$.prototype.visible=!1,F$.findFrom=F$.findGapCursorFrom,Kj.jsonID("gapcursor",F$);class V${constructor(e){this.pos=e}map(e){return new V$(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return F$.valid(t)?new F$(t):Kj.near(t)}}const U$=jV({ArrowLeft:$$("horiz",-1),ArrowRight:$$("horiz",1),ArrowUp:$$("vert",-1),ArrowDown:$$("vert",1)});function $$(e,t){const n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,i){let o=e.selection,a=t>0?o.$to:o.$from,s=o.empty;if(o instanceof Qj){if(!i.endOfTextblock(n)||0==a.depth)return!1;s=!1,a=e.doc.resolve(t>0?a.after():a.before())}let l=F$.findGapCursorFrom(a,t,s);return!!l&&(r&&r(e.tr.setSelection(new F$(l))),!0)}}function Z$(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!F$.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return!(i&&i.inside>-1&&tN.isSelectable(e.state.doc.nodeAt(i.inside))||(e.dispatch(e.state.tr.setSelection(new F$(r))),0))}function H$(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof F$))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=rz.empty;for(let a=r.length-1;a>=0;a--)i=rz.from(r[a].createAndFill(null,i));let o=e.state.tr.replace(n.pos,n.pos,new cz(i,0,0));return o.setSelection(Qj.near(o.doc.resolve(n.pos+1))),e.dispatch(o),!1}function W$(e){if(!(e.selection instanceof F$))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",eV.create(e.doc,[XF.widget(e.selection.head,t,{key:"gapcursor"})])}const q$=_U.create({name:"gapCursor",addProseMirrorPlugins:()=>[new fN({props:{decorations:W$,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&F$.valid(n)?new F$(n):null,handleClick:Z$,handleKeyDown:U$,handleDOMEvents:{beforeinput:H$}}})],extendNodeSchema(e){var t;return{allowGapCursor:null!==(t=oU(JV(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))&&void 0!==t?t:null}}}),G$=d$.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",nU(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command((()=>{const{selection:e,storedMarks:i}=n;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,s=i||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command((({tr:e,dispatch:t})=>{if(t&&s&&o){const t=s.filter((e=>a.includes(e.type.name)));e.ensureMarks(t)}return!0})).run()}))])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),K$=d$.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map((e=>({tag:`h${e}`,attrs:{level:e}})))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,nU(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode(this.name,e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce(((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})})),{})},addInputRules(){return this.options.levels.map((e=>l$({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}})))}});var Y$=200,X$=function(){};X$.prototype.append=function(e){return e.length?(e=X$.from(e),!this.length&&e||e.length<Y$&&this.leafAppend(e)||this.length<Y$&&e.leafPrepend(this)||this.appendInner(e)):this},X$.prototype.prepend=function(e){return e.length?X$.from(e).append(this):this},X$.prototype.appendInner=function(e){return new Q$(this,e)},X$.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?X$.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},X$.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},X$.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},X$.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},X$.from=function(e){return e instanceof X$?e:e&&e.length?new J$(e):X$.empty};var J$=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var i=t;i<n;i++)if(!1===e(this.values[i],r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var i=t-1;i>=n;i--)if(!1===e(this.values[i],r+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=Y$)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=Y$)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(X$);X$.empty=new J$([]);var Q$=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var i=this.left.length;return!(t<i&&!1===this.left.forEachInner(e,t,Math.min(n,i),r))&&!(n>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,n)-i,r+i))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,r){var i=this.left.length;return!(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(n,i)-i,r+i))&&!(n<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),n,r))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(X$);class eZ{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}t&&(n=this.remapping(i,this.items.length),r=n.maps.length);let o,a,s=e.tr,l=[],c=[];return this.items.forEach(((e,t)=>{if(!e.step)return n||(n=this.remapping(i,t+1),r=n.maps.length),r--,void c.push(e);if(n){c.push(new tZ(e.map));let t,i=e.step.map(n.slice(r));i&&s.maybeStep(i).doc&&(t=s.mapping.maps[s.mapping.maps.length-1],l.push(new tZ(t,void 0,void 0,l.length+c.length))),r--,t&&n.appendMap(t,r)}else s.maybeStep(e.step);return e.selection?(o=n?e.selection.map(n.slice(r)):e.selection,a=new eZ(this.items.slice(0,i).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:s,selection:o}}addTransform(e,t,n,r){let i=[],o=this.eventCount,a=this.items,s=!r&&a.length?a.get(a.length-1):null;for(let c=0;c<e.steps.length;c++){let n,l=e.steps[c].invert(e.docs[c]),u=new tZ(e.mapping.maps[c],l,t);(n=s&&s.merge(u))&&(u=n,c?i.pop():a=a.slice(0,a.length-1)),i.push(u),t&&(o++,t=void 0),r||(s=u)}let l=o-n.depth;return l>rZ&&(a=function(e,t){let n;return e.forEach(((e,r)=>{if(e.selection&&0==t--)return n=r,!1})),e.slice(n)}(a,l),o-=l),new eZ(a.append(i),o)}remapping(e,t){let n=new pj;return this.items.forEach(((t,r)=>{let i=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,i)}),e,t),n}addMaps(e){return 0==this.eventCount?this:new eZ(this.items.append(e.map((e=>new tZ(e)))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach((e=>{e.selection&&a--}),r);let s=t;this.items.forEach((t=>{let r=i.getMirror(--s);if(null==r)return;o=Math.min(o,r);let l=i.maps[r];if(t.step){let o=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(i.slice(s+1,r));c&&a++,n.push(new tZ(l,o,c))}else n.push(new tZ(l))}),r);let l=[];for(let d=t;d<o;d++)l.push(new tZ(i.maps[d]));let c=this.items.slice(0,r).append(l).append(n),u=new eZ(c,a);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach((t=>{t.step||e++})),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],i=0;return this.items.forEach(((o,a)=>{if(a>=e)r.push(o),o.selection&&i++;else if(o.step){let e=o.step.map(t.slice(n)),a=e&&e.getMap();if(n--,a&&t.appendMap(a,n),e){let s=o.selection&&o.selection.map(t.slice(n));s&&i++;let l,c=new tZ(a.invert(),e,s),u=r.length-1;(l=r.length&&r[u].merge(c))?r[u]=l:r.push(c)}}else o.map&&n--}),this.items.length,0),new eZ(X$.from(r.reverse()),i)}}eZ.empty=new eZ(X$.empty,0);class tZ{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new tZ(t.getMap().invert(),t,this.selection)}}}class nZ{constructor(e,t,n,r,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=i}}const rZ=20;function iZ(e){let t=[];return e.forEach(((e,n,r,i)=>t.push(r,i))),t}function oZ(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}function aZ(e,t,n,r){let i=cZ(t),o=uZ.get(t).spec.config,a=(r?e.undone:e.done).popEvent(t,i);if(!a)return;let s=a.selection.resolve(a.transform.doc),l=(r?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),o,i),c=new nZ(r?l:a.remaining,r?a.remaining:l,null,0,-1);n(a.transform.setSelection(s).setMeta(uZ,{redo:r,historyState:c}).scrollIntoView())}let sZ=!1,lZ=null;function cZ(e){let t=e.plugins;if(lZ!=t){sZ=!1,lZ=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){sZ=!0;break}}return sZ}const uZ=new vN("history"),dZ=new vN("closeHistory");function hZ(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new fN({key:uZ,state:{init:()=>new nZ(eZ.empty,eZ.empty,null,0,-1),apply:(t,n,r)=>function(e,t,n,r){let i,o=n.getMeta(uZ);if(o)return o.historyState;n.getMeta(dZ)&&(e=new nZ(e.done,e.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(a&&a.getMeta(uZ))return a.getMeta(uZ).redo?new nZ(e.done.addTransform(n,void 0,r,cZ(t)),e.undone,iZ(n.mapping.maps[n.steps.length-1]),e.prevTime,e.prevComposition):new nZ(e.done,e.undone.addTransform(n,void 0,r,cZ(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new nZ(e.done.rebased(n,i),e.undone.rebased(n,i),oZ(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new nZ(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),oZ(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let i=n.getMeta("composition"),o=0==e.prevTime||!a&&e.prevComposition!=i&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach(((e,r)=>{for(let i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)})),n}(n,e.prevRanges)),s=a?oZ(e.prevRanges,n.mapping):iZ(n.mapping.maps[n.steps.length-1]);return new nZ(e.done.addTransform(n,o?t.selection.getBookmark():void 0,r,cZ(t)),eZ.empty,s,n.time,null==i?e.prevComposition:i)}}(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?pZ:"historyRedo"==n?fZ:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}const pZ=(e,t)=>{let n=uZ.getState(e);return!(!n||0==n.done.eventCount||(t&&aZ(n,e,t,!1),0))},fZ=(e,t)=>{let n=uZ.getState(e);return!(!n||0==n.undone.eventCount||(t&&aZ(n,e,t,!0),0))},mZ=_U.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:e,dispatch:t})=>pZ(e,t),redo:()=>({state:e,dispatch:t})=>fZ(e,t)}),addProseMirrorPlugins(){return[hZ(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),gZ=d$.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:e}){return["hr",nU(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e})=>e().insertContent({type:this.name}).command((({tr:e,dispatch:t})=>{var n;if(t){const{$to:t}=e.selection,r=t.end();if(t.nodeAfter)e.setSelection(Qj.create(e.doc,t.pos));else{const i=null===(n=t.parent.type.contentMatch.defaultType)||void 0===n?void 0:n.create();i&&(e.insert(r,i),e.setSelection(Qj.create(e.doc,r)))}e.scrollIntoView()}return!0})).run()}},addInputRules(){return[s$({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),vZ=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,yZ=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,bZ=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,xZ=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,wZ=u$.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:e}){return["em",nU(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[a$({find:vZ,type:this.type}),a$({find:bZ,type:this.type})]},addPasteRules(){return[h$({find:yZ,type:this.type}),h$({find:xZ,type:this.type})]}}),_Z=d$.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",nU(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),kZ=d$.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",nU(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),EZ=u$.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:e=>!!e.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:e}){return["span",nU(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const n=$U(e,this.type);return!!Object.entries(n).some((([,e])=>!!e))||t.unsetMark(this.name)}}}}),SZ=/^(\d+)\.\s$/,CZ=d$.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return 1===t?["ol",nU(this.options.HTMLAttributes,n),0]:["ol",nU(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(kZ.name,this.editor.getAttributes(EZ.name)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=c$({find:SZ,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=c$({find:SZ,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(EZ.name)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[e]}}),TZ=d$.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",nU(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),MZ=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,IZ=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,OZ=u$.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML({HTMLAttributes:e}){return["s",nU(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[a$({find:MZ,type:this.type})]},addPasteRules(){return[h$({find:IZ,type:this.type})]}}),AZ=d$.create({name:"text",group:"inline"}),PZ=_U.create({name:"starterKit",addExtensions(){var e,t,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v;const y=[];return!1!==this.options.blockquote&&y.push(x$.configure(null===(e=this.options)||void 0===e?void 0:e.blockquote)),!1!==this.options.bold&&y.push(S$.configure(null===(t=this.options)||void 0===t?void 0:t.bold)),!1!==this.options.bulletList&&y.push(I$.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&y.push(P$.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&y.push(R$.configure(null===(i=this.options)||void 0===i?void 0:i.codeBlock)),!1!==this.options.document&&y.push(z$.configure(null===(o=this.options)||void 0===o?void 0:o.document)),!1!==this.options.dropcursor&&y.push(B$.configure(null===(a=this.options)||void 0===a?void 0:a.dropcursor)),!1!==this.options.gapcursor&&y.push(q$.configure(null===(s=this.options)||void 0===s?void 0:s.gapcursor)),!1!==this.options.hardBreak&&y.push(G$.configure(null===(l=this.options)||void 0===l?void 0:l.hardBreak)),!1!==this.options.heading&&y.push(K$.configure(null===(c=this.options)||void 0===c?void 0:c.heading)),!1!==this.options.history&&y.push(mZ.configure(null===(u=this.options)||void 0===u?void 0:u.history)),!1!==this.options.horizontalRule&&y.push(gZ.configure(null===(d=this.options)||void 0===d?void 0:d.horizontalRule)),!1!==this.options.italic&&y.push(wZ.configure(null===(h=this.options)||void 0===h?void 0:h.italic)),!1!==this.options.listItem&&y.push(_Z.configure(null===(p=this.options)||void 0===p?void 0:p.listItem)),!1!==this.options.orderedList&&y.push(CZ.configure(null===(f=this.options)||void 0===f?void 0:f.orderedList)),!1!==this.options.paragraph&&y.push(TZ.configure(null===(m=this.options)||void 0===m?void 0:m.paragraph)),!1!==this.options.strike&&y.push(OZ.configure(null===(g=this.options)||void 0===g?void 0:g.strike)),!1!==this.options.text&&y.push(AZ.configure(null===(v=this.options)||void 0===v?void 0:v.text)),y}}),DZ=()=>{const e=y$({extensions:[PZ],content:"<p>Hello World!</p>"});return J(g$,{editor:e})},LZ=VM`
  mutation GetChannel($id: Int!) {
    getChannel(id: $id) {
      id
      name
      detail
      ownerId
      lat
      lng
      createdAt
      updatedAt
      deletedAt
    }
  }
`,RZ=({match:e})=>{const t=_P(),n=kP((t=>QO(t,parseInt(e.params.id)))),[r,i]=U.useState("call"),[o,a]=U.useState(!1),[s]=tI(LZ,{onError:e=>{console.log(e)},onCompleted:({getChannel:e})=>{console.log(e),t(KO([e])),a(!0)}});return U.useEffect((()=>{n?(a(!0),t(YO(n.id))):s({variables:{id:parseInt(e.params.id)}})}),[null==n?void 0:n.id,e.params.id]),J(Rw,o?n?{children:Q(ow,{fullscreen:!0,children:[Q("div",{style:{display:"flex",flexDirection:"row",justifyContent:"start",marginLeft:5,marginTop:5},children:[J(iw,{style:{display:"inline-flex",flexDirection:"column",justifyContent:"center"},children:J(gw,{routerLink:"/map",style:{},children:J(Xw,{icon:x_})})}),J("div",{style:{display:"inline-flex",fontSize:32,fontWeight:"bold",flexDirection:"column",justifyContent:"center"},children:n.name})]}),J("div",{style:{display:"cluster"===r?"block":"none"}}),J("div",{style:{height:"calc(100% - 40px)",display:"draw"===r?"block":"none"},children:J(QR.Excalidraw,{theme:"dark"})}),J("div",{style:{display:"call"===r?"block":"none"},children:J(KR,{channel:n})}),J("div",{style:{display:"text"===r?"block":"none"},children:J(DZ,{})})]})}:{children:J(ow,{fullscreen:!0,children:Q("div",{style:{display:"flex",flexDirection:"row",justifyContent:"start",marginLeft:5,marginTop:5},children:[J(iw,{style:{display:"inline-flex",flexDirection:"column",justifyContent:"center"},children:J(gw,{routerLink:"/map",style:{},children:J(Xw,{icon:x_})})}),J("div",{style:{display:"inline-flex",fontSize:32,fontWeight:"bold",flexDirection:"column",justifyContent:"center"},children:"NOT FOUND..."})]})})}:{children:J(ow,{fullscreen:!0,children:Q("div",{style:{display:"flex",flexDirection:"row",justifyContent:"start",marginLeft:5,marginTop:5},children:[J(iw,{style:{display:"inline-flex",flexDirection:"column",justifyContent:"center"},children:J(gw,{routerLink:"/map",style:{},children:J(Xw,{icon:x_})})}),J("div",{style:{display:"inline-flex",fontSize:32,fontWeight:"bold",flexDirection:"column",justifyContent:"center"},children:"LOADING..."})]})})})};((e={})=>{"undefined"!=typeof document&&document.documentElement.classList.add("ion-ce"),ig(Object.assign({},e))})();const zZ=U.createContext({}),jZ=()=>{const{refresh:e,joinRoom:t,unpublishOwnFeed:n,unsubscribeFrom:r,disconnect:i}=(()=>{const[e,t]=U.useState(!1);U.useEffect((()=>(xL.init({debug:!0,dependencies:xL.useDefaultDependencies({adapter:CR}),callback:()=>{xL.log("Janus initialized")}}),TR=new xL({server:"wss://viaweaver.com:8989",apisecret:"jamnrocks",success:()=>{xL.log("Janus session connected")},error:e=>{xL.error(e)},destroyed:()=>{t((e=>!e)),console.log("Janus session destroyed")}}),()=>{var e;null===(e=TR)||void 0===e||e.destroy({})})),[]);const n=e=>{var t;let r=[];e&&r.push({type:"audio",capture:!0,recv:!1}),r.push({type:"video",capture:!0,recv:!1,simulcast:!1,svc:void 0}),null===(t=MR)||void 0===t||t.createOffer({tracks:r,success:t=>{var n;xL.debug("Got publisher SDP!"),xL.debug(t);let r={request:"configure",audio:e,video:!0};r.videocodec=qR,null===(n=MR)||void 0===n||n.send({message:r,jsep:t})},error:function(t){xL.error("WebRTC error:",t),e?n(!1):console.warn("WebRTC error... "+t.message)}})},r=()=>{var e;null===(e=MR)||void 0===e||e.send({message:{request:"unpublish"}})},i=e=>{var n;if(GR)setTimeout((()=>{i(e)}),500);else{if(RR){let t=null,n=null;for(let i in e){let r=e[i];for(let e in r){let i=r[e];if("video"===i.type&&"safari"===xL.webRTCAdapter.browserDetails.browser&&"vp8"===i.codec&&xL.safariVp8)console.warn("Publisher is using VP8 and Safari does not support it, disabling video");else if(i.disabled)xL.log("Disabled stream:",i),n||(n=[]),n.push({feed:i.id,mid:i}),delete VR[i.id][i.mid];else if(VR[i.id]&&VR[i.id][i.mid])xL.log("Already subscribed to stream:",i);else{if(!jR[i.id].slot){let e;for(let t=1;t<=6;t++)if(!zR[t]){e=t,zR[e]=i.id,jR[i.id].slot=e,jR[i.id].remoteVideos=0;break}}t||(t=[]),t.push({feed:i.id,mid:i.mid}),VR[i.id]||(VR[i.id]={}),VR[i.id][i.mid]=!0}}}if(!(t&&0!==t.length||n&&0!==n.length))return;let r={request:"update"};return t&&(r.subscribe=t),n&&(r.unsubscribe=n),void RR.send({message:r})}GR=!0,null===(n=TR)||void 0===n||n.attach({plugin:"janus.plugin.videoroom",opaqueId:IR,success:t=>{RR=t,$R={},xL.log("Plugin attached! ("+RR.getPlugin()+", id="+RR.getId()+")"),xL.log("  -- This is a multistream subscriber");let n=[];for(let i in e){let t=e[i];for(let e in t){let r=t[e];if("video"===r.type&&"safari"===xL.webRTCAdapter.browserDetails.browser&&"vp8"===r.codec&&xL.safariVp8)console.warn("Publisher is using VP8 and Safari does not support it, disabling video");else if(r.disabled)xL.log("Disabled stream:",r);else if(xL.log("Subscribed to "+r.id+"/"+r.mid+"?",VR),VR[r.id]&&VR[r.id][r.mid])xL.log("Already subscribed to stream, skipping: ",r);else{if(!jR[r.id].slot){let e;for(let t=1;t<=6;t++)if(!zR[t]){e=t,zR[e]=r.id,jR[r.id].slot=e,jR[r.id].remoteVideos=0;break}}n.push({feed:r.id,mid:r.mid}),VR[r.id]||(VR[r.id]={}),VR[r.id][r.mid]=!0}}}let r={request:"join",room:OR,ptype:"subscriber",streams:n,use_msid:!1,private_id:LR};RR.send({message:r})},error:e=>{xL.error("  -- Error attaching plugin...",e)},iceState:e=>{xL.log("ICE state (remote feed) changed to "+e)},webrtcState:e=>{xL.log("Janus says this WebRTC PeerConnection (remote feed) is "+(e?"up":"down")+" now")},slowLink:(e,t,n)=>{xL.warn("Janus reports problems "+(e?"sending":"receiving")+" packets on mid "+n+" ("+t+" lost packets)")},onmessage:(e,n)=>{t((e=>!e)),xL.debug(" ::: Got a message (subscriber) :::",e);let r=e.videoroom;if(xL.debug("Event: "+r),e.error)console.warn(e.error);else if(r)if("attached"===r)GR=!1,xL.log("Successfully attached to feed in room "+e.room);else if("event"===r){let t=e.mid,n=e.substream,r=e.temporal;if(null!=n||null!=r){let e=BR[t];HR[e]||(HR[e]=!0)}let i=e.spatial_layer;if(r=e.temporal_layer,null!=i||null!=r){let e=BR[t];WR[e]||(WR[e]=!0)}}if(e.streams)for(let t in e.streams){let n=e.streams[t].mid;NR[n]=e.streams[t];let r=jR[e.streams[t].feed_id];r&&r.slot&&(BR[n]=r.slot,FR[r.slot]=n)}var i;n&&(xL.debug("Handling SDP as well...",n),null===(i=RR)||void 0===i||i.createAnswer({jsep:n,tracks:[{type:"data",capture:!0}],success:e=>{var t;xL.debug("Got SDP!"),xL.debug(e);let n={request:"start",room:OR};null===(t=RR)||void 0===t||t.send({message:n,jsep:e})},error:function(e){xL.error("WebRTC error:",e)}}))},onlocaltrack:(e,t)=>{},onremotetrack:(e,n,r)=>{t((e=>!e)),xL.debug("Remote track (mid="+n+") "+(r?"added":"removed")+":",e);let i=NR[n],o=jR[i.feed_id];xL.debug(" >> This track is coming from feed "+i.feed_id+":",o);let a=BR[n];if(o&&!a&&(a=o.slot,BR[n]=o.slot,FR[o.slot]=n),xL.debug(" >> mid "+n+" is in slot "+a),!r)return"video"===e.kind&&o&&(o.remoteVideos--,o.remoteVideos),delete $R[n],delete BR[n],void delete FR[a];if(o.spinner&&(o.spinner.stop(),o.spinner=null),"audio"===e.kind){let t=new MediaStream([e]);$R[n]=t,xL.log("Created remote audio stream:",t),o.remoteVideos}else{o.remoteVideos++;let t=new MediaStream([e]);$R[n]=t,xL.log("Created remote video stream:",t)}},oncleanup:()=>{t((e=>!e)),xL.log(" ::: Got a cleanup notification (remote feed) :::");for(let e=1;e<6;e++)ZR[e]&&clearInterval(ZR[e]),ZR[e]=null,jR[e].simulcastStarted=!1,jR[e].svcStarted=!1,jR[e].remoteVideos=0;$R={}}})}},o=e=>{let t=jR[e];if(!t)return;xL.debug("Feed "+e+" ("+t.display+") has left the room, detaching"),ZR[t.slot]&&clearInterval(ZR[t.slot]),ZR[t.slot]=null,delete HR[t.slot],delete WR[t.slot],delete zR[t.slot],zR.slot=0,delete jR[e];let n={request:"unsubscribe",streams:[{feed:parseInt(e)}]};null!=RR&&RR.send({message:n}),delete VR[e]};return{refresh:e,toggleMute:function(){var e;let t=null===(e=MR)||void 0===e?void 0:e.isAudioMuted();var n,r;xL.log((t?"Unmuting":"Muting")+" local stream..."),t?null===(n=MR)||void 0===n||n.unmuteAudio():null===(r=MR)||void 0===r||r.muteAudio()},publishOwnFeed:n,unpublishOwnFeed:r,joinRoom:(e,r,a)=>{OR=e,PR=r,AR=a;let s={request:"join",id:PR,room:OR,ptype:"publisher",display:AR},l={request:"exists",room:OR};const c=()=>{var e;null===(e=MR)||void 0===e||e.send({message:l,success:e=>{if(xL.log("Exists",e),e.exists){var t;null===(t=MR)||void 0===t||t.send({message:s,success:e=>{xL.log("Register success",e)}})}else{var n;let e={request:"create",room:OR,videocodec:qR};null===(n=MR)||void 0===n||n.send({message:e,success:e=>{var t;xL.log("Create success",e),null===(t=MR)||void 0===t||t.send({message:s,success:e=>{xL.log("Register success",e)}})}})}},error:e=>{xL.error("Exists error",e)}})};var u;MR?c():null===(u=TR)||void 0===u||u.attach({plugin:"janus.plugin.videoroom",opaqueId:"videoroomtest",success:e=>{t((e=>!e)),MR=e,xL.log("Plugin attached! ("+MR.getPlugin()+", id="+MR.getId()+")"),xL.log("  -- This is a publisher/manager"),c()},error:e=>{xL.error("Janus plugin error",e)},consentDialog:e=>{xL.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:e=>{xL.log("ICE state changed to",e)},mediaState:(e,t,n)=>{xL.log("Janus "+(t?"started":"stopped")+" receiving our "+e+" (mid="+n+")")},webrtcState:e=>{xL.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},slowLink:(e,t,n)=>{xL.warn("Janus reports problems "+(e?"sending":"receiving")+" packets on mid "+n+" ("+t+" lost packets)")},onmessage:(e,r)=>{t((e=>!e)),xL.debug(" ::: Got a message (publisher) :::",e);let a=e.videoroom;if(xL.debug("Event: "+a),null!=a&&null!=a)if("joined"===a){if(PR=e.id,LR=e.private_id,xL.log("Successfully joined room "+e.room+" with ID "+PR),n(!0),e.publishers){let t=e.publishers;xL.debug("Got a list of available publishers/feeds:",t);let n=null;for(let e in t){var s,l;if(t[e].dummy)continue;let r=t[e].id,i=t[e].display,o=t[e].streams;for(let e in o){let t=o[e];t.id=r,t.display=i}let a=jR[r]?null===(s=jR[r])||void 0===s?void 0:s.slot:null,c=jR[r]?null===(l=jR[r])||void 0===l?void 0:l.remoteVideos:0;jR[r]={id:r,display:i,streams:o,slot:a,remoteVideos:c},xL.debug("  >> ["+r+"] "+i+":",o),n||(n=[]),n.push(o)}n&&i(n)}}else if("destroyed"===a)xL.warn("The room has been destroyed!");else if("event"===a)if(e.streams){let t=e.streams;for(let e in t){let n=t[e];n.id=PR,n.display=AR}jR[PR]={id:PR,display:AR,streams:t}}else if(e.publishers){let t=e.publishers;xL.debug("Got a list of available publishers/feeds:",t);let n=null;for(let e in t){if(t[e].dummy)continue;let r=t[e].id,i=t[e].display,o=t[e].streams;for(let e in o){let t=o[e];t.id=r,t.display=i}let a=jR[r]?jR[r].slot:null,s=jR[r]?jR[r].remoteVideos:0;jR[r]={id:r,display:i,streams:o,slot:a,remoteVideos:s},xL.debug("  >> ["+r+"] "+i+":",o),n||(n=[]),n.push(o)}n&&i(n)}else if(e.leaving){let t=e.leaving;xL.log("Publisher left: "+t),o(t)}else if(e.unpublished){let t=e.unpublished;var c;if(xL.log("Publisher left: "+t),"ok"===t)return null===(c=MR)||void 0===c||c.hangup(),void(MR=null);o(t)}else e.error&&(426===e.error_code?console.warn("No such room exists"):console.error(e.error));if(r){var u;xL.debug("Handling SDP as well...",r),null===(u=MR)||void 0===u||u.handleRemoteJsep({jsep:r});let t=e.audio_codec;DR&&DR.getAudioTracks()&&DR.getAudioTracks().length>0&&!t&&console.warn("Our audio stream has been rejected, viewers won't hear us");let n=e.video_codec;DR&&DR.getVideoTracks()&&DR.getVideoTracks().length>0&&!n&&console.warn("Our video stream has been rejected, viewers won't see us")}},onlocaltrack:(e,n)=>{var r,i;t((e=>!e)),xL.debug(" ::: Got a local track event :::"),xL.debug("Local track "+(n?"added":"removed")+":",e);let o=e.id;if(!n){let t=UR[o];if(t)try{let e=t.getTracks();for(let t in e){let n=e[t];n&&n.stop()}}catch(a){console.warn(a)}return e.kind,void delete UR[o]}if(!UR[o]){if("audio"===e.kind);else{let t=new MediaStream([e]);UR[o]=t,xL.log("Created local video stream:",t),xL.log(t.getTracks()),xL.log(t.getVideoTracks())}"completed"!==(null===(r=MR)||void 0===r?void 0:r.webrtcStuff.pc.iceConnectionState)&&"connected"!==(null===(i=MR)||void 0===i?void 0:i.webrtcStuff.pc.iceConnectionState)&&console.log("Publishing...")}},onremotetrack:(e,t,n)=>{},oncleanup:()=>{t((e=>!e)),xL.log(" ::: Got a cleanup notification; we are unpublished now :::"),DR=null,delete jR[PR],UR={}}})},subscribeTo:i,unsubscribeFrom:o,disconnect:()=>{var e;r(),null===(e=MR)||void 0===e||e.send({message:{request:"leave"}}),Object.keys(jR).forEach((e=>{o(e)}))}}})(),o=U.useRef(null);return J(Aw,{children:Q(zZ.Provider,{value:{authModal:o,refresh:e,joinRoom:t,unpublishOwnFeed:n,unsubscribeFrom:r,disconnect:i},children:[Q(v_,{children:[J(ED,{}),Q(Kw,{children:[Q(Vw,{style:{marginTop:pw("ios")?95:60},children:[J(Jh,{exact:!0,path:"/meme",component:__}),J(Jh,{exact:!0,path:"/map",component:MP}),J(Jh,{exact:!0,path:"/map/channel/:id",component:RZ}),J(Jh,{exact:!0,path:"/deal",component:PP}),J(Jh,{exact:!0,path:"/deal/create",component:yL}),J(Jh,{exact:!0,path:"/deal/deal/:id",component:pD}),J(Jh,{exact:!0,path:"/",children:J(qh,{to:"/map"})})]}),Q(Hw,{slot:"bottom",children:[Q(Uw,{tab:"meme",href:"/meme",children:[J(Xw,{"aria-hidden":"true",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M464 464H48a16 16 0 01-14.07-23.62l208-384a16 16 0 0128.14 0l208 384A16 16 0 01464 464z'/></svg>"}),J(cw,{children:"MEME"})]}),Q(Uw,{tab:"map",href:"/map",children:[J(Xw,{"aria-hidden":"true",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 464c-114.69 0-208-93.31-208-208S141.31 48 256 48s208 93.31 208 208-93.31 208-208 208z'/></svg>"}),J(cw,{children:"MAP"})]}),Q(Uw,{tab:"deal",href:"/deal",children:[J(Xw,{"aria-hidden":"true",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M416 464H96a48.05 48.05 0 01-48-48V96a48.05 48.05 0 0148-48h320a48.05 48.05 0 0148 48v320a48.05 48.05 0 01-48 48z'/></svg>"}),J(cw,{children:"DEAL"})]})]})]})]}),J(sL,{}),J(cL,{})]})})};var NZ,BZ,FZ=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n}return Mg(t,e),t.prototype.request=function(e){var t=this;return new aS((function(n){return t.client.subscribe(Ig(Ig({},e),{query:Hk(e.query)}),{next:n.next.bind(n),complete:n.complete.bind(n),error:function(e){if(e instanceof Error)return n.error(e);var t,r=oE(t=e)&&"code"in t&&"reason"in t;return r||function(e){var t;return oE(e)&&(null===(t=e.target)||void 0===t?void 0:t.readyState)===WebSocket.CLOSED}(e)?n.error(new Error("Socket closed".concat(r?" with event ".concat(e.code):"").concat(r?" ".concat(e.reason):""))):n.error(new HS({graphQLErrors:Array.isArray(e)?e:[e]}))}})}))},t}(NS);function VZ(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function UZ(e){return"object"===VZ(e)}function $Z(e,t){return e.length<124?e:t}function ZZ(e){if(!UZ(e))throw new Error(`Message is expected to be an object, but got ${VZ(e)}`);if(!e.type)throw new Error("Message is missing the 'type' property");if("string"!=typeof e.type)throw new Error(`Message is expects the 'type' property to be a string, but got ${VZ(e.type)}`);switch(e.type){case BZ.ConnectionInit:case BZ.ConnectionAck:case BZ.Ping:case BZ.Pong:if(null!=e.payload&&!UZ(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${e.payload}"`);break;case BZ.Subscribe:if("string"!=typeof e.id)throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${VZ(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!UZ(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${VZ(e.payload)}`);if("string"!=typeof e.payload.query)throw new Error(`"${e.type}" message payload expects the 'query' property to be a string, but got ${VZ(e.payload.query)}`);if(null!=e.payload.variables&&!UZ(e.payload.variables))throw new Error(`"${e.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${VZ(e.payload.variables)}`);if(null!=e.payload.operationName&&"string"!==VZ(e.payload.operationName))throw new Error(`"${e.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${VZ(e.payload.operationName)}`);if(null!=e.payload.extensions&&!UZ(e.payload.extensions))throw new Error(`"${e.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${VZ(e.payload.extensions)}`);break;case BZ.Next:if("string"!=typeof e.id)throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${VZ(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!UZ(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${VZ(e.payload)}`);break;case BZ.Error:if("string"!=typeof e.id)throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${VZ(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(t=e.payload,!(Array.isArray(t)&&t.length>0&&t.every((e=>"message"in e))))throw new Error(`"${e.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(e.payload)}`);break;case BZ.Complete:if("string"!=typeof e.id)throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${VZ(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);break;default:throw new Error(`Invalid message 'type' property "${e.type}"`)}var t;return e}function HZ(e,t){return ZZ(e),JSON.stringify(e,t)}!function(e){e[e.InternalServerError=4500]="InternalServerError",e[e.InternalClientError=4005]="InternalClientError",e[e.BadRequest=4400]="BadRequest",e[e.BadResponse=4004]="BadResponse",e[e.Unauthorized=4401]="Unauthorized",e[e.Forbidden=4403]="Forbidden",e[e.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",e[e.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",e[e.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",e[e.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",e[e.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests"}(NZ||(NZ={})),function(e){e.ConnectionInit="connection_init",e.ConnectionAck="connection_ack",e.Ping="ping",e.Pong="pong",e.Subscribe="subscribe",e.Next="next",e.Error="error",e.Complete="complete"}(BZ||(BZ={}));var WZ=globalThis&&globalThis.__await||function(e){return this instanceof WZ?(this.v=e,this):new WZ(e)},qZ=globalThis&&globalThis.__asyncGenerator||function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof WZ?Promise.resolve(e.value.v).then(l,c):u(o[0][2],e)}(i[e](t))}catch($A){u(o[0][3],$A)}}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}};function GZ(e){return UZ(e)&&"code"in e&&"reason"in e}window.EXCALIDRAW_ASSET_PATH="/excalidraw-assets";const KZ=new FZ(function(e){const{url:t,connectionParams:n,lazy:r=!0,onNonLazyError:i=console.error,lazyCloseTimeout:o=0,keepAlive:a=0,disablePong:s,connectionAckWaitTimeout:l=0,retryAttempts:c=5,retryWait:u=async function(e){let t=1e3;for(let n=0;n<e;n++)t*=2;await new Promise((e=>setTimeout(e,t+Math.floor(2700*Math.random()+300))))},shouldRetry:d=GZ,isFatalConnectionProblem:h,on:p,webSocketImpl:f,generateID:m=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},jsonMessageReplacer:g,jsonMessageReviver:v}=e;let y;if(f){if(!("function"==typeof(b=f)&&"constructor"in b&&"CLOSED"in b&&"CLOSING"in b&&"CONNECTING"in b&&"OPEN"in b))throw new Error("Invalid WebSocket implementation provided");y=f}else"undefined"!=typeof WebSocket?y=WebSocket:"undefined"!=typeof global?y=global.WebSocket||global.MozWebSocket:"undefined"!=typeof window&&(y=window.WebSocket||window.MozWebSocket);var b;if(!y)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");const x=y,w=(()=>{const e=(()=>{const e={};return{on:(t,n)=>(e[t]=n,()=>{delete e[t]}),emit(t){var n;"id"in t&&(null===(n=e[t.id])||void 0===n||n.call(e,t))}}})(),t={connecting:(null==p?void 0:p.connecting)?[p.connecting]:[],opened:(null==p?void 0:p.opened)?[p.opened]:[],connected:(null==p?void 0:p.connected)?[p.connected]:[],ping:(null==p?void 0:p.ping)?[p.ping]:[],pong:(null==p?void 0:p.pong)?[p.pong]:[],message:(null==p?void 0:p.message)?[e.emit,p.message]:[e.emit],closed:(null==p?void 0:p.closed)?[p.closed]:[],error:(null==p?void 0:p.error)?[p.error]:[]};return{onMessage:e.on,on(e,n){const r=t[e];return r.push(n),()=>{r.splice(r.indexOf(n),1)}},emit(e,...n){for(const r of[...t[e]])r(...n)}}})();function _(e){const t=[w.on("error",(n=>{t.forEach((e=>e())),e(n)})),w.on("closed",(n=>{t.forEach((e=>e())),e(n)}))]}let k,E,S=0,C=!1,T=0,M=!1;async function I(){clearTimeout(E);const[e,r]=await(null!=k?k:k=new Promise(((e,r)=>(async()=>{if(C){if(await u(T),!S)return k=void 0,r({code:1e3,reason:"All Subscriptions Gone"});T++}w.emit("connecting");const i=new x("function"==typeof t?await t():t,"graphql-transport-ws");let o,c;function d(){isFinite(a)&&a>0&&(clearTimeout(c),c=setTimeout((()=>{i.readyState===x.OPEN&&(i.send(HZ({type:BZ.Ping})),w.emit("ping",!1,void 0))}),a))}_((e=>{k=void 0,clearTimeout(o),clearTimeout(c),r(e),GZ(e)&&4499===e.code&&(i.close(4499,"Terminated"),i.onerror=null,i.onclose=null)})),i.onerror=e=>w.emit("error",e),i.onclose=e=>w.emit("closed",e),i.onopen=async()=>{try{w.emit("opened",i);const e="function"==typeof n?await n():n;if(i.readyState!==x.OPEN)return;i.send(HZ(e?{type:BZ.ConnectionInit,payload:e}:{type:BZ.ConnectionInit},g)),isFinite(l)&&l>0&&(o=setTimeout((()=>{i.close(NZ.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")}),l)),d()}catch(e){w.emit("error",e),i.close(NZ.InternalClientError,$Z(e instanceof Error?e.message:new Error(e).message,"Internal client error"))}};let h=!1;i.onmessage=({data:t})=>{try{const n=function(e,t){return ZZ("string"==typeof e?JSON.parse(e,t):e)}(t,v);if(w.emit("message",n),"ping"===n.type||"pong"===n.type)return w.emit(n.type,!0,n.payload),void("pong"===n.type?d():s||(i.send(HZ(n.payload?{type:BZ.Pong,payload:n.payload}:{type:BZ.Pong})),w.emit("pong",!1,n.payload)));if(h)return;if(n.type!==BZ.ConnectionAck)throw new Error(`First message cannot be of type ${n.type}`);clearTimeout(o),h=!0,w.emit("connected",i,n.payload),C=!1,T=0,e([i,new Promise(((e,t)=>_(t)))])}catch(n){i.onmessage=null,w.emit("error",n),i.close(NZ.BadResponse,$Z(n instanceof Error?n.message:new Error(n).message,"Bad response"))}}})())));e.readyState===x.CLOSING&&await r;let i=()=>{};const c=new Promise((e=>i=e));return[e,i,Promise.race([c.then((()=>{if(!S){const t=()=>e.close(1e3,"Normal Closure");isFinite(o)&&o>0?E=setTimeout((()=>{e.readyState===x.OPEN&&t()}),o):t()}})),r])]}function O(e){if(GZ(e)&&(function(e){return![1e3,1001,1006,1005,1012,1013,1013].includes(e)&&e>=1e3&&e<=1999}(e.code)||[NZ.InternalServerError,NZ.InternalClientError,NZ.BadRequest,NZ.BadResponse,NZ.Unauthorized,NZ.SubprotocolNotAcceptable,NZ.SubscriberAlreadyExists,NZ.TooManyInitialisationRequests].includes(e.code)))throw e;if(M)return!1;if(GZ(e)&&1e3===e.code)return S>0;if(!c||T>=c)throw e;if(!d(e))throw e;if(null==h?void 0:h(e))throw e;return C=!0}return r||(async()=>{for(S++;;)try{const[,,e]=await I();await e}catch(e){try{if(!O(e))return}catch(e){return null==i?void 0:i(e)}}})(),{on:w.on,subscribe(e,t){const n=m(e);let r=!1,i=!1,o=()=>{S--,r=!0};return(async()=>{for(S++;;)try{const[a,s,l]=await I();if(r)return s();const c=w.onMessage(n,(e=>{switch(e.type){case BZ.Next:return void t.next(e.payload);case BZ.Error:return i=!0,r=!0,t.error(e.payload),void o();case BZ.Complete:return r=!0,void o()}}));return a.send(HZ({id:n,type:BZ.Subscribe,payload:e},g)),o=()=>{r||a.readyState!==x.OPEN||a.send(HZ({id:n,type:BZ.Complete},g)),S--,r=!0,s()},void(await l.finally(c))}catch(a){if(!O(a))return}})().then((()=>{i||t.complete()})).catch((e=>{t.error(e)})),()=>{r||o()}},iterate(e){const t=[],n={done:!1,error:null,resolve:()=>{}},r=this.subscribe(e,{next(e){t.push(e),n.resolve()},error(e){n.done=!0,n.error=e,n.resolve()},complete(){n.done=!0,n.resolve()}}),i=function(){return qZ(this,arguments,(function*(){for(;;){for(t.length||(yield WZ(new Promise((e=>n.resolve=e))));t.length;)yield yield WZ(t.shift());if(n.error)throw n.error;if(n.done)return yield WZ(void 0)}}))}();return i.throw=async e=>(n.done||(n.done=!0,n.error=e,n.resolve()),{done:!0,value:void 0}),i.return=async()=>(r(),{done:!0,value:void 0}),i},async dispose(){if(M=!0,k){const[e]=await k;e.close(1e3,"Normal Closure")}},terminate(){k&&w.emit("closed",{code:4499,reason:"Terminated",wasClean:!1})}}}({url:!pw("android")&&!pw("ios")||pw("mobileweb")?window.location.origin.replace(/^http/,"ws")+"/graphql":`ws://${HD}/graphql`})),YZ=nC({uri:!pw("ios")&&!pw("android")||pw("mobileweb")?window.location.origin+"/graphql":`https://${HD}/graphql`,credentials:!pw("ios")&&!pw("android")||pw("mobileweb")?"same-origin":"include"});var XZ;const JZ=new DM({link:BS((({query:e})=>{const t=_E(e);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),KZ,(XZ=async(e,{headers:t})=>({headers:{...t,accesstoken:(await ZD.get({key:WD})).value}}),new NS((function(e,t){var n=Og(e,[]);return new aS((function(r){var i,o=!1;return Promise.resolve(n).then((function(t){return XZ(t,e.getContext())})).then(e.setContext).then((function(){o||(i=t(e).subscribe({next:r.next.bind(r),error:r.error.bind(r),complete:r.complete.bind(r)}))})).catch(r.error.bind(r)),function(){o=!0,i&&i.unsubscribe()}}))}))).concat(YZ)),cache:new mM}),QZ=document.getElementById("root");cd(QZ).render(J($.StrictMode,{children:J(CD,{clientId:"752107153785-ii093j9qoppa2kvcifo1doqmogg0b4m3.apps.googleusercontent.com",children:J(XM,{client:JZ,children:J(iP,{store:wP,children:J(jZ,{})})})})}))}}}));
